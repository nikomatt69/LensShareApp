(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9498],{88559:function(module,__unused_webpack_exports,__webpack_require__){var process=__webpack_require__(34155),Buffer=__webpack_require__(48764).Buffer;/*! For license information please see index.js.LICENSE.txt */!function(e,t){module.exports=t()}(0,()=>(()=>{var __webpack_modules__={656:(e,t,r)=>{"use strict";let i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.schnorr=t.verify=t.signSync=t.sign=t.getSharedSecret=t.recoverPublicKey=t.getPublicKey=t.Signature=t.Point=t.CURVE=void 0;let o=r(159),s=BigInt(0),a=BigInt(1),l=BigInt(2),u=BigInt(3),c=BigInt(8),d=Object.freeze({a:s,b:BigInt(7),P:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:a,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")});t.CURVE=d;let h=(e,t)=>(e+t/l)/t,f={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar(e){let{n:t}=d,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-a*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,s=BigInt("0x100000000000000000000000000000000"),l=h(o*e,t),u=h(-i*e,t),c=J(e-l*r-u*n,t),f=J(-l*i-u*o,t),p=c>s,y=f>s;if(p&&(c=t-c),y&&(f=t-f),c>s||f>s)throw Error("splitScalarEndo: Endomorphism failed, k="+e);return{k1neg:p,k1:c,k2neg:y,k2:f}}},p=32,y=32,m=p+1,v=2*p+1;function g(e){let{a:t,b:r}=d,i=J(e*e),n=J(i*e);return J(n+t*e+r)}let b=d.a===s;class w extends Error{constructor(e){super(e)}}function _(e){if(!(e instanceof S))throw TypeError("JacobianPoint expected")}class S{constructor(e,t,r){this.x=e,this.y=t,this.z=r}static fromAffine(e){if(!(e instanceof N))throw TypeError("JacobianPoint#fromAffine: expected Point");return e.equals(N.ZERO)?S.ZERO:new S(e.x,e.y,a)}static toAffineBatch(e){let t=function(e,t=d.P){let r=Array(e.length),i=q(e.reduce((e,i,n)=>i===s?e:(r[n]=e,J(e*i,t)),a),t);return e.reduceRight((e,i,n)=>i===s?e:(r[n]=J(e*r[n],t),J(e*i,t)),i),r}(e.map(e=>e.z));return e.map((e,r)=>e.toAffine(t[r]))}static normalizeZ(e){return S.toAffineBatch(e).map(S.fromAffine)}equals(e){_(e);let{x:t,y:r,z:i}=this,{x:n,y:o,z:s}=e,a=J(i*i),l=J(s*s),u=J(t*l),c=J(n*a),d=J(J(r*s)*l),h=J(J(o*i)*a);return u===c&&d===h}negate(){return new S(this.x,J(-this.y),this.z)}double(){let{x:e,y:t,z:r}=this,i=J(e*e),n=J(t*t),o=J(n*n),s=e+n,a=J(l*(J(s*s)-i-o)),d=J(u*i),h=J(d*d),f=J(h-l*a),p=J(d*(a-f)-c*o),y=J(l*t*r);return new S(f,p,y)}add(e){_(e);let{x:t,y:r,z:i}=this,{x:n,y:o,z:a}=e;if(n===s||o===s)return this;if(t===s||r===s)return e;let u=J(i*i),c=J(a*a),d=J(t*c),h=J(n*u),f=J(J(r*a)*c),p=J(J(o*i)*u),y=J(h-d),m=J(p-f);if(y===s)return m===s?this.double():S.ZERO;let v=J(y*y),g=J(y*v),b=J(d*v),w=J(m*m-g-l*b),E=J(m*(b-w)-f*g),k=J(i*a*y);return new S(w,E,k)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let t=S.ZERO;if("bigint"==typeof e&&e===s)return t;let r=L(e);if(r===a)return this;if(!b){let i=t,n=this;for(;r>s;)r&a&&(i=i.add(n)),n=n.double(),r>>=a;return i}let{k1neg:o,k1:l,k2neg:u,k2:c}=f.splitScalar(r),d=t,h=t,p=this;for(;l>s||c>s;)l&a&&(d=d.add(p)),c&a&&(h=h.add(p)),p=p.double(),l>>=a,c>>=a;return o&&(d=d.negate()),u&&(h=h.negate()),h=new S(J(h.x*f.beta),h.y,h.z),d.add(h)}precomputeWindow(e){let t=b?128/e+1:256/e+1,r=[],i=this,n=i;for(let o=0;o<t;o++){n=i,r.push(n);for(let s=1;s<2**(e-1);s++)n=n.add(i),r.push(n);i=n.double()}return r}wNAF(e,t){!t&&this.equals(S.BASE)&&(t=N.BASE);let r=t&&t._WINDOW_SIZE||1;if(256%r)throw Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=t&&k.get(t);i||(i=this.precomputeWindow(r),t&&1!==r&&(i=S.normalizeZ(i),k.set(t,i)));let n=S.ZERO,o=S.BASE,s=1+(b?128/r:256/r),l=2**(r-1),u=BigInt(2**r-1),c=2**r,d=BigInt(r);for(let h=0;h<s;h++){let f=h*l,p=Number(e&u);e>>=d,p>l&&(p-=c,e+=a);let y=f,m=f+Math.abs(p)-1,v=h%2!=0,g=p<0;0===p?o=o.add(E(v,i[y])):n=n.add(E(g,i[m]))}return{p:n,f:o}}multiply(e,t){let r,i,n=L(e);if(b){let{k1neg:o,k1:s,k2neg:a,k2:l}=f.splitScalar(n),{p:u,f:c}=this.wNAF(s,t),{p:d,f:h}=this.wNAF(l,t);u=E(o,u),d=E(a,d),d=new S(J(d.x*f.beta),d.y,d.z),r=u.add(d),i=c.add(h)}else{let{p:p,f:y}=this.wNAF(n,t);r=p,i=y}return S.normalizeZ([r,i])[0]}toAffine(e){let{x:t,y:r,z:i}=this,n=this.equals(S.ZERO);null==e&&(e=n?c:q(i));let o=e,s=J(o*o),l=J(s*o),u=J(t*s),d=J(r*l),h=J(i*o);if(n)return N.ZERO;if(h!==a)throw Error("invZ was invalid");return new N(u,d)}}function E(e,t){let r=t.negate();return e?r:t}S.BASE=new S(d.Gx,d.Gy,a),S.ZERO=new S(s,a,s);let k=new WeakMap;class N{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,k.delete(this)}hasEvenY(){return this.y%l===s}static fromCompressedHex(e){let t=32===e.length,r=D(t?e:e.subarray(1));if(!H(r))throw Error("Point is not on curve");let i=function(e){let{P:t}=d,r=BigInt(6),i=BigInt(11),n=BigInt(22),o=BigInt(23),s=BigInt(44),a=BigInt(88),c=e*e*e%t,h=c*c*e%t,f=F(h,u)*h%t,p=F(f,u)*h%t,y=F(p,l)*c%t,m=F(y,i)*y%t,v=F(m,n)*m%t,g=F(v,s)*v%t,b=F(g,a)*g%t,w=F(b,s)*v%t,_=F(w,u)*h%t,S=F(_,o)*m%t,E=F(S,r)*c%t,k=F(E,l);if(k*k%t!==e)throw Error("Cannot find square root");return k}(g(r)),n=(i&a)===a;t?n&&(i=J(-i)):1==(1&e[0])!==n&&(i=J(-i));let o=new N(r,i);return o.assertValidity(),o}static fromUncompressedHex(e){let t=D(e.subarray(1,p+1)),r=D(e.subarray(p+1,2*p+1)),i=new N(t,r);return i.assertValidity(),i}static fromHex(e){let t=j(e),r=t.length,i=t[0];if(r===p||r===m&&(2===i||3===i))return this.fromCompressedHex(t);if(r===v&&4===i)return this.fromUncompressedHex(t);throw Error(`Point.fromHex: received invalid point. Expected 32-${m} compressed bytes or ${v} uncompressed bytes, not ${r}`)}static fromPrivateKey(e){return N.BASE.multiply(Z(e))}static fromSignature(e,t,r){let{r:i,s:n}=X(t);if(![0,1,2,3].includes(r))throw Error("Cannot recover: invalid recovery bit");let o=V(j(e)),{n:s}=d,a=2===r||3===r?i+s:i,l=q(a,s),u=J(-o*l,s),c=J(n*l,s),h=1&r?"03":"02",f=N.fromHex(h+C(a)),p=N.BASE.multiplyAndAddUnsafe(f,u,c);if(!p)throw Error("Cannot recover signature: point at infinify");return p.assertValidity(),p}toRawBytes(e=!1){return K(this.toHex(e))}toHex(e=!1){let t=C(this.x);return e?`${this.hasEvenY()?"02":"03"}${t}`:`04${t}${C(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let e="Point is not on elliptic curve",{x:t,y:r}=this;if(!H(t)||!H(r))throw Error(e);let i=J(r*r);if(J(i-g(t))!==s)throw Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new N(this.x,J(-this.y))}double(){return S.fromAffine(this).double().toAffine()}add(e){return S.fromAffine(this).add(S.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return S.fromAffine(this).multiply(e,this).toAffine()}multiplyAndAddUnsafe(e,t,r){let i=S.fromAffine(this),n=t===s||t===a||this!==N.BASE?i.multiplyUnsafe(t):i.multiply(t),o=S.fromAffine(e).multiplyUnsafe(r),l=n.add(o);return l.equals(S.ZERO)?void 0:l.toAffine()}}function A(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function P(e){if(e.length<2||2!==e[0])throw Error(`Invalid signature integer tag: ${R(e)}`);let t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw Error("Invalid signature integer: trailing length");return{data:D(r),left:e.subarray(t+2)}}t.Point=N,N.BASE=new N(d.Gx,d.Gy),N.ZERO=new N(s,s);class x{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){let t=e instanceof Uint8Array,r="Signature.fromCompact";if("string"!=typeof e&&!t)throw TypeError(`${r}: Expected string or Uint8Array`);let i=t?R(e):e;if(128!==i.length)throw Error(`${r}: Expected 64-byte hex`);return new x(U(i.slice(0,64)),U(i.slice(64,128)))}static fromDER(e){let t=e instanceof Uint8Array;if("string"!=typeof e&&!t)throw TypeError("Signature.fromDER: Expected string or Uint8Array");let{r,s:i}=function(e){if(e.length<2||48!=e[0])throw Error(`Invalid signature tag: ${R(e)}`);if(e[1]!==e.length-2)throw Error("Invalid signature: incorrect length");let{data:t,left:r}=P(e.subarray(2)),{data:i,left:n}=P(r);if(n.length)throw Error(`Invalid signature: left bytes after parsing: ${R(n)}`);return{r:t,s:i}}(t?e:K(e));return new x(r,i)}static fromHex(e){return this.fromDER(e)}assertValidity(){let{r:e,s:t}=this;if(!G(e))throw Error("Invalid Signature: r must be 0 < r < n");if(!G(t))throw Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let e=d.n>>a;return this.s>e}normalizeS(){return this.hasHighS()?new x(this.r,J(-this.s,d.n)):this}toDERRawBytes(){return K(this.toDERHex())}toDERHex(){let e=A(M(this.s)),t=A(M(this.r)),r=e.length/2,i=t.length/2,n=M(r),o=M(i);return`30${M(i+r+4)}02${o}${t}02${n}${e}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return K(this.toCompactHex())}toCompactHex(){return C(this.r)+C(this.s)}}function O(...e){if(!e.every(e=>e instanceof Uint8Array))throw Error("Uint8Array list expected");if(1===e.length)return e[0];let t=e.reduce((e,t)=>e+t.length,0),r=new Uint8Array(t);for(let i=0,n=0;i<e.length;i++){let o=e[i];r.set(o,n),n+=o.length}return r}t.Signature=x;let T=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function R(e){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=T[e[r]];return t}let B=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");function C(e){if("bigint"!=typeof e)throw Error("Expected bigint");if(!(s<=e&&e<B))throw Error("Expected number 0 <= n < 2^256");return e.toString(16).padStart(64,"0")}function I(e){let t=K(C(e));if(32!==t.length)throw Error("Error: expected 32 bytes");return t}function M(e){let t=e.toString(16);return 1&t.length?`0${t}`:t}function U(e){if("string"!=typeof e)throw TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function K(e){if("string"!=typeof e)throw TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw Error("hexToBytes: received invalid unpadded hex"+e.length);let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let i=2*r,n=e.slice(i,i+2),o=Number.parseInt(n,16);if(Number.isNaN(o)||o<0)throw Error("Invalid byte sequence");t[r]=o}return t}function D(e){return U(R(e))}function j(e){return e instanceof Uint8Array?Uint8Array.from(e):K(e)}function L(e){if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"==typeof e&&G(e))return e;throw TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function J(e,t=d.P){let r=e%t;return r>=s?r:t+r}function F(e,t){let{P:r}=d,i=e;for(;t-- >s;)i*=i,i%=r;return i}function q(e,t=d.P){if(e===s||t<=s)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=J(e,t),i=t,n=s,o=a,l=a,u=s;for(;r!==s;){let c=i/r,h=i%r,f=n-l*c,p=o-u*c;i=r,r=h,n=l,o=u,l=f,u=p}if(i!==a)throw Error("invert: does not exist");return J(n,t)}function V(e,t=!1){let r=function(e){let t=8*e.length-8*y,r=D(e);return t>0?r>>BigInt(t):r}(e);if(t)return r;let{n:i}=d;return r>=i?r-i:r}class z{constructor(e,t){if(this.hashLen=e,this.qByteLen=t,"number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");this.v=new Uint8Array(e).fill(1),this.k=new Uint8Array(e).fill(0),this.counter=0}hmac(...e){return t.utils.hmacSha256(this.k,...e)}hmacSync(...e){return n(this.k,...e)}checkSync(){if("function"!=typeof n)throw new w("hmacSha256Sync needs to be set")}incr(){if(this.counter>=1e3)throw Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.checkSync(),this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){this.incr();let e=0,t=[];for(;e<this.qByteLen;){this.v=await this.hmac(this.v);let r=this.v.slice();t.push(r),e+=this.v.length}return O(...t)}generateSync(){this.checkSync(),this.incr();let e=0,t=[];for(;e<this.qByteLen;){this.v=this.hmacSync(this.v);let r=this.v.slice();t.push(r),e+=this.v.length}return O(...t)}}function G(e){return s<e&&e<d.n}function H(e){return s<e&&e<d.P}function W(e,t,r,i=!0){let{n:n}=d,o=V(e,!0);if(!G(o))return;let l=q(o,n),u=N.BASE.multiply(o),c=J(u.x,n);if(c===s)return;let h=J(l*J(t+r*c,n),n);if(h===s)return;let f=new x(c,h),p=(u.x===f.r?0:2)|Number(u.y&a);return i&&f.hasHighS()&&(f=f.normalizeS(),p^=1),{sig:f,recovery:p}}function Z(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"==typeof e){if(e.length!==2*y)throw Error("Expected 32 bytes of private key");t=U(e)}else{if(!(e instanceof Uint8Array))throw TypeError("Expected valid private key");if(e.length!==y)throw Error("Expected 32 bytes of private key");t=D(e)}if(!G(t))throw Error("Expected private key: 0 < key < n");return t}function $(e){return e instanceof N?(e.assertValidity(),e):N.fromHex(e)}function X(e){if(e instanceof x)return e.assertValidity(),e;try{return x.fromDER(e)}catch(t){return x.fromCompact(e)}}function Y(e){let t=e instanceof Uint8Array,r="string"==typeof e,i=(t||r)&&e.length;return t?i===m||i===v:r?i===2*m||i===2*v:e instanceof N}function Q(e){return D(e.length>p?e.slice(0,p):e)}function ee(e){let t=Q(e),r=J(t,d.n);return et(r<s?t:r)}function et(e){return I(e)}function er(e,r,i){if(null==e)throw Error(`sign: expected valid message hash, not "${e}"`);let n=j(e),o=Z(r),s=[et(o),ee(n)];if(null!=i){!0===i&&(i=t.utils.randomBytes(p));let a=j(i);if(a.length!==p)throw Error(`sign: Expected ${p} bytes of extra data`);s.push(a)}return{seed:O(...s),m:Q(n),d:o}}function ei(e,t){let{sig:r,recovery:i}=e,{der:n,recovered:o}=Object.assign({canonical:!0,der:!0},t),s=n?r.toDERRawBytes():r.toCompactRawBytes();return o?[s,i]:s}t.getPublicKey=function(e,t=!1){return N.fromPrivateKey(e).toRawBytes(t)},t.recoverPublicKey=function(e,t,r,i=!1){return N.fromSignature(e,t,r).toRawBytes(i)},t.getSharedSecret=function(e,t,r=!1){if(Y(e))throw TypeError("getSharedSecret: first arg must be private key");if(!Y(t))throw TypeError("getSharedSecret: second arg must be public key");let i=$(t);return i.assertValidity(),i.multiply(Z(e)).toRawBytes(r)},t.sign=async function(e,t,r={}){let i;let{seed:n,m:o,d:s}=er(e,t,r.extraEntropy),a=new z(32,y);for(await a.reseed(n);!(i=W(await a.generate(),o,s,r.canonical));)await a.reseed();return ei(i,r)},t.signSync=function(e,t,r={}){let i;let{seed:n,m:o,d:s}=er(e,t,r.extraEntropy),a=new z(32,y);for(a.reseedSync(n);!(i=W(a.generateSync(),o,s,r.canonical));)a.reseedSync();return ei(i,r)};let en={strict:!0};function eo(e){return J(D(e),d.n)}t.verify=function(e,t,r,i=en){let n,o;try{n=X(e),t=j(t)}catch(s){return!1}let{r:a,s:l}=n;if(i.strict&&n.hasHighS())return!1;let u=V(t);try{o=$(r)}catch(c){return!1}let{n:h}=d,f=q(l,h),p=J(u*f,h),y=J(a*f,h),m=N.BASE.multiplyAndAddUnsafe(o,p,y);return!!m&&J(m.x,h)===a};class es{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromHex(e){let t=j(e);if(64!==t.length)throw TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${t.length}`);let r=D(t.subarray(0,32)),i=D(t.subarray(32,64));return new es(r,i)}assertValidity(){let{r:e,s:t}=this;if(!H(e)||!G(t))throw Error("Invalid signature")}toHex(){return C(this.r)+C(this.s)}toRawBytes(){return K(this.toHex())}}class ea{constructor(e,r,i=t.utils.randomBytes()){if(null==e)throw TypeError(`sign: Expected valid message, not "${e}"`);this.m=j(e);let{x:n,scalar:o}=this.getScalar(Z(r));if(this.px=n,this.d=o,this.rand=j(i),32!==this.rand.length)throw TypeError("sign: Expected 32 bytes of aux randomness")}getScalar(e){let t=N.fromPrivateKey(e),r=t.hasEvenY()?e:d.n-e;return{point:t,scalar:r,x:t.toRawX()}}initNonce(e,t){return I(e^D(t))}finalizeNonce(e){let t=J(D(e),d.n);if(t===s)throw Error("sign: Creation of signature failed. k is zero");let{point:r,x:i,scalar:n}=this.getScalar(t);return{R:r,rx:i,k:n}}finalizeSig(e,t,r,i){return new es(e.x,J(t+r*i,d.n)).toRawBytes()}error(){throw Error("sign: Invalid signature produced")}async calc(){let{m:e,d:r,px:i,rand:n}=this,o=t.utils.taggedHash,s=this.initNonce(r,await o(ef.aux,n)),{R:a,rx:l,k:u}=this.finalizeNonce(await o(ef.nonce,s,i,e)),c=eo(await o(ef.challenge,l,i,e)),d=this.finalizeSig(a,u,c,r);return await ec(d,e,i)||this.error(),d}calcSync(){let{m:e,d:r,px:i,rand:n}=this,o=t.utils.taggedHashSync,s=this.initNonce(r,o(ef.aux,n)),{R:a,rx:l,k:u}=this.finalizeNonce(o(ef.nonce,s,i,e)),c=eo(o(ef.challenge,l,i,e)),d=this.finalizeSig(a,u,c,r);return ed(d,e,i)||this.error(),d}}function el(e,t,r){let i=e instanceof es,n=i?e:es.fromHex(e);return i&&n.assertValidity(),{...n,m:j(t),P:$(r)}}function eu(e,t,r,i){let n=N.BASE.multiplyAndAddUnsafe(t,Z(r),J(-i,d.n));return!(!n||!n.hasEvenY()||n.x!==e)}async function ec(e,r,i){try{let{r:n,s:o,m:s,P:a}=el(e,r,i),l=eo(await t.utils.taggedHash(ef.challenge,I(n),a.toRawX(),s));return eu(n,a,o,l)}catch(u){return!1}}function ed(e,r,i){try{let{r:n,s:o,m:s,P:a}=el(e,r,i),l=eo(t.utils.taggedHashSync(ef.challenge,I(n),a.toRawX(),s));return eu(n,a,o,l)}catch(u){if(u instanceof w)throw u;return!1}}t.schnorr={Signature:es,getPublicKey:function(e){return N.fromPrivateKey(e).toRawX()},sign:async function(e,t,r){return new ea(e,t,r).calc()},verify:ec,signSync:function(e,t,r){return new ea(e,t,r).calcSync()},verifySync:ed},N.BASE._setWindowSize(8);let eh={node:o,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0},ef={challenge:"BIP0340/challenge",aux:"BIP0340/aux",nonce:"BIP0340/nonce"},ep={};t.utils={bytesToHex:R,hexToBytes:K,concatBytes:O,mod:J,invert:q,isValidPrivateKey(e){try{return Z(e),!0}catch(t){return!1}},_bigintTo32Bytes:I,_normalizePrivateKey:Z,hashToPrivateKey:e=>{e=j(e);let t=y+8;if(e.length<t||e.length>1024)throw Error("Expected valid bytes of private key as per FIPS 186");return I(J(D(e),d.n-a)+a)},randomBytes:(e=32)=>{if(eh.web)return eh.web.getRandomValues(new Uint8Array(e));if(eh.node){let{randomBytes:t}=eh.node;return Uint8Array.from(t(e))}throw Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>t.utils.hashToPrivateKey(t.utils.randomBytes(y+8)),precompute(e=8,t=N.BASE){let r=t===N.BASE?t:new N(t.x,t.y);return r._setWindowSize(e),r.multiply(u),r},sha256:async(...e)=>{if(eh.web){let t=await eh.web.subtle.digest("SHA-256",O(...e));return new Uint8Array(t)}if(eh.node){let{createHash:r}=eh.node,i=r("sha256");return e.forEach(e=>i.update(e)),Uint8Array.from(i.digest())}throw Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(eh.web){let r=await eh.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),i=O(...t),n=await eh.web.subtle.sign("HMAC",r,i);return new Uint8Array(n)}if(eh.node){let{createHmac:o}=eh.node,s=o("sha256",e);return t.forEach(e=>s.update(e)),Uint8Array.from(s.digest())}throw Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,taggedHash:async(e,...r)=>{let i=ep[e];if(void 0===i){let n=await t.utils.sha256(Uint8Array.from(e,e=>e.charCodeAt(0)));i=O(n,n),ep[e]=i}return t.utils.sha256(i,...r)},taggedHashSync:(e,...t)=>{if("function"!=typeof i)throw new w("sha256Sync is undefined, you need to set it");let r=ep[e];if(void 0===r){let n=i(Uint8Array.from(e,e=>e.charCodeAt(0)));r=O(n,n),ep[e]=r}return i(r,...t)},_JacobianPoint:S},Object.defineProperties(t.utils,{sha256Sync:{configurable:!1,get:()=>i,set(e){i||(i=e)}},hmacSha256Sync:{configurable:!1,get:()=>n,set(e){n||(n=e)}}})},537:e=>{"use strict";e.exports=function(e,t){for(var r=Array(arguments.length-1),i=0,n=2,o=!0;n<arguments.length;)r[i++]=arguments[n++];return new Promise(function(n,s){r[i]=function(e){if(o){if(o=!1,e)s(e);else{for(var t=Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];n.apply(null,t)}}};try{e.apply(t||null,r)}catch(a){o&&(o=!1,s(a))}})}},419:(e,t)=>{"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var i=Array(64),n=Array(123),o=0;o<64;)n[i[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;r.encode=function(e,t,r){for(var n,o=null,s=[],a=0,l=0;t<r;){var u=e[t++];switch(l){case 0:s[a++]=i[u>>2],n=(3&u)<<4,l=1;break;case 1:s[a++]=i[n|u>>4],n=(15&u)<<2,l=2;break;case 2:s[a++]=i[n|u>>6],s[a++]=i[63&u],l=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return l&&(s[a++]=i[n],s[a++]=61,1===l&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";r.decode=function(e,t,r){for(var i,o=r,a=0,l=0;l<e.length;){var u=e.charCodeAt(l++);if(61===u&&a>1)break;if(void 0===(u=n[u]))throw Error(s);switch(a){case 0:i=u,a=1;break;case 1:t[r++]=i<<2|(48&u)>>4,i=u,a=2;break;case 2:t[r++]=(15&i)<<4|(60&u)>>2,i=u,a=3;break;case 3:t[r++]=(3&i)<<6|u,a=0}}if(1===a)throw Error(s);return r-o},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},211:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],i=0;i<r.length;)r[i].fn===t?r.splice(i,1):++i;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],i=1;i<arguments.length;)r.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,r)}return this}},945:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),i=128===r[3];function n(e,i,n){t[0]=e,i[n]=r[0],i[n+1]=r[1],i[n+2]=r[2],i[n+3]=r[3]}function o(e,i,n){t[0]=e,i[n]=r[3],i[n+1]=r[2],i[n+2]=r[1],i[n+3]=r[0]}function s(e,i){return r[0]=e[i],r[1]=e[i+1],r[2]=e[i+2],r[3]=e[i+3],t[0]}function a(e,i){return r[3]=e[i],r[2]=e[i+1],r[1]=e[i+2],r[0]=e[i+3],t[0]}e.writeFloatLE=i?n:o,e.writeFloatBE=i?o:n,e.readFloatLE=i?s:a,e.readFloatBE=i?a:s}():function(){function t(e,t,r,i){var n=t<0?1:0;if(n&&(t=-t),0===t)e(1/t>0?0:2147483648,r,i);else if(isNaN(t))e(2143289344,r,i);else if(t>34028234663852886e22)e((n<<31|2139095040)>>>0,r,i);else if(t<11754943508222875e-54)e((n<<31|Math.round(t/1401298464324817e-60))>>>0,r,i);else{var o=Math.floor(Math.log(t)/Math.LN2);e((n<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,r,i)}}function s(e,t,r){var i=e(t,r),n=2*(i>>31)+1,o=i>>>23&255,s=8388607&i;return 255===o?s?NaN:n*(1/0):0===o?1401298464324817e-60*n*s:n*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,i),e.readFloatLE=s.bind(null,n),e.readFloatBE=s.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),i=128===r[7];function n(e,i,n){t[0]=e,i[n]=r[0],i[n+1]=r[1],i[n+2]=r[2],i[n+3]=r[3],i[n+4]=r[4],i[n+5]=r[5],i[n+6]=r[6],i[n+7]=r[7]}function o(e,i,n){t[0]=e,i[n]=r[7],i[n+1]=r[6],i[n+2]=r[5],i[n+3]=r[4],i[n+4]=r[3],i[n+5]=r[2],i[n+6]=r[1],i[n+7]=r[0]}function s(e,i){return r[0]=e[i],r[1]=e[i+1],r[2]=e[i+2],r[3]=e[i+3],r[4]=e[i+4],r[5]=e[i+5],r[6]=e[i+6],r[7]=e[i+7],t[0]}function a(e,i){return r[7]=e[i],r[6]=e[i+1],r[5]=e[i+2],r[4]=e[i+3],r[3]=e[i+4],r[2]=e[i+5],r[1]=e[i+6],r[0]=e[i+7],t[0]}e.writeDoubleLE=i?n:o,e.writeDoubleBE=i?o:n,e.readDoubleLE=i?s:a,e.readDoubleBE=i?a:s}():function(){function t(e,t,r,i,n,o){var s,a=i<0?1:0;if(a&&(i=-i),0===i)e(0,n,o+t),e(1/i>0?0:2147483648,n,o+r);else if(isNaN(i))e(0,n,o+t),e(2146959360,n,o+r);else if(i>17976931348623157e292)e(0,n,o+t),e((a<<31|2146435072)>>>0,n,o+r);else if(i<22250738585072014e-324)e((s=i/5e-324)>>>0,n,o+t),e((a<<31|s/4294967296)>>>0,n,o+r);else{var l=Math.floor(Math.log(i)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(s=i*Math.pow(2,-l))>>>0,n,o+t),e((a<<31|l+1023<<20|1048576*s&1048575)>>>0,n,o+r)}}function s(e,t,r,i,n){var o=e(i,n+t),s=e(i,n+r),a=2*(s>>31)+1,l=s>>>20&2047,u=4294967296*(1048575&s)+o;return 2047===l?u?NaN:a*(1/0):0===l?5e-324*a*u:a*Math.pow(2,l-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=s.bind(null,n,0,4),e.readDoubleBE=s.bind(null,o,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function i(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function n(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},199:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},662:e=>{"use strict";e.exports=function(e,t,r){var i=r||8192,n=i>>>1,o=null,s=i;return function(r){if(r<1||r>n)return e(r);s+r>i&&(o=e(i),s=0);var a=t.call(o,s,s+=r);return 7&s&&(s=1+(7|s)),a}}},997:(e,t)=>{"use strict";var r=t;r.length=function(e){for(var t=0,r=0,i=0;i<e.length;++i)(r=e.charCodeAt(i))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(i+1))?(++i,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var i,n=null,o=[],s=0;t<r;)(i=e[t++])<128?o[s++]=i:i>191&&i<224?o[s++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(i>>10),o[s++]=56320+(1023&i)):o[s++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,o)),s=0);return n?(s&&n.push(String.fromCharCode.apply(String,o.slice(0,s))),n.join("")):String.fromCharCode.apply(String,o.slice(0,s))},r.write=function(e,t,r){for(var i,n,o=r,s=0;s<e.length;++s)(i=e.charCodeAt(s))<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=63&i|128):55296==(64512&i)&&56320==(64512&(n=e.charCodeAt(s+1)))?(i=65536+((1023&i)<<10)+(1023&n),++s,t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=63&i|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=63&i|128);return r-o}},796:(e,t,r)=>{"use strict";r.r(t),r.d(t,{authn:()=>c,ciphertext:()=>d,composite:()=>p,contact:()=>m,content:()=>f,fetcher:()=>s,invitation:()=>v,keystore:()=>g,message:()=>h,messageApi:()=>a,privateKey:()=>y,publicKey:()=>u,signature:()=>l});var i,n,o,s={};r.r(s),r.d(s,{b64Decode:()=>A,b64Encode:()=>k,fetchReq:()=>x,fetchStreamingRequest:()=>O,renderURLSearchParams:()=>B,replacer:()=>P});var a={};r.r(a),r.d(a,{MessageApi:()=>C,SortDirection:()=>i});var l={};r.r(l),r.d(l,{Signature:()=>ec,Signature_ECDSACompact:()=>eh,Signature_WalletECDSACompact:()=>ep,protobufPackage:()=>eu});var u={};r.r(u),r.d(u,{PublicKey:()=>ex,PublicKeyBundle:()=>eR,PublicKey_Secp256k1Uncompressed:()=>eT,SignedPublicKey:()=>eN,SignedPublicKeyBundle:()=>eA,UnsignedPublicKey:()=>e_,UnsignedPublicKey_Secp256k1Uncompressed:()=>eE,protobufPackage:()=>eb});var c={};r.r(c),r.d(c,{AuthData:()=>eL,Token:()=>eD,protobufPackage:()=>eU});var d={};r.r(d),r.d(d,{Ciphertext:()=>ez,Ciphertext_Aes256gcmHkdfsha256:()=>eH,protobufPackage:()=>eV});var h={};r.r(h),r.d(h,{Message:()=>e4,MessageHeaderV1:()=>e0,MessageHeaderV2:()=>e6,MessageV1:()=>e2,MessageV2:()=>e8,protobufPackage:()=>eY});var f={};r.r(f),r.d(f,{Compression:()=>n,ContentTypeId:()=>to,EncodedContent:()=>ta,EncodedContent_ParametersEntry:()=>tl,SignedContent:()=>tc,compressionFromJSON:()=>ti,compressionToJSON:()=>tn,protobufPackage:()=>tr});var p={};r.r(p),r.d(p,{Composite:()=>tm,Composite_Part:()=>tv,protobufPackage:()=>ty});var y={};r.r(y),r.d(y,{EncryptedPrivateKeyBundle:()=>tC,EncryptedPrivateKeyBundleV1:()=>tB,PrivateKey:()=>tA,PrivateKeyBundle:()=>tT,PrivateKeyBundleV1:()=>tO,PrivateKeyBundleV2:()=>tk,PrivateKey_Secp256k1:()=>tx,SignedPrivateKey:()=>t_,SignedPrivateKey_Secp256k1:()=>tE,protobufPackage:()=>tb});var m={};r.r(m),r.d(m,{ContactBundle:()=>tJ,ContactBundleV1:()=>tj,ContactBundleV2:()=>tL,protobufPackage:()=>tD});var v={};r.r(v),r.d(v,{InvitationV1:()=>tV,InvitationV1_Aes256gcmHkdfsha256:()=>tG,InvitationV1_Context:()=>tH,InvitationV1_Context_MetadataEntry:()=>tW,SealedInvitation:()=>tQ,SealedInvitationHeaderV1:()=>t$,SealedInvitationV1:()=>tY,protobufPackage:()=>tq});var g={};r.r(g),r.d(g,{ConversationReference:()=>t9,CreateInviteRequest:()=>rw,CreateInviteResponse:()=>rS,DecryptResponse:()=>ri,DecryptResponse_Response:()=>rn,DecryptResponse_Response_Success:()=>rs,DecryptV1Request:()=>re,DecryptV1Request_Request:()=>rr,DecryptV2Request:()=>ra,DecryptV2Request_Request:()=>ru,EncryptResponse:()=>rf,EncryptResponse_Response:()=>rp,EncryptResponse_Response_Success:()=>ry,EncryptV1Request:()=>rc,EncryptV1Request_Request:()=>rh,EncryptV2Request:()=>rm,EncryptV2Request_Request:()=>rg,ErrorCode:()=>o,KeystoreError:()=>t4,SaveInvitesRequest:()=>rE,SaveInvitesRequest_Request:()=>rN,SaveInvitesResponse:()=>rA,SaveInvitesResponse_Response:()=>rP,SaveInvitesResponse_Response_Success:()=>rx,TopicMap:()=>rO,TopicMap_TopicData:()=>rR,TopicMap_TopicsEntry:()=>rB,errorCodeFromJSON:()=>t5,errorCodeToJSON:()=>t8,protobufPackage:()=>t6});var b=function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})},w=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};let _=Array(64),S=Array(123);for(let E=0;E<64;)S[_[E]=E<26?E+65:E<52?E+71:E<62?E-4:E-59|43]=E++;function k(e,t,r){let i=null,n=[],o,s=0,a=0;for(;t<r;){let l=e[t++];switch(a){case 0:n[s++]=_[l>>2],o=(3&l)<<4,a=1;break;case 1:n[s++]=_[o|l>>4],o=(15&l)<<2,a=2;break;case 2:n[s++]=_[o|l>>6],n[s++]=_[63&l],a=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,n)),s=0)}return a&&(n[s++]=_[o],n[s++]=61,1===a&&(n[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,n.slice(0,s))),i.join("")):String.fromCharCode.apply(String,n.slice(0,s))}let N="invalid encoding";function A(e){let t=[],r,i=0,n=0;for(let o=0;o<e.length;){let s=e.charCodeAt(o++);if(61===s&&n>1)break;if(void 0===(s=S[s]))throw Error(N);switch(n){case 0:r=s,n=1;break;case 1:t[i++]=r<<2|(48&s)>>4,r=s,n=2;break;case 2:t[i++]=(15&r)<<4|(60&s)>>2,r=s,n=3;break;case 3:t[i++]=(3&r)<<6|s,n=0}}if(1===n)throw Error(N);return new Uint8Array(t)}function P(e,t){return t&&t.constructor===Uint8Array?k(t,0,t.length):t}function x(e,t){let r=t||{},{pathPrefix:i}=r,n=w(r,["pathPrefix"]);return fetch(i?`${i}${e}`:e,n).then(e=>e.json().then(t=>{if(!e.ok)throw t;return t}))}function O(e,t,r){return b(this,void 0,void 0,function*(){var i;let n=r||{},{pathPrefix:o}=n,s=w(n,["pathPrefix"]),a=o?`${o}${e}`:e,l=yield fetch(a,s);if(!l.ok){let u=yield l.json(),c=u.error&&u.error.message?u.error.message:"";throw Error(c)}if(!l.body)throw Error("response doesnt have a body");yield l.body.pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({start(e){e.buf="",e.pos=0},transform(e,t){for(void 0===t.buf&&(t.buf=""),void 0===t.pos&&(t.pos=0),t.buf+=e;t.pos<t.buf.length;)if("\n"===t.buf[t.pos]){let r=t.buf.substring(0,t.pos),i=JSON.parse(r);t.enqueue(i.result),t.buf=t.buf.substring(t.pos+1),t.pos=0}else++t.pos}})).pipeTo((i=e=>{t&&t(e)},new WritableStream({write(e){i(e)}})))})}function T(e){return["string","number","boolean"].some(t=>typeof e===t)}function R(e,t=""){return Object.keys(e).reduce((r,i)=>{let n=e[i],o=t?[t,i].join("."):i,s=Array.isArray(n)&&n.every(e=>T(e))&&n.length>0,a=T(n)&&!function(e){return!1===e||0===e||""===e}(n),l={};return!function(e){let t="Object"===Object.prototype.toString.call(e).slice(8,-1);if(null===e||!t||!t)return!1;let r=Object.getPrototypeOf(e);return"object"==typeof r&&r.constructor===Object.prototype.constructor}(n)?(a||s)&&(l={[o]:n}):l=R(n,o),Object.assign(Object.assign({},r),l)},{})}function B(e,t=[]){let r=R(e),i=Object.keys(r).reduce((e,i)=>{let n=r[i];return t.find(e=>e===i)?e:Array.isArray(n)?[...e,...n.map(e=>[i,e.toString()])]:e=[...e,[i,n.toString()]]},[]);return new URLSearchParams(i).toString()}!function(e){e.SORT_DIRECTION_UNSPECIFIED="SORT_DIRECTION_UNSPECIFIED",e.SORT_DIRECTION_ASCENDING="SORT_DIRECTION_ASCENDING",e.SORT_DIRECTION_DESCENDING="SORT_DIRECTION_DESCENDING"}(i||(i={}));class C{static Publish(e,t){return x("/message/v1/publish",Object.assign(Object.assign({},t),{method:"POST",body:JSON.stringify(e,P)}))}static Subscribe(e,t,r){return O("/message/v1/subscribe",t,Object.assign(Object.assign({},r),{method:"POST",body:JSON.stringify(e,P)}))}static SubscribeAll(e,t,r){return O("/message/v1/subscribe-all",t,Object.assign(Object.assign({},r),{method:"POST",body:JSON.stringify(e,P)}))}static Query(e,t){return x("/message/v1/query",Object.assign(Object.assign({},t),{method:"POST",body:JSON.stringify(e,P)}))}static BatchQuery(e,t){return x("/message/v1/batch-query",Object.assign(Object.assign({},t),{method:"POST",body:JSON.stringify(e,P)}))}}var I=null;try{I=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(M){}function U(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function K(e){return!0===(e&&e.__isLong__)}function D(e){var t=Math.clz32(e&-e);return e?31-t:t}U.prototype.__isLong__,Object.defineProperty(U.prototype,"__isLong__",{value:!0}),U.isLong=K;var j={},L={};function J(e,t){var r,i,n;return t?(n=0<=(e>>>=0)&&e<256)&&(i=L[e])?i:(r=q(e,0,!0),n&&(L[e]=r),r):(n=-128<=(e|=0)&&e<128)&&(i=j[e])?i:(r=q(e,e<0?-1:0,!1),n&&(j[e]=r),r)}function F(e,t){if(isNaN(e))return t?Y:X;if(t){if(e<0)return Y;if(e>=W)return ei}else{if(e<=-Z)return en;if(e+1>=Z)return er}return e<0?F(-e,t).neg():q(e%H|0,e/H|0,t)}function q(e,t,r){return new U(e,t,r)}U.fromInt=J,U.fromNumber=F,U.fromBits=q;var V=Math.pow;function z(e,t,r){if(0===e.length)throw Error("empty string");if("number"==typeof t?(r=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?Y:X;if((r=r||10)<2||36<r)throw RangeError("radix");if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return z(e.substring(1),t,r).neg();for(var i,n=F(V(r,8)),o=X,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+a),r);if(a<8){var u=F(V(r,a));o=o.mul(u).add(F(l))}else o=(o=o.mul(n)).add(F(l))}return o.unsigned=t,o}function G(e,t){return"number"==typeof e?F(e,t):"string"==typeof e?z(e,t):q(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}U.fromString=z,U.fromValue=G;var H=4294967296,W=18446744073709552e3,Z=18446744073709552e3/2,$=J(16777216),X=J(0);U.ZERO=X;var Y=J(0,!0);U.UZERO=Y;var Q=J(1);U.ONE=Q;var ee=J(1,!0);U.UONE=ee;var et=J(-1);U.NEG_ONE=et;var er=q(-1,2147483647,!1);U.MAX_VALUE=er;var ei=q(-1,-1,!0);U.MAX_UNSIGNED_VALUE=ei;var en=q(0,-2147483648,!1);U.MIN_VALUE=en;var eo=U.prototype;eo.toInt=function(){return this.unsigned?this.low>>>0:this.low},eo.toNumber=function(){return this.unsigned?(this.high>>>0)*H+(this.low>>>0):this.high*H+(this.low>>>0)},eo.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(en)){var t=F(e),r=this.div(t),i=r.mul(t).sub(this);return r.toString(e)+i.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var n=F(V(e,6),this.unsigned),o=this,s="";;){var a=o.div(n),l=(o.sub(a.mul(n)).toInt()>>>0).toString(e);if((o=a).isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},eo.getHighBits=function(){return this.high},eo.getHighBitsUnsigned=function(){return this.high>>>0},eo.getLowBits=function(){return this.low},eo.getLowBitsUnsigned=function(){return this.low>>>0},eo.getNumBitsAbs=function(){if(this.isNegative())return this.eq(en)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},eo.isZero=function(){return 0===this.high&&0===this.low},eo.eqz=eo.isZero,eo.isNegative=function(){return!this.unsigned&&this.high<0},eo.isPositive=function(){return this.unsigned||this.high>=0},eo.isOdd=function(){return 1==(1&this.low)},eo.isEven=function(){return 0==(1&this.low)},eo.equals=function(e){return K(e)||(e=G(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},eo.eq=eo.equals,eo.notEquals=function(e){return!this.eq(e)},eo.neq=eo.notEquals,eo.ne=eo.notEquals,eo.lessThan=function(e){return 0>this.comp(e)},eo.lt=eo.lessThan,eo.lessThanOrEqual=function(e){return 0>=this.comp(e)},eo.lte=eo.lessThanOrEqual,eo.le=eo.lessThanOrEqual,eo.greaterThan=function(e){return this.comp(e)>0},eo.gt=eo.greaterThan,eo.greaterThanOrEqual=function(e){return this.comp(e)>=0},eo.gte=eo.greaterThanOrEqual,eo.ge=eo.greaterThanOrEqual,eo.compare=function(e){if(K(e)||(e=G(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},eo.comp=eo.compare,eo.negate=function(){return!this.unsigned&&this.eq(en)?en:this.not().add(Q)},eo.neg=eo.negate,eo.add=function(e){K(e)||(e=G(e));var t,r,i,n,o=this.high>>>16,s=65535&this.high,a=this.low>>>16,l=65535&this.low,u=e.high>>>16,c=65535&e.high,d=e.low>>>16;return n=0+(((i=0+((t=0+((r=0+(l+(65535&e.low)))>>>16)+(a+d))>>>16)+(s+c))>>>16)+(o+u)),q((t&=65535)<<16|(r&=65535),(n&=65535)<<16|(i&=65535),this.unsigned)},eo.subtract=function(e){return K(e)||(e=G(e)),this.add(e.neg())},eo.sub=eo.subtract,eo.multiply=function(e){if(this.isZero())return this;if(K(e)||(e=G(e)),I)return q(I.mul(this.low,this.high,e.low,e.high),I.get_high(),this.unsigned);if(e.isZero())return this.unsigned?Y:X;if(this.eq(en))return e.isOdd()?en:X;if(e.eq(en))return this.isOdd()?en:X;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt($)&&e.lt($))return F(this.toNumber()*e.toNumber(),this.unsigned);var t,r,i,n=this.high>>>16,o=65535&this.high,s=this.low>>>16,a=65535&this.low,l=e.high>>>16,u=65535&e.high,c=e.low>>>16,d=65535&e.low,h=0;return i=0+((t=0+((r=0+a*d)>>>16)+s*d)>>>16),t&=65535,i+=(t+=a*c)>>>16,h+=(i+=o*d)>>>16,i&=65535,h+=(i+=s*c)>>>16,i&=65535,h+=((i+=a*u)>>>16)+(n*d+o*c+s*u+a*l),q((t&=65535)<<16|(r&=65535),(h&=65535)<<16|(i&=65535),this.unsigned)},eo.mul=eo.multiply,eo.divide=function(e){if(K(e)||(e=G(e)),e.isZero())throw Error("division by zero");if(I)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?q((this.unsigned?I.div_u:I.div_s)(this.low,this.high,e.low,e.high),I.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?Y:X;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Y;if(e.gt(this.shru(1)))return ee;i=Y}else{if(this.eq(en))return e.eq(Q)||e.eq(et)?en:e.eq(en)?Q:(t=this.shr(1).div(e).shl(1)).eq(X)?e.isNegative()?Q:et:(r=this.sub(e.mul(t)),i=t.add(r.div(e)));if(e.eq(en))return this.unsigned?Y:X;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=X}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var t,r,i,n=Math.ceil(Math.log(t)/Math.LN2),o=n<=48?1:V(2,n-48),s=F(t),a=s.mul(e);a.isNegative()||a.gt(r);)a=(s=F(t-=o,this.unsigned)).mul(e);s.isZero()&&(s=Q),i=i.add(s),r=r.sub(a)}return i},eo.div=eo.divide,eo.modulo=function(e){return K(e)||(e=G(e)),I?q((this.unsigned?I.rem_u:I.rem_s)(this.low,this.high,e.low,e.high),I.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},eo.mod=eo.modulo,eo.rem=eo.modulo,eo.not=function(){return q(~this.low,~this.high,this.unsigned)},eo.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},eo.clz=eo.countLeadingZeros,eo.countTrailingZeros=function(){return this.low?D(this.low):D(this.high)+32},eo.ctz=eo.countTrailingZeros,eo.and=function(e){return K(e)||(e=G(e)),q(this.low&e.low,this.high&e.high,this.unsigned)},eo.or=function(e){return K(e)||(e=G(e)),q(this.low|e.low,this.high|e.high,this.unsigned)},eo.xor=function(e){return K(e)||(e=G(e)),q(this.low^e.low,this.high^e.high,this.unsigned)},eo.shiftLeft=function(e){return K(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?q(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):q(0,this.low<<e-32,this.unsigned)},eo.shl=eo.shiftLeft,eo.shiftRight=function(e){return K(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?q(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):q(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},eo.shr=eo.shiftRight,eo.shiftRightUnsigned=function(e){return K(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?q(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):q(32===e?this.high:this.high>>>e-32,0,this.unsigned)},eo.shru=eo.shiftRightUnsigned,eo.shr_u=eo.shiftRightUnsigned,eo.rotateLeft=function(e){var t;return K(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?q(this.high,this.low,this.unsigned):e<32?(t=32-e,q(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),q(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},eo.rotl=eo.rotateLeft,eo.rotateRight=function(e){var t;return K(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?q(this.high,this.low,this.unsigned):e<32?(t=32-e,q(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),q(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},eo.rotr=eo.rotateRight,eo.toSigned=function(){return this.unsigned?q(this.low,this.high,!1):this},eo.toUnsigned=function(){return this.unsigned?this:q(this.low,this.high,!0)},eo.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},eo.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},eo.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},U.fromBytes=function(e,t,r){return r?U.fromBytesLE(e,t):U.fromBytesBE(e,t)},U.fromBytesLE=function(e,t){return new U(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},U.fromBytesBE=function(e,t){return new U(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};let es=U;var ea=r(100),el=r.n(ea);let eu="xmtp.message_contents",ec={encode:(e,t=el().Writer.create())=>(void 0!==e.ecdsaCompact&&eh.encode(e.ecdsaCompact,t.uint32(10).fork()).ldelim(),void 0!==e.walletEcdsaCompact&&ep.encode(e.walletEcdsaCompact,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={ecdsaCompact:void 0,walletEcdsaCompact:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.ecdsaCompact=eh.decode(r,r.uint32());break;case 2:n.walletEcdsaCompact=ep.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({ecdsaCompact:eg(e.ecdsaCompact)?eh.fromJSON(e.ecdsaCompact):void 0,walletEcdsaCompact:eg(e.walletEcdsaCompact)?ep.fromJSON(e.walletEcdsaCompact):void 0}),toJSON(e){let t={};return void 0!==e.ecdsaCompact&&(t.ecdsaCompact=e.ecdsaCompact?eh.toJSON(e.ecdsaCompact):void 0),void 0!==e.walletEcdsaCompact&&(t.walletEcdsaCompact=e.walletEcdsaCompact?ep.toJSON(e.walletEcdsaCompact):void 0),t},fromPartial(e){let t={ecdsaCompact:void 0,walletEcdsaCompact:void 0};return t.ecdsaCompact=void 0!==e.ecdsaCompact&&null!==e.ecdsaCompact?eh.fromPartial(e.ecdsaCompact):void 0,t.walletEcdsaCompact=void 0!==e.walletEcdsaCompact&&null!==e.walletEcdsaCompact?ep.fromPartial(e.walletEcdsaCompact):void 0,t}};function ed(){return{bytes:new Uint8Array,recovery:0}}let eh={encode:(e,t=el().Writer.create())=>(0!==e.bytes.length&&t.uint32(10).bytes(e.bytes),0!==e.recovery&&t.uint32(16).uint32(e.recovery),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=ed();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.bytes=r.bytes();break;case 2:n.recovery=r.uint32();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({bytes:eg(e.bytes)?em(e.bytes):new Uint8Array,recovery:eg(e.recovery)?Number(e.recovery):0}),toJSON(e){let t={};return void 0!==e.bytes&&(t.bytes=ev(void 0!==e.bytes?e.bytes:new Uint8Array)),void 0!==e.recovery&&(t.recovery=Math.round(e.recovery)),t},fromPartial(e){var t,r;let i=ed();return i.bytes=null!==(t=e.bytes)&&void 0!==t?t:new Uint8Array,i.recovery=null!==(r=e.recovery)&&void 0!==r?r:0,i}};function ef(){return{bytes:new Uint8Array,recovery:0}}let ep={encode:(e,t=el().Writer.create())=>(0!==e.bytes.length&&t.uint32(10).bytes(e.bytes),0!==e.recovery&&t.uint32(16).uint32(e.recovery),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=ef();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.bytes=r.bytes();break;case 2:n.recovery=r.uint32();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({bytes:eg(e.bytes)?em(e.bytes):new Uint8Array,recovery:eg(e.recovery)?Number(e.recovery):0}),toJSON(e){let t={};return void 0!==e.bytes&&(t.bytes=ev(void 0!==e.bytes?e.bytes:new Uint8Array)),void 0!==e.recovery&&(t.recovery=Math.round(e.recovery)),t},fromPartial(e){var t,r;let i=ef();return i.bytes=null!==(t=e.bytes)&&void 0!==t?t:new Uint8Array,i.recovery=null!==(r=e.recovery)&&void 0!==r?r:0,i}};var ey=(()=>{if(void 0!==ey)return ey;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function em(e){if(ey.Buffer)return Uint8Array.from(ey.Buffer.from(e,"base64"));{let t=ey.atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}}function ev(e){if(ey.Buffer)return ey.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),ey.btoa(t.join(""))}}function eg(e){return null!=e}el().util.Long!==es&&(el().util.Long=es,el().configure());let eb="xmtp.message_contents";function ew(){return{createdNs:es.UZERO,secp256k1Uncompressed:void 0}}let e_={encode:(e,t=el().Writer.create())=>(e.createdNs.isZero()||t.uint32(8).uint64(e.createdNs),void 0!==e.secp256k1Uncompressed&&eE.encode(e.secp256k1Uncompressed,t.uint32(26).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=ew();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.createdNs=r.uint64();break;case 3:n.secp256k1Uncompressed=eE.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({createdNs:eM(e.createdNs)?es.fromValue(e.createdNs):es.UZERO,secp256k1Uncompressed:eM(e.secp256k1Uncompressed)?eE.fromJSON(e.secp256k1Uncompressed):void 0}),toJSON(e){let t={};return void 0!==e.createdNs&&(t.createdNs=(e.createdNs||es.UZERO).toString()),void 0!==e.secp256k1Uncompressed&&(t.secp256k1Uncompressed=e.secp256k1Uncompressed?eE.toJSON(e.secp256k1Uncompressed):void 0),t},fromPartial(e){let t=ew();return t.createdNs=void 0!==e.createdNs&&null!==e.createdNs?es.fromValue(e.createdNs):es.UZERO,t.secp256k1Uncompressed=void 0!==e.secp256k1Uncompressed&&null!==e.secp256k1Uncompressed?eE.fromPartial(e.secp256k1Uncompressed):void 0,t}};function eS(){return{bytes:new Uint8Array}}let eE={encode:(e,t=el().Writer.create())=>(0!==e.bytes.length&&t.uint32(10).bytes(e.bytes),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=eS();for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.bytes=r.bytes():r.skipType(7&o)}return n},fromJSON:e=>({bytes:eM(e.bytes)?eC(e.bytes):new Uint8Array}),toJSON(e){let t={};return void 0!==e.bytes&&(t.bytes=eI(void 0!==e.bytes?e.bytes:new Uint8Array)),t},fromPartial(e){var t;let r=eS();return r.bytes=null!==(t=e.bytes)&&void 0!==t?t:new Uint8Array,r}};function ek(){return{keyBytes:new Uint8Array,signature:void 0}}let eN={encode:(e,t=el().Writer.create())=>(0!==e.keyBytes.length&&t.uint32(10).bytes(e.keyBytes),void 0!==e.signature&&ec.encode(e.signature,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=ek();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.keyBytes=r.bytes();break;case 2:n.signature=ec.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({keyBytes:eM(e.keyBytes)?eC(e.keyBytes):new Uint8Array,signature:eM(e.signature)?ec.fromJSON(e.signature):void 0}),toJSON(e){let t={};return void 0!==e.keyBytes&&(t.keyBytes=eI(void 0!==e.keyBytes?e.keyBytes:new Uint8Array)),void 0!==e.signature&&(t.signature=e.signature?ec.toJSON(e.signature):void 0),t},fromPartial(e){var t;let r=ek();return r.keyBytes=null!==(t=e.keyBytes)&&void 0!==t?t:new Uint8Array,r.signature=void 0!==e.signature&&null!==e.signature?ec.fromPartial(e.signature):void 0,r}},eA={encode:(e,t=el().Writer.create())=>(void 0!==e.identityKey&&eN.encode(e.identityKey,t.uint32(10).fork()).ldelim(),void 0!==e.preKey&&eN.encode(e.preKey,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={identityKey:void 0,preKey:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.identityKey=eN.decode(r,r.uint32());break;case 2:n.preKey=eN.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({identityKey:eM(e.identityKey)?eN.fromJSON(e.identityKey):void 0,preKey:eM(e.preKey)?eN.fromJSON(e.preKey):void 0}),toJSON(e){let t={};return void 0!==e.identityKey&&(t.identityKey=e.identityKey?eN.toJSON(e.identityKey):void 0),void 0!==e.preKey&&(t.preKey=e.preKey?eN.toJSON(e.preKey):void 0),t},fromPartial(e){let t={identityKey:void 0,preKey:void 0};return t.identityKey=void 0!==e.identityKey&&null!==e.identityKey?eN.fromPartial(e.identityKey):void 0,t.preKey=void 0!==e.preKey&&null!==e.preKey?eN.fromPartial(e.preKey):void 0,t}};function eP(){return{timestamp:es.UZERO,signature:void 0,secp256k1Uncompressed:void 0}}let ex={encode:(e,t=el().Writer.create())=>(e.timestamp.isZero()||t.uint32(8).uint64(e.timestamp),void 0!==e.signature&&ec.encode(e.signature,t.uint32(18).fork()).ldelim(),void 0!==e.secp256k1Uncompressed&&eT.encode(e.secp256k1Uncompressed,t.uint32(26).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=eP();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.timestamp=r.uint64();break;case 2:n.signature=ec.decode(r,r.uint32());break;case 3:n.secp256k1Uncompressed=eT.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({timestamp:eM(e.timestamp)?es.fromValue(e.timestamp):es.UZERO,signature:eM(e.signature)?ec.fromJSON(e.signature):void 0,secp256k1Uncompressed:eM(e.secp256k1Uncompressed)?eT.fromJSON(e.secp256k1Uncompressed):void 0}),toJSON(e){let t={};return void 0!==e.timestamp&&(t.timestamp=(e.timestamp||es.UZERO).toString()),void 0!==e.signature&&(t.signature=e.signature?ec.toJSON(e.signature):void 0),void 0!==e.secp256k1Uncompressed&&(t.secp256k1Uncompressed=e.secp256k1Uncompressed?eT.toJSON(e.secp256k1Uncompressed):void 0),t},fromPartial(e){let t=eP();return t.timestamp=void 0!==e.timestamp&&null!==e.timestamp?es.fromValue(e.timestamp):es.UZERO,t.signature=void 0!==e.signature&&null!==e.signature?ec.fromPartial(e.signature):void 0,t.secp256k1Uncompressed=void 0!==e.secp256k1Uncompressed&&null!==e.secp256k1Uncompressed?eT.fromPartial(e.secp256k1Uncompressed):void 0,t}};function eO(){return{bytes:new Uint8Array}}let eT={encode:(e,t=el().Writer.create())=>(0!==e.bytes.length&&t.uint32(10).bytes(e.bytes),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=eO();for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.bytes=r.bytes():r.skipType(7&o)}return n},fromJSON:e=>({bytes:eM(e.bytes)?eC(e.bytes):new Uint8Array}),toJSON(e){let t={};return void 0!==e.bytes&&(t.bytes=eI(void 0!==e.bytes?e.bytes:new Uint8Array)),t},fromPartial(e){var t;let r=eO();return r.bytes=null!==(t=e.bytes)&&void 0!==t?t:new Uint8Array,r}},eR={encode:(e,t=el().Writer.create())=>(void 0!==e.identityKey&&ex.encode(e.identityKey,t.uint32(10).fork()).ldelim(),void 0!==e.preKey&&ex.encode(e.preKey,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={identityKey:void 0,preKey:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.identityKey=ex.decode(r,r.uint32());break;case 2:n.preKey=ex.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({identityKey:eM(e.identityKey)?ex.fromJSON(e.identityKey):void 0,preKey:eM(e.preKey)?ex.fromJSON(e.preKey):void 0}),toJSON(e){let t={};return void 0!==e.identityKey&&(t.identityKey=e.identityKey?ex.toJSON(e.identityKey):void 0),void 0!==e.preKey&&(t.preKey=e.preKey?ex.toJSON(e.preKey):void 0),t},fromPartial(e){let t={identityKey:void 0,preKey:void 0};return t.identityKey=void 0!==e.identityKey&&null!==e.identityKey?ex.fromPartial(e.identityKey):void 0,t.preKey=void 0!==e.preKey&&null!==e.preKey?ex.fromPartial(e.preKey):void 0,t}};var eB=(()=>{if(void 0!==eB)return eB;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function eC(e){if(eB.Buffer)return Uint8Array.from(eB.Buffer.from(e,"base64"));{let t=eB.atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}}function eI(e){if(eB.Buffer)return eB.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),eB.btoa(t.join(""))}}function eM(e){return null!=e}el().util.Long!==es&&(el().util.Long=es,el().configure());let eU="xmtp.message_api.v1";function eK(){return{identityKey:void 0,authDataBytes:new Uint8Array,authDataSignature:void 0}}let eD={encode:(e,t=el().Writer.create())=>(void 0!==e.identityKey&&ex.encode(e.identityKey,t.uint32(10).fork()).ldelim(),0!==e.authDataBytes.length&&t.uint32(18).bytes(e.authDataBytes),void 0!==e.authDataSignature&&ec.encode(e.authDataSignature,t.uint32(26).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=eK();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.identityKey=ex.decode(r,r.uint32());break;case 2:n.authDataBytes=r.bytes();break;case 3:n.authDataSignature=ec.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({identityKey:eq(e.identityKey)?ex.fromJSON(e.identityKey):void 0,authDataBytes:eq(e.authDataBytes)?eF(e.authDataBytes):new Uint8Array,authDataSignature:eq(e.authDataSignature)?ec.fromJSON(e.authDataSignature):void 0}),toJSON(e){let t={};return void 0!==e.identityKey&&(t.identityKey=e.identityKey?ex.toJSON(e.identityKey):void 0),void 0!==e.authDataBytes&&(t.authDataBytes=function(e){if(eJ.Buffer)return eJ.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),eJ.btoa(t.join(""))}}(void 0!==e.authDataBytes?e.authDataBytes:new Uint8Array)),void 0!==e.authDataSignature&&(t.authDataSignature=e.authDataSignature?ec.toJSON(e.authDataSignature):void 0),t},fromPartial(e){var t;let r=eK();return r.identityKey=void 0!==e.identityKey&&null!==e.identityKey?ex.fromPartial(e.identityKey):void 0,r.authDataBytes=null!==(t=e.authDataBytes)&&void 0!==t?t:new Uint8Array,r.authDataSignature=void 0!==e.authDataSignature&&null!==e.authDataSignature?ec.fromPartial(e.authDataSignature):void 0,r}};function ej(){return{walletAddr:"",createdNs:es.UZERO}}let eL={encode:(e,t=el().Writer.create())=>(""!==e.walletAddr&&t.uint32(10).string(e.walletAddr),e.createdNs.isZero()||t.uint32(16).uint64(e.createdNs),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=ej();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.walletAddr=r.string();break;case 2:n.createdNs=r.uint64();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({walletAddr:eq(e.walletAddr)?String(e.walletAddr):"",createdNs:eq(e.createdNs)?es.fromValue(e.createdNs):es.UZERO}),toJSON(e){let t={};return void 0!==e.walletAddr&&(t.walletAddr=e.walletAddr),void 0!==e.createdNs&&(t.createdNs=(e.createdNs||es.UZERO).toString()),t},fromPartial(e){var t;let r=ej();return r.walletAddr=null!==(t=e.walletAddr)&&void 0!==t?t:"",r.createdNs=void 0!==e.createdNs&&null!==e.createdNs?es.fromValue(e.createdNs):es.UZERO,r}};var eJ=(()=>{if(void 0!==eJ)return eJ;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function eF(e){if(eJ.Buffer)return Uint8Array.from(eJ.Buffer.from(e,"base64"));{let t=eJ.atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}}function eq(e){return null!=e}el().util.Long!==es&&(el().util.Long=es,el().configure());let eV="xmtp.message_contents",ez={encode:(e,t=el().Writer.create())=>(void 0!==e.aes256GcmHkdfSha256&&eH.encode(e.aes256GcmHkdfSha256,t.uint32(10).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={aes256GcmHkdfSha256:void 0};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.aes256GcmHkdfSha256=eH.decode(r,r.uint32()):r.skipType(7&o)}return n},fromJSON:e=>({aes256GcmHkdfSha256:eX(e.aes256GcmHkdfSha256)?eH.fromJSON(e.aes256GcmHkdfSha256):void 0}),toJSON(e){let t={};return void 0!==e.aes256GcmHkdfSha256&&(t.aes256GcmHkdfSha256=e.aes256GcmHkdfSha256?eH.toJSON(e.aes256GcmHkdfSha256):void 0),t},fromPartial(e){let t={aes256GcmHkdfSha256:void 0};return t.aes256GcmHkdfSha256=void 0!==e.aes256GcmHkdfSha256&&null!==e.aes256GcmHkdfSha256?eH.fromPartial(e.aes256GcmHkdfSha256):void 0,t}};function eG(){return{hkdfSalt:new Uint8Array,gcmNonce:new Uint8Array,payload:new Uint8Array}}let eH={encode:(e,t=el().Writer.create())=>(0!==e.hkdfSalt.length&&t.uint32(10).bytes(e.hkdfSalt),0!==e.gcmNonce.length&&t.uint32(18).bytes(e.gcmNonce),0!==e.payload.length&&t.uint32(26).bytes(e.payload),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=eG();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.hkdfSalt=r.bytes();break;case 2:n.gcmNonce=r.bytes();break;case 3:n.payload=r.bytes();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({hkdfSalt:eX(e.hkdfSalt)?eZ(e.hkdfSalt):new Uint8Array,gcmNonce:eX(e.gcmNonce)?eZ(e.gcmNonce):new Uint8Array,payload:eX(e.payload)?eZ(e.payload):new Uint8Array}),toJSON(e){let t={};return void 0!==e.hkdfSalt&&(t.hkdfSalt=e$(void 0!==e.hkdfSalt?e.hkdfSalt:new Uint8Array)),void 0!==e.gcmNonce&&(t.gcmNonce=e$(void 0!==e.gcmNonce?e.gcmNonce:new Uint8Array)),void 0!==e.payload&&(t.payload=e$(void 0!==e.payload?e.payload:new Uint8Array)),t},fromPartial(e){var t,r,i;let n=eG();return n.hkdfSalt=null!==(t=e.hkdfSalt)&&void 0!==t?t:new Uint8Array,n.gcmNonce=null!==(r=e.gcmNonce)&&void 0!==r?r:new Uint8Array,n.payload=null!==(i=e.payload)&&void 0!==i?i:new Uint8Array,n}};var eW=(()=>{if(void 0!==eW)return eW;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function eZ(e){if(eW.Buffer)return Uint8Array.from(eW.Buffer.from(e,"base64"));{let t=eW.atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}}function e$(e){if(eW.Buffer)return eW.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),eW.btoa(t.join(""))}}function eX(e){return null!=e}el().util.Long!==es&&(el().util.Long=es,el().configure());let eY="xmtp.message_contents";function eQ(){return{sender:void 0,recipient:void 0,timestamp:es.UZERO}}let e0={encode:(e,t=el().Writer.create())=>(void 0!==e.sender&&eR.encode(e.sender,t.uint32(10).fork()).ldelim(),void 0!==e.recipient&&eR.encode(e.recipient,t.uint32(18).fork()).ldelim(),e.timestamp.isZero()||t.uint32(24).uint64(e.timestamp),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=eQ();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.sender=eR.decode(r,r.uint32());break;case 2:n.recipient=eR.decode(r,r.uint32());break;case 3:n.timestamp=r.uint64();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({sender:tt(e.sender)?eR.fromJSON(e.sender):void 0,recipient:tt(e.recipient)?eR.fromJSON(e.recipient):void 0,timestamp:tt(e.timestamp)?es.fromValue(e.timestamp):es.UZERO}),toJSON(e){let t={};return void 0!==e.sender&&(t.sender=e.sender?eR.toJSON(e.sender):void 0),void 0!==e.recipient&&(t.recipient=e.recipient?eR.toJSON(e.recipient):void 0),void 0!==e.timestamp&&(t.timestamp=(e.timestamp||es.UZERO).toString()),t},fromPartial(e){let t=eQ();return t.sender=void 0!==e.sender&&null!==e.sender?eR.fromPartial(e.sender):void 0,t.recipient=void 0!==e.recipient&&null!==e.recipient?eR.fromPartial(e.recipient):void 0,t.timestamp=void 0!==e.timestamp&&null!==e.timestamp?es.fromValue(e.timestamp):es.UZERO,t}};function e1(){return{headerBytes:new Uint8Array,ciphertext:void 0}}let e2={encode:(e,t=el().Writer.create())=>(0!==e.headerBytes.length&&t.uint32(10).bytes(e.headerBytes),void 0!==e.ciphertext&&ez.encode(e.ciphertext,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=e1();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.headerBytes=r.bytes();break;case 2:n.ciphertext=ez.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({headerBytes:tt(e.headerBytes)?e9(e.headerBytes):new Uint8Array,ciphertext:tt(e.ciphertext)?ez.fromJSON(e.ciphertext):void 0}),toJSON(e){let t={};return void 0!==e.headerBytes&&(t.headerBytes=te(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),void 0!==e.ciphertext&&(t.ciphertext=e.ciphertext?ez.toJSON(e.ciphertext):void 0),t},fromPartial(e){var t;let r=e1();return r.headerBytes=null!==(t=e.headerBytes)&&void 0!==t?t:new Uint8Array,r.ciphertext=void 0!==e.ciphertext&&null!==e.ciphertext?ez.fromPartial(e.ciphertext):void 0,r}};function e3(){return{createdNs:es.UZERO,topic:""}}let e6={encode:(e,t=el().Writer.create())=>(e.createdNs.isZero()||t.uint32(8).uint64(e.createdNs),""!==e.topic&&t.uint32(18).string(e.topic),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=e3();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.createdNs=r.uint64();break;case 2:n.topic=r.string();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({createdNs:tt(e.createdNs)?es.fromValue(e.createdNs):es.UZERO,topic:tt(e.topic)?String(e.topic):""}),toJSON(e){let t={};return void 0!==e.createdNs&&(t.createdNs=(e.createdNs||es.UZERO).toString()),void 0!==e.topic&&(t.topic=e.topic),t},fromPartial(e){var t;let r=e3();return r.createdNs=void 0!==e.createdNs&&null!==e.createdNs?es.fromValue(e.createdNs):es.UZERO,r.topic=null!==(t=e.topic)&&void 0!==t?t:"",r}};function e5(){return{headerBytes:new Uint8Array,ciphertext:void 0}}let e8={encode:(e,t=el().Writer.create())=>(0!==e.headerBytes.length&&t.uint32(10).bytes(e.headerBytes),void 0!==e.ciphertext&&ez.encode(e.ciphertext,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=e5();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.headerBytes=r.bytes();break;case 2:n.ciphertext=ez.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({headerBytes:tt(e.headerBytes)?e9(e.headerBytes):new Uint8Array,ciphertext:tt(e.ciphertext)?ez.fromJSON(e.ciphertext):void 0}),toJSON(e){let t={};return void 0!==e.headerBytes&&(t.headerBytes=te(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),void 0!==e.ciphertext&&(t.ciphertext=e.ciphertext?ez.toJSON(e.ciphertext):void 0),t},fromPartial(e){var t;let r=e5();return r.headerBytes=null!==(t=e.headerBytes)&&void 0!==t?t:new Uint8Array,r.ciphertext=void 0!==e.ciphertext&&null!==e.ciphertext?ez.fromPartial(e.ciphertext):void 0,r}},e4={encode:(e,t=el().Writer.create())=>(void 0!==e.v1&&e2.encode(e.v1,t.uint32(10).fork()).ldelim(),void 0!==e.v2&&e8.encode(e.v2,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={v1:void 0,v2:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.v1=e2.decode(r,r.uint32());break;case 2:n.v2=e8.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({v1:tt(e.v1)?e2.fromJSON(e.v1):void 0,v2:tt(e.v2)?e8.fromJSON(e.v2):void 0}),toJSON(e){let t={};return void 0!==e.v1&&(t.v1=e.v1?e2.toJSON(e.v1):void 0),void 0!==e.v2&&(t.v2=e.v2?e8.toJSON(e.v2):void 0),t},fromPartial(e){let t={v1:void 0,v2:void 0};return t.v1=void 0!==e.v1&&null!==e.v1?e2.fromPartial(e.v1):void 0,t.v2=void 0!==e.v2&&null!==e.v2?e8.fromPartial(e.v2):void 0,t}};var e7=(()=>{if(void 0!==e7)return e7;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function e9(e){if(e7.Buffer)return Uint8Array.from(e7.Buffer.from(e,"base64"));{let t=e7.atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}}function te(e){if(e7.Buffer)return e7.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),e7.btoa(t.join(""))}}function tt(e){return null!=e}el().util.Long!==es&&(el().util.Long=es,el().configure());let tr="xmtp.message_contents";function ti(e){switch(e){case 0:case"COMPRESSION_DEFLATE":return n.COMPRESSION_DEFLATE;case 1:case"COMPRESSION_GZIP":return n.COMPRESSION_GZIP;default:return n.UNRECOGNIZED}}function tn(e){switch(e){case n.COMPRESSION_DEFLATE:return"COMPRESSION_DEFLATE";case n.COMPRESSION_GZIP:return"COMPRESSION_GZIP";case n.UNRECOGNIZED:default:return"UNRECOGNIZED"}}!function(e){e[e.COMPRESSION_DEFLATE=0]="COMPRESSION_DEFLATE",e[e.COMPRESSION_GZIP=1]="COMPRESSION_GZIP",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(n||(n={}));let to={encode:(e,t=el().Writer.create())=>(""!==e.authorityId&&t.uint32(10).string(e.authorityId),""!==e.typeId&&t.uint32(18).string(e.typeId),0!==e.versionMajor&&t.uint32(24).uint32(e.versionMajor),0!==e.versionMinor&&t.uint32(32).uint32(e.versionMinor),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={authorityId:"",typeId:"",versionMajor:0,versionMinor:0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.authorityId=r.string();break;case 2:n.typeId=r.string();break;case 3:n.versionMajor=r.uint32();break;case 4:n.versionMinor=r.uint32();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({authorityId:tp(e.authorityId)?String(e.authorityId):"",typeId:tp(e.typeId)?String(e.typeId):"",versionMajor:tp(e.versionMajor)?Number(e.versionMajor):0,versionMinor:tp(e.versionMinor)?Number(e.versionMinor):0}),toJSON(e){let t={};return void 0!==e.authorityId&&(t.authorityId=e.authorityId),void 0!==e.typeId&&(t.typeId=e.typeId),void 0!==e.versionMajor&&(t.versionMajor=Math.round(e.versionMajor)),void 0!==e.versionMinor&&(t.versionMinor=Math.round(e.versionMinor)),t},fromPartial(e){var t,r,i,n;let o={authorityId:"",typeId:"",versionMajor:0,versionMinor:0};return o.authorityId=null!==(t=e.authorityId)&&void 0!==t?t:"",o.typeId=null!==(r=e.typeId)&&void 0!==r?r:"",o.versionMajor=null!==(i=e.versionMajor)&&void 0!==i?i:0,o.versionMinor=null!==(n=e.versionMinor)&&void 0!==n?n:0,o}};function ts(){return{type:void 0,parameters:{},fallback:void 0,compression:void 0,content:new Uint8Array}}let ta={encode:(e,t=el().Writer.create())=>(void 0!==e.type&&to.encode(e.type,t.uint32(10).fork()).ldelim(),Object.entries(e.parameters).forEach(([e,r])=>{tl.encode({key:e,value:r},t.uint32(18).fork()).ldelim()}),void 0!==e.fallback&&t.uint32(26).string(e.fallback),void 0!==e.compression&&t.uint32(40).int32(e.compression),0!==e.content.length&&t.uint32(34).bytes(e.content),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=ts();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.type=to.decode(r,r.uint32());break;case 2:let s=tl.decode(r,r.uint32());void 0!==s.value&&(n.parameters[s.key]=s.value);break;case 3:n.fallback=r.string();break;case 5:n.compression=r.int32();break;case 4:n.content=r.bytes();break;default:r.skipType(7&o)}}return n},fromJSON(e){var t;return{type:tp(e.type)?to.fromJSON(e.type):void 0,parameters:"object"==typeof(t=e.parameters)&&null!==t?Object.entries(e.parameters).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{},fallback:tp(e.fallback)?String(e.fallback):void 0,compression:tp(e.compression)?ti(e.compression):void 0,content:tp(e.content)?th(e.content):new Uint8Array}},toJSON(e){let t={};return void 0!==e.type&&(t.type=e.type?to.toJSON(e.type):void 0),t.parameters={},e.parameters&&Object.entries(e.parameters).forEach(([e,r])=>{t.parameters[e]=r}),void 0!==e.fallback&&(t.fallback=e.fallback),void 0!==e.compression&&(t.compression=void 0!==e.compression?tn(e.compression):void 0),void 0!==e.content&&(t.content=tf(void 0!==e.content?e.content:new Uint8Array)),t},fromPartial(e){var t,r,i,n;let o=ts();return o.type=void 0!==e.type&&null!==e.type?to.fromPartial(e.type):void 0,o.parameters=Object.entries(null!==(t=e.parameters)&&void 0!==t?t:{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=String(r)),e),{}),o.fallback=null!==(r=e.fallback)&&void 0!==r?r:void 0,o.compression=null!==(i=e.compression)&&void 0!==i?i:void 0,o.content=null!==(n=e.content)&&void 0!==n?n:new Uint8Array,o}},tl={encode:(e,t=el().Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={key:"",value:""};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.key=r.string();break;case 2:n.value=r.string();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({key:tp(e.key)?String(e.key):"",value:tp(e.value)?String(e.value):""}),toJSON(e){let t={};return void 0!==e.key&&(t.key=e.key),void 0!==e.value&&(t.value=e.value),t},fromPartial(e){var t,r;let i={key:"",value:""};return i.key=null!==(t=e.key)&&void 0!==t?t:"",i.value=null!==(r=e.value)&&void 0!==r?r:"",i}};function tu(){return{payload:new Uint8Array,sender:void 0,signature:void 0}}let tc={encode:(e,t=el().Writer.create())=>(0!==e.payload.length&&t.uint32(10).bytes(e.payload),void 0!==e.sender&&eA.encode(e.sender,t.uint32(18).fork()).ldelim(),void 0!==e.signature&&ec.encode(e.signature,t.uint32(26).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=tu();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.payload=r.bytes();break;case 2:n.sender=eA.decode(r,r.uint32());break;case 3:n.signature=ec.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({payload:tp(e.payload)?th(e.payload):new Uint8Array,sender:tp(e.sender)?eA.fromJSON(e.sender):void 0,signature:tp(e.signature)?ec.fromJSON(e.signature):void 0}),toJSON(e){let t={};return void 0!==e.payload&&(t.payload=tf(void 0!==e.payload?e.payload:new Uint8Array)),void 0!==e.sender&&(t.sender=e.sender?eA.toJSON(e.sender):void 0),void 0!==e.signature&&(t.signature=e.signature?ec.toJSON(e.signature):void 0),t},fromPartial(e){var t;let r=tu();return r.payload=null!==(t=e.payload)&&void 0!==t?t:new Uint8Array,r.sender=void 0!==e.sender&&null!==e.sender?eA.fromPartial(e.sender):void 0,r.signature=void 0!==e.signature&&null!==e.signature?ec.fromPartial(e.signature):void 0,r}};var td=(()=>{if(void 0!==td)return td;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function th(e){if(td.Buffer)return Uint8Array.from(td.Buffer.from(e,"base64"));{let t=td.atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}}function tf(e){if(td.Buffer)return td.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),td.btoa(t.join(""))}}function tp(e){return null!=e}el().util.Long!==es&&(el().util.Long=es,el().configure());let ty="xmtp.message_contents",tm={encode(e,t=el().Writer.create()){for(let r of e.parts)tv.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={parts:[]};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.parts.push(tv.decode(r,r.uint32())):r.skipType(7&o)}return n},fromJSON:e=>({parts:Array.isArray(null==e?void 0:e.parts)?e.parts.map(e=>tv.fromJSON(e)):[]}),toJSON(e){let t={};return e.parts?t.parts=e.parts.map(e=>e?tv.toJSON(e):void 0):t.parts=[],t},fromPartial(e){var t;let r={parts:[]};return r.parts=(null===(t=e.parts)||void 0===t?void 0:t.map(e=>tv.fromPartial(e)))||[],r}},tv={encode:(e,t=el().Writer.create())=>(void 0!==e.part&&ta.encode(e.part,t.uint32(10).fork()).ldelim(),void 0!==e.composite&&tm.encode(e.composite,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={part:void 0,composite:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.part=ta.decode(r,r.uint32());break;case 2:n.composite=tm.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({part:tg(e.part)?ta.fromJSON(e.part):void 0,composite:tg(e.composite)?tm.fromJSON(e.composite):void 0}),toJSON(e){let t={};return void 0!==e.part&&(t.part=e.part?ta.toJSON(e.part):void 0),void 0!==e.composite&&(t.composite=e.composite?tm.toJSON(e.composite):void 0),t},fromPartial(e){let t={part:void 0,composite:void 0};return t.part=void 0!==e.part&&null!==e.part?ta.fromPartial(e.part):void 0,t.composite=void 0!==e.composite&&null!==e.composite?tm.fromPartial(e.composite):void 0,t}};function tg(e){return null!=e}el().util.Long!==es&&(el().util.Long=es,el().configure());let tb="xmtp.message_contents";function tw(){return{createdNs:es.UZERO,secp256k1:void 0,publicKey:void 0}}let t_={encode:(e,t=el().Writer.create())=>(e.createdNs.isZero()||t.uint32(8).uint64(e.createdNs),void 0!==e.secp256k1&&tE.encode(e.secp256k1,t.uint32(18).fork()).ldelim(),void 0!==e.publicKey&&eN.encode(e.publicKey,t.uint32(26).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=tw();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.createdNs=r.uint64();break;case 2:n.secp256k1=tE.decode(r,r.uint32());break;case 3:n.publicKey=eN.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({createdNs:tK(e.createdNs)?es.fromValue(e.createdNs):es.UZERO,secp256k1:tK(e.secp256k1)?tE.fromJSON(e.secp256k1):void 0,publicKey:tK(e.publicKey)?eN.fromJSON(e.publicKey):void 0}),toJSON(e){let t={};return void 0!==e.createdNs&&(t.createdNs=(e.createdNs||es.UZERO).toString()),void 0!==e.secp256k1&&(t.secp256k1=e.secp256k1?tE.toJSON(e.secp256k1):void 0),void 0!==e.publicKey&&(t.publicKey=e.publicKey?eN.toJSON(e.publicKey):void 0),t},fromPartial(e){let t=tw();return t.createdNs=void 0!==e.createdNs&&null!==e.createdNs?es.fromValue(e.createdNs):es.UZERO,t.secp256k1=void 0!==e.secp256k1&&null!==e.secp256k1?tE.fromPartial(e.secp256k1):void 0,t.publicKey=void 0!==e.publicKey&&null!==e.publicKey?eN.fromPartial(e.publicKey):void 0,t}};function tS(){return{bytes:new Uint8Array}}let tE={encode:(e,t=el().Writer.create())=>(0!==e.bytes.length&&t.uint32(10).bytes(e.bytes),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=tS();for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.bytes=r.bytes():r.skipType(7&o)}return n},fromJSON:e=>({bytes:tK(e.bytes)?tM(e.bytes):new Uint8Array}),toJSON(e){let t={};return void 0!==e.bytes&&(t.bytes=tU(void 0!==e.bytes?e.bytes:new Uint8Array)),t},fromPartial(e){var t;let r=tS();return r.bytes=null!==(t=e.bytes)&&void 0!==t?t:new Uint8Array,r}},tk={encode(e,t=el().Writer.create()){for(let r of(void 0!==e.identityKey&&t_.encode(e.identityKey,t.uint32(10).fork()).ldelim(),e.preKeys))t_.encode(r,t.uint32(18).fork()).ldelim();return t},decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={identityKey:void 0,preKeys:[]};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.identityKey=t_.decode(r,r.uint32());break;case 2:n.preKeys.push(t_.decode(r,r.uint32()));break;default:r.skipType(7&o)}}return n},fromJSON:e=>({identityKey:tK(e.identityKey)?t_.fromJSON(e.identityKey):void 0,preKeys:Array.isArray(null==e?void 0:e.preKeys)?e.preKeys.map(e=>t_.fromJSON(e)):[]}),toJSON(e){let t={};return void 0!==e.identityKey&&(t.identityKey=e.identityKey?t_.toJSON(e.identityKey):void 0),e.preKeys?t.preKeys=e.preKeys.map(e=>e?t_.toJSON(e):void 0):t.preKeys=[],t},fromPartial(e){var t;let r={identityKey:void 0,preKeys:[]};return r.identityKey=void 0!==e.identityKey&&null!==e.identityKey?t_.fromPartial(e.identityKey):void 0,r.preKeys=(null===(t=e.preKeys)||void 0===t?void 0:t.map(e=>t_.fromPartial(e)))||[],r}};function tN(){return{timestamp:es.UZERO,secp256k1:void 0,publicKey:void 0}}let tA={encode:(e,t=el().Writer.create())=>(e.timestamp.isZero()||t.uint32(8).uint64(e.timestamp),void 0!==e.secp256k1&&tx.encode(e.secp256k1,t.uint32(18).fork()).ldelim(),void 0!==e.publicKey&&ex.encode(e.publicKey,t.uint32(26).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=tN();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.timestamp=r.uint64();break;case 2:n.secp256k1=tx.decode(r,r.uint32());break;case 3:n.publicKey=ex.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({timestamp:tK(e.timestamp)?es.fromValue(e.timestamp):es.UZERO,secp256k1:tK(e.secp256k1)?tx.fromJSON(e.secp256k1):void 0,publicKey:tK(e.publicKey)?ex.fromJSON(e.publicKey):void 0}),toJSON(e){let t={};return void 0!==e.timestamp&&(t.timestamp=(e.timestamp||es.UZERO).toString()),void 0!==e.secp256k1&&(t.secp256k1=e.secp256k1?tx.toJSON(e.secp256k1):void 0),void 0!==e.publicKey&&(t.publicKey=e.publicKey?ex.toJSON(e.publicKey):void 0),t},fromPartial(e){let t=tN();return t.timestamp=void 0!==e.timestamp&&null!==e.timestamp?es.fromValue(e.timestamp):es.UZERO,t.secp256k1=void 0!==e.secp256k1&&null!==e.secp256k1?tx.fromPartial(e.secp256k1):void 0,t.publicKey=void 0!==e.publicKey&&null!==e.publicKey?ex.fromPartial(e.publicKey):void 0,t}};function tP(){return{bytes:new Uint8Array}}let tx={encode:(e,t=el().Writer.create())=>(0!==e.bytes.length&&t.uint32(10).bytes(e.bytes),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=tP();for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.bytes=r.bytes():r.skipType(7&o)}return n},fromJSON:e=>({bytes:tK(e.bytes)?tM(e.bytes):new Uint8Array}),toJSON(e){let t={};return void 0!==e.bytes&&(t.bytes=tU(void 0!==e.bytes?e.bytes:new Uint8Array)),t},fromPartial(e){var t;let r=tP();return r.bytes=null!==(t=e.bytes)&&void 0!==t?t:new Uint8Array,r}},tO={encode(e,t=el().Writer.create()){for(let r of(void 0!==e.identityKey&&tA.encode(e.identityKey,t.uint32(10).fork()).ldelim(),e.preKeys))tA.encode(r,t.uint32(18).fork()).ldelim();return t},decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={identityKey:void 0,preKeys:[]};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.identityKey=tA.decode(r,r.uint32());break;case 2:n.preKeys.push(tA.decode(r,r.uint32()));break;default:r.skipType(7&o)}}return n},fromJSON:e=>({identityKey:tK(e.identityKey)?tA.fromJSON(e.identityKey):void 0,preKeys:Array.isArray(null==e?void 0:e.preKeys)?e.preKeys.map(e=>tA.fromJSON(e)):[]}),toJSON(e){let t={};return void 0!==e.identityKey&&(t.identityKey=e.identityKey?tA.toJSON(e.identityKey):void 0),e.preKeys?t.preKeys=e.preKeys.map(e=>e?tA.toJSON(e):void 0):t.preKeys=[],t},fromPartial(e){var t;let r={identityKey:void 0,preKeys:[]};return r.identityKey=void 0!==e.identityKey&&null!==e.identityKey?tA.fromPartial(e.identityKey):void 0,r.preKeys=(null===(t=e.preKeys)||void 0===t?void 0:t.map(e=>tA.fromPartial(e)))||[],r}},tT={encode:(e,t=el().Writer.create())=>(void 0!==e.v1&&tO.encode(e.v1,t.uint32(10).fork()).ldelim(),void 0!==e.v2&&tk.encode(e.v2,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={v1:void 0,v2:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.v1=tO.decode(r,r.uint32());break;case 2:n.v2=tk.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({v1:tK(e.v1)?tO.fromJSON(e.v1):void 0,v2:tK(e.v2)?tk.fromJSON(e.v2):void 0}),toJSON(e){let t={};return void 0!==e.v1&&(t.v1=e.v1?tO.toJSON(e.v1):void 0),void 0!==e.v2&&(t.v2=e.v2?tk.toJSON(e.v2):void 0),t},fromPartial(e){let t={v1:void 0,v2:void 0};return t.v1=void 0!==e.v1&&null!==e.v1?tO.fromPartial(e.v1):void 0,t.v2=void 0!==e.v2&&null!==e.v2?tk.fromPartial(e.v2):void 0,t}};function tR(){return{walletPreKey:new Uint8Array,ciphertext:void 0}}let tB={encode:(e,t=el().Writer.create())=>(0!==e.walletPreKey.length&&t.uint32(10).bytes(e.walletPreKey),void 0!==e.ciphertext&&ez.encode(e.ciphertext,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=tR();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.walletPreKey=r.bytes();break;case 2:n.ciphertext=ez.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({walletPreKey:tK(e.walletPreKey)?tM(e.walletPreKey):new Uint8Array,ciphertext:tK(e.ciphertext)?ez.fromJSON(e.ciphertext):void 0}),toJSON(e){let t={};return void 0!==e.walletPreKey&&(t.walletPreKey=tU(void 0!==e.walletPreKey?e.walletPreKey:new Uint8Array)),void 0!==e.ciphertext&&(t.ciphertext=e.ciphertext?ez.toJSON(e.ciphertext):void 0),t},fromPartial(e){var t;let r=tR();return r.walletPreKey=null!==(t=e.walletPreKey)&&void 0!==t?t:new Uint8Array,r.ciphertext=void 0!==e.ciphertext&&null!==e.ciphertext?ez.fromPartial(e.ciphertext):void 0,r}},tC={encode:(e,t=el().Writer.create())=>(void 0!==e.v1&&tB.encode(e.v1,t.uint32(10).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={v1:void 0};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.v1=tB.decode(r,r.uint32()):r.skipType(7&o)}return n},fromJSON:e=>({v1:tK(e.v1)?tB.fromJSON(e.v1):void 0}),toJSON(e){let t={};return void 0!==e.v1&&(t.v1=e.v1?tB.toJSON(e.v1):void 0),t},fromPartial(e){let t={v1:void 0};return t.v1=void 0!==e.v1&&null!==e.v1?tB.fromPartial(e.v1):void 0,t}};var tI=(()=>{if(void 0!==tI)return tI;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function tM(e){if(tI.Buffer)return Uint8Array.from(tI.Buffer.from(e,"base64"));{let t=tI.atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}}function tU(e){if(tI.Buffer)return tI.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),tI.btoa(t.join(""))}}function tK(e){return null!=e}el().util.Long!==es&&(el().util.Long=es,el().configure());let tD="xmtp.message_contents",tj={encode:(e,t=el().Writer.create())=>(void 0!==e.keyBundle&&eR.encode(e.keyBundle,t.uint32(10).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={keyBundle:void 0};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.keyBundle=eR.decode(r,r.uint32()):r.skipType(7&o)}return n},fromJSON:e=>({keyBundle:tF(e.keyBundle)?eR.fromJSON(e.keyBundle):void 0}),toJSON(e){let t={};return void 0!==e.keyBundle&&(t.keyBundle=e.keyBundle?eR.toJSON(e.keyBundle):void 0),t},fromPartial(e){let t={keyBundle:void 0};return t.keyBundle=void 0!==e.keyBundle&&null!==e.keyBundle?eR.fromPartial(e.keyBundle):void 0,t}},tL={encode:(e,t=el().Writer.create())=>(void 0!==e.keyBundle&&eA.encode(e.keyBundle,t.uint32(10).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={keyBundle:void 0};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.keyBundle=eA.decode(r,r.uint32()):r.skipType(7&o)}return n},fromJSON:e=>({keyBundle:tF(e.keyBundle)?eA.fromJSON(e.keyBundle):void 0}),toJSON(e){let t={};return void 0!==e.keyBundle&&(t.keyBundle=e.keyBundle?eA.toJSON(e.keyBundle):void 0),t},fromPartial(e){let t={keyBundle:void 0};return t.keyBundle=void 0!==e.keyBundle&&null!==e.keyBundle?eA.fromPartial(e.keyBundle):void 0,t}},tJ={encode:(e,t=el().Writer.create())=>(void 0!==e.v1&&tj.encode(e.v1,t.uint32(10).fork()).ldelim(),void 0!==e.v2&&tL.encode(e.v2,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={v1:void 0,v2:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.v1=tj.decode(r,r.uint32());break;case 2:n.v2=tL.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({v1:tF(e.v1)?tj.fromJSON(e.v1):void 0,v2:tF(e.v2)?tL.fromJSON(e.v2):void 0}),toJSON(e){let t={};return void 0!==e.v1&&(t.v1=e.v1?tj.toJSON(e.v1):void 0),void 0!==e.v2&&(t.v2=e.v2?tL.toJSON(e.v2):void 0),t},fromPartial(e){let t={v1:void 0,v2:void 0};return t.v1=void 0!==e.v1&&null!==e.v1?tj.fromPartial(e.v1):void 0,t.v2=void 0!==e.v2&&null!==e.v2?tL.fromPartial(e.v2):void 0,t}};function tF(e){return null!=e}el().util.Long!==es&&(el().util.Long=es,el().configure());let tq="xmtp.message_contents",tV={encode:(e,t=el().Writer.create())=>(""!==e.topic&&t.uint32(10).string(e.topic),void 0!==e.context&&tH.encode(e.context,t.uint32(18).fork()).ldelim(),void 0!==e.aes256GcmHkdfSha256&&tG.encode(e.aes256GcmHkdfSha256,t.uint32(26).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={topic:"",context:void 0,aes256GcmHkdfSha256:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.topic=r.string();break;case 2:n.context=tH.decode(r,r.uint32());break;case 3:n.aes256GcmHkdfSha256=tG.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({topic:t3(e.topic)?String(e.topic):"",context:t3(e.context)?tH.fromJSON(e.context):void 0,aes256GcmHkdfSha256:t3(e.aes256GcmHkdfSha256)?tG.fromJSON(e.aes256GcmHkdfSha256):void 0}),toJSON(e){let t={};return void 0!==e.topic&&(t.topic=e.topic),void 0!==e.context&&(t.context=e.context?tH.toJSON(e.context):void 0),void 0!==e.aes256GcmHkdfSha256&&(t.aes256GcmHkdfSha256=e.aes256GcmHkdfSha256?tG.toJSON(e.aes256GcmHkdfSha256):void 0),t},fromPartial(e){var t;let r={topic:"",context:void 0,aes256GcmHkdfSha256:void 0};return r.topic=null!==(t=e.topic)&&void 0!==t?t:"",r.context=void 0!==e.context&&null!==e.context?tH.fromPartial(e.context):void 0,r.aes256GcmHkdfSha256=void 0!==e.aes256GcmHkdfSha256&&null!==e.aes256GcmHkdfSha256?tG.fromPartial(e.aes256GcmHkdfSha256):void 0,r}};function tz(){return{keyMaterial:new Uint8Array}}let tG={encode:(e,t=el().Writer.create())=>(0!==e.keyMaterial.length&&t.uint32(10).bytes(e.keyMaterial),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=tz();for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.keyMaterial=r.bytes():r.skipType(7&o)}return n},fromJSON:e=>({keyMaterial:t3(e.keyMaterial)?t1(e.keyMaterial):new Uint8Array}),toJSON(e){let t={};return void 0!==e.keyMaterial&&(t.keyMaterial=t2(void 0!==e.keyMaterial?e.keyMaterial:new Uint8Array)),t},fromPartial(e){var t;let r=tz();return r.keyMaterial=null!==(t=e.keyMaterial)&&void 0!==t?t:new Uint8Array,r}},tH={encode:(e,t=el().Writer.create())=>(""!==e.conversationId&&t.uint32(10).string(e.conversationId),Object.entries(e.metadata).forEach(([e,r])=>{tW.encode({key:e,value:r},t.uint32(18).fork()).ldelim()}),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={conversationId:"",metadata:{}};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.conversationId=r.string();break;case 2:let s=tW.decode(r,r.uint32());void 0!==s.value&&(n.metadata[s.key]=s.value);break;default:r.skipType(7&o)}}return n},fromJSON(e){var t;return{conversationId:t3(e.conversationId)?String(e.conversationId):"",metadata:"object"==typeof(t=e.metadata)&&null!==t?Object.entries(e.metadata).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}},toJSON(e){let t={};return void 0!==e.conversationId&&(t.conversationId=e.conversationId),t.metadata={},e.metadata&&Object.entries(e.metadata).forEach(([e,r])=>{t.metadata[e]=r}),t},fromPartial(e){var t,r;let i={conversationId:"",metadata:{}};return i.conversationId=null!==(t=e.conversationId)&&void 0!==t?t:"",i.metadata=Object.entries(null!==(r=e.metadata)&&void 0!==r?r:{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=String(r)),e),{}),i}},tW={encode:(e,t=el().Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={key:"",value:""};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.key=r.string();break;case 2:n.value=r.string();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({key:t3(e.key)?String(e.key):"",value:t3(e.value)?String(e.value):""}),toJSON(e){let t={};return void 0!==e.key&&(t.key=e.key),void 0!==e.value&&(t.value=e.value),t},fromPartial(e){var t,r;let i={key:"",value:""};return i.key=null!==(t=e.key)&&void 0!==t?t:"",i.value=null!==(r=e.value)&&void 0!==r?r:"",i}};function tZ(){return{sender:void 0,recipient:void 0,createdNs:es.UZERO}}let t$={encode:(e,t=el().Writer.create())=>(void 0!==e.sender&&eA.encode(e.sender,t.uint32(10).fork()).ldelim(),void 0!==e.recipient&&eA.encode(e.recipient,t.uint32(18).fork()).ldelim(),e.createdNs.isZero()||t.uint32(24).uint64(e.createdNs),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=tZ();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.sender=eA.decode(r,r.uint32());break;case 2:n.recipient=eA.decode(r,r.uint32());break;case 3:n.createdNs=r.uint64();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({sender:t3(e.sender)?eA.fromJSON(e.sender):void 0,recipient:t3(e.recipient)?eA.fromJSON(e.recipient):void 0,createdNs:t3(e.createdNs)?es.fromValue(e.createdNs):es.UZERO}),toJSON(e){let t={};return void 0!==e.sender&&(t.sender=e.sender?eA.toJSON(e.sender):void 0),void 0!==e.recipient&&(t.recipient=e.recipient?eA.toJSON(e.recipient):void 0),void 0!==e.createdNs&&(t.createdNs=(e.createdNs||es.UZERO).toString()),t},fromPartial(e){let t=tZ();return t.sender=void 0!==e.sender&&null!==e.sender?eA.fromPartial(e.sender):void 0,t.recipient=void 0!==e.recipient&&null!==e.recipient?eA.fromPartial(e.recipient):void 0,t.createdNs=void 0!==e.createdNs&&null!==e.createdNs?es.fromValue(e.createdNs):es.UZERO,t}};function tX(){return{headerBytes:new Uint8Array,ciphertext:void 0}}let tY={encode:(e,t=el().Writer.create())=>(0!==e.headerBytes.length&&t.uint32(10).bytes(e.headerBytes),void 0!==e.ciphertext&&ez.encode(e.ciphertext,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=tX();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.headerBytes=r.bytes();break;case 2:n.ciphertext=ez.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({headerBytes:t3(e.headerBytes)?t1(e.headerBytes):new Uint8Array,ciphertext:t3(e.ciphertext)?ez.fromJSON(e.ciphertext):void 0}),toJSON(e){let t={};return void 0!==e.headerBytes&&(t.headerBytes=t2(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),void 0!==e.ciphertext&&(t.ciphertext=e.ciphertext?ez.toJSON(e.ciphertext):void 0),t},fromPartial(e){var t;let r=tX();return r.headerBytes=null!==(t=e.headerBytes)&&void 0!==t?t:new Uint8Array,r.ciphertext=void 0!==e.ciphertext&&null!==e.ciphertext?ez.fromPartial(e.ciphertext):void 0,r}},tQ={encode:(e,t=el().Writer.create())=>(void 0!==e.v1&&tY.encode(e.v1,t.uint32(10).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={v1:void 0};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.v1=tY.decode(r,r.uint32()):r.skipType(7&o)}return n},fromJSON:e=>({v1:t3(e.v1)?tY.fromJSON(e.v1):void 0}),toJSON(e){let t={};return void 0!==e.v1&&(t.v1=e.v1?tY.toJSON(e.v1):void 0),t},fromPartial(e){let t={v1:void 0};return t.v1=void 0!==e.v1&&null!==e.v1?tY.fromPartial(e.v1):void 0,t}};var t0=(()=>{if(void 0!==t0)return t0;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function t1(e){if(t0.Buffer)return Uint8Array.from(t0.Buffer.from(e,"base64"));{let t=t0.atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}}function t2(e){if(t0.Buffer)return t0.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),t0.btoa(t.join(""))}}function t3(e){return null!=e}el().util.Long!==es&&(el().util.Long=es,el().configure());let t6="xmtp.keystore_api.v1";function t5(e){switch(e){case 0:case"ERROR_CODE_UNSPECIFIED":return o.ERROR_CODE_UNSPECIFIED;case 1:case"ERROR_CODE_INVALID_INPUT":return o.ERROR_CODE_INVALID_INPUT;case 2:case"ERROR_CODE_NO_MATCHING_PREKEY":return o.ERROR_CODE_NO_MATCHING_PREKEY;default:return o.UNRECOGNIZED}}function t8(e){switch(e){case o.ERROR_CODE_UNSPECIFIED:return"ERROR_CODE_UNSPECIFIED";case o.ERROR_CODE_INVALID_INPUT:return"ERROR_CODE_INVALID_INPUT";case o.ERROR_CODE_NO_MATCHING_PREKEY:return"ERROR_CODE_NO_MATCHING_PREKEY";case o.UNRECOGNIZED:default:return"UNRECOGNIZED"}}!function(e){e[e.ERROR_CODE_UNSPECIFIED=0]="ERROR_CODE_UNSPECIFIED",e[e.ERROR_CODE_INVALID_INPUT=1]="ERROR_CODE_INVALID_INPUT",e[e.ERROR_CODE_NO_MATCHING_PREKEY=2]="ERROR_CODE_NO_MATCHING_PREKEY",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(o||(o={}));let t4={encode:(e,t=el().Writer.create())=>(""!==e.message&&t.uint32(10).string(e.message),0!==e.code&&t.uint32(16).int32(e.code),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={message:"",code:0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.message=r.string();break;case 2:n.code=r.int32();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({message:rU(e.message)?String(e.message):"",code:rU(e.code)?t5(e.code):0}),toJSON(e){let t={};return void 0!==e.message&&(t.message=e.message),void 0!==e.code&&(t.code=t8(e.code)),t},fromPartial(e){var t,r;let i={message:"",code:0};return i.message=null!==(t=e.message)&&void 0!==t?t:"",i.code=null!==(r=e.code)&&void 0!==r?r:0,i}};function t7(){return{topic:"",createdNs:es.UZERO,context:void 0}}let t9={encode:(e,t=el().Writer.create())=>(""!==e.topic&&t.uint32(10).string(e.topic),e.createdNs.isZero()||t.uint32(16).uint64(e.createdNs),void 0!==e.context&&tH.encode(e.context,t.uint32(26).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=t7();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.topic=r.string();break;case 2:n.createdNs=r.uint64();break;case 3:n.context=tH.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({topic:rU(e.topic)?String(e.topic):"",createdNs:rU(e.createdNs)?es.fromValue(e.createdNs):es.UZERO,context:rU(e.context)?tH.fromJSON(e.context):void 0}),toJSON(e){let t={};return void 0!==e.topic&&(t.topic=e.topic),void 0!==e.createdNs&&(t.createdNs=(e.createdNs||es.UZERO).toString()),void 0!==e.context&&(t.context=e.context?tH.toJSON(e.context):void 0),t},fromPartial(e){var t;let r=t7();return r.topic=null!==(t=e.topic)&&void 0!==t?t:"",r.createdNs=void 0!==e.createdNs&&null!==e.createdNs?es.fromValue(e.createdNs):es.UZERO,r.context=void 0!==e.context&&null!==e.context?tH.fromPartial(e.context):void 0,r}},re={encode(e,t=el().Writer.create()){for(let r of e.requests)rr.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={requests:[]};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.requests.push(rr.decode(r,r.uint32())):r.skipType(7&o)}return n},fromJSON:e=>({requests:Array.isArray(null==e?void 0:e.requests)?e.requests.map(e=>rr.fromJSON(e)):[]}),toJSON(e){let t={};return e.requests?t.requests=e.requests.map(e=>e?rr.toJSON(e):void 0):t.requests=[],t},fromPartial(e){var t;let r={requests:[]};return r.requests=(null===(t=e.requests)||void 0===t?void 0:t.map(e=>rr.fromPartial(e)))||[],r}};function rt(){return{payload:void 0,peerKeys:void 0,headerBytes:new Uint8Array,isSender:!1}}let rr={encode:(e,t=el().Writer.create())=>(void 0!==e.payload&&ez.encode(e.payload,t.uint32(10).fork()).ldelim(),void 0!==e.peerKeys&&eR.encode(e.peerKeys,t.uint32(18).fork()).ldelim(),0!==e.headerBytes.length&&t.uint32(26).bytes(e.headerBytes),!0===e.isSender&&t.uint32(32).bool(e.isSender),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=rt();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.payload=ez.decode(r,r.uint32());break;case 2:n.peerKeys=eR.decode(r,r.uint32());break;case 3:n.headerBytes=r.bytes();break;case 4:n.isSender=r.bool();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({payload:rU(e.payload)?ez.fromJSON(e.payload):void 0,peerKeys:rU(e.peerKeys)?eR.fromJSON(e.peerKeys):void 0,headerBytes:rU(e.headerBytes)?rI(e.headerBytes):new Uint8Array,isSender:!!rU(e.isSender)&&Boolean(e.isSender)}),toJSON(e){let t={};return void 0!==e.payload&&(t.payload=e.payload?ez.toJSON(e.payload):void 0),void 0!==e.peerKeys&&(t.peerKeys=e.peerKeys?eR.toJSON(e.peerKeys):void 0),void 0!==e.headerBytes&&(t.headerBytes=rM(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),void 0!==e.isSender&&(t.isSender=e.isSender),t},fromPartial(e){var t,r;let i=rt();return i.payload=void 0!==e.payload&&null!==e.payload?ez.fromPartial(e.payload):void 0,i.peerKeys=void 0!==e.peerKeys&&null!==e.peerKeys?eR.fromPartial(e.peerKeys):void 0,i.headerBytes=null!==(t=e.headerBytes)&&void 0!==t?t:new Uint8Array,i.isSender=null!==(r=e.isSender)&&void 0!==r&&r,i}},ri={encode(e,t=el().Writer.create()){for(let r of e.responses)rn.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={responses:[]};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.responses.push(rn.decode(r,r.uint32())):r.skipType(7&o)}return n},fromJSON:e=>({responses:Array.isArray(null==e?void 0:e.responses)?e.responses.map(e=>rn.fromJSON(e)):[]}),toJSON(e){let t={};return e.responses?t.responses=e.responses.map(e=>e?rn.toJSON(e):void 0):t.responses=[],t},fromPartial(e){var t;let r={responses:[]};return r.responses=(null===(t=e.responses)||void 0===t?void 0:t.map(e=>rn.fromPartial(e)))||[],r}},rn={encode:(e,t=el().Writer.create())=>(void 0!==e.result&&rs.encode(e.result,t.uint32(10).fork()).ldelim(),void 0!==e.error&&t4.encode(e.error,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={result:void 0,error:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.result=rs.decode(r,r.uint32());break;case 2:n.error=t4.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({result:rU(e.result)?rs.fromJSON(e.result):void 0,error:rU(e.error)?t4.fromJSON(e.error):void 0}),toJSON(e){let t={};return void 0!==e.result&&(t.result=e.result?rs.toJSON(e.result):void 0),void 0!==e.error&&(t.error=e.error?t4.toJSON(e.error):void 0),t},fromPartial(e){let t={result:void 0,error:void 0};return t.result=void 0!==e.result&&null!==e.result?rs.fromPartial(e.result):void 0,t.error=void 0!==e.error&&null!==e.error?t4.fromPartial(e.error):void 0,t}};function ro(){return{decrypted:new Uint8Array}}let rs={encode:(e,t=el().Writer.create())=>(0!==e.decrypted.length&&t.uint32(10).bytes(e.decrypted),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=ro();for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.decrypted=r.bytes():r.skipType(7&o)}return n},fromJSON:e=>({decrypted:rU(e.decrypted)?rI(e.decrypted):new Uint8Array}),toJSON(e){let t={};return void 0!==e.decrypted&&(t.decrypted=rM(void 0!==e.decrypted?e.decrypted:new Uint8Array)),t},fromPartial(e){var t;let r=ro();return r.decrypted=null!==(t=e.decrypted)&&void 0!==t?t:new Uint8Array,r}},ra={encode(e,t=el().Writer.create()){for(let r of e.requests)ru.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={requests:[]};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.requests.push(ru.decode(r,r.uint32())):r.skipType(7&o)}return n},fromJSON:e=>({requests:Array.isArray(null==e?void 0:e.requests)?e.requests.map(e=>ru.fromJSON(e)):[]}),toJSON(e){let t={};return e.requests?t.requests=e.requests.map(e=>e?ru.toJSON(e):void 0):t.requests=[],t},fromPartial(e){var t;let r={requests:[]};return r.requests=(null===(t=e.requests)||void 0===t?void 0:t.map(e=>ru.fromPartial(e)))||[],r}};function rl(){return{payload:void 0,headerBytes:new Uint8Array,contentTopic:""}}let ru={encode:(e,t=el().Writer.create())=>(void 0!==e.payload&&ez.encode(e.payload,t.uint32(10).fork()).ldelim(),0!==e.headerBytes.length&&t.uint32(18).bytes(e.headerBytes),""!==e.contentTopic&&t.uint32(26).string(e.contentTopic),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=rl();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.payload=ez.decode(r,r.uint32());break;case 2:n.headerBytes=r.bytes();break;case 3:n.contentTopic=r.string();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({payload:rU(e.payload)?ez.fromJSON(e.payload):void 0,headerBytes:rU(e.headerBytes)?rI(e.headerBytes):new Uint8Array,contentTopic:rU(e.contentTopic)?String(e.contentTopic):""}),toJSON(e){let t={};return void 0!==e.payload&&(t.payload=e.payload?ez.toJSON(e.payload):void 0),void 0!==e.headerBytes&&(t.headerBytes=rM(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),void 0!==e.contentTopic&&(t.contentTopic=e.contentTopic),t},fromPartial(e){var t,r;let i=rl();return i.payload=void 0!==e.payload&&null!==e.payload?ez.fromPartial(e.payload):void 0,i.headerBytes=null!==(t=e.headerBytes)&&void 0!==t?t:new Uint8Array,i.contentTopic=null!==(r=e.contentTopic)&&void 0!==r?r:"",i}},rc={encode(e,t=el().Writer.create()){for(let r of e.requests)rh.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={requests:[]};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.requests.push(rh.decode(r,r.uint32())):r.skipType(7&o)}return n},fromJSON:e=>({requests:Array.isArray(null==e?void 0:e.requests)?e.requests.map(e=>rh.fromJSON(e)):[]}),toJSON(e){let t={};return e.requests?t.requests=e.requests.map(e=>e?rh.toJSON(e):void 0):t.requests=[],t},fromPartial(e){var t;let r={requests:[]};return r.requests=(null===(t=e.requests)||void 0===t?void 0:t.map(e=>rh.fromPartial(e)))||[],r}};function rd(){return{recipient:void 0,payload:new Uint8Array,headerBytes:new Uint8Array}}let rh={encode:(e,t=el().Writer.create())=>(void 0!==e.recipient&&eR.encode(e.recipient,t.uint32(10).fork()).ldelim(),0!==e.payload.length&&t.uint32(18).bytes(e.payload),0!==e.headerBytes.length&&t.uint32(26).bytes(e.headerBytes),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=rd();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.recipient=eR.decode(r,r.uint32());break;case 2:n.payload=r.bytes();break;case 3:n.headerBytes=r.bytes();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({recipient:rU(e.recipient)?eR.fromJSON(e.recipient):void 0,payload:rU(e.payload)?rI(e.payload):new Uint8Array,headerBytes:rU(e.headerBytes)?rI(e.headerBytes):new Uint8Array}),toJSON(e){let t={};return void 0!==e.recipient&&(t.recipient=e.recipient?eR.toJSON(e.recipient):void 0),void 0!==e.payload&&(t.payload=rM(void 0!==e.payload?e.payload:new Uint8Array)),void 0!==e.headerBytes&&(t.headerBytes=rM(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),t},fromPartial(e){var t,r;let i=rd();return i.recipient=void 0!==e.recipient&&null!==e.recipient?eR.fromPartial(e.recipient):void 0,i.payload=null!==(t=e.payload)&&void 0!==t?t:new Uint8Array,i.headerBytes=null!==(r=e.headerBytes)&&void 0!==r?r:new Uint8Array,i}},rf={encode(e,t=el().Writer.create()){for(let r of e.responses)rp.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={responses:[]};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.responses.push(rp.decode(r,r.uint32())):r.skipType(7&o)}return n},fromJSON:e=>({responses:Array.isArray(null==e?void 0:e.responses)?e.responses.map(e=>rp.fromJSON(e)):[]}),toJSON(e){let t={};return e.responses?t.responses=e.responses.map(e=>e?rp.toJSON(e):void 0):t.responses=[],t},fromPartial(e){var t;let r={responses:[]};return r.responses=(null===(t=e.responses)||void 0===t?void 0:t.map(e=>rp.fromPartial(e)))||[],r}},rp={encode:(e,t=el().Writer.create())=>(void 0!==e.result&&ry.encode(e.result,t.uint32(10).fork()).ldelim(),void 0!==e.error&&t4.encode(e.error,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={result:void 0,error:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.result=ry.decode(r,r.uint32());break;case 2:n.error=t4.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({result:rU(e.result)?ry.fromJSON(e.result):void 0,error:rU(e.error)?t4.fromJSON(e.error):void 0}),toJSON(e){let t={};return void 0!==e.result&&(t.result=e.result?ry.toJSON(e.result):void 0),void 0!==e.error&&(t.error=e.error?t4.toJSON(e.error):void 0),t},fromPartial(e){let t={result:void 0,error:void 0};return t.result=void 0!==e.result&&null!==e.result?ry.fromPartial(e.result):void 0,t.error=void 0!==e.error&&null!==e.error?t4.fromPartial(e.error):void 0,t}},ry={encode:(e,t=el().Writer.create())=>(void 0!==e.encrypted&&ez.encode(e.encrypted,t.uint32(10).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={encrypted:void 0};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.encrypted=ez.decode(r,r.uint32()):r.skipType(7&o)}return n},fromJSON:e=>({encrypted:rU(e.encrypted)?ez.fromJSON(e.encrypted):void 0}),toJSON(e){let t={};return void 0!==e.encrypted&&(t.encrypted=e.encrypted?ez.toJSON(e.encrypted):void 0),t},fromPartial(e){let t={encrypted:void 0};return t.encrypted=void 0!==e.encrypted&&null!==e.encrypted?ez.fromPartial(e.encrypted):void 0,t}},rm={encode(e,t=el().Writer.create()){for(let r of e.requests)rg.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={requests:[]};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.requests.push(rg.decode(r,r.uint32())):r.skipType(7&o)}return n},fromJSON:e=>({requests:Array.isArray(null==e?void 0:e.requests)?e.requests.map(e=>rg.fromJSON(e)):[]}),toJSON(e){let t={};return e.requests?t.requests=e.requests.map(e=>e?rg.toJSON(e):void 0):t.requests=[],t},fromPartial(e){var t;let r={requests:[]};return r.requests=(null===(t=e.requests)||void 0===t?void 0:t.map(e=>rg.fromPartial(e)))||[],r}};function rv(){return{payload:new Uint8Array,headerBytes:new Uint8Array,contentTopic:""}}let rg={encode:(e,t=el().Writer.create())=>(0!==e.payload.length&&t.uint32(10).bytes(e.payload),0!==e.headerBytes.length&&t.uint32(18).bytes(e.headerBytes),""!==e.contentTopic&&t.uint32(26).string(e.contentTopic),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=rv();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.payload=r.bytes();break;case 2:n.headerBytes=r.bytes();break;case 3:n.contentTopic=r.string();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({payload:rU(e.payload)?rI(e.payload):new Uint8Array,headerBytes:rU(e.headerBytes)?rI(e.headerBytes):new Uint8Array,contentTopic:rU(e.contentTopic)?String(e.contentTopic):""}),toJSON(e){let t={};return void 0!==e.payload&&(t.payload=rM(void 0!==e.payload?e.payload:new Uint8Array)),void 0!==e.headerBytes&&(t.headerBytes=rM(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),void 0!==e.contentTopic&&(t.contentTopic=e.contentTopic),t},fromPartial(e){var t,r,i;let n=rv();return n.payload=null!==(t=e.payload)&&void 0!==t?t:new Uint8Array,n.headerBytes=null!==(r=e.headerBytes)&&void 0!==r?r:new Uint8Array,n.contentTopic=null!==(i=e.contentTopic)&&void 0!==i?i:"",n}};function rb(){return{context:void 0,recipient:void 0,createdNs:es.UZERO}}let rw={encode:(e,t=el().Writer.create())=>(void 0!==e.context&&tH.encode(e.context,t.uint32(10).fork()).ldelim(),void 0!==e.recipient&&eA.encode(e.recipient,t.uint32(18).fork()).ldelim(),e.createdNs.isZero()||t.uint32(24).uint64(e.createdNs),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=rb();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.context=tH.decode(r,r.uint32());break;case 2:n.recipient=eA.decode(r,r.uint32());break;case 3:n.createdNs=r.uint64();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({context:rU(e.context)?tH.fromJSON(e.context):void 0,recipient:rU(e.recipient)?eA.fromJSON(e.recipient):void 0,createdNs:rU(e.createdNs)?es.fromValue(e.createdNs):es.UZERO}),toJSON(e){let t={};return void 0!==e.context&&(t.context=e.context?tH.toJSON(e.context):void 0),void 0!==e.recipient&&(t.recipient=e.recipient?eA.toJSON(e.recipient):void 0),void 0!==e.createdNs&&(t.createdNs=(e.createdNs||es.UZERO).toString()),t},fromPartial(e){let t=rb();return t.context=void 0!==e.context&&null!==e.context?tH.fromPartial(e.context):void 0,t.recipient=void 0!==e.recipient&&null!==e.recipient?eA.fromPartial(e.recipient):void 0,t.createdNs=void 0!==e.createdNs&&null!==e.createdNs?es.fromValue(e.createdNs):es.UZERO,t}};function r_(){return{conversation:void 0,payload:new Uint8Array}}let rS={encode:(e,t=el().Writer.create())=>(void 0!==e.conversation&&t9.encode(e.conversation,t.uint32(10).fork()).ldelim(),0!==e.payload.length&&t.uint32(18).bytes(e.payload),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=r_();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.conversation=t9.decode(r,r.uint32());break;case 2:n.payload=r.bytes();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({conversation:rU(e.conversation)?t9.fromJSON(e.conversation):void 0,payload:rU(e.payload)?rI(e.payload):new Uint8Array}),toJSON(e){let t={};return void 0!==e.conversation&&(t.conversation=e.conversation?t9.toJSON(e.conversation):void 0),void 0!==e.payload&&(t.payload=rM(void 0!==e.payload?e.payload:new Uint8Array)),t},fromPartial(e){var t;let r=r_();return r.conversation=void 0!==e.conversation&&null!==e.conversation?t9.fromPartial(e.conversation):void 0,r.payload=null!==(t=e.payload)&&void 0!==t?t:new Uint8Array,r}},rE={encode(e,t=el().Writer.create()){for(let r of e.requests)rN.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={requests:[]};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.requests.push(rN.decode(r,r.uint32())):r.skipType(7&o)}return n},fromJSON:e=>({requests:Array.isArray(null==e?void 0:e.requests)?e.requests.map(e=>rN.fromJSON(e)):[]}),toJSON(e){let t={};return e.requests?t.requests=e.requests.map(e=>e?rN.toJSON(e):void 0):t.requests=[],t},fromPartial(e){var t;let r={requests:[]};return r.requests=(null===(t=e.requests)||void 0===t?void 0:t.map(e=>rN.fromPartial(e)))||[],r}};function rk(){return{contentTopic:"",timestampNs:es.UZERO,payload:new Uint8Array}}let rN={encode:(e,t=el().Writer.create())=>(""!==e.contentTopic&&t.uint32(10).string(e.contentTopic),e.timestampNs.isZero()||t.uint32(16).uint64(e.timestampNs),0!==e.payload.length&&t.uint32(26).bytes(e.payload),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=rk();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.contentTopic=r.string();break;case 2:n.timestampNs=r.uint64();break;case 3:n.payload=r.bytes();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({contentTopic:rU(e.contentTopic)?String(e.contentTopic):"",timestampNs:rU(e.timestampNs)?es.fromValue(e.timestampNs):es.UZERO,payload:rU(e.payload)?rI(e.payload):new Uint8Array}),toJSON(e){let t={};return void 0!==e.contentTopic&&(t.contentTopic=e.contentTopic),void 0!==e.timestampNs&&(t.timestampNs=(e.timestampNs||es.UZERO).toString()),void 0!==e.payload&&(t.payload=rM(void 0!==e.payload?e.payload:new Uint8Array)),t},fromPartial(e){var t,r;let i=rk();return i.contentTopic=null!==(t=e.contentTopic)&&void 0!==t?t:"",i.timestampNs=void 0!==e.timestampNs&&null!==e.timestampNs?es.fromValue(e.timestampNs):es.UZERO,i.payload=null!==(r=e.payload)&&void 0!==r?r:new Uint8Array,i}},rA={encode(e,t=el().Writer.create()){for(let r of e.responses)rP.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={responses:[]};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.responses.push(rP.decode(r,r.uint32())):r.skipType(7&o)}return n},fromJSON:e=>({responses:Array.isArray(null==e?void 0:e.responses)?e.responses.map(e=>rP.fromJSON(e)):[]}),toJSON(e){let t={};return e.responses?t.responses=e.responses.map(e=>e?rP.toJSON(e):void 0):t.responses=[],t},fromPartial(e){var t;let r={responses:[]};return r.responses=(null===(t=e.responses)||void 0===t?void 0:t.map(e=>rP.fromPartial(e)))||[],r}},rP={encode:(e,t=el().Writer.create())=>(void 0!==e.result&&rx.encode(e.result,t.uint32(10).fork()).ldelim(),void 0!==e.error&&t4.encode(e.error,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={result:void 0,error:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.result=rx.decode(r,r.uint32());break;case 2:n.error=t4.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({result:rU(e.result)?rx.fromJSON(e.result):void 0,error:rU(e.error)?t4.fromJSON(e.error):void 0}),toJSON(e){let t={};return void 0!==e.result&&(t.result=e.result?rx.toJSON(e.result):void 0),void 0!==e.error&&(t.error=e.error?t4.toJSON(e.error):void 0),t},fromPartial(e){let t={result:void 0,error:void 0};return t.result=void 0!==e.result&&null!==e.result?rx.fromPartial(e.result):void 0,t.error=void 0!==e.error&&null!==e.error?t4.fromPartial(e.error):void 0,t}},rx={encode:(e,t=el().Writer.create())=>(void 0!==e.conversation&&t9.encode(e.conversation,t.uint32(10).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={conversation:void 0};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.conversation=t9.decode(r,r.uint32()):r.skipType(7&o)}return n},fromJSON:e=>({conversation:rU(e.conversation)?t9.fromJSON(e.conversation):void 0}),toJSON(e){let t={};return void 0!==e.conversation&&(t.conversation=e.conversation?t9.toJSON(e.conversation):void 0),t},fromPartial(e){let t={conversation:void 0};return t.conversation=void 0!==e.conversation&&null!==e.conversation?t9.fromPartial(e.conversation):void 0,t}},rO={encode:(e,t=el().Writer.create())=>(Object.entries(e.topics).forEach(([e,r])=>{rB.encode({key:e,value:r},t.uint32(10).fork()).ldelim()}),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={topics:{}};for(;r.pos<i;){let o=r.uint32();if(o>>>3==1){let s=rB.decode(r,r.uint32());void 0!==s.value&&(n.topics[s.key]=s.value)}else r.skipType(7&o)}return n},fromJSON(e){var t;return{topics:"object"==typeof(t=e.topics)&&null!==t?Object.entries(e.topics).reduce((e,[t,r])=>(e[t]=rR.fromJSON(r),e),{}):{}}},toJSON(e){let t={topics:{}};return e.topics&&Object.entries(e.topics).forEach(([e,r])=>{t.topics[e]=rR.toJSON(r)}),t},fromPartial(e){var t;let r={topics:{}};return r.topics=Object.entries(null!==(t=e.topics)&&void 0!==t?t:{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=rR.fromPartial(r)),e),{}),r}};function rT(){return{createdNs:es.UZERO,invitation:void 0}}let rR={encode:(e,t=el().Writer.create())=>(e.createdNs.isZero()||t.uint32(8).uint64(e.createdNs),void 0!==e.invitation&&tV.encode(e.invitation,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n=rT();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.createdNs=r.uint64();break;case 2:n.invitation=tV.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({createdNs:rU(e.createdNs)?es.fromValue(e.createdNs):es.UZERO,invitation:rU(e.invitation)?tV.fromJSON(e.invitation):void 0}),toJSON(e){let t={};return void 0!==e.createdNs&&(t.createdNs=(e.createdNs||es.UZERO).toString()),void 0!==e.invitation&&(t.invitation=e.invitation?tV.toJSON(e.invitation):void 0),t},fromPartial(e){let t=rT();return t.createdNs=void 0!==e.createdNs&&null!==e.createdNs?es.fromValue(e.createdNs):es.UZERO,t.invitation=void 0!==e.invitation&&null!==e.invitation?tV.fromPartial(e.invitation):void 0,t}},rB={encode:(e,t=el().Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),void 0!==e.value&&rR.encode(e.value,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof el().Reader?e:new(el()).Reader(e),i=void 0===t?r.len:r.pos+t,n={key:"",value:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.key=r.string();break;case 2:n.value=rR.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({key:rU(e.key)?String(e.key):"",value:rU(e.value)?rR.fromJSON(e.value):void 0}),toJSON(e){let t={};return void 0!==e.key&&(t.key=e.key),void 0!==e.value&&(t.value=e.value?rR.toJSON(e.value):void 0),t},fromPartial(e){var t;let r={key:"",value:void 0};return r.key=null!==(t=e.key)&&void 0!==t?t:"",r.value=void 0!==e.value&&null!==e.value?rR.fromPartial(e.value):void 0,r}};var rC=(()=>{if(void 0!==rC)return rC;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function rI(e){if(rC.Buffer)return Uint8Array.from(rC.Buffer.from(e,"base64"));{let t=rC.atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}}function rM(e){if(rC.Buffer)return rC.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),rC.btoa(t.join(""))}}function rU(e){return null!=e}el().util.Long!==es&&(el().util.Long=es,el().configure())},346:function(module){var t;t=function(){return(()=>{var __webpack_modules__={9656:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.utils=t.schnorr=t.verify=t.signSync=t.sign=t.getSharedSecret=t.recoverPublicKey=t.getPublicKey=t.Signature=t.Point=t.CURVE=void 0;let n=i(r(9159)),o=BigInt(0),s=BigInt(1),a=BigInt(2),l=BigInt(3),u=BigInt(8),c=a**BigInt(256),d={a:o,b:BigInt(7),P:c-a**BigInt(32)-BigInt(977),n:c-BigInt("432420386565659656852420866394968145599"),h:s,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee")};function h(e){let{a:t,b:r}=d,i=B(e*e),n=B(i*e);return B(n+t*e+r)}t.CURVE=d;let f=d.a===o;class p{constructor(e,t,r){this.x=e,this.y=t,this.z=r}static fromAffine(e){if(!(e instanceof m))throw TypeError("JacobianPoint#fromAffine: expected Point");return new p(e.x,e.y,s)}static toAffineBatch(e){let t=function(e,t=d.P){let r=e.length,i=Array(r),n=s;for(let a=0;a<r;a++)e[a]!==o&&(i[a]=n,n=B(n*e[a],t));n=I(n,t);for(let l=r-1;l>=0;l--){if(e[l]===o)continue;let u=B(n*e[l],t);e[l]=B(n*i[l],t),n=u}return e}(e.map(e=>e.z));return e.map((e,r)=>e.toAffine(t[r]))}static normalizeZ(e){return p.toAffineBatch(e).map(p.fromAffine)}equals(e){let t=this,r=e,i=B(t.z*t.z),n=B(t.z*i),o=B(r.z*r.z),s=B(r.z*o);return B(t.x*o)===B(i*r.x)&&B(t.y*s)===B(n*r.y)}negate(){return new p(this.x,B(-this.y),this.z)}double(){let e=this.x,t=this.y,r=this.z,i=B(e**a),n=B(t**a),o=B(n**a),s=B(a*(B(B((e+n)**a))-i-o)),c=B(l*i),d=B(c**a),h=B(d-a*s),f=B(c*(s-h)-u*o),y=B(a*t*r);return new p(h,f,y)}add(e){if(!(e instanceof p))throw TypeError("JacobianPoint#add: expected JacobianPoint");let t=this.x,r=this.y,i=this.z,n=e.x,s=e.y,l=e.z;if(n===o||s===o)return this;if(t===o||r===o)return e;let u=B(i**a),c=B(l**a),d=B(t*c),h=B(n*u),f=B(r*l*c),y=B(B(s*i)*u),m=B(h-d),v=B(y-f);if(m===o)return v===o?this.double():p.ZERO;let g=B(m**a),b=B(m*g),w=B(d*g),_=B(v**a-b-a*w),S=B(v*(w-_)-f*b),E=B(i*l*m);return new p(_,S,E)}subtract(e){return this.add(e.negate())}multiplyUnsafe(e){let t=R(e);if(!f){let r=p.ZERO,i=this;for(;t>o;)t&s&&(r=r.add(i)),i=i.double(),t>>=s;return r}let{k1neg:n,k1:a,k2neg:l,k2:u}=K(t),c=p.ZERO,h=p.ZERO,y=this;for(;a>o||u>o;)a&s&&(c=c.add(y)),u&s&&(h=h.add(y)),y=y.double(),a>>=s,u>>=s;return n&&(c=c.negate()),l&&(h=h.negate()),h=new p(B(h.x*d.beta),h.y,h.z),c.add(h)}precomputeWindow(e){let t=f?128/e+1:256/e+1,r=[],i=this,n=i;for(let o=0;o<t;o++){n=i,r.push(n);for(let s=1;s<2**(e-1);s++)n=n.add(i),r.push(n);i=n.double()}return r}wNAF(e,t){!t&&this.equals(p.BASE)&&(t=m.BASE);let r=t&&t._WINDOW_SIZE||1;if(256%r)throw Error("Point#wNAF: Invalid precomputation window, must be power of 2");let i=t&&y.get(t);i||(i=this.precomputeWindow(r),t&&1!==r&&(i=p.normalizeZ(i),y.set(t,i)));let n=p.ZERO,o=p.ZERO,a=f?128/r+1:256/r+1,l=2**(r-1),u=BigInt(2**r-1),c=2**r,d=BigInt(r);for(let h=0;h<a;h++){let v=h*l,g=Number(e&u);if(e>>=d,g>l&&(g-=c,e+=s),0===g){let b=i[v];h%2&&(b=b.negate()),o=o.add(b)}else{let w=i[v+Math.abs(g)-1];g<0&&(w=w.negate()),n=n.add(w)}}return{p:n,f:o}}multiply(e,t){let r,i,n=R(e);if(f){let{k1neg:o,k1:s,k2neg:a,k2:l}=K(n),{p:u,f:c}=this.wNAF(s,t),{p:h,f:y}=this.wNAF(l,t);o&&(u=u.negate()),a&&(h=h.negate()),h=new p(B(h.x*d.beta),h.y,h.z),r=u.add(h),i=c.add(y)}else{let{p:m,f:v}=this.wNAF(n,t);r=m,i=v}return p.normalizeZ([r,i])[0]}toAffine(e=I(this.z)){let t=e**a,r=B(this.x*t),i=B(this.y*t*e);return new m(r,i)}}p.BASE=new p(d.Gx,d.Gy,s),p.ZERO=new p(o,s,o);let y=new WeakMap;class m{constructor(e,t){this.x=e,this.y=t}_setWindowSize(e){this._WINDOW_SIZE=e,y.delete(this)}static fromCompressedHex(e){let t=32===e.length,r=O(t?e:e.slice(1));if(!J(r))throw Error("Point is not on curve");let i=function(e){let{P:t}=d,r=BigInt(6),i=BigInt(11),n=BigInt(22),o=BigInt(23),s=BigInt(44),u=BigInt(88),c=e*e*e%t,h=c*c*e%t,f=C(h,l)*h%t,p=C(f,l)*h%t,y=C(p,a)*c%t,m=C(y,i)*y%t,v=C(m,n)*m%t,g=C(v,s)*v%t,b=C(g,u)*g%t,w=C(b,s)*v%t,_=C(w,l)*h%t,S=C(_,o)*m%t,E=C(S,r)*c%t;return C(E,a)}(h(r)),n=(i&s)===s;t?n&&(i=B(-i)):1==(1&e[0])!==n&&(i=B(-i));let o=new m(r,i);return o.assertValidity(),o}static fromUncompressedHex(e){let t=O(e.slice(1,33)),r=O(e.slice(33)),i=new m(t,r);return i.assertValidity(),i}static fromHex(e){let t=T(e),r=t[0];if(32===t.length||33===t.length&&(2===r||3===r))return this.fromCompressedHex(t);if(65===t.length&&4===r)return this.fromUncompressedHex(t);throw Error(`Point.fromHex: received invalid point. Expected 32-33 compressed bytes or 65 uncompressed bytes, not ${t.length}`)}static fromPrivateKey(e){return m.BASE.multiply(q(e))}static fromSignature(e,t,r){let i=D(e=T(e)),{r:n,s}=z(t);if(0!==r&&1!==r)throw Error("Cannot recover signature: invalid recovery bit");if(i===o)throw Error("Cannot recover signature: msgHash cannot be 0");let a=2+(1&r),l=m.fromHex(`0${a}${k(n)}`),u=p.fromAffine(l).multiplyUnsafe(s),c=p.BASE.multiply(i),h=I(n,d.n),f=u.subtract(c).multiplyUnsafe(h).toAffine();return f.assertValidity(),f}toRawBytes(e=!1){return x(this.toHex(e))}toHex(e=!1){let t=k(this.x);return e?`${this.y&s?"03":"02"}${t}`:`04${t}${k(this.y)}`}toHexX(){return this.toHex(!0).slice(2)}toRawX(){return this.toRawBytes(!0).slice(1)}assertValidity(){let e="Point is not on elliptic curve",{x:t,y:r}=this;if(!J(t)||!J(r))throw Error(e);let i=B(r*r);if(B(i-h(t))!==o)throw Error(e)}equals(e){return this.x===e.x&&this.y===e.y}negate(){return new m(this.x,B(-this.y))}double(){return p.fromAffine(this).double().toAffine()}add(e){return p.fromAffine(this).add(p.fromAffine(e)).toAffine()}subtract(e){return this.add(e.negate())}multiply(e){return p.fromAffine(this).multiply(e,this).toAffine()}}function v(e){return Number.parseInt(e[0],16)>=8?"00"+e:e}function g(e){if(e.length<2||2!==e[0])throw Error(`Invalid signature integer tag: ${E(e)}`);let t=e[1],r=e.subarray(2,t+2);if(!t||r.length!==t)throw Error("Invalid signature integer: wrong length");if(0===r[0]&&r[1]<=127)throw Error("Invalid signature integer: trailing length");return{data:O(r),left:e.subarray(t+2)}}t.Point=m,m.BASE=new m(d.Gx,d.Gy),m.ZERO=new m(o,o);class b{constructor(e,t){this.r=e,this.s=t,this.assertValidity()}static fromCompact(e){let t=_(e),r="Signature.fromCompact";if("string"!=typeof e&&!t)throw TypeError(`${r}: Expected string or Uint8Array`);let i=t?E(e):e;if(128!==i.length)throw Error(`${r}: Expected 64-byte hex`);return new b(P(i.slice(0,64)),P(i.slice(64,128)))}static fromDER(e){let t=_(e);if("string"!=typeof e&&!t)throw TypeError("Signature.fromDER: Expected string or Uint8Array");let{r,s:i}=function(e){if(e.length<2||48!=e[0])throw Error(`Invalid signature tag: ${E(e)}`);if(e[1]!==e.length-2)throw Error("Invalid signature: incorrect length");let{data:t,left:r}=g(e.subarray(2)),{data:i,left:n}=g(r);if(n.length)throw Error(`Invalid signature: left bytes after parsing: ${E(n)}`);return{r:t,s:i}}(t?e:x(e));return new b(r,i)}static fromHex(e){return this.fromDER(e)}assertValidity(){let{r:e,s:t}=this;if(!L(e))throw Error("Invalid Signature: r must be 0 < r < n");if(!L(t))throw Error("Invalid Signature: s must be 0 < s < n")}hasHighS(){let e=d.n>>s;return this.s>e}normalizeS(){return this.hasHighS()?new b(this.r,d.n-this.s):this}toDERRawBytes(e=!1){return x(this.toDERHex(e))}toDERHex(e=!1){let t=v(A(this.s));if(e)return t;let r=v(A(this.r)),i=A(r.length/2),n=A(t.length/2);return`30${A(r.length/2+t.length/2+4)}02${i}${r}02${n}${t}`}toRawBytes(){return this.toDERRawBytes()}toHex(){return this.toDERHex()}toCompactRawBytes(){return x(this.toCompactHex())}toCompactHex(){return k(this.r)+k(this.s)}}function w(...e){if(!e.every(_))throw Error("Uint8Array list expected");if(1===e.length)return e[0];let t=e.reduce((e,t)=>e+t.length,0),r=new Uint8Array(t);for(let i=0,n=0;i<e.length;i++){let o=e[i];r.set(o,n),n+=o.length}return r}function _(e){return e instanceof Uint8Array}t.Signature=b;let S=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function E(e){if(!(e instanceof Uint8Array))throw Error("Expected Uint8Array");let t="";for(let r=0;r<e.length;r++)t+=S[e[r]];return t}function k(e){if(e>c)throw Error("Expected number < 2^256");return e.toString(16).padStart(64,"0")}function N(e){return x(k(e))}function A(e){let t=e.toString(16);return 1&t.length?`0${t}`:t}function P(e){if("string"!=typeof e)throw TypeError("hexToNumber: expected string, got "+typeof e);return BigInt(`0x${e}`)}function x(e){if("string"!=typeof e)throw TypeError("hexToBytes: expected string, got "+typeof e);if(e.length%2)throw Error("hexToBytes: received invalid unpadded hex"+e.length);let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let i=2*r,n=e.slice(i,i+2),o=Number.parseInt(n,16);if(Number.isNaN(o)||o<0)throw Error("Invalid byte sequence");t[r]=o}return t}function O(e){return P(E(e))}function T(e){return e instanceof Uint8Array?Uint8Array.from(e):x(e)}function R(e){if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)return BigInt(e);if("bigint"==typeof e&&L(e))return e;throw TypeError("Expected valid private scalar: 0 < scalar < curve.n")}function B(e,t=d.P){let r=e%t;return r>=0?r:t+r}function C(e,t){let{P:r}=d,i=e;for(;t-- >o;)i*=i,i%=r;return i}function I(e,t=d.P){if(e===o||t<=o)throw Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=B(e,t),i=t,n=o,a=s,l=s,u=o;for(;r!==o;){let c=i/r,h=i%r,f=n-l*c,p=a-u*c;i=r,r=h,n=l,a=u,l=f,u=p}if(i!==s)throw Error("invert: does not exist");return B(n,t)}let M=(e,t)=>(e+t/a)/t,U=a**BigInt(128);function K(e){let{n:t}=d,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),i=-s*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=r,a=M(o*e,t),l=M(-i*e,t),u=B(e-a*r-l*n,t),c=B(-a*i-l*o,t),h=u>U,f=c>U;if(h&&(u=t-u),f&&(c=t-c),u>U||c>U)throw Error("splitScalarEndo: Endomorphism failed");return{k1neg:h,k1:u,k2neg:f,k2:c}}function D(e){let{n:t}=d,r=8*e.length-256,i=O(e);return r>0&&(i>>=BigInt(r)),i>=t&&(i-=t),i}class j{constructor(){this.v=new Uint8Array(32).fill(1),this.k=new Uint8Array(32).fill(0),this.counter=0}hmac(...e){return t.utils.hmacSha256(this.k,...e)}hmacSync(...e){if("function"!=typeof t.utils.hmacSha256Sync)throw Error("utils.hmacSha256Sync is undefined, you need to set it");let r=t.utils.hmacSha256Sync(this.k,...e);if(r instanceof Promise)throw Error("To use sync sign(), ensure utils.hmacSha256 is sync");return r}incr(){if(this.counter>=1e3)throw Error("Tried 1,000 k values for sign(), all were invalid");this.counter+=1}async reseed(e=new Uint8Array){this.k=await this.hmac(this.v,Uint8Array.from([0]),e),this.v=await this.hmac(this.v),0!==e.length&&(this.k=await this.hmac(this.v,Uint8Array.from([1]),e),this.v=await this.hmac(this.v))}reseedSync(e=new Uint8Array){this.k=this.hmacSync(this.v,Uint8Array.from([0]),e),this.v=this.hmacSync(this.v),0!==e.length&&(this.k=this.hmacSync(this.v,Uint8Array.from([1]),e),this.v=this.hmacSync(this.v))}async generate(){return this.incr(),this.v=await this.hmac(this.v),this.v}generateSync(){return this.incr(),this.v=this.hmacSync(this.v),this.v}}function L(e){return o<e&&e<d.n}function J(e){return o<e&&e<d.P}function F(e,t,r){let i=O(e);if(!L(i))return;let{n:n}=d,a=m.BASE.multiply(i),l=B(a.x,n);if(l===o)return;let u=B(I(i,n)*B(t+r*l,n),n);if(u===o)return;let c=new b(l,u);return{sig:c,recovery:(a.x===c.r?0:2)|Number(a.y&s)}}function q(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e&&Number.isSafeInteger(e)&&e>0)t=BigInt(e);else if("string"==typeof e){if(64!==e.length)throw Error("Expected 32 bytes of private key");t=P(e)}else{if(!_(e))throw TypeError("Expected valid private key");if(32!==e.length)throw Error("Expected 32 bytes of private key");t=O(e)}if(!L(t))throw Error("Expected private key: 0 < key < n");return t}function V(e){return e instanceof m?(e.assertValidity(),e):m.fromHex(e)}function z(e){if(e instanceof b)return e.assertValidity(),e;try{return b.fromDER(e)}catch(t){return b.fromCompact(e)}}function G(e){let t=_(e),r="string"==typeof e,i=(t||r)&&e.length;return t?33===i||65===i:r?66===i||130===i:e instanceof m}function H(e){return O(e.length>32?e.slice(0,32):e)}function W(e){let t=H(e),r=B(t,d.n);return Z(r<o?t:r)}function Z(e){if("bigint"!=typeof e)throw Error("Expected bigint");return x(k(e))}function $(e,r,i){if(null==e)throw Error(`sign: expected valid message hash, not "${e}"`);let n=T(e),o=q(r),s=[Z(o),W(n)];if(null!=i){!0===i&&(i=t.utils.randomBytes(32));let a=T(i);if(32!==a.length)throw Error("sign: Expected 32 bytes of extra data");s.push(a)}return{seed:w(...s),m:H(n),d:o}}function X(e,t){let{sig:r,recovery:i}=e,{canonical:n,der:o,recovered:s}=Object.assign({canonical:!0,der:!0},t);n&&r.hasHighS()&&(r=r.normalizeS(),i^=1);let a=o?r.toDERRawBytes():r.toCompactRawBytes();return s?[a,i]:a}t.getPublicKey=function(e,t=!1){return m.fromPrivateKey(e).toRawBytes(t)},t.recoverPublicKey=function(e,t,r){return m.fromSignature(e,t,r).toRawBytes()},t.getSharedSecret=function(e,t,r=!1){if(G(e))throw TypeError("getSharedSecret: first arg must be private key");if(!G(t))throw TypeError("getSharedSecret: second arg must be public key");let i=V(t);return i.assertValidity(),i.multiply(q(e)).toRawBytes(r)},t.sign=async function(e,t,r={}){let i;let{seed:n,m:o,d:s}=$(e,t,r.extraEntropy),a=new j;for(await a.reseed(n);!(i=F(await a.generate(),o,s));)await a.reseed();return X(i,r)},t.signSync=function(e,t,r={}){let i;let{seed:n,m:o,d:s}=$(e,t,r.extraEntropy),a=new j;for(a.reseedSync(n);!(i=F(a.generateSync(),o,s));)a.reseedSync();return X(i,r)};let Y={strict:!0};async function Q(e,...r){let i=new Uint8Array(e.split("").map(e=>e.charCodeAt(0))),n=await t.utils.sha256(i);return O(await t.utils.sha256(w(n,n,...r)))}async function ee(e,t,r){let i=N(e);return B(await Q("BIP0340/challenge",i,t.toRawX(),r),d.n)}function et(e){return B(e.y,a)===o}t.verify=function(e,t,r,i=Y){let n,s;try{n=z(e),t=T(t)}catch(a){return!1}let{r:l,s:u}=n;if(i.strict&&n.hasHighS())return!1;let c=D(t);if(c===o)return!1;try{s=p.fromAffine(V(r))}catch(h){return!1}let{n:f}=d,y=I(u,f),m=B(c*y,f),v=B(l*y,f),g=p.BASE.multiply(m),b=s.multiplyUnsafe(v);return B(g.add(b).toAffine().x,f)===l};class er{constructor(e,t){if(this.r=e,this.s=t,!J(e)||!L(t))throw Error("Invalid signature")}static fromHex(e){let t=T(e);if(64!==t.length)throw TypeError(`SchnorrSignature.fromHex: expected 64 bytes, not ${t.length}`);let r=O(t.slice(0,32)),i=O(t.slice(32,64));return new er(r,i)}toHex(){return k(this.r)+k(this.s)}toRawBytes(){return x(this.toHex())}}async function ei(e,t,r){let i=e instanceof er?e:er.fromHex(e),n=T(t),o=V(r),s=await ee(i.r,o,n),a=m.fromPrivateKey(i.s),l=o.multiply(s),u=a.subtract(l);return!(u.equals(m.BASE)||!et(u)||u.x!==i.r)}t.schnorr={Signature:er,getPublicKey:function(e){return m.fromPrivateKey(e).toRawX()},sign:async function(e,r,i=t.utils.randomBytes()){if(null==e)throw TypeError(`sign: Expected valid message, not "${e}"`);let{n:n}=d,s=T(e),a=q(r),l=T(i);if(32!==l.length)throw TypeError("sign: Expected 32 bytes of aux randomness");let u=m.fromPrivateKey(a),c=et(u)?a:n-a,h=c^await Q("BIP0340/aux",l),f=B(await Q("BIP0340/nonce",N(h),u.toRawX(),s),n);if(f===o)throw Error("sign: Creation of signature failed. k is zero");let p=m.fromPrivateKey(f),y=et(p)?f:n-f,v=await ee(p.x,u,s),g=new er(p.x,B(y+v*c,n));if(!await ei(g.toRawBytes(),s,u.toRawX()))throw Error("sign: Invalid signature produced");return g.toRawBytes()},verify:ei},m.BASE._setWindowSize(8);let en={node:n.default,web:"object"==typeof self&&"crypto"in self?self.crypto:void 0};t.utils={isValidPrivateKey(e){try{return q(e),!0}catch(t){return!1}},randomBytes:(e=32)=>{if(en.web)return en.web.getRandomValues(new Uint8Array(e));if(en.node){let{randomBytes:t}=en.node;return Uint8Array.from(t(e))}throw Error("The environment doesn't have randomBytes function")},randomPrivateKey:()=>{let e=8;for(;e--;){let r=t.utils.randomBytes(32),i=O(r);if(L(i)&&i!==s)return r}throw Error("Valid private key was not found in 8 iterations. PRNG is broken")},bytesToHex:E,mod:B,sha256:async e=>{if(en.web){let t=await en.web.subtle.digest("SHA-256",e.buffer);return new Uint8Array(t)}if(en.node){let{createHash:r}=en.node;return Uint8Array.from(r("sha256").update(e).digest())}throw Error("The environment doesn't have sha256 function")},hmacSha256:async(e,...t)=>{if(en.web){let r=await en.web.subtle.importKey("raw",e,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),i=w(...t),n=await en.web.subtle.sign("HMAC",r,i);return new Uint8Array(n)}if(en.node){let{createHmac:o}=en.node,s=o("sha256",e);return t.forEach(e=>s.update(e)),Uint8Array.from(s.digest())}throw Error("The environment doesn't have hmac-sha256 function")},sha256Sync:void 0,hmacSha256Sync:void 0,precompute(e=8,t=m.BASE){let r=t===m.BASE?t:new m(t.x,t.y);return r._setWindowSize(e),r.multiply(l),r}}},4537:e=>{"use strict";e.exports=function(e,t){for(var r=Array(arguments.length-1),i=0,n=2,o=!0;n<arguments.length;)r[i++]=arguments[n++];return new Promise(function(n,s){r[i]=function(e){if(o){if(o=!1,e)s(e);else{for(var t=Array(arguments.length-1),r=0;r<t.length;)t[r++]=arguments[r];n.apply(null,t)}}};try{e.apply(t||null,r)}catch(a){o&&(o=!1,s(a))}})}},7419:(e,t)=>{"use strict";var r=t;r.length=function(e){var t=e.length;if(!t)return 0;for(var r=0;--t%4>1&&"="===e.charAt(t);)++r;return Math.ceil(3*e.length)/4-r};for(var i=Array(64),n=Array(123),o=0;o<64;)n[i[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;r.encode=function(e,t,r){for(var n,o=null,s=[],a=0,l=0;t<r;){var u=e[t++];switch(l){case 0:s[a++]=i[u>>2],n=(3&u)<<4,l=1;break;case 1:s[a++]=i[n|u>>4],n=(15&u)<<2,l=2;break;case 2:s[a++]=i[n|u>>6],s[a++]=i[63&u],l=0}a>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,s)),a=0)}return l&&(s[a++]=i[n],s[a++]=61,1===l&&(s[a++]=61)),o?(a&&o.push(String.fromCharCode.apply(String,s.slice(0,a))),o.join("")):String.fromCharCode.apply(String,s.slice(0,a))};var s="invalid encoding";r.decode=function(e,t,r){for(var i,o=r,a=0,l=0;l<e.length;){var u=e.charCodeAt(l++);if(61===u&&a>1)break;if(void 0===(u=n[u]))throw Error(s);switch(a){case 0:i=u,a=1;break;case 1:t[r++]=i<<2|(48&u)>>4,i=u,a=2;break;case 2:t[r++]=(15&i)<<4|(60&u)>>2,i=u,a=3;break;case 3:t[r++]=(3&i)<<6|u,a=0}}if(1===a)throw Error(s);return r-o},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}},9211:e=>{"use strict";function t(){this._listeners={}}e.exports=t,t.prototype.on=function(e,t,r){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:r||this}),this},t.prototype.off=function(e,t){if(void 0===e)this._listeners={};else if(void 0===t)this._listeners[e]=[];else for(var r=this._listeners[e],i=0;i<r.length;)r[i].fn===t?r.splice(i,1):++i;return this},t.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var r=[],i=1;i<arguments.length;)r.push(arguments[i++]);for(i=0;i<t.length;)t[i].fn.apply(t[i++].ctx,r)}return this}},945:e=>{"use strict";function t(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),r=new Uint8Array(t.buffer),i=128===r[3];function n(e,i,n){t[0]=e,i[n]=r[0],i[n+1]=r[1],i[n+2]=r[2],i[n+3]=r[3]}function o(e,i,n){t[0]=e,i[n]=r[3],i[n+1]=r[2],i[n+2]=r[1],i[n+3]=r[0]}function s(e,i){return r[0]=e[i],r[1]=e[i+1],r[2]=e[i+2],r[3]=e[i+3],t[0]}function a(e,i){return r[3]=e[i],r[2]=e[i+1],r[1]=e[i+2],r[0]=e[i+3],t[0]}e.writeFloatLE=i?n:o,e.writeFloatBE=i?o:n,e.readFloatLE=i?s:a,e.readFloatBE=i?a:s}():function(){function t(e,t,r,i){var n=t<0?1:0;if(n&&(t=-t),0===t)e(1/t>0?0:2147483648,r,i);else if(isNaN(t))e(2143289344,r,i);else if(t>34028234663852886e22)e((n<<31|2139095040)>>>0,r,i);else if(t<11754943508222875e-54)e((n<<31|Math.round(t/1401298464324817e-60))>>>0,r,i);else{var o=Math.floor(Math.log(t)/Math.LN2);e((n<<31|o+127<<23|8388607&Math.round(t*Math.pow(2,-o)*8388608))>>>0,r,i)}}function s(e,t,r){var i=e(t,r),n=2*(i>>31)+1,o=i>>>23&255,s=8388607&i;return 255===o?s?NaN:n*(1/0):0===o?1401298464324817e-60*n*s:n*Math.pow(2,o-150)*(s+8388608)}e.writeFloatLE=t.bind(null,r),e.writeFloatBE=t.bind(null,i),e.readFloatLE=s.bind(null,n),e.readFloatBE=s.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),r=new Uint8Array(t.buffer),i=128===r[7];function n(e,i,n){t[0]=e,i[n]=r[0],i[n+1]=r[1],i[n+2]=r[2],i[n+3]=r[3],i[n+4]=r[4],i[n+5]=r[5],i[n+6]=r[6],i[n+7]=r[7]}function o(e,i,n){t[0]=e,i[n]=r[7],i[n+1]=r[6],i[n+2]=r[5],i[n+3]=r[4],i[n+4]=r[3],i[n+5]=r[2],i[n+6]=r[1],i[n+7]=r[0]}function s(e,i){return r[0]=e[i],r[1]=e[i+1],r[2]=e[i+2],r[3]=e[i+3],r[4]=e[i+4],r[5]=e[i+5],r[6]=e[i+6],r[7]=e[i+7],t[0]}function a(e,i){return r[7]=e[i],r[6]=e[i+1],r[5]=e[i+2],r[4]=e[i+3],r[3]=e[i+4],r[2]=e[i+5],r[1]=e[i+6],r[0]=e[i+7],t[0]}e.writeDoubleLE=i?n:o,e.writeDoubleBE=i?o:n,e.readDoubleLE=i?s:a,e.readDoubleBE=i?a:s}():function(){function t(e,t,r,i,n,o){var s,a=i<0?1:0;if(a&&(i=-i),0===i)e(0,n,o+t),e(1/i>0?0:2147483648,n,o+r);else if(isNaN(i))e(0,n,o+t),e(2146959360,n,o+r);else if(i>17976931348623157e292)e(0,n,o+t),e((a<<31|2146435072)>>>0,n,o+r);else if(i<22250738585072014e-324)e((s=i/5e-324)>>>0,n,o+t),e((a<<31|s/4294967296)>>>0,n,o+r);else{var l=Math.floor(Math.log(i)/Math.LN2);1024===l&&(l=1023),e(4503599627370496*(s=i*Math.pow(2,-l))>>>0,n,o+t),e((a<<31|l+1023<<20|1048576*s&1048575)>>>0,n,o+r)}}function s(e,t,r,i,n){var o=e(i,n+t),s=e(i,n+r),a=2*(s>>31)+1,l=s>>>20&2047,u=4294967296*(1048575&s)+o;return 2047===l?u?NaN:a*(1/0):0===l?5e-324*a*u:a*Math.pow(2,l-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,r,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=s.bind(null,n,0,4),e.readDoubleBE=s.bind(null,o,4,0)}(),e}function r(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}function i(e,t,r){t[r]=e>>>24,t[r+1]=e>>>16&255,t[r+2]=e>>>8&255,t[r+3]=255&e}function n(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}e.exports=t(t)},7199:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(e){}return null}module.exports=inquire},6662:e=>{"use strict";e.exports=function(e,t,r){var i=r||8192,n=i>>>1,o=null,s=i;return function(r){if(r<1||r>n)return e(r);s+r>i&&(o=e(i),s=0);var a=t.call(o,s,s+=r);return 7&s&&(s=1+(7|s)),a}}},4997:(e,t)=>{"use strict";var r=t;r.length=function(e){for(var t=0,r=0,i=0;i<e.length;++i)(r=e.charCodeAt(i))<128?t+=1:r<2048?t+=2:55296==(64512&r)&&56320==(64512&e.charCodeAt(i+1))?(++i,t+=4):t+=3;return t},r.read=function(e,t,r){if(r-t<1)return"";for(var i,n=null,o=[],s=0;t<r;)(i=e[t++])<128?o[s++]=i:i>191&&i<224?o[s++]=(31&i)<<6|63&e[t++]:i>239&&i<365?(i=((7&i)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,o[s++]=55296+(i>>10),o[s++]=56320+(1023&i)):o[s++]=(15&i)<<12|(63&e[t++])<<6|63&e[t++],s>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,o)),s=0);return n?(s&&n.push(String.fromCharCode.apply(String,o.slice(0,s))),n.join("")):String.fromCharCode.apply(String,o.slice(0,s))},r.write=function(e,t,r){for(var i,n,o=r,s=0;s<e.length;++s)(i=e.charCodeAt(s))<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=63&i|128):55296==(64512&i)&&56320==(64512&(n=e.charCodeAt(s+1)))?(i=65536+((1023&i)<<10)+(1023&n),++s,t[r++]=i>>18|240,t[r++]=i>>12&63|128,t[r++]=i>>6&63|128,t[r++]=63&i|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=63&i|128);return r-o}},3052:(__unused_webpack_module,__unused_webpack_exports,__nested_webpack_require_24259__)=>{(function(){"use strict";let sharedArrayBufferSupported_,v;let state_=Symbol("state_"),storedError_=Symbol("storedError_");function isInteger(e){if(!isFinite(e))return!1;let t=Math.abs(e);return Math.floor(t)===t}function isFiniteNonNegativeNumber(e){return!("number"!=typeof e||!isFinite(e))&&e>=0}function isAbortSignal(e){if("object"!=typeof e||null===e)return!1;try{return Object.getOwnPropertyDescriptor(AbortSignal.prototype,"aborted").get.call(e),!0}catch(t){return!1}}function invokeOrNoop(e,t,r){let i=e[t];if(void 0!==i)return Function.prototype.apply.call(i,e,r)}function cloneArrayBuffer(e,t,r,i){return e.slice(t,t+r)}function transferArrayBuffer(e){return e.slice(0)}function copyDataBlockBytes(e,t,r,i,n){new Uint8Array(e,t,n).set(new Uint8Array(r,i,n))}let objectCloneMemo=new WeakMap;function supportsSharedArrayBuffer(){if(void 0===sharedArrayBufferSupported_)try{new SharedArrayBuffer(16),sharedArrayBufferSupported_=!0}catch(e){sharedArrayBufferSupported_=!1}return sharedArrayBufferSupported_}function cloneValue(e){switch(typeof e){case"number":case"string":case"boolean":case"undefined":case"bigint":return e;case"object":{if(objectCloneMemo.has(e))return objectCloneMemo.get(e);if(null===e)return e;if(e instanceof Date)return new Date(e.valueOf());if(e instanceof RegExp)return RegExp(e);if(supportsSharedArrayBuffer()&&e instanceof SharedArrayBuffer)return e;if(e instanceof ArrayBuffer){let t=cloneArrayBuffer(e,0,e.byteLength);return objectCloneMemo.set(e,t),t}if(ArrayBuffer.isView(e)){let r;let i=cloneValue(e.buffer);return r=e instanceof DataView?e.byteLength:e.length,new e.constructor(i,e.byteOffset,r)}if(e instanceof Map){let n=new Map;return objectCloneMemo.set(e,n),e.forEach((e,t)=>n.set(t,cloneValue(e))),n}if(e instanceof Set){let o=new Map;return objectCloneMemo.set(e,o),e.forEach((e,t)=>o.set(t,cloneValue(e))),o}let s={};objectCloneMemo.set(e,s);let a=Object.getOwnPropertyNames(e);for(let l of a)s[l]=cloneValue(e[l]);return s}default:throw new DOMException("Uncloneable value in stream","DataCloneError")}}function promiseCall(e,t,r){try{let i=Function.prototype.apply.call(e,t,r);return Promise.resolve(i)}catch(n){return Promise.reject(n)}}function createAlgorithmFromUnderlyingMethod(e,t,r){let i=e[t];if(void 0===i)return()=>Promise.resolve(void 0);if("function"!=typeof i)throw TypeError(`Field "${t}" is not a function.`);return function(...t){return promiseCall(i,e,t.concat(r))}}function validateAndNormalizeHighWaterMark(e){let t=Number(e);if(isNaN(t)||t<0)throw RangeError("highWaterMark must be a valid, non-negative integer.");return t}function makeSizeAlgorithmFromSizeFunction(e){if("function"!=typeof e&&void 0!==e)throw TypeError("size function must be undefined or a function");return function(t){return"function"==typeof e?e(t):1}}function createControlledPromise(){let e={state:0};return e.promise=new Promise(function(t,r){e.resolve=function(r){e.state=1,t(r)},e.reject=function(t){e.state=2,r(t)}}),e}let CHUNK_SIZE=16384;class QueueImpl{constructor(){this.chunks_=[[]],this.readChunk_=this.writeChunk_=this.chunks_[0],this.length_=0}push(e){this.writeChunk_.push(e),this.length_+=1,this.writeChunk_.length===CHUNK_SIZE&&(this.writeChunk_=[],this.chunks_.push(this.writeChunk_))}front(){if(0!==this.length_)return this.readChunk_[0]}shift(){if(0===this.length_)return;let e=this.readChunk_.shift();return this.length_-=1,0===this.readChunk_.length&&this.readChunk_!==this.writeChunk_&&(this.chunks_.shift(),this.readChunk_=this.chunks_[0]),e}get length(){return this.length_}}let queue_=Symbol("queue_"),queueTotalSize_=Symbol("queueTotalSize_");function dequeueValue(e){let t=e[queue_].shift(),r=e[queueTotalSize_]-t.size;return e[queueTotalSize_]=Math.max(0,r),t.value}function enqueueValueWithSize(e,t,r){if(!isFiniteNonNegativeNumber(r))throw RangeError("Chunk size must be a non-negative, finite numbers");e[queue_].push({value:t,size:r}),e[queueTotalSize_]+=r}function peekQueueValue(e){return e[queue_].front().value}function resetQueue(e){e[queue_]=new QueueImpl,e[queueTotalSize_]=0}let controlledReadableStream_=Symbol("controlledReadableStream_"),pullAlgorithm_=Symbol("pullAlgorithm_"),cancelAlgorithm_=Symbol("cancelAlgorithm_"),strategySizeAlgorithm_=Symbol("strategySizeAlgorithm_"),strategyHWM_=Symbol("strategyHWM_"),started_=Symbol("started_"),closeRequested_=Symbol("closeRequested_"),pullAgain_=Symbol("pullAgain_"),pulling_=Symbol("pulling_"),cancelSteps_=Symbol("cancelSteps_"),pullSteps_=Symbol("pullSteps_"),autoAllocateChunkSize_=Symbol("autoAllocateChunkSize_"),byobRequest_=Symbol("byobRequest_"),controlledReadableByteStream_=Symbol("controlledReadableByteStream_"),pendingPullIntos_=Symbol("pendingPullIntos_"),closedPromise_=Symbol("closedPromise_"),ownerReadableStream_=Symbol("ownerReadableStream_"),readRequests_=Symbol("readRequests_"),readIntoRequests_=Symbol("readIntoRequests_"),associatedReadableByteStreamController_=Symbol("associatedReadableByteStreamController_"),view_=Symbol("view_"),reader_=Symbol("reader_"),readableStreamController_=Symbol("readableStreamController_");function initializeReadableStream(e){e[state_]="readable",e[reader_]=void 0,e[storedError_]=void 0,e[readableStreamController_]=void 0}function isReadableStream(e){return"object"==typeof e&&null!==e&&readableStreamController_ in e}function isReadableStreamLocked(e){return void 0!==e[reader_]}function readableStreamGetNumReadIntoRequests(e){let t=e[reader_];return void 0===t?0:t[readIntoRequests_].length}function readableStreamGetNumReadRequests(e){let t=e[reader_];return void 0===t?0:t[readRequests_].length}function readableStreamCreateReadResult(e,t,r){let i=r?Object.prototype:null,n=Object.create(i);return n.value=e,n.done=t,n}function readableStreamAddReadIntoRequest(e,t){let r=e[reader_],i=createControlledPromise();return i.forAuthorCode=t,r[readIntoRequests_].push(i),i.promise}function readableStreamAddReadRequest(e,t){let r=e[reader_],i=createControlledPromise();return i.forAuthorCode=t,r[readRequests_].push(i),i.promise}function readableStreamHasBYOBReader(e){return isReadableStreamBYOBReader(e[reader_])}function readableStreamHasDefaultReader(e){return isReadableStreamDefaultReader(e[reader_])}function readableStreamCancel(e,t){return"closed"===e[state_]?Promise.resolve(void 0):"errored"===e[state_]?Promise.reject(e[storedError_]):(readableStreamClose(e),e[readableStreamController_][cancelSteps_](t).then(e=>{}))}function readableStreamClose(e){e[state_]="closed";let t=e[reader_];if(void 0!==t&&(t[closedPromise_].resolve(),t[closedPromise_].promise.catch(()=>{}),isReadableStreamDefaultReader(t))){for(let r of t[readRequests_])r.resolve(readableStreamCreateReadResult(void 0,!0,r.forAuthorCode));t[readRequests_]=[]}}function readableStreamError(e,t){if("readable"!==e[state_])throw RangeError("Stream is in an invalid state");e[state_]="errored",e[storedError_]=t;let r=e[reader_];if(void 0!==r){if(r[closedPromise_].reject(t),isReadableStreamDefaultReader(r)){for(let i of r[readRequests_])i.reject(t);r[readRequests_]=[]}else{let n=r[readIntoRequests_];for(let o of n)o.reject(t);r[readIntoRequests_]=[]}}}function isReadableStreamDefaultReader(e){return"object"==typeof e&&null!==e&&readRequests_ in e}function isReadableStreamBYOBReader(e){return"object"==typeof e&&null!==e&&readIntoRequests_ in e}function readableStreamReaderGenericInitialize(e,t){e[ownerReadableStream_]=t,t[reader_]=e;let r=t[state_];e[closedPromise_]=createControlledPromise(),"readable"===r||("closed"===r?e[closedPromise_].resolve(void 0):(e[closedPromise_].reject(t[storedError_]),e[closedPromise_].promise.catch(()=>{})))}function readableStreamReaderGenericRelease(e){let t=e[ownerReadableStream_];if(void 0===t)throw TypeError("Reader is in an inconsistent state");"readable"===t[state_]||(e[closedPromise_]=createControlledPromise()),e[closedPromise_].reject(TypeError()),e[closedPromise_].promise.catch(()=>{}),t[reader_]=void 0,e[ownerReadableStream_]=void 0}function readableStreamBYOBReaderRead(e,t,r=!1){let i=e[ownerReadableStream_];return"errored"===i[state_]?Promise.reject(i[storedError_]):readableByteStreamControllerPullInto(i[readableStreamController_],t,r)}function readableStreamDefaultReaderRead(e,t=!1){let r=e[ownerReadableStream_];return"closed"===r[state_]?Promise.resolve(readableStreamCreateReadResult(void 0,!0,t)):"errored"===r[state_]?Promise.reject(r[storedError_]):r[readableStreamController_][pullSteps_](t)}function readableStreamFulfillReadIntoRequest(e,t,r){let i=e[reader_][readIntoRequests_].shift();i.resolve(readableStreamCreateReadResult(t,r,i.forAuthorCode))}function readableStreamFulfillReadRequest(e,t,r){let i=e[reader_][readRequests_].shift();i.resolve(readableStreamCreateReadResult(t,r,i.forAuthorCode))}function setUpReadableStreamDefaultController(e,t,r,i,n,o,s){t[controlledReadableStream_]=e,resetQueue(t),t[started_]=!1,t[closeRequested_]=!1,t[pullAgain_]=!1,t[pulling_]=!1,t[strategySizeAlgorithm_]=s,t[strategyHWM_]=o,t[pullAlgorithm_]=i,t[cancelAlgorithm_]=n,e[readableStreamController_]=t;let a=r();Promise.resolve(a).then(e=>{t[started_]=!0,readableStreamDefaultControllerCallPullIfNeeded(t)},e=>{readableStreamDefaultControllerError(t,e)})}function isReadableStreamDefaultController(e){return"object"==typeof e&&null!==e&&controlledReadableStream_ in e}function readableStreamDefaultControllerHasBackpressure(e){return!readableStreamDefaultControllerShouldCallPull(e)}function readableStreamDefaultControllerCanCloseOrEnqueue(e){let t=e[controlledReadableStream_][state_];return!1===e[closeRequested_]&&"readable"===t}function readableStreamDefaultControllerGetDesiredSize(e){let t=e[controlledReadableStream_][state_];return"errored"===t?null:"closed"===t?0:e[strategyHWM_]-e[queueTotalSize_]}function readableStreamDefaultControllerClose(e){e[closeRequested_]=!0;let t=e[controlledReadableStream_];0===e[queue_].length&&(readableStreamDefaultControllerClearAlgorithms(e),readableStreamClose(t))}function readableStreamDefaultControllerEnqueue(e,t){let r=e[controlledReadableStream_];if(isReadableStreamLocked(r)&&readableStreamGetNumReadRequests(r)>0)readableStreamFulfillReadRequest(r,t,!1);else{let i;try{i=e[strategySizeAlgorithm_](t)}catch(n){throw readableStreamDefaultControllerError(e,n),n}try{enqueueValueWithSize(e,t,i)}catch(o){throw readableStreamDefaultControllerError(e,o),o}}readableStreamDefaultControllerCallPullIfNeeded(e)}function readableStreamDefaultControllerError(e,t){let r=e[controlledReadableStream_];"readable"===r[state_]&&(resetQueue(e),readableStreamDefaultControllerClearAlgorithms(e),readableStreamError(r,t))}function readableStreamDefaultControllerCallPullIfNeeded(e){if(readableStreamDefaultControllerShouldCallPull(e)){if(e[pulling_])e[pullAgain_]=!0;else{if(e[pullAgain_])throw RangeError("Stream controller is in an invalid state.");e[pulling_]=!0,e[pullAlgorithm_](e).then(t=>{e[pulling_]=!1,e[pullAgain_]&&(e[pullAgain_]=!1,readableStreamDefaultControllerCallPullIfNeeded(e))},t=>{readableStreamDefaultControllerError(e,t)})}}}function readableStreamDefaultControllerShouldCallPull(e){let t=e[controlledReadableStream_];if(!readableStreamDefaultControllerCanCloseOrEnqueue(e)||!1===e[started_])return!1;if(isReadableStreamLocked(t)&&readableStreamGetNumReadRequests(t)>0)return!0;let r=readableStreamDefaultControllerGetDesiredSize(e);if(null===r)throw RangeError("Stream is in an invalid state.");return r>0}function readableStreamDefaultControllerClearAlgorithms(e){e[pullAlgorithm_]=void 0,e[cancelAlgorithm_]=void 0,e[strategySizeAlgorithm_]=void 0}function setUpReadableByteStreamController(e,t,r,i,n,o,s){if(void 0!==e[readableStreamController_])throw TypeError("Cannot reuse streams");if(void 0!==s&&(!isInteger(s)||s<=0))throw RangeError("autoAllocateChunkSize must be a positive, finite integer");t[controlledReadableByteStream_]=e,t[pullAgain_]=!1,t[pulling_]=!1,readableByteStreamControllerClearPendingPullIntos(t),resetQueue(t),t[closeRequested_]=!1,t[started_]=!1,t[strategyHWM_]=validateAndNormalizeHighWaterMark(o),t[pullAlgorithm_]=i,t[cancelAlgorithm_]=n,t[autoAllocateChunkSize_]=s,t[pendingPullIntos_]=[],e[readableStreamController_]=t;let a=r();Promise.resolve(a).then(e=>{t[started_]=!0,readableByteStreamControllerCallPullIfNeeded(t)},e=>{readableByteStreamControllerError(t,e)})}function isReadableStreamBYOBRequest(e){return"object"==typeof e&&null!==e&&associatedReadableByteStreamController_ in e}function isReadableByteStreamController(e){return"object"==typeof e&&null!==e&&controlledReadableByteStream_ in e}function readableByteStreamControllerCallPullIfNeeded(e){readableByteStreamControllerShouldCallPull(e)&&(e[pulling_]?e[pullAgain_]=!0:(e[pulling_]=!0,e[pullAlgorithm_](e).then(t=>{e[pulling_]=!1,e[pullAgain_]&&(e[pullAgain_]=!1,readableByteStreamControllerCallPullIfNeeded(e))},t=>{readableByteStreamControllerError(e,t)})))}function readableByteStreamControllerClearAlgorithms(e){e[pullAlgorithm_]=void 0,e[cancelAlgorithm_]=void 0}function readableByteStreamControllerClearPendingPullIntos(e){readableByteStreamControllerInvalidateBYOBRequest(e),e[pendingPullIntos_]=[]}function readableByteStreamControllerClose(e){let t=e[controlledReadableByteStream_];if(e[queueTotalSize_]>0)e[closeRequested_]=!0;else{if(e[pendingPullIntos_].length>0&&e[pendingPullIntos_][0].bytesFilled>0){let r=TypeError();throw readableByteStreamControllerError(e,r),r}readableByteStreamControllerClearAlgorithms(e),readableStreamClose(t)}}function readableByteStreamControllerCommitPullIntoDescriptor(e,t){let r=!1;"closed"===e[state_]&&(r=!0);let i=readableByteStreamControllerConvertPullIntoDescriptor(t);"default"===t.readerType?readableStreamFulfillReadRequest(e,i,r):readableStreamFulfillReadIntoRequest(e,i,r)}function readableByteStreamControllerConvertPullIntoDescriptor(e){let{bytesFilled:t,elementSize:r}=e;return new e.ctor(e.buffer,e.byteOffset,t/r)}function readableByteStreamControllerEnqueue(e,t){let r=e[controlledReadableByteStream_],{buffer:i,byteOffset:n,byteLength:o}=t,s=transferArrayBuffer(i);readableStreamHasDefaultReader(r)?0===readableStreamGetNumReadRequests(r)?readableByteStreamControllerEnqueueChunkToQueue(e,s,n,o):readableStreamFulfillReadRequest(r,new Uint8Array(s,n,o),!1):readableStreamHasBYOBReader(r)?(readableByteStreamControllerEnqueueChunkToQueue(e,s,n,o),readableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(e)):readableByteStreamControllerEnqueueChunkToQueue(e,s,n,o),readableByteStreamControllerCallPullIfNeeded(e)}function readableByteStreamControllerEnqueueChunkToQueue(e,t,r,i){e[queue_].push({buffer:t,byteOffset:r,byteLength:i}),e[queueTotalSize_]+=i}function readableByteStreamControllerError(e,t){let r=e[controlledReadableByteStream_];"readable"===r[state_]&&(readableByteStreamControllerClearPendingPullIntos(e),resetQueue(e),readableByteStreamControllerClearAlgorithms(e),readableStreamError(r,t))}function readableByteStreamControllerFillHeadPullIntoDescriptor(e,t,r){readableByteStreamControllerInvalidateBYOBRequest(e),r.bytesFilled+=t}function readableByteStreamControllerFillPullIntoDescriptorFromQueue(e,t){let r=t.elementSize,i=t.bytesFilled-t.bytesFilled%r,n=Math.min(e[queueTotalSize_],t.byteLength-t.bytesFilled),o=t.bytesFilled+n,s=o-o%r,a=n,l=!1;s>i&&(a=s-t.bytesFilled,l=!0);let u=e[queue_];for(;a>0;){let c=u.front(),d=Math.min(a,c.byteLength),h=t.byteOffset+t.bytesFilled;copyDataBlockBytes(t.buffer,h,c.buffer,c.byteOffset,d),c.byteLength===d?u.shift():(c.byteOffset+=d,c.byteLength-=d),e[queueTotalSize_]-=d,readableByteStreamControllerFillHeadPullIntoDescriptor(e,d,t),a-=d}return l}function readableByteStreamControllerGetDesiredSize(e){let t=e[controlledReadableByteStream_][state_];return"errored"===t?null:"closed"===t?0:e[strategyHWM_]-e[queueTotalSize_]}function readableByteStreamControllerHandleQueueDrain(e){0===e[queueTotalSize_]&&e[closeRequested_]?(readableByteStreamControllerClearAlgorithms(e),readableStreamClose(e[controlledReadableByteStream_])):readableByteStreamControllerCallPullIfNeeded(e)}function readableByteStreamControllerInvalidateBYOBRequest(e){let t=e[byobRequest_];void 0!==t&&(t[associatedReadableByteStreamController_]=void 0,t[view_]=void 0,e[byobRequest_]=void 0)}function readableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(e){let t=e[pendingPullIntos_];for(;t.length>0;){if(0===e[queueTotalSize_])return;let r=t[0];readableByteStreamControllerFillPullIntoDescriptorFromQueue(e,r)&&(readableByteStreamControllerShiftPendingPullInto(e),readableByteStreamControllerCommitPullIntoDescriptor(e[controlledReadableByteStream_],r))}}function readableByteStreamControllerPullInto(e,t,r){let i=e[controlledReadableByteStream_],n=t.BYTES_PER_ELEMENT||1,o=t.constructor,s=t.byteOffset,a=t.byteLength,l={buffer:transferArrayBuffer(t.buffer),byteOffset:s,byteLength:a,bytesFilled:0,elementSize:n,ctor:o,readerType:"byob"};if(e[pendingPullIntos_].length>0)return e[pendingPullIntos_].push(l),readableStreamAddReadIntoRequest(i,r);if("closed"===i[state_]){let u=new o(l.buffer,l.byteOffset,0);return Promise.resolve(readableStreamCreateReadResult(u,!0,r))}if(e[queueTotalSize_]>0){if(readableByteStreamControllerFillPullIntoDescriptorFromQueue(e,l)){let c=readableByteStreamControllerConvertPullIntoDescriptor(l);return readableByteStreamControllerHandleQueueDrain(e),Promise.resolve(readableStreamCreateReadResult(c,!1,r))}if(e[closeRequested_]){let d=TypeError();return readableByteStreamControllerError(e,d),Promise.reject(d)}}e[pendingPullIntos_].push(l);let h=readableStreamAddReadIntoRequest(i,r);return readableByteStreamControllerCallPullIfNeeded(e),h}function readableByteStreamControllerRespond(e,t){if(!isFiniteNonNegativeNumber(t=Number(t)))throw RangeError("bytesWritten must be a finite, non-negative number");readableByteStreamControllerRespondInternal(e,t)}function readableByteStreamControllerRespondInClosedState(e,t){t.buffer=transferArrayBuffer(t.buffer);let r=e[controlledReadableByteStream_];if(readableStreamHasBYOBReader(r))for(;readableStreamGetNumReadIntoRequests(r)>0;)readableByteStreamControllerCommitPullIntoDescriptor(r,readableByteStreamControllerShiftPendingPullInto(e))}function readableByteStreamControllerRespondInReadableState(e,t,r){if(r.bytesFilled+t>r.byteLength)throw RangeError();if(readableByteStreamControllerFillHeadPullIntoDescriptor(e,t,r),r.bytesFilled<r.elementSize)return;readableByteStreamControllerShiftPendingPullInto(e);let i=r.bytesFilled%r.elementSize;if(i>0){let n=r.byteOffset+r.bytesFilled,o=cloneArrayBuffer(r.buffer,n-i,i);readableByteStreamControllerEnqueueChunkToQueue(e,o,0,o.byteLength)}r.buffer=transferArrayBuffer(r.buffer),r.bytesFilled=r.bytesFilled-i,readableByteStreamControllerCommitPullIntoDescriptor(e[controlledReadableByteStream_],r),readableByteStreamControllerProcessPullIntoDescriptorsUsingQueue(e)}function readableByteStreamControllerRespondInternal(e,t){let r=e[pendingPullIntos_][0];if("closed"===e[controlledReadableByteStream_][state_]){if(0!==t)throw TypeError();readableByteStreamControllerRespondInClosedState(e,r)}else readableByteStreamControllerRespondInReadableState(e,t,r);readableByteStreamControllerCallPullIfNeeded(e)}function readableByteStreamControllerRespondWithNewView(e,t){let r=e[pendingPullIntos_][0];if(r.byteOffset+r.bytesFilled!==t.byteOffset||r.byteLength!==t.byteLength)throw RangeError();r.buffer=t.buffer,readableByteStreamControllerRespondInternal(e,t.byteLength)}function readableByteStreamControllerShiftPendingPullInto(e){let t=e[pendingPullIntos_].shift();return readableByteStreamControllerInvalidateBYOBRequest(e),t}function readableByteStreamControllerShouldCallPull(e){let t=e[controlledReadableByteStream_];return"readable"===t[state_]&&!e[closeRequested_]&&!!e[started_]&&(!!(readableStreamHasDefaultReader(t)&&readableStreamGetNumReadRequests(t)>0)||!!(readableStreamHasBYOBReader(t)&&readableStreamGetNumReadIntoRequests(t)>0)||readableByteStreamControllerGetDesiredSize(e)>0)}function setUpReadableStreamBYOBRequest(e,t,r){if(!isReadableByteStreamController(t)||!ArrayBuffer.isView(r))throw TypeError();e[associatedReadableByteStreamController_]=t,e[view_]=r}let backpressure_=Symbol("backpressure_"),closeRequest_=Symbol("closeRequest_"),inFlightWriteRequest_=Symbol("inFlightWriteRequest_"),inFlightCloseRequest_=Symbol("inFlightCloseRequest_"),pendingAbortRequest_=Symbol("pendingAbortRequest_"),writableStreamController_=Symbol("writableStreamController_"),writer_=Symbol("writer_"),writeRequests_=Symbol("writeRequests_"),abortAlgorithm_=Symbol("abortAlgorithm_"),closeAlgorithm_=Symbol("closeAlgorithm_"),controlledWritableStream_=Symbol("controlledWritableStream_"),started_$1=Symbol("started_"),strategyHWM_$1=Symbol("strategyHWM_"),strategySizeAlgorithm_$1=Symbol("strategySizeAlgorithm_"),writeAlgorithm_=Symbol("writeAlgorithm_"),ownerWritableStream_=Symbol("ownerWritableStream_"),closedPromise_$1=Symbol("closedPromise_"),readyPromise_=Symbol("readyPromise_"),errorSteps_=Symbol("errorSteps_"),abortSteps_=Symbol("abortSteps_");function initializeWritableStream(e){e[state_]="writable",e[storedError_]=void 0,e[writer_]=void 0,e[writableStreamController_]=void 0,e[inFlightWriteRequest_]=void 0,e[closeRequest_]=void 0,e[inFlightCloseRequest_]=void 0,e[pendingAbortRequest_]=void 0,e[writeRequests_]=[],e[backpressure_]=!1}function isWritableStream(e){return"object"==typeof e&&null!==e&&writableStreamController_ in e}function isWritableStreamLocked(e){return void 0!==e[writer_]}function writableStreamAbort(e,t){let r=e[state_];if("closed"===r||"errored"===r)return Promise.resolve(void 0);let i=e[pendingAbortRequest_];if(void 0!==i)return i.promise;let n=!1;"erroring"===r&&(n=!0,t=void 0),i={reason:t,wasAlreadyErroring:n};let o=new Promise((e,t)=>{i.resolve=e,i.reject=t});return i.promise=o,e[pendingAbortRequest_]=i,n||writableStreamStartErroring(e,t),o}function writableStreamAddWriteRequest(e){let t=createControlledPromise();return e[writeRequests_].push(t),t.promise}function writableStreamDealWithRejection(e,t){"writable"!==e[state_]?writableStreamFinishErroring(e):writableStreamStartErroring(e,t)}function writableStreamStartErroring(e,t){let r=e[writableStreamController_];e[state_]="erroring",e[storedError_]=t;let i=e[writer_];void 0!==i&&writableStreamDefaultWriterEnsureReadyPromiseRejected(i,t),!writableStreamHasOperationMarkedInFlight(e)&&r[started_$1]&&writableStreamFinishErroring(e)}function writableStreamFinishErroring(e){e[state_]="errored";let t=e[writableStreamController_];t[errorSteps_]();let r=e[storedError_];for(let i of e[writeRequests_])i.reject(r);e[writeRequests_]=[];let n=e[pendingAbortRequest_];if(void 0!==n)return e[pendingAbortRequest_]=void 0,n.wasAlreadyErroring?(n.reject(r),void writableStreamRejectCloseAndClosedPromiseIfNeeded(e)):void t[abortSteps_](n.reason).then(t=>{n.resolve(),writableStreamRejectCloseAndClosedPromiseIfNeeded(e)},t=>{n.reject(t),writableStreamRejectCloseAndClosedPromiseIfNeeded(e)});writableStreamRejectCloseAndClosedPromiseIfNeeded(e)}function writableStreamFinishInFlightWrite(e){e[inFlightWriteRequest_].resolve(void 0),e[inFlightWriteRequest_]=void 0}function writableStreamFinishInFlightWriteWithError(e,t){e[inFlightWriteRequest_].reject(t),e[inFlightWriteRequest_]=void 0,writableStreamDealWithRejection(e,t)}function writableStreamFinishInFlightClose(e){e[inFlightCloseRequest_].resolve(void 0),e[inFlightCloseRequest_]=void 0,"erroring"===e[state_]&&(e[storedError_]=void 0,void 0!==e[pendingAbortRequest_]&&(e[pendingAbortRequest_].resolve(),e[pendingAbortRequest_]=void 0)),e[state_]="closed";let t=e[writer_];void 0!==t&&t[closedPromise_$1].resolve(void 0)}function writableStreamFinishInFlightCloseWithError(e,t){e[inFlightCloseRequest_].reject(t),e[inFlightCloseRequest_]=void 0,void 0!==e[pendingAbortRequest_]&&(e[pendingAbortRequest_].reject(t),e[pendingAbortRequest_]=void 0),writableStreamDealWithRejection(e,t)}function writableStreamCloseQueuedOrInFlight(e){return void 0!==e[closeRequest_]||void 0!==e[inFlightCloseRequest_]}function writableStreamHasOperationMarkedInFlight(e){return void 0!==e[inFlightWriteRequest_]||void 0!==e[inFlightCloseRequest_]}function writableStreamMarkCloseRequestInFlight(e){e[inFlightCloseRequest_]=e[closeRequest_],e[closeRequest_]=void 0}function writableStreamMarkFirstWriteRequestInFlight(e){let t=e[writeRequests_].shift();e[inFlightWriteRequest_]=t}function writableStreamRejectCloseAndClosedPromiseIfNeeded(e){let t=e[closeRequest_];void 0!==t&&(t.reject(e[storedError_]),e[closeRequest_]=void 0);let r=e[writer_];void 0!==r&&(r[closedPromise_$1].reject(e[storedError_]),r[closedPromise_$1].promise.catch(()=>{}))}function writableStreamUpdateBackpressure(e,t){let r=e[writer_];void 0!==r&&t!==e[backpressure_]&&(t?r[readyPromise_]=createControlledPromise():r[readyPromise_].resolve(void 0)),e[backpressure_]=t}function isWritableStreamDefaultWriter(e){return"object"==typeof e&&null!==e&&ownerWritableStream_ in e}function writableStreamDefaultWriterAbort(e,t){return writableStreamAbort(e[ownerWritableStream_],t)}function writableStreamDefaultWriterClose(e){let t=e[ownerWritableStream_],r=t[state_];if("closed"===r||"errored"===r)return Promise.reject(TypeError("Writer stream is already closed or errored"));let i=createControlledPromise();return t[closeRequest_]=i,t[backpressure_]&&"writable"===r&&e[readyPromise_].resolve(void 0),writableStreamDefaultControllerClose(t[writableStreamController_]),i.promise}function writableStreamDefaultWriterCloseWithErrorPropagation(e){let t=e[ownerWritableStream_],r=t[state_];return writableStreamCloseQueuedOrInFlight(t)||"closed"===r?Promise.resolve(void 0):"errored"===r?Promise.reject(t[storedError_]):writableStreamDefaultWriterClose(e)}function writableStreamDefaultWriterEnsureClosedPromiseRejected(e,t){let r=e[closedPromise_$1];0===r.state?r.reject(t):(e[closedPromise_$1]=createControlledPromise(),e[closedPromise_$1].reject(t)),e[closedPromise_$1].promise.catch(()=>{})}function writableStreamDefaultWriterEnsureReadyPromiseRejected(e,t){let r=e[readyPromise_];0===r.state?r.reject(t):(e[readyPromise_]=createControlledPromise(),e[readyPromise_].reject(t)),e[readyPromise_].promise.catch(()=>{})}function writableStreamDefaultWriterGetDesiredSize(e){let t=e[ownerWritableStream_],r=t[state_];return"errored"===r||"erroring"===r?null:"closed"===r?0:writableStreamDefaultControllerGetDesiredSize(t[writableStreamController_])}function writableStreamDefaultWriterRelease(e){let t=e[ownerWritableStream_],r=TypeError();writableStreamDefaultWriterEnsureReadyPromiseRejected(e,r),writableStreamDefaultWriterEnsureClosedPromiseRejected(e,r),t[writer_]=void 0,e[ownerWritableStream_]=void 0}function writableStreamDefaultWriterWrite(e,t){let r=e[ownerWritableStream_],i=r[writableStreamController_],n=writableStreamDefaultControllerGetChunkSize(i,t);if(e[ownerWritableStream_]!==r)return Promise.reject(TypeError());let o=r[state_];if("errored"===o)return Promise.reject(r[storedError_]);if(writableStreamCloseQueuedOrInFlight(r)||"closed"===o)return Promise.reject(TypeError("Cannot write to a closing or closed stream"));if("erroring"===o)return Promise.reject(r[storedError_]);let s=writableStreamAddWriteRequest(r);return writableStreamDefaultControllerWrite(i,t,n),s}function setUpWritableStreamDefaultController(e,t,r,i,n,o,s,a){if(!isWritableStream(e)||void 0!==e[writableStreamController_])throw TypeError();t[controlledWritableStream_]=e,e[writableStreamController_]=t,resetQueue(t),t[started_$1]=!1,t[strategySizeAlgorithm_$1]=a,t[strategyHWM_$1]=s,t[writeAlgorithm_]=i,t[closeAlgorithm_]=n,t[abortAlgorithm_]=o;let l=writableStreamDefaultControllerGetBackpressure(t);writableStreamUpdateBackpressure(e,l);let u=r();Promise.resolve(u).then(e=>{t[started_$1]=!0,writableStreamDefaultControllerAdvanceQueueIfNeeded(t)},r=>{t[started_$1]=!0,writableStreamDealWithRejection(e,r)})}function isWritableStreamDefaultController(e){return"object"==typeof e&&null!==e&&controlledWritableStream_ in e}function writableStreamDefaultControllerClearAlgorithms(e){e[writeAlgorithm_]=void 0,e[closeAlgorithm_]=void 0,e[abortAlgorithm_]=void 0,e[strategySizeAlgorithm_$1]=void 0}function writableStreamDefaultControllerClose(e){enqueueValueWithSize(e,"close",0),writableStreamDefaultControllerAdvanceQueueIfNeeded(e)}function writableStreamDefaultControllerGetChunkSize(e,t){let r;try{r=e[strategySizeAlgorithm_$1](t)}catch(i){writableStreamDefaultControllerErrorIfNeeded(e,i),r=1}return r}function writableStreamDefaultControllerGetDesiredSize(e){return e[strategyHWM_$1]-e[queueTotalSize_]}function writableStreamDefaultControllerWrite(e,t,r){try{enqueueValueWithSize(e,{chunk:t},r)}catch(i){return void writableStreamDefaultControllerErrorIfNeeded(e,i)}let n=e[controlledWritableStream_];writableStreamCloseQueuedOrInFlight(n)||"writable"!==n[state_]||writableStreamUpdateBackpressure(n,writableStreamDefaultControllerGetBackpressure(e)),writableStreamDefaultControllerAdvanceQueueIfNeeded(e)}function writableStreamDefaultControllerAdvanceQueueIfNeeded(e){if(!e[started_$1])return;let t=e[controlledWritableStream_];if(void 0!==t[inFlightWriteRequest_])return;let r=t[state_];if("closed"===r||"errored"===r)return;if("erroring"===r)return void writableStreamFinishErroring(t);if(0===e[queue_].length)return;let i=peekQueueValue(e);"close"===i?writableStreamDefaultControllerProcessClose(e):writableStreamDefaultControllerProcessWrite(e,i.chunk)}function writableStreamDefaultControllerErrorIfNeeded(e,t){"writable"===e[controlledWritableStream_][state_]&&writableStreamDefaultControllerError(e,t)}function writableStreamDefaultControllerProcessClose(e){let t=e[controlledWritableStream_];writableStreamMarkCloseRequestInFlight(t),dequeueValue(e);let r=e[closeAlgorithm_]();writableStreamDefaultControllerClearAlgorithms(e),r.then(e=>{writableStreamFinishInFlightClose(t)},e=>{writableStreamFinishInFlightCloseWithError(t,e)})}function writableStreamDefaultControllerProcessWrite(e,t){let r=e[controlledWritableStream_];writableStreamMarkFirstWriteRequestInFlight(r),e[writeAlgorithm_](t).then(t=>{writableStreamFinishInFlightWrite(r);let i=r[state_];if(dequeueValue(e),!writableStreamCloseQueuedOrInFlight(r)&&"writable"===i){let n=writableStreamDefaultControllerGetBackpressure(e);writableStreamUpdateBackpressure(r,n)}writableStreamDefaultControllerAdvanceQueueIfNeeded(e)},t=>{"writable"===r[state_]&&writableStreamDefaultControllerClearAlgorithms(e),writableStreamFinishInFlightWriteWithError(r,t)})}function writableStreamDefaultControllerGetBackpressure(e){return 0>=writableStreamDefaultControllerGetDesiredSize(e)}function writableStreamDefaultControllerError(e,t){let r=e[controlledWritableStream_];writableStreamDefaultControllerClearAlgorithms(e),writableStreamStartErroring(r,t)}class ReadableStreamDefaultReader{constructor(e){if(!isReadableStream(e))throw TypeError();if(isReadableStreamLocked(e))throw TypeError("The stream is locked.");readableStreamReaderGenericInitialize(this,e),this[readRequests_]=[]}get closed(){return isReadableStreamDefaultReader(this)?this[closedPromise_].promise:Promise.reject(TypeError())}cancel(e){if(!isReadableStreamDefaultReader(this))return Promise.reject(TypeError());let t=this[ownerReadableStream_];return void 0===t?Promise.reject(TypeError("Reader is not associated with a stream")):readableStreamCancel(t,e)}read(){return isReadableStreamDefaultReader(this)?void 0===this[ownerReadableStream_]?Promise.reject(TypeError("Reader is not associated with a stream")):readableStreamDefaultReaderRead(this,!0):Promise.reject(TypeError())}releaseLock(){if(!isReadableStreamDefaultReader(this))throw TypeError();if(void 0!==this[ownerReadableStream_]){if(0!==this[readRequests_].length)throw TypeError("Cannot release a stream with pending read requests");readableStreamReaderGenericRelease(this)}}}class WritableStreamDefaultWriter{constructor(e){if(!isWritableStream(e))throw TypeError();if(isWritableStreamLocked(e))throw TypeError("Stream is already locked");this[ownerWritableStream_]=e,e[writer_]=this;let t=createControlledPromise(),r=createControlledPromise();this[readyPromise_]=t,this[closedPromise_$1]=r;let i=e[state_];if("writable"===i)!writableStreamCloseQueuedOrInFlight(e)&&e[backpressure_]||t.resolve(void 0);else if("erroring"===i)t.reject(e[storedError_]),t.promise.catch(()=>{});else if("closed"===i)t.resolve(void 0),r.resolve(void 0);else{let n=e[storedError_];t.reject(n),t.promise.catch(()=>{}),r.reject(n),r.promise.catch(()=>{})}}abort(e){return isWritableStreamDefaultWriter(this)?void 0===this[ownerWritableStream_]?Promise.reject(TypeError("Writer is not connected to a stream")):writableStreamDefaultWriterAbort(this,e):Promise.reject(TypeError())}close(){if(!isWritableStreamDefaultWriter(this))return Promise.reject(TypeError());let e=this[ownerWritableStream_];return void 0===e?Promise.reject(TypeError("Writer is not connected to a stream")):writableStreamCloseQueuedOrInFlight(e)?Promise.reject(TypeError()):writableStreamDefaultWriterClose(this)}releaseLock(){void 0!==this[ownerWritableStream_]&&writableStreamDefaultWriterRelease(this)}write(e){return isWritableStreamDefaultWriter(this)?void 0===this[ownerWritableStream_]?Promise.reject(TypeError("Writer is not connected to a stream")):writableStreamDefaultWriterWrite(this,e):Promise.reject(TypeError())}get closed(){return isWritableStreamDefaultWriter(this)?this[closedPromise_$1].promise:Promise.reject(TypeError())}get desiredSize(){if(!isWritableStreamDefaultWriter(this))throw TypeError();if(void 0===this[ownerWritableStream_])throw TypeError("Writer is not connected to stream");return writableStreamDefaultWriterGetDesiredSize(this)}get ready(){return isWritableStreamDefaultWriter(this)?this[readyPromise_].promise:Promise.reject(TypeError())}}function pipeTo(e,t,r){let i;let n=!!r.preventClose,o=!!r.preventAbort,s=!!r.preventCancel,a=r.signal,l=!1,u=Promise.resolve(),c=createControlledPromise(),d=new ReadableStreamDefaultReader(e),h=new WritableStreamDefaultWriter(t);function f(e,t,r){"errored"===e[state_]?r(e[storedError_]):t.catch(r)}if(void 0!==a&&(i=()=>{let r=new DOMException("Aborted","AbortError"),i=[];!1===o&&i.push(()=>"writable"===t[state_]?writableStreamAbort(t,r):Promise.resolve()),!1===s&&i.push(()=>"readable"===e[state_]?readableStreamCancel(e,r):Promise.resolve()),v(()=>Promise.all(i.map(e=>e())).then(e=>{}),{actualError:r})},!0===a.aborted?i():a.addEventListener("abort",i)),f(e,d[closedPromise_].promise,e=>{v(o?void 0:()=>writableStreamAbort(t,e),{actualError:e})}),f(t,h[closedPromise_$1].promise,t=>{v(s?void 0:()=>readableStreamCancel(e,t),{actualError:t})}),function(e,t,r){"closed"===e[state_]?r():t.then(r)}(e,d[closedPromise_].promise,()=>{n?v():v(()=>writableStreamDefaultWriterCloseWithErrorPropagation(h))}),writableStreamCloseQueuedOrInFlight(t)||"closed"===t[state_]){let p=TypeError();v(s?void 0:()=>readableStreamCancel(e,p),{actualError:p})}function y(){let e=u;return u.then(()=>e===u?void 0:y())}function m(){return"writable"!==t[state_]||writableStreamCloseQueuedOrInFlight(t)?void 0:y()}function v(e,t){if(l)return;function r(){e().then(e=>g(t),e=>g({actualError:e}))}l=!0,void 0===e&&(e=()=>Promise.resolve());let i=m();i?i.then(r):r()}function g(e){writableStreamDefaultWriterRelease(h),readableStreamReaderGenericRelease(d),a&&i&&a.removeEventListener("abort",i),e?c.reject(e.actualError):c.resolve(void 0)}return function e(){l||h[readyPromise_].promise.then(()=>{readableStreamDefaultReaderRead(d).then(({value:t,done:r})=>{r||(u=writableStreamDefaultWriterWrite(h,t).catch(()=>{}),e())},e=>{u=Promise.resolve()})})}(),c.promise}class ReadableStreamDefaultController{constructor(){throw TypeError()}get desiredSize(){return readableStreamDefaultControllerGetDesiredSize(this)}close(){if(!isReadableStreamDefaultController(this))throw TypeError();if(!readableStreamDefaultControllerCanCloseOrEnqueue(this))throw TypeError("Cannot close, the stream is already closing or not readable");readableStreamDefaultControllerClose(this)}enqueue(e){if(!isReadableStreamDefaultController(this))throw TypeError();if(!readableStreamDefaultControllerCanCloseOrEnqueue(this))throw TypeError("Cannot enqueue, the stream is closing or not readable");readableStreamDefaultControllerEnqueue(this,e)}error(e){if(!isReadableStreamDefaultController(this))throw TypeError();readableStreamDefaultControllerError(this,e)}[cancelSteps_](e){resetQueue(this);let t=this[cancelAlgorithm_](e);return readableStreamDefaultControllerClearAlgorithms(this),t}[pullSteps_](e){let t=this[controlledReadableStream_];if(this[queue_].length>0){let r=dequeueValue(this);return this[closeRequested_]&&0===this[queue_].length?(readableStreamDefaultControllerClearAlgorithms(this),readableStreamClose(t)):readableStreamDefaultControllerCallPullIfNeeded(this),Promise.resolve(readableStreamCreateReadResult(r,!1,e))}let i=readableStreamAddReadRequest(t,e);return readableStreamDefaultControllerCallPullIfNeeded(this),i}}function setUpReadableStreamDefaultControllerFromUnderlyingSource(e,t,r,i){let n=Object.create(ReadableStreamDefaultController.prototype),o=createAlgorithmFromUnderlyingMethod(t,"pull",[n]),s=createAlgorithmFromUnderlyingMethod(t,"cancel",[]);setUpReadableStreamDefaultController(e,n,()=>invokeOrNoop(t,"start",[n]),o,s,r,i)}class ReadableStreamBYOBRequest{constructor(){throw TypeError()}get view(){if(!isReadableStreamBYOBRequest(this))throw TypeError();return this[view_]}respond(e){if(!isReadableStreamBYOBRequest(this)||void 0===this[associatedReadableByteStreamController_])throw TypeError();return readableByteStreamControllerRespond(this[associatedReadableByteStreamController_],e)}respondWithNewView(e){if(!isReadableStreamBYOBRequest(this)||void 0===this[associatedReadableByteStreamController_])throw TypeError();if(!ArrayBuffer.isView(e))throw TypeError("view parameter must be a TypedArray");return readableByteStreamControllerRespondWithNewView(this[associatedReadableByteStreamController_],e)}}class ReadableByteStreamController{constructor(){throw TypeError()}get byobRequest(){if(!isReadableByteStreamController(this))throw TypeError();if(void 0===this[byobRequest_]&&this[pendingPullIntos_].length>0){let e=this[pendingPullIntos_][0],t=new Uint8Array(e.buffer,e.byteOffset+e.bytesFilled,e.byteLength-e.bytesFilled),r=Object.create(ReadableStreamBYOBRequest.prototype);setUpReadableStreamBYOBRequest(r,this,t),this[byobRequest_]=r}return this[byobRequest_]}get desiredSize(){if(!isReadableByteStreamController(this))throw TypeError();return readableByteStreamControllerGetDesiredSize(this)}close(){if(!isReadableByteStreamController(this))throw TypeError();if(this[closeRequested_])throw TypeError("Stream is already closing");if("readable"!==this[controlledReadableByteStream_][state_])throw TypeError("Stream is closed or errored");readableByteStreamControllerClose(this)}enqueue(e){if(!isReadableByteStreamController(this))throw TypeError();if(this[closeRequested_])throw TypeError("Stream is already closing");if("readable"!==this[controlledReadableByteStream_][state_])throw TypeError("Stream is closed or errored");if(!ArrayBuffer.isView(e))throw TypeError("chunk must be a valid ArrayBufferView");return readableByteStreamControllerEnqueue(this,e)}error(e){if(!isReadableByteStreamController(this))throw TypeError();readableByteStreamControllerError(this,e)}[cancelSteps_](e){this[pendingPullIntos_].length>0&&(this[pendingPullIntos_][0].bytesFilled=0),resetQueue(this);let t=this[cancelAlgorithm_](e);return readableByteStreamControllerClearAlgorithms(this),t}[pullSteps_](e){let t=this[controlledReadableByteStream_];if(this[queueTotalSize_]>0){let r=this[queue_].shift();this[queueTotalSize_]-=r.byteLength,readableByteStreamControllerHandleQueueDrain(this);let i=new Uint8Array(r.buffer,r.byteOffset,r.byteLength);return Promise.resolve(readableStreamCreateReadResult(i,!1,e))}let n=this[autoAllocateChunkSize_];if(void 0!==n){let o;try{o=new ArrayBuffer(n)}catch(s){return Promise.reject(s)}let a={buffer:o,byteOffset:0,byteLength:n,bytesFilled:0,elementSize:1,ctor:Uint8Array,readerType:"default"};this[pendingPullIntos_].push(a)}let l=readableStreamAddReadRequest(t,e);return readableByteStreamControllerCallPullIfNeeded(this),l}}function setUpReadableByteStreamControllerFromUnderlyingSource(e,t,r){let i=Object.create(ReadableByteStreamController.prototype),n=createAlgorithmFromUnderlyingMethod(t,"pull",[i]),o=createAlgorithmFromUnderlyingMethod(t,"cancel",[]),s=t.autoAllocateChunkSize;if(void 0!==s&&(!isInteger(s=Number(s))||s<=0))throw RangeError("autoAllocateChunkSize must be a positive, finite integer");setUpReadableByteStreamController(e,i,()=>invokeOrNoop(t,"start",[i]),n,o,r,s)}class SDReadableStreamBYOBReader{constructor(e){if(!isReadableStream(e)||!isReadableByteStreamController(e[readableStreamController_]))throw TypeError();if(isReadableStreamLocked(e))throw TypeError("The stream is locked.");readableStreamReaderGenericInitialize(this,e),this[readIntoRequests_]=[]}get closed(){return isReadableStreamBYOBReader(this)?this[closedPromise_].promise:Promise.reject(TypeError())}cancel(e){if(!isReadableStreamBYOBReader(this))return Promise.reject(TypeError());let t=this[ownerReadableStream_];return void 0===t?Promise.reject(TypeError("Reader is not associated with a stream")):readableStreamCancel(t,e)}read(e){return isReadableStreamBYOBReader(this)?void 0===this[ownerReadableStream_]?Promise.reject(TypeError("Reader is not associated with a stream")):ArrayBuffer.isView(e)?0===e.byteLength?Promise.reject(TypeError("supplied buffer view must be > 0 bytes")):readableStreamBYOBReaderRead(this,e,!0):Promise.reject(TypeError("view argument must be a valid ArrayBufferView")):Promise.reject(TypeError())}releaseLock(){if(!isReadableStreamBYOBReader(this))throw TypeError();if(void 0===this[ownerReadableStream_])throw TypeError("Reader is not associated with a stream");if(this[readIntoRequests_].length>0)throw TypeError();readableStreamReaderGenericRelease(this)}}class SDReadableStream{constructor(e={},t={}){initializeReadableStream(this);let r=t.size,i=t.highWaterMark,n=e.type;if(void 0===n){let o=makeSizeAlgorithmFromSizeFunction(r);setUpReadableStreamDefaultControllerFromUnderlyingSource(this,e,validateAndNormalizeHighWaterMark(void 0===i?1:i),o)}else{if("bytes"!==String(n))throw RangeError("The underlying source's `type` field must be undefined or 'bytes'");if(void 0!==r)throw RangeError("bytes streams cannot have a strategy with a `size` field");setUpReadableByteStreamControllerFromUnderlyingSource(this,e,validateAndNormalizeHighWaterMark(void 0===i?0:i))}}get locked(){return isReadableStreamLocked(this)}getReader(e){if(!isReadableStream(this))throw TypeError();void 0===e&&(e={});let{mode:t}=e;if(void 0===t)return new ReadableStreamDefaultReader(this);if("byob"===String(t))return new SDReadableStreamBYOBReader(this);throw RangeError("mode option must be undefined or `byob`")}cancel(e){return isReadableStream(this)?isReadableStreamLocked(this)?Promise.reject(TypeError("Cannot cancel a locked stream")):readableStreamCancel(this,e):Promise.reject(TypeError())}tee(){return readableStreamTee(this,!1)}pipeThrough(e,t={}){let{readable:r,writable:i}=e;if(!isReadableStream(this))throw TypeError();if(!isWritableStream(i))throw TypeError("writable must be a WritableStream");if(!isReadableStream(r))throw TypeError("readable must be a ReadableStream");if(void 0!==t.signal&&!isAbortSignal(t.signal))throw TypeError("options.signal must be an AbortSignal instance");if(isReadableStreamLocked(this))throw TypeError("Cannot pipeThrough on a locked stream");if(isWritableStreamLocked(i))throw TypeError("Cannot pipeThrough to a locked stream");return pipeTo(this,i,t).catch(()=>{}),r}pipeTo(e,t={}){return isReadableStream(this)?isWritableStream(e)?void 0===t.signal||isAbortSignal(t.signal)?isReadableStreamLocked(this)?Promise.reject(TypeError("Cannot pipe from a locked stream")):isWritableStreamLocked(e)?Promise.reject(TypeError("Cannot pipe to a locked stream")):pipeTo(this,e,t):Promise.reject(TypeError("options.signal must be an AbortSignal instance")):Promise.reject(TypeError("destination must be a WritableStream")):Promise.reject(TypeError())}}function createReadableStream(e,t,r,i,n){void 0===i&&(i=1),void 0===n&&(n=()=>1);let o=Object.create(SDReadableStream.prototype);return initializeReadableStream(o),setUpReadableStreamDefaultController(o,Object.create(ReadableStreamDefaultController.prototype),e,t,r,i,n),o}function readableStreamTee(e,t){if(!isReadableStream(e))throw TypeError();let r=new ReadableStreamDefaultReader(e),i,n,o,s,a,l=!1,u=!1,c=!1,d=new Promise(e=>a=e),h=()=>readableStreamDefaultReaderRead(r).then(({value:e,done:r})=>{if(r&&!l&&(u||readableStreamDefaultControllerClose(o[readableStreamController_]),c||readableStreamDefaultControllerClose(s[readableStreamController_]),l=!0),l)return;let i=e,n=e;u||readableStreamDefaultControllerEnqueue(o[readableStreamController_],i),c||(t&&(n=cloneValue(n)),readableStreamDefaultControllerEnqueue(s[readableStreamController_],n))}),f=()=>{};return o=createReadableStream(f,h,t=>{if(u=!0,i=t,c){let r=readableStreamCancel(e,[i,n]);a(r)}return d}),s=createReadableStream(f,h,t=>{if(c=!0,n=t,u){let r=readableStreamCancel(e,[i,n]);a(r)}return d}),r[closedPromise_].promise.catch(e=>{l||(readableStreamDefaultControllerError(o[readableStreamController_],e),readableStreamDefaultControllerError(s[readableStreamController_],e),l=!0)}),[o,s]}class WritableStreamDefaultController{constructor(){throw TypeError()}error(e){if(!isWritableStreamDefaultController(this))throw TypeError();"writable"===this[controlledWritableStream_][state_]&&writableStreamDefaultControllerError(this,e)}[abortSteps_](e){let t=this[abortAlgorithm_](e);return writableStreamDefaultControllerClearAlgorithms(this),t}[errorSteps_](){resetQueue(this)}}function setUpWritableStreamDefaultControllerFromUnderlyingSink(e,t,r,i){let n=Object.create(WritableStreamDefaultController.prototype),o=createAlgorithmFromUnderlyingMethod(t,"write",[n]),s=createAlgorithmFromUnderlyingMethod(t,"close",[]),a=createAlgorithmFromUnderlyingMethod(t,"abort",[]);setUpWritableStreamDefaultController(e,n,function(){return invokeOrNoop(t,"start",[n])},o,s,a,r,i)}class WritableStream{constructor(e={},t={}){initializeWritableStream(this);let r=t.size,i=t.highWaterMark;if(void 0!==e.type)throw RangeError("The type of an underlying sink must be undefined");let n=makeSizeAlgorithmFromSizeFunction(r);setUpWritableStreamDefaultControllerFromUnderlyingSink(this,e,validateAndNormalizeHighWaterMark(void 0===i?1:i),n)}get locked(){if(!isWritableStream(this))throw TypeError();return isWritableStreamLocked(this)}abort(e){return isWritableStream(this)?isWritableStreamLocked(this)?Promise.reject(TypeError("Cannot abort a locked stream")):writableStreamAbort(this,e):Promise.reject(TypeError())}getWriter(){if(!isWritableStream(this))throw TypeError();return new WritableStreamDefaultWriter(this)}}function createWritableStream(e,t,r,i,n,o){void 0===n&&(n=1),void 0===o&&(o=()=>1);let s=Object.create(WritableStream.prototype);return initializeWritableStream(s),setUpWritableStreamDefaultController(s,Object.create(WritableStreamDefaultController.prototype),e,t,r,i,n,o),s}let backpressure_$1=Symbol("backpressure_"),backpressureChangePromise_=Symbol("backpressureChangePromise_"),readable_=Symbol("readable_"),transformStreamController_=Symbol("transformStreamController_"),writable_=Symbol("writable_"),controlledTransformStream_=Symbol("controlledTransformStream_"),flushAlgorithm_=Symbol("flushAlgorithm_"),transformAlgorithm_=Symbol("transformAlgorithm_");function isTransformStream(e){return"object"==typeof e&&null!==e&&transformStreamController_ in e}function initializeTransformStream(e,t,r,i,n,o){let s=function(){return t};e[writable_]=createWritableStream(s,function(t){return transformStreamDefaultSinkWriteAlgorithm(e,t)},function(){return transformStreamDefaultSinkCloseAlgorithm(e)},function(t){return transformStreamDefaultSinkAbortAlgorithm(e,t)},r,i),e[readable_]=createReadableStream(s,function(){return transformStreamDefaultSourcePullAlgorithm(e)},function(t){return transformStreamErrorWritableAndUnblockWrite(e,t),Promise.resolve(void 0)},n,o),e[backpressure_$1]=void 0,e[backpressureChangePromise_]=void 0,transformStreamSetBackpressure(e,!0),e[transformStreamController_]=void 0}function transformStreamError(e,t){readableStreamDefaultControllerError(e[readable_][readableStreamController_],t),transformStreamErrorWritableAndUnblockWrite(e,t)}function transformStreamErrorWritableAndUnblockWrite(e,t){transformStreamDefaultControllerClearAlgorithms(e[transformStreamController_]),writableStreamDefaultControllerErrorIfNeeded(e[writable_][writableStreamController_],t),e[backpressure_$1]&&transformStreamSetBackpressure(e,!1)}function transformStreamSetBackpressure(e,t){void 0!==e[backpressure_$1]&&e[backpressureChangePromise_].resolve(void 0),e[backpressureChangePromise_]=createControlledPromise(),e[backpressure_$1]=t}function isTransformStreamDefaultController(e){return"object"==typeof e&&null!==e&&controlledTransformStream_ in e}function setUpTransformStreamDefaultController(e,t,r,i){t[controlledTransformStream_]=e,e[transformStreamController_]=t,t[transformAlgorithm_]=r,t[flushAlgorithm_]=i}function transformStreamDefaultControllerClearAlgorithms(e){e[transformAlgorithm_]=void 0,e[flushAlgorithm_]=void 0}function transformStreamDefaultControllerEnqueue(e,t){let r=e[controlledTransformStream_],i=r[readable_][readableStreamController_];if(!readableStreamDefaultControllerCanCloseOrEnqueue(i))throw TypeError();try{readableStreamDefaultControllerEnqueue(i,t)}catch(n){throw transformStreamErrorWritableAndUnblockWrite(r,n),r[readable_][storedError_]}readableStreamDefaultControllerHasBackpressure(i)!==r[backpressure_$1]&&transformStreamSetBackpressure(r,!0)}function transformStreamDefaultControllerError(e,t){transformStreamError(e[controlledTransformStream_],t)}function transformStreamDefaultControllerPerformTransform(e,t){return e[transformAlgorithm_](t).catch(t=>{throw transformStreamError(e[controlledTransformStream_],t),t})}function transformStreamDefaultControllerTerminate(e){let t=e[controlledTransformStream_],r=t[readable_][readableStreamController_];readableStreamDefaultControllerCanCloseOrEnqueue(r)&&readableStreamDefaultControllerClose(r),transformStreamErrorWritableAndUnblockWrite(t,TypeError("The transform stream has been terminated"))}function transformStreamDefaultSinkWriteAlgorithm(e,t){let r=e[transformStreamController_];return e[backpressure_$1]?e[backpressureChangePromise_].promise.then(i=>{let n=e[writable_];if("erroring"===n[state_])throw n[storedError_];return transformStreamDefaultControllerPerformTransform(r,t)}):transformStreamDefaultControllerPerformTransform(r,t)}function transformStreamDefaultSinkAbortAlgorithm(e,t){return transformStreamError(e,t),Promise.resolve(void 0)}function transformStreamDefaultSinkCloseAlgorithm(e){let t=e[readable_],r=e[transformStreamController_],i=r[flushAlgorithm_]();return transformStreamDefaultControllerClearAlgorithms(r),i.then(e=>{if("errored"===t[state_])throw t[storedError_];let r=t[readableStreamController_];readableStreamDefaultControllerCanCloseOrEnqueue(r)&&readableStreamDefaultControllerClose(r)},r=>{throw transformStreamError(e,r),t[storedError_]})}function transformStreamDefaultSourcePullAlgorithm(e){return transformStreamSetBackpressure(e,!1),e[backpressureChangePromise_].promise}class TransformStreamDefaultController{constructor(){throw TypeError()}get desiredSize(){if(!isTransformStreamDefaultController(this))throw TypeError();return readableStreamDefaultControllerGetDesiredSize(this[controlledTransformStream_][readable_][readableStreamController_])}enqueue(e){if(!isTransformStreamDefaultController(this))throw TypeError();transformStreamDefaultControllerEnqueue(this,e)}error(e){if(!isTransformStreamDefaultController(this))throw TypeError();transformStreamDefaultControllerError(this,e)}terminate(){if(!isTransformStreamDefaultController(this))throw TypeError();transformStreamDefaultControllerTerminate(this)}}class TransformStream$1{constructor(e={},t={},r={}){let i=t.size,n=t.highWaterMark,o=r.size,s=r.highWaterMark;if(void 0!==e.writableType)throw RangeError("The transformer's `writableType` field must be undefined");let a=makeSizeAlgorithmFromSizeFunction(i),l=validateAndNormalizeHighWaterMark(void 0===n?1:n);if(void 0!==e.readableType)throw RangeError("The transformer's `readableType` field must be undefined");let u=makeSizeAlgorithmFromSizeFunction(o),c=validateAndNormalizeHighWaterMark(void 0===s?0:s),d=createControlledPromise();initializeTransformStream(this,d.promise,l,a,c,u),setUpTransformStreamDefaultControllerFromTransformer(this,e);let h=invokeOrNoop(e,"start",[this[transformStreamController_]]);d.resolve(h)}get readable(){if(!isTransformStream(this))throw TypeError();return this[readable_]}get writable(){if(!isTransformStream(this))throw TypeError();return this[writable_]}}function setUpTransformStreamDefaultControllerFromTransformer(e,t){let r;let i=Object.create(TransformStreamDefaultController.prototype),n=t.transform;if(void 0!==n){if("function"!=typeof n)throw TypeError("`transform` field of the transformer must be a function");r=e=>promiseCall(n,t,[e,i])}else r=function(e){try{transformStreamDefaultControllerEnqueue(i,e)}catch(t){return Promise.reject(t)}return Promise.resolve(void 0)};let o=createAlgorithmFromUnderlyingMethod(t,"flush",[i]);setUpTransformStreamDefaultController(e,i,r,o)}class ByteLengthQueuingStrategy{constructor(e){this.highWaterMark=e.highWaterMark}size(e){return e.byteLength}}class CountQueuingStrategy{constructor(e){this.highWaterMark=e.highWaterMark}size(){return 1}}function wrapReadableStream(e,t){let r;return new t({start(t){(r=e.getReader()).closed.catch(e=>{t.error(e)})},pull:e=>r.read().then(({value:t,done:r})=>{r?e.close():e.enqueue(t)},t=>{e.error(t)}),cancel(e){r.cancel(e)}})}function getMIMETypeFromHeadersInit(e){let t="Content-Type";if(void 0===e)return"";if(e instanceof Headers)return e.get(t)||"";if(Array.isArray(e)){let r=e.find(e=>Array.isArray(e)&&2===e.length&&e[0]===t);return r?r[1]:""}return e[t]||""}function resolveRequestInitStream(e,t,r){let i;if(void 0===e)return Promise.resolve(e);let n=e.body;if(n&&"object"==typeof n&&(t&&n instanceof t||n instanceof r)&&(i=n),!i)return Promise.resolve(e);let o=getMIMETypeFromHeadersInit(e.headers);return readAllBytesFromStream(i.getReader(),o).then(t=>(e.body=t,e))}function createAdaptedFetch(e,t,r,i,n){return function(o,s){return resolveRequestInitStream(s,r,i).then(r=>e.call(void 0,o,r).then(e=>{if("body"in e){let r,o;let a=e;e=new Proxy(a,{get(l,u,c){let d;return"body"===u?(void 0===r&&(r=wrapReadableStream(a.body,i)),d=r):"clone"===u?(void 0===o&&(o=function(){let[i,o]=n(e.body,!0);return r=i,createResponseProxyWithStreamBody(t,n,o,s)}),d=o):d=l[u],"function"==typeof d?function(...e){return d.apply(l,e)}:d}})}else e.body=new i({pull:t=>e.arrayBuffer().then(e=>{t.enqueue(new Uint8Array(e)),t.close()},e=>{t.error(e)})}),e.clone=function(){let[r,i]=n(e.body,!0);return e.body=r,createResponseProxyWithStreamBody(t,n,i,s)};return e}))}}function readAllBytesFromStream(e,t){return new Promise((r,i)=>{let n=[];!function o(){e.read().then(({value:e,done:s})=>{s?function(){0===n.length&&n.push(new Uint8Array(0));let e=new Blob(n,{type:t});r(e)}():e instanceof Uint8Array?(n.push(e),o()):i(TypeError("A ReadableStream body must only yield Uint8Array values"))},e=>{i(e)})}()})}function createResponseProxyWithStreamBody(e,t,r,i){let n=new e("fake",i),o=getMIMETypeFromHeadersInit(n.headers),s,a=!1;function l(){return void 0===s&&(s=new Promise((t,n)=>{if(a=!0,r.locked)return n(TypeError("The ReadableStream is locked"));readAllBytesFromStream(r.getReader(),o).then(r=>{t(new e(r,i))}).catch(e=>{n(e)})})),s}return new class{get type(){return n.type}get url(){return n.url}get redirected(){return n.redirected}get status(){return n.status}get ok(){return n.ok}get statusText(){return n.statusText}get headers(){return n.headers}clone(){let[n,o]=t(r,!0);return r=n,createResponseProxyWithStreamBody(e,t,o,i)}get body(){return r}get bodyUsed(){return a}arrayBuffer(){return l().then(e=>e.arrayBuffer())}blob(){return l().then(e=>e.blob())}formData(){return l().then(e=>e.formData())}json(){return l().then(e=>e.json())}text(){return l().then(e=>e.text())}}}function createAdaptedResponse(e,t,r,i){let n=function(n,o){if(n instanceof r){if(void 0===t||!("body"in e))return createResponseProxyWithStreamBody(e,i,n,o);n=wrapReadableStream(n,t)}return new e(n,o)};return n.prototype=e.prototype,n}let decDecoder=Symbol("decDecoder"),decTransform=Symbol("decTransform");class TextDecodeTransformer{constructor(e){this.decoder_=e}transform(e,t){if(!(e instanceof ArrayBuffer||ArrayBuffer.isView(e)))throw TypeError("Input data must be a BufferSource");let r=this.decoder_.decode(e,{stream:!0});0!==r.length&&t.enqueue(r)}flush(e){let t=this.decoder_.decode();0!==t.length&&e.enqueue(t)}}class TextDecoderStream{constructor(e,t){this[decDecoder]=new TextDecoder(e,t),this[decTransform]=new TransformStream(new TextDecodeTransformer(this[decDecoder]))}get encoding(){return this[decDecoder].encoding}get fatal(){return this[decDecoder].fatal}get ignoreBOM(){return this[decDecoder].ignoreBOM}get readable(){return this[decTransform].readable}get writable(){return this[decTransform].writable}}let encEncoder=Symbol("encEncoder"),encTransform=Symbol("encTransform");class TextEncodeTransformer{constructor(e){this.encoder_=e,this.partial_=void 0}transform(e,t){let r=String(e);void 0!==this.partial_&&(r=this.partial_+r,this.partial_=void 0);let i=r.length-1,n=r.charCodeAt(i);n>=55296&&n<56320&&(this.partial_=String.fromCharCode(n),r=r.substring(0,i));let o=this.encoder_.encode(r);0!==o.length&&t.enqueue(o)}flush(e){this.partial_&&(e.enqueue(this.encoder_.encode(this.partial_)),this.partial_=void 0)}}class TextEncoderStream{constructor(){this[encEncoder]=new TextEncoder,this[encTransform]=new TransformStream(new TextEncodeTransformer(this[encEncoder]))}get encoding(){return this[encEncoder].encoding}get readable(){return this[encTransform].readable}get writable(){return this[encTransform].writable}}let PRESET_DICT=32,Z_DEFLATED=8,GZIP_ID1=31,GZIP_ID2=139,inflate_mask=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],swap32=e=>(e>>>24&255|e>>>8&65280|(65280&e)<<8|(255&e)<<24)>>>0;function u8ArrayFromBufferSource(e){return e instanceof ArrayBuffer?new Uint8Array(e):ArrayBuffer.isView(e)?e instanceof Uint8Array?e:new Uint8Array(e.buffer,e.byteOffset,e.byteLength):void 0}function adler32(e,t=1){let r=u8ArrayFromBufferSource(e);if(!r)throw TypeError("source must be a BufferSource");return computeAdler32(r,t)}let BASE=65521,NMAX=5552;function computeAdler32(e,t=1){let r=t>>>16&65535;t&=65535;let i=e.length,n=0;for(;i>=NMAX;){i-=NMAX;let o=NMAX/16;do r+=(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++]);while(--o);t%=BASE,r+=BASE}if(i){for(;i>=16;)i-=16,r+=(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++])+(t+=e[n++]);for(;i--;)r+=t+=e[n++];t%=BASE,r%=BASE}return t|r<<16}function crc32(e,t=0){let r=u8ArrayFromBufferSource(e);if(!r)throw TypeError("source must be a BufferSource");return computeCRC32(r,t)}let endian=new Uint32Array([1]),endianCheck=new Uint8Array(endian.buffer,0,1)[0],computeCRC32=1===endianCheck?computeCRC32Little:computeCRC32Big;function computeCRC32Little(e,t=0){let r=~t,i=e.byteOffset,n=0,o=e.byteLength,s=crcTables[0],a=crcTables[1],l=crcTables[2],u=crcTables[3];for(;o&&3&i;)r=s[255&(r^e[n++])]^r>>>8,o--,i++;let c=new Uint32Array(e.buffer,i,o>>>2),d=0;for(;o>=32;)r^=c[d++],r=u[255&r]^l[r>>>8&255]^a[r>>>16&255]^s[r>>>24]^c[d++],r=u[255&r]^l[r>>>8&255]^a[r>>>16&255]^s[r>>>24]^c[d++],r=u[255&r]^l[r>>>8&255]^a[r>>>16&255]^s[r>>>24]^c[d++],r=u[255&r]^l[r>>>8&255]^a[r>>>16&255]^s[r>>>24]^c[d++],r=u[255&r]^l[r>>>8&255]^a[r>>>16&255]^s[r>>>24]^c[d++],r=u[255&r]^l[r>>>8&255]^a[r>>>16&255]^s[r>>>24]^c[d++],r=u[255&r]^l[r>>>8&255]^a[r>>>16&255]^s[r>>>24]^c[d++],r=u[255&r]^l[r>>>8&255]^a[r>>>16&255]^s[r>>>24],o-=32;for(;o>=4;)r^=c[d++],r=u[255&r]^l[r>>>8&255]^a[r>>>16&255]^s[r>>>24],o-=4;if(o){n+=4*d;do r=s[255&(r^e[n++])]^r>>>8;while(--o)}return~r}function computeCRC32Big(e,t=0){let r=~swap32(t),i=e.byteOffset,n=0,o=e.byteLength,s=crcTables[4],a=crcTables[5],l=crcTables[6],u=crcTables[7];for(;o&&3&i;)r=s[r>>>24^e[n++]]^r<<8,o--,i++;let c=new Uint32Array(e.buffer,i,o>>>2),d=0;for(;o>=32;)r^=c[d++],r=s[255&r]^a[r>>>8&255]^l[r>>>16&255]^u[r>>>24]^c[d++],r=s[255&r]^a[r>>>8&255]^l[r>>>16&255]^u[r>>>24]^c[d++],r=s[255&r]^a[r>>>8&255]^l[r>>>16&255]^u[r>>>24]^c[d++],r=s[255&r]^a[r>>>8&255]^l[r>>>16&255]^u[r>>>24]^c[d++],r=s[255&r]^a[r>>>8&255]^l[r>>>16&255]^u[r>>>24]^c[d++],r=s[255&r]^a[r>>>8&255]^l[r>>>16&255]^u[r>>>24]^c[d++],r=s[255&r]^a[r>>>8&255]^l[r>>>16&255]^u[r>>>24]^c[d++],r=s[255&r]^a[r>>>8&255]^l[r>>>16&255]^u[r>>>24],o-=32;for(;o>=4;)r^=c[d++],r=s[255&r]^a[r>>>8&255]^l[r>>>16&255]^u[r>>>24],o-=4;if(o){n+=4*d;do r=s[r>>>24^e[n++]]^r<<8;while(--o)}return swap32(r=~r)}function makeCRCTables(){let e=new ArrayBuffer(8192),t=[new Uint32Array(e,0,256),new Uint32Array(e,1024,256),new Uint32Array(e,2048,256),new Uint32Array(e,3072,256),new Uint32Array(e,4096,256),new Uint32Array(e,5120,256),new Uint32Array(e,6144,256),new Uint32Array(e,7168,256)];for(let r=0;r<256;r++){let i=r;for(let n=0;n<8;n++)i=1&i?3988292384^i>>>1:i>>>1;t[0][r]=i,t[4][r]=swap32(i)}for(let o=0;o<256;o++){let s=t[0][o];for(let a=1;a<4;a++)s=t[0][255&s]^s>>>8,t[a][o]=s,t[a+4][o]=swap32(s)}return t}let crcTables=makeCRCTables(),OUTPUT_BUFSIZE=16384;class ZStream{constructor(){this.avail_in=0,this.next_in_index=0,this.next_out=new Uint8Array(OUTPUT_BUFSIZE),this.avail_out=this.next_out.byteLength,this.next_out_index=0,this.total_in=this.total_out=0,this.msg=""}append(e){this.next_in=e,this.avail_in=e.length,this.next_in_index=0}read_buf(e,t){return this.next_in.subarray(e,e+t)}read_into_buf(e,t,r){let i=this.avail_in;return i>r&&(i=r),0===i?0:(e.set(this.next_in.subarray(this.next_in_index,this.next_in_index+i),t),this.avail_in-=i,this.next_in_index+=i,this.total_in+=i,i)}flush_pending(e){var t=e.pending;t>this.avail_out&&(t=this.avail_out),0!==t&&(this.next_out.set(e.pending_buf.subarray(e.pending_out,e.pending_out+t),this.next_out_index),this.next_out_index+=t,e.pending_out+=t,this.total_out+=t,this.avail_out-=t,e.pending-=t,0===e.pending&&(e.pending_out=0))}}function InfCodes(){let e,t,r,i,n=0,o=0,s=0,a=0,l=0,u=0,c=0,d=0,h=0,f=0;function p(e,t,r,i,n,o,s,a){let l,u,c,d,h,f,p,y,m,v,g,b,w,_,S,E;p=a.next_in_index,y=a.avail_in,h=s.bitb,f=s.bitk,v=(m=s.write)<s.read?s.read-m-1:s.end-m,g=inflate_mask[e],b=inflate_mask[t];do{for(;f<20;)y--,h|=(255&a.next_in[p++])<<f,f+=8;if(l=h&g,0!==(d=(u=r)[E=3*((c=i)+l)]))for(;;){if(h>>=u[E+1],f-=u[E+1],0!=(16&d)){for(d&=15,w=u[E+2]+(h&inflate_mask[d]),h>>=d,f-=d;f<15;)y--,h|=(255&a.next_in[p++])<<f,f+=8;for(l=h&b,d=(u=n)[E=3*((c=o)+l)];;){if(h>>=u[E+1],f-=u[E+1],0!=(16&d)){for(d&=15;f<d;)y--,h|=(255&a.next_in[p++])<<f,f+=8;if(_=u[E+2]+(h&inflate_mask[d]),h>>=d,f-=d,v-=w,m>=_)S=m-_,s.window[m++]=s.window[S++],s.window[m++]=s.window[S++],w-=2;else{S=m-_;do S+=s.end;while(S<0);if(w>(d=s.end-S)){w-=d;do s.window[m++]=s.window[S++];while(0!=--d);S=0}}do s.window[m++]=s.window[S++];while(0!=--w);break}if(0!=(64&d))return a.msg="invalid distance code",w=f>>3<(w=a.avail_in-y)?f>>3:w,y+=w,p-=w,f-=w<<3,s.bitb=h,s.bitk=f,a.avail_in=y,a.total_in+=p-a.next_in_index,a.next_in_index=p,s.write=m,-3;l+=u[E+2]+(h&inflate_mask[d]),d=u[E=3*(c+l)]}break}if(0!=(64&d))return 0!=(32&d)?(w=f>>3<(w=a.avail_in-y)?f>>3:w,y+=w,p-=w,f-=w<<3,s.bitb=h,s.bitk=f,a.avail_in=y,a.total_in+=p-a.next_in_index,a.next_in_index=p,s.write=m,1):(a.msg="invalid literal/length code",w=f>>3<(w=a.avail_in-y)?f>>3:w,y+=w,p-=w,f-=w<<3,s.bitb=h,s.bitk=f,a.avail_in=y,a.total_in+=p-a.next_in_index,a.next_in_index=p,s.write=m,-3);if(l+=u[E+2]+(h&inflate_mask[d]),0===(d=u[E=3*(c+l)])){h>>=u[E+1],f-=u[E+1],s.window[m++]=u[E+2],v--;break}}else h>>=u[E+1],f-=u[E+1],s.window[m++]=u[E+2],v--}while(v>=258&&y>=10);return w=f>>3<(w=a.avail_in-y)?f>>3:w,y+=w,p-=w,f-=w<<3,s.bitb=h,s.bitk=f,a.avail_in=y,a.total_in+=p-a.next_in_index,a.next_in_index=p,s.write=m,0}return{init:function(t,n,o,s,a,l){e=0,c=t,d=n,r=o,h=s,i=a,f=l},proc:function(y,m,v){let g,b,w,_,S,E,k,N=0,A=0,P=0;for(P=m.next_in_index,_=m.avail_in,N=y.bitb,A=y.bitk,E=(S=y.write)<y.read?y.read-S-1:y.end-S;;)switch(e){case 0:if(E>=258&&_>=10&&(y.bitb=N,y.bitk=A,m.avail_in=_,m.total_in+=P-m.next_in_index,m.next_in_index=P,y.write=S,v=p(c,d,r,h,i,f,y,m),P=m.next_in_index,_=m.avail_in,N=y.bitb,A=y.bitk,E=(S=y.write)<y.read?y.read-S-1:y.end-S,0!==v)){e=1===v?7:9;break}s=c,t=r,o=h,e=1;case 1:for(g=s;A<g;){if(0===_)return y.bitb=N,y.bitk=A,m.avail_in=_,m.total_in+=P-m.next_in_index,m.next_in_index=P,y.write=S,y.inflate_flush(m,v);v=0,_--,N|=(255&m.next_in[P++])<<A,A+=8}if(b=3*(o+(N&inflate_mask[g])),N>>>=t[b+1],A-=t[b+1],0===(w=t[b])){a=t[b+2],e=6;break}if(0!=(16&w)){l=15&w,n=t[b+2],e=2;break}if(0==(64&w)){s=w,o=b/3+t[b+2];break}if(0!=(32&w)){e=7;break}return e=9,m.msg="invalid literal/length code",v=-3,y.bitb=N,y.bitk=A,m.avail_in=_,m.total_in+=P-m.next_in_index,m.next_in_index=P,y.write=S,y.inflate_flush(m,v);case 2:for(g=l;A<g;){if(0===_)return y.bitb=N,y.bitk=A,m.avail_in=_,m.total_in+=P-m.next_in_index,m.next_in_index=P,y.write=S,y.inflate_flush(m,v);v=0,_--,N|=(255&m.next_in[P++])<<A,A+=8}n+=N&inflate_mask[g],N>>=g,A-=g,s=d,t=i,o=f,e=3;case 3:for(g=s;A<g;){if(0===_)return y.bitb=N,y.bitk=A,m.avail_in=_,m.total_in+=P-m.next_in_index,m.next_in_index=P,y.write=S,y.inflate_flush(m,v);v=0,_--,N|=(255&m.next_in[P++])<<A,A+=8}if(b=3*(o+(N&inflate_mask[g])),N>>=t[b+1],A-=t[b+1],0!=(16&(w=t[b]))){l=15&w,u=t[b+2],e=4;break}if(0==(64&w)){s=w,o=b/3+t[b+2];break}return e=9,m.msg="invalid distance code",v=-3,y.bitb=N,y.bitk=A,m.avail_in=_,m.total_in+=P-m.next_in_index,m.next_in_index=P,y.write=S,y.inflate_flush(m,v);case 4:for(g=l;A<g;){if(0===_)return y.bitb=N,y.bitk=A,m.avail_in=_,m.total_in+=P-m.next_in_index,m.next_in_index=P,y.write=S,y.inflate_flush(m,v);v=0,_--,N|=(255&m.next_in[P++])<<A,A+=8}u+=N&inflate_mask[g],N>>=g,A-=g,e=5;case 5:for(k=S-u;k<0;)k+=y.end;for(;0!==n;){if(0===E&&(S===y.end&&0!==y.read&&(E=(S=0)<y.read?y.read-S-1:y.end-S),0===E&&(y.write=S,v=y.inflate_flush(m,v),E=(S=y.write)<y.read?y.read-S-1:y.end-S,S===y.end&&0!==y.read&&(E=(S=0)<y.read?y.read-S-1:y.end-S),0===E)))return y.bitb=N,y.bitk=A,m.avail_in=_,m.total_in+=P-m.next_in_index,m.next_in_index=P,y.write=S,y.inflate_flush(m,v);y.window[S++]=y.window[k++],E--,k===y.end&&(k=0),n--}e=0;break;case 6:if(0===E&&(S===y.end&&0!==y.read&&(E=(S=0)<y.read?y.read-S-1:y.end-S),0===E&&(y.write=S,v=y.inflate_flush(m,v),E=(S=y.write)<y.read?y.read-S-1:y.end-S,S===y.end&&0!==y.read&&(E=(S=0)<y.read?y.read-S-1:y.end-S),0===E)))return y.bitb=N,y.bitk=A,m.avail_in=_,m.total_in+=P-m.next_in_index,m.next_in_index=P,y.write=S,y.inflate_flush(m,v);v=0,y.window[S++]=a,E--,e=0;break;case 7:if(A>7&&(A-=8,_++,P--),y.write=S,v=y.inflate_flush(m,v),E=(S=y.write)<y.read?y.read-S-1:y.end-S,y.read!==y.write)return y.bitb=N,y.bitk=A,m.avail_in=_,m.total_in+=P-m.next_in_index,m.next_in_index=P,y.write=S,y.inflate_flush(m,v);e=8;case 8:return v=1,y.bitb=N,y.bitk=A,m.avail_in=_,m.total_in+=P-m.next_in_index,m.next_in_index=P,y.write=S,y.inflate_flush(m,v);case 9:return v=-3,y.bitb=N,y.bitk=A,m.avail_in=_,m.total_in+=P-m.next_in_index,m.next_in_index=P,y.write=S,y.inflate_flush(m,v);default:return v=-2,y.bitb=N,y.bitk=A,m.avail_in=_,m.total_in+=P-m.next_in_index,m.next_in_index=P,y.write=S,y.inflate_flush(m,v)}}}}let fixed_bl=9,fixed_bd=5,fixed_tl=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],fixed_td=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],cplens=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],cplext=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],cpdist=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],cpdext=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],BMAX=15,hn=[0],c=new Int32Array(BMAX+1),r=new Int32Array(3),u=new Int32Array(BMAX),x=new Int32Array(BMAX+1);function huft_build(e,t,i,n,o,s,a,l,d,h,f){let p,y,m,v,g,b,w,_,S,E,k,N,A,P,O;E=0,g=i;do c[e[t+E]]++,E++,g--;while(0!==g);if(c[0]===i)return a[0]=-1,l[0]=0,0;for(_=l[0],b=1;b<=BMAX&&0===c[b];b++);for(w=b,_<b&&(_=b),g=BMAX;0!==g&&0===c[g];g--);for(m=g,_>g&&(_=g),l[0]=_,P=1<<b;b<g;b++,P<<=1)if((P-=c[b])<0)return -3;if((P-=c[g])<0)return -3;for(c[g]+=P,x[1]=b=0,E=1,A=2;0!=--g;)x[A]=b+=c[E],A++,E++;g=0,E=0;do 0!==(b=e[t+E])&&(f[x[b]++]=g),E++;while(++g<i);for(i=x[m],x[0]=g=0,E=0,v=-1,N=-_,u[0]=0,k=0,O=0;w<=m;w++)for(p=c[w];0!=p--;){for(;w>N+_;){if(v++,N+=_,O=(O=m-N)>_?_:O,(y=1<<(b=w-N))>p+1&&(y-=p+1,A=w,b<O))for(;++b<O&&!((y<<=1)<=c[++A]);)y-=c[A];if(O=1<<b,h[0]+O>1400)return -3;u[v]=k=h[0],h[0]+=O,0!==v?(x[v]=g,r[0]=b,r[1]=_,b=g>>>N-_,r[2]=k-u[v-1]-b,d.set(r,3*(u[v-1]+b))):a[0]=k}for(r[1]=w-N,E>=i?r[0]=192:f[E]<n?(r[0]=f[E]<256?0:96,r[2]=f[E++]):(r[0]=s[f[E]-n]+16+64,r[2]=o[f[E++]-n]),y=1<<w-N,b=g>>>N;b<O;b+=y)d.set(r,3*(k+b));for(b=1<<w-1;0!=(g&b);b>>>=1)g^=b;for(g^=b,S=(1<<N)-1;(g&S)!==x[v];)v--,N-=_,S=(1<<N)-1}return 0!==P&&1!==m?-5:0}function initWorkArea(e){v=new Int32Array(e);for(let t=0;t<BMAX+1;t++)c[t]=0,u[t]=0,x[t]=0;for(let i=0;i<3;i++)r[i]=0}function inflate_trees_bits(e,t,r,i,n){initWorkArea(19),hn[0]=0;let o=huft_build(e,0,19,19,null,null,r,t,i,hn,v);return -3===o?n.msg="oversubscribed dynamic bit lengths tree":-5!==o&&0!==t[0]||(n.msg="incomplete dynamic bit lengths tree",o=-3),o}function inflate_trees_dynamic(e,t,r,i,n,o,s,a,l){initWorkArea(288),hn[0]=0;let u=huft_build(r,0,e,257,cplens,cplext,o,i,a,hn,v);return 0!==u||0===i[0]?(-3===u?l.msg="oversubscribed literal/length tree":(l.msg="incomplete literal/length tree",u=-3),u):(initWorkArea(288),0!==(u=huft_build(r,e,t,0,cpdist,cpdext,s,n,a,hn,v))||0===n[0]&&e>257?(-3===u?l.msg="oversubscribed distance tree":-5===u?(l.msg="incomplete distance tree",u=-3):(l.msg="empty distance tree with lengths",u=-3),u):0)}function inflate_trees_fixed(e,t,r,i){return e[0]=fixed_bl,t[0]=fixed_bd,r[0]=fixed_tl,i[0]=fixed_td,0}let border=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];class InfBlocks{constructor(e){this.codes=InfCodes(),this.hufts=new Int32Array(4200),this.mode=0,this.bitk=0,this.bitb=0,this.read=0,this.write=0,this.last=0,this.end=e,this.window=new Uint8Array(e)}reset(){this.bitk=0,this.bitb=0,this.read=0,this.write=0,this.last=0}inflate_flush(e,t){let r,i,n;return i=e.next_out_index,(r=((n=this.read)<=this.write?this.write:this.end)-n)>e.avail_out&&(r=e.avail_out),0!==r&&-5===t&&(t=0),e.avail_out-=r,e.total_out+=r,e.next_out.set(this.window.subarray(n,n+r),i),i+=r,(n+=r)===this.end&&(n=0,this.write===this.end&&(this.write=0),(r=this.write-n)>e.avail_out&&(r=e.avail_out),0!==r&&-5===t&&(t=0),e.avail_out-=r,e.total_out+=r,e.next_out.set(this.window.subarray(n,n+r),i),i+=r,n+=r),e.next_out_index=i,this.read=n,t}proc(e,t){let r,i,n,o,s,a,l,u,c=0,d=0,h=0,f=new Uint8Array(320),p=[0],y=[0],m=this.codes,v=this.hufts;for(o=e.next_in_index,s=e.avail_in,i=this.bitb,n=this.bitk,l=(a=this.write)<this.read?this.read-a-1:this.end-a;;)switch(this.mode){case 0:if(this.last)return 1;for(;n<3;){if(0===s)return this.bitb=i,this.bitk=n,e.avail_in=s,e.total_in+=o-e.next_in_index,e.next_in_index=o,this.write=a,this.inflate_flush(e,t);t=0,s--,i|=(255&e.next_in[o++])<<n,n+=8}switch(r=7&i,this.last=1&r,r>>>1){case 0:i>>>=3,n-=3,i>>>=r=7&n,n-=r,this.mode=1;break;case 1:let g=[0],b=[0],w=[[]],_=[[]];inflate_trees_fixed(g,b,w,_),m.init(g[0],b[0],w[0],0,_[0],0),i>>>=3,n-=3,this.mode=6;break;case 2:i>>>=3,n-=3,this.mode=3;break;case 3:return i>>>=3,n-=3,this.mode=9,e.msg="invalid block type",t=-3,this.bitb=i,this.bitk=n,e.avail_in=s,e.total_in+=o-e.next_in_index,e.next_in_index=o,this.write=a,this.inflate_flush(e,t)}break;case 1:for(;n<32;){if(0===s)return this.bitb=i,this.bitk=n,e.avail_in=s,e.total_in+=o-e.next_in_index,e.next_in_index=o,this.write=a,this.inflate_flush(e,t);t=0,s--,i|=(255&e.next_in[o++])<<n,n+=8}if((~i>>>16&65535)!=(65535&i))return this.mode=9,e.msg="invalid stored block lengths",t=-3,this.bitb=i,this.bitk=n,e.avail_in=s,e.total_in+=o-e.next_in_index,e.next_in_index=o,this.write=a,this.inflate_flush(e,t);c=65535&i,i=n=0,this.mode=0!==c?2:0!==this.last?7:0;break;case 2:if(0===s||0===l&&(a===this.end&&0!==this.read&&(l=(a=0)<this.read?this.read-a-1:this.end-a),0===l&&(this.write=a,t=this.inflate_flush(e,t),l=(a=this.write)<this.read?this.read-a-1:this.end-a,a===this.end&&0!==this.read&&(l=(a=0)<this.read?this.read-a-1:this.end-a),0===l)))return this.bitb=i,this.bitk=n,e.avail_in=s,e.total_in+=o-e.next_in_index,e.next_in_index=o,this.write=a,this.inflate_flush(e,t);if(t=0,(r=c)>s&&(r=s),r>l&&(r=l),this.window.set(e.read_buf(o,r),a),o+=r,s-=r,a+=r,l-=r,0!=(c-=r))break;this.mode=0!==this.last?7:0;break;case 3:for(;n<14;){if(0===s)return this.bitb=i,this.bitk=n,e.avail_in=s,e.total_in+=o-e.next_in_index,e.next_in_index=o,this.write=a,this.inflate_flush(e,t);t=0,s--,i|=(255&e.next_in[o++])<<n,n+=8}if(d=r=16383&i,(31&r)>29||(r>>5&31)>29)return this.mode=9,e.msg="too many length or distance symbols",t=-3,this.bitb=i,this.bitk=n,e.avail_in=s,e.total_in+=o-e.next_in_index,e.next_in_index=o,this.write=a,this.inflate_flush(e,t);for(r=258+(31&r)+(r>>5&31),u=0;u<r;u++)f[u]=0;for(i>>>=14,n-=14,h=0,this.mode=4;h<4+(d>>>10);){for(;n<3;){if(0===s)return this.bitb=i,this.bitk=n,e.avail_in=s,e.total_in+=o-e.next_in_index,e.next_in_index=o,this.write=a,this.inflate_flush(e,t);t=0,s--,i|=(255&e.next_in[o++])<<n,n+=8}f[border[h++]]=7&i,i>>>=3,n-=3}for(;h<19;)f[border[h++]]=0;if(p[0]=7,0!==(r=inflate_trees_bits(f,p,y,v,e)))return -3===(t=r)&&(this.mode=9),this.bitb=i,this.bitk=n,e.avail_in=s,e.total_in+=o-e.next_in_index,e.next_in_index=o,this.write=a,this.inflate_flush(e,t);for(h=0,this.mode=5;!(h>=258+(31&(r=d))+(r>>5&31));){let S,E;for(r=p[0];n<r;){if(0===s)return this.bitb=i,this.bitk=n,e.avail_in=s,e.total_in+=o-e.next_in_index,e.next_in_index=o,this.write=a,this.inflate_flush(e,t);t=0,s--,i|=(255&e.next_in[o++])<<n,n+=8}if(r=v[3*(y[0]+(i&inflate_mask[r]))+1],(E=v[3*(y[0]+(i&inflate_mask[r]))+2])<16)i>>>=r,n-=r,f[h++]=E;else{for(u=18===E?7:E-14,S=18===E?11:3;n<r+u;){if(0===s)return this.bitb=i,this.bitk=n,e.avail_in=s,e.total_in+=o-e.next_in_index,e.next_in_index=o,this.write=a,this.inflate_flush(e,t);t=0,s--,i|=(255&e.next_in[o++])<<n,n+=8}if(i>>>=r,n-=r,S+=i&inflate_mask[u],i>>>=u,n-=u,(u=h)+S>258+(31&(r=d))+(r>>5&31)||16===E&&u<1)return this.mode=9,e.msg="invalid bit length repeat",t=-3,this.bitb=i,this.bitk=n,e.avail_in=s,e.total_in+=o-e.next_in_index,e.next_in_index=o,this.write=a,this.inflate_flush(e,t);E=16===E?f[u-1]:0;do f[u++]=E;while(0!=--S);h=u}}y[0]=-1;let k=[9],N=[6],A=[0],P=[0];if(0!==(r=inflate_trees_dynamic(257+(31&r),1+(r>>5&31),f,k,N,A,P,v,e)))return -3===r&&(this.mode=9),t=r,this.bitb=i,this.bitk=n,e.avail_in=s,e.total_in+=o-e.next_in_index,e.next_in_index=o,this.write=a,this.inflate_flush(e,t);m.init(k[0],N[0],v,A[0],v,P[0]),this.mode=6;case 6:if(this.bitb=i,this.bitk=n,e.avail_in=s,e.total_in+=o-e.next_in_index,e.next_in_index=o,this.write=a,1!==(t=m.proc(this,e,t)))return this.inflate_flush(e,t);if(t=0,o=e.next_in_index,s=e.avail_in,i=this.bitb,n=this.bitk,l=(a=this.write)<this.read?this.read-a-1:this.end-a,0===this.last){this.mode=0;break}this.mode=7;case 7:if(this.write=a,t=this.inflate_flush(e,t),l=(a=this.write)<this.read?this.read-a-1:this.end-a,this.read!==this.write)return this.bitb=i,this.bitk=n,e.avail_in=s,e.total_in+=o-e.next_in_index,e.next_in_index=o,this.write=a,this.inflate_flush(e,t);this.mode=8;case 8:return t=1,this.bitb=i,this.bitk=n,e.avail_in=s,e.total_in+=o-e.next_in_index,e.next_in_index=o,this.write=a,this.inflate_flush(e,t);case 9:return t=-3,this.bitb=i,this.bitk=n,e.avail_in=s,e.total_in+=o-e.next_in_index,e.next_in_index=o,this.write=a,this.inflate_flush(e,t);default:return t=-2,this.bitb=i,this.bitk=n,e.avail_in=s,e.total_in+=o-e.next_in_index,e.next_in_index=o,this.write=a,this.inflate_flush(e,t)}}set_dictionary(e,t,r){this.window.set(e.subarray(t,t+r),0),this.read=this.write=r}}class Inflate{constructor(e){this.isGZip=!1,this.method=0,this.gflags=0,this.name="",this.mtime=0,this.xlen=0,this.dictChecksum=0,this.fullChecksum=0,this.inflatedSize=0,this.wbits=0,this.wbits=15,this.blocks=new InfBlocks(1<<this.wbits),this.mode=e?22:0}get isComplete(){let{blocks:e}=this,t=(0===e.mode||8===e.mode)&&0===e.bitb&&0===e.bitk;return 31===this.mode&&t}get fileName(){return this.name}get modDate(){if(0!==this.mtime)return new Date(1e3*this.mtime)}get checksum(){return this.fullChecksum}get fullSize(){return this.inflatedSize}get containerFormat(){return this.isGZip?2:0===this.method?0:1}inflate(e){let t;if(!e||!e.next_in)return -2;let r=-5;for(;;)switch(this.mode){case 0:if(0===e.avail_in)return r;if((t=e.next_in[e.next_in_index])!==GZIP_ID1){this.mode=2;break}this.mode=1,r=0,e.avail_in--,e.total_in++,e.next_in_index++;case 1:if(0===e.avail_in)return r;if(r=0,e.avail_in--,e.total_in++,(t=e.next_in[e.next_in_index++])!==GZIP_ID2){this.mode=32,e.msg="invalid gzip id";break}this.isGZip=!0,this.mode=2;case 2:if(0===e.avail_in)return r;if(r=0,e.avail_in--,e.total_in++,this.method=e.next_in[e.next_in_index++],(15&this.method)!==Z_DEFLATED){this.mode=32,e.msg="unknown compression method";break}if(8+(this.method>>4)>this.wbits){this.mode=32,e.msg="invalid window size";break}this.mode=3;case 3:if(0===e.avail_in)return r;if(r=0,e.avail_in--,e.total_in++,t=255&e.next_in[e.next_in_index++],this.isGZip){this.gflags=t,this.mode=9;break}if(((this.method<<8)+t)%31!=0){this.mode=32,e.msg="incorrect header check";break}if(0==(t&PRESET_DICT)){this.mode=22;break}this.mode=4;case 4:if(0===e.avail_in)return r;r=0,e.avail_in--,e.total_in++,this.dictChecksum=(255&e.next_in[e.next_in_index++])<<24&4278190080,this.mode=5;case 5:if(0===e.avail_in)return r;r=0,e.avail_in--,e.total_in++,this.dictChecksum|=(255&e.next_in[e.next_in_index++])<<16&16711680,this.mode=6;case 6:if(0===e.avail_in)return r;r=0,e.avail_in--,e.total_in++,this.dictChecksum|=(255&e.next_in[e.next_in_index++])<<8&65280,this.mode=7;case 7:return 0===e.avail_in?r:(r=0,e.avail_in--,e.total_in++,this.dictChecksum|=255&e.next_in[e.next_in_index++],this.mode=8,2);case 8:return this.mode=32,e.msg="need dictionary",-2;case 9:case 10:case 11:case 12:if(0===e.avail_in)return r;if(r=0,e.avail_in--,e.total_in++,t=255&e.next_in[e.next_in_index++],this.mtime=this.mtime>>>8|t<<24,12!==this.mode){this.mode++;break}this.mode=13;case 13:case 14:case 20:case 21:if(0===e.avail_in)return r;r=0,e.avail_in--,e.total_in++,e.next_in_index++,14===this.mode?4&this.gflags?this.mode=15:8&this.gflags?this.mode=18:16&this.gflags?this.mode=19:2&this.gflags?this.mode=20:this.mode=22:this.mode++;break;case 15:case 16:if(0===e.avail_in)return r;if(r=0,e.avail_in--,e.total_in++,t=255&e.next_in[e.next_in_index++],this.xlen=this.xlen>>>8|t<<24,15===this.mode)break;this.xlen=this.xlen>>>16;case 17:if(0===e.avail_in)return r;r=0,e.avail_in--,e.total_in++,e.next_in_index++,this.xlen--,0===this.xlen&&(8&this.gflags?this.mode=18:16&this.gflags?this.mode=19:2&this.gflags?this.mode=20:this.mode=22);break;case 18:case 19:if(0===e.avail_in)return r;r=0,e.avail_in--,e.total_in++,0!=(t=255&e.next_in[e.next_in_index++])?18===this.mode&&(this.name+=String.fromCharCode(t)):19!==this.mode&&16&this.gflags?this.mode=19:2&this.gflags?this.mode=20:this.mode=22;break;case 22:if(-3===(r=this.blocks.proc(e,r))){this.mode=32;break}if(1!==r)return r;if(r=0,this.blocks.reset(),0===this.method){this.mode=31;break}this.mode=23;case 23:case 24:case 25:case 26:if(0===e.avail_in)return r;r=0,e.avail_in--,e.total_in++,t=255&e.next_in[e.next_in_index++],this.isGZip?this.fullChecksum=this.fullChecksum>>>8|t<<24:this.fullChecksum=this.fullChecksum<<8|t,this.mode++,27!==this.mode||this.isGZip||(this.mode=31);break;case 27:case 28:case 29:case 30:if(0===e.avail_in)return r;r=0,e.avail_in--,e.total_in++,t=255&e.next_in[e.next_in_index++],this.inflatedSize=this.inflatedSize>>>8|t<<24,this.mode++;break;case 31:return 1;case 32:return -3;default:return -2}}inflateSetDictionary(e){if(8!==this.mode)return -2;let t=u8ArrayFromBufferSource(e);if(!t)return -3;let r=0,i=t.byteLength;return i>=1<<this.wbits&&(i=(1<<this.wbits)-1,r=t.byteLength-i),adler32(t)!==this.dictChecksum?-3:(this.blocks.set_dictionary(t,r,i),this.mode=22,0)}}class Inflater{constructor(e){let t=null==e?void 0:e.raw;if(void 0!==t&&!0!==t&&!1!==t)throw TypeError("options.raw must be undefined or true or false");let r=void 0!==t&&t,i=null==e?void 0:e.dictionary;if(void 0!==i){if(r)throw RangeError("options.dictionary cannot be set when options.raw is true");if(void 0===u8ArrayFromBufferSource(i))throw TypeError("options.dictionary must be undefined or a buffer or a buffer view");this.customDict=i}this.inflate=new Inflate(r),this.z=new ZStream}append(e){let t=u8ArrayFromBufferSource(e);if(!(t instanceof Uint8Array))throw TypeError("data must be an ArrayBuffer or buffer view");if(0===t.length)return[];let{inflate:r,z:i}=this,n=[],o=!1;i.append(t);do{i.next_out_index=0,i.avail_out=OUTPUT_BUFSIZE,0!==i.avail_in||o||(i.next_in_index=0,o=!0);let s=r.inflate(i);if(o&&-5===s){if(0!==i.avail_in)throw Error("inflate error: bad input")}else if(2===s){if(!this.customDict)throw Error("Custom dictionary required for this data");if(0!==r.inflateSetDictionary(this.customDict))throw Error("Custom dictionary is not valid for this data")}else if(0!==s&&1!==s)throw Error("inflate error: "+i.msg);if((o||1===s)&&i.avail_in===t.length)throw Error("inflate error: bad input data");if(i.next_out_index){let a=new Uint8Array(i.next_out.subarray(0,i.next_out_index)),l=2===r.containerFormat;void 0===this.checksum&&(this.checksum=l?0:1),this.checksum=l?crc32(a,this.checksum):adler32(a,this.checksum),n.push(a)}}while(i.avail_in>0||0===i.avail_out);return n}finish(){let e=this.inflate.checksum,t=this.inflate.fullSize,r=this.inflate.isComplete,i=0===e?"unchecked":e===this.checksum?"match":"mismatch",n=0===t?"unchecked":t===this.z.total_out?"match":"mismatch";return{success:r&&"mismatch"!==i&&"mismatch"!==n,complete:r,checksum:i,fileSize:n,fileName:this.inflate.fileName,modDate:this.inflate.modDate}}}let D_CODES=30,BL_CODES=19,LENGTH_CODES=29,LITERALS=256,L_CODES=LITERALS+1+LENGTH_CODES,HEAP_SIZE=2*L_CODES+1,MAX_BL_BITS=7,_dist_code=[0,1,2,3,4,4,5,5,6,6,6,6,7,7,7,7,8,8,8,8,8,8,8,8,9,9,9,9,9,9,9,9,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,10,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,11,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,15,0,0,16,17,18,18,19,19,20,20,20,20,21,21,21,21,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29,29];class Tree{constructor(e,t){this.dyn_tree=e,this.stat_desc=t,this.max_code=0}gen_bitlen(e){var t,r,i,n,o,s,a=this.dyn_tree,l=this.stat_desc.static_tree,u=this.stat_desc.extra_bits,c=this.stat_desc.extra_base,d=this.stat_desc.max_length,h=0;for(n=0;n<=15;n++)e.bl_count[n]=0;for(a[2*e.heap[e.heap_max]+1]=0,t=e.heap_max+1;t<HEAP_SIZE;t++)(n=a[2*a[2*(r=e.heap[t])+1]+1]+1)>d&&(n=d,h++),a[2*r+1]=n,r>this.max_code||(e.bl_count[n]++,o=0,r>=c&&(o=u[r-c]),s=a[2*r],e.opt_len+=s*(n+o),l&&(e.static_len+=s*(l[2*r+1]+o)));if(0!==h){do{for(n=d-1;0===e.bl_count[n];)n--;e.bl_count[n]--,e.bl_count[n+1]+=2,e.bl_count[d]--,h-=2}while(h>0);for(n=d;0!==n;n--)for(r=e.bl_count[n];0!==r;)(i=e.heap[--t])>this.max_code||(a[2*i+1]!=n&&(e.opt_len+=(n-a[2*i+1])*a[2*i],a[2*i+1]=n),r--)}}bi_reverse(e,t){let r=0;do r|=1&e,e>>>=1,r<<=1;while(--t>0);return r>>>1}gen_codes(e,t,r){let i=new Uint16Array(16),n=0;for(let o=1;o<=15;o++)i[o]=n=n+r[o-1]<<1;for(let s=0;s<=t;s++){let a=e[2*s+1];0!==a&&(e[2*s]=this.bi_reverse(i[a]++,a))}}build_tree(e){var t,r,i,n=this.dyn_tree,o=this.stat_desc.static_tree,s=this.stat_desc.elems,a=-1;for(e.heap_len=0,e.heap_max=HEAP_SIZE,t=0;t<s;t++)0!==n[2*t]?(e.heap[++e.heap_len]=a=t,e.depth[t]=0):n[2*t+1]=0;for(;e.heap_len<2;)n[2*(i=e.heap[++e.heap_len]=a<2?++a:0)]=1,e.depth[i]=0,e.opt_len--,o&&(e.static_len-=o[2*i+1]);for(this.max_code=a,t=Math.floor(e.heap_len/2);t>=1;t--)e.pqdownheap(n,t);i=s;do t=e.heap[1],e.heap[1]=e.heap[e.heap_len--],e.pqdownheap(n,1),r=e.heap[1],e.heap[--e.heap_max]=t,e.heap[--e.heap_max]=r,n[2*i]=n[2*t]+n[2*r],e.depth[i]=Math.max(e.depth[t],e.depth[r])+1,n[2*t+1]=n[2*r+1]=i,e.heap[1]=i++,e.pqdownheap(n,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],this.gen_bitlen(e),this.gen_codes(n,this.max_code,e.bl_count)}static d_code(e){return e<256?_dist_code[e]:_dist_code[256+(e>>>7)]}}Tree._length_code=[0,1,2,3,4,5,6,7,8,8,9,9,10,10,11,11,12,12,12,12,13,13,13,13,14,14,14,14,15,15,15,15,16,16,16,16,16,16,16,16,17,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,25,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,26,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,27,28],Tree.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],Tree.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],Tree.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Tree.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Tree.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Tree.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];class StaticTree{constructor(e,t,r,i,n){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=i,this.max_length=n}}StaticTree.static_ltree=new Uint16Array([12,8,140,8,76,8,204,8,44,8,172,8,108,8,236,8,28,8,156,8,92,8,220,8,60,8,188,8,124,8,252,8,2,8,130,8,66,8,194,8,34,8,162,8,98,8,226,8,18,8,146,8,82,8,210,8,50,8,178,8,114,8,242,8,10,8,138,8,74,8,202,8,42,8,170,8,106,8,234,8,26,8,154,8,90,8,218,8,58,8,186,8,122,8,250,8,6,8,134,8,70,8,198,8,38,8,166,8,102,8,230,8,22,8,150,8,86,8,214,8,54,8,182,8,118,8,246,8,14,8,142,8,78,8,206,8,46,8,174,8,110,8,238,8,30,8,158,8,94,8,222,8,62,8,190,8,126,8,254,8,1,8,129,8,65,8,193,8,33,8,161,8,97,8,225,8,17,8,145,8,81,8,209,8,49,8,177,8,113,8,241,8,9,8,137,8,73,8,201,8,41,8,169,8,105,8,233,8,25,8,153,8,89,8,217,8,57,8,185,8,121,8,249,8,5,8,133,8,69,8,197,8,37,8,165,8,101,8,229,8,21,8,149,8,85,8,213,8,53,8,181,8,117,8,245,8,13,8,141,8,77,8,205,8,45,8,173,8,109,8,237,8,29,8,157,8,93,8,221,8,61,8,189,8,125,8,253,8,19,9,275,9,147,9,403,9,83,9,339,9,211,9,467,9,51,9,307,9,179,9,435,9,115,9,371,9,243,9,499,9,11,9,267,9,139,9,395,9,75,9,331,9,203,9,459,9,43,9,299,9,171,9,427,9,107,9,363,9,235,9,491,9,27,9,283,9,155,9,411,9,91,9,347,9,219,9,475,9,59,9,315,9,187,9,443,9,123,9,379,9,251,9,507,9,7,9,263,9,135,9,391,9,71,9,327,9,199,9,455,9,39,9,295,9,167,9,423,9,103,9,359,9,231,9,487,9,23,9,279,9,151,9,407,9,87,9,343,9,215,9,471,9,55,9,311,9,183,9,439,9,119,9,375,9,247,9,503,9,15,9,271,9,143,9,399,9,79,9,335,9,207,9,463,9,47,9,303,9,175,9,431,9,111,9,367,9,239,9,495,9,31,9,287,9,159,9,415,9,95,9,351,9,223,9,479,9,63,9,319,9,191,9,447,9,127,9,383,9,255,9,511,9,0,7,64,7,32,7,96,7,16,7,80,7,48,7,112,7,8,7,72,7,40,7,104,7,24,7,88,7,56,7,120,7,4,7,68,7,36,7,100,7,20,7,84,7,52,7,116,7,3,8,131,8,67,8,195,8,35,8,163,8,99,8,227,8]),StaticTree.static_dtree=new Uint16Array([0,5,16,5,8,5,24,5,4,5,20,5,12,5,28,5,2,5,18,5,10,5,26,5,6,5,22,5,14,5,30,5,1,5,17,5,9,5,25,5,5,5,21,5,13,5,29,5,3,5,19,5,11,5,27,5,7,5,23,5]),StaticTree.static_l_desc=new StaticTree(StaticTree.static_ltree,Tree.extra_lbits,LITERALS+1,L_CODES,15),StaticTree.static_d_desc=new StaticTree(StaticTree.static_dtree,Tree.extra_dbits,0,D_CODES,15),StaticTree.static_bl_desc=new StaticTree(null,Tree.extra_blbits,0,BL_CODES,MAX_BL_BITS);let makeConfig=(e,t,r,i,n)=>({good_length:e,max_lazy:t,nice_length:r,max_chain:i,func:n}),config_table=[makeConfig(0,0,0,0,0),makeConfig(4,4,8,4,1),makeConfig(4,5,16,8,1),makeConfig(4,6,32,32,1),makeConfig(4,4,16,16,2),makeConfig(8,16,32,32,2),makeConfig(8,16,128,128,2),makeConfig(8,32,128,256,2),makeConfig(32,128,258,1024,2),makeConfig(32,258,258,4096,2)];function smaller(e,t,r,i){let n=e[2*t],o=e[2*r];return n<o||n==o&&i[t]<=i[r]}let END_BLOCK=256,REP_3_6=16,REPZ_3_10=17,REPZ_11_138=18,STORED_BLOCK=0,STATIC_TREES=1,DYN_TREES=2,MIN_MATCH=3,MAX_MATCH=258,MIN_LOOKAHEAD=MAX_MATCH+MIN_MATCH+1,hash_bits=15,hash_size=1<<hash_bits,hash_mask=hash_size-1,hash_shift=Math.floor((hash_bits+MIN_MATCH-1)/MIN_MATCH),lit_bufsize=16384,pending_buf_size=4*lit_bufsize,d_buf=Math.floor(lit_bufsize/2),l_buf=3*lit_bufsize,window_size=65536;class Deflate{constructor(e,t=6,r=0){if(this.status=1,this.pending_buf=new Uint8Array(pending_buf_size),this.pending=0,this.pending_out=0,this.last_flush=0,this.window=new Uint8Array(window_size),this.prev=new Uint16Array(32768),this.head=new Uint16Array(hash_size),this.ins_h=0,this.block_start=0,this.match_length=MIN_MATCH-1,this.match_available=!1,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=MIN_MATCH-1,this.dyn_ltree=new Uint16Array(2*HEAP_SIZE),this.dyn_dtree=new Uint16Array(2*(2*D_CODES+1)),this.bl_tree=new Uint16Array(2*(2*BL_CODES+1)),this.l_desc=new Tree(this.dyn_ltree,StaticTree.static_l_desc),this.d_desc=new Tree(this.dyn_dtree,StaticTree.static_d_desc),this.bl_desc=new Tree(this.bl_tree,StaticTree.static_bl_desc),this.depth=new Uint16Array(2*L_CODES+1),this.last_lit=0,this.matches=0,this.opt_len=0,this.static_len=0,this.last_eob_len=8,this.bi_buf=0,this.bi_valid=0,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(2*L_CODES+1),this.heap_len=0,this.heap_max=HEAP_SIZE,t<0||t>9||r<0||r>2)throw RangeError("level or strategy is out of range");this.strm=e,this.level=t,this.strategy=r,e.msg="",e.total_in=e.total_out=0,this.init_block();for(let i=0;i<hash_size;++i)this.head[i]=0;this.max_lazy_match=config_table[t].max_lazy,this.good_match=config_table[t].good_length,this.nice_match=config_table[t].nice_length,this.max_chain_length=config_table[t].max_chain}init_block(){for(let e=0;e<L_CODES;e++)this.dyn_ltree[2*e]=0;for(let t=0;t<D_CODES;t++)this.dyn_dtree[2*t]=0;for(let r=0;r<BL_CODES;r++)this.bl_tree[2*r]=0;this.dyn_ltree[2*END_BLOCK]=1,this.opt_len=this.static_len=0,this.last_lit=this.matches=0}pqdownheap(e,t){let r=this.heap,i=r[t],n=t<<1;for(;n<=this.heap_len&&(n<this.heap_len&&smaller(e,r[n+1],r[n],this.depth)&&n++,!smaller(e,i,r[n],this.depth));)r[t]=r[n],t=n,n<<=1;r[t]=i}scan_tree(e,t){var r,i=-1,n=e[1],o=0,s=7,a=4;0===n&&(s=138,a=3),e[2*(t+1)+1]=65535;for(let l=0;l<=t;l++)r=n,n=e[2*(l+1)+1],++o<s&&r==n||(o<a?this.bl_tree[2*r]+=o:0!==r?(r!=i&&this.bl_tree[2*r]++,this.bl_tree[2*REP_3_6]++):o<=10?this.bl_tree[2*REPZ_3_10]++:this.bl_tree[2*REPZ_11_138]++,o=0,i=r,0===n?(s=138,a=3):r==n?(s=6,a=3):(s=7,a=4))}build_bl_tree(){let e;for(this.scan_tree(this.dyn_ltree,this.l_desc.max_code),this.scan_tree(this.dyn_dtree,this.d_desc.max_code),this.bl_desc.build_tree(this),e=BL_CODES-1;e>=3&&0===this.bl_tree[2*Tree.bl_order[e]+1];e--);return this.opt_len+=3*(e+1)+5+5+4,e}put_short(e){this.pending_buf[this.pending++]=255&e,this.pending_buf[this.pending++]=e>>>8&255}send_bits(e,t){if(this.bi_valid>16-t){this.bi_buf|=e<<this.bi_valid&65535;let r=this.pending;this.pending_buf[r]=this.bi_buf,this.pending_buf[r+1]=this.bi_buf>>>8,this.pending=r+2,this.bi_buf=e>>>16-this.bi_valid,this.bi_valid+=t-16}else this.bi_buf|=e<<this.bi_valid&65535,this.bi_valid+=t}send_code(e,t){let r=2*e;this.send_bits(65535&t[r],65535&t[r+1])}send_tree(e,t){var r,i=-1,n=e[1],o=0,s=7,a=4;0===n&&(s=138,a=3);for(let l=0;l<=t;l++)if(r=n,n=e[2*(l+1)+1],!(++o<s&&r==n)){if(o<a)do this.send_code(r,this.bl_tree);while(0!=--o);else 0!==r?(r!=i&&(this.send_code(r,this.bl_tree),o--),this.send_code(REP_3_6,this.bl_tree),this.send_bits(o-3,2)):o<=10?(this.send_code(REPZ_3_10,this.bl_tree),this.send_bits(o-3,3)):(this.send_code(REPZ_11_138,this.bl_tree),this.send_bits(o-11,7));o=0,i=r,0===n?(s=138,a=3):r==n?(s=6,a=3):(s=7,a=4)}}send_all_trees(e,t,r){this.send_bits(e-257,5),this.send_bits(t-1,5),this.send_bits(r-4,4);for(let i=0;i<r;i++)this.send_bits(this.bl_tree[2*Tree.bl_order[i]+1],3);this.send_tree(this.dyn_ltree,e-1),this.send_tree(this.dyn_dtree,t-1)}bi_flush(){16===this.bi_valid?(this.put_short(this.bi_buf),this.bi_buf=0,this.bi_valid=0):this.bi_valid>=8&&(this.pending_buf[this.pending++]=this.bi_buf,this.bi_buf>>>=8,this.bi_valid-=8)}_tr_align(){this.send_bits(STATIC_TREES<<1,3),this.send_code(END_BLOCK,StaticTree.static_ltree),this.bi_flush(),1+this.last_eob_len+10-this.bi_valid<9&&(this.send_bits(STATIC_TREES<<1,3),this.send_code(END_BLOCK,StaticTree.static_ltree),this.bi_flush()),this.last_eob_len=7}_tr_tally(e,t){if(this.pending_buf[d_buf+2*this.last_lit]=e>>>8&255,this.pending_buf[d_buf+2*this.last_lit+1]=255&e,this.pending_buf[l_buf+this.last_lit]=255&t,this.last_lit++,0===e?this.dyn_ltree[2*t]++:(this.matches++,e--,this.dyn_ltree[2*(Tree._length_code[t]+LITERALS+1)]++,this.dyn_dtree[2*Tree.d_code(e)]++),0==(8191&this.last_lit)&&this.level>2){let r=8*this.last_lit,i=this.strstart-this.block_start;for(let n=0;n<D_CODES;n++)r+=this.dyn_dtree[2*n]*(5+Tree.extra_dbits[n]);if(r>>>=3,this.matches<Math.floor(this.last_lit/2)&&r<Math.floor(i/2))return!0}return this.last_lit===lit_bufsize-1}compress_block(e,t){let r=0;if(0!==this.last_lit)do{let i=this.pending_buf[d_buf+2*r]<<8&65280|255&this.pending_buf[d_buf+2*r+1],n=255&this.pending_buf[l_buf+r];if(r++,0===i)this.send_code(n,e);else{let o=Tree._length_code[n];this.send_code(o+LITERALS+1,e);let s=Tree.extra_lbits[o];0!==s&&(n-=Tree.base_length[o],this.send_bits(n,s)),i--,o=Tree.d_code(i),this.send_code(o,t),0!==(s=Tree.extra_dbits[o])&&(i-=Tree.base_dist[o],this.send_bits(i,s))}}while(r<this.last_lit);this.send_code(END_BLOCK,e),this.last_eob_len=e[2*END_BLOCK+1]}bi_windup(){this.bi_valid>8?this.put_short(this.bi_buf):this.bi_valid>0&&(this.pending_buf[this.pending++]=this.bi_buf),this.bi_buf=0,this.bi_valid=0}copy_block(e,t,r){this.bi_windup(),this.last_eob_len=8,r&&(this.put_short(t),this.put_short(~t)),this.pending_buf.set(this.window.subarray(e,e+t),this.pending),this.pending+=t}_tr_stored_block(e,t,r){this.send_bits((STORED_BLOCK<<1)+(r?1:0),3),this.copy_block(e,t,!0)}_tr_flush_block(e,t,r){let i,n,o=0;this.level>0?(this.l_desc.build_tree(this),this.d_desc.build_tree(this),o=this.build_bl_tree(),i=this.opt_len+3+7>>>3,(n=this.static_len+3+7>>>3)<=i&&(i=n)):i=n=t+5,t+4<=i&&-1!==e?this._tr_stored_block(e,t,r):n==i?(this.send_bits((STATIC_TREES<<1)+(r?1:0),3),this.compress_block(StaticTree.static_ltree,StaticTree.static_dtree)):(this.send_bits((DYN_TREES<<1)+(r?1:0),3),this.send_all_trees(this.l_desc.max_code+1,this.d_desc.max_code+1,o+1),this.compress_block(this.dyn_ltree,this.dyn_dtree)),this.init_block(),r&&this.bi_windup()}flush_block_only(e){this._tr_flush_block(this.block_start>=0?this.block_start:-1,this.strstart-this.block_start,e),this.block_start=this.strstart,this.strm.flush_pending(this)}fill_window(){do{let e=window_size-this.lookahead-this.strstart;if(0===e&&0===this.strstart&&0===this.lookahead)e=32768;else if(-1===e)e--;else if(this.strstart>=65536-MIN_LOOKAHEAD){this.window.set(this.window.subarray(32768,65536),0),this.match_start-=32768,this.strstart-=32768,this.block_start-=32768;let t=hash_size,r=t;do{let i=65535&this.head[--r];this.head[r]=i>=32768?i-32768:0}while(0!=--t);r=t=32768;do{let n=65535&this.prev[--r];this.prev[r]=n>=32768?n-32768:0}while(0!=--t);e+=32768}if(0===this.strm.avail_in)return;let o=this.strm.read_into_buf(this.window,this.strstart+this.lookahead,e);this.lookahead+=o,this.lookahead>=MIN_MATCH&&(this.ins_h=255&this.window[this.strstart],this.ins_h=(this.ins_h<<hash_shift^255&this.window[this.strstart+1])&hash_mask)}while(this.lookahead<MIN_LOOKAHEAD&&0!==this.strm.avail_in)}deflate_stored(e){let t=65535;for(65535>pending_buf_size-5&&(t=pending_buf_size-5);;){if(this.lookahead<=1){if(this.fill_window(),0===this.lookahead&&0===e)return 0;if(0===this.lookahead)break}this.strstart+=this.lookahead,this.lookahead=0;let r=this.block_start+t;if((0===this.strstart||this.strstart>=r)&&(this.lookahead=this.strstart-r,this.strstart=r,this.flush_block_only(!1),0===this.strm.avail_out)||this.strstart-this.block_start>=32768-MIN_LOOKAHEAD&&(this.flush_block_only(!1),0===this.strm.avail_out))return 0}return this.flush_block_only(4===e),0===this.strm.avail_out?4===e?2:0:4===e?3:1}longest_match(e){let t=this.max_chain_length,r=this.strstart,i=this.prev_length,n=this.strstart>32768-MIN_LOOKAHEAD?this.strstart-(32768-MIN_LOOKAHEAD):0,o=this.nice_match,s=this.window,a=this.strstart+MAX_MATCH,l=s[r+i-1],u=s[r+i],c=s[r],d=s[r+1];this.prev_length>=this.good_match&&(t>>=2),o>this.lookahead&&(o=this.lookahead);do{let h=e,f=!0;for(;;){if(s[(h=e)+i]!==u||s[h+i-1]!==l){if((e=this.prev[32767&e])>n&&0!=--t)continue;f=!1}break}if(!f)break;if(s[h]!==c||s[h+1]!==d)continue;r+=2,h+=2;do{let p=(s[r]<<24|s[r+1]<<16|s[r+2]<<8|s[r+3])^(s[h]<<24|s[h+1]<<16|s[h+2]<<8|s[h+3]);if(p){let y=Math.clz32(p)>>3;r+=y,h+=y;break}r+=4,h+=4}while(r<a);r>a&&(r=a);let m=MAX_MATCH-(a-r);if(r=a-MAX_MATCH,m>i){if(this.match_start=e,i=m,m>=o)break;l=s[r+i-1],u=s[r+i]}}while((e=this.prev[32767&e])>n&&0!=--t);return i<=this.lookahead?i:this.lookahead}deflate_fast(e){let t,r=0;for(;;){if(this.lookahead<MIN_LOOKAHEAD){if(this.fill_window(),this.lookahead<MIN_LOOKAHEAD&&0===e)return 0;if(0===this.lookahead)break}if(this.lookahead>=MIN_MATCH&&(this.ins_h=(this.ins_h<<hash_shift^255&this.window[this.strstart+(MIN_MATCH-1)])&hash_mask,r=65535&this.head[this.ins_h],this.prev[32767&this.strstart]=this.head[this.ins_h],this.head[this.ins_h]=this.strstart),0!==r&&(this.strstart-r&65535)<=32768-MIN_LOOKAHEAD&&2!==this.strategy&&(this.match_length=this.longest_match(r)),this.match_length>=MIN_MATCH){if(t=this._tr_tally(this.strstart-this.match_start,this.match_length-MIN_MATCH),this.lookahead-=this.match_length,this.match_length<=this.max_lazy_match&&this.lookahead>=MIN_MATCH){this.match_length--;do this.strstart++,this.ins_h=(this.ins_h<<hash_shift^255&this.window[this.strstart+(MIN_MATCH-1)])&hash_mask,r=65535&this.head[this.ins_h],this.prev[32767&this.strstart]=this.head[this.ins_h],this.head[this.ins_h]=this.strstart;while(0!=--this.match_length);this.strstart++}else this.strstart+=this.match_length,this.match_length=0,this.ins_h=255&this.window[this.strstart],this.ins_h=(this.ins_h<<hash_shift^255&this.window[this.strstart+1])&hash_mask}else t=this._tr_tally(0,255&this.window[this.strstart]),this.lookahead--,this.strstart++;if(t&&(this.flush_block_only(!1),0===this.strm.avail_out))return 0}return this.flush_block_only(4===e),0===this.strm.avail_out?4===e?2:0:4===e?3:1}deflate_slow(e){let t,r,i,n=0;for(;;){if(this.lookahead<MIN_LOOKAHEAD){if(this.fill_window(),this.lookahead<MIN_LOOKAHEAD&&0===e)return 0;if(0===this.lookahead)break}if(this.lookahead>=MIN_MATCH&&(this.ins_h=(this.ins_h<<hash_shift^255&this.window[this.strstart+(MIN_MATCH-1)])&hash_mask,n=65535&this.head[this.ins_h],this.prev[32767&this.strstart]=this.head[this.ins_h],this.head[this.ins_h]=this.strstart),this.prev_length=this.match_length,i=this.match_start,this.match_length=MIN_MATCH-1,0!==n&&this.prev_length<this.max_lazy_match&&(this.strstart-n&65535)<=32768-MIN_LOOKAHEAD&&(2!==this.strategy&&(this.match_length=this.longest_match(n)),this.match_length<=5&&(1===this.strategy||this.match_length===MIN_MATCH&&this.strstart-this.match_start>4096)&&(this.match_length=MIN_MATCH-1)),this.prev_length>=MIN_MATCH&&this.match_length<=this.prev_length){r=this.strstart+this.lookahead-MIN_MATCH,t=this._tr_tally(this.strstart-1-i,this.prev_length-MIN_MATCH),this.lookahead-=this.prev_length-1,this.prev_length-=2;do++this.strstart<=r&&(this.ins_h=(this.ins_h<<hash_shift^255&this.window[this.strstart+(MIN_MATCH-1)])&hash_mask,n=65535&this.head[this.ins_h],this.prev[32767&this.strstart]=this.head[this.ins_h],this.head[this.ins_h]=this.strstart);while(0!=--this.prev_length);if(this.match_available=!1,this.match_length=MIN_MATCH-1,this.strstart++,t&&(this.flush_block_only(!1),0===this.strm.avail_out))return 0}else if(this.match_available){if((t=this._tr_tally(0,255&this.window[this.strstart-1]))&&this.flush_block_only(!1),this.strstart++,this.lookahead--,0===this.strm.avail_out)return 0}else this.match_available=!0,this.strstart++,this.lookahead--}return this.match_available&&(t=this._tr_tally(0,255&this.window[this.strstart-1]),this.match_available=!1),this.flush_block_only(4===e),0===this.strm.avail_out?4===e?2:0:4===e?3:1}deflateSetDictionary(e){let t=e.byteLength,r,i=t,n=0;if(!e||1!==this.status)return -2;if(i<MIN_MATCH)return 0;for(i>32768-MIN_LOOKAHEAD&&(n=t-(i=32768-MIN_LOOKAHEAD)),this.window.set(e.subarray(n,n+i),0),this.strstart=i,this.block_start=i,this.ins_h=255&this.window[0],this.ins_h=(this.ins_h<<hash_shift^255&this.window[1])&hash_mask,r=0;r<=i-MIN_MATCH;r++)this.ins_h=(this.ins_h<<hash_shift^255&this.window[r+(MIN_MATCH-1)])&hash_mask,this.prev[32767&r]=this.head[this.ins_h],this.head[this.ins_h]=r;return 0}deflate(e){if(e>4||e<0)return -2;let{strm:t}=this;if(!t.next_out||!t.next_in&&0!==t.avail_in||3===this.status&&4!=e)return -2;if(0===t.avail_out)return -5;let r=this.last_flush;if(this.last_flush=e,1===this.status&&(this.status=2),0!==this.pending){if(t.flush_pending(this),0===t.avail_out)return this.last_flush=-1,0}else if(0===t.avail_in&&e<=r&&4!==e)return -5;if(3===this.status&&0!==t.avail_in)return -5;if(0!==t.avail_in||0!==this.lookahead||0!==e&&3!==this.status){let i;switch(config_table[this.level].func){case 0:i=this.deflate_stored(e);break;case 1:i=this.deflate_fast(e);break;default:i=this.deflate_slow(e)}if(2!=i&&3!==i||(this.status=3),0===i||2===i)return 0===t.avail_out&&(this.last_flush=-1),0;if(1===i){if(1===e)this._tr_align();else if(this._tr_stored_block(0,0,!1),3===e)for(let n=0;n<hash_size;n++)this.head[n]=0;if(t.flush_pending(this),0===t.avail_out)return this.last_flush=-1,0}}return 4!==e?0:1}}class Deflater{constructor(e){var t,r;this.checksum=1,this.origSize=0,this.dictChecksum=0;let i=null!==(t=null==e?void 0:e.level)&&void 0!==t?t:6,n=null!==(r=null==e?void 0:e.format)&&void 0!==r?r:"deflate",o=null==e?void 0:e.dictionary,s=null==e?void 0:e.fileName;if("number"!=typeof i||i<1||i>9)throw RangeError("level must be between 1 and 9, inclusive");if("gzip"!==n&&"raw"!==n&&"deflate"!==n)throw RangeError("container must be one of `raw`, `deflate`, `gzip`");if(void 0!==s&&"string"!=typeof s)throw TypeError("fileName must be a string");if(this.fileName=s||"",this.z=new ZStream,this.deflate=new Deflate(this.z,i,0),o){if("deflate"!==n)throw TypeError("Can only provide a dictionary for `deflate` containers.");let a=u8ArrayFromBufferSource(o);if(!a)throw TypeError("dictionary must be an ArrayBuffer or buffer view");this.dictChecksum=adler32(a),this.deflate.deflateSetDictionary(a)}this.format=n,"gzip"===this.format&&(this.checksum=0)}buildZlibHeader(){let e=2,t=1;0!==this.dictChecksum&&(e+=4,t=PRESET_DICT);let r=new ArrayBuffer(e),i=new DataView(r);return i.setUint16(0,30720|t),0!==this.dictChecksum&&i.setUint32(2,this.dictChecksum),new Uint8Array(r)}buildGZipHeader(){let e=0,t=[];this.fileName.length>0&&(e|=8,(t=Array.from(this.fileName).map(e=>{let t=e.charCodeAt(0);return t>255?95:t})).push(0));let r=new ArrayBuffer(10+t.length),i=new DataView(r);i.setUint16(0,GZIP_ID1<<8|GZIP_ID2),i.setUint16(2,Z_DEFLATED<<8|e);let n=Math.floor(Date.now()/1e3);i.setUint32(4,n,!0),i.setUint16(8,255);let o=new Uint8Array(r);return t.length&&o.set(t,10),o}buildTrailer(){let e="gzip"===this.format,t=new ArrayBuffer(e?8:4),r=new DataView(t);return r.setUint32(0,this.checksum,e),e&&r.setUint32(4,this.origSize,!0),new Uint8Array(t)}append(e){let t=[],r=u8ArrayFromBufferSource(e);if(!(r instanceof Uint8Array))throw TypeError("data must be an ArrayBuffer or buffer view");if(!r.length)return t;"gzip"!==this.format?this.checksum=adler32(r,this.checksum):this.checksum=crc32(r,this.checksum),this.origSize+=r.length;let{deflate:i,z:n}=this;n.next_in_index=0,n.next_in=r,n.avail_in=r.length,1===i.status&&("deflate"===this.format?t.push(this.buildZlibHeader()):"gzip"===this.format&&t.push(this.buildGZipHeader()));do{if(n.next_out_index=0,n.avail_out=OUTPUT_BUFSIZE,0!==i.deflate(0))throw Error("deflating: "+n.msg);n.next_out_index&&t.push(new Uint8Array(n.next_out.subarray(0,n.next_out_index)))}while(n.avail_in>0||0===n.avail_out);return t}finish(){let e=[],{deflate:t,z:r}=this;if(1===t.status)throw Error("Cannot call finish before at least 1 call to append");do{r.next_out_index=0,r.avail_out=OUTPUT_BUFSIZE;let i=t.deflate(4);if(1!==i&&0!==i)throw Error("deflating: "+r.msg);OUTPUT_BUFSIZE-r.avail_out>0&&e.push(new Uint8Array(r.next_out.subarray(0,r.next_out_index)))}while(r.avail_in>0||0===r.avail_out);return"raw"!==this.format&&e.push(this.buildTrailer()),e}}let decContext=Symbol("decContext"),decTransform$1=Symbol("decTransform");class DecompressionTransformer{constructor(e){this.inflater_=e}transform(e,t){if(!(e instanceof ArrayBuffer||ArrayBuffer.isView(e)))throw TypeError("Input data must be a BufferSource");let r=this.inflater_.append(e);for(let i of r)t.enqueue(i)}flush(e){let t=this.inflater_.finish();if(!t.success){if(!t.complete)throw Error("Unexpected EOF during decompression");if("mismatch"===t.checksum)throw Error("Data integrity check failed");if("mismatch"===t.fileSize)throw Error("Data size check failed");throw Error("Decompression error")}}}class DecompressionStream{constructor(e){if("deflate"!==e&&"gzip"!==e)throw TypeError("format must be one of `deflate`, `gzip`");this[decContext]=new Inflater,this[decTransform$1]=new TransformStream(new DecompressionTransformer(this[decContext]))}get readable(){return this[decTransform$1].readable}get writable(){return this[decTransform$1].writable}}let comContext=Symbol("comContext"),comTransform=Symbol("comTransform");class CompressionTransformer{constructor(e){this.deflater_=e}transform(e,t){if(!(e instanceof ArrayBuffer||ArrayBuffer.isView(e)))throw TypeError("Input data must be a BufferSource");let r=this.deflater_.append(e);for(let i of r)t.enqueue(i)}flush(e){let t=this.deflater_.finish();for(let r of t)e.enqueue(r)}}class CompressionStream{constructor(e){if("deflate"!==e&&"gzip"!==e)throw TypeError("format must be one of `deflate`, `gzip`");this[comContext]=new Deflater({format:e}),this[comTransform]=new TransformStream(new CompressionTransformer(this[comContext]))}get readable(){return this[comTransform].readable}get writable(){return this[comTransform].writable}}function getGlobal(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==__nested_webpack_require_24259__.g?__nested_webpack_require_24259__.g:void 0}function getGlobalValue(e){let t;let r=getGlobal();return void 0!==r&&(t=r[e]),t}function getGlobalOrContextualValue(name){let value;let global=getGlobal();if(void 0!==global&&(value=global[name]),void 0===value)try{value=eval(name)}catch(e){}return value}function hasCompleteStreamsImplementation(){let e=getGlobalValue("ReadableStream"),t=getGlobalValue("WritableStream"),r=getGlobalValue("TransformStream"),i=getGlobalValue("ByteLengthQueuingStrategy"),n=getGlobalValue("CountQueuingStrategy"),o=e=>"function"==typeof e;if(!(o(e)&&o(t)&&o(r)&&o(i)&&o(n)))return!1;try{let s=new e({type:"bytes"}).getReader({mode:"byob"});if(null==s||"object"!=typeof s)return!1}catch(a){return!1}return!0}function installStardazedStreams(){let e=getGlobal();if(!e||hasCompleteStreamsImplementation())return!1;let t=getGlobalOrContextualValue("fetch"),r=getGlobalOrContextualValue("Response"),i=getGlobalValue("ReadableStream");if(t&&r){let n=createAdaptedFetch(t,r,i,SDReadableStream,readableStreamTee),o=createAdaptedResponse(r,i,SDReadableStream,readableStreamTee);e.fetch=n,e.Response=o}return e.ReadableStream=SDReadableStream,e.WritableStream=WritableStream,e.TransformStream=TransformStream$1,e.ByteLengthQueuingStrategy=ByteLengthQueuingStrategy,e.CountQueuingStrategy=CountQueuingStrategy,!0}function installEncodingStreams(e){let t=getGlobal();if(!t)return;let r=getGlobalValue("TextDecoderStream");(e||"function"!=typeof r)&&(t.TextDecoderStream=TextDecoderStream);let i=getGlobalValue("TextEncoderStream");(e||"function"!=typeof i)&&(t.TextEncoderStream=TextEncoderStream)}function installCompressionStreams(e){let t=getGlobal();if(!t)return;let r=getGlobalValue("CompressionStream");(e||"function"!=typeof r)&&(t.CompressionStream=CompressionStream);let i=getGlobalValue("DecompressionStream");(e||"function"!=typeof i)&&(t.DecompressionStream=DecompressionStream)}let overwritten=installStardazedStreams();installEncodingStreams(overwritten),installCompressionStreams(overwritten)})()},930:(e,t,r)=>{"use strict";e.exports=r(3681)},3681:(e,t,r)=>{"use strict";var i=t;function n(){i.util._configure(),i.Writer._configure(i.BufferWriter),i.Reader._configure(i.BufferReader)}i.build="minimal",i.Writer=r(7768),i.BufferWriter=r(3676),i.Reader=r(5109),i.BufferReader=r(5477),i.util=r(1429),i.rpc=r(5988),i.roots=r(4508),i.configure=n,n()},5109:(e,t,r)=>{"use strict";e.exports=l;var i,n=r(1429),o=n.LongBits,s=n.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var u,c="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},d=function(){return n.Buffer?function(e){return(l.create=function(e){return n.Buffer.isBuffer(e)?new i(e):c(e)})(e)}:c};function h(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function f(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new o(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}l.create=d(),l.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,l.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|f(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},l.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do if(this.pos>=this.len)throw a(this);while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){i=e,l.create=d(),i._configure();var t=n.Long?"toLong":"toNumber";n.merge(l.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},5477:(e,t,r)=>{"use strict";e.exports=o;var i=r(5109);(o.prototype=Object.create(i.prototype)).constructor=o;var n=r(1429);function o(e){i.call(this,e)}o._configure=function(){n.Buffer&&(o.prototype._slice=n.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},4508:e=>{"use strict";e.exports={}},5988:(e,t,r)=>{"use strict";t.Service=r(1365)},1365:(e,t,r)=>{"use strict";e.exports=n;var i=r(1429);function n(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(n.prototype=Object.create(i.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,r,n,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return i.asPromise(e,a,t,r,n,o);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(e,r){if(e)return a.emit("error",e,t),s(e);if(null!==r){if(!(r instanceof n))try{r=n[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(i){return a.emit("error",i,t),s(i)}return a.emit("data",r,t),s(null,r)}a.end(!0)})}catch(l){return a.emit("error",l,t),void setTimeout(function(){s(l)},0)}else setTimeout(function(){s(Error("already ended"))},0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},9340:(e,t,r)=>{"use strict";e.exports=n;var i=r(1429);function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=n.zero=new n(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var r=e>>>0,i=(e-r)/4294967296>>>0;return t&&(i=~i>>>0,r=~r>>>0,++r>4294967295&&(r=0,++i>4294967295&&(i=0))),new n(r,i)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(i.isString(e)){if(!i.Long)return n.fromNumber(parseInt(e,10));e=i.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):o},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return i.Long?new i.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;n.fromHash=function(e){return e===s?o:new n((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},1429:function(e,t,r){"use strict";var i=t;function n(e,t,r){for(var i=Object.keys(t),n=0;n<i.length;++n)void 0!==e[i[n]]&&r||(e[i[n]]=t[i[n]]);return e}function o(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),r&&n(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:()=>e,set:void 0,enumerable:!1,configurable:!0},toString:{value(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}i.asPromise=r(4537),i.base64=r(7419),i.EventEmitter=r(9211),i.float=r(945),i.inquire=r(7199),i.utf8=r(4997),i.pool=r(6662),i.LongBits=r(9340),i.isNode=Boolean(void 0!==r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),i.global=i.isNode&&r.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},i.isString=function(e){return"string"==typeof e||e instanceof String},i.isObject=function(e){return e&&"object"==typeof e},i.isset=i.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},i.Buffer=function(){try{var e=i.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(e){return"number"==typeof e?i.Buffer?i._Buffer_allocUnsafe(e):new i.Array(e):i.Buffer?i._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},i.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,i.Long=i.global.dcodeIO&&i.global.dcodeIO.Long||i.global.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(e){return e?i.LongBits.from(e).toHash():i.LongBits.zeroHash},i.longFromHash=function(e,t){var r=i.LongBits.fromHash(e);return i.Long?i.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},i.merge=n,i.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},i.newError=o,i.ProtocolError=o("ProtocolError"),i.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},i.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var e=i.Buffer;e?(i._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},i._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):i._Buffer_from=i._Buffer_allocUnsafe=null}},7768:(e,t,r)=>{"use strict";e.exports=d;var i,n=r(1429),o=n.LongBits,s=n.base64,a=n.utf8;function l(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function c(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(u,0,0),this.tail=this.head,this.states=null}var h=function(){return n.Buffer?function(){return(d.create=function(){return new i})()}:function(){return new d}};function f(e,t,r){t[r]=255&e}function p(e,t){this.len=e,this.next=void 0,this.val=t}function y(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function m(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=h(),d.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(d.alloc=n.pool(d.alloc,n.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new l(e,t,r),this.len+=t,this},p.prototype=Object.create(l.prototype),p.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new p((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(y,10,o.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=o.from(e);return this._push(y,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(y,t.length(),t)},d.prototype.bool=function(e){return this._push(f,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=o.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var v=n.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var i=0;i<e.length;++i)t[r+i]=e[i]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(n.isString(e)){var r=d.alloc(t=s.length(e));s.decode(e,r,0),e=r}return this.uint32(t)._push(v,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(f,1,0)},d.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new l(u,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(u,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){i=e,d.create=h(),i._configure()}},3676:(e,t,r)=>{"use strict";e.exports=o;var i=r(7768);(o.prototype=Object.create(i.prototype)).constructor=o;var n=r(1429);function o(){i.call(this)}function s(e,t,r){e.length<40?n.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}o._configure=function(){o.alloc=n._Buffer_allocUnsafe,o.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var i=0;i<e.length;)t[r++]=e[i++]}},o.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},1796:(e,t,r)=>{"use strict";r.r(t),r.d(t,{authn:()=>c,ciphertext:()=>d,composite:()=>p,contact:()=>m,content:()=>f,fetcher:()=>s,invitation:()=>v,keystore:()=>g,message:()=>h,messageApi:()=>a,privateKey:()=>y,publicKey:()=>u,signature:()=>l});var i,n,o,s={};r.r(s),r.d(s,{b64Decode:()=>N,b64Encode:()=>E,fetchReq:()=>P,fetchStreamingRequest:()=>x,renderURLSearchParams:()=>R,replacer:()=>A});var a={};r.r(a),r.d(a,{MessageApi:()=>B,SortDirection:()=>i});var l={};r.r(l),r.d(l,{Signature:()=>eu,Signature_ECDSACompact:()=>ed,Signature_WalletECDSACompact:()=>ef,protobufPackage:()=>el});var u={};r.r(u),r.d(u,{PublicKey:()=>eP,PublicKeyBundle:()=>eT,PublicKey_Secp256k1Uncompressed:()=>eO,SignedPublicKey:()=>ek,SignedPublicKeyBundle:()=>eN,UnsignedPublicKey:()=>ew,UnsignedPublicKey_Secp256k1Uncompressed:()=>eS,protobufPackage:()=>eg});var c={};r.r(c),r.d(c,{AuthData:()=>ej,Token:()=>eK,protobufPackage:()=>eM});var d={};r.r(d),r.d(d,{Ciphertext:()=>eV,Ciphertext_Aes256gcmHkdfsha256:()=>eG,protobufPackage:()=>eq});var h={};r.r(h),r.d(h,{Message:()=>e8,MessageHeaderV1:()=>eQ,MessageHeaderV2:()=>e3,MessageV1:()=>e1,MessageV2:()=>e5,protobufPackage:()=>eX});var f={};r.r(f),r.d(f,{Compression:()=>n,ContentTypeId:()=>tn,EncodedContent:()=>ts,EncodedContent_ParametersEntry:()=>ta,SignedContent:()=>tu,compressionFromJSON:()=>tr,compressionToJSON:()=>ti,protobufPackage:()=>tt});var p={};r.r(p),r.d(p,{Composite:()=>ty,Composite_Part:()=>tm,protobufPackage:()=>tp});var y={};r.r(y),r.d(y,{EncryptedPrivateKeyBundle:()=>tB,EncryptedPrivateKeyBundleV1:()=>tR,PrivateKey:()=>tN,PrivateKeyBundle:()=>tO,PrivateKeyBundleV1:()=>tx,PrivateKeyBundleV2:()=>tE,PrivateKey_Secp256k1:()=>tP,SignedPrivateKey:()=>tw,SignedPrivateKey_Secp256k1:()=>tS,protobufPackage:()=>tg});var m={};r.r(m),r.d(m,{ContactBundle:()=>tL,ContactBundleV1:()=>tD,ContactBundleV2:()=>tj,protobufPackage:()=>tK});var v={};r.r(v),r.d(v,{InvitationV1:()=>tq,InvitationV1_Aes256gcmHkdfsha256:()=>tz,InvitationV1_Context:()=>tG,InvitationV1_Context_MetadataEntry:()=>tH,SealedInvitation:()=>tY,SealedInvitationHeaderV1:()=>tZ,SealedInvitationV1:()=>tX,protobufPackage:()=>tF});var g={};r.r(g),r.d(g,{ConversationReference:()=>t7,CreateInviteRequest:()=>rb,CreateInviteResponse:()=>r_,DecryptResponse:()=>rr,DecryptResponse_Response:()=>ri,DecryptResponse_Response_Success:()=>ro,DecryptV1Request:()=>t9,DecryptV1Request_Request:()=>rt,DecryptV2Request:()=>rs,DecryptV2Request_Request:()=>rl,EncryptResponse:()=>rh,EncryptResponse_Response:()=>rf,EncryptResponse_Response_Success:()=>rp,EncryptV1Request:()=>ru,EncryptV1Request_Request:()=>rd,EncryptV2Request:()=>ry,EncryptV2Request_Request:()=>rv,ErrorCode:()=>o,KeystoreError:()=>t8,SaveInvitesRequest:()=>rS,SaveInvitesRequest_Request:()=>rk,SaveInvitesResponse:()=>rN,SaveInvitesResponse_Response:()=>rA,SaveInvitesResponse_Response_Success:()=>rP,errorCodeFromJSON:()=>t6,errorCodeToJSON:()=>t5,protobufPackage:()=>t3});var b=function(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r};let w=Array(64),_=Array(123);for(let S=0;S<64;)_[w[S]=S<26?S+65:S<52?S+71:S<62?S-4:S-59|43]=S++;function E(e,t,r){let i=null,n=[],o,s=0,a=0;for(;t<r;){let l=e[t++];switch(a){case 0:n[s++]=w[l>>2],o=(3&l)<<4,a=1;break;case 1:n[s++]=w[o|l>>4],o=(15&l)<<2,a=2;break;case 2:n[s++]=w[o|l>>6],n[s++]=w[63&l],a=0}s>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,n)),s=0)}return a&&(n[s++]=w[o],n[s++]=61,1===a&&(n[s++]=61)),i?(s&&i.push(String.fromCharCode.apply(String,n.slice(0,s))),i.join("")):String.fromCharCode.apply(String,n.slice(0,s))}let k="invalid encoding";function N(e){let t=[],r,i=0,n=0;for(let o=0;o<e.length;){let s=e.charCodeAt(o++);if(61===s&&n>1)break;if(void 0===(s=_[s]))throw Error(k);switch(n){case 0:r=s,n=1;break;case 1:t[i++]=r<<2|(48&s)>>4,r=s,n=2;break;case 2:t[i++]=(15&r)<<4|(60&s)>>2,r=s,n=3;break;case 3:t[i++]=(3&r)<<6|s,n=0}}if(1===n)throw Error(k);return new Uint8Array(t)}function A(e,t){return t&&t.constructor===Uint8Array?E(t,0,t.length):t}function P(e,t){let r=t||{},{pathPrefix:i}=r,n=b(r,["pathPrefix"]);return fetch(i?`${i}${e}`:e,n).then(e=>e.json().then(t=>{if(!e.ok)throw t;return t}))}function x(e,t,r){var i,n,o;return i=this,o=function*(){var i;let n=r||{},{pathPrefix:o}=n,s=b(n,["pathPrefix"]),a=o?`${o}${e}`:e,l=yield fetch(a,s);if(!l.ok){let u=yield l.json(),c=u.error&&u.error.message?u.error.message:"";throw Error(c)}if(!l.body)throw Error("response doesnt have a body");yield l.body.pipeThrough(new TextDecoderStream).pipeThrough(new TransformStream({start(e){e.buf="",e.pos=0},transform(e,t){for(void 0===t.buf&&(t.buf=""),void 0===t.pos&&(t.pos=0),t.buf+=e;t.pos<t.buf.length;)if("\n"===t.buf[t.pos]){let r=t.buf.substring(0,t.pos),i=JSON.parse(r);t.enqueue(i.result),t.buf=t.buf.substring(t.pos+1),t.pos=0}else++t.pos}})).pipeTo((i=e=>{t&&t(e)},new WritableStream({write(e){i(e)}})))},new(n=void 0,n=Promise)(function(e,t){function r(e){try{a(o.next(e))}catch(r){t(r)}}function s(e){try{a(o.throw(e))}catch(r){t(r)}}function a(t){var i;t.done?e(t.value):((i=t.value)instanceof n?i:new n(function(e){e(i)})).then(r,s)}a((o=o.apply(i,[])).next())})}function O(e){return["string","number","boolean"].some(t=>typeof e===t)}function T(e,t=""){return Object.keys(e).reduce((r,i)=>{let n=e[i],o=t?[t,i].join("."):i,s=Array.isArray(n)&&n.every(e=>O(e))&&n.length>0,a=O(n)&&!function(e){return!1===e||0===e||""===e}(n),l={};return function(e){let t="Object"===Object.prototype.toString.call(e).slice(8,-1);if(null===e||!t||!t)return!1;let r=Object.getPrototypeOf(e);return"object"==typeof r&&r.constructor===Object.prototype.constructor}(n)?l=T(n,o):(a||s)&&(l={[o]:n}),Object.assign(Object.assign({},r),l)},{})}function R(e,t=[]){let r=T(e),i=Object.keys(r).reduce((e,i)=>{let n=r[i];return t.find(e=>e===i)?e:Array.isArray(n)?[...e,...n.map(e=>[i,e.toString()])]:e=[...e,[i,n.toString()]]},[]);return new URLSearchParams(i).toString()}!function(e){e.SORT_DIRECTION_UNSPECIFIED="SORT_DIRECTION_UNSPECIFIED",e.SORT_DIRECTION_ASCENDING="SORT_DIRECTION_ASCENDING",e.SORT_DIRECTION_DESCENDING="SORT_DIRECTION_DESCENDING"}(i||(i={}));class B{static Publish(e,t){return P("/message/v1/publish",Object.assign(Object.assign({},t),{method:"POST",body:JSON.stringify(e,A)}))}static Subscribe(e,t,r){return x("/message/v1/subscribe",t,Object.assign(Object.assign({},r),{method:"POST",body:JSON.stringify(e,A)}))}static SubscribeAll(e,t,r){return x("/message/v1/subscribe-all",t,Object.assign(Object.assign({},r),{method:"POST",body:JSON.stringify(e,A)}))}static Query(e,t){return P("/message/v1/query",Object.assign(Object.assign({},t),{method:"POST",body:JSON.stringify(e,A)}))}static BatchQuery(e,t){return P("/message/v1/batch-query",Object.assign(Object.assign({},t),{method:"POST",body:JSON.stringify(e,A)}))}}var C=null;try{C=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(I){}function M(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function U(e){return!0===(e&&e.__isLong__)}function K(e){var t=Math.clz32(e&-e);return e?31-t:t}M.prototype.__isLong__,Object.defineProperty(M.prototype,"__isLong__",{value:!0}),M.isLong=U;var D={},j={};function L(e,t){var r,i,n;return t?(n=0<=(e>>>=0)&&e<256)&&(i=j[e])?i:(r=F(e,0,!0),n&&(j[e]=r),r):(n=-128<=(e|=0)&&e<128)&&(i=D[e])?i:(r=F(e,e<0?-1:0,!1),n&&(D[e]=r),r)}function J(e,t){if(isNaN(e))return t?X:$;if(t){if(e<0)return X;if(e>=H)return er}else{if(e<=-W)return ei;if(e+1>=W)return et}return e<0?J(-e,t).neg():F(e%G|0,e/G|0,t)}function F(e,t,r){return new M(e,t,r)}M.fromInt=L,M.fromNumber=J,M.fromBits=F;var q=Math.pow;function V(e,t,r){if(0===e.length)throw Error("empty string");if("number"==typeof t?(r=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?X:$;if((r=r||10)<2||36<r)throw RangeError("radix");if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return V(e.substring(1),t,r).neg();for(var i,n=J(q(r,8)),o=$,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+a),r);if(a<8){var u=J(q(r,a));o=o.mul(u).add(J(l))}else o=(o=o.mul(n)).add(J(l))}return o.unsigned=t,o}function z(e,t){return"number"==typeof e?J(e,t):"string"==typeof e?V(e,t):F(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}M.fromString=V,M.fromValue=z;var G=4294967296,H=18446744073709552e3,W=18446744073709552e3/2,Z=L(16777216),$=L(0);M.ZERO=$;var X=L(0,!0);M.UZERO=X;var Y=L(1);M.ONE=Y;var Q=L(1,!0);M.UONE=Q;var ee=L(-1);M.NEG_ONE=ee;var et=F(-1,2147483647,!1);M.MAX_VALUE=et;var er=F(-1,-1,!0);M.MAX_UNSIGNED_VALUE=er;var ei=F(0,-2147483648,!1);M.MIN_VALUE=ei;var en=M.prototype;en.toInt=function(){return this.unsigned?this.low>>>0:this.low},en.toNumber=function(){return this.unsigned?(this.high>>>0)*G+(this.low>>>0):this.high*G+(this.low>>>0)},en.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(ei)){var t=J(e),r=this.div(t),i=r.mul(t).sub(this);return r.toString(e)+i.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var n=J(q(e,6),this.unsigned),o=this,s="";;){var a=o.div(n),l=(o.sub(a.mul(n)).toInt()>>>0).toString(e);if((o=a).isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},en.getHighBits=function(){return this.high},en.getHighBitsUnsigned=function(){return this.high>>>0},en.getLowBits=function(){return this.low},en.getLowBitsUnsigned=function(){return this.low>>>0},en.getNumBitsAbs=function(){if(this.isNegative())return this.eq(ei)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},en.isZero=function(){return 0===this.high&&0===this.low},en.eqz=en.isZero,en.isNegative=function(){return!this.unsigned&&this.high<0},en.isPositive=function(){return this.unsigned||this.high>=0},en.isOdd=function(){return 1==(1&this.low)},en.isEven=function(){return 0==(1&this.low)},en.equals=function(e){return U(e)||(e=z(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},en.eq=en.equals,en.notEquals=function(e){return!this.eq(e)},en.neq=en.notEquals,en.ne=en.notEquals,en.lessThan=function(e){return 0>this.comp(e)},en.lt=en.lessThan,en.lessThanOrEqual=function(e){return 0>=this.comp(e)},en.lte=en.lessThanOrEqual,en.le=en.lessThanOrEqual,en.greaterThan=function(e){return this.comp(e)>0},en.gt=en.greaterThan,en.greaterThanOrEqual=function(e){return this.comp(e)>=0},en.gte=en.greaterThanOrEqual,en.ge=en.greaterThanOrEqual,en.compare=function(e){if(U(e)||(e=z(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},en.comp=en.compare,en.negate=function(){return!this.unsigned&&this.eq(ei)?ei:this.not().add(Y)},en.neg=en.negate,en.add=function(e){U(e)||(e=z(e));var t,r,i,n,o=this.high>>>16,s=65535&this.high,a=this.low>>>16,l=65535&this.low,u=e.high>>>16,c=65535&e.high,d=e.low>>>16;return n=0+(((i=0+((t=0+((r=0+(l+(65535&e.low)))>>>16)+(a+d))>>>16)+(s+c))>>>16)+(o+u)),F((t&=65535)<<16|(r&=65535),(n&=65535)<<16|(i&=65535),this.unsigned)},en.subtract=function(e){return U(e)||(e=z(e)),this.add(e.neg())},en.sub=en.subtract,en.multiply=function(e){if(this.isZero())return this;if(U(e)||(e=z(e)),C)return F(C.mul(this.low,this.high,e.low,e.high),C.get_high(),this.unsigned);if(e.isZero())return this.unsigned?X:$;if(this.eq(ei))return e.isOdd()?ei:$;if(e.eq(ei))return this.isOdd()?ei:$;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(Z)&&e.lt(Z))return J(this.toNumber()*e.toNumber(),this.unsigned);var t,r,i,n=this.high>>>16,o=65535&this.high,s=this.low>>>16,a=65535&this.low,l=e.high>>>16,u=65535&e.high,c=e.low>>>16,d=65535&e.low,h=0;return i=0+((t=0+((r=0+a*d)>>>16)+s*d)>>>16),t&=65535,i+=(t+=a*c)>>>16,h+=(i+=o*d)>>>16,i&=65535,h+=(i+=s*c)>>>16,i&=65535,h+=((i+=a*u)>>>16)+(n*d+o*c+s*u+a*l),F((t&=65535)<<16|(r&=65535),(h&=65535)<<16|(i&=65535),this.unsigned)},en.mul=en.multiply,en.divide=function(e){if(U(e)||(e=z(e)),e.isZero())throw Error("division by zero");if(C)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?F((this.unsigned?C.div_u:C.div_s)(this.low,this.high,e.low,e.high),C.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?X:$;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return X;if(e.gt(this.shru(1)))return Q;i=X}else{if(this.eq(ei))return e.eq(Y)||e.eq(ee)?ei:e.eq(ei)?Y:(t=this.shr(1).div(e).shl(1)).eq($)?e.isNegative()?Y:ee:(r=this.sub(e.mul(t)),i=t.add(r.div(e)));if(e.eq(ei))return this.unsigned?X:$;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=$}for(r=this;r.gte(e);){t=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var t,r,i,n=Math.ceil(Math.log(t)/Math.LN2),o=n<=48?1:q(2,n-48),s=J(t),a=s.mul(e);a.isNegative()||a.gt(r);)a=(s=J(t-=o,this.unsigned)).mul(e);s.isZero()&&(s=Y),i=i.add(s),r=r.sub(a)}return i},en.div=en.divide,en.modulo=function(e){return U(e)||(e=z(e)),C?F((this.unsigned?C.rem_u:C.rem_s)(this.low,this.high,e.low,e.high),C.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},en.mod=en.modulo,en.rem=en.modulo,en.not=function(){return F(~this.low,~this.high,this.unsigned)},en.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},en.clz=en.countLeadingZeros,en.countTrailingZeros=function(){return this.low?K(this.low):K(this.high)+32},en.ctz=en.countTrailingZeros,en.and=function(e){return U(e)||(e=z(e)),F(this.low&e.low,this.high&e.high,this.unsigned)},en.or=function(e){return U(e)||(e=z(e)),F(this.low|e.low,this.high|e.high,this.unsigned)},en.xor=function(e){return U(e)||(e=z(e)),F(this.low^e.low,this.high^e.high,this.unsigned)},en.shiftLeft=function(e){return U(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?F(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):F(0,this.low<<e-32,this.unsigned)},en.shl=en.shiftLeft,en.shiftRight=function(e){return U(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?F(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):F(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},en.shr=en.shiftRight,en.shiftRightUnsigned=function(e){return U(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?F(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):F(32===e?this.high:this.high>>>e-32,0,this.unsigned)},en.shru=en.shiftRightUnsigned,en.shr_u=en.shiftRightUnsigned,en.rotateLeft=function(e){var t;return U(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?F(this.high,this.low,this.unsigned):e<32?(t=32-e,F(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),F(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},en.rotl=en.rotateLeft,en.rotateRight=function(e){var t;return U(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?F(this.high,this.low,this.unsigned):e<32?(t=32-e,F(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),F(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},en.rotr=en.rotateRight,en.toSigned=function(){return this.unsigned?F(this.low,this.high,!1):this},en.toUnsigned=function(){return this.unsigned?this:F(this.low,this.high,!0)},en.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},en.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},en.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},M.fromBytes=function(e,t,r){return r?M.fromBytesLE(e,t):M.fromBytesBE(e,t)},M.fromBytesLE=function(e,t){return new M(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},M.fromBytesBE=function(e,t){return new M(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};let eo=M;var es=r(930),ea=r.n(es);let el="xmtp.message_contents",eu={encode:(e,t=ea().Writer.create())=>(void 0!==e.ecdsaCompact&&ed.encode(e.ecdsaCompact,t.uint32(10).fork()).ldelim(),void 0!==e.walletEcdsaCompact&&ef.encode(e.walletEcdsaCompact,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={ecdsaCompact:void 0,walletEcdsaCompact:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.ecdsaCompact=ed.decode(r,r.uint32());break;case 2:n.walletEcdsaCompact=ef.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({ecdsaCompact:ev(e.ecdsaCompact)?ed.fromJSON(e.ecdsaCompact):void 0,walletEcdsaCompact:ev(e.walletEcdsaCompact)?ef.fromJSON(e.walletEcdsaCompact):void 0}),toJSON(e){let t={};return void 0!==e.ecdsaCompact&&(t.ecdsaCompact=e.ecdsaCompact?ed.toJSON(e.ecdsaCompact):void 0),void 0!==e.walletEcdsaCompact&&(t.walletEcdsaCompact=e.walletEcdsaCompact?ef.toJSON(e.walletEcdsaCompact):void 0),t},fromPartial(e){let t={ecdsaCompact:void 0,walletEcdsaCompact:void 0};return t.ecdsaCompact=void 0!==e.ecdsaCompact&&null!==e.ecdsaCompact?ed.fromPartial(e.ecdsaCompact):void 0,t.walletEcdsaCompact=void 0!==e.walletEcdsaCompact&&null!==e.walletEcdsaCompact?ef.fromPartial(e.walletEcdsaCompact):void 0,t}};function ec(){return{bytes:new Uint8Array,recovery:0}}let ed={encode:(e,t=ea().Writer.create())=>(0!==e.bytes.length&&t.uint32(10).bytes(e.bytes),0!==e.recovery&&t.uint32(16).uint32(e.recovery),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=ec();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.bytes=r.bytes();break;case 2:n.recovery=r.uint32();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({bytes:ev(e.bytes)?ey(e.bytes):new Uint8Array,recovery:ev(e.recovery)?Number(e.recovery):0}),toJSON(e){let t={};return void 0!==e.bytes&&(t.bytes=em(void 0!==e.bytes?e.bytes:new Uint8Array)),void 0!==e.recovery&&(t.recovery=Math.round(e.recovery)),t},fromPartial(e){var t,r;let i=ec();return i.bytes=null!==(t=e.bytes)&&void 0!==t?t:new Uint8Array,i.recovery=null!==(r=e.recovery)&&void 0!==r?r:0,i}};function eh(){return{bytes:new Uint8Array,recovery:0}}let ef={encode:(e,t=ea().Writer.create())=>(0!==e.bytes.length&&t.uint32(10).bytes(e.bytes),0!==e.recovery&&t.uint32(16).uint32(e.recovery),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=eh();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.bytes=r.bytes();break;case 2:n.recovery=r.uint32();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({bytes:ev(e.bytes)?ey(e.bytes):new Uint8Array,recovery:ev(e.recovery)?Number(e.recovery):0}),toJSON(e){let t={};return void 0!==e.bytes&&(t.bytes=em(void 0!==e.bytes?e.bytes:new Uint8Array)),void 0!==e.recovery&&(t.recovery=Math.round(e.recovery)),t},fromPartial(e){var t,r;let i=eh();return i.bytes=null!==(t=e.bytes)&&void 0!==t?t:new Uint8Array,i.recovery=null!==(r=e.recovery)&&void 0!==r?r:0,i}};var ep=(()=>{if(void 0!==ep)return ep;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function ey(e){if(ep.Buffer)return Uint8Array.from(ep.Buffer.from(e,"base64"));{let t=ep.atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}}function em(e){if(ep.Buffer)return ep.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),ep.btoa(t.join(""))}}function ev(e){return null!=e}ea().util.Long!==eo&&(ea().util.Long=eo,ea().configure());let eg="xmtp.message_contents";function eb(){return{createdNs:eo.UZERO,secp256k1Uncompressed:void 0}}let ew={encode:(e,t=ea().Writer.create())=>(e.createdNs.isZero()||t.uint32(8).uint64(e.createdNs),void 0!==e.secp256k1Uncompressed&&eS.encode(e.secp256k1Uncompressed,t.uint32(26).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=eb();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.createdNs=r.uint64();break;case 3:n.secp256k1Uncompressed=eS.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({createdNs:eI(e.createdNs)?eo.fromValue(e.createdNs):eo.UZERO,secp256k1Uncompressed:eI(e.secp256k1Uncompressed)?eS.fromJSON(e.secp256k1Uncompressed):void 0}),toJSON(e){let t={};return void 0!==e.createdNs&&(t.createdNs=(e.createdNs||eo.UZERO).toString()),void 0!==e.secp256k1Uncompressed&&(t.secp256k1Uncompressed=e.secp256k1Uncompressed?eS.toJSON(e.secp256k1Uncompressed):void 0),t},fromPartial(e){let t=eb();return t.createdNs=void 0!==e.createdNs&&null!==e.createdNs?eo.fromValue(e.createdNs):eo.UZERO,t.secp256k1Uncompressed=void 0!==e.secp256k1Uncompressed&&null!==e.secp256k1Uncompressed?eS.fromPartial(e.secp256k1Uncompressed):void 0,t}};function e_(){return{bytes:new Uint8Array}}let eS={encode:(e,t=ea().Writer.create())=>(0!==e.bytes.length&&t.uint32(10).bytes(e.bytes),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=e_();for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.bytes=r.bytes():r.skipType(7&o)}return n},fromJSON:e=>({bytes:eI(e.bytes)?eB(e.bytes):new Uint8Array}),toJSON(e){let t={};return void 0!==e.bytes&&(t.bytes=eC(void 0!==e.bytes?e.bytes:new Uint8Array)),t},fromPartial(e){var t;let r=e_();return r.bytes=null!==(t=e.bytes)&&void 0!==t?t:new Uint8Array,r}};function eE(){return{keyBytes:new Uint8Array,signature:void 0}}let ek={encode:(e,t=ea().Writer.create())=>(0!==e.keyBytes.length&&t.uint32(10).bytes(e.keyBytes),void 0!==e.signature&&eu.encode(e.signature,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=eE();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.keyBytes=r.bytes();break;case 2:n.signature=eu.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({keyBytes:eI(e.keyBytes)?eB(e.keyBytes):new Uint8Array,signature:eI(e.signature)?eu.fromJSON(e.signature):void 0}),toJSON(e){let t={};return void 0!==e.keyBytes&&(t.keyBytes=eC(void 0!==e.keyBytes?e.keyBytes:new Uint8Array)),void 0!==e.signature&&(t.signature=e.signature?eu.toJSON(e.signature):void 0),t},fromPartial(e){var t;let r=eE();return r.keyBytes=null!==(t=e.keyBytes)&&void 0!==t?t:new Uint8Array,r.signature=void 0!==e.signature&&null!==e.signature?eu.fromPartial(e.signature):void 0,r}},eN={encode:(e,t=ea().Writer.create())=>(void 0!==e.identityKey&&ek.encode(e.identityKey,t.uint32(10).fork()).ldelim(),void 0!==e.preKey&&ek.encode(e.preKey,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={identityKey:void 0,preKey:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.identityKey=ek.decode(r,r.uint32());break;case 2:n.preKey=ek.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({identityKey:eI(e.identityKey)?ek.fromJSON(e.identityKey):void 0,preKey:eI(e.preKey)?ek.fromJSON(e.preKey):void 0}),toJSON(e){let t={};return void 0!==e.identityKey&&(t.identityKey=e.identityKey?ek.toJSON(e.identityKey):void 0),void 0!==e.preKey&&(t.preKey=e.preKey?ek.toJSON(e.preKey):void 0),t},fromPartial(e){let t={identityKey:void 0,preKey:void 0};return t.identityKey=void 0!==e.identityKey&&null!==e.identityKey?ek.fromPartial(e.identityKey):void 0,t.preKey=void 0!==e.preKey&&null!==e.preKey?ek.fromPartial(e.preKey):void 0,t}};function eA(){return{timestamp:eo.UZERO,signature:void 0,secp256k1Uncompressed:void 0}}let eP={encode:(e,t=ea().Writer.create())=>(e.timestamp.isZero()||t.uint32(8).uint64(e.timestamp),void 0!==e.signature&&eu.encode(e.signature,t.uint32(18).fork()).ldelim(),void 0!==e.secp256k1Uncompressed&&eO.encode(e.secp256k1Uncompressed,t.uint32(26).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=eA();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.timestamp=r.uint64();break;case 2:n.signature=eu.decode(r,r.uint32());break;case 3:n.secp256k1Uncompressed=eO.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({timestamp:eI(e.timestamp)?eo.fromValue(e.timestamp):eo.UZERO,signature:eI(e.signature)?eu.fromJSON(e.signature):void 0,secp256k1Uncompressed:eI(e.secp256k1Uncompressed)?eO.fromJSON(e.secp256k1Uncompressed):void 0}),toJSON(e){let t={};return void 0!==e.timestamp&&(t.timestamp=(e.timestamp||eo.UZERO).toString()),void 0!==e.signature&&(t.signature=e.signature?eu.toJSON(e.signature):void 0),void 0!==e.secp256k1Uncompressed&&(t.secp256k1Uncompressed=e.secp256k1Uncompressed?eO.toJSON(e.secp256k1Uncompressed):void 0),t},fromPartial(e){let t=eA();return t.timestamp=void 0!==e.timestamp&&null!==e.timestamp?eo.fromValue(e.timestamp):eo.UZERO,t.signature=void 0!==e.signature&&null!==e.signature?eu.fromPartial(e.signature):void 0,t.secp256k1Uncompressed=void 0!==e.secp256k1Uncompressed&&null!==e.secp256k1Uncompressed?eO.fromPartial(e.secp256k1Uncompressed):void 0,t}};function ex(){return{bytes:new Uint8Array}}let eO={encode:(e,t=ea().Writer.create())=>(0!==e.bytes.length&&t.uint32(10).bytes(e.bytes),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=ex();for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.bytes=r.bytes():r.skipType(7&o)}return n},fromJSON:e=>({bytes:eI(e.bytes)?eB(e.bytes):new Uint8Array}),toJSON(e){let t={};return void 0!==e.bytes&&(t.bytes=eC(void 0!==e.bytes?e.bytes:new Uint8Array)),t},fromPartial(e){var t;let r=ex();return r.bytes=null!==(t=e.bytes)&&void 0!==t?t:new Uint8Array,r}},eT={encode:(e,t=ea().Writer.create())=>(void 0!==e.identityKey&&eP.encode(e.identityKey,t.uint32(10).fork()).ldelim(),void 0!==e.preKey&&eP.encode(e.preKey,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={identityKey:void 0,preKey:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.identityKey=eP.decode(r,r.uint32());break;case 2:n.preKey=eP.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({identityKey:eI(e.identityKey)?eP.fromJSON(e.identityKey):void 0,preKey:eI(e.preKey)?eP.fromJSON(e.preKey):void 0}),toJSON(e){let t={};return void 0!==e.identityKey&&(t.identityKey=e.identityKey?eP.toJSON(e.identityKey):void 0),void 0!==e.preKey&&(t.preKey=e.preKey?eP.toJSON(e.preKey):void 0),t},fromPartial(e){let t={identityKey:void 0,preKey:void 0};return t.identityKey=void 0!==e.identityKey&&null!==e.identityKey?eP.fromPartial(e.identityKey):void 0,t.preKey=void 0!==e.preKey&&null!==e.preKey?eP.fromPartial(e.preKey):void 0,t}};var eR=(()=>{if(void 0!==eR)return eR;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function eB(e){if(eR.Buffer)return Uint8Array.from(eR.Buffer.from(e,"base64"));{let t=eR.atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}}function eC(e){if(eR.Buffer)return eR.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),eR.btoa(t.join(""))}}function eI(e){return null!=e}ea().util.Long!==eo&&(ea().util.Long=eo,ea().configure());let eM="xmtp.message_api.v1";function eU(){return{identityKey:void 0,authDataBytes:new Uint8Array,authDataSignature:void 0}}let eK={encode:(e,t=ea().Writer.create())=>(void 0!==e.identityKey&&eP.encode(e.identityKey,t.uint32(10).fork()).ldelim(),0!==e.authDataBytes.length&&t.uint32(18).bytes(e.authDataBytes),void 0!==e.authDataSignature&&eu.encode(e.authDataSignature,t.uint32(26).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=eU();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.identityKey=eP.decode(r,r.uint32());break;case 2:n.authDataBytes=r.bytes();break;case 3:n.authDataSignature=eu.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({identityKey:eF(e.identityKey)?eP.fromJSON(e.identityKey):void 0,authDataBytes:eF(e.authDataBytes)?eJ(e.authDataBytes):new Uint8Array,authDataSignature:eF(e.authDataSignature)?eu.fromJSON(e.authDataSignature):void 0}),toJSON(e){let t={};return void 0!==e.identityKey&&(t.identityKey=e.identityKey?eP.toJSON(e.identityKey):void 0),void 0!==e.authDataBytes&&(t.authDataBytes=function(e){if(eL.Buffer)return eL.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),eL.btoa(t.join(""))}}(void 0!==e.authDataBytes?e.authDataBytes:new Uint8Array)),void 0!==e.authDataSignature&&(t.authDataSignature=e.authDataSignature?eu.toJSON(e.authDataSignature):void 0),t},fromPartial(e){var t;let r=eU();return r.identityKey=void 0!==e.identityKey&&null!==e.identityKey?eP.fromPartial(e.identityKey):void 0,r.authDataBytes=null!==(t=e.authDataBytes)&&void 0!==t?t:new Uint8Array,r.authDataSignature=void 0!==e.authDataSignature&&null!==e.authDataSignature?eu.fromPartial(e.authDataSignature):void 0,r}};function eD(){return{walletAddr:"",createdNs:eo.UZERO}}let ej={encode:(e,t=ea().Writer.create())=>(""!==e.walletAddr&&t.uint32(10).string(e.walletAddr),e.createdNs.isZero()||t.uint32(16).uint64(e.createdNs),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=eD();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.walletAddr=r.string();break;case 2:n.createdNs=r.uint64();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({walletAddr:eF(e.walletAddr)?String(e.walletAddr):"",createdNs:eF(e.createdNs)?eo.fromValue(e.createdNs):eo.UZERO}),toJSON(e){let t={};return void 0!==e.walletAddr&&(t.walletAddr=e.walletAddr),void 0!==e.createdNs&&(t.createdNs=(e.createdNs||eo.UZERO).toString()),t},fromPartial(e){var t;let r=eD();return r.walletAddr=null!==(t=e.walletAddr)&&void 0!==t?t:"",r.createdNs=void 0!==e.createdNs&&null!==e.createdNs?eo.fromValue(e.createdNs):eo.UZERO,r}};var eL=(()=>{if(void 0!==eL)return eL;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function eJ(e){if(eL.Buffer)return Uint8Array.from(eL.Buffer.from(e,"base64"));{let t=eL.atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}}function eF(e){return null!=e}ea().util.Long!==eo&&(ea().util.Long=eo,ea().configure());let eq="xmtp.message_contents",eV={encode:(e,t=ea().Writer.create())=>(void 0!==e.aes256GcmHkdfSha256&&eG.encode(e.aes256GcmHkdfSha256,t.uint32(10).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={aes256GcmHkdfSha256:void 0};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.aes256GcmHkdfSha256=eG.decode(r,r.uint32()):r.skipType(7&o)}return n},fromJSON:e=>({aes256GcmHkdfSha256:e$(e.aes256GcmHkdfSha256)?eG.fromJSON(e.aes256GcmHkdfSha256):void 0}),toJSON(e){let t={};return void 0!==e.aes256GcmHkdfSha256&&(t.aes256GcmHkdfSha256=e.aes256GcmHkdfSha256?eG.toJSON(e.aes256GcmHkdfSha256):void 0),t},fromPartial(e){let t={aes256GcmHkdfSha256:void 0};return t.aes256GcmHkdfSha256=void 0!==e.aes256GcmHkdfSha256&&null!==e.aes256GcmHkdfSha256?eG.fromPartial(e.aes256GcmHkdfSha256):void 0,t}};function ez(){return{hkdfSalt:new Uint8Array,gcmNonce:new Uint8Array,payload:new Uint8Array}}let eG={encode:(e,t=ea().Writer.create())=>(0!==e.hkdfSalt.length&&t.uint32(10).bytes(e.hkdfSalt),0!==e.gcmNonce.length&&t.uint32(18).bytes(e.gcmNonce),0!==e.payload.length&&t.uint32(26).bytes(e.payload),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=ez();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.hkdfSalt=r.bytes();break;case 2:n.gcmNonce=r.bytes();break;case 3:n.payload=r.bytes();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({hkdfSalt:e$(e.hkdfSalt)?eW(e.hkdfSalt):new Uint8Array,gcmNonce:e$(e.gcmNonce)?eW(e.gcmNonce):new Uint8Array,payload:e$(e.payload)?eW(e.payload):new Uint8Array}),toJSON(e){let t={};return void 0!==e.hkdfSalt&&(t.hkdfSalt=eZ(void 0!==e.hkdfSalt?e.hkdfSalt:new Uint8Array)),void 0!==e.gcmNonce&&(t.gcmNonce=eZ(void 0!==e.gcmNonce?e.gcmNonce:new Uint8Array)),void 0!==e.payload&&(t.payload=eZ(void 0!==e.payload?e.payload:new Uint8Array)),t},fromPartial(e){var t,r,i;let n=ez();return n.hkdfSalt=null!==(t=e.hkdfSalt)&&void 0!==t?t:new Uint8Array,n.gcmNonce=null!==(r=e.gcmNonce)&&void 0!==r?r:new Uint8Array,n.payload=null!==(i=e.payload)&&void 0!==i?i:new Uint8Array,n}};var eH=(()=>{if(void 0!==eH)return eH;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function eW(e){if(eH.Buffer)return Uint8Array.from(eH.Buffer.from(e,"base64"));{let t=eH.atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}}function eZ(e){if(eH.Buffer)return eH.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),eH.btoa(t.join(""))}}function e$(e){return null!=e}ea().util.Long!==eo&&(ea().util.Long=eo,ea().configure());let eX="xmtp.message_contents";function eY(){return{sender:void 0,recipient:void 0,timestamp:eo.UZERO}}let eQ={encode:(e,t=ea().Writer.create())=>(void 0!==e.sender&&eT.encode(e.sender,t.uint32(10).fork()).ldelim(),void 0!==e.recipient&&eT.encode(e.recipient,t.uint32(18).fork()).ldelim(),e.timestamp.isZero()||t.uint32(24).uint64(e.timestamp),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=eY();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.sender=eT.decode(r,r.uint32());break;case 2:n.recipient=eT.decode(r,r.uint32());break;case 3:n.timestamp=r.uint64();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({sender:te(e.sender)?eT.fromJSON(e.sender):void 0,recipient:te(e.recipient)?eT.fromJSON(e.recipient):void 0,timestamp:te(e.timestamp)?eo.fromValue(e.timestamp):eo.UZERO}),toJSON(e){let t={};return void 0!==e.sender&&(t.sender=e.sender?eT.toJSON(e.sender):void 0),void 0!==e.recipient&&(t.recipient=e.recipient?eT.toJSON(e.recipient):void 0),void 0!==e.timestamp&&(t.timestamp=(e.timestamp||eo.UZERO).toString()),t},fromPartial(e){let t=eY();return t.sender=void 0!==e.sender&&null!==e.sender?eT.fromPartial(e.sender):void 0,t.recipient=void 0!==e.recipient&&null!==e.recipient?eT.fromPartial(e.recipient):void 0,t.timestamp=void 0!==e.timestamp&&null!==e.timestamp?eo.fromValue(e.timestamp):eo.UZERO,t}};function e0(){return{headerBytes:new Uint8Array,ciphertext:void 0}}let e1={encode:(e,t=ea().Writer.create())=>(0!==e.headerBytes.length&&t.uint32(10).bytes(e.headerBytes),void 0!==e.ciphertext&&eV.encode(e.ciphertext,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=e0();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.headerBytes=r.bytes();break;case 2:n.ciphertext=eV.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({headerBytes:te(e.headerBytes)?e7(e.headerBytes):new Uint8Array,ciphertext:te(e.ciphertext)?eV.fromJSON(e.ciphertext):void 0}),toJSON(e){let t={};return void 0!==e.headerBytes&&(t.headerBytes=e9(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),void 0!==e.ciphertext&&(t.ciphertext=e.ciphertext?eV.toJSON(e.ciphertext):void 0),t},fromPartial(e){var t;let r=e0();return r.headerBytes=null!==(t=e.headerBytes)&&void 0!==t?t:new Uint8Array,r.ciphertext=void 0!==e.ciphertext&&null!==e.ciphertext?eV.fromPartial(e.ciphertext):void 0,r}};function e2(){return{createdNs:eo.UZERO,topic:""}}let e3={encode:(e,t=ea().Writer.create())=>(e.createdNs.isZero()||t.uint32(8).uint64(e.createdNs),""!==e.topic&&t.uint32(18).string(e.topic),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=e2();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.createdNs=r.uint64();break;case 2:n.topic=r.string();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({createdNs:te(e.createdNs)?eo.fromValue(e.createdNs):eo.UZERO,topic:te(e.topic)?String(e.topic):""}),toJSON(e){let t={};return void 0!==e.createdNs&&(t.createdNs=(e.createdNs||eo.UZERO).toString()),void 0!==e.topic&&(t.topic=e.topic),t},fromPartial(e){var t;let r=e2();return r.createdNs=void 0!==e.createdNs&&null!==e.createdNs?eo.fromValue(e.createdNs):eo.UZERO,r.topic=null!==(t=e.topic)&&void 0!==t?t:"",r}};function e6(){return{headerBytes:new Uint8Array,ciphertext:void 0}}let e5={encode:(e,t=ea().Writer.create())=>(0!==e.headerBytes.length&&t.uint32(10).bytes(e.headerBytes),void 0!==e.ciphertext&&eV.encode(e.ciphertext,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=e6();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.headerBytes=r.bytes();break;case 2:n.ciphertext=eV.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({headerBytes:te(e.headerBytes)?e7(e.headerBytes):new Uint8Array,ciphertext:te(e.ciphertext)?eV.fromJSON(e.ciphertext):void 0}),toJSON(e){let t={};return void 0!==e.headerBytes&&(t.headerBytes=e9(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),void 0!==e.ciphertext&&(t.ciphertext=e.ciphertext?eV.toJSON(e.ciphertext):void 0),t},fromPartial(e){var t;let r=e6();return r.headerBytes=null!==(t=e.headerBytes)&&void 0!==t?t:new Uint8Array,r.ciphertext=void 0!==e.ciphertext&&null!==e.ciphertext?eV.fromPartial(e.ciphertext):void 0,r}},e8={encode:(e,t=ea().Writer.create())=>(void 0!==e.v1&&e1.encode(e.v1,t.uint32(10).fork()).ldelim(),void 0!==e.v2&&e5.encode(e.v2,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={v1:void 0,v2:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.v1=e1.decode(r,r.uint32());break;case 2:n.v2=e5.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({v1:te(e.v1)?e1.fromJSON(e.v1):void 0,v2:te(e.v2)?e5.fromJSON(e.v2):void 0}),toJSON(e){let t={};return void 0!==e.v1&&(t.v1=e.v1?e1.toJSON(e.v1):void 0),void 0!==e.v2&&(t.v2=e.v2?e5.toJSON(e.v2):void 0),t},fromPartial(e){let t={v1:void 0,v2:void 0};return t.v1=void 0!==e.v1&&null!==e.v1?e1.fromPartial(e.v1):void 0,t.v2=void 0!==e.v2&&null!==e.v2?e5.fromPartial(e.v2):void 0,t}};var e4=(()=>{if(void 0!==e4)return e4;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function e7(e){if(e4.Buffer)return Uint8Array.from(e4.Buffer.from(e,"base64"));{let t=e4.atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}}function e9(e){if(e4.Buffer)return e4.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),e4.btoa(t.join(""))}}function te(e){return null!=e}ea().util.Long!==eo&&(ea().util.Long=eo,ea().configure());let tt="xmtp.message_contents";function tr(e){switch(e){case 0:case"COMPRESSION_DEFLATE":return n.COMPRESSION_DEFLATE;case 1:case"COMPRESSION_GZIP":return n.COMPRESSION_GZIP;default:return n.UNRECOGNIZED}}function ti(e){switch(e){case n.COMPRESSION_DEFLATE:return"COMPRESSION_DEFLATE";case n.COMPRESSION_GZIP:return"COMPRESSION_GZIP";case n.UNRECOGNIZED:default:return"UNRECOGNIZED"}}!function(e){e[e.COMPRESSION_DEFLATE=0]="COMPRESSION_DEFLATE",e[e.COMPRESSION_GZIP=1]="COMPRESSION_GZIP",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(n||(n={}));let tn={encode:(e,t=ea().Writer.create())=>(""!==e.authorityId&&t.uint32(10).string(e.authorityId),""!==e.typeId&&t.uint32(18).string(e.typeId),0!==e.versionMajor&&t.uint32(24).uint32(e.versionMajor),0!==e.versionMinor&&t.uint32(32).uint32(e.versionMinor),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={authorityId:"",typeId:"",versionMajor:0,versionMinor:0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.authorityId=r.string();break;case 2:n.typeId=r.string();break;case 3:n.versionMajor=r.uint32();break;case 4:n.versionMinor=r.uint32();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({authorityId:tf(e.authorityId)?String(e.authorityId):"",typeId:tf(e.typeId)?String(e.typeId):"",versionMajor:tf(e.versionMajor)?Number(e.versionMajor):0,versionMinor:tf(e.versionMinor)?Number(e.versionMinor):0}),toJSON(e){let t={};return void 0!==e.authorityId&&(t.authorityId=e.authorityId),void 0!==e.typeId&&(t.typeId=e.typeId),void 0!==e.versionMajor&&(t.versionMajor=Math.round(e.versionMajor)),void 0!==e.versionMinor&&(t.versionMinor=Math.round(e.versionMinor)),t},fromPartial(e){var t,r,i,n;let o={authorityId:"",typeId:"",versionMajor:0,versionMinor:0};return o.authorityId=null!==(t=e.authorityId)&&void 0!==t?t:"",o.typeId=null!==(r=e.typeId)&&void 0!==r?r:"",o.versionMajor=null!==(i=e.versionMajor)&&void 0!==i?i:0,o.versionMinor=null!==(n=e.versionMinor)&&void 0!==n?n:0,o}};function to(){return{type:void 0,parameters:{},fallback:void 0,compression:void 0,content:new Uint8Array}}let ts={encode:(e,t=ea().Writer.create())=>(void 0!==e.type&&tn.encode(e.type,t.uint32(10).fork()).ldelim(),Object.entries(e.parameters).forEach(([e,r])=>{ta.encode({key:e,value:r},t.uint32(18).fork()).ldelim()}),void 0!==e.fallback&&t.uint32(26).string(e.fallback),void 0!==e.compression&&t.uint32(40).int32(e.compression),0!==e.content.length&&t.uint32(34).bytes(e.content),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=to();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.type=tn.decode(r,r.uint32());break;case 2:let s=ta.decode(r,r.uint32());void 0!==s.value&&(n.parameters[s.key]=s.value);break;case 3:n.fallback=r.string();break;case 5:n.compression=r.int32();break;case 4:n.content=r.bytes();break;default:r.skipType(7&o)}}return n},fromJSON(e){var t;return{type:tf(e.type)?tn.fromJSON(e.type):void 0,parameters:"object"==typeof(t=e.parameters)&&null!==t?Object.entries(e.parameters).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{},fallback:tf(e.fallback)?String(e.fallback):void 0,compression:tf(e.compression)?tr(e.compression):void 0,content:tf(e.content)?td(e.content):new Uint8Array}},toJSON(e){let t={};return void 0!==e.type&&(t.type=e.type?tn.toJSON(e.type):void 0),t.parameters={},e.parameters&&Object.entries(e.parameters).forEach(([e,r])=>{t.parameters[e]=r}),void 0!==e.fallback&&(t.fallback=e.fallback),void 0!==e.compression&&(t.compression=void 0!==e.compression?ti(e.compression):void 0),void 0!==e.content&&(t.content=th(void 0!==e.content?e.content:new Uint8Array)),t},fromPartial(e){var t,r,i,n;let o=to();return o.type=void 0!==e.type&&null!==e.type?tn.fromPartial(e.type):void 0,o.parameters=Object.entries(null!==(t=e.parameters)&&void 0!==t?t:{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=String(r)),e),{}),o.fallback=null!==(r=e.fallback)&&void 0!==r?r:void 0,o.compression=null!==(i=e.compression)&&void 0!==i?i:void 0,o.content=null!==(n=e.content)&&void 0!==n?n:new Uint8Array,o}},ta={encode:(e,t=ea().Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={key:"",value:""};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.key=r.string();break;case 2:n.value=r.string();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({key:tf(e.key)?String(e.key):"",value:tf(e.value)?String(e.value):""}),toJSON(e){let t={};return void 0!==e.key&&(t.key=e.key),void 0!==e.value&&(t.value=e.value),t},fromPartial(e){var t,r;let i={key:"",value:""};return i.key=null!==(t=e.key)&&void 0!==t?t:"",i.value=null!==(r=e.value)&&void 0!==r?r:"",i}};function tl(){return{payload:new Uint8Array,sender:void 0,signature:void 0}}let tu={encode:(e,t=ea().Writer.create())=>(0!==e.payload.length&&t.uint32(10).bytes(e.payload),void 0!==e.sender&&eN.encode(e.sender,t.uint32(18).fork()).ldelim(),void 0!==e.signature&&eu.encode(e.signature,t.uint32(26).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=tl();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.payload=r.bytes();break;case 2:n.sender=eN.decode(r,r.uint32());break;case 3:n.signature=eu.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({payload:tf(e.payload)?td(e.payload):new Uint8Array,sender:tf(e.sender)?eN.fromJSON(e.sender):void 0,signature:tf(e.signature)?eu.fromJSON(e.signature):void 0}),toJSON(e){let t={};return void 0!==e.payload&&(t.payload=th(void 0!==e.payload?e.payload:new Uint8Array)),void 0!==e.sender&&(t.sender=e.sender?eN.toJSON(e.sender):void 0),void 0!==e.signature&&(t.signature=e.signature?eu.toJSON(e.signature):void 0),t},fromPartial(e){var t;let r=tl();return r.payload=null!==(t=e.payload)&&void 0!==t?t:new Uint8Array,r.sender=void 0!==e.sender&&null!==e.sender?eN.fromPartial(e.sender):void 0,r.signature=void 0!==e.signature&&null!==e.signature?eu.fromPartial(e.signature):void 0,r}};var tc=(()=>{if(void 0!==tc)return tc;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function td(e){if(tc.Buffer)return Uint8Array.from(tc.Buffer.from(e,"base64"));{let t=tc.atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}}function th(e){if(tc.Buffer)return tc.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),tc.btoa(t.join(""))}}function tf(e){return null!=e}ea().util.Long!==eo&&(ea().util.Long=eo,ea().configure());let tp="xmtp.message_contents",ty={encode(e,t=ea().Writer.create()){for(let r of e.parts)tm.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={parts:[]};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.parts.push(tm.decode(r,r.uint32())):r.skipType(7&o)}return n},fromJSON:e=>({parts:Array.isArray(null==e?void 0:e.parts)?e.parts.map(e=>tm.fromJSON(e)):[]}),toJSON(e){let t={};return e.parts?t.parts=e.parts.map(e=>e?tm.toJSON(e):void 0):t.parts=[],t},fromPartial(e){var t;let r={parts:[]};return r.parts=(null===(t=e.parts)||void 0===t?void 0:t.map(e=>tm.fromPartial(e)))||[],r}},tm={encode:(e,t=ea().Writer.create())=>(void 0!==e.part&&ts.encode(e.part,t.uint32(10).fork()).ldelim(),void 0!==e.composite&&ty.encode(e.composite,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={part:void 0,composite:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.part=ts.decode(r,r.uint32());break;case 2:n.composite=ty.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({part:tv(e.part)?ts.fromJSON(e.part):void 0,composite:tv(e.composite)?ty.fromJSON(e.composite):void 0}),toJSON(e){let t={};return void 0!==e.part&&(t.part=e.part?ts.toJSON(e.part):void 0),void 0!==e.composite&&(t.composite=e.composite?ty.toJSON(e.composite):void 0),t},fromPartial(e){let t={part:void 0,composite:void 0};return t.part=void 0!==e.part&&null!==e.part?ts.fromPartial(e.part):void 0,t.composite=void 0!==e.composite&&null!==e.composite?ty.fromPartial(e.composite):void 0,t}};function tv(e){return null!=e}ea().util.Long!==eo&&(ea().util.Long=eo,ea().configure());let tg="xmtp.message_contents";function tb(){return{createdNs:eo.UZERO,secp256k1:void 0,publicKey:void 0}}let tw={encode:(e,t=ea().Writer.create())=>(e.createdNs.isZero()||t.uint32(8).uint64(e.createdNs),void 0!==e.secp256k1&&tS.encode(e.secp256k1,t.uint32(18).fork()).ldelim(),void 0!==e.publicKey&&ek.encode(e.publicKey,t.uint32(26).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=tb();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.createdNs=r.uint64();break;case 2:n.secp256k1=tS.decode(r,r.uint32());break;case 3:n.publicKey=ek.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({createdNs:tU(e.createdNs)?eo.fromValue(e.createdNs):eo.UZERO,secp256k1:tU(e.secp256k1)?tS.fromJSON(e.secp256k1):void 0,publicKey:tU(e.publicKey)?ek.fromJSON(e.publicKey):void 0}),toJSON(e){let t={};return void 0!==e.createdNs&&(t.createdNs=(e.createdNs||eo.UZERO).toString()),void 0!==e.secp256k1&&(t.secp256k1=e.secp256k1?tS.toJSON(e.secp256k1):void 0),void 0!==e.publicKey&&(t.publicKey=e.publicKey?ek.toJSON(e.publicKey):void 0),t},fromPartial(e){let t=tb();return t.createdNs=void 0!==e.createdNs&&null!==e.createdNs?eo.fromValue(e.createdNs):eo.UZERO,t.secp256k1=void 0!==e.secp256k1&&null!==e.secp256k1?tS.fromPartial(e.secp256k1):void 0,t.publicKey=void 0!==e.publicKey&&null!==e.publicKey?ek.fromPartial(e.publicKey):void 0,t}};function t_(){return{bytes:new Uint8Array}}let tS={encode:(e,t=ea().Writer.create())=>(0!==e.bytes.length&&t.uint32(10).bytes(e.bytes),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=t_();for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.bytes=r.bytes():r.skipType(7&o)}return n},fromJSON:e=>({bytes:tU(e.bytes)?tI(e.bytes):new Uint8Array}),toJSON(e){let t={};return void 0!==e.bytes&&(t.bytes=tM(void 0!==e.bytes?e.bytes:new Uint8Array)),t},fromPartial(e){var t;let r=t_();return r.bytes=null!==(t=e.bytes)&&void 0!==t?t:new Uint8Array,r}},tE={encode(e,t=ea().Writer.create()){for(let r of(void 0!==e.identityKey&&tw.encode(e.identityKey,t.uint32(10).fork()).ldelim(),e.preKeys))tw.encode(r,t.uint32(18).fork()).ldelim();return t},decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={identityKey:void 0,preKeys:[]};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.identityKey=tw.decode(r,r.uint32());break;case 2:n.preKeys.push(tw.decode(r,r.uint32()));break;default:r.skipType(7&o)}}return n},fromJSON:e=>({identityKey:tU(e.identityKey)?tw.fromJSON(e.identityKey):void 0,preKeys:Array.isArray(null==e?void 0:e.preKeys)?e.preKeys.map(e=>tw.fromJSON(e)):[]}),toJSON(e){let t={};return void 0!==e.identityKey&&(t.identityKey=e.identityKey?tw.toJSON(e.identityKey):void 0),e.preKeys?t.preKeys=e.preKeys.map(e=>e?tw.toJSON(e):void 0):t.preKeys=[],t},fromPartial(e){var t;let r={identityKey:void 0,preKeys:[]};return r.identityKey=void 0!==e.identityKey&&null!==e.identityKey?tw.fromPartial(e.identityKey):void 0,r.preKeys=(null===(t=e.preKeys)||void 0===t?void 0:t.map(e=>tw.fromPartial(e)))||[],r}};function tk(){return{timestamp:eo.UZERO,secp256k1:void 0,publicKey:void 0}}let tN={encode:(e,t=ea().Writer.create())=>(e.timestamp.isZero()||t.uint32(8).uint64(e.timestamp),void 0!==e.secp256k1&&tP.encode(e.secp256k1,t.uint32(18).fork()).ldelim(),void 0!==e.publicKey&&eP.encode(e.publicKey,t.uint32(26).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=tk();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.timestamp=r.uint64();break;case 2:n.secp256k1=tP.decode(r,r.uint32());break;case 3:n.publicKey=eP.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({timestamp:tU(e.timestamp)?eo.fromValue(e.timestamp):eo.UZERO,secp256k1:tU(e.secp256k1)?tP.fromJSON(e.secp256k1):void 0,publicKey:tU(e.publicKey)?eP.fromJSON(e.publicKey):void 0}),toJSON(e){let t={};return void 0!==e.timestamp&&(t.timestamp=(e.timestamp||eo.UZERO).toString()),void 0!==e.secp256k1&&(t.secp256k1=e.secp256k1?tP.toJSON(e.secp256k1):void 0),void 0!==e.publicKey&&(t.publicKey=e.publicKey?eP.toJSON(e.publicKey):void 0),t},fromPartial(e){let t=tk();return t.timestamp=void 0!==e.timestamp&&null!==e.timestamp?eo.fromValue(e.timestamp):eo.UZERO,t.secp256k1=void 0!==e.secp256k1&&null!==e.secp256k1?tP.fromPartial(e.secp256k1):void 0,t.publicKey=void 0!==e.publicKey&&null!==e.publicKey?eP.fromPartial(e.publicKey):void 0,t}};function tA(){return{bytes:new Uint8Array}}let tP={encode:(e,t=ea().Writer.create())=>(0!==e.bytes.length&&t.uint32(10).bytes(e.bytes),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=tA();for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.bytes=r.bytes():r.skipType(7&o)}return n},fromJSON:e=>({bytes:tU(e.bytes)?tI(e.bytes):new Uint8Array}),toJSON(e){let t={};return void 0!==e.bytes&&(t.bytes=tM(void 0!==e.bytes?e.bytes:new Uint8Array)),t},fromPartial(e){var t;let r=tA();return r.bytes=null!==(t=e.bytes)&&void 0!==t?t:new Uint8Array,r}},tx={encode(e,t=ea().Writer.create()){for(let r of(void 0!==e.identityKey&&tN.encode(e.identityKey,t.uint32(10).fork()).ldelim(),e.preKeys))tN.encode(r,t.uint32(18).fork()).ldelim();return t},decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={identityKey:void 0,preKeys:[]};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.identityKey=tN.decode(r,r.uint32());break;case 2:n.preKeys.push(tN.decode(r,r.uint32()));break;default:r.skipType(7&o)}}return n},fromJSON:e=>({identityKey:tU(e.identityKey)?tN.fromJSON(e.identityKey):void 0,preKeys:Array.isArray(null==e?void 0:e.preKeys)?e.preKeys.map(e=>tN.fromJSON(e)):[]}),toJSON(e){let t={};return void 0!==e.identityKey&&(t.identityKey=e.identityKey?tN.toJSON(e.identityKey):void 0),e.preKeys?t.preKeys=e.preKeys.map(e=>e?tN.toJSON(e):void 0):t.preKeys=[],t},fromPartial(e){var t;let r={identityKey:void 0,preKeys:[]};return r.identityKey=void 0!==e.identityKey&&null!==e.identityKey?tN.fromPartial(e.identityKey):void 0,r.preKeys=(null===(t=e.preKeys)||void 0===t?void 0:t.map(e=>tN.fromPartial(e)))||[],r}},tO={encode:(e,t=ea().Writer.create())=>(void 0!==e.v1&&tx.encode(e.v1,t.uint32(10).fork()).ldelim(),void 0!==e.v2&&tE.encode(e.v2,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={v1:void 0,v2:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.v1=tx.decode(r,r.uint32());break;case 2:n.v2=tE.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({v1:tU(e.v1)?tx.fromJSON(e.v1):void 0,v2:tU(e.v2)?tE.fromJSON(e.v2):void 0}),toJSON(e){let t={};return void 0!==e.v1&&(t.v1=e.v1?tx.toJSON(e.v1):void 0),void 0!==e.v2&&(t.v2=e.v2?tE.toJSON(e.v2):void 0),t},fromPartial(e){let t={v1:void 0,v2:void 0};return t.v1=void 0!==e.v1&&null!==e.v1?tx.fromPartial(e.v1):void 0,t.v2=void 0!==e.v2&&null!==e.v2?tE.fromPartial(e.v2):void 0,t}};function tT(){return{walletPreKey:new Uint8Array,ciphertext:void 0}}let tR={encode:(e,t=ea().Writer.create())=>(0!==e.walletPreKey.length&&t.uint32(10).bytes(e.walletPreKey),void 0!==e.ciphertext&&eV.encode(e.ciphertext,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=tT();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.walletPreKey=r.bytes();break;case 2:n.ciphertext=eV.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({walletPreKey:tU(e.walletPreKey)?tI(e.walletPreKey):new Uint8Array,ciphertext:tU(e.ciphertext)?eV.fromJSON(e.ciphertext):void 0}),toJSON(e){let t={};return void 0!==e.walletPreKey&&(t.walletPreKey=tM(void 0!==e.walletPreKey?e.walletPreKey:new Uint8Array)),void 0!==e.ciphertext&&(t.ciphertext=e.ciphertext?eV.toJSON(e.ciphertext):void 0),t},fromPartial(e){var t;let r=tT();return r.walletPreKey=null!==(t=e.walletPreKey)&&void 0!==t?t:new Uint8Array,r.ciphertext=void 0!==e.ciphertext&&null!==e.ciphertext?eV.fromPartial(e.ciphertext):void 0,r}},tB={encode:(e,t=ea().Writer.create())=>(void 0!==e.v1&&tR.encode(e.v1,t.uint32(10).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={v1:void 0};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.v1=tR.decode(r,r.uint32()):r.skipType(7&o)}return n},fromJSON:e=>({v1:tU(e.v1)?tR.fromJSON(e.v1):void 0}),toJSON(e){let t={};return void 0!==e.v1&&(t.v1=e.v1?tR.toJSON(e.v1):void 0),t},fromPartial(e){let t={v1:void 0};return t.v1=void 0!==e.v1&&null!==e.v1?tR.fromPartial(e.v1):void 0,t}};var tC=(()=>{if(void 0!==tC)return tC;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function tI(e){if(tC.Buffer)return Uint8Array.from(tC.Buffer.from(e,"base64"));{let t=tC.atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}}function tM(e){if(tC.Buffer)return tC.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),tC.btoa(t.join(""))}}function tU(e){return null!=e}ea().util.Long!==eo&&(ea().util.Long=eo,ea().configure());let tK="xmtp.message_contents",tD={encode:(e,t=ea().Writer.create())=>(void 0!==e.keyBundle&&eT.encode(e.keyBundle,t.uint32(10).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={keyBundle:void 0};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.keyBundle=eT.decode(r,r.uint32()):r.skipType(7&o)}return n},fromJSON:e=>({keyBundle:tJ(e.keyBundle)?eT.fromJSON(e.keyBundle):void 0}),toJSON(e){let t={};return void 0!==e.keyBundle&&(t.keyBundle=e.keyBundle?eT.toJSON(e.keyBundle):void 0),t},fromPartial(e){let t={keyBundle:void 0};return t.keyBundle=void 0!==e.keyBundle&&null!==e.keyBundle?eT.fromPartial(e.keyBundle):void 0,t}},tj={encode:(e,t=ea().Writer.create())=>(void 0!==e.keyBundle&&eN.encode(e.keyBundle,t.uint32(10).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={keyBundle:void 0};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.keyBundle=eN.decode(r,r.uint32()):r.skipType(7&o)}return n},fromJSON:e=>({keyBundle:tJ(e.keyBundle)?eN.fromJSON(e.keyBundle):void 0}),toJSON(e){let t={};return void 0!==e.keyBundle&&(t.keyBundle=e.keyBundle?eN.toJSON(e.keyBundle):void 0),t},fromPartial(e){let t={keyBundle:void 0};return t.keyBundle=void 0!==e.keyBundle&&null!==e.keyBundle?eN.fromPartial(e.keyBundle):void 0,t}},tL={encode:(e,t=ea().Writer.create())=>(void 0!==e.v1&&tD.encode(e.v1,t.uint32(10).fork()).ldelim(),void 0!==e.v2&&tj.encode(e.v2,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={v1:void 0,v2:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.v1=tD.decode(r,r.uint32());break;case 2:n.v2=tj.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({v1:tJ(e.v1)?tD.fromJSON(e.v1):void 0,v2:tJ(e.v2)?tj.fromJSON(e.v2):void 0}),toJSON(e){let t={};return void 0!==e.v1&&(t.v1=e.v1?tD.toJSON(e.v1):void 0),void 0!==e.v2&&(t.v2=e.v2?tj.toJSON(e.v2):void 0),t},fromPartial(e){let t={v1:void 0,v2:void 0};return t.v1=void 0!==e.v1&&null!==e.v1?tD.fromPartial(e.v1):void 0,t.v2=void 0!==e.v2&&null!==e.v2?tj.fromPartial(e.v2):void 0,t}};function tJ(e){return null!=e}ea().util.Long!==eo&&(ea().util.Long=eo,ea().configure());let tF="xmtp.message_contents",tq={encode:(e,t=ea().Writer.create())=>(""!==e.topic&&t.uint32(10).string(e.topic),void 0!==e.context&&tG.encode(e.context,t.uint32(18).fork()).ldelim(),void 0!==e.aes256GcmHkdfSha256&&tz.encode(e.aes256GcmHkdfSha256,t.uint32(26).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={topic:"",context:void 0,aes256GcmHkdfSha256:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.topic=r.string();break;case 2:n.context=tG.decode(r,r.uint32());break;case 3:n.aes256GcmHkdfSha256=tz.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({topic:t2(e.topic)?String(e.topic):"",context:t2(e.context)?tG.fromJSON(e.context):void 0,aes256GcmHkdfSha256:t2(e.aes256GcmHkdfSha256)?tz.fromJSON(e.aes256GcmHkdfSha256):void 0}),toJSON(e){let t={};return void 0!==e.topic&&(t.topic=e.topic),void 0!==e.context&&(t.context=e.context?tG.toJSON(e.context):void 0),void 0!==e.aes256GcmHkdfSha256&&(t.aes256GcmHkdfSha256=e.aes256GcmHkdfSha256?tz.toJSON(e.aes256GcmHkdfSha256):void 0),t},fromPartial(e){var t;let r={topic:"",context:void 0,aes256GcmHkdfSha256:void 0};return r.topic=null!==(t=e.topic)&&void 0!==t?t:"",r.context=void 0!==e.context&&null!==e.context?tG.fromPartial(e.context):void 0,r.aes256GcmHkdfSha256=void 0!==e.aes256GcmHkdfSha256&&null!==e.aes256GcmHkdfSha256?tz.fromPartial(e.aes256GcmHkdfSha256):void 0,r}};function tV(){return{keyMaterial:new Uint8Array}}let tz={encode:(e,t=ea().Writer.create())=>(0!==e.keyMaterial.length&&t.uint32(10).bytes(e.keyMaterial),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=tV();for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.keyMaterial=r.bytes():r.skipType(7&o)}return n},fromJSON:e=>({keyMaterial:t2(e.keyMaterial)?t0(e.keyMaterial):new Uint8Array}),toJSON(e){let t={};return void 0!==e.keyMaterial&&(t.keyMaterial=t1(void 0!==e.keyMaterial?e.keyMaterial:new Uint8Array)),t},fromPartial(e){var t;let r=tV();return r.keyMaterial=null!==(t=e.keyMaterial)&&void 0!==t?t:new Uint8Array,r}},tG={encode:(e,t=ea().Writer.create())=>(""!==e.conversationId&&t.uint32(10).string(e.conversationId),Object.entries(e.metadata).forEach(([e,r])=>{tH.encode({key:e,value:r},t.uint32(18).fork()).ldelim()}),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={conversationId:"",metadata:{}};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.conversationId=r.string();break;case 2:let s=tH.decode(r,r.uint32());void 0!==s.value&&(n.metadata[s.key]=s.value);break;default:r.skipType(7&o)}}return n},fromJSON(e){var t;return{conversationId:t2(e.conversationId)?String(e.conversationId):"",metadata:"object"==typeof(t=e.metadata)&&null!==t?Object.entries(e.metadata).reduce((e,[t,r])=>(e[t]=String(r),e),{}):{}}},toJSON(e){let t={};return void 0!==e.conversationId&&(t.conversationId=e.conversationId),t.metadata={},e.metadata&&Object.entries(e.metadata).forEach(([e,r])=>{t.metadata[e]=r}),t},fromPartial(e){var t,r;let i={conversationId:"",metadata:{}};return i.conversationId=null!==(t=e.conversationId)&&void 0!==t?t:"",i.metadata=Object.entries(null!==(r=e.metadata)&&void 0!==r?r:{}).reduce((e,[t,r])=>(void 0!==r&&(e[t]=String(r)),e),{}),i}},tH={encode:(e,t=ea().Writer.create())=>(""!==e.key&&t.uint32(10).string(e.key),""!==e.value&&t.uint32(18).string(e.value),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={key:"",value:""};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.key=r.string();break;case 2:n.value=r.string();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({key:t2(e.key)?String(e.key):"",value:t2(e.value)?String(e.value):""}),toJSON(e){let t={};return void 0!==e.key&&(t.key=e.key),void 0!==e.value&&(t.value=e.value),t},fromPartial(e){var t,r;let i={key:"",value:""};return i.key=null!==(t=e.key)&&void 0!==t?t:"",i.value=null!==(r=e.value)&&void 0!==r?r:"",i}};function tW(){return{sender:void 0,recipient:void 0,createdNs:eo.UZERO}}let tZ={encode:(e,t=ea().Writer.create())=>(void 0!==e.sender&&eN.encode(e.sender,t.uint32(10).fork()).ldelim(),void 0!==e.recipient&&eN.encode(e.recipient,t.uint32(18).fork()).ldelim(),e.createdNs.isZero()||t.uint32(24).uint64(e.createdNs),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=tW();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.sender=eN.decode(r,r.uint32());break;case 2:n.recipient=eN.decode(r,r.uint32());break;case 3:n.createdNs=r.uint64();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({sender:t2(e.sender)?eN.fromJSON(e.sender):void 0,recipient:t2(e.recipient)?eN.fromJSON(e.recipient):void 0,createdNs:t2(e.createdNs)?eo.fromValue(e.createdNs):eo.UZERO}),toJSON(e){let t={};return void 0!==e.sender&&(t.sender=e.sender?eN.toJSON(e.sender):void 0),void 0!==e.recipient&&(t.recipient=e.recipient?eN.toJSON(e.recipient):void 0),void 0!==e.createdNs&&(t.createdNs=(e.createdNs||eo.UZERO).toString()),t},fromPartial(e){let t=tW();return t.sender=void 0!==e.sender&&null!==e.sender?eN.fromPartial(e.sender):void 0,t.recipient=void 0!==e.recipient&&null!==e.recipient?eN.fromPartial(e.recipient):void 0,t.createdNs=void 0!==e.createdNs&&null!==e.createdNs?eo.fromValue(e.createdNs):eo.UZERO,t}};function t$(){return{headerBytes:new Uint8Array,ciphertext:void 0}}let tX={encode:(e,t=ea().Writer.create())=>(0!==e.headerBytes.length&&t.uint32(10).bytes(e.headerBytes),void 0!==e.ciphertext&&eV.encode(e.ciphertext,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=t$();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.headerBytes=r.bytes();break;case 2:n.ciphertext=eV.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({headerBytes:t2(e.headerBytes)?t0(e.headerBytes):new Uint8Array,ciphertext:t2(e.ciphertext)?eV.fromJSON(e.ciphertext):void 0}),toJSON(e){let t={};return void 0!==e.headerBytes&&(t.headerBytes=t1(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),void 0!==e.ciphertext&&(t.ciphertext=e.ciphertext?eV.toJSON(e.ciphertext):void 0),t},fromPartial(e){var t;let r=t$();return r.headerBytes=null!==(t=e.headerBytes)&&void 0!==t?t:new Uint8Array,r.ciphertext=void 0!==e.ciphertext&&null!==e.ciphertext?eV.fromPartial(e.ciphertext):void 0,r}},tY={encode:(e,t=ea().Writer.create())=>(void 0!==e.v1&&tX.encode(e.v1,t.uint32(10).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={v1:void 0};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.v1=tX.decode(r,r.uint32()):r.skipType(7&o)}return n},fromJSON:e=>({v1:t2(e.v1)?tX.fromJSON(e.v1):void 0}),toJSON(e){let t={};return void 0!==e.v1&&(t.v1=e.v1?tX.toJSON(e.v1):void 0),t},fromPartial(e){let t={v1:void 0};return t.v1=void 0!==e.v1&&null!==e.v1?tX.fromPartial(e.v1):void 0,t}};var tQ=(()=>{if(void 0!==tQ)return tQ;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function t0(e){if(tQ.Buffer)return Uint8Array.from(tQ.Buffer.from(e,"base64"));{let t=tQ.atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}}function t1(e){if(tQ.Buffer)return tQ.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),tQ.btoa(t.join(""))}}function t2(e){return null!=e}ea().util.Long!==eo&&(ea().util.Long=eo,ea().configure());let t3="xmtp.keystore_api.v1";function t6(e){switch(e){case 0:case"ERROR_CODE_UNSPECIFIED":return o.ERROR_CODE_UNSPECIFIED;case 1:case"ERROR_CODE_INVALID_INPUT":return o.ERROR_CODE_INVALID_INPUT;case 2:case"ERROR_CODE_NO_MATCHING_PREKEY":return o.ERROR_CODE_NO_MATCHING_PREKEY;default:return o.UNRECOGNIZED}}function t5(e){switch(e){case o.ERROR_CODE_UNSPECIFIED:return"ERROR_CODE_UNSPECIFIED";case o.ERROR_CODE_INVALID_INPUT:return"ERROR_CODE_INVALID_INPUT";case o.ERROR_CODE_NO_MATCHING_PREKEY:return"ERROR_CODE_NO_MATCHING_PREKEY";case o.UNRECOGNIZED:default:return"UNRECOGNIZED"}}!function(e){e[e.ERROR_CODE_UNSPECIFIED=0]="ERROR_CODE_UNSPECIFIED",e[e.ERROR_CODE_INVALID_INPUT=1]="ERROR_CODE_INVALID_INPUT",e[e.ERROR_CODE_NO_MATCHING_PREKEY=2]="ERROR_CODE_NO_MATCHING_PREKEY",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(o||(o={}));let t8={encode:(e,t=ea().Writer.create())=>(""!==e.message&&t.uint32(10).string(e.message),0!==e.code&&t.uint32(16).int32(e.code),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={message:"",code:0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.message=r.string();break;case 2:n.code=r.int32();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({message:rR(e.message)?String(e.message):"",code:rR(e.code)?t6(e.code):0}),toJSON(e){let t={};return void 0!==e.message&&(t.message=e.message),void 0!==e.code&&(t.code=t5(e.code)),t},fromPartial(e){var t,r;let i={message:"",code:0};return i.message=null!==(t=e.message)&&void 0!==t?t:"",i.code=null!==(r=e.code)&&void 0!==r?r:0,i}};function t4(){return{topic:"",createdNs:eo.UZERO,context:void 0}}let t7={encode:(e,t=ea().Writer.create())=>(""!==e.topic&&t.uint32(10).string(e.topic),e.createdNs.isZero()||t.uint32(16).uint64(e.createdNs),void 0!==e.context&&tG.encode(e.context,t.uint32(26).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=t4();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.topic=r.string();break;case 2:n.createdNs=r.uint64();break;case 3:n.context=tG.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({topic:rR(e.topic)?String(e.topic):"",createdNs:rR(e.createdNs)?eo.fromValue(e.createdNs):eo.UZERO,context:rR(e.context)?tG.fromJSON(e.context):void 0}),toJSON(e){let t={};return void 0!==e.topic&&(t.topic=e.topic),void 0!==e.createdNs&&(t.createdNs=(e.createdNs||eo.UZERO).toString()),void 0!==e.context&&(t.context=e.context?tG.toJSON(e.context):void 0),t},fromPartial(e){var t;let r=t4();return r.topic=null!==(t=e.topic)&&void 0!==t?t:"",r.createdNs=void 0!==e.createdNs&&null!==e.createdNs?eo.fromValue(e.createdNs):eo.UZERO,r.context=void 0!==e.context&&null!==e.context?tG.fromPartial(e.context):void 0,r}},t9={encode(e,t=ea().Writer.create()){for(let r of e.requests)rt.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={requests:[]};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.requests.push(rt.decode(r,r.uint32())):r.skipType(7&o)}return n},fromJSON:e=>({requests:Array.isArray(null==e?void 0:e.requests)?e.requests.map(e=>rt.fromJSON(e)):[]}),toJSON(e){let t={};return e.requests?t.requests=e.requests.map(e=>e?rt.toJSON(e):void 0):t.requests=[],t},fromPartial(e){var t;let r={requests:[]};return r.requests=(null===(t=e.requests)||void 0===t?void 0:t.map(e=>rt.fromPartial(e)))||[],r}};function re(){return{payload:void 0,peerKeys:void 0,headerBytes:new Uint8Array,isSender:!1}}let rt={encode:(e,t=ea().Writer.create())=>(void 0!==e.payload&&eV.encode(e.payload,t.uint32(10).fork()).ldelim(),void 0!==e.peerKeys&&eT.encode(e.peerKeys,t.uint32(18).fork()).ldelim(),0!==e.headerBytes.length&&t.uint32(26).bytes(e.headerBytes),!0===e.isSender&&t.uint32(32).bool(e.isSender),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=re();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.payload=eV.decode(r,r.uint32());break;case 2:n.peerKeys=eT.decode(r,r.uint32());break;case 3:n.headerBytes=r.bytes();break;case 4:n.isSender=r.bool();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({payload:rR(e.payload)?eV.fromJSON(e.payload):void 0,peerKeys:rR(e.peerKeys)?eT.fromJSON(e.peerKeys):void 0,headerBytes:rR(e.headerBytes)?rO(e.headerBytes):new Uint8Array,isSender:!!rR(e.isSender)&&Boolean(e.isSender)}),toJSON(e){let t={};return void 0!==e.payload&&(t.payload=e.payload?eV.toJSON(e.payload):void 0),void 0!==e.peerKeys&&(t.peerKeys=e.peerKeys?eT.toJSON(e.peerKeys):void 0),void 0!==e.headerBytes&&(t.headerBytes=rT(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),void 0!==e.isSender&&(t.isSender=e.isSender),t},fromPartial(e){var t,r;let i=re();return i.payload=void 0!==e.payload&&null!==e.payload?eV.fromPartial(e.payload):void 0,i.peerKeys=void 0!==e.peerKeys&&null!==e.peerKeys?eT.fromPartial(e.peerKeys):void 0,i.headerBytes=null!==(t=e.headerBytes)&&void 0!==t?t:new Uint8Array,i.isSender=null!==(r=e.isSender)&&void 0!==r&&r,i}},rr={encode(e,t=ea().Writer.create()){for(let r of e.responses)ri.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={responses:[]};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.responses.push(ri.decode(r,r.uint32())):r.skipType(7&o)}return n},fromJSON:e=>({responses:Array.isArray(null==e?void 0:e.responses)?e.responses.map(e=>ri.fromJSON(e)):[]}),toJSON(e){let t={};return e.responses?t.responses=e.responses.map(e=>e?ri.toJSON(e):void 0):t.responses=[],t},fromPartial(e){var t;let r={responses:[]};return r.responses=(null===(t=e.responses)||void 0===t?void 0:t.map(e=>ri.fromPartial(e)))||[],r}},ri={encode:(e,t=ea().Writer.create())=>(void 0!==e.result&&ro.encode(e.result,t.uint32(10).fork()).ldelim(),void 0!==e.error&&t8.encode(e.error,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={result:void 0,error:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.result=ro.decode(r,r.uint32());break;case 2:n.error=t8.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({result:rR(e.result)?ro.fromJSON(e.result):void 0,error:rR(e.error)?t8.fromJSON(e.error):void 0}),toJSON(e){let t={};return void 0!==e.result&&(t.result=e.result?ro.toJSON(e.result):void 0),void 0!==e.error&&(t.error=e.error?t8.toJSON(e.error):void 0),t},fromPartial(e){let t={result:void 0,error:void 0};return t.result=void 0!==e.result&&null!==e.result?ro.fromPartial(e.result):void 0,t.error=void 0!==e.error&&null!==e.error?t8.fromPartial(e.error):void 0,t}};function rn(){return{decrypted:new Uint8Array}}let ro={encode:(e,t=ea().Writer.create())=>(0!==e.decrypted.length&&t.uint32(10).bytes(e.decrypted),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=rn();for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.decrypted=r.bytes():r.skipType(7&o)}return n},fromJSON:e=>({decrypted:rR(e.decrypted)?rO(e.decrypted):new Uint8Array}),toJSON(e){let t={};return void 0!==e.decrypted&&(t.decrypted=rT(void 0!==e.decrypted?e.decrypted:new Uint8Array)),t},fromPartial(e){var t;let r=rn();return r.decrypted=null!==(t=e.decrypted)&&void 0!==t?t:new Uint8Array,r}},rs={encode(e,t=ea().Writer.create()){for(let r of e.requests)rl.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={requests:[]};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.requests.push(rl.decode(r,r.uint32())):r.skipType(7&o)}return n},fromJSON:e=>({requests:Array.isArray(null==e?void 0:e.requests)?e.requests.map(e=>rl.fromJSON(e)):[]}),toJSON(e){let t={};return e.requests?t.requests=e.requests.map(e=>e?rl.toJSON(e):void 0):t.requests=[],t},fromPartial(e){var t;let r={requests:[]};return r.requests=(null===(t=e.requests)||void 0===t?void 0:t.map(e=>rl.fromPartial(e)))||[],r}};function ra(){return{payload:void 0,headerBytes:new Uint8Array,contentTopic:""}}let rl={encode:(e,t=ea().Writer.create())=>(void 0!==e.payload&&eV.encode(e.payload,t.uint32(10).fork()).ldelim(),0!==e.headerBytes.length&&t.uint32(18).bytes(e.headerBytes),""!==e.contentTopic&&t.uint32(26).string(e.contentTopic),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=ra();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.payload=eV.decode(r,r.uint32());break;case 2:n.headerBytes=r.bytes();break;case 3:n.contentTopic=r.string();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({payload:rR(e.payload)?eV.fromJSON(e.payload):void 0,headerBytes:rR(e.headerBytes)?rO(e.headerBytes):new Uint8Array,contentTopic:rR(e.contentTopic)?String(e.contentTopic):""}),toJSON(e){let t={};return void 0!==e.payload&&(t.payload=e.payload?eV.toJSON(e.payload):void 0),void 0!==e.headerBytes&&(t.headerBytes=rT(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),void 0!==e.contentTopic&&(t.contentTopic=e.contentTopic),t},fromPartial(e){var t,r;let i=ra();return i.payload=void 0!==e.payload&&null!==e.payload?eV.fromPartial(e.payload):void 0,i.headerBytes=null!==(t=e.headerBytes)&&void 0!==t?t:new Uint8Array,i.contentTopic=null!==(r=e.contentTopic)&&void 0!==r?r:"",i}},ru={encode(e,t=ea().Writer.create()){for(let r of e.requests)rd.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={requests:[]};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.requests.push(rd.decode(r,r.uint32())):r.skipType(7&o)}return n},fromJSON:e=>({requests:Array.isArray(null==e?void 0:e.requests)?e.requests.map(e=>rd.fromJSON(e)):[]}),toJSON(e){let t={};return e.requests?t.requests=e.requests.map(e=>e?rd.toJSON(e):void 0):t.requests=[],t},fromPartial(e){var t;let r={requests:[]};return r.requests=(null===(t=e.requests)||void 0===t?void 0:t.map(e=>rd.fromPartial(e)))||[],r}};function rc(){return{recipient:void 0,payload:new Uint8Array,headerBytes:new Uint8Array}}let rd={encode:(e,t=ea().Writer.create())=>(void 0!==e.recipient&&eT.encode(e.recipient,t.uint32(10).fork()).ldelim(),0!==e.payload.length&&t.uint32(18).bytes(e.payload),0!==e.headerBytes.length&&t.uint32(26).bytes(e.headerBytes),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=rc();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.recipient=eT.decode(r,r.uint32());break;case 2:n.payload=r.bytes();break;case 3:n.headerBytes=r.bytes();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({recipient:rR(e.recipient)?eT.fromJSON(e.recipient):void 0,payload:rR(e.payload)?rO(e.payload):new Uint8Array,headerBytes:rR(e.headerBytes)?rO(e.headerBytes):new Uint8Array}),toJSON(e){let t={};return void 0!==e.recipient&&(t.recipient=e.recipient?eT.toJSON(e.recipient):void 0),void 0!==e.payload&&(t.payload=rT(void 0!==e.payload?e.payload:new Uint8Array)),void 0!==e.headerBytes&&(t.headerBytes=rT(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),t},fromPartial(e){var t,r;let i=rc();return i.recipient=void 0!==e.recipient&&null!==e.recipient?eT.fromPartial(e.recipient):void 0,i.payload=null!==(t=e.payload)&&void 0!==t?t:new Uint8Array,i.headerBytes=null!==(r=e.headerBytes)&&void 0!==r?r:new Uint8Array,i}},rh={encode(e,t=ea().Writer.create()){for(let r of e.responses)rf.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={responses:[]};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.responses.push(rf.decode(r,r.uint32())):r.skipType(7&o)}return n},fromJSON:e=>({responses:Array.isArray(null==e?void 0:e.responses)?e.responses.map(e=>rf.fromJSON(e)):[]}),toJSON(e){let t={};return e.responses?t.responses=e.responses.map(e=>e?rf.toJSON(e):void 0):t.responses=[],t},fromPartial(e){var t;let r={responses:[]};return r.responses=(null===(t=e.responses)||void 0===t?void 0:t.map(e=>rf.fromPartial(e)))||[],r}},rf={encode:(e,t=ea().Writer.create())=>(void 0!==e.result&&rp.encode(e.result,t.uint32(10).fork()).ldelim(),void 0!==e.error&&t8.encode(e.error,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={result:void 0,error:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.result=rp.decode(r,r.uint32());break;case 2:n.error=t8.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({result:rR(e.result)?rp.fromJSON(e.result):void 0,error:rR(e.error)?t8.fromJSON(e.error):void 0}),toJSON(e){let t={};return void 0!==e.result&&(t.result=e.result?rp.toJSON(e.result):void 0),void 0!==e.error&&(t.error=e.error?t8.toJSON(e.error):void 0),t},fromPartial(e){let t={result:void 0,error:void 0};return t.result=void 0!==e.result&&null!==e.result?rp.fromPartial(e.result):void 0,t.error=void 0!==e.error&&null!==e.error?t8.fromPartial(e.error):void 0,t}},rp={encode:(e,t=ea().Writer.create())=>(void 0!==e.encrypted&&eV.encode(e.encrypted,t.uint32(10).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={encrypted:void 0};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.encrypted=eV.decode(r,r.uint32()):r.skipType(7&o)}return n},fromJSON:e=>({encrypted:rR(e.encrypted)?eV.fromJSON(e.encrypted):void 0}),toJSON(e){let t={};return void 0!==e.encrypted&&(t.encrypted=e.encrypted?eV.toJSON(e.encrypted):void 0),t},fromPartial(e){let t={encrypted:void 0};return t.encrypted=void 0!==e.encrypted&&null!==e.encrypted?eV.fromPartial(e.encrypted):void 0,t}},ry={encode(e,t=ea().Writer.create()){for(let r of e.requests)rv.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={requests:[]};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.requests.push(rv.decode(r,r.uint32())):r.skipType(7&o)}return n},fromJSON:e=>({requests:Array.isArray(null==e?void 0:e.requests)?e.requests.map(e=>rv.fromJSON(e)):[]}),toJSON(e){let t={};return e.requests?t.requests=e.requests.map(e=>e?rv.toJSON(e):void 0):t.requests=[],t},fromPartial(e){var t;let r={requests:[]};return r.requests=(null===(t=e.requests)||void 0===t?void 0:t.map(e=>rv.fromPartial(e)))||[],r}};function rm(){return{payload:new Uint8Array,headerBytes:new Uint8Array,contentTopic:""}}let rv={encode:(e,t=ea().Writer.create())=>(0!==e.payload.length&&t.uint32(10).bytes(e.payload),0!==e.headerBytes.length&&t.uint32(18).bytes(e.headerBytes),""!==e.contentTopic&&t.uint32(26).string(e.contentTopic),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=rm();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.payload=r.bytes();break;case 2:n.headerBytes=r.bytes();break;case 3:n.contentTopic=r.string();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({payload:rR(e.payload)?rO(e.payload):new Uint8Array,headerBytes:rR(e.headerBytes)?rO(e.headerBytes):new Uint8Array,contentTopic:rR(e.contentTopic)?String(e.contentTopic):""}),toJSON(e){let t={};return void 0!==e.payload&&(t.payload=rT(void 0!==e.payload?e.payload:new Uint8Array)),void 0!==e.headerBytes&&(t.headerBytes=rT(void 0!==e.headerBytes?e.headerBytes:new Uint8Array)),void 0!==e.contentTopic&&(t.contentTopic=e.contentTopic),t},fromPartial(e){var t,r,i;let n=rm();return n.payload=null!==(t=e.payload)&&void 0!==t?t:new Uint8Array,n.headerBytes=null!==(r=e.headerBytes)&&void 0!==r?r:new Uint8Array,n.contentTopic=null!==(i=e.contentTopic)&&void 0!==i?i:"",n}};function rg(){return{context:void 0,recipient:void 0,createdNs:eo.UZERO}}let rb={encode:(e,t=ea().Writer.create())=>(void 0!==e.context&&tG.encode(e.context,t.uint32(10).fork()).ldelim(),void 0!==e.recipient&&eN.encode(e.recipient,t.uint32(18).fork()).ldelim(),e.createdNs.isZero()||t.uint32(24).uint64(e.createdNs),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=rg();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.context=tG.decode(r,r.uint32());break;case 2:n.recipient=eN.decode(r,r.uint32());break;case 3:n.createdNs=r.uint64();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({context:rR(e.context)?tG.fromJSON(e.context):void 0,recipient:rR(e.recipient)?eN.fromJSON(e.recipient):void 0,createdNs:rR(e.createdNs)?eo.fromValue(e.createdNs):eo.UZERO}),toJSON(e){let t={};return void 0!==e.context&&(t.context=e.context?tG.toJSON(e.context):void 0),void 0!==e.recipient&&(t.recipient=e.recipient?eN.toJSON(e.recipient):void 0),void 0!==e.createdNs&&(t.createdNs=(e.createdNs||eo.UZERO).toString()),t},fromPartial(e){let t=rg();return t.context=void 0!==e.context&&null!==e.context?tG.fromPartial(e.context):void 0,t.recipient=void 0!==e.recipient&&null!==e.recipient?eN.fromPartial(e.recipient):void 0,t.createdNs=void 0!==e.createdNs&&null!==e.createdNs?eo.fromValue(e.createdNs):eo.UZERO,t}};function rw(){return{conversation:void 0,payload:new Uint8Array}}let r_={encode:(e,t=ea().Writer.create())=>(void 0!==e.conversation&&t7.encode(e.conversation,t.uint32(10).fork()).ldelim(),0!==e.payload.length&&t.uint32(18).bytes(e.payload),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=rw();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.conversation=t7.decode(r,r.uint32());break;case 2:n.payload=r.bytes();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({conversation:rR(e.conversation)?t7.fromJSON(e.conversation):void 0,payload:rR(e.payload)?rO(e.payload):new Uint8Array}),toJSON(e){let t={};return void 0!==e.conversation&&(t.conversation=e.conversation?t7.toJSON(e.conversation):void 0),void 0!==e.payload&&(t.payload=rT(void 0!==e.payload?e.payload:new Uint8Array)),t},fromPartial(e){var t;let r=rw();return r.conversation=void 0!==e.conversation&&null!==e.conversation?t7.fromPartial(e.conversation):void 0,r.payload=null!==(t=e.payload)&&void 0!==t?t:new Uint8Array,r}},rS={encode(e,t=ea().Writer.create()){for(let r of e.requests)rk.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={requests:[]};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.requests.push(rk.decode(r,r.uint32())):r.skipType(7&o)}return n},fromJSON:e=>({requests:Array.isArray(null==e?void 0:e.requests)?e.requests.map(e=>rk.fromJSON(e)):[]}),toJSON(e){let t={};return e.requests?t.requests=e.requests.map(e=>e?rk.toJSON(e):void 0):t.requests=[],t},fromPartial(e){var t;let r={requests:[]};return r.requests=(null===(t=e.requests)||void 0===t?void 0:t.map(e=>rk.fromPartial(e)))||[],r}};function rE(){return{contentTopic:"",timestampNs:eo.UZERO,payload:new Uint8Array}}let rk={encode:(e,t=ea().Writer.create())=>(""!==e.contentTopic&&t.uint32(10).string(e.contentTopic),e.timestampNs.isZero()||t.uint32(16).uint64(e.timestampNs),0!==e.payload.length&&t.uint32(26).bytes(e.payload),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n=rE();for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.contentTopic=r.string();break;case 2:n.timestampNs=r.uint64();break;case 3:n.payload=r.bytes();break;default:r.skipType(7&o)}}return n},fromJSON:e=>({contentTopic:rR(e.contentTopic)?String(e.contentTopic):"",timestampNs:rR(e.timestampNs)?eo.fromValue(e.timestampNs):eo.UZERO,payload:rR(e.payload)?rO(e.payload):new Uint8Array}),toJSON(e){let t={};return void 0!==e.contentTopic&&(t.contentTopic=e.contentTopic),void 0!==e.timestampNs&&(t.timestampNs=(e.timestampNs||eo.UZERO).toString()),void 0!==e.payload&&(t.payload=rT(void 0!==e.payload?e.payload:new Uint8Array)),t},fromPartial(e){var t,r;let i=rE();return i.contentTopic=null!==(t=e.contentTopic)&&void 0!==t?t:"",i.timestampNs=void 0!==e.timestampNs&&null!==e.timestampNs?eo.fromValue(e.timestampNs):eo.UZERO,i.payload=null!==(r=e.payload)&&void 0!==r?r:new Uint8Array,i}},rN={encode(e,t=ea().Writer.create()){for(let r of e.responses)rA.encode(r,t.uint32(10).fork()).ldelim();return t},decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={responses:[]};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.responses.push(rA.decode(r,r.uint32())):r.skipType(7&o)}return n},fromJSON:e=>({responses:Array.isArray(null==e?void 0:e.responses)?e.responses.map(e=>rA.fromJSON(e)):[]}),toJSON(e){let t={};return e.responses?t.responses=e.responses.map(e=>e?rA.toJSON(e):void 0):t.responses=[],t},fromPartial(e){var t;let r={responses:[]};return r.responses=(null===(t=e.responses)||void 0===t?void 0:t.map(e=>rA.fromPartial(e)))||[],r}},rA={encode:(e,t=ea().Writer.create())=>(void 0!==e.result&&rP.encode(e.result,t.uint32(10).fork()).ldelim(),void 0!==e.error&&t8.encode(e.error,t.uint32(18).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={result:void 0,error:void 0};for(;r.pos<i;){let o=r.uint32();switch(o>>>3){case 1:n.result=rP.decode(r,r.uint32());break;case 2:n.error=t8.decode(r,r.uint32());break;default:r.skipType(7&o)}}return n},fromJSON:e=>({result:rR(e.result)?rP.fromJSON(e.result):void 0,error:rR(e.error)?t8.fromJSON(e.error):void 0}),toJSON(e){let t={};return void 0!==e.result&&(t.result=e.result?rP.toJSON(e.result):void 0),void 0!==e.error&&(t.error=e.error?t8.toJSON(e.error):void 0),t},fromPartial(e){let t={result:void 0,error:void 0};return t.result=void 0!==e.result&&null!==e.result?rP.fromPartial(e.result):void 0,t.error=void 0!==e.error&&null!==e.error?t8.fromPartial(e.error):void 0,t}},rP={encode:(e,t=ea().Writer.create())=>(void 0!==e.conversation&&t7.encode(e.conversation,t.uint32(10).fork()).ldelim(),t),decode(e,t){let r=e instanceof ea().Reader?e:new(ea()).Reader(e),i=void 0===t?r.len:r.pos+t,n={conversation:void 0};for(;r.pos<i;){let o=r.uint32();o>>>3==1?n.conversation=t7.decode(r,r.uint32()):r.skipType(7&o)}return n},fromJSON:e=>({conversation:rR(e.conversation)?t7.fromJSON(e.conversation):void 0}),toJSON(e){let t={};return void 0!==e.conversation&&(t.conversation=e.conversation?t7.toJSON(e.conversation):void 0),t},fromPartial(e){let t={conversation:void 0};return t.conversation=void 0!==e.conversation&&null!==e.conversation?t7.fromPartial(e.conversation):void 0,t}};var rx=(()=>{if(void 0!==rx)return rx;if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw"Unable to locate global object"})();function rO(e){if(rx.Buffer)return Uint8Array.from(rx.Buffer.from(e,"base64"));{let t=rx.atob(e),r=new Uint8Array(t.length);for(let i=0;i<t.length;++i)r[i]=t.charCodeAt(i);return r}}function rT(e){if(rx.Buffer)return rx.Buffer.from(e).toString("base64");{let t=[];return e.forEach(e=>{t.push(String.fromCharCode(e))}),rx.btoa(t.join(""))}}function rR(e){return null!=e}ea().util.Long!==eo&&(ea().util.Long=eo,ea().configure())},8826:function(e){"use strict";!function(t){function r(e){return parseInt(e)===e}function i(e){if(!r(e.length))return!1;for(var t=0;t<e.length;t++)if(!r(e[t])||e[t]<0||e[t]>255)return!1;return!0}function n(e,t){if(e.buffer&&ArrayBuffer.isView(e)&&"Uint8Array"===e.name)return t&&(e=e.slice?e.slice():Array.prototype.slice.call(e)),e;if(Array.isArray(e)){if(!i(e))throw Error("Array contains invalid value: "+e);return new Uint8Array(e)}if(r(e.length)&&i(e))return new Uint8Array(e);throw Error("unsupported array-like object")}function o(e){return new Uint8Array(e)}function s(e,t,r,i,n){null==i&&null==n||(e=e.slice?e.slice(i,n):Array.prototype.slice.call(e,i,n)),t.set(e,r)}var a,l={toBytes:function(e){var t=[],r=0;for(e=encodeURI(e);r<e.length;){var i=e.charCodeAt(r++);37===i?(t.push(parseInt(e.substr(r,2),16)),r+=2):t.push(i)}return n(t)},fromBytes:function(e){for(var t=[],r=0;r<e.length;){var i=e[r];i<128?(t.push(String.fromCharCode(i)),r++):i>191&&i<224?(t.push(String.fromCharCode((31&i)<<6|63&e[r+1])),r+=2):(t.push(String.fromCharCode((15&i)<<12|(63&e[r+1])<<6|63&e[r+2])),r+=3)}return t.join("")}},u=(a="0123456789abcdef",{toBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},fromBytes:function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];t.push(a[(240&i)>>4]+a[15&i])}return t.join("")}}),c={16:10,24:12,32:14},d=[1,2,4,8,16,32,64,128,27,54,108,216,171,77,154,47,94,188,99,198,151,53,106,212,179,125,250,239,197,145],h=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],f=[82,9,106,213,48,54,165,56,191,64,163,158,129,243,215,251,124,227,57,130,155,47,255,135,52,142,67,68,196,222,233,203,84,123,148,50,166,194,35,61,238,76,149,11,66,250,195,78,8,46,161,102,40,217,36,178,118,91,162,73,109,139,209,37,114,248,246,100,134,104,152,22,212,164,92,204,93,101,182,146,108,112,72,80,253,237,185,218,94,21,70,87,167,141,157,132,144,216,171,0,140,188,211,10,247,228,88,5,184,179,69,6,208,44,30,143,202,63,15,2,193,175,189,3,1,19,138,107,58,145,17,65,79,103,220,234,151,242,207,206,240,180,230,115,150,172,116,34,231,173,53,133,226,249,55,232,28,117,223,110,71,241,26,113,29,41,197,137,111,183,98,14,170,24,190,27,252,86,62,75,198,210,121,32,154,219,192,254,120,205,90,244,31,221,168,51,136,7,199,49,177,18,16,89,39,128,236,95,96,81,127,169,25,181,74,13,45,229,122,159,147,201,156,239,160,224,59,77,174,42,245,176,200,235,187,60,131,83,153,97,23,43,4,126,186,119,214,38,225,105,20,99,85,33,12,125],p=[3328402341,4168907908,4000806809,4135287693,4294111757,3597364157,3731845041,2445657428,1613770832,33620227,3462883241,1445669757,3892248089,3050821474,1303096294,3967186586,2412431941,528646813,2311702848,4202528135,4026202645,2992200171,2387036105,4226871307,1101901292,3017069671,1604494077,1169141738,597466303,1403299063,3832705686,2613100635,1974974402,3791519004,1033081774,1277568618,1815492186,2118074177,4126668546,2211236943,1748251740,1369810420,3521504564,4193382664,3799085459,2883115123,1647391059,706024767,134480908,2512897874,1176707941,2646852446,806885416,932615841,168101135,798661301,235341577,605164086,461406363,3756188221,3454790438,1311188841,2142417613,3933566367,302582043,495158174,1479289972,874125870,907746093,3698224818,3025820398,1537253627,2756858614,1983593293,3084310113,2108928974,1378429307,3722699582,1580150641,327451799,2790478837,3117535592,0,3253595436,1075847264,3825007647,2041688520,3059440621,3563743934,2378943302,1740553945,1916352843,2487896798,2555137236,2958579944,2244988746,3151024235,3320835882,1336584933,3992714006,2252555205,2588757463,1714631509,293963156,2319795663,3925473552,67240454,4269768577,2689618160,2017213508,631218106,1269344483,2723238387,1571005438,2151694528,93294474,1066570413,563977660,1882732616,4059428100,1673313503,2008463041,2950355573,1109467491,537923632,3858759450,4260623118,3218264685,2177748300,403442708,638784309,3287084079,3193921505,899127202,2286175436,773265209,2479146071,1437050866,4236148354,2050833735,3362022572,3126681063,840505643,3866325909,3227541664,427917720,2655997905,2749160575,1143087718,1412049534,999329963,193497219,2353415882,3354324521,1807268051,672404540,2816401017,3160301282,369822493,2916866934,3688947771,1681011286,1949973070,336202270,2454276571,201721354,1210328172,3093060836,2680341085,3184776046,1135389935,3294782118,965841320,831886756,3554993207,4068047243,3588745010,2345191491,1849112409,3664604599,26054028,2983581028,2622377682,1235855840,3630984372,2891339514,4092916743,3488279077,3395642799,4101667470,1202630377,268961816,1874508501,4034427016,1243948399,1546530418,941366308,1470539505,1941222599,2546386513,3421038627,2715671932,3899946140,1042226977,2521517021,1639824860,227249030,260737669,3765465232,2084453954,1907733956,3429263018,2420656344,100860677,4160157185,470683154,3261161891,1781871967,2924959737,1773779408,394692241,2579611992,974986535,664706745,3655459128,3958962195,731420851,571543859,3530123707,2849626480,126783113,865375399,765172662,1008606754,361203602,3387549984,2278477385,2857719295,1344809080,2782912378,59542671,1503764984,160008576,437062935,1707065306,3622233649,2218934982,3496503480,2185314755,697932208,1512910199,504303377,2075177163,2824099068,1841019862,739644986],y=[2781242211,2230877308,2582542199,2381740923,234877682,3184946027,2984144751,1418839493,1348481072,50462977,2848876391,2102799147,434634494,1656084439,3863849899,2599188086,1167051466,2636087938,1082771913,2281340285,368048890,3954334041,3381544775,201060592,3963727277,1739838676,4250903202,3930435503,3206782108,4149453988,2531553906,1536934080,3262494647,484572669,2923271059,1783375398,1517041206,1098792767,49674231,1334037708,1550332980,4098991525,886171109,150598129,2481090929,1940642008,1398944049,1059722517,201851908,1385547719,1699095331,1587397571,674240536,2704774806,252314885,3039795866,151914247,908333586,2602270848,1038082786,651029483,1766729511,3447698098,2682942837,454166793,2652734339,1951935532,775166490,758520603,3000790638,4004797018,4217086112,4137964114,1299594043,1639438038,3464344499,2068982057,1054729187,1901997871,2534638724,4121318227,1757008337,0,750906861,1614815264,535035132,3363418545,3988151131,3201591914,1183697867,3647454910,1265776953,3734260298,3566750796,3903871064,1250283471,1807470800,717615087,3847203498,384695291,3313910595,3617213773,1432761139,2484176261,3481945413,283769337,100925954,2180939647,4037038160,1148730428,3123027871,3813386408,4087501137,4267549603,3229630528,2315620239,2906624658,3156319645,1215313976,82966005,3747855548,3245848246,1974459098,1665278241,807407632,451280895,251524083,1841287890,1283575245,337120268,891687699,801369324,3787349855,2721421207,3431482436,959321879,1469301956,4065699751,2197585534,1199193405,2898814052,3887750493,724703513,2514908019,2696962144,2551808385,3516813135,2141445340,1715741218,2119445034,2872807568,2198571144,3398190662,700968686,3547052216,1009259540,2041044702,3803995742,487983883,1991105499,1004265696,1449407026,1316239930,504629770,3683797321,168560134,1816667172,3837287516,1570751170,1857934291,4014189740,2797888098,2822345105,2754712981,936633572,2347923833,852879335,1133234376,1500395319,3084545389,2348912013,1689376213,3533459022,3762923945,3034082412,4205598294,133428468,634383082,2949277029,2398386810,3913789102,403703816,3580869306,2297460856,1867130149,1918643758,607656988,4049053350,3346248884,1368901318,600565992,2090982877,2632479860,557719327,3717614411,3697393085,2249034635,2232388234,2430627952,1115438654,3295786421,2865522278,3633334344,84280067,33027830,303828494,2747425121,1600795957,4188952407,3496589753,2434238086,1486471617,658119965,3106381470,953803233,334231800,3005978776,857870609,3151128937,1890179545,2298973838,2805175444,3056442267,574365214,2450884487,550103529,1233637070,4289353045,2018519080,2057691103,2399374476,4166623649,2148108681,387583245,3664101311,836232934,3330556482,3100665960,3280093505,2955516313,2002398509,287182607,3413881008,4238890068,3597515707,975967766],m=[1671808611,2089089148,2006576759,2072901243,4061003762,1807603307,1873927791,3310653893,810573872,16974337,1739181671,729634347,4263110654,3613570519,2883997099,1989864566,3393556426,2191335298,3376449993,2106063485,4195741690,1508618841,1204391495,4027317232,2917941677,3563566036,2734514082,2951366063,2629772188,2767672228,1922491506,3227229120,3082974647,4246528509,2477669779,644500518,911895606,1061256767,4144166391,3427763148,878471220,2784252325,3845444069,4043897329,1905517169,3631459288,827548209,356461077,67897348,3344078279,593839651,3277757891,405286936,2527147926,84871685,2595565466,118033927,305538066,2157648768,3795705826,3945188843,661212711,2999812018,1973414517,152769033,2208177539,745822252,439235610,455947803,1857215598,1525593178,2700827552,1391895634,994932283,3596728278,3016654259,695947817,3812548067,795958831,2224493444,1408607827,3513301457,0,3979133421,543178784,4229948412,2982705585,1542305371,1790891114,3410398667,3201918910,961245753,1256100938,1289001036,1491644504,3477767631,3496721360,4012557807,2867154858,4212583931,1137018435,1305975373,861234739,2241073541,1171229253,4178635257,33948674,2139225727,1357946960,1011120188,2679776671,2833468328,1374921297,2751356323,1086357568,2408187279,2460827538,2646352285,944271416,4110742005,3168756668,3066132406,3665145818,560153121,271589392,4279952895,4077846003,3530407890,3444343245,202643468,322250259,3962553324,1608629855,2543990167,1154254916,389623319,3294073796,2817676711,2122513534,1028094525,1689045092,1575467613,422261273,1939203699,1621147744,2174228865,1339137615,3699352540,577127458,712922154,2427141008,2290289544,1187679302,3995715566,3100863416,339486740,3732514782,1591917662,186455563,3681988059,3762019296,844522546,978220090,169743370,1239126601,101321734,611076132,1558493276,3260915650,3547250131,2901361580,1655096418,2443721105,2510565781,3828863972,2039214713,3878868455,3359869896,928607799,1840765549,2374762893,3580146133,1322425422,2850048425,1823791212,1459268694,4094161908,3928346602,1706019429,2056189050,2934523822,135794696,3134549946,2022240376,628050469,779246638,472135708,2800834470,3032970164,3327236038,3894660072,3715932637,1956440180,522272287,1272813131,3185336765,2340818315,2323976074,1888542832,1044544574,3049550261,1722469478,1222152264,50660867,4127324150,236067854,1638122081,895445557,1475980887,3117443513,2257655686,3243809217,489110045,2662934430,3778599393,4162055160,2561878936,288563729,1773916777,3648039385,2391345038,2493985684,2612407707,505560094,2274497927,3911240169,3460925390,1442818645,678973480,3749357023,2358182796,2717407649,2306869641,219617805,3218761151,3862026214,1120306242,1756942440,1103331905,2578459033,762796589,252780047,2966125488,1425844308,3151392187,372911126],v=[1667474886,2088535288,2004326894,2071694838,4075949567,1802223062,1869591006,3318043793,808472672,16843522,1734846926,724270422,4278065639,3621216949,2880169549,1987484396,3402253711,2189597983,3385409673,2105378810,4210693615,1499065266,1195886990,4042263547,2913856577,3570689971,2728590687,2947541573,2627518243,2762274643,1920112356,3233831835,3082273397,4261223649,2475929149,640051788,909531756,1061110142,4160160501,3435941763,875846760,2779116625,3857003729,4059105529,1903268834,3638064043,825316194,353713962,67374088,3351728789,589522246,3284360861,404236336,2526454071,84217610,2593830191,117901582,303183396,2155911963,3806477791,3958056653,656894286,2998062463,1970642922,151591698,2206440989,741110872,437923380,454765878,1852748508,1515908788,2694904667,1381168804,993742198,3604373943,3014905469,690584402,3823320797,791638366,2223281939,1398011302,3520161977,0,3991743681,538992704,4244381667,2981218425,1532751286,1785380564,3419096717,3200178535,960056178,1246420628,1280103576,1482221744,3486468741,3503319995,4025428677,2863326543,4227536621,1128514950,1296947098,859002214,2240123921,1162203018,4193849577,33687044,2139062782,1347481760,1010582648,2678045221,2829640523,1364325282,2745433693,1077985408,2408548869,2459086143,2644360225,943212656,4126475505,3166494563,3065430391,3671750063,555836226,269496352,4294908645,4092792573,3537006015,3452783745,202118168,320025894,3974901699,1600119230,2543297077,1145359496,387397934,3301201811,2812801621,2122220284,1027426170,1684319432,1566435258,421079858,1936954854,1616945344,2172753945,1330631070,3705438115,572679748,707427924,2425400123,2290647819,1179044492,4008585671,3099120491,336870440,3739122087,1583276732,185277718,3688593069,3772791771,842159716,976899700,168435220,1229577106,101059084,606366792,1549591736,3267517855,3553849021,2897014595,1650632388,2442242105,2509612081,3840161747,2038008818,3890688725,3368567691,926374254,1835907034,2374863873,3587531953,1313788572,2846482505,1819063512,1448540844,4109633523,3941213647,1701162954,2054852340,2930698567,134748176,3132806511,2021165296,623210314,774795868,471606328,2795958615,3031746419,3334885783,3907527627,3722280097,1953799400,522133822,1263263126,3183336545,2341176845,2324333839,1886425312,1044267644,3048588401,1718004428,1212733584,50529542,4143317495,235803164,1633788866,892690282,1465383342,3115962473,2256965911,3250673817,488449850,2661202215,3789633753,4177007595,2560144171,286339874,1768537042,3654906025,2391705863,2492770099,2610673197,505291324,2273808917,3924369609,3469625735,1431699370,673740880,3755965093,2358021891,2711746649,2307489801,218961690,3217021541,3873845719,1111672452,1751693520,1094828930,2576986153,757954394,252645662,2964376443,1414855848,3149649517,370555436],g=[1374988112,2118214995,437757123,975658646,1001089995,530400753,2902087851,1273168787,540080725,2910219766,2295101073,4110568485,1340463100,3307916247,641025152,3043140495,3736164937,632953703,1172967064,1576976609,3274667266,2169303058,2370213795,1809054150,59727847,361929877,3211623147,2505202138,3569255213,1484005843,1239443753,2395588676,1975683434,4102977912,2572697195,666464733,3202437046,4035489047,3374361702,2110667444,1675577880,3843699074,2538681184,1649639237,2976151520,3144396420,4269907996,4178062228,1883793496,2403728665,2497604743,1383856311,2876494627,1917518562,3810496343,1716890410,3001755655,800440835,2261089178,3543599269,807962610,599762354,33778362,3977675356,2328828971,2809771154,4077384432,1315562145,1708848333,101039829,3509871135,3299278474,875451293,2733856160,92987698,2767645557,193195065,1080094634,1584504582,3178106961,1042385657,2531067453,3711829422,1306967366,2438237621,1908694277,67556463,1615861247,429456164,3602770327,2302690252,1742315127,2968011453,126454664,3877198648,2043211483,2709260871,2084704233,4169408201,0,159417987,841739592,504459436,1817866830,4245618683,260388950,1034867998,908933415,168810852,1750902305,2606453969,607530554,202008497,2472011535,3035535058,463180190,2160117071,1641816226,1517767529,470948374,3801332234,3231722213,1008918595,303765277,235474187,4069246893,766945465,337553864,1475418501,2943682380,4003061179,2743034109,4144047775,1551037884,1147550661,1543208500,2336434550,3408119516,3069049960,3102011747,3610369226,1113818384,328671808,2227573024,2236228733,3535486456,2935566865,3341394285,496906059,3702665459,226906860,2009195472,733156972,2842737049,294930682,1206477858,2835123396,2700099354,1451044056,573804783,2269728455,3644379585,2362090238,2564033334,2801107407,2776292904,3669462566,1068351396,742039012,1350078989,1784663195,1417561698,4136440770,2430122216,775550814,2193862645,2673705150,1775276924,1876241833,3475313331,3366754619,270040487,3902563182,3678124923,3441850377,1851332852,3969562369,2203032232,3868552805,2868897406,566021896,4011190502,3135740889,1248802510,3936291284,699432150,832877231,708780849,3332740144,899835584,1951317047,4236429990,3767586992,866637845,4043610186,1106041591,2144161806,395441711,1984812685,1139781709,3433712980,3835036895,2664543715,1282050075,3240894392,1181045119,2640243204,25965917,4203181171,4211818798,3009879386,2463879762,3910161971,1842759443,2597806476,933301370,1509430414,3943906441,3467192302,3076639029,3776767469,2051518780,2631065433,1441952575,404016761,1942435775,1408749034,1610459739,3745345300,2017778566,3400528769,3110650942,941896748,3265478751,371049330,3168937228,675039627,4279080257,967311729,135050206,3635733660,1683407248,2076935265,3576870512,1215061108,3501741890],b=[1347548327,1400783205,3273267108,2520393566,3409685355,4045380933,2880240216,2471224067,1428173050,4138563181,2441661558,636813900,4233094615,3620022987,2149987652,2411029155,1239331162,1730525723,2554718734,3781033664,46346101,310463728,2743944855,3328955385,3875770207,2501218972,3955191162,3667219033,768917123,3545789473,692707433,1150208456,1786102409,2029293177,1805211710,3710368113,3065962831,401639597,1724457132,3028143674,409198410,2196052529,1620529459,1164071807,3769721975,2226875310,486441376,2499348523,1483753576,428819965,2274680428,3075636216,598438867,3799141122,1474502543,711349675,129166120,53458370,2592523643,2782082824,4063242375,2988687269,3120694122,1559041666,730517276,2460449204,4042459122,2706270690,3446004468,3573941694,533804130,2328143614,2637442643,2695033685,839224033,1973745387,957055980,2856345839,106852767,1371368976,4181598602,1033297158,2933734917,1179510461,3046200461,91341917,1862534868,4284502037,605657339,2547432937,3431546947,2003294622,3182487618,2282195339,954669403,3682191598,1201765386,3917234703,3388507166,0,2198438022,1211247597,2887651696,1315723890,4227665663,1443857720,507358933,657861945,1678381017,560487590,3516619604,975451694,2970356327,261314535,3535072918,2652609425,1333838021,2724322336,1767536459,370938394,182621114,3854606378,1128014560,487725847,185469197,2918353863,3106780840,3356761769,2237133081,1286567175,3152976349,4255350624,2683765030,3160175349,3309594171,878443390,1988838185,3704300486,1756818940,1673061617,3403100636,272786309,1075025698,545572369,2105887268,4174560061,296679730,1841768865,1260232239,4091327024,3960309330,3497509347,1814803222,2578018489,4195456072,575138148,3299409036,446754879,3629546796,4011996048,3347532110,3252238545,4270639778,915985419,3483825537,681933534,651868046,2755636671,3828103837,223377554,2607439820,1649704518,3270937875,3901806776,1580087799,4118987695,3198115200,2087309459,2842678573,3016697106,1003007129,2802849917,1860738147,2077965243,164439672,4100872472,32283319,2827177882,1709610350,2125135846,136428751,3874428392,3652904859,3460984630,3572145929,3593056380,2939266226,824852259,818324884,3224740454,930369212,2801566410,2967507152,355706840,1257309336,4148292826,243256656,790073846,2373340630,1296297904,1422699085,3756299780,3818836405,457992840,3099667487,2135319889,77422314,1560382517,1945798516,788204353,1521706781,1385356242,870912086,325965383,2358957921,2050466060,2388260884,2313884476,4006521127,901210569,3990953189,1014646705,1503449823,1062597235,2031621326,3212035895,3931371469,1533017514,350174575,2256028891,2177544179,1052338372,741876788,1606591296,1914052035,213705253,2334669897,1107234197,1899603969,3725069491,2631447780,2422494913,1635502980,1893020342,1950903388,1120974935],w=[2807058932,1699970625,2764249623,1586903591,1808481195,1173430173,1487645946,59984867,4199882800,1844882806,1989249228,1277555970,3623636965,3419915562,1149249077,2744104290,1514790577,459744698,244860394,3235995134,1963115311,4027744588,2544078150,4190530515,1608975247,2627016082,2062270317,1507497298,2200818878,567498868,1764313568,3359936201,2305455554,2037970062,1047239e3,1910319033,1337376481,2904027272,2892417312,984907214,1243112415,830661914,861968209,2135253587,2011214180,2927934315,2686254721,731183368,1750626376,4246310725,1820824798,4172763771,3542330227,48394827,2404901663,2871682645,671593195,3254988725,2073724613,145085239,2280796200,2779915199,1790575107,2187128086,472615631,3029510009,4075877127,3802222185,4107101658,3201631749,1646252340,4270507174,1402811438,1436590835,3778151818,3950355702,3963161475,4020912224,2667994737,273792366,2331590177,104699613,95345982,3175501286,2377486676,1560637892,3564045318,369057872,4213447064,3919042237,1137477952,2658625497,1119727848,2340947849,1530455833,4007360968,172466556,266959938,516552836,0,2256734592,3980931627,1890328081,1917742170,4294704398,945164165,3575528878,958871085,3647212047,2787207260,1423022939,775562294,1739656202,3876557655,2530391278,2443058075,3310321856,547512796,1265195639,437656594,3121275539,719700128,3762502690,387781147,218828297,3350065803,2830708150,2848461854,428169201,122466165,3720081049,1627235199,648017665,4122762354,1002783846,2117360635,695634755,3336358691,4234721005,4049844452,3704280881,2232435299,574624663,287343814,612205898,1039717051,840019705,2708326185,793451934,821288114,1391201670,3822090177,376187827,3113855344,1224348052,1679968233,2361698556,1058709744,752375421,2431590963,1321699145,3519142200,2734591178,188127444,2177869557,3727205754,2384911031,3215212461,2648976442,2450346104,3432737375,1180849278,331544205,3102249176,4150144569,2952102595,2159976285,2474404304,766078933,313773861,2570832044,2108100632,1668212892,3145456443,2013908262,418672217,3070356634,2594734927,1852171925,3867060991,3473416636,3907448597,2614737639,919489135,164948639,2094410160,2997825956,590424639,2486224549,1723872674,3157750862,3399941250,3501252752,3625268135,2555048196,3673637356,1343127501,4130281361,3599595085,2957853679,1297403050,81781910,3051593425,2283490410,532201772,1367295589,3926170974,895287692,1953757831,1093597963,492483431,3528626907,1446242576,1192455638,1636604631,209336225,344873464,1015671571,669961897,3375740769,3857572124,2973530695,3747192018,1933530610,3464042516,935293895,3454686199,2858115069,1863638845,3683022916,4085369519,3292445032,875313188,1080017571,3279033885,621591778,1233856572,2504130317,24197544,3017672716,3835484340,3247465558,2220981195,3060847922,1551124588,1463996600],_=[4104605777,1097159550,396673818,660510266,2875968315,2638606623,4200115116,3808662347,821712160,1986918061,3430322568,38544885,3856137295,718002117,893681702,1654886325,2975484382,3122358053,3926825029,4274053469,796197571,1290801793,1184342925,3556361835,2405426947,2459735317,1836772287,1381620373,3196267988,1948373848,3764988233,3385345166,3263785589,2390325492,1480485785,3111247143,3780097726,2293045232,548169417,3459953789,3746175075,439452389,1362321559,1400849762,1685577905,1806599355,2174754046,137073913,1214797936,1174215055,3731654548,2079897426,1943217067,1258480242,529487843,1437280870,3945269170,3049390895,3313212038,923313619,679998e3,3215307299,57326082,377642221,3474729866,2041877159,133361907,1776460110,3673476453,96392454,878845905,2801699524,777231668,4082475170,2330014213,4142626212,2213296395,1626319424,1906247262,1846563261,562755902,3708173718,1040559837,3871163981,1418573201,3294430577,114585348,1343618912,2566595609,3186202582,1078185097,3651041127,3896688048,2307622919,425408743,3371096953,2081048481,1108339068,2216610296,0,2156299017,736970802,292596766,1517440620,251657213,2235061775,2933202493,758720310,265905162,1554391400,1532285339,908999204,174567692,1474760595,4002861748,2610011675,3234156416,3693126241,2001430874,303699484,2478443234,2687165888,585122620,454499602,151849742,2345119218,3064510765,514443284,4044981591,1963412655,2581445614,2137062819,19308535,1928707164,1715193156,4219352155,1126790795,600235211,3992742070,3841024952,836553431,1669664834,2535604243,3323011204,1243905413,3141400786,4180808110,698445255,2653899549,2989552604,2253581325,3252932727,3004591147,1891211689,2487810577,3915653703,4237083816,4030667424,2100090966,865136418,1229899655,953270745,3399679628,3557504664,4118925222,2061379749,3079546586,2915017791,983426092,2022837584,1607244650,2118541908,2366882550,3635996816,972512814,3283088770,1568718495,3499326569,3576539503,621982671,2895723464,410887952,2623762152,1002142683,645401037,1494807662,2595684844,1335535747,2507040230,4293295786,3167684641,367585007,3885750714,1865862730,2668221674,2960971305,2763173681,1059270954,2777952454,2724642869,1320957812,2194319100,2429595872,2815956275,77089521,3973773121,3444575871,2448830231,1305906550,4021308739,2857194700,2516901860,3518358430,1787304780,740276417,1699839814,1592394909,2352307457,2272556026,188821243,1729977011,3687994002,274084841,3594982253,3613494426,2701949495,4162096729,322734571,2837966542,1640576439,484830689,1202797690,3537852828,4067639125,349075736,3342319475,4157467219,4255800159,1030690015,1155237496,2951971274,1757691577,607398968,2738905026,499347990,3794078908,1011452712,227885567,2818666809,213114376,3034881240,1455525988,3414450555,850817237,1817998408,3092726480],S=[0,235474187,470948374,303765277,941896748,908933415,607530554,708780849,1883793496,2118214995,1817866830,1649639237,1215061108,1181045119,1417561698,1517767529,3767586992,4003061179,4236429990,4069246893,3635733660,3602770327,3299278474,3400528769,2430122216,2664543715,2362090238,2193862645,2835123396,2801107407,3035535058,3135740889,3678124923,3576870512,3341394285,3374361702,3810496343,3977675356,4279080257,4043610186,2876494627,2776292904,3076639029,3110650942,2472011535,2640243204,2403728665,2169303058,1001089995,899835584,666464733,699432150,59727847,226906860,530400753,294930682,1273168787,1172967064,1475418501,1509430414,1942435775,2110667444,1876241833,1641816226,2910219766,2743034109,2976151520,3211623147,2505202138,2606453969,2302690252,2269728455,3711829422,3543599269,3240894392,3475313331,3843699074,3943906441,4178062228,4144047775,1306967366,1139781709,1374988112,1610459739,1975683434,2076935265,1775276924,1742315127,1034867998,866637845,566021896,800440835,92987698,193195065,429456164,395441711,1984812685,2017778566,1784663195,1683407248,1315562145,1080094634,1383856311,1551037884,101039829,135050206,437757123,337553864,1042385657,807962610,573804783,742039012,2531067453,2564033334,2328828971,2227573024,2935566865,2700099354,3001755655,3168937228,3868552805,3902563182,4203181171,4102977912,3736164937,3501741890,3265478751,3433712980,1106041591,1340463100,1576976609,1408749034,2043211483,2009195472,1708848333,1809054150,832877231,1068351396,766945465,599762354,159417987,126454664,361929877,463180190,2709260871,2943682380,3178106961,3009879386,2572697195,2538681184,2236228733,2336434550,3509871135,3745345300,3441850377,3274667266,3910161971,3877198648,4110568485,4211818798,2597806476,2497604743,2261089178,2295101073,2733856160,2902087851,3202437046,2968011453,3936291284,3835036895,4136440770,4169408201,3535486456,3702665459,3467192302,3231722213,2051518780,1951317047,1716890410,1750902305,1113818384,1282050075,1584504582,1350078989,168810852,67556463,371049330,404016761,841739592,1008918595,775550814,540080725,3969562369,3801332234,4035489047,4269907996,3569255213,3669462566,3366754619,3332740144,2631065433,2463879762,2160117071,2395588676,2767645557,2868897406,3102011747,3069049960,202008497,33778362,270040487,504459436,875451293,975658646,675039627,641025152,2084704233,1917518562,1615861247,1851332852,1147550661,1248802510,1484005843,1451044056,933301370,967311729,733156972,632953703,260388950,25965917,328671808,496906059,1206477858,1239443753,1543208500,1441952575,2144161806,1908694277,1675577880,1842759443,3610369226,3644379585,3408119516,3307916247,4011190502,3776767469,4077384432,4245618683,2809771154,2842737049,3144396420,3043140495,2673705150,2438237621,2203032232,2370213795],E=[0,185469197,370938394,487725847,741876788,657861945,975451694,824852259,1483753576,1400783205,1315723890,1164071807,1950903388,2135319889,1649704518,1767536459,2967507152,3152976349,2801566410,2918353863,2631447780,2547432937,2328143614,2177544179,3901806776,3818836405,4270639778,4118987695,3299409036,3483825537,3535072918,3652904859,2077965243,1893020342,1841768865,1724457132,1474502543,1559041666,1107234197,1257309336,598438867,681933534,901210569,1052338372,261314535,77422314,428819965,310463728,3409685355,3224740454,3710368113,3593056380,3875770207,3960309330,4045380933,4195456072,2471224067,2554718734,2237133081,2388260884,3212035895,3028143674,2842678573,2724322336,4138563181,4255350624,3769721975,3955191162,3667219033,3516619604,3431546947,3347532110,2933734917,2782082824,3099667487,3016697106,2196052529,2313884476,2499348523,2683765030,1179510461,1296297904,1347548327,1533017514,1786102409,1635502980,2087309459,2003294622,507358933,355706840,136428751,53458370,839224033,957055980,605657339,790073846,2373340630,2256028891,2607439820,2422494913,2706270690,2856345839,3075636216,3160175349,3573941694,3725069491,3273267108,3356761769,4181598602,4063242375,4011996048,3828103837,1033297158,915985419,730517276,545572369,296679730,446754879,129166120,213705253,1709610350,1860738147,1945798516,2029293177,1239331162,1120974935,1606591296,1422699085,4148292826,4233094615,3781033664,3931371469,3682191598,3497509347,3446004468,3328955385,2939266226,2755636671,3106780840,2988687269,2198438022,2282195339,2501218972,2652609425,1201765386,1286567175,1371368976,1521706781,1805211710,1620529459,2105887268,1988838185,533804130,350174575,164439672,46346101,870912086,954669403,636813900,788204353,2358957921,2274680428,2592523643,2441661558,2695033685,2880240216,3065962831,3182487618,3572145929,3756299780,3270937875,3388507166,4174560061,4091327024,4006521127,3854606378,1014646705,930369212,711349675,560487590,272786309,457992840,106852767,223377554,1678381017,1862534868,1914052035,2031621326,1211247597,1128014560,1580087799,1428173050,32283319,182621114,401639597,486441376,768917123,651868046,1003007129,818324884,1503449823,1385356242,1333838021,1150208456,1973745387,2125135846,1673061617,1756818940,2970356327,3120694122,2802849917,2887651696,2637442643,2520393566,2334669897,2149987652,3917234703,3799141122,4284502037,4100872472,3309594171,3460984630,3545789473,3629546796,2050466060,1899603969,1814803222,1730525723,1443857720,1560382517,1075025698,1260232239,575138148,692707433,878443390,1062597235,243256656,91341917,409198410,325965383,3403100636,3252238545,3704300486,3620022987,3874428392,3990953189,4042459122,4227665663,2460449204,2578018489,2226875310,2411029155,3198115200,3046200461,2827177882,2743944855],k=[0,218828297,437656594,387781147,875313188,958871085,775562294,590424639,1750626376,1699970625,1917742170,2135253587,1551124588,1367295589,1180849278,1265195639,3501252752,3720081049,3399941250,3350065803,3835484340,3919042237,4270507174,4085369519,3102249176,3051593425,2734591178,2952102595,2361698556,2177869557,2530391278,2614737639,3145456443,3060847922,2708326185,2892417312,2404901663,2187128086,2504130317,2555048196,3542330227,3727205754,3375740769,3292445032,3876557655,3926170974,4246310725,4027744588,1808481195,1723872674,1910319033,2094410160,1608975247,1391201670,1173430173,1224348052,59984867,244860394,428169201,344873464,935293895,984907214,766078933,547512796,1844882806,1627235199,2011214180,2062270317,1507497298,1423022939,1137477952,1321699145,95345982,145085239,532201772,313773861,830661914,1015671571,731183368,648017665,3175501286,2957853679,2807058932,2858115069,2305455554,2220981195,2474404304,2658625497,3575528878,3625268135,3473416636,3254988725,3778151818,3963161475,4213447064,4130281361,3599595085,3683022916,3432737375,3247465558,3802222185,4020912224,4172763771,4122762354,3201631749,3017672716,2764249623,2848461854,2331590177,2280796200,2431590963,2648976442,104699613,188127444,472615631,287343814,840019705,1058709744,671593195,621591778,1852171925,1668212892,1953757831,2037970062,1514790577,1463996600,1080017571,1297403050,3673637356,3623636965,3235995134,3454686199,4007360968,3822090177,4107101658,4190530515,2997825956,3215212461,2830708150,2779915199,2256734592,2340947849,2627016082,2443058075,172466556,122466165,273792366,492483431,1047239e3,861968209,612205898,695634755,1646252340,1863638845,2013908262,1963115311,1446242576,1530455833,1277555970,1093597963,1636604631,1820824798,2073724613,1989249228,1436590835,1487645946,1337376481,1119727848,164948639,81781910,331544205,516552836,1039717051,821288114,669961897,719700128,2973530695,3157750862,2871682645,2787207260,2232435299,2283490410,2667994737,2450346104,3647212047,3564045318,3279033885,3464042516,3980931627,3762502690,4150144569,4199882800,3070356634,3121275539,2904027272,2686254721,2200818878,2384911031,2570832044,2486224549,3747192018,3528626907,3310321856,3359936201,3950355702,3867060991,4049844452,4234721005,1739656202,1790575107,2108100632,1890328081,1402811438,1586903591,1233856572,1149249077,266959938,48394827,369057872,418672217,1002783846,919489135,567498868,752375421,209336225,24197544,376187827,459744698,945164165,895287692,574624663,793451934,1679968233,1764313568,2117360635,1933530610,1343127501,1560637892,1243112415,1192455638,3704280881,3519142200,3336358691,3419915562,3907448597,3857572124,4075877127,4294704398,3029510009,3113855344,2927934315,2744104290,2159976285,2377486676,2594734927,2544078150],N=[0,151849742,303699484,454499602,607398968,758720310,908999204,1059270954,1214797936,1097159550,1517440620,1400849762,1817998408,1699839814,2118541908,2001430874,2429595872,2581445614,2194319100,2345119218,3034881240,3186202582,2801699524,2951971274,3635996816,3518358430,3399679628,3283088770,4237083816,4118925222,4002861748,3885750714,1002142683,850817237,698445255,548169417,529487843,377642221,227885567,77089521,1943217067,2061379749,1640576439,1757691577,1474760595,1592394909,1174215055,1290801793,2875968315,2724642869,3111247143,2960971305,2405426947,2253581325,2638606623,2487810577,3808662347,3926825029,4044981591,4162096729,3342319475,3459953789,3576539503,3693126241,1986918061,2137062819,1685577905,1836772287,1381620373,1532285339,1078185097,1229899655,1040559837,923313619,740276417,621982671,439452389,322734571,137073913,19308535,3871163981,4021308739,4104605777,4255800159,3263785589,3414450555,3499326569,3651041127,2933202493,2815956275,3167684641,3049390895,2330014213,2213296395,2566595609,2448830231,1305906550,1155237496,1607244650,1455525988,1776460110,1626319424,2079897426,1928707164,96392454,213114376,396673818,514443284,562755902,679998e3,865136418,983426092,3708173718,3557504664,3474729866,3323011204,4180808110,4030667424,3945269170,3794078908,2507040230,2623762152,2272556026,2390325492,2975484382,3092726480,2738905026,2857194700,3973773121,3856137295,4274053469,4157467219,3371096953,3252932727,3673476453,3556361835,2763173681,2915017791,3064510765,3215307299,2156299017,2307622919,2459735317,2610011675,2081048481,1963412655,1846563261,1729977011,1480485785,1362321559,1243905413,1126790795,878845905,1030690015,645401037,796197571,274084841,425408743,38544885,188821243,3613494426,3731654548,3313212038,3430322568,4082475170,4200115116,3780097726,3896688048,2668221674,2516901860,2366882550,2216610296,3141400786,2989552604,2837966542,2687165888,1202797690,1320957812,1437280870,1554391400,1669664834,1787304780,1906247262,2022837584,265905162,114585348,499347990,349075736,736970802,585122620,972512814,821712160,2595684844,2478443234,2293045232,2174754046,3196267988,3079546586,2895723464,2777952454,3537852828,3687994002,3234156416,3385345166,4142626212,4293295786,3841024952,3992742070,174567692,57326082,410887952,292596766,777231668,660510266,1011452712,893681702,1108339068,1258480242,1343618912,1494807662,1715193156,1865862730,1948373848,2100090966,2701949495,2818666809,3004591147,3122358053,2235061775,2352307457,2535604243,2653899549,3915653703,3764988233,4219352155,4067639125,3444575871,3294430577,3746175075,3594982253,836553431,953270745,600235211,718002117,367585007,484830689,133361907,251657213,2041877159,1891211689,1806599355,1654886325,1568718495,1418573201,1335535747,1184342925];function A(e){for(var t=[],r=0;r<e.length;r+=4)t.push(e[r]<<24|e[r+1]<<16|e[r+2]<<8|e[r+3]);return t}var P=function(e){if(!(this instanceof P))throw Error("AES must be instanitated with `new`");Object.defineProperty(this,"key",{value:n(e,!0)}),this._prepare()};P.prototype._prepare=function(){var e=c[this.key.length];if(null==e)throw Error("invalid key size (must be 16, 24 or 32 bytes)");this._Ke=[],this._Kd=[];for(var t=0;t<=e;t++)this._Ke.push([0,0,0,0]),this._Kd.push([0,0,0,0]);var r,i=4*(e+1),n=this.key.length/4,o=A(this.key);for(t=0;t<n;t++)r=t>>2,this._Ke[r][t%4]=o[t],this._Kd[e-r][t%4]=o[t];for(var s,a=0,l=n;l<i;){if(s=o[n-1],o[0]^=h[s>>16&255]<<24^h[s>>8&255]<<16^h[255&s]<<8^h[s>>24&255]^d[a]<<24,a+=1,8!=n)for(t=1;t<n;t++)o[t]^=o[t-1];else{for(t=1;t<n/2;t++)o[t]^=o[t-1];for(s=o[n/2-1],o[n/2]^=h[255&s]^h[s>>8&255]<<8^h[s>>16&255]<<16^h[s>>24&255]<<24,t=n/2+1;t<n;t++)o[t]^=o[t-1]}for(t=0;t<n&&l<i;)u=l>>2,f=l%4,this._Ke[u][f]=o[t],this._Kd[e-u][f]=o[t++],l++}for(var u=1;u<e;u++)for(var f=0;f<4;f++)s=this._Kd[u][f],this._Kd[u][f]=S[s>>24&255]^E[s>>16&255]^k[s>>8&255]^N[255&s]},P.prototype.encrypt=function(e){if(16!=e.length)throw Error("invalid plaintext size (must be 16 bytes)");for(var t=this._Ke.length-1,r=[0,0,0,0],i=A(e),n=0;n<4;n++)i[n]^=this._Ke[0][n];for(var s=1;s<t;s++){for(n=0;n<4;n++)r[n]=p[i[n]>>24&255]^y[i[(n+1)%4]>>16&255]^m[i[(n+2)%4]>>8&255]^v[255&i[(n+3)%4]]^this._Ke[s][n];i=r.slice()}var a,l=o(16);for(n=0;n<4;n++)a=this._Ke[t][n],l[4*n]=255&(h[i[n]>>24&255]^a>>24),l[4*n+1]=255&(h[i[(n+1)%4]>>16&255]^a>>16),l[4*n+2]=255&(h[i[(n+2)%4]>>8&255]^a>>8),l[4*n+3]=255&(h[255&i[(n+3)%4]]^a);return l},P.prototype.decrypt=function(e){if(16!=e.length)throw Error("invalid ciphertext size (must be 16 bytes)");for(var t=this._Kd.length-1,r=[0,0,0,0],i=A(e),n=0;n<4;n++)i[n]^=this._Kd[0][n];for(var s=1;s<t;s++){for(n=0;n<4;n++)r[n]=g[i[n]>>24&255]^b[i[(n+3)%4]>>16&255]^w[i[(n+2)%4]>>8&255]^_[255&i[(n+1)%4]]^this._Kd[s][n];i=r.slice()}var a,l=o(16);for(n=0;n<4;n++)a=this._Kd[t][n],l[4*n]=255&(f[i[n]>>24&255]^a>>24),l[4*n+1]=255&(f[i[(n+3)%4]>>16&255]^a>>16),l[4*n+2]=255&(f[i[(n+2)%4]>>8&255]^a>>8),l[4*n+3]=255&(f[255&i[(n+1)%4]]^a);return l};var x=function(e){if(!(this instanceof x))throw Error("AES must be instanitated with `new`");this.description="Electronic Code Block",this.name="ecb",this._aes=new P(e)};x.prototype.encrypt=function(e){if((e=n(e)).length%16!=0)throw Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),i=0;i<e.length;i+=16)s(e,r,0,i,i+16),s(r=this._aes.encrypt(r),t,i);return t},x.prototype.decrypt=function(e){if((e=n(e)).length%16!=0)throw Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),i=0;i<e.length;i+=16)s(e,r,0,i,i+16),s(r=this._aes.decrypt(r),t,i);return t};var O=function(e,t){if(!(this instanceof O))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Block Chaining",this.name="cbc",t){if(16!=t.length)throw Error("invalid initialation vector size (must be 16 bytes)")}else t=o(16);this._lastCipherblock=n(t,!0),this._aes=new P(e)};O.prototype.encrypt=function(e){if((e=n(e)).length%16!=0)throw Error("invalid plaintext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),i=0;i<e.length;i+=16){s(e,r,0,i,i+16);for(var a=0;a<16;a++)r[a]^=this._lastCipherblock[a];this._lastCipherblock=this._aes.encrypt(r),s(this._lastCipherblock,t,i)}return t},O.prototype.decrypt=function(e){if((e=n(e)).length%16!=0)throw Error("invalid ciphertext size (must be multiple of 16 bytes)");for(var t=o(e.length),r=o(16),i=0;i<e.length;i+=16){s(e,r,0,i,i+16),r=this._aes.decrypt(r);for(var a=0;a<16;a++)t[i+a]=r[a]^this._lastCipherblock[a];s(e,this._lastCipherblock,0,i,i+16)}return t};var T=function(e,t,r){if(!(this instanceof T))throw Error("AES must be instanitated with `new`");if(this.description="Cipher Feedback",this.name="cfb",t){if(16!=t.length)throw Error("invalid initialation vector size (must be 16 size)")}else t=o(16);r||(r=1),this.segmentSize=r,this._shiftRegister=n(t,!0),this._aes=new P(e)};T.prototype.encrypt=function(e){if(e.length%this.segmentSize!=0)throw Error("invalid plaintext size (must be segmentSize bytes)");for(var t,r=n(e,!0),i=0;i<r.length;i+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)r[i+o]^=t[o];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(r,this._shiftRegister,16-this.segmentSize,i,i+this.segmentSize)}return r},T.prototype.decrypt=function(e){if(e.length%this.segmentSize!=0)throw Error("invalid ciphertext size (must be segmentSize bytes)");for(var t,r=n(e,!0),i=0;i<r.length;i+=this.segmentSize){t=this._aes.encrypt(this._shiftRegister);for(var o=0;o<this.segmentSize;o++)r[i+o]^=t[o];s(this._shiftRegister,this._shiftRegister,0,this.segmentSize),s(e,this._shiftRegister,16-this.segmentSize,i,i+this.segmentSize)}return r};var R=function(e,t){if(!(this instanceof R))throw Error("AES must be instanitated with `new`");if(this.description="Output Feedback",this.name="ofb",t){if(16!=t.length)throw Error("invalid initialation vector size (must be 16 bytes)")}else t=o(16);this._lastPrecipher=n(t,!0),this._lastPrecipherIndex=16,this._aes=new P(e)};R.prototype.encrypt=function(e){for(var t=n(e,!0),r=0;r<t.length;r++)16===this._lastPrecipherIndex&&(this._lastPrecipher=this._aes.encrypt(this._lastPrecipher),this._lastPrecipherIndex=0),t[r]^=this._lastPrecipher[this._lastPrecipherIndex++];return t},R.prototype.decrypt=R.prototype.encrypt;var B=function(e){if(!(this instanceof B))throw Error("Counter must be instanitated with `new`");0===e||e||(e=1),"number"==typeof e?(this._counter=o(16),this.setValue(e)):this.setBytes(e)};B.prototype.setValue=function(e){if("number"!=typeof e||parseInt(e)!=e)throw Error("invalid counter value (must be an integer)");for(var t=15;t>=0;--t)this._counter[t]=e%256,e>>=8},B.prototype.setBytes=function(e){if(16!=(e=n(e,!0)).length)throw Error("invalid counter bytes size (must be 16 bytes)");this._counter=e},B.prototype.increment=function(){for(var e=15;e>=0;e--){if(255!==this._counter[e]){this._counter[e]++;break}this._counter[e]=0}};var C=function(e,t){if(!(this instanceof C))throw Error("AES must be instanitated with `new`");this.description="Counter",this.name="ctr",t instanceof B||(t=new B(t)),this._counter=t,this._remainingCounter=null,this._remainingCounterIndex=16,this._aes=new P(e)};C.prototype.encrypt=function(e){for(var t=n(e,!0),r=0;r<t.length;r++)16===this._remainingCounterIndex&&(this._remainingCounter=this._aes.encrypt(this._counter._counter),this._remainingCounterIndex=0,this._counter.increment()),t[r]^=this._remainingCounter[this._remainingCounterIndex++];return t},C.prototype.decrypt=C.prototype.encrypt;var I={AES:P,Counter:B,ModeOfOperation:{ecb:x,cbc:O,cfb:T,ofb:R,ctr:C},utils:{hex:u,utf8:l},padding:{pkcs7:{pad:function(e){var t=16-(e=n(e,!0)).length%16,r=o(e.length+t);s(e,r);for(var i=e.length;i<r.length;i++)r[i]=t;return r},strip:function(e){if((e=n(e,!0)).length<16)throw Error("PKCS#7 invalid length");var t=e[e.length-1];if(t>16)throw Error("PKCS#7 padding byte out of range");for(var r=e.length-t,i=0;i<t;i++)if(e[r+i]!==t)throw Error("PKCS#7 invalid padding byte");var a=o(r);return s(e,a,0,0,r),a}}},_arrayTest:{coerceArray:n,createArray:o,copyArray:s}};e.exports=I}()},5078:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(4778),n=r(2403),o=function(){function e(e){this._semaphore=new n.default(1,e)}return e.prototype.acquire=function(){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return[4,this._semaphore.acquire()];case 1:return[2,e.sent()[1]]}})})},e.prototype.runExclusive=function(e){return this._semaphore.runExclusive(function(){return e()})},e.prototype.isLocked=function(){return this._semaphore.isLocked()},e.prototype.waitForUnlock=function(){return this._semaphore.waitForUnlock()},e.prototype.release=function(){this._semaphore.isLocked()&&this._semaphore.release()},e.prototype.cancel=function(){return this._semaphore.cancel()},e}();t.default=o},2403:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(4778),n=r(1764),o=function(){function e(e,t){void 0===t&&(t=n.E_CANCELED),this._value=e,this._cancelError=t,this._weightedQueues=[],this._weightedWaiters=[]}return e.prototype.acquire=function(e){var t=this;if(void 0===e&&(e=1),e<=0)throw Error("invalid weight ".concat(e,": must be positive"));return new Promise(function(r,i){t._weightedQueues[e-1]||(t._weightedQueues[e-1]=[]),t._weightedQueues[e-1].push({resolve:r,reject:i}),t._dispatch()})},e.prototype.runExclusive=function(e,t){return void 0===t&&(t=1),i.__awaiter(this,void 0,void 0,function(){var r,n,o;return i.__generator(this,function(i){switch(i.label){case 0:return[4,this.acquire(t)];case 1:n=(r=i.sent())[0],o=r[1],i.label=2;case 2:return i.trys.push([2,,4,5]),[4,e(n)];case 3:return[2,i.sent()];case 4:return o(),[7];case 5:return[2]}})})},e.prototype.waitForUnlock=function(e){var t=this;if(void 0===e&&(e=1),e<=0)throw Error("invalid weight ".concat(e,": must be positive"));return new Promise(function(r){t._weightedWaiters[e-1]||(t._weightedWaiters[e-1]=[]),t._weightedWaiters[e-1].push(r),t._dispatch()})},e.prototype.isLocked=function(){return this._value<=0},e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(e){this._value=e,this._dispatch()},e.prototype.release=function(e){if(void 0===e&&(e=1),e<=0)throw Error("invalid weight ".concat(e,": must be positive"));this._value+=e,this._dispatch()},e.prototype.cancel=function(){var e=this;this._weightedQueues.forEach(function(t){return t.forEach(function(t){return t.reject(e._cancelError)})}),this._weightedQueues=[]},e.prototype._dispatch=function(){for(var e,t=this._value;t>0;t--){var r=null===(e=this._weightedQueues[t-1])||void 0===e?void 0:e.shift();if(r){var i=this._value,n=t;this._value-=t,t=this._value+1,r.resolve([i,this._newReleaser(n)])}}this._drainUnlockWaiters()},e.prototype._newReleaser=function(e){var t=this,r=!1;return function(){r||(r=!0,t.release(e))}},e.prototype._drainUnlockWaiters=function(){for(var e=this._value;e>0;e--)this._weightedWaiters[e-1]&&(this._weightedWaiters[e-1].forEach(function(e){return e()}),this._weightedWaiters[e-1]=[])},e}();t.default=o},1764:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.E_CANCELED=t.E_ALREADY_LOCKED=t.E_TIMEOUT=void 0,t.E_TIMEOUT=Error("timeout while waiting for mutex to become available"),t.E_ALREADY_LOCKED=Error("mutex already locked"),t.E_CANCELED=Error("request for lock canceled")},8125:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryAcquire=t.withTimeout=t.Semaphore=t.Mutex=void 0;var i=r(4778),n=r(5078);Object.defineProperty(t,"Mutex",{enumerable:!0,get:function(){return n.default}});var o=r(2403);Object.defineProperty(t,"Semaphore",{enumerable:!0,get:function(){return o.default}});var s=r(1960);Object.defineProperty(t,"withTimeout",{enumerable:!0,get:function(){return s.withTimeout}});var a=r(3143);Object.defineProperty(t,"tryAcquire",{enumerable:!0,get:function(){return a.tryAcquire}}),i.__exportStar(r(1764),t)},3143:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryAcquire=void 0;var i=r(1764),n=r(1960);t.tryAcquire=function(e,t){return void 0===t&&(t=i.E_ALREADY_LOCKED),(0,n.withTimeout)(e,0,t)}},1960:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withTimeout=void 0;var i=r(4778),n=r(1764);t.withTimeout=function(e,t,r){var o=this;return void 0===r&&(r=n.E_TIMEOUT),{acquire:function(n){if(void 0!==n&&n<=0)throw Error("invalid weight ".concat(n,": must be positive"));return new Promise(function(s,a){return i.__awaiter(o,void 0,void 0,function(){var o,l,u,c;return i.__generator(this,function(i){switch(i.label){case 0:o=!1,l=setTimeout(function(){o=!0,a(r)},t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,e.acquire(n)];case 2:return u=i.sent(),o?(Array.isArray(u)?u[1]:u)():(clearTimeout(l),s(u)),[3,4];case 3:return c=i.sent(),o||(clearTimeout(l),a(c)),[3,4];case 4:return[2]}})})})},runExclusive:function(e,t){return i.__awaiter(this,void 0,void 0,function(){var r,n;return i.__generator(this,function(i){switch(i.label){case 0:r=function(){},i.label=1;case 1:return i.trys.push([1,,7,8]),[4,this.acquire(t)];case 2:return Array.isArray(n=i.sent())?(r=n[1],[4,e(n[0])]):[3,4];case 3:case 5:return[2,i.sent()];case 4:return r=n,[4,e()];case 6:return[3,8];case 7:return r(),[7];case 8:return[2]}})})},release:function(t){e.release(t)},cancel:function(){return e.cancel()},waitForUnlock:function(i){if(void 0!==i&&i<=0)throw Error("invalid weight ".concat(i,": must be positive"));return new Promise(function(n,o){e.waitForUnlock(i).then(n),setTimeout(function(){return o(r)},t)})},isLocked:function(){return e.isLocked()},getValue:function(){return e.getValue()},setValue:function(t){return e.setValue(t)}}}},4778:(e,t,r)=>{"use strict";r.r(t),r.d(t,{__extends:()=>n,__assign:()=>o,__rest:()=>s,__decorate:()=>a,__param:()=>l,__metadata:()=>u,__awaiter:()=>c,__generator:()=>d,__createBinding:()=>h,__exportStar:()=>f,__values:()=>p,__read:()=>y,__spread:()=>m,__spreadArrays:()=>v,__spreadArray:()=>g,__await:()=>b,__asyncGenerator:()=>w,__asyncDelegator:()=>_,__asyncValues:()=>S,__makeTemplateObject:()=>E,__importStar:()=>N,__importDefault:()=>A,__classPrivateFieldGet:()=>P,__classPrivateFieldSet:()=>x,__classPrivateFieldIn:()=>O});var i=function(e,t){return(i=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function n(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var o=function(){return(o=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function s(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r}function a(e,t,r,i){var n,o=arguments.length,s=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(o<3?n(s):o>3?n(t,r,s):n(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function l(e,t){return function(r,i){t(r,i,e)}}function u(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})}function d(e,t){var r,i,n,o,s={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(a){return function(l){return function(a){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,a[0]&&(s=0)),s;)try{if(r=1,i&&(n=2&a[0]?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,i=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!((n=(n=s.trys).length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){s=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){s.label=a[1];break}if(6===a[0]&&s.label<n[1]){s.label=n[1],n=a;break}if(n&&s.label<n[2]){s.label=n[2],s.ops.push(a);break}n[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(l){a=[6,l],i=0}finally{r=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,l])}}}var h=Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]};function f(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||h(t,e,r)}function p(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,o=r.call(e),s=[];try{for(;(void 0===t||t-- >0)&&!(i=o.next()).done;)s.push(i.value)}catch(a){n={error:a}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return s}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function v(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var i=Array(e),n=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,n++)i[n]=o[s];return i}function g(e,t,r){if(r||2==arguments.length)for(var i,n=0,o=t.length;n<o;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function w(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(e){n[e]&&(i[e]=function(t){return new Promise(function(r,i){o.push([e,t,r,i])>1||a(e,t)})})}function a(e,t){var r;try{(r=n[e](t)).value instanceof b?Promise.resolve(r.value.v).then(l,u):c(o[0][2],r)}catch(i){c(o[0][3],i)}}function l(e){a("next",e)}function u(e){a("throw",e)}function c(e,t){e(t),o.shift(),o.length&&a(o[0][0],o[0][1])}}function _(e){var t,r;return t={},i("next"),i("throw",function(e){throw e}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(i,n){t[i]=e[i]?function(t){return(r=!r)?{value:b(e[i](t)),done:"return"===i}:n?n(t):t}:n}}function S(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=p(e),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,n){!function(e,t,r,i){Promise.resolve(i).then(function(t){e({value:t,done:r})},t)}(i,n,(t=e[r](t)).done,t.value)})}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var k=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};function N(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&h(t,e,r);return k(t,e),t}function A(e){return e&&e.__esModule?e:{default:e}}function P(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)}function x(e,t,r,i,n){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r}function O(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}},2882:e=>{"use strict";for(var t="qpzry9x8gf2tvdw0s3jn54khce6mua7l",r={},i=0;i<t.length;i++){var n=t.charAt(i);if(void 0!==r[n])throw TypeError(n+" is ambiguous");r[n]=i}function o(e){var t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function s(e){for(var t=1,r=0;r<e.length;++r){var i=e.charCodeAt(r);if(i<33||i>126)return"Invalid prefix ("+e+")";t=o(t)^i>>5}for(t=o(t),r=0;r<e.length;++r){var n=e.charCodeAt(r);t=o(t)^31&n}return t}function a(e,t){if(t=t||90,e.length<8)return e+" too short";if(e.length>t)return"Exceeds length limit";var i=e.toLowerCase(),n=e.toUpperCase();if(e!==i&&e!==n)return"Mixed-case string "+e;var a=(e=i).lastIndexOf("1");if(-1===a)return"No separator character for "+e;if(0===a)return"Missing prefix for "+e;var l=e.slice(0,a),u=e.slice(a+1);if(u.length<6)return"Data too short";var c=s(l);if("string"==typeof c)return c;for(var d=[],h=0;h<u.length;++h){var f=u.charAt(h),p=r[f];if(void 0===p)return"Unknown character "+f;c=o(c)^p,h+6>=u.length||d.push(p)}return 1!==c?"Invalid checksum for "+e:{prefix:l,words:d}}function l(e,t,r,i){for(var n=0,o=0,s=(1<<r)-1,a=[],l=0;l<e.length;++l)for(n=n<<t|e[l],o+=t;o>=r;)a.push(n>>(o-=r)&s);if(i)o>0&&a.push(n<<r-o&s);else{if(o>=t)return"Excess padding";if(n<<r-o&s)return"Non-zero padding"}return a}e.exports={decodeUnsafe:function(){var e=a.apply(null,arguments);if("object"==typeof e)return e},decode:function(e){var t=a.apply(null,arguments);if("object"==typeof t)return t;throw Error(t)},encode:function(e,r,i){if(i=i||90,e.length+7+r.length>i)throw TypeError("Exceeds length limit");var n=s(e=e.toLowerCase());if("string"==typeof n)throw Error(n);for(var a=e+"1",l=0;l<r.length;++l){var u=r[l];if(u>>5!=0)throw Error("Non 5-bit word");n=o(n)^u,a+=t.charAt(u)}for(l=0;l<6;++l)n=o(n);for(n^=1,l=0;l<6;++l)a+=t.charAt(n>>5*(5-l)&31);return a},toWordsUnsafe:function(e){var t=l(e,8,5,!0);if(Array.isArray(t))return t},toWords:function(e){var t=l(e,8,5,!0);if(Array.isArray(t))return t;throw Error(t)},fromWordsUnsafe:function(e){var t=l(e,5,8,!1);if(Array.isArray(t))return t},fromWords:function(e){var t=l(e,5,8,!1);if(Array.isArray(t))return t;throw Error(t)}}},3550:function(e,t,r){!function(e,t){"use strict";function i(e,t){if(!e)throw Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function o(e,t,r){if(o.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}"object"==typeof e?e.exports=o:t.BN=o,o.BN=o,o.wordSize=26;try{c="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:r(6601).Buffer}catch(s){}function a(e,t){var r=e.charCodeAt(t);return r>=65&&r<=70?r-55:r>=97&&r<=102?r-87:r-48&15}function l(e,t,r){var i=a(e,r);return r-1>=t&&(i|=a(e,r-1)<<4),i}function u(e,t,r,i){for(var n=0,o=Math.min(e.length,r),s=t;s<o;s++){var a=e.charCodeAt(s)-48;n*=i,n+=a>=49?a-49+10:a>=17?a-17+10:a}return n}o.isBN=function(e){return e instanceof o||null!==e&&"object"==typeof e&&e.constructor.wordSize===o.wordSize&&Array.isArray(e.words)},o.max=function(e,t){return e.cmp(t)>0?e:t},o.min=function(e,t){return 0>e.cmp(t)?e:t},o.prototype._init=function(e,t,r){if("number"==typeof e)return this._initNumber(e,t,r);if("object"==typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<e.length&&(16===t?this._parseHex(e,n,r):(this._parseBase(e,t,n),"le"===r&&this._initArray(this.toArray(),t,r)))},o.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},o.prototype._initArray=function(e,t,r){if(i("number"==typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var o,s,a=0;if("be"===r)for(n=e.length-1,o=0;n>=0;n-=3)s=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);else if("le"===r)for(n=0,o=0;n<e.length;n+=3)s=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[o]|=s<<a&67108863,this.words[o+1]=s>>>26-a&67108863,(a+=24)>=26&&(a-=26,o++);return this.strip()},o.prototype._parseHex=function(e,t,r){this.length=Math.ceil((e.length-t)/6),this.words=Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var n,o=0,s=0;if("be"===r)for(i=e.length-1;i>=t;i-=2)n=l(e,t,i)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;else for(i=(e.length-t)%2==0?t+1:t;i<e.length;i+=2)n=l(e,t,i)<<o,this.words[s]|=67108863&n,o>=18?(o-=18,s+=1,this.words[s]|=n>>>26):o+=8;this.strip()},o.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=t)i++;i--,n=n/t|0;for(var o=e.length-r,s=o%i,a=Math.min(o,o-s)+r,l=0,c=r;c<a;c+=i)l=u(e,c,c+i,t),this.imuln(n),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(0!==s){var d=1;for(l=u(e,c,e.length,t),c=0;c<s;c++)d*=t;this.imuln(d),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},o.prototype.copy=function(e){e.words=Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},o.prototype.clone=function(){var e=new o(null);return this.copy(e),e},o.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},o.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var c,d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],f=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function p(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var n=0|e.words[0],o=0|t.words[0],s=n*o,a=67108863&s,l=s/67108864|0;r.words[0]=a;for(var u=1;u<i;u++){for(var c=l>>>26,d=67108863&l,h=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=h;f++){var p=u-f|0;c+=(s=(n=0|e.words[p])*(o=0|t.words[f])+d)/67108864|0,d=67108863&s}r.words[u]=0|d,l=0|c}return 0!==l?r.words[u]=0|l:r.length--,r.strip()}o.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var n=0,o=0,s=0;s<this.length;s++){var a=this.words[s],l=(16777215&(a<<n|o)).toString(16);r=0!=(o=a>>>24-n&16777215)||s!==this.length-1?d[6-l.length]+l+r:l+r,(n+=2)>=26&&(n-=26,s--)}for(0!==o&&(r=o.toString(16)+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var u=h[e],c=f[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var y=p.modn(c).toString(e);r=(p=p.idivn(c)).isZero()?y+r:d[u-y.length]+y+r}for(this.isZero()&&(r="0"+r);r.length%t!=0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(e,t){return i(void 0!==c),this.toArrayLike(c,e,t)},o.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},o.prototype.toArrayLike=function(e,t,r){var n=this.byteLength(),o=r||Math.max(1,n);i(n<=o,"byte array longer than desired length"),i(o>0,"Requested array length <= 0"),this.strip();var s,a,l="le"===t,u=new e(o),c=this.clone();if(l){for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),u[a]=s;for(;a<o;a++)u[a]=0}else{for(a=0;a<o-n;a++)u[a]=0;for(a=0;!c.isZero();a++)s=c.andln(255),c.iushrn(8),u[o-a-1]=s}return u},Math.clz32?o.prototype._countBits=function(e){return 32-Math.clz32(e)}:o.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},o.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0==(8191&t)&&(r+=13,t>>>=13),0==(127&t)&&(r+=7,t>>>=7),0==(15&t)&&(r+=4,t>>>=4),0==(3&t)&&(r+=2,t>>>=2),0==(1&t)&&r++,r},o.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},o.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return 0!==this.negative},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},o.prototype.ior=function(e){return i(0==(this.negative|e.negative)),this.iuor(e)},o.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},o.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},o.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this.strip()},o.prototype.iand=function(e){return i(0==(this.negative|e.negative)),this.iuand(e)},o.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},o.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},o.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this.strip()},o.prototype.ixor=function(e){return i(0==(this.negative|e.negative)),this.iuxor(e)},o.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},o.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},o.prototype.inotn=function(e){i("number"==typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this.strip()},o.prototype.notn=function(e){return this.clone().inotn(e)},o.prototype.setn=function(e,t){i("number"==typeof e&&e>=0);var r=e/26|0,n=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<n:this.words[r]&~(1<<n),this.strip()},o.prototype.iadd=function(e){var t,r,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var n=0,o=0;o<i.length;o++)t=(0|r.words[o])+(0|i.words[o])+n,this.words[o]=67108863&t,n=t>>>26;for(;0!==n&&o<r.length;o++)t=(0|r.words[o])+n,this.words[o]=67108863&t,n=t>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this},o.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},o.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,i,n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=e):(r=e,i=this);for(var o=0,s=0;s<i.length;s++)o=(t=(0|r.words[s])-(0|i.words[s])+o)>>26,this.words[s]=67108863&t;for(;0!==o&&s<r.length;s++)o=(t=(0|r.words[s])+o)>>26,this.words[s]=67108863&t;if(0===o&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(e){return this.clone().isub(e)};var y=function(e,t,r){var i,n,o,s=e.words,a=t.words,l=r.words,u=0,c=0|s[0],d=8191&c,h=c>>>13,f=0|s[1],p=8191&f,y=f>>>13,m=0|s[2],v=8191&m,g=m>>>13,b=0|s[3],w=8191&b,_=b>>>13,S=0|s[4],E=8191&S,k=S>>>13,N=0|s[5],A=8191&N,P=N>>>13,x=0|s[6],O=8191&x,T=x>>>13,R=0|s[7],B=8191&R,C=R>>>13,I=0|s[8],M=8191&I,U=I>>>13,K=0|s[9],D=8191&K,j=K>>>13,L=0|a[0],J=8191&L,F=L>>>13,q=0|a[1],V=8191&q,z=q>>>13,G=0|a[2],H=8191&G,W=G>>>13,Z=0|a[3],$=8191&Z,X=Z>>>13,Y=0|a[4],Q=8191&Y,ee=Y>>>13,et=0|a[5],er=8191&et,ei=et>>>13,en=0|a[6],eo=8191&en,es=en>>>13,ea=0|a[7],el=8191&ea,eu=ea>>>13,ec=0|a[8],ed=8191&ec,eh=ec>>>13,ef=0|a[9],ep=8191&ef,ey=ef>>>13;r.negative=e.negative^t.negative,r.length=19;var em=(u+(i=Math.imul(d,J))|0)+((8191&(n=(n=Math.imul(d,F))+Math.imul(h,J)|0))<<13)|0;u=((o=Math.imul(h,F))+(n>>>13)|0)+(em>>>26)|0,em&=67108863,i=Math.imul(p,J),n=(n=Math.imul(p,F))+Math.imul(y,J)|0,o=Math.imul(y,F);var ev=(u+(i=i+Math.imul(d,V)|0)|0)+((8191&(n=(n=n+Math.imul(d,z)|0)+Math.imul(h,V)|0))<<13)|0;u=((o=o+Math.imul(h,z)|0)+(n>>>13)|0)+(ev>>>26)|0,ev&=67108863,i=Math.imul(v,J),n=(n=Math.imul(v,F))+Math.imul(g,J)|0,o=Math.imul(g,F),i=i+Math.imul(p,V)|0,n=(n=n+Math.imul(p,z)|0)+Math.imul(y,V)|0,o=o+Math.imul(y,z)|0;var eg=(u+(i=i+Math.imul(d,H)|0)|0)+((8191&(n=(n=n+Math.imul(d,W)|0)+Math.imul(h,H)|0))<<13)|0;u=((o=o+Math.imul(h,W)|0)+(n>>>13)|0)+(eg>>>26)|0,eg&=67108863,i=Math.imul(w,J),n=(n=Math.imul(w,F))+Math.imul(_,J)|0,o=Math.imul(_,F),i=i+Math.imul(v,V)|0,n=(n=n+Math.imul(v,z)|0)+Math.imul(g,V)|0,o=o+Math.imul(g,z)|0,i=i+Math.imul(p,H)|0,n=(n=n+Math.imul(p,W)|0)+Math.imul(y,H)|0,o=o+Math.imul(y,W)|0;var eb=(u+(i=i+Math.imul(d,$)|0)|0)+((8191&(n=(n=n+Math.imul(d,X)|0)+Math.imul(h,$)|0))<<13)|0;u=((o=o+Math.imul(h,X)|0)+(n>>>13)|0)+(eb>>>26)|0,eb&=67108863,i=Math.imul(E,J),n=(n=Math.imul(E,F))+Math.imul(k,J)|0,o=Math.imul(k,F),i=i+Math.imul(w,V)|0,n=(n=n+Math.imul(w,z)|0)+Math.imul(_,V)|0,o=o+Math.imul(_,z)|0,i=i+Math.imul(v,H)|0,n=(n=n+Math.imul(v,W)|0)+Math.imul(g,H)|0,o=o+Math.imul(g,W)|0,i=i+Math.imul(p,$)|0,n=(n=n+Math.imul(p,X)|0)+Math.imul(y,$)|0,o=o+Math.imul(y,X)|0;var ew=(u+(i=i+Math.imul(d,Q)|0)|0)+((8191&(n=(n=n+Math.imul(d,ee)|0)+Math.imul(h,Q)|0))<<13)|0;u=((o=o+Math.imul(h,ee)|0)+(n>>>13)|0)+(ew>>>26)|0,ew&=67108863,i=Math.imul(A,J),n=(n=Math.imul(A,F))+Math.imul(P,J)|0,o=Math.imul(P,F),i=i+Math.imul(E,V)|0,n=(n=n+Math.imul(E,z)|0)+Math.imul(k,V)|0,o=o+Math.imul(k,z)|0,i=i+Math.imul(w,H)|0,n=(n=n+Math.imul(w,W)|0)+Math.imul(_,H)|0,o=o+Math.imul(_,W)|0,i=i+Math.imul(v,$)|0,n=(n=n+Math.imul(v,X)|0)+Math.imul(g,$)|0,o=o+Math.imul(g,X)|0,i=i+Math.imul(p,Q)|0,n=(n=n+Math.imul(p,ee)|0)+Math.imul(y,Q)|0,o=o+Math.imul(y,ee)|0;var e_=(u+(i=i+Math.imul(d,er)|0)|0)+((8191&(n=(n=n+Math.imul(d,ei)|0)+Math.imul(h,er)|0))<<13)|0;u=((o=o+Math.imul(h,ei)|0)+(n>>>13)|0)+(e_>>>26)|0,e_&=67108863,i=Math.imul(O,J),n=(n=Math.imul(O,F))+Math.imul(T,J)|0,o=Math.imul(T,F),i=i+Math.imul(A,V)|0,n=(n=n+Math.imul(A,z)|0)+Math.imul(P,V)|0,o=o+Math.imul(P,z)|0,i=i+Math.imul(E,H)|0,n=(n=n+Math.imul(E,W)|0)+Math.imul(k,H)|0,o=o+Math.imul(k,W)|0,i=i+Math.imul(w,$)|0,n=(n=n+Math.imul(w,X)|0)+Math.imul(_,$)|0,o=o+Math.imul(_,X)|0,i=i+Math.imul(v,Q)|0,n=(n=n+Math.imul(v,ee)|0)+Math.imul(g,Q)|0,o=o+Math.imul(g,ee)|0,i=i+Math.imul(p,er)|0,n=(n=n+Math.imul(p,ei)|0)+Math.imul(y,er)|0,o=o+Math.imul(y,ei)|0;var eS=(u+(i=i+Math.imul(d,eo)|0)|0)+((8191&(n=(n=n+Math.imul(d,es)|0)+Math.imul(h,eo)|0))<<13)|0;u=((o=o+Math.imul(h,es)|0)+(n>>>13)|0)+(eS>>>26)|0,eS&=67108863,i=Math.imul(B,J),n=(n=Math.imul(B,F))+Math.imul(C,J)|0,o=Math.imul(C,F),i=i+Math.imul(O,V)|0,n=(n=n+Math.imul(O,z)|0)+Math.imul(T,V)|0,o=o+Math.imul(T,z)|0,i=i+Math.imul(A,H)|0,n=(n=n+Math.imul(A,W)|0)+Math.imul(P,H)|0,o=o+Math.imul(P,W)|0,i=i+Math.imul(E,$)|0,n=(n=n+Math.imul(E,X)|0)+Math.imul(k,$)|0,o=o+Math.imul(k,X)|0,i=i+Math.imul(w,Q)|0,n=(n=n+Math.imul(w,ee)|0)+Math.imul(_,Q)|0,o=o+Math.imul(_,ee)|0,i=i+Math.imul(v,er)|0,n=(n=n+Math.imul(v,ei)|0)+Math.imul(g,er)|0,o=o+Math.imul(g,ei)|0,i=i+Math.imul(p,eo)|0,n=(n=n+Math.imul(p,es)|0)+Math.imul(y,eo)|0,o=o+Math.imul(y,es)|0;var eE=(u+(i=i+Math.imul(d,el)|0)|0)+((8191&(n=(n=n+Math.imul(d,eu)|0)+Math.imul(h,el)|0))<<13)|0;u=((o=o+Math.imul(h,eu)|0)+(n>>>13)|0)+(eE>>>26)|0,eE&=67108863,i=Math.imul(M,J),n=(n=Math.imul(M,F))+Math.imul(U,J)|0,o=Math.imul(U,F),i=i+Math.imul(B,V)|0,n=(n=n+Math.imul(B,z)|0)+Math.imul(C,V)|0,o=o+Math.imul(C,z)|0,i=i+Math.imul(O,H)|0,n=(n=n+Math.imul(O,W)|0)+Math.imul(T,H)|0,o=o+Math.imul(T,W)|0,i=i+Math.imul(A,$)|0,n=(n=n+Math.imul(A,X)|0)+Math.imul(P,$)|0,o=o+Math.imul(P,X)|0,i=i+Math.imul(E,Q)|0,n=(n=n+Math.imul(E,ee)|0)+Math.imul(k,Q)|0,o=o+Math.imul(k,ee)|0,i=i+Math.imul(w,er)|0,n=(n=n+Math.imul(w,ei)|0)+Math.imul(_,er)|0,o=o+Math.imul(_,ei)|0,i=i+Math.imul(v,eo)|0,n=(n=n+Math.imul(v,es)|0)+Math.imul(g,eo)|0,o=o+Math.imul(g,es)|0,i=i+Math.imul(p,el)|0,n=(n=n+Math.imul(p,eu)|0)+Math.imul(y,el)|0,o=o+Math.imul(y,eu)|0;var ek=(u+(i=i+Math.imul(d,ed)|0)|0)+((8191&(n=(n=n+Math.imul(d,eh)|0)+Math.imul(h,ed)|0))<<13)|0;u=((o=o+Math.imul(h,eh)|0)+(n>>>13)|0)+(ek>>>26)|0,ek&=67108863,i=Math.imul(D,J),n=(n=Math.imul(D,F))+Math.imul(j,J)|0,o=Math.imul(j,F),i=i+Math.imul(M,V)|0,n=(n=n+Math.imul(M,z)|0)+Math.imul(U,V)|0,o=o+Math.imul(U,z)|0,i=i+Math.imul(B,H)|0,n=(n=n+Math.imul(B,W)|0)+Math.imul(C,H)|0,o=o+Math.imul(C,W)|0,i=i+Math.imul(O,$)|0,n=(n=n+Math.imul(O,X)|0)+Math.imul(T,$)|0,o=o+Math.imul(T,X)|0,i=i+Math.imul(A,Q)|0,n=(n=n+Math.imul(A,ee)|0)+Math.imul(P,Q)|0,o=o+Math.imul(P,ee)|0,i=i+Math.imul(E,er)|0,n=(n=n+Math.imul(E,ei)|0)+Math.imul(k,er)|0,o=o+Math.imul(k,ei)|0,i=i+Math.imul(w,eo)|0,n=(n=n+Math.imul(w,es)|0)+Math.imul(_,eo)|0,o=o+Math.imul(_,es)|0,i=i+Math.imul(v,el)|0,n=(n=n+Math.imul(v,eu)|0)+Math.imul(g,el)|0,o=o+Math.imul(g,eu)|0,i=i+Math.imul(p,ed)|0,n=(n=n+Math.imul(p,eh)|0)+Math.imul(y,ed)|0,o=o+Math.imul(y,eh)|0;var eN=(u+(i=i+Math.imul(d,ep)|0)|0)+((8191&(n=(n=n+Math.imul(d,ey)|0)+Math.imul(h,ep)|0))<<13)|0;u=((o=o+Math.imul(h,ey)|0)+(n>>>13)|0)+(eN>>>26)|0,eN&=67108863,i=Math.imul(D,V),n=(n=Math.imul(D,z))+Math.imul(j,V)|0,o=Math.imul(j,z),i=i+Math.imul(M,H)|0,n=(n=n+Math.imul(M,W)|0)+Math.imul(U,H)|0,o=o+Math.imul(U,W)|0,i=i+Math.imul(B,$)|0,n=(n=n+Math.imul(B,X)|0)+Math.imul(C,$)|0,o=o+Math.imul(C,X)|0,i=i+Math.imul(O,Q)|0,n=(n=n+Math.imul(O,ee)|0)+Math.imul(T,Q)|0,o=o+Math.imul(T,ee)|0,i=i+Math.imul(A,er)|0,n=(n=n+Math.imul(A,ei)|0)+Math.imul(P,er)|0,o=o+Math.imul(P,ei)|0,i=i+Math.imul(E,eo)|0,n=(n=n+Math.imul(E,es)|0)+Math.imul(k,eo)|0,o=o+Math.imul(k,es)|0,i=i+Math.imul(w,el)|0,n=(n=n+Math.imul(w,eu)|0)+Math.imul(_,el)|0,o=o+Math.imul(_,eu)|0,i=i+Math.imul(v,ed)|0,n=(n=n+Math.imul(v,eh)|0)+Math.imul(g,ed)|0,o=o+Math.imul(g,eh)|0;var eA=(u+(i=i+Math.imul(p,ep)|0)|0)+((8191&(n=(n=n+Math.imul(p,ey)|0)+Math.imul(y,ep)|0))<<13)|0;u=((o=o+Math.imul(y,ey)|0)+(n>>>13)|0)+(eA>>>26)|0,eA&=67108863,i=Math.imul(D,H),n=(n=Math.imul(D,W))+Math.imul(j,H)|0,o=Math.imul(j,W),i=i+Math.imul(M,$)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(U,$)|0,o=o+Math.imul(U,X)|0,i=i+Math.imul(B,Q)|0,n=(n=n+Math.imul(B,ee)|0)+Math.imul(C,Q)|0,o=o+Math.imul(C,ee)|0,i=i+Math.imul(O,er)|0,n=(n=n+Math.imul(O,ei)|0)+Math.imul(T,er)|0,o=o+Math.imul(T,ei)|0,i=i+Math.imul(A,eo)|0,n=(n=n+Math.imul(A,es)|0)+Math.imul(P,eo)|0,o=o+Math.imul(P,es)|0,i=i+Math.imul(E,el)|0,n=(n=n+Math.imul(E,eu)|0)+Math.imul(k,el)|0,o=o+Math.imul(k,eu)|0,i=i+Math.imul(w,ed)|0,n=(n=n+Math.imul(w,eh)|0)+Math.imul(_,ed)|0,o=o+Math.imul(_,eh)|0;var eP=(u+(i=i+Math.imul(v,ep)|0)|0)+((8191&(n=(n=n+Math.imul(v,ey)|0)+Math.imul(g,ep)|0))<<13)|0;u=((o=o+Math.imul(g,ey)|0)+(n>>>13)|0)+(eP>>>26)|0,eP&=67108863,i=Math.imul(D,$),n=(n=Math.imul(D,X))+Math.imul(j,$)|0,o=Math.imul(j,X),i=i+Math.imul(M,Q)|0,n=(n=n+Math.imul(M,ee)|0)+Math.imul(U,Q)|0,o=o+Math.imul(U,ee)|0,i=i+Math.imul(B,er)|0,n=(n=n+Math.imul(B,ei)|0)+Math.imul(C,er)|0,o=o+Math.imul(C,ei)|0,i=i+Math.imul(O,eo)|0,n=(n=n+Math.imul(O,es)|0)+Math.imul(T,eo)|0,o=o+Math.imul(T,es)|0,i=i+Math.imul(A,el)|0,n=(n=n+Math.imul(A,eu)|0)+Math.imul(P,el)|0,o=o+Math.imul(P,eu)|0,i=i+Math.imul(E,ed)|0,n=(n=n+Math.imul(E,eh)|0)+Math.imul(k,ed)|0,o=o+Math.imul(k,eh)|0;var ex=(u+(i=i+Math.imul(w,ep)|0)|0)+((8191&(n=(n=n+Math.imul(w,ey)|0)+Math.imul(_,ep)|0))<<13)|0;u=((o=o+Math.imul(_,ey)|0)+(n>>>13)|0)+(ex>>>26)|0,ex&=67108863,i=Math.imul(D,Q),n=(n=Math.imul(D,ee))+Math.imul(j,Q)|0,o=Math.imul(j,ee),i=i+Math.imul(M,er)|0,n=(n=n+Math.imul(M,ei)|0)+Math.imul(U,er)|0,o=o+Math.imul(U,ei)|0,i=i+Math.imul(B,eo)|0,n=(n=n+Math.imul(B,es)|0)+Math.imul(C,eo)|0,o=o+Math.imul(C,es)|0,i=i+Math.imul(O,el)|0,n=(n=n+Math.imul(O,eu)|0)+Math.imul(T,el)|0,o=o+Math.imul(T,eu)|0,i=i+Math.imul(A,ed)|0,n=(n=n+Math.imul(A,eh)|0)+Math.imul(P,ed)|0,o=o+Math.imul(P,eh)|0;var eO=(u+(i=i+Math.imul(E,ep)|0)|0)+((8191&(n=(n=n+Math.imul(E,ey)|0)+Math.imul(k,ep)|0))<<13)|0;u=((o=o+Math.imul(k,ey)|0)+(n>>>13)|0)+(eO>>>26)|0,eO&=67108863,i=Math.imul(D,er),n=(n=Math.imul(D,ei))+Math.imul(j,er)|0,o=Math.imul(j,ei),i=i+Math.imul(M,eo)|0,n=(n=n+Math.imul(M,es)|0)+Math.imul(U,eo)|0,o=o+Math.imul(U,es)|0,i=i+Math.imul(B,el)|0,n=(n=n+Math.imul(B,eu)|0)+Math.imul(C,el)|0,o=o+Math.imul(C,eu)|0,i=i+Math.imul(O,ed)|0,n=(n=n+Math.imul(O,eh)|0)+Math.imul(T,ed)|0,o=o+Math.imul(T,eh)|0;var eT=(u+(i=i+Math.imul(A,ep)|0)|0)+((8191&(n=(n=n+Math.imul(A,ey)|0)+Math.imul(P,ep)|0))<<13)|0;u=((o=o+Math.imul(P,ey)|0)+(n>>>13)|0)+(eT>>>26)|0,eT&=67108863,i=Math.imul(D,eo),n=(n=Math.imul(D,es))+Math.imul(j,eo)|0,o=Math.imul(j,es),i=i+Math.imul(M,el)|0,n=(n=n+Math.imul(M,eu)|0)+Math.imul(U,el)|0,o=o+Math.imul(U,eu)|0,i=i+Math.imul(B,ed)|0,n=(n=n+Math.imul(B,eh)|0)+Math.imul(C,ed)|0,o=o+Math.imul(C,eh)|0;var eR=(u+(i=i+Math.imul(O,ep)|0)|0)+((8191&(n=(n=n+Math.imul(O,ey)|0)+Math.imul(T,ep)|0))<<13)|0;u=((o=o+Math.imul(T,ey)|0)+(n>>>13)|0)+(eR>>>26)|0,eR&=67108863,i=Math.imul(D,el),n=(n=Math.imul(D,eu))+Math.imul(j,el)|0,o=Math.imul(j,eu),i=i+Math.imul(M,ed)|0,n=(n=n+Math.imul(M,eh)|0)+Math.imul(U,ed)|0,o=o+Math.imul(U,eh)|0;var eB=(u+(i=i+Math.imul(B,ep)|0)|0)+((8191&(n=(n=n+Math.imul(B,ey)|0)+Math.imul(C,ep)|0))<<13)|0;u=((o=o+Math.imul(C,ey)|0)+(n>>>13)|0)+(eB>>>26)|0,eB&=67108863,i=Math.imul(D,ed),n=(n=Math.imul(D,eh))+Math.imul(j,ed)|0,o=Math.imul(j,eh);var eC=(u+(i=i+Math.imul(M,ep)|0)|0)+((8191&(n=(n=n+Math.imul(M,ey)|0)+Math.imul(U,ep)|0))<<13)|0;u=((o=o+Math.imul(U,ey)|0)+(n>>>13)|0)+(eC>>>26)|0,eC&=67108863;var eI=(u+(i=Math.imul(D,ep))|0)+((8191&(n=(n=Math.imul(D,ey))+Math.imul(j,ep)|0))<<13)|0;return u=((o=Math.imul(j,ey))+(n>>>13)|0)+(eI>>>26)|0,eI&=67108863,l[0]=em,l[1]=ev,l[2]=eg,l[3]=eb,l[4]=ew,l[5]=e_,l[6]=eS,l[7]=eE,l[8]=ek,l[9]=eN,l[10]=eA,l[11]=eP,l[12]=ex,l[13]=eO,l[14]=eT,l[15]=eR,l[16]=eB,l[17]=eC,l[18]=eI,0!==u&&(l[19]=u,r.length++),r};function m(e,t,r){return(new v).mulp(e,t,r)}function v(e,t){this.x=e,this.y=t}Math.imul||(y=p),o.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?y(this,e,t):r<63?p(this,e,t):r<1024?function(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,n=0,o=0;o<r.length-1;o++){var s=n;n=0;for(var a=67108863&i,l=Math.min(o,t.length-1),u=Math.max(0,o-e.length+1);u<=l;u++){var c=o-u,d=(0|e.words[c])*(0|t.words[u]),h=67108863&d;a=67108863&(h=h+a|0),n+=(s=(s=s+(d/67108864|0)|0)+(h>>>26)|0)>>>26,s&=67108863}r.words[o]=a,i=s,s=n}return 0!==i?r.words[o]=i:r.length--,r.strip()}(this,e,t):m(this,e,t)},v.prototype.makeRBT=function(e){for(var t=Array(e),r=o.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},v.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,n=0;n<t;n++)i|=(1&e)<<t-n-1,e>>=1;return i},v.prototype.permute=function(e,t,r,i,n,o){for(var s=0;s<o;s++)i[s]=t[e[s]],n[s]=r[e[s]]},v.prototype.transform=function(e,t,r,i,n,o){this.permute(o,e,t,r,i,n);for(var s=1;s<n;s<<=1)for(var a=s<<1,l=Math.cos(2*Math.PI/a),u=Math.sin(2*Math.PI/a),c=0;c<n;c+=a)for(var d=l,h=u,f=0;f<s;f++){var p=r[c+f],y=i[c+f],m=r[c+f+s],v=i[c+f+s],g=d*m-h*v;v=d*v+h*m,m=g,r[c+f]=p+m,i[c+f]=y+v,r[c+f+s]=p-m,i[c+f+s]=y-v,f!==a&&(g=l*d-u*h,h=l*h+u*d,d=g)}},v.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},v.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=e[i];e[i]=e[r-i-1],e[r-i-1]=n,n=t[i],t[i]=-t[r-i-1],t[r-i-1]=-n}},v.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var n=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=67108863&n,r=n<67108864?0:n/67108864|0}return e},v.prototype.convert13b=function(e,t,r,n){for(var o=0,s=0;s<t;s++)o+=0|e[s],r[2*s]=8191&o,o>>>=13,r[2*s+1]=8191&o,o>>>=13;for(s=2*t;s<n;++s)r[s]=0;i(0===o),i(0==(-8192&o))},v.prototype.stub=function(e){for(var t=Array(e),r=0;r<e;r++)t[r]=0;return t},v.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(i),o=this.stub(i),s=Array(i),a=Array(i),l=Array(i),u=Array(i),c=Array(i),d=Array(i),h=r.words;h.length=i,this.convert13b(e.words,e.length,s,i),this.convert13b(t.words,t.length,u,i),this.transform(s,o,a,l,i,n),this.transform(u,o,c,d,i,n);for(var f=0;f<i;f++){var p=a[f]*c[f]-l[f]*d[f];l[f]=a[f]*d[f]+l[f]*c[f],a[f]=p}return this.conjugate(a,l,i),this.transform(a,l,h,o,i,n),this.conjugate(h,o,i),this.normalize13b(h,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r.strip()},o.prototype.mul=function(e){var t=new o(null);return t.words=Array(this.length+e.length),this.mulTo(e,t)},o.prototype.mulf=function(e){var t=new o(null);return t.words=Array(this.length+e.length),m(this,e,t)},o.prototype.imul=function(e){return this.clone().mulTo(e,this)},o.prototype.imuln=function(e){i("number"==typeof e),i(e<67108864);for(var t=0,r=0;r<this.length;r++){var n=(0|this.words[r])*e,o=(67108863&n)+(67108863&t);t>>=26,t+=(n/67108864|0)+(o>>>26),this.words[r]=67108863&o}return 0!==t&&(this.words[r]=t,this.length++),this},o.prototype.muln=function(e){return this.clone().imuln(e)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(e){var t=function(e){for(var t=Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,n=r%26;t[r]=(e.words[i]&1<<n)>>>n}return t}(e);if(0===t.length)return new o(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var n=r.sqr();i<t.length;i++,n=n.sqr())0!==t[i]&&(r=r.mul(n));return r},o.prototype.iushln=function(e){i("number"==typeof e&&e>=0);var t,r=e%26,n=(e-r)/26,o=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(t=0;t<this.length;t++){var a=this.words[t]&o,l=(0|this.words[t])-a<<r;this.words[t]=l|s,s=a>>>26-r}s&&(this.words[t]=s,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this.strip()},o.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},o.prototype.iushrn=function(e,t,r){i("number"==typeof e&&e>=0),n=t?(t-t%26)/26:0;var n,o=e%26,s=Math.min((e-o)/26,this.length),a=67108863^67108863>>>o<<o,l=r;if(n-=s,n=Math.max(0,n),l){for(var u=0;u<s;u++)l.words[u]=this.words[u];l.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=n);u--){var d=0|this.words[u];this.words[u]=c<<26-o|d>>>o,c=d&a}return l&&0!==c&&(l.words[l.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(e,t,r){return i(0===this.negative),this.iushrn(e,t,r)},o.prototype.shln=function(e){return this.clone().ishln(e)},o.prototype.ushln=function(e){return this.clone().iushln(e)},o.prototype.shrn=function(e){return this.clone().ishrn(e)},o.prototype.ushrn=function(e){return this.clone().iushrn(e)},o.prototype.testn=function(e){i("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26,n=1<<t;return!(this.length<=r||!(this.words[r]&n))},o.prototype.imaskn=function(e){i("number"==typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this.strip()},o.prototype.maskn=function(e){return this.clone().imaskn(e)},o.prototype.iaddn=function(e){return i("number"==typeof e),i(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},o.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},o.prototype.isubn=function(e){if(i("number"==typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},o.prototype.addn=function(e){return this.clone().iaddn(e)},o.prototype.subn=function(e){return this.clone().isubn(e)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(e,t,r){var n,o,s=e.length+r;this._expand(s);var a=0;for(n=0;n<e.length;n++){o=(0|this.words[n+r])+a;var l=(0|e.words[n])*t;a=((o-=67108863&l)>>26)-(l/67108864|0),this.words[n+r]=67108863&o}for(;n<this.length-r;n++)a=(o=(0|this.words[n+r])+a)>>26,this.words[n+r]=67108863&o;if(0===a)return this.strip();for(i(-1===a),a=0,n=0;n<this.length;n++)a=(o=-(0|this.words[n])+a)>>26,this.words[n]=67108863&o;return this.negative=1,this.strip()},o.prototype._wordDiv=function(e,t){var r=(this.length,e.length),i=this.clone(),n=e,s=0|n.words[n.length-1];0!=(r=26-this._countBits(s))&&(n=n.ushln(r),i.iushln(r),s=0|n.words[n.length-1]);var a,l=i.length-n.length;if("mod"!==t){(a=new o(null)).length=l+1,a.words=Array(a.length);for(var u=0;u<a.length;u++)a.words[u]=0}var c=i.clone()._ishlnsubmul(n,1,l);0===c.negative&&(i=c,a&&(a.words[l]=1));for(var d=l-1;d>=0;d--){var h=67108864*(0|i.words[n.length+d])+(0|i.words[n.length+d-1]);for(h=Math.min(h/s|0,67108863),i._ishlnsubmul(n,h,d);0!==i.negative;)h--,i.negative=0,i._ishlnsubmul(n,1,d),i.isZero()||(i.negative^=1);a&&(a.words[d]=h)}return a&&a.strip(),i.strip(),"div"!==t&&0!==r&&i.iushrn(r),{div:a||null,mod:i}},o.prototype.divmod=function(e,t,r){var n,s,a;return i(!e.isZero()),this.isZero()?{div:new o(0),mod:new o(0)}:0!==this.negative&&0===e.negative?(a=this.neg().divmod(e,t),"mod"!==t&&(n=a.div.neg()),"div"!==t&&(s=a.mod.neg(),r&&0!==s.negative&&s.iadd(e)),{div:n,mod:s}):0===this.negative&&0!==e.negative?(a=this.divmod(e.neg(),t),"mod"!==t&&(n=a.div.neg()),{div:n,mod:a.mod}):0!=(this.negative&e.negative)?(a=this.neg().divmod(e.neg(),t),"div"!==t&&(s=a.mod.neg(),r&&0!==s.negative&&s.isub(e)),{div:a.div,mod:s}):e.length>this.length||0>this.cmp(e)?{div:new o(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new o(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new o(this.modn(e.words[0]))}:this._wordDiv(e,t)},o.prototype.div=function(e){return this.divmod(e,"div",!1).div},o.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},o.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},o.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),n=e.andln(1),o=r.cmp(i);return o<0||1===n&&0===o?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},o.prototype.modn=function(e){i(e<=67108863);for(var t=67108864%e,r=0,n=this.length-1;n>=0;n--)r=(t*r+(0|this.words[n]))%e;return r},o.prototype.idivn=function(e){i(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var n=(0|this.words[r])+67108864*t;this.words[r]=n/e|0,t=n%e}return this.strip()},o.prototype.divn=function(e){return this.clone().idivn(e)},o.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n=new o(1),s=new o(0),a=new o(0),l=new o(1),u=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++u;for(var c=r.clone(),d=t.clone();!t.isZero();){for(var h=0,f=1;0==(t.words[0]&f)&&h<26;++h,f<<=1);if(h>0)for(t.iushrn(h);h-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(c),s.isub(d)),n.iushrn(1),s.iushrn(1);for(var p=0,y=1;0==(r.words[0]&y)&&p<26;++p,y<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(a.isOdd()||l.isOdd())&&(a.iadd(c),l.isub(d)),a.iushrn(1),l.iushrn(1);t.cmp(r)>=0?(t.isub(r),n.isub(a),s.isub(l)):(r.isub(t),a.isub(n),l.isub(s))}return{a,b:l,gcd:r.iushln(u)}},o.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n,s=new o(1),a=new o(0),l=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,c=1;0==(t.words[0]&c)&&u<26;++u,c<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(l),s.iushrn(1);for(var d=0,h=1;0==(r.words[0]&h)&&d<26;++d,h<<=1);if(d>0)for(r.iushrn(d);d-- >0;)a.isOdd()&&a.iadd(l),a.iushrn(1);t.cmp(r)>=0?(t.isub(r),s.isub(a)):(r.isub(t),a.isub(s))}return 0>(n=0===t.cmpn(1)?s:a).cmpn(0)&&n.iadd(e),n},o.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=t.cmp(r);if(n<0){var o=t;t=r,r=o}else if(0===n||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},o.prototype.invm=function(e){return this.egcd(e).a.umod(e)},o.prototype.isEven=function(){return 0==(1&this.words[0])},o.prototype.isOdd=function(){return 1==(1&this.words[0])},o.prototype.andln=function(e){return this.words[0]&e},o.prototype.bincn=function(e){i("number"==typeof e);var t=e%26,r=(e-t)/26,n=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var o=n,s=r;0!==o&&s<this.length;s++){var a=0|this.words[s];o=(a+=o)>>>26,a&=67108863,this.words[s]=a}return 0!==o&&(this.words[s]=o,this.length++),this},o.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},o.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return -1;if(0===this.negative&&r)return 1;if(this.strip(),this.length>1)t=1;else{r&&(e=-e),i(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},o.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return -1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},o.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return -1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|e.words[r];if(i!==n){i<n?t=-1:i>n&&(t=1);break}}return t},o.prototype.gtn=function(e){return 1===this.cmpn(e)},o.prototype.gt=function(e){return 1===this.cmp(e)},o.prototype.gten=function(e){return this.cmpn(e)>=0},o.prototype.gte=function(e){return this.cmp(e)>=0},o.prototype.ltn=function(e){return -1===this.cmpn(e)},o.prototype.lt=function(e){return -1===this.cmp(e)},o.prototype.lten=function(e){return 0>=this.cmpn(e)},o.prototype.lte=function(e){return 0>=this.cmp(e)},o.prototype.eqn=function(e){return 0===this.cmpn(e)},o.prototype.eq=function(e){return 0===this.cmp(e)},o.red=function(e){return new k(e)},o.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(e){return this.red=e,this},o.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},o.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},o.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},o.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},o.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},o.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},o.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},o.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new o(t,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function E(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function k(e){if("string"==typeof e){var t=o._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function N(e){k.call(this,e),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new o(null);return e.words=Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,r=e;do this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength();while(t>this.n);var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):void 0!==r.strip?r.strip():r._strip(),r},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},n(w,b),w.prototype.split=function(e,t){for(var r=4194303,i=Math.min(e.length,9),n=0;n<i;n++)t.words[n]=e.words[n];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var o=e.words[9];for(t.words[t.length++]=o&r,n=10;n<e.length;n++){var s=0|e.words[n];e.words[n-10]=(s&r)<<4|o>>>22,o=s}o>>>=22,e.words[n-10]=o,0===o&&e.length>10?e.length-=10:e.length-=9},w.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(_,b),n(S,b),n(E,b),E.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=19*(0|e.words[r])+t,n=67108863&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},o._prime=function(e){var t;if(g[e])return g[e];if("k256"===e)t=new w;else if("p224"===e)t=new _;else if("p192"===e)t=new S;else{if("p25519"!==e)throw Error("Unknown prime "+e);t=new E}return g[e]=t,t},k.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},k.prototype._verify2=function(e,t){i(0==(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},k.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},k.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},k.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},k.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},k.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r._forceRed(this)},k.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return 0>r.cmpn(0)&&r.iadd(this.m),r},k.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},k.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},k.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},k.prototype.isqr=function(e){return this.imul(e,e.clone())},k.prototype.sqr=function(e){return this.mul(e,e)},k.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2==1),3===t){var r=this.m.add(new o(1)).iushrn(2);return this.pow(e,r)}for(var n=this.m.subn(1),s=0;!n.isZero()&&0===n.andln(1);)s++,n.iushrn(1);i(!n.isZero());var a=new o(1).toRed(this),l=a.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);0!==this.pow(c,u).cmp(l);)c.redIAdd(l);for(var d=this.pow(c,n),h=this.pow(e,n.addn(1).iushrn(1)),f=this.pow(e,n),p=s;0!==f.cmp(a);){for(var y=f,m=0;0!==y.cmp(a);m++)y=y.redSqr();i(m<p);var v=this.pow(d,new o(1).iushln(p-m-1));h=h.redMul(v),d=v.redSqr(),f=f.redMul(d),p=m}return h},k.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},k.prototype.pow=function(e,t){if(t.isZero())return new o(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=Array(16);r[0]=new o(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var n=r[0],s=0,a=0,l=t.bitLength()%26;for(0===l&&(l=26),i=t.length-1;i>=0;i--){for(var u=t.words[i],c=l-1;c>=0;c--){var d=u>>c&1;n!==r[0]&&(n=this.sqr(n)),0!==d||0!==s?(s<<=1,s|=d,(4==++a||0===i&&0===c)&&(n=this.mul(n,r[s]),a=0,s=0)):a=0}l=26}return n},k.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},k.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},o.mont=function(e){return new N(e)},n(N,k),N.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},N.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},N.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):0>n.cmpn(0)&&(o=n.iadd(this.m)),o._forceRed(this)},N.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new o(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):0>n.cmpn(0)&&(s=n.iadd(this.m)),s._forceRed(this)},N.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e=r.nmd(e),this)},9982:(e,t,r)=>{"use strict";r.r(t),r.d(t,{BaseContract:()=>io,BigNumber:()=>Q,Contract:()=>is,ContractFactory:()=>ia,FixedNumber:()=>ib,Signer:()=>t2,VoidSigner:()=>t3,Wallet:()=>nI,Wordlist:()=>iW,constants:()=>d,errors:()=>n,ethers:()=>y,getDefaultProvider:()=>sq,logger:()=>s7,providers:()=>h,utils:()=>p,version:()=>s4,wordlists:()=>iY});var i,n,o,s,a,l,u,c={};r.r(c),r.d(c,{decode:()=>eR,encode:()=>ex});var d={};r.r(d),r.d(d,{AddressZero:()=>nK,EtherSymbol:()=>nj,HashZero:()=>nD,MaxInt256:()=>tu,MaxUint256:()=>ta,MinInt256:()=>tl,NegativeOne:()=>tr,One:()=>tn,Two:()=>to,WeiPerEther:()=>ts,Zero:()=>ti});var h={};r.r(h),r.d(h,{AlchemyProvider:()=>se,AlchemyWebSocketProvider:()=>o9,BaseProvider:()=>oD,CloudflareProvider:()=>sr,EtherscanProvider:()=>sd,FallbackProvider:()=>sA,Formatter:()=>of,InfuraProvider:()=>sR,InfuraWebSocketProvider:()=>sT,IpcProvider:()=>sP,JsonRpcBatchProvider:()=>sB,JsonRpcProvider:()=>o$,JsonRpcSigner:()=>oH,NodesmithProvider:()=>sI,PocketProvider:()=>sK,Provider:()=>tX,Resolver:()=>oM,StaticJsonRpcProvider:()=>o5,UrlJsonRpcProvider:()=>o8,Web3Provider:()=>sJ,WebSocketProvider:()=>o3,getDefaultProvider:()=>sq,getNetwork:()=>nH,isCommunityResourcable:()=>op,isCommunityResource:()=>oy,showThrottleMessage:()=>ov});var f={};r.r(f),r.d(f,{decode:()=>oe,encode:()=>ot});var p={};r.r(p),r.d(p,{AbiCoder:()=>tj,ConstructorFragment:()=>tx,ErrorFragment:()=>tR,EventFragment:()=>tk,FormatTypes:()=>tb,Fragment:()=>tE,FunctionFragment:()=>tO,HDNode:()=>i9,Indexed:()=>tz,Interface:()=>tW,LogDescription:()=>tF,Logger:()=>E,ParamType:()=>t_,RLP:()=>c,SigningKey:()=>rM,SupportedAlgorithm:()=>u,TransactionDescription:()=>tq,TransactionTypes:()=>l,UnicodeNormalizationForm:()=>s,Utf8ErrorFuncs:()=>eG,Utf8ErrorReason:()=>a,_TypedDataEncoder:()=>iD,_fetchData:()=>os,_toEscapedUtf8String:()=>e$,accessListify:()=>rH,arrayify:()=>T,base58:()=>iL,base64:()=>f,checkProperties:()=>el,checkResultErrors:()=>ev,commify:()=>s2,computeAddress:()=>rq,computeHmac:()=>iz,computePublicKey:()=>rK,concat:()=>R,deepCopy:()=>ef,defaultAbiCoder:()=>tL,defaultPath:()=>i7,defineReadOnly:()=>eo,entropyToMnemonic:()=>nr,fetchJson:()=>oa,formatBytes32String:()=>sY,formatEther:()=>s5,formatUnits:()=>s3,getAccountPath:()=>nn,getAddress:()=>ej,getContractAddress:()=>eF,getCreate2Address:()=>eq,getIcapAddress:()=>eJ,getJsonWalletAddress:()=>nS,getStatic:()=>es,hashMessage:()=>iS,hexConcat:()=>j,hexDataLength:()=>K,hexDataSlice:()=>D,hexStripZeros:()=>J,hexValue:()=>L,hexZeroPad:()=>F,hexlify:()=>U,id:()=>e0,isAddress:()=>eL,isBytes:()=>O,isBytesLike:()=>P,isHexString:()=>I,isValidMnemonic:()=>ni,isValidName:()=>n7,joinSignature:()=>V,keccak256:()=>eE,mnemonicToEntropy:()=>nt,mnemonicToSeed:()=>ne,namehash:()=>n9,nameprep:()=>n6,parseBytes32String:()=>sQ,parseEther:()=>s8,parseTransaction:()=>rQ,parseUnits:()=>s6,poll:()=>ol,randomBytes:()=>nl,recoverAddress:()=>rV,recoverPublicKey:()=>rU,resolveProperties:()=>ea,ripemd160:()=>iF,serializeTransaction:()=>rX,sha256:()=>iq,sha512:()=>iV,shallowCopy:()=>eu,shuffled:()=>sh,solidityKeccak256:()=>s$,solidityPack:()=>sZ,soliditySha256:()=>sX,splitSignature:()=>q,stripZeros:()=>B,toUtf8Bytes:()=>eW,toUtf8CodePoints:()=>eQ,toUtf8String:()=>eY,verifyMessage:()=>nM,verifyTypedData:()=>nU,zeroPad:()=>C});var y={};r.r(y),r.d(y,{BaseContract:()=>io,BigNumber:()=>Q,Contract:()=>is,ContractFactory:()=>ia,FixedNumber:()=>ib,Signer:()=>t2,VoidSigner:()=>t3,Wallet:()=>nI,Wordlist:()=>iW,constants:()=>d,errors:()=>n,getDefaultProvider:()=>sq,logger:()=>s7,providers:()=>h,utils:()=>p,version:()=>s4,wordlists:()=>iY});let m=!1,v=!1,g={debug:1,default:2,info:2,warning:3,error:4,off:5},b=g.default,w=null,_=function(){try{let e=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test"!=="test".normalize(t))throw Error("bad normalize")}catch(r){e.push(t)}}),e.length)throw Error("missing "+e.join(", "));if(String.fromCharCode(233).normalize("NFD")!==String.fromCharCode(101,769))throw Error("broken implementation")}catch(t){return t.message}return null}();(function(e){e.DEBUG="DEBUG",e.INFO="INFO",e.WARNING="WARNING",e.ERROR="ERROR",e.OFF="OFF"})(i||(i={})),function(e){e.UNKNOWN_ERROR="UNKNOWN_ERROR",e.NOT_IMPLEMENTED="NOT_IMPLEMENTED",e.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",e.NETWORK_ERROR="NETWORK_ERROR",e.SERVER_ERROR="SERVER_ERROR",e.TIMEOUT="TIMEOUT",e.BUFFER_OVERRUN="BUFFER_OVERRUN",e.NUMERIC_FAULT="NUMERIC_FAULT",e.MISSING_NEW="MISSING_NEW",e.INVALID_ARGUMENT="INVALID_ARGUMENT",e.MISSING_ARGUMENT="MISSING_ARGUMENT",e.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",e.CALL_EXCEPTION="CALL_EXCEPTION",e.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",e.NONCE_EXPIRED="NONCE_EXPIRED",e.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",e.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",e.TRANSACTION_REPLACED="TRANSACTION_REPLACED"}(n||(n={}));let S="0123456789abcdef";class E{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,t){let r=e.toLowerCase();null==g[r]&&this.throwArgumentError("invalid log level name","logLevel",e),b>g[r]||console.log.apply(console,t)}debug(...e){this._log(E.levels.DEBUG,e)}info(...e){this._log(E.levels.INFO,e)}warn(...e){this._log(E.levels.WARNING,e)}makeError(e,t,r){if(v)return this.makeError("censored error",t,{});t||(t=E.errors.UNKNOWN_ERROR),r||(r={});let i=[];Object.keys(r).forEach(e=>{let t=r[e];try{if(t instanceof Uint8Array){let n="";for(let o=0;o<t.length;o++)n+=S[t[o]>>4]+S[15&t[o]];i.push(e+"=Uint8Array(0x"+n+")")}else i.push(e+"="+JSON.stringify(t))}catch(s){i.push(e+"="+JSON.stringify(r[e].toString()))}}),i.push(`code=${t}`),i.push(`version=${this.version}`);let n=e;i.length&&(e+=" ("+i.join(", ")+")");let o=Error(e);return o.reason=n,o.code=t,Object.keys(r).forEach(function(e){o[e]=r[e]}),o}throwError(e,t,r){throw this.makeError(e,t,r)}throwArgumentError(e,t,r){return this.throwError(e,E.errors.INVALID_ARGUMENT,{argument:t,value:r})}assert(e,t,r,i){e||this.throwError(t,r,i)}assertArgument(e,t,r,i){e||this.throwArgumentError(t,r,i)}checkNormalize(e){null==e&&(e="platform missing String.prototype.normalize"),_&&this.throwError("platform missing String.prototype.normalize",E.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:_})}checkSafeUint53(e,t){"number"==typeof e&&(null==t&&(t="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(t,E.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(t,E.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,t,r){r=r?": "+r:"",e<t&&this.throwError("missing argument"+r,E.errors.MISSING_ARGUMENT,{count:e,expectedCount:t}),e>t&&this.throwError("too many arguments"+r,E.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:t})}checkNew(e,t){e!==Object&&null!=e||this.throwError("missing new",E.errors.MISSING_NEW,{name:t.name})}checkAbstract(e,t){e===t?this.throwError("cannot instantiate abstract class "+JSON.stringify(t.name)+" directly; use a sub-class",E.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):e!==Object&&null!=e||this.throwError("missing new",E.errors.MISSING_NEW,{name:t.name})}static globalLogger(){return w||(w=new E("logger/5.5.0")),w}static setCensorship(e,t){if(!e&&t&&this.globalLogger().throwError("cannot permanently disable censorship",E.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),m){if(!e)return;this.globalLogger().throwError("error censorship permanent",E.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}v=!!e,m=!!t}static setLogLevel(e){let t=g[e.toLowerCase()];null!=t?b=t:E.globalLogger().warn("invalid log level - "+e)}static from(e){return new E(e)}}E.errors=n,E.levels=i;let k=new E("bytes/5.5.0");function N(e){return!!e.toHexString}function A(e){return e.slice||(e.slice=function(){let t=Array.prototype.slice.call(arguments);return A(new Uint8Array(Array.prototype.slice.apply(e,t)))}),e}function P(e){return I(e)&&!(e.length%2)||O(e)}function x(e){return"number"==typeof e&&e==e&&e%1==0}function O(e){if(null==e)return!1;if(e.constructor===Uint8Array)return!0;if("string"==typeof e||!x(e.length)||e.length<0)return!1;for(let t=0;t<e.length;t++){let r=e[t];if(!x(r)||r<0||r>=256)return!1}return!0}function T(e,t){if(t||(t={}),"number"==typeof e){k.checkSafeUint53(e,"invalid arrayify value");let r=[];for(;e;)r.unshift(255&e),e=parseInt(String(e/256));return 0===r.length&&r.push(0),A(new Uint8Array(r))}if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),N(e)&&(e=e.toHexString()),I(e)){let i=e.substring(2);i.length%2&&("left"===t.hexPad?i="0x0"+i.substring(2):"right"===t.hexPad?i+="0":k.throwArgumentError("hex data is odd-length","value",e));let n=[];for(let o=0;o<i.length;o+=2)n.push(parseInt(i.substring(o,o+2),16));return A(new Uint8Array(n))}return O(e)?A(new Uint8Array(e)):k.throwArgumentError("invalid arrayify value","value",e)}function R(e){let t=e.map(e=>T(e)),r=t.reduce((e,t)=>e+t.length,0),i=new Uint8Array(r);return t.reduce((e,t)=>(i.set(t,e),e+t.length),0),A(i)}function B(e){let t=T(e);if(0===t.length)return t;let r=0;for(;r<t.length&&0===t[r];)r++;return r&&(t=t.slice(r)),t}function C(e,t){(e=T(e)).length>t&&k.throwArgumentError("value out of range","value",arguments[0]);let r=new Uint8Array(t);return r.set(e,t-e.length),A(r)}function I(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}let M="0123456789abcdef";function U(e,t){if(t||(t={}),"number"==typeof e){k.checkSafeUint53(e,"invalid hexlify value");let r="";for(;e;)r=M[15&e]+r,e=Math.floor(e/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if("bigint"==typeof e)return(e=e.toString(16)).length%2?"0x0"+e:"0x"+e;if(t.allowMissingPrefix&&"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),N(e))return e.toHexString();if(I(e))return e.length%2&&("left"===t.hexPad?e="0x0"+e.substring(2):"right"===t.hexPad?e+="0":k.throwArgumentError("hex data is odd-length","value",e)),e.toLowerCase();if(O(e)){let i="0x";for(let n=0;n<e.length;n++){let o=e[n];i+=M[(240&o)>>4]+M[15&o]}return i}return k.throwArgumentError("invalid hexlify value","value",e)}function K(e){if("string"!=typeof e)e=U(e);else if(!I(e)||e.length%2)return null;return(e.length-2)/2}function D(e,t,r){return"string"!=typeof e?e=U(e):(!I(e)||e.length%2)&&k.throwArgumentError("invalid hexData","value",e),t=2+2*t,null!=r?"0x"+e.substring(t,2+2*r):"0x"+e.substring(t)}function j(e){let t="0x";return e.forEach(e=>{t+=U(e).substring(2)}),t}function L(e){let t=J(U(e,{hexPad:"left"}));return"0x"===t?"0x0":t}function J(e){"string"!=typeof e&&(e=U(e)),I(e)||k.throwArgumentError("invalid hex string","value",e),e=e.substring(2);let t=0;for(;t<e.length&&"0"===e[t];)t++;return"0x"+e.substring(t)}function F(e,t){for("string"!=typeof e?e=U(e):I(e)||k.throwArgumentError("invalid hex string","value",e),e.length>2*t+2&&k.throwArgumentError("value out of range","value",arguments[1]);e.length<2*t+2;)e="0x0"+e.substring(2);return e}function q(e){let t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0};if(P(e)){let r=T(e);65!==r.length&&k.throwArgumentError("invalid signature string; must be 65 bytes","signature",e),t.r=U(r.slice(0,32)),t.s=U(r.slice(32,64)),t.v=r[64],t.v<27&&(0===t.v||1===t.v?t.v+=27:k.throwArgumentError("signature invalid v byte","signature",e)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(r[32]|=128),t._vs=U(r.slice(32,64))}else{if(t.r=e.r,t.s=e.s,t.v=e.v,t.recoveryParam=e.recoveryParam,t._vs=e._vs,null!=t._vs){let i=C(T(t._vs),32);t._vs=U(i);let n=i[0]>=128?1:0;null==t.recoveryParam?t.recoveryParam=n:t.recoveryParam!==n&&k.throwArgumentError("signature recoveryParam mismatch _vs","signature",e),i[0]&=127;let o=U(i);null==t.s?t.s=o:t.s!==o&&k.throwArgumentError("signature v mismatch _vs","signature",e)}if(null==t.recoveryParam)null==t.v?k.throwArgumentError("signature missing v and recoveryParam","signature",e):0===t.v||1===t.v?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(null==t.v)t.v=27+t.recoveryParam;else{let s=0===t.v||1===t.v?t.v:1-t.v%2;t.recoveryParam!==s&&k.throwArgumentError("signature recoveryParam mismatch v","signature",e)}null!=t.r&&I(t.r)?t.r=F(t.r,32):k.throwArgumentError("signature missing or invalid r","signature",e),null!=t.s&&I(t.s)?t.s=F(t.s,32):k.throwArgumentError("signature missing or invalid s","signature",e);let a=T(t.s);a[0]>=128&&k.throwArgumentError("signature s out of range","signature",e),t.recoveryParam&&(a[0]|=128);let l=U(a);t._vs&&(I(t._vs)||k.throwArgumentError("signature invalid _vs","signature",e),t._vs=F(t._vs,32)),null==t._vs?t._vs=l:t._vs!==l&&k.throwArgumentError("signature _vs mismatch v and s","signature",e)}return t}function V(e){return U(R([(e=q(e)).r,e.s,e.recoveryParam?"0x1c":"0x1b"]))}var z=r(3550),G=r.n(z);let H="bignumber/5.5.0";var W=G().BN;let Z=new E(H),$={},X=9007199254740991,Y=!1;class Q{constructor(e,t){Z.checkNew(new.target,Q),e!==$&&Z.throwError("cannot call constructor directly; use BigNumber.from",E.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=t,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return et(er(this).fromTwos(e))}toTwos(e){return et(er(this).toTwos(e))}abs(){return"-"===this._hex[0]?Q.from(this._hex.substring(1)):this}add(e){return et(er(this).add(er(e)))}sub(e){return et(er(this).sub(er(e)))}div(e){return Q.from(e).isZero()&&ei("division by zero","div"),et(er(this).div(er(e)))}mul(e){return et(er(this).mul(er(e)))}mod(e){let t=er(e);return t.isNeg()&&ei("cannot modulo negative values","mod"),et(er(this).umod(t))}pow(e){let t=er(e);return t.isNeg()&&ei("cannot raise to negative values","pow"),et(er(this).pow(t))}and(e){let t=er(e);return(this.isNegative()||t.isNeg())&&ei("cannot 'and' negative values","and"),et(er(this).and(t))}or(e){let t=er(e);return(this.isNegative()||t.isNeg())&&ei("cannot 'or' negative values","or"),et(er(this).or(t))}xor(e){let t=er(e);return(this.isNegative()||t.isNeg())&&ei("cannot 'xor' negative values","xor"),et(er(this).xor(t))}mask(e){return(this.isNegative()||e<0)&&ei("cannot mask negative values","mask"),et(er(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&ei("cannot shift negative values","shl"),et(er(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&ei("cannot shift negative values","shr"),et(er(this).shrn(e))}eq(e){return er(this).eq(er(e))}lt(e){return er(this).lt(er(e))}lte(e){return er(this).lte(er(e))}gt(e){return er(this).gt(er(e))}gte(e){return er(this).gte(er(e))}isNegative(){return"-"===this._hex[0]}isZero(){return er(this).isZero()}toNumber(){try{return er(this).toNumber()}catch(e){ei("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch(e){}return Z.throwError("this platform does not support BigInt",E.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(10===arguments[0]?Y||(Y=!0,Z.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):16===arguments[0]?Z.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",E.errors.UNEXPECTED_ARGUMENT,{}):Z.throwError("BigNumber.toString does not accept parameters",E.errors.UNEXPECTED_ARGUMENT,{})),er(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof Q)return e;if("string"==typeof e)return e.match(/^-?0x[0-9a-f]+$/i)?new Q($,ee(e)):e.match(/^-?[0-9]+$/)?new Q($,ee(new W(e))):Z.throwArgumentError("invalid BigNumber string","value",e);if("number"==typeof e)return e%1&&ei("underflow","BigNumber.from",e),(e>=X||e<=-X)&&ei("overflow","BigNumber.from",e),Q.from(String(e));let t=e;if("bigint"==typeof t)return Q.from(t.toString());if(O(t))return Q.from(U(t));if(t){if(t.toHexString){let r=t.toHexString();if("string"==typeof r)return Q.from(r)}else{let i=t._hex;if(null==i&&"BigNumber"===t.type&&(i=t.hex),"string"==typeof i&&(I(i)||"-"===i[0]&&I(i.substring(1))))return Q.from(i)}}return Z.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!(!e||!e._isBigNumber)}}function ee(e){if("string"!=typeof e)return ee(e.toString(16));if("-"===e[0])return"-"===(e=e.substring(1))[0]&&Z.throwArgumentError("invalid hex","value",e),"0x00"===(e=ee(e))?e:"-"+e;if("0x"!==e.substring(0,2)&&(e="0x"+e),"0x"===e)return"0x00";for(e.length%2&&(e="0x0"+e.substring(2));e.length>4&&"0x00"===e.substring(0,4);)e="0x"+e.substring(4);return e}function et(e){return Q.from(ee(e))}function er(e){let t=Q.from(e).toHexString();return"-"===t[0]?new W("-"+t.substring(3),16):new W(t.substring(2),16)}function ei(e,t,r){let i={fault:e,operation:t};return null!=r&&(i.value=r),Z.throwError(e,E.errors.NUMERIC_FAULT,i)}let en=new E("properties/5.5.0");function eo(e,t,r){Object.defineProperty(e,t,{enumerable:!0,value:r,writable:!1})}function es(e,t){for(let r=0;r<32;r++){if(e[t])return e[t];if(!e.prototype||"object"!=typeof e.prototype)break;e=Object.getPrototypeOf(e.prototype).constructor}return null}function ea(e){var t,r,i;return t=this,i=function*(){let t=Object.keys(e).map(t=>{let r=e[t];return Promise.resolve(r).then(e=>({key:t,value:e}))});return(yield Promise.all(t)).reduce((e,t)=>(e[t.key]=t.value,e),{})},new(r=void 0,r=Promise)(function(e,n){function o(e){try{a(i.next(e))}catch(t){n(t)}}function s(e){try{a(i.throw(e))}catch(t){n(t)}}function a(t){var i;t.done?e(t.value):((i=t.value)instanceof r?i:new r(function(e){e(i)})).then(o,s)}a((i=i.apply(t,[])).next())})}function el(e,t){e&&"object"==typeof e||en.throwArgumentError("invalid object","object",e),Object.keys(e).forEach(r=>{t[r]||en.throwArgumentError("invalid object key - "+r,"transaction:"+r,e)})}function eu(e){let t={};for(let r in e)t[r]=e[r];return t}let ec={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function ed(e){if(null==e||ec[typeof e])return!0;if(Array.isArray(e)||"object"==typeof e){if(!Object.isFrozen(e))return!1;let t=Object.keys(e);for(let r=0;r<t.length;r++){let i=null;try{i=e[t[r]]}catch(n){continue}if(!ed(i))return!1}return!0}return en.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function eh(e){if(ed(e))return e;if(Array.isArray(e))return Object.freeze(e.map(e=>ef(e)));if("object"==typeof e){let t={};for(let r in e){let i=e[r];void 0!==i&&eo(t,r,ef(i))}return t}return en.throwArgumentError("Cannot deepCopy "+typeof e,"object",e)}function ef(e){return eh(e)}class ep{constructor(e){for(let t in e)this[t]=ef(e[t])}}let ey="abi/5.5.0",em=new E(ey);function ev(e){let t=[],r=function(e,i){if(Array.isArray(i))for(let n in i){let o=e.slice();o.push(n);try{r(o,i[n])}catch(s){t.push({path:o,error:s})}}};return r([],e),t}class eg{constructor(e,t,r,i){this.name=e,this.type=t,this.localName=r,this.dynamic=i}_throwError(e,t){em.throwArgumentError(e,this.localName,t)}}class eb{constructor(e){eo(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return j(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(R(e._data))}writeBytes(e){let t=T(e),r=t.length%this.wordSize;return r&&(t=R([t,this._padding.slice(r)])),this._writeData(t)}_getValue(e){let t=T(Q.from(e));return t.length>this.wordSize&&em.throwError("value out-of-bounds",E.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:t.length}),t.length%this.wordSize&&(t=R([this._padding.slice(t.length%this.wordSize),t])),t}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){let e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,t=>{this._data[e]=this._getValue(t)}}}class ew{constructor(e,t,r,i){eo(this,"_data",T(e)),eo(this,"wordSize",t||32),eo(this,"_coerceFunc",r),eo(this,"allowLoose",i),this._offset=0}get data(){return U(this._data)}get consumed(){return this._offset}static coerce(e,t){let r=e.match("^u?int([0-9]+)$");return r&&48>=parseInt(r[1])&&(t=t.toNumber()),t}coerce(e,t){return this._coerceFunc?this._coerceFunc(e,t):ew.coerce(e,t)}_peekBytes(e,t,r){let i=Math.ceil(t/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&r&&this._offset+t<=this._data.length?i=t:em.throwError("data out-of-bounds",E.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new ew(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,t){let r=this._peekBytes(0,e,!!t);return this._offset+=r.length,r.slice(0,e)}readValue(){return Q.from(this.readBytes(this.wordSize))}}var e_=r(1094),eS=r.n(e_);function eE(e){return"0x"+eS().keccak_256(T(e))}let ek=new E("rlp/5.5.0");function eN(e){let t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function eA(e,t,r){let i=0;for(let n=0;n<r;n++)i=256*i+e[t+n];return i}function eP(e){if(Array.isArray(e)){let t=[];if(e.forEach(function(e){t=t.concat(eP(e))}),t.length<=55)return t.unshift(192+t.length),t;let r=eN(t.length);return r.unshift(247+r.length),r.concat(t)}P(e)||ek.throwArgumentError("RLP object must be BytesLike","object",e);let i=Array.prototype.slice.call(T(e));if(1===i.length&&i[0]<=127)return i;if(i.length<=55)return i.unshift(128+i.length),i;let n=eN(i.length);return n.unshift(183+n.length),n.concat(i)}function ex(e){return U(eP(e))}function eO(e,t,r,i){let n=[];for(;r<t+1+i;){let o=eT(e,r);n.push(o.result),(r+=o.consumed)>t+1+i&&ek.throwError("child data too short",E.errors.BUFFER_OVERRUN,{})}return{consumed:1+i,result:n}}function eT(e,t){if(0===e.length&&ek.throwError("data too short",E.errors.BUFFER_OVERRUN,{}),e[t]>=248){let r=e[t]-247;t+1+r>e.length&&ek.throwError("data short segment too short",E.errors.BUFFER_OVERRUN,{});let i=eA(e,t+1,r);return t+1+r+i>e.length&&ek.throwError("data long segment too short",E.errors.BUFFER_OVERRUN,{}),eO(e,t,t+1+r,r+i)}if(e[t]>=192){let n=e[t]-192;return t+1+n>e.length&&ek.throwError("data array too short",E.errors.BUFFER_OVERRUN,{}),eO(e,t,t+1,n)}if(e[t]>=184){let o=e[t]-183;t+1+o>e.length&&ek.throwError("data array too short",E.errors.BUFFER_OVERRUN,{});let s=eA(e,t+1,o);return t+1+o+s>e.length&&ek.throwError("data array too short",E.errors.BUFFER_OVERRUN,{}),{consumed:1+o+s,result:U(e.slice(t+1+o,t+1+o+s))}}if(e[t]>=128){let a=e[t]-128;return t+1+a>e.length&&ek.throwError("data too short",E.errors.BUFFER_OVERRUN,{}),{consumed:1+a,result:U(e.slice(t+1,t+1+a))}}return{consumed:1,result:U(e[t])}}function eR(e){let t=T(e),r=eT(t,0);return r.consumed!==t.length&&ek.throwArgumentError("invalid rlp data","data",e),r.result}let eB=new E("address/5.5.0");function eC(e){I(e,20)||eB.throwArgumentError("invalid address","address",e);let t=(e=e.toLowerCase()).substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=t[i].charCodeAt(0);let n=T(eE(r));for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&(t[o]=t[o].toUpperCase()),(15&n[o>>1])>=8&&(t[o+1]=t[o+1].toUpperCase());return"0x"+t.join("")}let eI={};for(let eM=0;eM<10;eM++)eI[String(eM)]=String(eM);for(let eU=0;eU<26;eU++)eI[String.fromCharCode(65+eU)]=String(10+eU);let eK=Math.floor((o=9007199254740991,Math.log10?Math.log10(o):Math.log(o)/Math.LN10));function eD(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>eI[e]).join("");for(;t.length>=eK;){let r=t.substring(0,eK);t=parseInt(r,10)%97+t.substring(r.length)}let i=String(98-parseInt(t,10)%97);for(;i.length<2;)i="0"+i;return i}function ej(e){var t;let r=null;if("string"!=typeof e&&eB.throwArgumentError("invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/))"0x"!==e.substring(0,2)&&(e="0x"+e),r=eC(e),e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&r!==e&&eB.throwArgumentError("bad address checksum","address",e);else if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(e.substring(2,4)!==eD(e)&&eB.throwArgumentError("bad icap checksum","address",e),t=e.substring(4),r=new W(t,36).toString(16);r.length<40;)r="0"+r;r=eC("0x"+r)}else eB.throwArgumentError("invalid address","address",e);return r}function eL(e){try{return ej(e),!0}catch(t){}return!1}function eJ(e){let t=(r=ej(e).substring(2),new W(r,16).toString(36)).toUpperCase();for(var r;t.length<30;)t="0"+t;return"XE"+eD("XE00"+t)+t}function eF(e){let t=null;try{t=ej(e.from)}catch(r){eB.throwArgumentError("missing from address","transaction",e)}return ej(D(eE(ex([t,B(T(Q.from(e.nonce).toHexString()))])),12))}function eq(e,t,r){return 32!==K(t)&&eB.throwArgumentError("salt must be 32 bytes","salt",t),32!==K(r)&&eB.throwArgumentError("initCodeHash must be 32 bytes","initCodeHash",r),ej(D(eE(R(["0xff",ej(e),t,r])),12))}let eV=new E("strings/5.5.0");function ez(e,t,r,i,n){if(e===a.BAD_PREFIX||e===a.UNEXPECTED_CONTINUE){let o=0;for(let s=t+1;s<r.length&&r[s]>>6==2;s++)o++;return o}return e===a.OVERRUN?r.length-t-1:0}(function(e){e.current="",e.NFC="NFC",e.NFD="NFD",e.NFKC="NFKC",e.NFKD="NFKD"})(s||(s={})),function(e){e.UNEXPECTED_CONTINUE="unexpected continuation byte",e.BAD_PREFIX="bad codepoint prefix",e.OVERRUN="string overrun",e.MISSING_CONTINUE="missing continuation byte",e.OUT_OF_RANGE="out of UTF-8 range",e.UTF16_SURROGATE="UTF-16 surrogate",e.OVERLONG="overlong representation"}(a||(a={}));let eG=Object.freeze({error:function(e,t,r,i,n){return eV.throwArgumentError(`invalid codepoint at offset ${t}; ${e}`,"bytes",r)},ignore:ez,replace:function(e,t,r,i,n){return e===a.OVERLONG?(i.push(n),0):(i.push(65533),ez(e,t,r))}});function eH(e,t){null==t&&(t=eG.error),e=T(e);let r=[],i=0;for(;i<e.length;){let n=e[i++];if(n>>7==0){r.push(n);continue}let o=null,s=null;if(192==(224&n))o=1,s=127;else if(224==(240&n))o=2,s=2047;else{if(240!=(248&n)){i+=t(128==(192&n)?a.UNEXPECTED_CONTINUE:a.BAD_PREFIX,i-1,e,r);continue}o=3,s=65535}if(i-1+o>=e.length){i+=t(a.OVERRUN,i-1,e,r);continue}let l=n&(1<<8-o-1)-1;for(let u=0;u<o;u++){let c=e[i];if(128!=(192&c)){i+=t(a.MISSING_CONTINUE,i,e,r),l=null;break}l=l<<6|63&c,i++}null!==l&&(l>1114111?i+=t(a.OUT_OF_RANGE,i-1-o,e,r,l):l>=55296&&l<=57343?i+=t(a.UTF16_SURROGATE,i-1-o,e,r,l):l<=s?i+=t(a.OVERLONG,i-1-o,e,r,l):r.push(l))}return r}function eW(e,t=s.current){t!=s.current&&(eV.checkNormalize(),e=e.normalize(t));let r=[];for(let i=0;i<e.length;i++){let n=e.charCodeAt(i);if(n<128)r.push(n);else if(n<2048)r.push(n>>6|192),r.push(63&n|128);else if(55296==(64512&n)){i++;let o=e.charCodeAt(i);if(i>=e.length||56320!=(64512&o))throw Error("invalid utf-8 string");let a=65536+((1023&n)<<10)+(1023&o);r.push(a>>18|240),r.push(a>>12&63|128),r.push(a>>6&63|128),r.push(63&a|128)}else r.push(n>>12|224),r.push(n>>6&63|128),r.push(63&n|128)}return T(r)}function eZ(e){let t="0000"+e.toString(16);return"\\u"+t.substring(t.length-4)}function e$(e,t){return'"'+eH(e,t).map(e=>{if(e<256){switch(e){case 8:return"\\b";case 9:return"\\t";case 10:return"\\n";case 13:return"\\r";case 34:return'\\"';case 92:return"\\\\"}if(e>=32&&e<127)return String.fromCharCode(e)}return e<=65535?eZ(e):eZ(55296+((e-=65536)>>10&1023))+eZ(56320+(1023&e))}).join("")+'"'}function eX(e){return e.map(e=>e<=65535?String.fromCharCode(e):String.fromCharCode(55296+((e-=65536)>>10&1023),56320+(1023&e))).join("")}function eY(e,t){return eX(eH(e,t))}function eQ(e,t=s.current){return eH(eW(e,t))}function e0(e){return eE(eW(e))}class e1 extends eg{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){try{t=ej(t)}catch(r){this._throwError(r.message,t)}return e.writeValue(t)}decode(e){return ej(F(e.readValue().toHexString(),20))}}class e2 extends eg{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}let e3=new E(ey);function e6(e,t,r){let i=null;if(Array.isArray(r))i=r;else if(r&&"object"==typeof r){let n={};i=t.map(e=>{let t=e.localName;return t||e3.throwError("cannot encode object for signature with missing names",E.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),n[t]&&e3.throwError("cannot encode object for signature with duplicate names",E.errors.INVALID_ARGUMENT,{argument:"values",coder:e,value:r}),n[t]=!0,r[t]})}else e3.throwArgumentError("invalid tuple value","tuple",r);t.length!==i.length&&e3.throwArgumentError("types/value length mismatch","tuple",r);let o=new eb(e.wordSize),s=new eb(e.wordSize),a=[];return t.forEach((e,t)=>{let r=i[t];if(e.dynamic){let n=s.length;e.encode(s,r);let l=o.writeUpdatableValue();a.push(e=>{l(e+n)})}else e.encode(o,r)}),a.forEach(e=>{e(o.length)}),e.appendWriter(o)+e.appendWriter(s)}function e5(e,t){let r=[],i=e.subReader(0);t.forEach(t=>{let n=null;if(t.dynamic){let o=e.readValue(),s=i.subReader(o.toNumber());try{n=t.decode(s)}catch(a){if(a.code===E.errors.BUFFER_OVERRUN)throw a;(n=a).baseType=t.name,n.name=t.localName,n.type=t.type}}else try{n=t.decode(e)}catch(l){if(l.code===E.errors.BUFFER_OVERRUN)throw l;(n=l).baseType=t.name,n.name=t.localName,n.type=t.type}null!=n&&r.push(n)});let n=t.reduce((e,t)=>{let r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});t.forEach((e,t)=>{let i=e.localName;if(!i||1!==n[i]||("length"===i&&(i="_length"),null!=r[i]))return;let o=r[t];o instanceof Error?Object.defineProperty(r,i,{enumerable:!0,get:()=>{throw o}}):r[i]=o});for(let o=0;o<r.length;o++){let s=r[o];s instanceof Error&&Object.defineProperty(r,o,{enumerable:!0,get:()=>{throw s}})}return Object.freeze(r)}class e8 extends eg{constructor(e,t,r){super("array",e.type+"["+(t>=0?t:"")+"]",r,-1===t||e.dynamic),this.coder=e,this.length=t}defaultValue(){let e=this.coder.defaultValue(),t=[];for(let r=0;r<this.length;r++)t.push(e);return t}encode(e,t){Array.isArray(t)||this._throwError("expected array value",t);let r=this.length;-1===r&&(r=t.length,e.writeValue(t.length)),e3.checkArgumentCount(t.length,r,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let n=0;n<t.length;n++)i.push(this.coder);return e6(e,i,t)}decode(e){let t=this.length;-1===t&&32*(t=e.readValue().toNumber())>e._data.length&&e3.throwError("insufficient data length",E.errors.BUFFER_OVERRUN,{length:e._data.length,count:t});let r=[];for(let i=0;i<t;i++)r.push(new e2(this.coder));return e.coerce(this.name,e5(e,r))}}class e4 extends eg{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){return e.writeValue(t?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class e7 extends eg{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){return t=T(t),e.writeValue(t.length)+e.writeBytes(t)}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class e9 extends e7{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,U(super.decode(e)))}}class te extends eg{constructor(e,t){let r="bytes"+String(e);super(r,r,t,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let r=T(t);return r.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(r)}decode(e){return e.coerce(this.name,U(e.readBytes(this.size)))}}class tt extends eg{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}let tr=Q.from(-1),ti=Q.from(0),tn=Q.from(1),to=Q.from(2),ts=Q.from("1000000000000000000"),ta=Q.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),tl=Q.from("-0x8000000000000000000000000000000000000000000000000000000000000000"),tu=Q.from("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class tc extends eg{constructor(e,t,r){let i=(t?"int":"uint")+8*e;super(i,i,r,!1),this.size=e,this.signed=t}defaultValue(){return 0}encode(e,t){let r=Q.from(t),i=ta.mask(8*e.wordSize);if(this.signed){let n=i.mask(8*this.size-1);(r.gt(n)||r.lt(n.add(tn).mul(tr)))&&this._throwError("value out-of-bounds",t)}else(r.lt(ti)||r.gt(i.mask(8*this.size)))&&this._throwError("value out-of-bounds",t);return r=r.toTwos(8*this.size).mask(8*this.size),this.signed&&(r=r.fromTwos(8*this.size).toTwos(8*e.wordSize)),e.writeValue(r)}decode(e){let t=e.readValue().mask(8*this.size);return this.signed&&(t=t.fromTwos(8*this.size)),e.coerce(this.name,t)}}class td extends e7{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,eW(t))}decode(e){return eY(super.decode(e))}}class th extends eg{constructor(e,t){let r=!1,i=[];e.forEach(e=>{e.dynamic&&(r=!0),i.push(e.type)}),super("tuple","tuple("+i.join(",")+")",t,r),this.coders=e}defaultValue(){let e=[];this.coders.forEach(t=>{e.push(t.defaultValue())});let t=this.coders.reduce((e,t)=>{let r=t.localName;return r&&(e[r]||(e[r]=0),e[r]++),e},{});return this.coders.forEach((r,i)=>{let n=r.localName;n&&1===t[n]&&("length"===n&&(n="_length"),null==e[n]&&(e[n]=e[i]))}),Object.freeze(e)}encode(e,t){return e6(e,this.coders,t)}decode(e){return e.coerce(this.name,e5(e,this.coders))}}let tf=new E(ey),tp={},ty={calldata:!0,memory:!0,storage:!0},tm={calldata:!0,memory:!0};function tv(e,t){if("bytes"===e||"string"===e){if(ty[t])return!0}else if("address"===e){if("payable"===t)return!0}else if((e.indexOf("[")>=0||"tuple"===e)&&tm[t])return!0;return(ty[t]||"payable"===t)&&tf.throwArgumentError("invalid modifier","name",t),!1}function tg(e,t){for(let r in t)eo(e,r,t[r])}let tb=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),tw=RegExp(/^(.*)\[([0-9]*)\]$/);class t_{constructor(e,t){e!==tp&&tf.throwError("use fromString",E.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),tg(this,t);let r=this.type.match(tw);tg(this,r?{arrayLength:parseInt(r[2]||"-1"),arrayChildren:t_.fromObject({type:r[1],components:this.components}),baseType:"array"}:{arrayLength:null,arrayChildren:null,baseType:null!=this.components?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=tb.sighash),tb[e]||tf.throwArgumentError("invalid format type","format",e),e===tb.json){let t={type:"tuple"===this.baseType?"tuple":this.type,name:this.name||void 0};return"boolean"==typeof this.indexed&&(t.indexed=this.indexed),this.components&&(t.components=this.components.map(t=>JSON.parse(t.format(e)))),JSON.stringify(t)}let r="";return"array"===this.baseType?r+=this.arrayChildren.format(e)+"["+(this.arrayLength<0?"":String(this.arrayLength))+"]":"tuple"===this.baseType?(e!==tb.sighash&&(r+=this.type),r+="("+this.components.map(t=>t.format(e)).join(e===tb.full?", ":",")+")"):r+=this.type,e!==tb.sighash&&(!0===this.indexed&&(r+=" indexed"),e===tb.full&&this.name&&(r+=" "+this.name)),r}static from(e,t){return"string"==typeof e?t_.fromString(e,t):t_.fromObject(e)}static fromObject(e){return t_.isParamType(e)?e:new t_(tp,{name:e.name||null,type:tB(e.type),indexed:null==e.indexed?null:!!e.indexed,components:e.components?e.components.map(t_.fromObject):null})}static fromString(e,t){var r;return r=function(e,t){let r=e;function i(t){tf.throwArgumentError(`unexpected character at position ${t}`,"param",e)}function n(e){let r={type:"",name:"",parent:e,state:{allowType:!0}};return t&&(r.indexed=!1),r}e=e.replace(/\s/g," ");let o={type:"",name:"",state:{allowType:!0}},s=o;for(let a=0;a<e.length;a++){let l=e[a];switch(l){case"(":s.state.allowType&&""===s.type?s.type="tuple":s.state.allowParams||i(a),s.state.allowType=!1,s.type=tB(s.type),s.components=[n(s)],s=s.components[0];break;case")":delete s.state,"indexed"===s.name&&(t||i(a),s.indexed=!0,s.name=""),tv(s.type,s.name)&&(s.name=""),s.type=tB(s.type);let u=s;(s=s.parent)||i(a),delete u.parent,s.state.allowParams=!1,s.state.allowName=!0,s.state.allowArray=!0;break;case",":delete s.state,"indexed"===s.name&&(t||i(a),s.indexed=!0,s.name=""),tv(s.type,s.name)&&(s.name=""),s.type=tB(s.type);let c=n(s.parent);s.parent.components.push(c),delete s.parent,s=c;break;case" ":s.state.allowType&&""!==s.type&&(s.type=tB(s.type),delete s.state.allowType,s.state.allowName=!0,s.state.allowParams=!0),s.state.allowName&&""!==s.name&&("indexed"===s.name?(t||i(a),s.indexed&&i(a),s.indexed=!0,s.name=""):tv(s.type,s.name)?s.name="":s.state.allowName=!1);break;case"[":s.state.allowArray||i(a),s.type+=l,s.state.allowArray=!1,s.state.allowName=!1,s.state.readArray=!0;break;case"]":s.state.readArray||i(a),s.type+=l,s.state.readArray=!1,s.state.allowArray=!0,s.state.allowName=!0;break;default:s.state.allowType?(s.type+=l,s.state.allowParams=!0,s.state.allowArray=!0):s.state.allowName?(s.name+=l,delete s.state.allowArray):s.state.readArray?s.type+=l:i(a)}}return s.parent&&tf.throwArgumentError("unexpected eof","param",e),delete o.state,"indexed"===s.name?(t||i(r.length-7),s.indexed&&i(r.length-7),s.indexed=!0,s.name=""):tv(s.type,s.name)&&(s.name=""),o.type=tB(o.type),o}(e,!!t),t_.fromObject({name:r.name,type:r.type,indexed:r.indexed,components:r.components})}static isParamType(e){return!(null==e||!e._isParamType)}}function tS(e,t){return(function(e){e=e.trim();let t=[],r="",i=0;for(let n=0;n<e.length;n++){let o=e[n];","===o&&0===i?(t.push(r),r=""):(r+=o,"("===o?i++:")"===o&&-1==--i&&tf.throwArgumentError("unbalanced parenthesis","value",e))}return r&&t.push(r),t})(e).map(e=>t_.fromString(e,t))}class tE{constructor(e,t){e!==tp&&tf.throwError("use a static from method",E.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),tg(this,t),this._isFragment=!0,Object.freeze(this)}static from(e){return tE.isFragment(e)?e:"string"==typeof e?tE.fromString(e):tE.fromObject(e)}static fromObject(e){if(tE.isFragment(e))return e;switch(e.type){case"function":return tO.fromObject(e);case"event":return tk.fromObject(e);case"constructor":return tx.fromObject(e);case"error":return tR.fromObject(e);case"fallback":case"receive":return null}return tf.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return"event"===(e=(e=(e=e.replace(/\s/g," ")).replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," ")).trim()).split(" ")[0]?tk.fromString(e.substring(5).trim()):"function"===e.split(" ")[0]?tO.fromString(e.substring(8).trim()):"constructor"===e.split("(")[0].trim()?tx.fromString(e.trim()):"error"===e.split(" ")[0]?tR.fromString(e.substring(5).trim()):tf.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!(!e||!e._isFragment)}}class tk extends tE{format(e){if(e||(e=tb.sighash),tb[e]||tf.throwArgumentError("invalid format type","format",e),e===tb.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t="";return e!==tb.sighash&&(t+="event "),t+=this.name+"("+this.inputs.map(t=>t.format(e)).join(e===tb.full?", ":",")+") ",e!==tb.sighash&&this.anonymous&&(t+="anonymous "),t.trim()}static from(e){return"string"==typeof e?tk.fromString(e):tk.fromObject(e)}static fromObject(e){if(tk.isEventFragment(e))return e;"event"!==e.type&&tf.throwArgumentError("invalid event object","value",e);let t={name:tI(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(t_.fromObject):[],type:"event"};return new tk(tp,t)}static fromString(e){let t=e.match(tM);t||tf.throwArgumentError("invalid event string","value",e);let r=!1;return t[3].split(" ").forEach(e=>{switch(e.trim()){case"anonymous":r=!0;break;case"":break;default:tf.warn("unknown modifier: "+e)}}),tk.fromObject({name:t[1].trim(),anonymous:r,inputs:tS(t[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&"event"===e.type}}function tN(e,t){t.gas=null;let r=e.split("@");return 1!==r.length?(r.length>2&&tf.throwArgumentError("invalid human-readable ABI signature","value",e),r[1].match(/^[0-9]+$/)||tf.throwArgumentError("invalid human-readable ABI signature gas","value",e),t.gas=Q.from(r[1]),r[0]):e}function tA(e,t){t.constant=!1,t.payable=!1,t.stateMutability="nonpayable",e.split(" ").forEach(e=>{switch(e.trim()){case"constant":t.constant=!0;break;case"payable":t.payable=!0,t.stateMutability="payable";break;case"nonpayable":t.payable=!1,t.stateMutability="nonpayable";break;case"pure":t.constant=!0,t.stateMutability="pure";break;case"view":t.constant=!0,t.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+e)}})}function tP(e){let t={constant:!1,payable:!0,stateMutability:"payable"};return null!=e.stateMutability?(t.stateMutability=e.stateMutability,t.constant="view"===t.stateMutability||"pure"===t.stateMutability,null!=e.constant&&!!e.constant!==t.constant&&tf.throwArgumentError("cannot have constant function with mutability "+t.stateMutability,"value",e),t.payable="payable"===t.stateMutability,null!=e.payable&&!!e.payable!==t.payable&&tf.throwArgumentError("cannot have payable function with mutability "+t.stateMutability,"value",e)):null!=e.payable?(t.payable=!!e.payable,null!=e.constant||t.payable||"constructor"===e.type||tf.throwArgumentError("unable to determine stateMutability","value",e),t.constant=!!e.constant,t.constant?t.stateMutability="view":t.stateMutability=t.payable?"payable":"nonpayable",t.payable&&t.constant&&tf.throwArgumentError("cannot have constant payable function","value",e)):null!=e.constant?(t.constant=!!e.constant,t.payable=!t.constant,t.stateMutability=t.constant?"view":"payable"):"constructor"!==e.type&&tf.throwArgumentError("unable to determine stateMutability","value",e),t}class tx extends tE{format(e){if(e||(e=tb.sighash),tb[e]||tf.throwArgumentError("invalid format type","format",e),e===tb.json)return JSON.stringify({type:"constructor",stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});e===tb.sighash&&tf.throwError("cannot format a constructor for sighash",E.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let t="constructor("+this.inputs.map(t=>t.format(e)).join(e===tb.full?", ":",")+") ";return this.stateMutability&&"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "),t.trim()}static from(e){return"string"==typeof e?tx.fromString(e):tx.fromObject(e)}static fromObject(e){if(tx.isConstructorFragment(e))return e;"constructor"!==e.type&&tf.throwArgumentError("invalid constructor object","value",e);let t=tP(e);t.constant&&tf.throwArgumentError("constructor cannot be constant","value",e);let r={name:null,type:e.type,inputs:e.inputs?e.inputs.map(t_.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?Q.from(e.gas):null};return new tx(tp,r)}static fromString(e){let t={type:"constructor"},r=(e=tN(e,t)).match(tM);return r&&"constructor"===r[1].trim()||tf.throwArgumentError("invalid constructor string","value",e),t.inputs=tS(r[2].trim(),!1),tA(r[3].trim(),t),tx.fromObject(t)}static isConstructorFragment(e){return e&&e._isFragment&&"constructor"===e.type}}class tO extends tx{format(e){if(e||(e=tb.sighash),tb[e]||tf.throwArgumentError("invalid format type","format",e),e===tb.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e))),outputs:this.outputs.map(t=>JSON.parse(t.format(e)))});let t="";return e!==tb.sighash&&(t+="function "),t+=this.name+"("+this.inputs.map(t=>t.format(e)).join(e===tb.full?", ":",")+") ",e!==tb.sighash&&(this.stateMutability?"nonpayable"!==this.stateMutability&&(t+=this.stateMutability+" "):this.constant&&(t+="view "),this.outputs&&this.outputs.length&&(t+="returns ("+this.outputs.map(t=>t.format(e)).join(", ")+") "),null!=this.gas&&(t+="@"+this.gas.toString()+" ")),t.trim()}static from(e){return"string"==typeof e?tO.fromString(e):tO.fromObject(e)}static fromObject(e){if(tO.isFunctionFragment(e))return e;"function"!==e.type&&tf.throwArgumentError("invalid function object","value",e);let t=tP(e),r={type:e.type,name:tI(e.name),constant:t.constant,inputs:e.inputs?e.inputs.map(t_.fromObject):[],outputs:e.outputs?e.outputs.map(t_.fromObject):[],payable:t.payable,stateMutability:t.stateMutability,gas:e.gas?Q.from(e.gas):null};return new tO(tp,r)}static fromString(e){let t={type:"function"},r=(e=tN(e,t)).split(" returns ");r.length>2&&tf.throwArgumentError("invalid function string","value",e);let i=r[0].match(tM);if(i||tf.throwArgumentError("invalid function signature","value",e),t.name=i[1].trim(),t.name&&tI(t.name),t.inputs=tS(i[2],!1),tA(i[3].trim(),t),r.length>1){let n=r[1].match(tM);""==n[1].trim()&&""==n[3].trim()||tf.throwArgumentError("unexpected tokens","value",e),t.outputs=tS(n[2],!1)}else t.outputs=[];return tO.fromObject(t)}static isFunctionFragment(e){return e&&e._isFragment&&"function"===e.type}}function tT(e){let t=e.format();return"Error(string)"!==t&&"Panic(uint256)"!==t||tf.throwArgumentError(`cannot specify user defined ${t} error`,"fragment",e),e}class tR extends tE{format(e){if(e||(e=tb.sighash),tb[e]||tf.throwArgumentError("invalid format type","format",e),e===tb.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});let t="";return e!==tb.sighash&&(t+="error "),(t+=this.name+"("+this.inputs.map(t=>t.format(e)).join(e===tb.full?", ":",")+") ").trim()}static from(e){return"string"==typeof e?tR.fromString(e):tR.fromObject(e)}static fromObject(e){if(tR.isErrorFragment(e))return e;"error"!==e.type&&tf.throwArgumentError("invalid error object","value",e);let t={type:e.type,name:tI(e.name),inputs:e.inputs?e.inputs.map(t_.fromObject):[]};return tT(new tR(tp,t))}static fromString(e){let t={type:"error"},r=e.match(tM);return r||tf.throwArgumentError("invalid error signature","value",e),t.name=r[1].trim(),t.name&&tI(t.name),t.inputs=tS(r[2],!1),tT(tR.fromObject(t))}static isErrorFragment(e){return e&&e._isFragment&&"error"===e.type}}function tB(e){return e.match(/^uint($|[^1-9])/)?e="uint256"+e.substring(4):e.match(/^int($|[^1-9])/)&&(e="int256"+e.substring(3)),e}let tC=RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function tI(e){return e&&e.match(tC)||tf.throwArgumentError(`invalid identifier "${e}"`,"value",e),e}let tM=RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$"),tU=new E(ey),tK=RegExp(/^bytes([0-9]*)$/),tD=RegExp(/^(u?int)([0-9]*)$/);class tj{constructor(e){tU.checkNew(new.target,tj),eo(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new e1(e.name);case"bool":return new e4(e.name);case"string":return new td(e.name);case"bytes":return new e9(e.name);case"array":return new e8(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new th((e.components||[]).map(e=>this._getCoder(e)),e.name);case"":return new tt(e.name)}let t=e.type.match(tD);if(t){let r=parseInt(t[2]||"256");return(0===r||r>256||r%8!=0)&&tU.throwArgumentError("invalid "+t[1]+" bit length","param",e),new tc(r/8,"int"===t[1],e.name)}if(t=e.type.match(tK)){let i=parseInt(t[1]);return(0===i||i>32)&&tU.throwArgumentError("invalid bytes length","param",e),new te(i,e.name)}return tU.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,t){return new ew(e,this._getWordSize(),this.coerceFunc,t)}_getWriter(){return new eb(this._getWordSize())}getDefaultValue(e){let t=e.map(e=>this._getCoder(t_.from(e)));return new th(t,"_").defaultValue()}encode(e,t){e.length!==t.length&&tU.throwError("types/values length mismatch",E.errors.INVALID_ARGUMENT,{count:{types:e.length,values:t.length},value:{types:e,values:t}});let r=e.map(e=>this._getCoder(t_.from(e))),i=new th(r,"_"),n=this._getWriter();return i.encode(n,t),n.data}decode(e,t,r){let i=e.map(e=>this._getCoder(t_.from(e)));return new th(i,"_").decode(this._getReader(T(t),r))}}let tL=new tj,tJ=new E(ey);class tF extends ep{}class tq extends ep{}class tV extends ep{}class tz extends ep{static isIndexed(e){return!(!e||!e._isIndexed)}}let tG={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function tH(e,t){let r=Error(`deferred error during ABI decoding triggered accessing ${e}`);return r.error=t,r}class tW{constructor(e){tJ.checkNew(new.target,tW);let t=[];eo(this,"fragments",(t="string"==typeof e?JSON.parse(e):e).map(e=>tE.from(e)).filter(e=>null!=e)),eo(this,"_abiCoder",es(new.target,"getAbiCoder")()),eo(this,"functions",{}),eo(this,"errors",{}),eo(this,"events",{}),eo(this,"structs",{}),this.fragments.forEach(e=>{let t=null;switch(e.type){case"constructor":return this.deploy?void tJ.warn("duplicate definition - constructor"):void eo(this,"deploy",e);case"function":t=this.functions;break;case"event":t=this.events;break;case"error":t=this.errors;break;default:return}let r=e.format();t[r]?tJ.warn("duplicate definition - "+r):t[r]=e}),this.deploy||eo(this,"deploy",tx.from({payable:!1,type:"constructor"})),eo(this,"_isInterface",!0)}format(e){e||(e=tb.full),e===tb.sighash&&tJ.throwArgumentError("interface does not support formatting sighash","format",e);let t=this.fragments.map(t=>t.format(e));return e===tb.json?JSON.stringify(t.map(e=>JSON.parse(e))):t}static getAbiCoder(){return tL}static getAddress(e){return ej(e)}static getSighash(e){return D(e0(e.format()),0,4)}static getEventTopic(e){return e0(e.format())}getFunction(e){if(I(e)){for(let t in this.functions)if(e===this.getSighash(t))return this.functions[t];tJ.throwArgumentError("no matching function","sighash",e)}if(-1===e.indexOf("(")){let r=e.trim(),i=Object.keys(this.functions).filter(e=>e.split("(")[0]===r);return 0===i.length?tJ.throwArgumentError("no matching function","name",r):i.length>1&&tJ.throwArgumentError("multiple matching functions","name",r),this.functions[i[0]]}let n=this.functions[tO.fromString(e).format()];return n||tJ.throwArgumentError("no matching function","signature",e),n}getEvent(e){if(I(e)){let t=e.toLowerCase();for(let r in this.events)if(t===this.getEventTopic(r))return this.events[r];tJ.throwArgumentError("no matching event","topichash",t)}if(-1===e.indexOf("(")){let i=e.trim(),n=Object.keys(this.events).filter(e=>e.split("(")[0]===i);return 0===n.length?tJ.throwArgumentError("no matching event","name",i):n.length>1&&tJ.throwArgumentError("multiple matching events","name",i),this.events[n[0]]}let o=this.events[tk.fromString(e).format()];return o||tJ.throwArgumentError("no matching event","signature",e),o}getError(e){if(I(e)){let t=es(this.constructor,"getSighash");for(let r in this.errors)if(e===t(this.errors[r]))return this.errors[r];tJ.throwArgumentError("no matching error","sighash",e)}if(-1===e.indexOf("(")){let i=e.trim(),n=Object.keys(this.errors).filter(e=>e.split("(")[0]===i);return 0===n.length?tJ.throwArgumentError("no matching error","name",i):n.length>1&&tJ.throwArgumentError("multiple matching errors","name",i),this.errors[n[0]]}let o=this.errors[tO.fromString(e).format()];return o||tJ.throwArgumentError("no matching error","signature",e),o}getSighash(e){if("string"==typeof e)try{e=this.getFunction(e)}catch(r){try{e=this.getError(e)}catch(t){throw r}}return es(this.constructor,"getSighash")(e)}getEventTopic(e){return"string"==typeof e&&(e=this.getEvent(e)),es(this.constructor,"getEventTopic")(e)}_decodeParams(e,t){return this._abiCoder.decode(e,t)}_encodeParams(e,t){return this._abiCoder.encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){"string"==typeof e&&(e=this.getError(e));let r=T(t);return U(r.slice(0,4))!==this.getSighash(e)&&tJ.throwArgumentError(`data signature does not match error ${e.name}.`,"data",U(r)),this._decodeParams(e.inputs,r.slice(4))}encodeErrorResult(e,t){return"string"==typeof e&&(e=this.getError(e)),U(R([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionData(e,t){"string"==typeof e&&(e=this.getFunction(e));let r=T(t);return U(r.slice(0,4))!==this.getSighash(e)&&tJ.throwArgumentError(`data signature does not match function ${e.name}.`,"data",U(r)),this._decodeParams(e.inputs,r.slice(4))}encodeFunctionData(e,t){return"string"==typeof e&&(e=this.getFunction(e)),U(R([this.getSighash(e),this._encodeParams(e.inputs,t||[])]))}decodeFunctionResult(e,t){"string"==typeof e&&(e=this.getFunction(e));let r=T(t),i=null,n=null,o=null,s=null;switch(r.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,r)}catch(a){}break;case 4:{let l=U(r.slice(0,4)),u=tG[l];if(u)n=this._abiCoder.decode(u.inputs,r.slice(4)),o=u.name,s=u.signature,u.reason&&(i=n[0]);else try{let c=this.getError(l);n=this._abiCoder.decode(c.inputs,r.slice(4)),o=c.name,s=c.format()}catch(d){console.log(d)}}}return tJ.throwError("call revert exception",E.errors.CALL_EXCEPTION,{method:e.format(),errorArgs:n,errorName:o,errorSignature:s,reason:i})}encodeFunctionResult(e,t){return"string"==typeof e&&(e=this.getFunction(e)),U(this._abiCoder.encode(e.outputs,t||[]))}encodeFilterTopics(e,t){"string"==typeof e&&(e=this.getEvent(e)),t.length>e.inputs.length&&tJ.throwError("too many arguments for "+e.format(),E.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:t});let r=[];e.anonymous||r.push(this.getEventTopic(e));let i=(e,t)=>"string"===e.type?e0(t):"bytes"===e.type?eE(U(t)):("address"===e.type&&this._abiCoder.encode(["address"],[t]),F(U(t),32));for(t.forEach((t,n)=>{let o=e.inputs[n];o.indexed?null==t?r.push(null):"array"===o.baseType||"tuple"===o.baseType?tJ.throwArgumentError("filtering with tuples or arrays not supported","contract."+o.name,t):Array.isArray(t)?r.push(t.map(e=>i(o,e))):r.push(i(o,t)):null!=t&&tJ.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+o.name,t)});r.length&&null===r[r.length-1];)r.pop();return r}encodeEventLog(e,t){"string"==typeof e&&(e=this.getEvent(e));let r=[],i=[],n=[];return e.anonymous||r.push(this.getEventTopic(e)),t.length!==e.inputs.length&&tJ.throwArgumentError("event arguments/values mismatch","values",t),e.inputs.forEach((e,o)=>{let s=t[o];if(e.indexed){if("string"===e.type)r.push(e0(s));else if("bytes"===e.type)r.push(eE(s));else{if("tuple"===e.baseType||"array"===e.baseType)throw Error("not implemented");r.push(this._abiCoder.encode([e.type],[s]))}}else i.push(e),n.push(s)}),{data:this._abiCoder.encode(i,n),topics:r}}decodeEventLog(e,t,r){if("string"==typeof e&&(e=this.getEvent(e)),null!=r&&!e.anonymous){let i=this.getEventTopic(e);I(r[0],32)&&r[0].toLowerCase()===i||tJ.throwError("fragment/topic mismatch",E.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:i,value:r[0]}),r=r.slice(1)}let n=[],o=[],s=[];e.inputs.forEach((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(n.push(t_.fromObject({type:"bytes32",name:e.name})),s.push(!0)):(n.push(e),s.push(!1)):(o.push(e),s.push(!1))});let a=null!=r?this._abiCoder.decode(n,R(r)):null,l=this._abiCoder.decode(o,t,!0),u=[],c=0,d=0;e.inputs.forEach((e,t)=>{if(e.indexed){if(null==a)u[t]=new tz({_isIndexed:!0,hash:null});else if(s[t])u[t]=new tz({_isIndexed:!0,hash:a[d++]});else try{u[t]=a[d++]}catch(r){u[t]=r}}else try{u[t]=l[c++]}catch(i){u[t]=i}if(e.name&&null==u[e.name]){let n=u[t];n instanceof Error?Object.defineProperty(u,e.name,{enumerable:!0,get:()=>{throw tH(`property ${JSON.stringify(e.name)}`,n)}}):u[e.name]=n}});for(let h=0;h<u.length;h++){let f=u[h];f instanceof Error&&Object.defineProperty(u,h,{enumerable:!0,get:()=>{throw tH(`index ${h}`,f)}})}return Object.freeze(u)}parseTransaction(e){let t=this.getFunction(e.data.substring(0,10).toLowerCase());return t?new tq({args:this._abiCoder.decode(t.inputs,"0x"+e.data.substring(10)),functionFragment:t,name:t.name,signature:t.format(),sighash:this.getSighash(t),value:Q.from(e.value||"0")}):null}parseLog(e){let t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new tF({eventFragment:t,name:t.name,signature:t.format(),topic:this.getEventTopic(t),args:this.decodeEventLog(t,e.data,e.topics)})}parseError(e){let t=U(e),r=this.getError(t.substring(0,10).toLowerCase());return r?new tV({args:this._abiCoder.decode(r.inputs,"0x"+t.substring(10)),errorFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r)}):null}static isInterface(e){return!(!e||!e._isInterface)}}let tZ=new E("abstract-provider/5.5.1");class t$ extends ep{static isForkEvent(e){return!(!e||!e._isForkEvent)}}class tX{constructor(){tZ.checkAbstract(new.target,tX),eo(this,"_isProvider",!0)}getFeeData(){var e,t,r;return e=this,r=function*(){let{block:e,gasPrice:t}=yield ea({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(e=>null)}),r=null,i=null;return e&&e.baseFeePerGas&&(i=Q.from("2500000000"),r=e.baseFeePerGas.mul(2).add(i)),{maxFeePerGas:r,maxPriorityFeePerGas:i,gasPrice:t}},new(t=void 0,t=Promise)(function(i,n){function o(e){try{a(r.next(e))}catch(t){n(t)}}function s(e){try{a(r.throw(e))}catch(t){n(t)}}function a(e){var r;e.done?i(e.value):((r=e.value)instanceof t?r:new t(function(e){e(r)})).then(o,s)}a((r=r.apply(e,[])).next())})}addListener(e,t){return this.on(e,t)}removeListener(e,t){return this.off(e,t)}static isProvider(e){return!(!e||!e._isProvider)}}var tY=function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};let tQ=new E("abstract-signer/5.5.0"),t0=["accessList","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],t1=[E.errors.INSUFFICIENT_FUNDS,E.errors.NONCE_EXPIRED,E.errors.REPLACEMENT_UNDERPRICED];class t2{constructor(){tQ.checkAbstract(new.target,t2),eo(this,"_isSigner",!0)}getBalance(e){return tY(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return tY(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return tY(this,void 0,void 0,function*(){this._checkProvider("estimateGas");let t=yield ea(this.checkTransaction(e));return yield this.provider.estimateGas(t)})}call(e,t){return tY(this,void 0,void 0,function*(){this._checkProvider("call");let r=yield ea(this.checkTransaction(e));return yield this.provider.call(r,t)})}sendTransaction(e){return tY(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");let t=yield this.populateTransaction(e),r=yield this.signTransaction(t);return yield this.provider.sendTransaction(r)})}getChainId(){return tY(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return tY(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return tY(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return tY(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(let t in e)-1===t0.indexOf(t)&&tQ.throwArgumentError("invalid transaction key: "+t,"transaction",e);let r=eu(e);return null==r.from?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(t=>(t[0].toLowerCase()!==t[1].toLowerCase()&&tQ.throwArgumentError("from address mismatch","transaction",e),t[0])),r}populateTransaction(e){return tY(this,void 0,void 0,function*(){let t=yield ea(this.checkTransaction(e));null!=t.to&&(t.to=Promise.resolve(t.to).then(e=>tY(this,void 0,void 0,function*(){if(null==e)return null;let t=yield this.resolveName(e);return null==t&&tQ.throwArgumentError("provided ENS name resolves to null","tx.to",e),t})),t.to.catch(e=>{}));let r=null!=t.maxFeePerGas||null!=t.maxPriorityFeePerGas;if(null!=t.gasPrice&&(2===t.type||r)?tQ.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(0===t.type||1===t.type)&&r&&tQ.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),2!==t.type&&null!=t.type||null==t.maxFeePerGas||null==t.maxPriorityFeePerGas){if(0===t.type||1===t.type)null==t.gasPrice&&(t.gasPrice=this.getGasPrice());else{let i=yield this.getFeeData();if(null==t.type){if(null!=i.maxFeePerGas&&null!=i.maxPriorityFeePerGas){if(t.type=2,null!=t.gasPrice){let n=t.gasPrice;delete t.gasPrice,t.maxFeePerGas=n,t.maxPriorityFeePerGas=n}else null==t.maxFeePerGas&&(t.maxFeePerGas=i.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas)}else null!=i.gasPrice?(r&&tQ.throwError("network does not support EIP-1559",E.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),null==t.gasPrice&&(t.gasPrice=i.gasPrice),t.type=0):tQ.throwError("failed to get consistent fee data",E.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"})}else 2===t.type&&(null==t.maxFeePerGas&&(t.maxFeePerGas=i.maxFeePerGas),null==t.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}}else t.type=2;return null==t.nonce&&(t.nonce=this.getTransactionCount("pending")),null==t.gasLimit&&(t.gasLimit=this.estimateGas(t).catch(e=>{if(t1.indexOf(e.code)>=0)throw e;return tQ.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",E.errors.UNPREDICTABLE_GAS_LIMIT,{error:e,tx:t})})),null==t.chainId?t.chainId=this.getChainId():t.chainId=Promise.all([Promise.resolve(t.chainId),this.getChainId()]).then(t=>(0!==t[1]&&t[0]!==t[1]&&tQ.throwArgumentError("chainId address mismatch","transaction",e),t[0])),yield ea(t)})}_checkProvider(e){this.provider||tQ.throwError("missing provider",E.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!(!e||!e._isSigner)}}class t3 extends t2{constructor(e,t){tQ.checkNew(new.target,t3),super(),eo(this,"address",e),eo(this,"provider",t||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,t){return Promise.resolve().then(()=>{tQ.throwError(e,E.errors.UNSUPPORTED_OPERATION,{operation:t})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,t,r){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new t3(this.address,e)}}var t6=r(3715),t5=r.n(t6);function t8(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self&&self;var t4=t7;function t7(e,t){if(!e)throw Error(t||"Assertion failed")}t7.equal=function(e,t,r){if(e!=t)throw Error(r||"Assertion failed: "+e+" != "+t)};var t9=t8(function(e,t){var r=t;function i(e){return 1===e.length?"0"+e:e}function n(e){for(var t="",r=0;r<e.length;r++)t+=i(e[r].toString(16));return t}r.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!=typeof e){for(var i=0;i<e.length;i++)r[i]=0|e[i];return r}if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16));else for(i=0;i<e.length;i++){var n=e.charCodeAt(i),o=n>>8,s=255&n;o?r.push(o,s):r.push(s)}return r},r.zero2=i,r.toHex=n,r.encode=function(e,t){return"hex"===t?n(e):e}}),re=t8(function(e,t){var r=t;r.assert=t4,r.toArray=t9.toArray,r.zero2=t9.zero2,r.toHex=t9.toHex,r.encode=t9.encode,r.getNAF=function(e,t,r){var i=Array(Math.max(e.bitLength(),r)+1);i.fill(0);for(var n=1<<t+1,o=e.clone(),s=0;s<i.length;s++){var a,l=o.andln(n-1);o.isOdd()?(a=l>(n>>1)-1?(n>>1)-l:l,o.isubn(a)):a=0,i[s]=a,o.iushrn(1)}return i},r.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var i,n=0,o=0;e.cmpn(-n)>0||t.cmpn(-o)>0;){var s,a,l=e.andln(3)+n&3,u=t.andln(3)+o&3;3===l&&(l=-1),3===u&&(u=-1),s=0==(1&l)?0:3!=(i=e.andln(7)+n&7)&&5!==i||2!==u?l:-l,r[0].push(s),a=0==(1&u)?0:3!=(i=t.andln(7)+o&7)&&5!==i||2!==l?u:-u,r[1].push(a),2*n===s+1&&(n=1-n),2*o===a+1&&(o=1-o),e.iushrn(1),t.iushrn(1)}return r},r.cachedProperty=function(e,t,r){var i="_"+t;e.prototype[t]=function(){return void 0!==this[i]?this[i]:this[i]=r.call(this)}},r.parseBytes=function(e){return"string"==typeof e?r.toArray(e,"hex"):e},r.intFromLE=function(e){return new(G())(e,"hex","le")}}),rt=re.getNAF,rr=re.getJSF,ri=re.assert;function rn(e,t){this.type=e,this.p=new(G())(t.p,16),this.red=t.prime?G().red(t.prime):G().mont(this.p),this.zero=new(G())(0).toRed(this.red),this.one=new(G())(1).toRed(this.red),this.two=new(G())(2).toRed(this.red),this.n=t.n&&new(G())(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=[,,,,],this._wnafT2=[,,,,],this._wnafT3=[,,,,],this._wnafT4=[,,,,],this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var ro=rn;function rs(e,t){this.curve=e,this.type=t,this.precomputed=null}rn.prototype.point=function(){throw Error("Not implemented")},rn.prototype.validate=function(){throw Error("Not implemented")},rn.prototype._fixedNafMul=function(e,t){ri(e.precomputed);var r=e._getDoubles(),i=rt(t,1,this._bitLength),n=(1<<r.step+1)-(r.step%2==0?2:1);n/=3;var o,s,a=[];for(o=0;o<i.length;o+=r.step){s=0;for(var l=o+r.step-1;l>=o;l--)s=(s<<1)+i[l];a.push(s)}for(var u=this.jpoint(null,null,null),c=this.jpoint(null,null,null),d=n;d>0;d--){for(o=0;o<a.length;o++)(s=a[o])===d?c=c.mixedAdd(r.points[o]):s===-d&&(c=c.mixedAdd(r.points[o].neg()));u=u.add(c)}return u.toP()},rn.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var n=i.points,o=rt(t,r,this._bitLength),s=this.jpoint(null,null,null),a=o.length-1;a>=0;a--){for(var l=0;a>=0&&0===o[a];a--)l++;if(a>=0&&l++,s=s.dblp(l),a<0)break;var u=o[a];ri(0!==u),s="affine"===e.type?u>0?s.mixedAdd(n[u-1>>1]):s.mixedAdd(n[-u-1>>1].neg()):u>0?s.add(n[u-1>>1]):s.add(n[-u-1>>1].neg())}return"affine"===e.type?s.toP():s},rn.prototype._wnafMulAdd=function(e,t,r,i,n){var o,s,a,l=this._wnafT1,u=this._wnafT2,c=this._wnafT3,d=0;for(o=0;o<i;o++){var h=(a=t[o])._getNAFPoints(e);l[o]=h.wnd,u[o]=h.points}for(o=i-1;o>=1;o-=2){var f=o-1,p=o;if(1===l[f]&&1===l[p]){var y=[t[f],null,null,t[p]];0===t[f].y.cmp(t[p].y)?(y[1]=t[f].add(t[p]),y[2]=t[f].toJ().mixedAdd(t[p].neg())):0===t[f].y.cmp(t[p].y.redNeg())?(y[1]=t[f].toJ().mixedAdd(t[p]),y[2]=t[f].add(t[p].neg())):(y[1]=t[f].toJ().mixedAdd(t[p]),y[2]=t[f].toJ().mixedAdd(t[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],v=rr(r[f],r[p]);for(d=Math.max(v[0].length,d),c[f]=Array(d),c[p]=Array(d),s=0;s<d;s++){var g=0|v[0][s],b=0|v[1][s];c[f][s]=m[3*(g+1)+(b+1)],c[p][s]=0,u[f]=y}}else c[f]=rt(r[f],l[f],this._bitLength),c[p]=rt(r[p],l[p],this._bitLength),d=Math.max(c[f].length,d),d=Math.max(c[p].length,d)}var w=this.jpoint(null,null,null),_=this._wnafT4;for(o=d;o>=0;o--){for(var S=0;o>=0;){var E=!0;for(s=0;s<i;s++)_[s]=0|c[s][o],0!==_[s]&&(E=!1);if(!E)break;S++,o--}if(o>=0&&S++,w=w.dblp(S),o<0)break;for(s=0;s<i;s++){var k=_[s];0!==k&&(k>0?a=u[s][k-1>>1]:k<0&&(a=u[s][-k-1>>1].neg()),w="affine"===a.type?w.mixedAdd(a):w.add(a))}}for(o=0;o<i;o++)u[o]=null;return n?w:w.toP()},rn.BasePoint=rs,rs.prototype.eq=function(){throw Error("Not implemented")},rs.prototype.validate=function(){return this.curve.validate(this)},rn.prototype.decodePoint=function(e,t){e=re.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1==2*r)return 6===e[0]?ri(e[e.length-1]%2==0):7===e[0]&&ri(e[e.length-1]%2==1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw Error("Unknown point format")},rs.prototype.encodeCompressed=function(e){return this.encode(e,!0)},rs.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},rs.prototype.encode=function(e,t){return re.encode(this._encode(t),e)},rs.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},rs.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},rs.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,n=0;n<t;n+=e){for(var o=0;o<e;o++)i=i.dbl();r.push(i)}return{step:e,points:r}},rs.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=1===r?null:this.dbl(),n=1;n<r;n++)t[n]=t[n-1].add(i);return{wnd:e,points:t}},rs.prototype._getBeta=function(){return null},rs.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t};var ra=t8(function(e){"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}}),rl=re.assert;function ru(e){ro.call(this,"short",e),this.a=new(G())(e.a,16).toRed(this.red),this.b=new(G())(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=[,,,,],this._endoWnafT2=[,,,,]}ra(ru,ro);var rc=ru;function rd(e,t,r,i){ro.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new(G())(t,16),this.y=new(G())(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function rh(e,t,r,i){ro.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new(G())(0)):(this.x=new(G())(t,16),this.y=new(G())(r,16),this.z=new(G())(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}ru.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new(G())(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=(t=0>i[0].cmp(i[1])?i[0]:i[1]).toRed(this.red)}if(e.lambda)r=new(G())(e.lambda,16);else{var n=this._getEndoRoots(this.n);0===this.g.mul(n[0]).x.cmp(this.g.x.redMul(t))?r=n[0]:(r=n[1],rl(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map(function(e){return{a:new(G())(e.a,16),b:new(G())(e.b,16)}}):this._getEndoBasis(r)}}},ru.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:G().mont(e),r=new(G())(2).toRed(t).redInvm(),i=r.redNeg(),n=new(G())(3).toRed(t).redNeg().redSqrt().redMul(r);return[i.redAdd(n).fromRed(),i.redSub(n).fromRed()]},ru.prototype._getEndoBasis=function(e){for(var t,r,i,n,o,s,a,l,u,c=this.n.ushrn(Math.floor(this.n.bitLength()/2)),d=e,h=this.n.clone(),f=new(G())(1),p=new(G())(0),y=new(G())(0),m=new(G())(1),v=0;0!==d.cmpn(0);){var g=h.div(d);l=h.sub(g.mul(d)),u=y.sub(g.mul(f));var b=m.sub(g.mul(p));if(!i&&0>l.cmp(c))t=a.neg(),r=f,i=l.neg(),n=u;else if(i&&2==++v)break;a=l,h=d,d=l,y=f,f=u,m=p,p=b}o=l.neg(),s=u;var w=i.sqr().add(n.sqr());return o.sqr().add(s.sqr()).cmp(w)>=0&&(o=t,s=r),i.negative&&(i=i.neg(),n=n.neg()),o.negative&&(o=o.neg(),s=s.neg()),[{a:i,b:n},{a:o,b:s}]},ru.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],n=i.b.mul(e).divRound(this.n),o=r.b.neg().mul(e).divRound(this.n),s=n.mul(r.a),a=o.mul(i.a),l=n.mul(r.b),u=o.mul(i.b);return{k1:e.sub(s).sub(a),k2:l.add(u).neg()}},ru.prototype.pointFromX=function(e,t){(e=new(G())(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(0!==i.redSqr().redSub(r).cmp(this.zero))throw Error("invalid point");var n=i.fromRed().isOdd();return(t&&!n||!t&&n)&&(i=i.redNeg()),this.point(e,i)},ru.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),n=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===r.redSqr().redISub(n).cmpn(0)},ru.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,n=this._endoWnafT2,o=0;o<e.length;o++){var s=this._endoSplit(t[o]),a=e[o],l=a._getBeta();s.k1.negative&&(s.k1.ineg(),a=a.neg(!0)),s.k2.negative&&(s.k2.ineg(),l=l.neg(!0)),i[2*o]=a,i[2*o+1]=l,n[2*o]=s.k1,n[2*o+1]=s.k2}for(var u=this._wnafMulAdd(1,i,n,2*o,r),c=0;c<2*o;c++)i[c]=null,n[c]=null;return u},ra(rd,ro.BasePoint),ru.prototype.point=function(e,t,r){return new rd(this,e,t,r)},ru.prototype.pointFromJSON=function(e,t){return rd.fromJSON(this,e,t)},rd.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},rd.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},rd.fromJSON=function(e,t,r){"string"==typeof t&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function n(t){return e.point(t[0],t[1],r)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(n))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(n))}},i},rd.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},rd.prototype.isInfinity=function(){return this.inf},rd.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e)||0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},rd.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),n=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),o=n.redSqr().redISub(this.x.redAdd(this.x)),s=n.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,s)},rd.prototype.getX=function(){return this.x.fromRed()},rd.prototype.getY=function(){return this.y.fromRed()},rd.prototype.mul=function(e){return e=new(G())(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},rd.prototype.mulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},rd.prototype.jmulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n,!0):this.curve._wnafMulAdd(1,i,n,2,!0)},rd.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},rd.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t},rd.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},ra(rh,ro.BasePoint),ru.prototype.jpoint=function(e,t,r){return new rh(this,e,t,r)},rh.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)},rh.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},rh.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),n=e.x.redMul(r),o=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),a=i.redSub(n),l=o.redSub(s);if(0===a.cmpn(0))return 0!==l.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=a.redSqr(),c=u.redMul(a),d=i.redMul(u),h=l.redSqr().redIAdd(c).redISub(d).redISub(d),f=l.redMul(d.redISub(h)).redISub(o.redMul(c)),p=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(h,f,p)},rh.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),n=this.y,o=e.y.redMul(t).redMul(this.z),s=r.redSub(i),a=n.redSub(o);if(0===s.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=s.redSqr(),u=l.redMul(s),c=r.redMul(l),d=a.redSqr().redIAdd(u).redISub(c).redISub(c),h=a.redMul(c.redISub(d)).redISub(n.redMul(u)),f=this.z.redMul(s);return this.curve.jpoint(d,h,f)},rh.prototype.dblp=function(e){if(0===e||this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){var t,r=this;for(t=0;t<e;t++)r=r.dbl();return r}var i=this.curve.a,n=this.curve.tinv,o=this.x,s=this.y,a=this.z,l=a.redSqr().redSqr(),u=s.redAdd(s);for(t=0;t<e;t++){var c=o.redSqr(),d=u.redSqr(),h=d.redSqr(),f=c.redAdd(c).redIAdd(c).redIAdd(i.redMul(l)),p=o.redMul(d),y=f.redSqr().redISub(p.redAdd(p)),m=p.redISub(y),v=f.redMul(m);v=v.redIAdd(v).redISub(h);var g=u.redMul(a);t+1<e&&(l=l.redMul(h)),o=y,a=g,u=v}return this.curve.jpoint(o,u.redMul(n),a)},rh.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},rh.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),s=this.x.redAdd(n).redSqr().redISub(i).redISub(o);s=s.redIAdd(s);var a=i.redAdd(i).redIAdd(i),l=a.redSqr().redISub(s).redISub(s),u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),e=l,t=a.redMul(s.redISub(l)).redISub(u),r=this.y.redAdd(this.y)}else{var c=this.x.redSqr(),d=this.y.redSqr(),h=d.redSqr(),f=this.x.redAdd(d).redSqr().redISub(c).redISub(h);f=f.redIAdd(f);var p=c.redAdd(c).redIAdd(c),y=p.redSqr(),m=h.redIAdd(h);m=(m=m.redIAdd(m)).redIAdd(m),e=y.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},rh.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),o=n.redSqr(),s=this.x.redAdd(n).redSqr().redISub(i).redISub(o);s=s.redIAdd(s);var a=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),l=a.redSqr().redISub(s).redISub(s);e=l;var u=o.redIAdd(o);u=(u=u.redIAdd(u)).redIAdd(u),t=a.redMul(s.redISub(l)).redISub(u),r=this.y.redAdd(this.y)}else{var c=this.z.redSqr(),d=this.y.redSqr(),h=this.x.redMul(d),f=this.x.redSub(c).redMul(this.x.redAdd(c));f=f.redAdd(f).redIAdd(f);var p=h.redIAdd(h),y=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(y),r=this.y.redAdd(this.z).redSqr().redISub(d).redISub(c);var m=d.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=f.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},rh.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,n=i.redSqr().redSqr(),o=t.redSqr(),s=r.redSqr(),a=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(n)),l=t.redAdd(t),u=(l=l.redIAdd(l)).redMul(s),c=a.redSqr().redISub(u.redAdd(u)),d=u.redISub(c),h=s.redSqr();h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var f=a.redMul(d).redISub(h),p=r.redAdd(r).redMul(i);return this.curve.jpoint(c,f,p)},rh.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),n=e.redAdd(e).redIAdd(e),o=n.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(i),a=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(o)).redSqr(),l=i.redIAdd(i);l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var u=n.redIAdd(s).redSqr().redISub(o).redISub(a).redISub(l),c=t.redMul(u);c=(c=c.redIAdd(c)).redIAdd(c);var d=this.x.redMul(a).redISub(c);d=(d=d.redIAdd(d)).redIAdd(d);var h=this.y.redMul(u.redMul(l.redISub(u)).redISub(s.redMul(a)));h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var f=this.z.redAdd(s).redSqr().redISub(r).redISub(a);return this.curve.jpoint(d,h,f)},rh.prototype.mul=function(e,t){return e=new(G())(e,t),this.curve._wnafMul(this,e)},rh.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),n=r.redMul(e.z);return 0===this.y.redMul(n).redISub(e.y.redMul(i)).cmpn(0)},rh.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var i=e.clone(),n=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),0===this.x.cmp(r))return!0}},rh.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},rh.prototype.isInfinity=function(){return 0===this.z.cmpn(0)};var rf=t8(function(e,t){var r=t;r.base=ro,r.short=rc,r.mont=null,r.edwards=null}),rp=t8(function(e,t){var r,i=t,n=re.assert;function o(e){"short"===e.type?this.curve=new rf.short(e):"edwards"===e.type?this.curve=new rf.edwards(e):this.curve=new rf.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function s(e,t){Object.defineProperty(i,e,{configurable:!0,enumerable:!0,get:function(){var r=new o(t);return Object.defineProperty(i,e,{configurable:!0,enumerable:!0,value:r}),r}})}i.PresetCurve=o,s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:t5().sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:t5().sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:t5().sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:t5().sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:t5().sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t5().sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:t5().sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=null.crash()}catch(a){r=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:t5().sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})});function ry(e){if(!(this instanceof ry))return new ry(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.outSize,this.minEntropy=e.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=t9.toArray(e.entropy,e.entropyEnc||"hex"),r=t9.toArray(e.nonce,e.nonceEnc||"hex"),i=t9.toArray(e.pers,e.persEnc||"hex");t4(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,i)}var rm=ry;ry.prototype._init=function(e,t,r){var i=e.concat(t).concat(r);this.K=Array(this.outLen/8),this.V=Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},ry.prototype._hmac=function(){return new(t5()).hmac(this.hash,this.K)},ry.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())},ry.prototype.reseed=function(e,t,r,i){"string"!=typeof t&&(i=r,r=t,t=null),e=t9.toArray(e,t),r=t9.toArray(r,i),t4(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},ry.prototype.generate=function(e,t,r,i){if(this._reseed>this.reseedInterval)throw Error("Reseed is required");"string"!=typeof t&&(i=r,r=t,t=null),r&&(r=t9.toArray(r,i||"hex"),this._update(r));for(var n=[];n.length<e;)this.V=this._hmac().update(this.V).digest(),n=n.concat(this.V);var o=n.slice(0,e);return this._update(r),this._reseed++,t9.encode(o,t)};var rv=re.assert;function rg(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var rb=rg;rg.fromPublic=function(e,t,r){return t instanceof rg?t:new rg(e,{pub:t,pubEnc:r})},rg.fromPrivate=function(e,t,r){return t instanceof rg?t:new rg(e,{priv:t,privEnc:r})},rg.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},rg.prototype.getPublic=function(e,t){return"string"==typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},rg.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},rg.prototype._importPrivate=function(e,t){this.priv=new(G())(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},rg.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?rv(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||rv(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},rg.prototype.derive=function(e){return e.validate()||rv(e.validate(),"public point not validated"),e.mul(this.priv).getX()},rg.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},rg.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},rg.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var rw=re.assert;function r_(e,t){if(e instanceof r_)return e;this._importDER(e,t)||(rw(e.r&&e.s,"Signature without r or s"),this.r=new(G())(e.r,16),this.s=new(G())(e.s,16),void 0===e.recoveryParam?this.recoveryParam=null:this.recoveryParam=e.recoveryParam)}var rS=r_;function rE(){this.place=0}function rk(e,t){var r=e[t.place++];if(!(128&r))return r;var i=15&r;if(0===i||i>4)return!1;for(var n=0,o=0,s=t.place;o<i;o++,s++)n<<=8,n|=e[s],n>>>=0;return!(n<=127)&&(t.place=s,n)}function rN(e){for(var t=0,r=e.length-1;!e[t]&&!(128&e[t+1])&&t<r;)t++;return 0===t?e:e.slice(t)}function rA(e,t){if(t<128)e.push(t);else{var r=1+(Math.log(t)/Math.LN2>>>3);for(e.push(128|r);--r;)e.push(t>>>(r<<3)&255);e.push(t)}}r_.prototype._importDER=function(e,t){e=re.toArray(e,t);var r=new rE;if(48!==e[r.place++])return!1;var i=rk(e,r);if(!1===i||i+r.place!==e.length||2!==e[r.place++])return!1;var n=rk(e,r);if(!1===n)return!1;var o=e.slice(r.place,n+r.place);if(r.place+=n,2!==e[r.place++])return!1;var s=rk(e,r);if(!1===s||e.length!==s+r.place)return!1;var a=e.slice(r.place,s+r.place);if(0===o[0]){if(!(128&o[1]))return!1;o=o.slice(1)}if(0===a[0]){if(!(128&a[1]))return!1;a=a.slice(1)}return this.r=new(G())(o),this.s=new(G())(a),this.recoveryParam=null,!0},r_.prototype.toDER=function(e){var t=this.r.toArray(),r=this.s.toArray();for(128&t[0]&&(t=[0].concat(t)),128&r[0]&&(r=[0].concat(r)),t=rN(t),r=rN(r);!(r[0]||128&r[1]);)r=r.slice(1);var i=[2];rA(i,t.length),(i=i.concat(t)).push(2),rA(i,r.length);var n=i.concat(r),o=[48];return rA(o,n.length),o=o.concat(n),re.encode(o,e)};var rP=function(){throw Error("unsupported")},rx=re.assert;function rO(e){if(!(this instanceof rO))return new rO(e);"string"==typeof e&&(rx(Object.prototype.hasOwnProperty.call(rp,e),"Unknown curve "+e),e=rp[e]),e instanceof rp.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}var rT=rO;rO.prototype.keyPair=function(e){return new rb(this,e)},rO.prototype.keyFromPrivate=function(e,t){return rb.fromPrivate(this,e,t)},rO.prototype.keyFromPublic=function(e,t){return rb.fromPublic(this,e,t)},rO.prototype.genKeyPair=function(e){e||(e={});for(var t=new rm({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||rP(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),i=this.n.sub(new(G())(2));;){var n=new(G())(t.generate(r));if(!(n.cmp(i)>0))return n.iaddn(1),this.keyFromPrivate(n)}},rO.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},rO.prototype.sign=function(e,t,r,i){"object"==typeof r&&(i=r,r=null),i||(i={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new(G())(e,16));for(var n=this.n.byteLength(),o=t.getPrivate().toArray("be",n),s=e.toArray("be",n),a=new rm({hash:this.hash,entropy:o,nonce:s,pers:i.pers,persEnc:i.persEnc||"utf8"}),l=this.n.sub(new(G())(1)),u=0;;u++){var c=i.k?i.k(u):new(G())(a.generate(this.n.byteLength()));if(!(0>=(c=this._truncateToN(c,!0)).cmpn(1)||c.cmp(l)>=0)){var d=this.g.mul(c);if(!d.isInfinity()){var h=d.getX(),f=h.umod(this.n);if(0!==f.cmpn(0)){var p=c.invm(this.n).mul(f.mul(t.getPrivate()).iadd(e));if(0!==(p=p.umod(this.n)).cmpn(0)){var y=(d.getY().isOdd()?1:0)|(0!==h.cmp(f)?2:0);return i.canonical&&p.cmp(this.nh)>0&&(p=this.n.sub(p),y^=1),new rS({r:f,s:p,recoveryParam:y})}}}}}},rO.prototype.verify=function(e,t,r,i){e=this._truncateToN(new(G())(e,16)),r=this.keyFromPublic(r,i);var n=(t=new rS(t,"hex")).r,o=t.s;if(0>n.cmpn(1)||n.cmp(this.n)>=0||0>o.cmpn(1)||o.cmp(this.n)>=0)return!1;var s,a=o.invm(this.n),l=a.mul(e).umod(this.n),u=a.mul(n).umod(this.n);return this.curve._maxwellTrick?!(s=this.g.jmulAdd(l,r.getPublic(),u)).isInfinity()&&s.eqXToP(n):!(s=this.g.mulAdd(l,r.getPublic(),u)).isInfinity()&&0===s.getX().umod(this.n).cmp(n)},rO.prototype.recoverPubKey=function(e,t,r,i){rx((3&r)===r,"The recovery param is more than two bits"),t=new rS(t,i);var n=this.n,o=new(G())(e),s=t.r,a=t.s,l=1&r,u=r>>1;if(s.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw Error("Unable to find sencond key candinate");s=u?this.curve.pointFromX(s.add(this.curve.n),l):this.curve.pointFromX(s,l);var c=t.r.invm(n),d=n.sub(o).mul(c).umod(n),h=a.mul(c).umod(n);return this.g.mulAdd(d,s,h)},rO.prototype.getKeyRecoveryParam=function(e,t,r,i){if(null!==(t=new rS(t,i)).recoveryParam)return t.recoveryParam;for(var n,o=0;o<4;o++){try{n=this.recoverPubKey(e,t,o)}catch(s){continue}if(n.eq(r))return o}throw Error("Unable to find valid recovery factor")};var rR=t8(function(e,t){var r=t;r.version="6.5.4",r.utils=re,r.rand=function(){throw Error("unsupported")},r.curve=rf,r.curves=rp,r.ec=rT,r.eddsa=null}).ec;let rB=new E("signing-key/5.5.0"),rC=null;function rI(){return rC||(rC=new rR("secp256k1")),rC}class rM{constructor(e){eo(this,"curve","secp256k1"),eo(this,"privateKey",U(e));let t=rI().keyFromPrivate(T(this.privateKey));eo(this,"publicKey","0x"+t.getPublic(!1,"hex")),eo(this,"compressedPublicKey","0x"+t.getPublic(!0,"hex")),eo(this,"_isSigningKey",!0)}_addPoint(e){let t=rI().keyFromPublic(T(this.publicKey)),r=rI().keyFromPublic(T(e));return"0x"+t.pub.add(r.pub).encodeCompressed("hex")}signDigest(e){let t=rI().keyFromPrivate(T(this.privateKey)),r=T(e);32!==r.length&&rB.throwArgumentError("bad digest length","digest",e);let i=t.sign(r,{canonical:!0});return q({recoveryParam:i.recoveryParam,r:F("0x"+i.r.toString(16),32),s:F("0x"+i.s.toString(16),32)})}computeSharedSecret(e){let t=rI().keyFromPrivate(T(this.privateKey)),r=rI().keyFromPublic(T(rK(e)));return F("0x"+t.derive(r.getPublic()).toString(16),32)}static isSigningKey(e){return!(!e||!e._isSigningKey)}}function rU(e,t){let r=q(t),i={r:T(r.r),s:T(r.s)};return"0x"+rI().recoverPubKey(T(e),i,r.recoveryParam).encode("hex",!1)}function rK(e,t){let r=T(e);if(32===r.length){let i=new rM(r);return t?"0x"+rI().keyFromPrivate(r).getPublic(!0,"hex"):i.publicKey}return 33===r.length?t?U(r):"0x"+rI().keyFromPublic(r).getPublic(!1,"hex"):65===r.length?t?"0x"+rI().keyFromPublic(r).getPublic(!0,"hex"):U(r):rB.throwArgumentError("invalid public or private key","key","[REDACTED]")}let rD=new E("transactions/5.5.0");function rj(e){return"0x"===e?null:ej(e)}function rL(e){return"0x"===e?ti:Q.from(e)}!function(e){e[e.legacy=0]="legacy",e[e.eip2930=1]="eip2930",e[e.eip1559=2]="eip1559"}(l||(l={}));let rJ=[{name:"nonce",maxLength:32,numeric:!0},{name:"gasPrice",maxLength:32,numeric:!0},{name:"gasLimit",maxLength:32,numeric:!0},{name:"to",length:20},{name:"value",maxLength:32,numeric:!0},{name:"data"}],rF={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,type:!0,value:!0};function rq(e){return ej(D(eE(D(rK(e),1)),12))}function rV(e,t){return rq(rU(T(e),t))}function rz(e,t){let r=B(Q.from(e).toHexString());return r.length>32&&rD.throwArgumentError("invalid length for "+t,"transaction:"+t,e),r}function rG(e,t){return{address:ej(e),storageKeys:(t||[]).map((t,r)=>(32!==K(t)&&rD.throwArgumentError("invalid access list storageKey",`accessList[${e}:${r}]`,t),t.toLowerCase()))}}function rH(e){if(Array.isArray(e))return e.map((e,t)=>Array.isArray(e)?(e.length>2&&rD.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${t}]`,e),rG(e[0],e[1])):rG(e.address,e.storageKeys));let t=Object.keys(e).map(t=>{let r=e[t].reduce((e,t)=>(e[t]=!0,e),{});return rG(t,Object.keys(r).sort())});return t.sort((e,t)=>e.address.localeCompare(t.address)),t}function rW(e){return rH(e).map(e=>[e.address,e.storageKeys])}function rZ(e,t){if(null!=e.gasPrice){let r=Q.from(e.gasPrice),i=Q.from(e.maxFeePerGas||0);r.eq(i)||rD.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:r,maxFeePerGas:i})}let n=[rz(e.chainId||0,"chainId"),rz(e.nonce||0,"nonce"),rz(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),rz(e.maxFeePerGas||0,"maxFeePerGas"),rz(e.gasLimit||0,"gasLimit"),null!=e.to?ej(e.to):"0x",rz(e.value||0,"value"),e.data||"0x",rW(e.accessList||[])];if(t){let o=q(t);n.push(rz(o.recoveryParam,"recoveryParam")),n.push(B(o.r)),n.push(B(o.s))}return j(["0x02",ex(n)])}function r$(e,t){let r=[rz(e.chainId||0,"chainId"),rz(e.nonce||0,"nonce"),rz(e.gasPrice||0,"gasPrice"),rz(e.gasLimit||0,"gasLimit"),null!=e.to?ej(e.to):"0x",rz(e.value||0,"value"),e.data||"0x",rW(e.accessList||[])];if(t){let i=q(t);r.push(rz(i.recoveryParam,"recoveryParam")),r.push(B(i.r)),r.push(B(i.s))}return j(["0x01",ex(r)])}function rX(e,t){if(null==e.type||0===e.type)return null!=e.accessList&&rD.throwArgumentError("untyped transactions do not support accessList; include type: 1","transaction",e),function(e,t){el(e,rF);let r=[];rJ.forEach(function(t){let i=e[t.name]||[],n={};t.numeric&&(n.hexPad="left"),i=T(U(i,n)),t.length&&i.length!==t.length&&i.length>0&&rD.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,i),t.maxLength&&(i=B(i)).length>t.maxLength&&rD.throwArgumentError("invalid length for "+t.name,"transaction:"+t.name,i),r.push(U(i))});let i=0;if(null!=e.chainId?"number"!=typeof(i=e.chainId)&&rD.throwArgumentError("invalid transaction.chainId","transaction",e):t&&!P(t)&&t.v>28&&(i=Math.floor((t.v-35)/2)),0!==i&&(r.push(U(i)),r.push("0x"),r.push("0x")),!t)return ex(r);let n=q(t),o=27+n.recoveryParam;return 0!==i?(r.pop(),r.pop(),r.pop(),o+=2*i+8,n.v>28&&n.v!==o&&rD.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t)):n.v!==o&&rD.throwArgumentError("transaction.chainId/signature.v mismatch","signature",t),r.push(U(o)),r.push(B(T(n.r))),r.push(B(T(n.s))),ex(r)}(e,t);switch(e.type){case 1:return r$(e,t);case 2:return rZ(e,t)}return rD.throwError(`unsupported transaction type: ${e.type}`,E.errors.UNSUPPORTED_OPERATION,{operation:"serializeTransaction",transactionType:e.type})}function rY(e,t,r){try{let i=rL(t[0]).toNumber();if(0!==i&&1!==i)throw Error("bad recid");e.v=i}catch(n){rD.throwArgumentError("invalid v for transaction type: 1","v",t[0])}e.r=F(t[1],32),e.s=F(t[2],32);try{let o=eE(r(e));e.from=rV(o,{r:e.r,s:e.s,recoveryParam:e.v})}catch(s){console.log(s)}}function rQ(e){let t=T(e);if(t[0]>127)return function(e){let t=eR(e);9!==t.length&&6!==t.length&&rD.throwArgumentError("invalid raw transaction","rawTransaction",e);let r={nonce:rL(t[0]).toNumber(),gasPrice:rL(t[1]),gasLimit:rL(t[2]),to:rj(t[3]),value:rL(t[4]),data:t[5],chainId:0};if(6===t.length)return r;try{r.v=Q.from(t[6]).toNumber()}catch(i){return console.log(i),r}if(r.r=F(t[7],32),r.s=F(t[8],32),Q.from(r.r).isZero()&&Q.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27,o=t.slice(0,6);0!==r.chainId&&(o.push(U(r.chainId)),o.push("0x"),o.push("0x"),n-=2*r.chainId+8);let s=eE(ex(o));try{r.from=rV(s,{r:U(r.r),s:U(r.s),recoveryParam:n})}catch(a){console.log(a)}r.hash=eE(e)}return r.type=null,r}(t);switch(t[0]){case 1:return function(e){let t=eR(e.slice(1));8!==t.length&&11!==t.length&&rD.throwArgumentError("invalid component count for transaction type: 1","payload",U(e));let r={type:1,chainId:rL(t[0]).toNumber(),nonce:rL(t[1]).toNumber(),gasPrice:rL(t[2]),gasLimit:rL(t[3]),to:rj(t[4]),value:rL(t[5]),data:t[6],accessList:rH(t[7])};return 8===t.length||(r.hash=eE(e),rY(r,t.slice(8),r$)),r}(t);case 2:return function(e){let t=eR(e.slice(1));9!==t.length&&12!==t.length&&rD.throwArgumentError("invalid component count for transaction type: 2","payload",U(e));let r=rL(t[2]),i=rL(t[3]),n={type:2,chainId:rL(t[0]).toNumber(),nonce:rL(t[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:i,gasPrice:null,gasLimit:rL(t[4]),to:rj(t[5]),value:rL(t[6]),data:t[7],accessList:rH(t[8])};return 9===t.length||(n.hash=eE(e),rY(n,t.slice(9),rZ)),n}(t)}return rD.throwError(`unsupported transaction type: ${t[0]}`,E.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:t[0]})}var r0=function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};let r1=new E("contracts/5.5.0"),r2={chainId:!0,data:!0,from:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0,customData:!0};function r3(e,t){return r0(this,void 0,void 0,function*(){let r=yield t;"string"!=typeof r&&r1.throwArgumentError("invalid address or ENS name","name",r);try{return ej(r)}catch(i){}e||r1.throwError("a provider or signer is needed to resolve ENS names",E.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});let n=yield e.resolveName(r);return null==n&&r1.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n})}function r6(e,t,r){return r0(this,void 0,void 0,function*(){return Array.isArray(r)?yield Promise.all(r.map((r,i)=>r6(e,Array.isArray(t)?t[i]:t[r.name],r))):"address"===r.type?yield r3(e,t):"tuple"===r.type?yield r6(e,t,r.components):"array"===r.baseType?Array.isArray(t)?yield Promise.all(t.map(t=>r6(e,t,r.arrayChildren))):Promise.reject(r1.makeError("invalid value for array",E.errors.INVALID_ARGUMENT,{argument:"value",value:t})):t})}function r5(e,t,r){return r0(this,void 0,void 0,function*(){let i={};r.length===t.inputs.length+1&&"object"==typeof r[r.length-1]&&(i=eu(r.pop())),r1.checkArgumentCount(r.length,t.inputs.length,"passed to contract"),e.signer?i.from?i.from=ea({override:r3(e.signer,i.from),signer:e.signer.getAddress()}).then(e=>r0(this,void 0,void 0,function*(){return ej(e.signer)!==e.override&&r1.throwError("Contract with a Signer cannot override from",E.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),e.override})):i.from=e.signer.getAddress():i.from&&(i.from=r3(e.provider,i.from));let n=yield ea({args:r6(e.signer||e.provider,r,t.inputs),address:e.resolvedAddress,overrides:ea(i)||{}}),o=e.interface.encodeFunctionData(t,n.args),s={data:o,to:n.address},a=n.overrides;if(null!=a.nonce&&(s.nonce=Q.from(a.nonce).toNumber()),null!=a.gasLimit&&(s.gasLimit=Q.from(a.gasLimit)),null!=a.gasPrice&&(s.gasPrice=Q.from(a.gasPrice)),null!=a.maxFeePerGas&&(s.maxFeePerGas=Q.from(a.maxFeePerGas)),null!=a.maxPriorityFeePerGas&&(s.maxPriorityFeePerGas=Q.from(a.maxPriorityFeePerGas)),null!=a.from&&(s.from=a.from),null!=a.type&&(s.type=a.type),null!=a.accessList&&(s.accessList=rH(a.accessList)),null==s.gasLimit&&null!=t.gas){let l=21e3,u=T(o);for(let c=0;c<u.length;c++)l+=4,u[c]&&(l+=64);s.gasLimit=Q.from(t.gas).add(l)}if(a.value){let d=Q.from(a.value);d.isZero()||t.payable||r1.throwError("non-payable method cannot override value",E.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:i.value}),s.value=d}a.customData&&(s.customData=eu(a.customData)),delete i.nonce,delete i.gasLimit,delete i.gasPrice,delete i.from,delete i.value,delete i.type,delete i.accessList,delete i.maxFeePerGas,delete i.maxPriorityFeePerGas,delete i.customData;let h=Object.keys(i).filter(e=>null!=i[e]);return h.length&&r1.throwError(`cannot override ${h.map(e=>JSON.stringify(e)).join(",")}`,E.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:h}),s})}function r8(e,t){let r=t.wait.bind(t);t.wait=t=>r(t).then(t=>(t.events=t.logs.map(r=>{let i=ef(r),n=null;try{n=e.interface.parseLog(r)}catch(o){}return n&&(i.args=n.args,i.decode=(t,r)=>e.interface.decodeEventLog(n.eventFragment,t,r),i.event=n.name,i.eventSignature=n.signature),i.removeListener=()=>e.provider,i.getBlock=()=>e.provider.getBlock(t.blockHash),i.getTransaction=()=>e.provider.getTransaction(t.transactionHash),i.getTransactionReceipt=()=>Promise.resolve(t),i}),t))}function r4(e,t,r){let i=e.signer||e.provider;return function(...n){return r0(this,void 0,void 0,function*(){let o;if(n.length===t.inputs.length+1&&"object"==typeof n[n.length-1]){let s=eu(n.pop());null!=s.blockTag&&(o=yield s.blockTag),delete s.blockTag,n.push(s)}null!=e.deployTransaction&&(yield e._deployed(o));let a=yield r5(e,t,n),l=yield i.call(a,o);try{let u=e.interface.decodeFunctionResult(t,l);return r&&1===t.outputs.length&&(u=u[0]),u}catch(c){throw c.code===E.errors.CALL_EXCEPTION&&(c.address=e.address,c.args=n,c.transaction=a),c}})}}function r7(e,t,r){return t.constant?r4(e,t,r):function(e,t){return function(...r){return r0(this,void 0,void 0,function*(){e.signer||r1.throwError("sending a transaction requires a signer",E.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),null!=e.deployTransaction&&(yield e._deployed());let i=yield r5(e,t,r),n=yield e.signer.sendTransaction(i);return r8(e,n),n})}}(e,t)}function r9(e){return e.address&&(null==e.topics||0===e.topics.length)?"*":(e.address||"*")+"@"+(e.topics?e.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class ie{constructor(e,t){eo(this,"tag",e),eo(this,"filter",t),this._listeners=[]}addListener(e,t){this._listeners.push({listener:e,once:t})}removeListener(e){let t=!1;this._listeners=this._listeners.filter(r=>!(!t&&r.listener===e&&(t=!0,1)))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){let t=this.listenerCount();return this._listeners=this._listeners.filter(t=>{let r=e.slice();return setTimeout(()=>{t.listener.apply(this,r)},0),!t.once}),t}prepareEvent(e){}getEmit(e){return[e]}}class it extends ie{constructor(){super("error",null)}}class ir extends ie{constructor(e,t,r,i){let n={address:e},o=t.getEventTopic(r);i?(o!==i[0]&&r1.throwArgumentError("topic mismatch","topics",i),n.topics=i.slice()):n.topics=[o],super(r9(n),n),eo(this,"address",e),eo(this,"interface",t),eo(this,"fragment",r)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(e,t)=>this.interface.decodeEventLog(this.fragment,e,t);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(t){e.args=null,e.decodeError=t}}getEmit(e){let t=ev(e.args);if(t.length)throw t[0].error;let r=(e.args||[]).slice();return r.push(e),r}}class ii extends ie{constructor(e,t){super("*",{address:e}),eo(this,"address",e),eo(this,"interface",t)}prepareEvent(e){super.prepareEvent(e);try{let t=this.interface.parseLog(e);e.event=t.name,e.eventSignature=t.signature,e.decode=(e,r)=>this.interface.decodeEventLog(t.eventFragment,e,r),e.args=t.args}catch(r){}}}class io{constructor(e,t,r){r1.checkNew(new.target,is),eo(this,"interface",es(new.target,"getInterface")(t)),null==r?(eo(this,"provider",null),eo(this,"signer",null)):t2.isSigner(r)?(eo(this,"provider",r.provider||null),eo(this,"signer",r)):tX.isProvider(r)?(eo(this,"provider",r),eo(this,"signer",null)):r1.throwArgumentError("invalid signer or provider","signerOrProvider",r),eo(this,"callStatic",{}),eo(this,"estimateGas",{}),eo(this,"functions",{}),eo(this,"populateTransaction",{}),eo(this,"filters",{});{let i={};Object.keys(this.interface.events).forEach(e=>{let t=this.interface.events[e];eo(this.filters,e,(...e)=>({address:this.address,topics:this.interface.encodeFilterTopics(t,e)})),i[t.name]||(i[t.name]=[]),i[t.name].push(e)}),Object.keys(i).forEach(e=>{let t=i[e];1===t.length?eo(this.filters,e,this.filters[t[0]]):r1.warn(`Duplicate definition of ${e} (${t.join(", ")})`)})}if(eo(this,"_runningEvents",{}),eo(this,"_wrappedEmits",{}),null==e&&r1.throwArgumentError("invalid contract address or ENS name","addressOrName",e),eo(this,"address",e),this.provider)eo(this,"resolvedAddress",r3(this.provider,e));else try{eo(this,"resolvedAddress",Promise.resolve(ej(e)))}catch(n){r1.throwError("provider is required to use ENS name as contract address",E.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}let o={},s={};Object.keys(this.interface.functions).forEach(e=>{let t=this.interface.functions[e];if(s[e])r1.warn(`Duplicate ABI entry for ${JSON.stringify(e)}`);else{s[e]=!0;{let r=t.name;o[`%${r}`]||(o[`%${r}`]=[]),o[`%${r}`].push(e)}null==this[e]&&eo(this,e,r7(this,t,!0)),null==this.functions[e]&&eo(this.functions,e,r7(this,t,!1)),null==this.callStatic[e]&&eo(this.callStatic,e,r4(this,t,!0)),null==this.populateTransaction[e]&&eo(this.populateTransaction,e,function(e,t){return function(...r){return r5(e,t,r)}}(this,t)),null==this.estimateGas[e]&&eo(this.estimateGas,e,function(e,t){let r=e.signer||e.provider;return function(...i){return r0(this,void 0,void 0,function*(){r||r1.throwError("estimate require a provider or signer",E.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});let n=yield r5(e,t,i);return yield r.estimateGas(n)})}}(this,t))}}),Object.keys(o).forEach(e=>{let t=o[e];if(t.length>1)return;e=e.substring(1);let r=t[0];try{null==this[e]&&eo(this,e,this[r])}catch(i){}null==this.functions[e]&&eo(this.functions,e,this.functions[r]),null==this.callStatic[e]&&eo(this.callStatic,e,this.callStatic[r]),null==this.populateTransaction[e]&&eo(this.populateTransaction,e,this.populateTransaction[r]),null==this.estimateGas[e]&&eo(this.estimateGas,e,this.estimateGas[r])})}static getContractAddress(e){return eF(e)}static getInterface(e){return tW.isInterface(e)?e:new tW(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(e=>("0x"===e&&r1.throwError("contract not deployed",E.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||r1.throwError("sending a transactions require a signer",E.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});let t=eu(e||{});return["from","to"].forEach(function(e){null!=t[e]&&r1.throwError("cannot override "+e,E.errors.UNSUPPORTED_OPERATION,{operation:e})}),t.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(t))}connect(e){"string"==typeof e&&(e=new t3(e,this.provider));let t=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&eo(t,"deployTransaction",this.deployTransaction),t}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return tz.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if("string"==typeof e){if("error"===e)return this._normalizeRunningEvent(new it);if("event"===e)return this._normalizeRunningEvent(new ie("event",null));if("*"===e)return this._normalizeRunningEvent(new ii(this.address,this.interface));let t=this.interface.getEvent(e);return this._normalizeRunningEvent(new ir(this.address,this.interface,t))}if(e.topics&&e.topics.length>0){try{let r=e.topics[0];if("string"!=typeof r)throw Error("invalid topic");let i=this.interface.getEvent(r);return this._normalizeRunningEvent(new ir(this.address,this.interface,i,e.topics))}catch(n){}let o={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new ie(r9(o),o))}return this._normalizeRunningEvent(new ii(this.address,this.interface))}_checkRunningEvents(e){if(0===e.listenerCount()){delete this._runningEvents[e.tag];let t=this._wrappedEmits[e.tag];t&&e.filter&&(this.provider.off(e.filter,t),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,t,r){let i=ef(t);return i.removeListener=()=>{r&&(e.removeListener(r),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(t.blockHash),i.getTransaction=()=>this.provider.getTransaction(t.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(t.transactionHash),e.prepareEvent(i),i}_addEventListener(e,t,r){if(this.provider||r1.throwError("events require a provider or a signer with a provider",E.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(t,r),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){let i=r=>{let i=this._wrapEvent(e,r,t);if(null==i.decodeError)try{let n=e.getEmit(i);this.emit(e.filter,...n)}catch(o){i.decodeError=o.error}null!=e.filter&&this.emit("event",i),null!=i.decodeError&&this.emit("error",i.decodeError,i)};this._wrappedEmits[e.tag]=i,null!=e.filter&&this.provider.on(e.filter,i)}}queryFilter(e,t,r){let i=this._getRunningEvent(e),n=eu(i.filter);return"string"==typeof t&&I(t,32)?(null!=r&&r1.throwArgumentError("cannot specify toBlock with blockhash","toBlock",r),n.blockHash=t):(n.fromBlock=null!=t?t:0,n.toBlock=null!=r?r:"latest"),this.provider.getLogs(n).then(e=>e.map(e=>this._wrapEvent(i,e,null)))}on(e,t){return this._addEventListener(this._getRunningEvent(e),t,!1),this}once(e,t){return this._addEventListener(this._getRunningEvent(e),t,!0),this}emit(e,...t){if(!this.provider)return!1;let r=this._getRunningEvent(e),i=r.run(t)>0;return this._checkRunningEvents(r),i}listenerCount(e){return this.provider?null==e?Object.keys(this._runningEvents).reduce((e,t)=>e+this._runningEvents[t].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(null==e){let t=[];for(let r in this._runningEvents)this._runningEvents[r].listeners().forEach(e=>{t.push(e)});return t}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(null==e){for(let t in this._runningEvents){let r=this._runningEvents[t];r.removeAllListeners(),this._checkRunningEvents(r)}return this}let i=this._getRunningEvent(e);return i.removeAllListeners(),this._checkRunningEvents(i),this}off(e,t){if(!this.provider)return this;let r=this._getRunningEvent(e);return r.removeListener(t),this._checkRunningEvents(r),this}removeListener(e,t){return this.off(e,t)}}class is extends io{}class ia{constructor(e,t,r){let i=null;"0x"!==(i="string"==typeof t?t:O(t)?U(t):t&&"string"==typeof t.object?t.object:"!").substring(0,2)&&(i="0x"+i),(!I(i)||i.length%2)&&r1.throwArgumentError("invalid bytecode","bytecode",t),r&&!t2.isSigner(r)&&r1.throwArgumentError("invalid signer","signer",r),eo(this,"bytecode",i),eo(this,"interface",es(new.target,"getInterface")(e)),eo(this,"signer",r||null)}getDeployTransaction(...e){let t={};if(e.length===this.interface.deploy.inputs.length+1&&"object"==typeof e[e.length-1]){for(let r in t=eu(e.pop()))if(!r2[r])throw Error("unknown transaction override "+r)}return["data","from","to"].forEach(e=>{null!=t[e]&&r1.throwError("cannot override "+e,E.errors.UNSUPPORTED_OPERATION,{operation:e})}),t.value&&(Q.from(t.value).isZero()||this.interface.deploy.payable||r1.throwError("non-payable constructor cannot override value",E.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:t.value})),r1.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor"),t.data=U(R([this.bytecode,this.interface.encodeDeploy(e)])),t}deploy(...e){return r0(this,void 0,void 0,function*(){let t={};e.length===this.interface.deploy.inputs.length+1&&(t=e.pop()),r1.checkArgumentCount(e.length,this.interface.deploy.inputs.length," in Contract constructor");let r=yield r6(this.signer,e,this.interface.deploy.inputs);r.push(t);let i=this.getDeployTransaction(...r),n=yield this.signer.sendTransaction(i),o=es(this.constructor,"getContractAddress")(n),s=es(this.constructor,"getContract")(o,this.interface,this.signer);return r8(s,n),eo(s,"deployTransaction",n),s})}attach(e){return this.constructor.getContract(e,this.interface,this.signer)}connect(e){return new this.constructor(this.interface,this.bytecode,e)}static fromSolidity(e,t){null==e&&r1.throwError("missing compiler output",E.errors.MISSING_ARGUMENT,{argument:"compilerOutput"}),"string"==typeof e&&(e=JSON.parse(e));let r=e.abi,i=null;return e.bytecode?i=e.bytecode:e.evm&&e.evm.bytecode&&(i=e.evm.bytecode),new this(r,i,t)}static getInterface(e){return is.getInterface(e)}static getContractAddress(e){return eF(e)}static getContract(e,t,r){return new is(e,t,r)}}let il=new E(H),iu={},ic=Q.from(0),id=Q.from(-1);function ih(e,t,r,i){let n={fault:t,operation:r};return void 0!==i&&(n.value=i),il.throwError(e,E.errors.NUMERIC_FAULT,n)}let ip="0";for(;ip.length<256;)ip+=ip;function iy(e){if("number"!=typeof e)try{e=Q.from(e).toNumber()}catch(t){}return"number"==typeof e&&e>=0&&e<=256&&!(e%1)?"1"+ip.substring(0,e):il.throwArgumentError("invalid decimal size","decimals",e)}function im(e,t){null==t&&(t=0);let r=iy(t),i=(e=Q.from(e)).lt(ic);i&&(e=e.mul(id));let n=e.mod(r).toString();for(;n.length<r.length-1;)n="0"+n;n=n.match(/^([0-9]*[1-9]|0)(0*)/)[1];let o=e.div(r).toString();return e=1===r.length?o:o+"."+n,i&&(e="-"+e),e}function iv(e,t){null==t&&(t=0);let r=iy(t);"string"==typeof e&&e.match(/^-?[0-9.]+$/)||il.throwArgumentError("invalid decimal value","value",e);let i="-"===e.substring(0,1);i&&(e=e.substring(1)),"."===e&&il.throwArgumentError("missing value","value",e);let n=e.split(".");n.length>2&&il.throwArgumentError("too many decimal points","value",e);let o=n[0],s=n[1];for(o||(o="0"),s||(s="0");"0"===s[s.length-1];)s=s.substring(0,s.length-1);for(s.length>r.length-1&&ih("fractional component exceeds decimals","underflow","parseFixed"),""===s&&(s="0");s.length<r.length-1;)s+="0";let a=Q.from(o),l=Q.from(s),u=a.mul(r).add(l);return i&&(u=u.mul(id)),u}class ig{constructor(e,t,r,i){e!==iu&&il.throwError("cannot use FixedFormat constructor; use FixedFormat.from",E.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=t,this.width=r,this.decimals=i,this.name=(t?"":"u")+"fixed"+String(r)+"x"+String(i),this._multiplier=iy(i),Object.freeze(this)}static from(e){if(e instanceof ig)return e;"number"==typeof e&&(e=`fixed128x${e}`);let t=!0,r=128,i=18;if("string"==typeof e){if("fixed"===e);else if("ufixed"===e)t=!1;else{let n=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);n||il.throwArgumentError("invalid fixed format","format",e),t="u"!==n[1],r=parseInt(n[2]),i=parseInt(n[3])}}else if(e){let o=(t,r,i)=>null==e[t]?i:(typeof e[t]!==r&&il.throwArgumentError("invalid fixed format ("+t+" not "+r+")","format."+t,e[t]),e[t]);t=o("signed","boolean",t),r=o("width","number",r),i=o("decimals","number",i)}return r%8&&il.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",r),i>80&&il.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",i),new ig(iu,t,r,i)}}class ib{constructor(e,t,r,i){il.checkNew(new.target,ib),e!==iu&&il.throwError("cannot use FixedNumber constructor; use FixedNumber.from",E.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=i,this._hex=t,this._value=r,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(e){this.format.name!==e.format.name&&il.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",e)}addUnsafe(e){this._checkFormat(e);let t=iv(this._value,this.format.decimals),r=iv(e._value,e.format.decimals);return ib.fromValue(t.add(r),this.format.decimals,this.format)}subUnsafe(e){this._checkFormat(e);let t=iv(this._value,this.format.decimals),r=iv(e._value,e.format.decimals);return ib.fromValue(t.sub(r),this.format.decimals,this.format)}mulUnsafe(e){this._checkFormat(e);let t=iv(this._value,this.format.decimals),r=iv(e._value,e.format.decimals);return ib.fromValue(t.mul(r).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(e){this._checkFormat(e);let t=iv(this._value,this.format.decimals),r=iv(e._value,e.format.decimals);return ib.fromValue(t.mul(this.format._multiplier).div(r),this.format.decimals,this.format)}floor(){let e=this.toString().split(".");1===e.length&&e.push("0");let t=ib.from(e[0],this.format),r=!e[1].match(/^(0*)$/);return this.isNegative()&&r&&(t=t.subUnsafe(iw.toFormat(t.format))),t}ceiling(){let e=this.toString().split(".");1===e.length&&e.push("0");let t=ib.from(e[0],this.format),r=!e[1].match(/^(0*)$/);return!this.isNegative()&&r&&(t=t.addUnsafe(iw.toFormat(t.format))),t}round(e){null==e&&(e=0);let t=this.toString().split(".");if(1===t.length&&t.push("0"),(e<0||e>80||e%1)&&il.throwArgumentError("invalid decimal count","decimals",e),t[1].length<=e)return this;let r=ib.from("1"+ip.substring(0,e),this.format),i=i_.toFormat(this.format);return this.mulUnsafe(r).addUnsafe(i).floor().divUnsafe(r)}isZero(){return"0.0"===this._value||"0"===this._value}isNegative(){return"-"===this._value[0]}toString(){return this._value}toHexString(e){return null==e?this._hex:(e%8&&il.throwArgumentError("invalid byte width","width",e),F(Q.from(this._hex).fromTwos(this.format.width).toTwos(e).toHexString(),e/8))}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return ib.fromString(this._value,e)}static fromValue(e,t,r){return null!=r||null==t||function(e){return null!=e&&(Q.isBigNumber(e)||"number"==typeof e&&e%1==0||"string"==typeof e&&!!e.match(/^-?[0-9]+$/)||I(e)||"bigint"==typeof e||O(e))}(t)||(r=t,t=null),null==t&&(t=0),null==r&&(r="fixed"),ib.fromString(im(e,t),ig.from(r))}static fromString(e,t){null==t&&(t="fixed");let r=ig.from(t),i=iv(e,r.decimals);!r.signed&&i.lt(ic)&&ih("unsigned value cannot be negative","overflow","value",e);let n=null;n=r.signed?i.toTwos(r.width).toHexString():F(n=i.toHexString(),r.width/8);let o=im(i,r.decimals);return new ib(iu,n,o,r)}static fromBytes(e,t){null==t&&(t="fixed");let r=ig.from(t);if(T(e).length>r.width/8)throw Error("overflow");let i=Q.from(e);r.signed&&(i=i.fromTwos(r.width));let n=i.toTwos((r.signed?0:1)+r.width).toHexString(),o=im(i,r.decimals);return new ib(iu,n,o,r)}static from(e,t){if("string"==typeof e)return ib.fromString(e,t);if(O(e))return ib.fromBytes(e,t);try{return ib.fromValue(e,0,t)}catch(r){if(r.code!==E.errors.INVALID_ARGUMENT)throw r}return il.throwArgumentError("invalid FixedNumber value","value",e)}static isFixedNumber(e){return!(!e||!e._isFixedNumber)}}let iw=ib.from(1),i_=ib.from("0.5");function iS(e){return"string"==typeof e&&(e=eW(e)),eE(R([eW("\x19Ethereum Signed Message:\n"),eW(String(e.length)),e]))}let iE="hash/5.5.0",ik=new E(iE),iN=new Uint8Array(32);iN.fill(0);let iA=Q.from(-1),iP=Q.from(0),ix=Q.from(1),iO=Q.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),iT=F(ix.toHexString(),32),iR=F(iP.toHexString(),32),iB={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},iC=["name","version","chainId","verifyingContract","salt"];function iI(e){return function(t){return"string"!=typeof t&&ik.throwArgumentError(`invalid domain value for ${JSON.stringify(e)}`,`domain.${e}`,t),t}}let iM={name:iI("name"),version:iI("version"),chainId:function(e){try{return Q.from(e).toString()}catch(t){}return ik.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",e)},verifyingContract:function(e){try{return ej(e).toLowerCase()}catch(t){}return ik.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){try{let t=T(e);if(32!==t.length)throw Error("bad length");return U(t)}catch(r){}return ik.throwArgumentError('invalid domain value "salt"',"domain.salt",e)}};function iU(e){{let t=e.match(/^(u?)int(\d*)$/);if(t){let r=""===t[1],i=parseInt(t[2]||"256");(i%8!=0||i>256||t[2]&&t[2]!==String(i))&&ik.throwArgumentError("invalid numeric width","type",e);let n=iO.mask(r?i-1:i),o=r?n.add(ix).mul(iA):iP;return function(t){let r=Q.from(t);return(r.lt(o)||r.gt(n))&&ik.throwArgumentError(`value out-of-bounds for ${e}`,"value",t),F(r.toTwos(256).toHexString(),32)}}}{let s=e.match(/^bytes(\d+)$/);if(s){let a=parseInt(s[1]);return(0===a||a>32||s[1]!==String(a))&&ik.throwArgumentError("invalid bytes width","type",e),function(t){return T(t).length!==a&&ik.throwArgumentError(`invalid length for ${e}`,"value",t),function(e){let t=T(e),r=t.length%32;return r?j([t,iN.slice(r)]):U(t)}(t)}}}switch(e){case"address":return function(e){return F(ej(e),32)};case"bool":return function(e){return e?iT:iR};case"bytes":return function(e){return eE(e)};case"string":return function(e){return e0(e)}}return null}function iK(e,t){return`${e}(${t.map(({name:e,type:t})=>t+" "+e).join(",")})`}class iD{constructor(e){eo(this,"types",Object.freeze(ef(e))),eo(this,"_encoderCache",{}),eo(this,"_types",{});let t={},r={},i={};for(let n in Object.keys(e).forEach(e=>{t[e]={},r[e]=[],i[e]={}}),e){let o={};e[n].forEach(i=>{o[i.name]&&ik.throwArgumentError(`duplicate variable name ${JSON.stringify(i.name)} in ${JSON.stringify(n)}`,"types",e),o[i.name]=!0;let s=i.type.match(/^([^\x5b]*)(\x5b|$)/)[1];s===n&&ik.throwArgumentError(`circular type reference to ${JSON.stringify(s)}`,"types",e),iU(s)||(r[s]||ik.throwArgumentError(`unknown type ${JSON.stringify(s)}`,"types",e),r[s].push(n),t[n][s]=!0)})}let s=Object.keys(r).filter(e=>0===r[e].length);for(let a in 0===s.length?ik.throwArgumentError("missing primary type","types",e):s.length>1&&ik.throwArgumentError(`ambiguous primary types or unused types: ${s.map(e=>JSON.stringify(e)).join(", ")}`,"types",e),eo(this,"primaryType",s[0]),function n(o,s){s[o]&&ik.throwArgumentError(`circular type reference to ${JSON.stringify(o)}`,"types",e),s[o]=!0,Object.keys(t[o]).forEach(e=>{r[e]&&(n(e,s),Object.keys(s).forEach(t=>{i[t][e]=!0}))}),delete s[o]}(this.primaryType,{}),i){let l=Object.keys(i[a]);l.sort(),this._types[a]=iK(a,e[a])+l.map(t=>iK(t,e[t])).join("")}}getEncoder(e){let t=this._encoderCache[e];return t||(t=this._encoderCache[e]=this._getEncoder(e)),t}_getEncoder(e){{let t=iU(e);if(t)return t}let r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){let i=r[1],n=this.getEncoder(i),o=parseInt(r[3]);return e=>{o>=0&&e.length!==o&&ik.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",e);let t=e.map(n);return this._types[i]&&(t=t.map(eE)),eE(j(t))}}let s=this.types[e];if(s){let a=e0(this._types[e]);return e=>{let t=s.map(({name:t,type:r})=>{let i=this.getEncoder(r)(e[t]);return this._types[r]?eE(i):i});return t.unshift(a),j(t)}}return ik.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){let t=this._types[e];return t||ik.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return eE(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,r){if(iU(e))return r(e,t);let i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){let n=i[1],o=parseInt(i[3]);return o>=0&&t.length!==o&&ik.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",t),t.map(e=>this._visit(n,e,r))}let s=this.types[e];return s?s.reduce((e,{name:i,type:n})=>(e[i]=this._visit(n,t[i],r),e),{}):ik.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new iD(e)}static getPrimaryType(e){return iD.from(e).primaryType}static hashStruct(e,t,r){return iD.from(t).hashStruct(e,r)}static hashDomain(e){let t=[];for(let r in e){let i=iB[r];i||ik.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(r)}`,"domain",e),t.push({name:r,type:i})}return t.sort((e,t)=>iC.indexOf(e.name)-iC.indexOf(t.name)),iD.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,r){return j(["0x1901",iD.hashDomain(e),iD.from(t).hash(r)])}static hash(e,t,r){return eE(iD.encode(e,t,r))}static resolveNames(e,t,r,i){var n,o,s;return n=this,s=function*(){e=eu(e);let n={};e.verifyingContract&&!I(e.verifyingContract,20)&&(n[e.verifyingContract]="0x");let o=iD.from(t);for(let s in o.visit(r,(e,t)=>("address"!==e||I(t,20)||(n[t]="0x"),t)),n)n[s]=yield i(s);return e.verifyingContract&&n[e.verifyingContract]&&(e.verifyingContract=n[e.verifyingContract]),{domain:e,value:r=o.visit(r,(e,t)=>"address"===e&&n[t]?n[t]:t)}},new(o=void 0,o=Promise)(function(e,t){function r(e){try{a(s.next(e))}catch(r){t(r)}}function i(e){try{a(s.throw(e))}catch(r){t(r)}}function a(t){var n;t.done?e(t.value):((n=t.value)instanceof o?n:new o(function(e){e(n)})).then(r,i)}a((s=s.apply(n,[])).next())})}static getPayload(e,t,r){iD.hashDomain(e);let i={},n=[];iC.forEach(t=>{let r=e[t];null!=r&&(i[t]=iM[t](r),n.push({name:t,type:iB[t]}))});let o=iD.from(t),s=eu(t);return s.EIP712Domain?ik.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",t):s.EIP712Domain=n,o.encode(r),{types:s,domain:i,primaryType:o.primaryType,message:o.visit(r,(e,t)=>{if(e.match(/^bytes(\d*)/))return U(T(t));if(e.match(/^u?int/))return Q.from(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return"string"!=typeof t&&ik.throwArgumentError("invalid string","value",t),t}return ik.throwArgumentError("unsupported type","type",e)})}}}class ij{constructor(e){eo(this,"alphabet",e),eo(this,"base",e.length),eo(this,"_alphabetMap",{}),eo(this,"_leader",e.charAt(0));for(let t=0;t<e.length;t++)this._alphabetMap[e.charAt(t)]=t}encode(e){let t=T(e);if(0===t.length)return"";let r=[0];for(let i=0;i<t.length;++i){let n=t[i];for(let o=0;o<r.length;++o)n+=r[o]<<8,r[o]=n%this.base,n=n/this.base|0;for(;n>0;)r.push(n%this.base),n=n/this.base|0}let s="";for(let a=0;0===t[a]&&a<t.length-1;++a)s+=this._leader;for(let l=r.length-1;l>=0;--l)s+=this.alphabet[r[l]];return s}decode(e){if("string"!=typeof e)throw TypeError("Expected String");let t=[];if(0===e.length)return new Uint8Array(t);t.push(0);for(let r=0;r<e.length;r++){let i=this._alphabetMap[e[r]];if(void 0===i)throw Error("Non-base"+this.base+" character");let n=i;for(let o=0;o<t.length;++o)n+=t[o]*this.base,t[o]=255&n,n>>=8;for(;n>0;)t.push(255&n),n>>=8}for(let s=0;e[s]===this._leader&&s<e.length-1;++s)t.push(0);return T(new Uint8Array(t.reverse()))}}new ij("abcdefghijklmnopqrstuvwxyz234567");let iL=new ij("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");!function(e){e.sha256="sha256",e.sha512="sha512"}(u||(u={}));let iJ=new E("sha2/5.5.0");function iF(e){return"0x"+t5().ripemd160().update(T(e)).digest("hex")}function iq(e){return"0x"+t5().sha256().update(T(e)).digest("hex")}function iV(e){return"0x"+t5().sha512().update(T(e)).digest("hex")}function iz(e,t,r){return u[e]||iJ.throwError("unsupported algorithm "+e,E.errors.UNSUPPORTED_OPERATION,{operation:"hmac",algorithm:e}),"0x"+t5().hmac(t5()[e],T(t)).update(T(r)).digest("hex")}function iG(e,t,r,i,n){let o,s,a;e=T(e),t=T(t);let l=1,u=new Uint8Array(i),c=new Uint8Array(t.length+4);c.set(t);for(let d=1;d<=l;d++){c[t.length]=d>>24&255,c[t.length+1]=d>>16&255,c[t.length+2]=d>>8&255,c[t.length+3]=255&d;let h=T(iz(n,e,c));o||(o=h.length,a=new Uint8Array(o),l=Math.ceil(i/o),s=i-(l-1)*o),a.set(h);for(let f=1;f<r;f++){h=T(iz(n,e,h));for(let p=0;p<o;p++)a[p]^=h[p]}let y=(d-1)*o,m=d===l?s:o;u.set(T(a).slice(0,m),y)}return U(u)}let iH=new E("wordlists/5.5.0");class iW{constructor(e){iH.checkAbstract(new.target,iW),eo(this,"locale",e)}split(e){return e.toLowerCase().split(/ +/g)}join(e){return e.join(" ")}static check(e){let t=[];for(let r=0;r<2048;r++){let i=e.getWord(r);if(r!==e.getWordIndex(i))return"0x";t.push(i)}return e0(t.join("\n")+"\n")}static register(e,t){t||(t=e.locale)}}let iZ=null;function i$(e){if(null==iZ&&(iZ="AbandonAbilityAbleAboutAboveAbsentAbsorbAbstractAbsurdAbuseAccessAccidentAccountAccuseAchieveAcidAcousticAcquireAcrossActActionActorActressActualAdaptAddAddictAddressAdjustAdmitAdultAdvanceAdviceAerobicAffairAffordAfraidAgainAgeAgentAgreeAheadAimAirAirportAisleAlarmAlbumAlcoholAlertAlienAllAlleyAllowAlmostAloneAlphaAlreadyAlsoAlterAlwaysAmateurAmazingAmongAmountAmusedAnalystAnchorAncientAngerAngleAngryAnimalAnkleAnnounceAnnualAnotherAnswerAntennaAntiqueAnxietyAnyApartApologyAppearAppleApproveAprilArchArcticAreaArenaArgueArmArmedArmorArmyAroundArrangeArrestArriveArrowArtArtefactArtistArtworkAskAspectAssaultAssetAssistAssumeAsthmaAthleteAtomAttackAttendAttitudeAttractAuctionAuditAugustAuntAuthorAutoAutumnAverageAvocadoAvoidAwakeAwareAwayAwesomeAwfulAwkwardAxisBabyBachelorBaconBadgeBagBalanceBalconyBallBambooBananaBannerBarBarelyBargainBarrelBaseBasicBasketBattleBeachBeanBeautyBecauseBecomeBeefBeforeBeginBehaveBehindBelieveBelowBeltBenchBenefitBestBetrayBetterBetweenBeyondBicycleBidBikeBindBiologyBirdBirthBitterBlackBladeBlameBlanketBlastBleakBlessBlindBloodBlossomBlouseBlueBlurBlushBoardBoatBodyBoilBombBoneBonusBookBoostBorderBoringBorrowBossBottomBounceBoxBoyBracketBrainBrandBrassBraveBreadBreezeBrickBridgeBriefBrightBringBriskBroccoliBrokenBronzeBroomBrotherBrownBrushBubbleBuddyBudgetBuffaloBuildBulbBulkBulletBundleBunkerBurdenBurgerBurstBusBusinessBusyButterBuyerBuzzCabbageCabinCableCactusCageCakeCallCalmCameraCampCanCanalCancelCandyCannonCanoeCanvasCanyonCapableCapitalCaptainCarCarbonCardCargoCarpetCarryCartCaseCashCasinoCastleCasualCatCatalogCatchCategoryCattleCaughtCauseCautionCaveCeilingCeleryCementCensusCenturyCerealCertainChairChalkChampionChangeChaosChapterChargeChaseChatCheapCheckCheeseChefCherryChestChickenChiefChildChimneyChoiceChooseChronicChuckleChunkChurnCigarCinnamonCircleCitizenCityCivilClaimClapClarifyClawClayCleanClerkCleverClickClientCliffClimbClinicClipClockClogCloseClothCloudClownClubClumpClusterClutchCoachCoastCoconutCodeCoffeeCoilCoinCollectColorColumnCombineComeComfortComicCommonCompanyConcertConductConfirmCongressConnectConsiderControlConvinceCookCoolCopperCopyCoralCoreCornCorrectCostCottonCouchCountryCoupleCourseCousinCoverCoyoteCrackCradleCraftCramCraneCrashCraterCrawlCrazyCreamCreditCreekCrewCricketCrimeCrispCriticCropCrossCrouchCrowdCrucialCruelCruiseCrumbleCrunchCrushCryCrystalCubeCultureCupCupboardCuriousCurrentCurtainCurveCushionCustomCuteCycleDadDamageDampDanceDangerDaringDashDaughterDawnDayDealDebateDebrisDecadeDecemberDecideDeclineDecorateDecreaseDeerDefenseDefineDefyDegreeDelayDeliverDemandDemiseDenialDentistDenyDepartDependDepositDepthDeputyDeriveDescribeDesertDesignDeskDespairDestroyDetailDetectDevelopDeviceDevoteDiagramDialDiamondDiaryDiceDieselDietDifferDigitalDignityDilemmaDinnerDinosaurDirectDirtDisagreeDiscoverDiseaseDishDismissDisorderDisplayDistanceDivertDivideDivorceDizzyDoctorDocumentDogDollDolphinDomainDonateDonkeyDonorDoorDoseDoubleDoveDraftDragonDramaDrasticDrawDreamDressDriftDrillDrinkDripDriveDropDrumDryDuckDumbDuneDuringDustDutchDutyDwarfDynamicEagerEagleEarlyEarnEarthEasilyEastEasyEchoEcologyEconomyEdgeEditEducateEffortEggEightEitherElbowElderElectricElegantElementElephantElevatorEliteElseEmbarkEmbodyEmbraceEmergeEmotionEmployEmpowerEmptyEnableEnactEndEndlessEndorseEnemyEnergyEnforceEngageEngineEnhanceEnjoyEnlistEnoughEnrichEnrollEnsureEnterEntireEntryEnvelopeEpisodeEqualEquipEraEraseErodeErosionErrorEruptEscapeEssayEssenceEstateEternalEthicsEvidenceEvilEvokeEvolveExactExampleExcessExchangeExciteExcludeExcuseExecuteExerciseExhaustExhibitExileExistExitExoticExpandExpectExpireExplainExposeExpressExtendExtraEyeEyebrowFabricFaceFacultyFadeFaintFaithFallFalseFameFamilyFamousFanFancyFantasyFarmFashionFatFatalFatherFatigueFaultFavoriteFeatureFebruaryFederalFeeFeedFeelFemaleFenceFestivalFetchFeverFewFiberFictionFieldFigureFileFilmFilterFinalFindFineFingerFinishFireFirmFirstFiscalFishFitFitnessFixFlagFlameFlashFlatFlavorFleeFlightFlipFloatFlockFloorFlowerFluidFlushFlyFoamFocusFogFoilFoldFollowFoodFootForceForestForgetForkFortuneForumForwardFossilFosterFoundFoxFragileFrameFrequentFreshFriendFringeFrogFrontFrostFrownFrozenFruitFuelFunFunnyFurnaceFuryFutureGadgetGainGalaxyGalleryGameGapGarageGarbageGardenGarlicGarmentGasGaspGateGatherGaugeGazeGeneralGeniusGenreGentleGenuineGestureGhostGiantGiftGiggleGingerGiraffeGirlGiveGladGlanceGlareGlassGlideGlimpseGlobeGloomGloryGloveGlowGlueGoatGoddessGoldGoodGooseGorillaGospelGossipGovernGownGrabGraceGrainGrantGrapeGrassGravityGreatGreenGridGriefGritGroceryGroupGrowGruntGuardGuessGuideGuiltGuitarGunGymHabitHairHalfHammerHamsterHandHappyHarborHardHarshHarvestHatHaveHawkHazardHeadHealthHeartHeavyHedgehogHeightHelloHelmetHelpHenHeroHiddenHighHillHintHipHireHistoryHobbyHockeyHoldHoleHolidayHollowHomeHoneyHoodHopeHornHorrorHorseHospitalHostHotelHourHoverHubHugeHumanHumbleHumorHundredHungryHuntHurdleHurryHurtHusbandHybridIceIconIdeaIdentifyIdleIgnoreIllIllegalIllnessImageImitateImmenseImmuneImpactImposeImproveImpulseInchIncludeIncomeIncreaseIndexIndicateIndoorIndustryInfantInflictInformInhaleInheritInitialInjectInjuryInmateInnerInnocentInputInquiryInsaneInsectInsideInspireInstallIntactInterestIntoInvestInviteInvolveIronIslandIsolateIssueItemIvoryJacketJaguarJarJazzJealousJeansJellyJewelJobJoinJokeJourneyJoyJudgeJuiceJumpJungleJuniorJunkJustKangarooKeenKeepKetchupKeyKickKidKidneyKindKingdomKissKitKitchenKiteKittenKiwiKneeKnifeKnockKnowLabLabelLaborLadderLadyLakeLampLanguageLaptopLargeLaterLatinLaughLaundryLavaLawLawnLawsuitLayerLazyLeaderLeafLearnLeaveLectureLeftLegLegalLegendLeisureLemonLendLengthLensLeopardLessonLetterLevelLiarLibertyLibraryLicenseLifeLiftLightLikeLimbLimitLinkLionLiquidListLittleLiveLizardLoadLoanLobsterLocalLockLogicLonelyLongLoopLotteryLoudLoungeLoveLoyalLuckyLuggageLumberLunarLunchLuxuryLyricsMachineMadMagicMagnetMaidMailMainMajorMakeMammalManManageMandateMangoMansionManualMapleMarbleMarchMarginMarineMarketMarriageMaskMassMasterMatchMaterialMathMatrixMatterMaximumMazeMeadowMeanMeasureMeatMechanicMedalMediaMelodyMeltMemberMemoryMentionMenuMercyMergeMeritMerryMeshMessageMetalMethodMiddleMidnightMilkMillionMimicMindMinimumMinorMinuteMiracleMirrorMiseryMissMistakeMixMixedMixtureMobileModelModifyMomMomentMonitorMonkeyMonsterMonthMoonMoralMoreMorningMosquitoMotherMotionMotorMountainMouseMoveMovieMuchMuffinMuleMultiplyMuscleMuseumMushroomMusicMustMutualMyselfMysteryMythNaiveNameNapkinNarrowNastyNationNatureNearNeckNeedNegativeNeglectNeitherNephewNerveNestNetNetworkNeutralNeverNewsNextNiceNightNobleNoiseNomineeNoodleNormalNorthNoseNotableNoteNothingNoticeNovelNowNuclearNumberNurseNutOakObeyObjectObligeObscureObserveObtainObviousOccurOceanOctoberOdorOffOfferOfficeOftenOilOkayOldOliveOlympicOmitOnceOneOnionOnlineOnlyOpenOperaOpinionOpposeOptionOrangeOrbitOrchardOrderOrdinaryOrganOrientOriginalOrphanOstrichOtherOutdoorOuterOutputOutsideOvalOvenOverOwnOwnerOxygenOysterOzonePactPaddlePagePairPalacePalmPandaPanelPanicPantherPaperParadeParentParkParrotPartyPassPatchPathPatientPatrolPatternPausePavePaymentPeacePeanutPearPeasantPelicanPenPenaltyPencilPeoplePepperPerfectPermitPersonPetPhonePhotoPhrasePhysicalPianoPicnicPicturePiecePigPigeonPillPilotPinkPioneerPipePistolPitchPizzaPlacePlanetPlasticPlatePlayPleasePledgePluckPlugPlungePoemPoetPointPolarPolePolicePondPonyPoolPopularPortionPositionPossiblePostPotatoPotteryPovertyPowderPowerPracticePraisePredictPreferPreparePresentPrettyPreventPricePridePrimaryPrintPriorityPrisonPrivatePrizeProblemProcessProduceProfitProgramProjectPromoteProofPropertyProsperProtectProudProvidePublicPuddingPullPulpPulsePumpkinPunchPupilPuppyPurchasePurityPurposePursePushPutPuzzlePyramidQualityQuantumQuarterQuestionQuickQuitQuizQuoteRabbitRaccoonRaceRackRadarRadioRailRainRaiseRallyRampRanchRandomRangeRapidRareRateRatherRavenRawRazorReadyRealReasonRebelRebuildRecallReceiveRecipeRecordRecycleReduceReflectReformRefuseRegionRegretRegularRejectRelaxReleaseReliefRelyRemainRememberRemindRemoveRenderRenewRentReopenRepairRepeatReplaceReportRequireRescueResembleResistResourceResponseResultRetireRetreatReturnReunionRevealReviewRewardRhythmRibRibbonRiceRichRideRidgeRifleRightRigidRingRiotRippleRiskRitualRivalRiverRoadRoastRobotRobustRocketRomanceRoofRookieRoomRoseRotateRoughRoundRouteRoyalRubberRudeRugRuleRunRunwayRuralSadSaddleSadnessSafeSailSaladSalmonSalonSaltSaluteSameSampleSandSatisfySatoshiSauceSausageSaveSayScaleScanScareScatterSceneSchemeSchoolScienceScissorsScorpionScoutScrapScreenScriptScrubSeaSearchSeasonSeatSecondSecretSectionSecuritySeedSeekSegmentSelectSellSeminarSeniorSenseSentenceSeriesServiceSessionSettleSetupSevenShadowShaftShallowShareShedShellSheriffShieldShiftShineShipShiverShockShoeShootShopShortShoulderShoveShrimpShrugShuffleShySiblingSickSideSiegeSightSignSilentSilkSillySilverSimilarSimpleSinceSingSirenSisterSituateSixSizeSkateSketchSkiSkillSkinSkirtSkullSlabSlamSleepSlenderSliceSlideSlightSlimSloganSlotSlowSlushSmallSmartSmileSmokeSmoothSnackSnakeSnapSniffSnowSoapSoccerSocialSockSodaSoftSolarSoldierSolidSolutionSolveSomeoneSongSoonSorrySortSoulSoundSoupSourceSouthSpaceSpareSpatialSpawnSpeakSpecialSpeedSpellSpendSphereSpiceSpiderSpikeSpinSpiritSplitSpoilSponsorSpoonSportSpotSpraySpreadSpringSpySquareSqueezeSquirrelStableStadiumStaffStageStairsStampStandStartStateStaySteakSteelStemStepStereoStickStillStingStockStomachStoneStoolStoryStoveStrategyStreetStrikeStrongStruggleStudentStuffStumbleStyleSubjectSubmitSubwaySuccessSuchSuddenSufferSugarSuggestSuitSummerSunSunnySunsetSuperSupplySupremeSureSurfaceSurgeSurpriseSurroundSurveySuspectSustainSwallowSwampSwapSwarmSwearSweetSwiftSwimSwingSwitchSwordSymbolSymptomSyrupSystemTableTackleTagTailTalentTalkTankTapeTargetTaskTasteTattooTaxiTeachTeamTellTenTenantTennisTentTermTestTextThankThatThemeThenTheoryThereTheyThingThisThoughtThreeThriveThrowThumbThunderTicketTideTigerTiltTimberTimeTinyTipTiredTissueTitleToastTobaccoTodayToddlerToeTogetherToiletTokenTomatoTomorrowToneTongueTonightToolToothTopTopicToppleTorchTornadoTortoiseTossTotalTouristTowardTowerTownToyTrackTradeTrafficTragicTrainTransferTrapTrashTravelTrayTreatTreeTrendTrialTribeTrickTriggerTrimTripTrophyTroubleTruckTrueTrulyTrumpetTrustTruthTryTubeTuitionTumbleTunaTunnelTurkeyTurnTurtleTwelveTwentyTwiceTwinTwistTwoTypeTypicalUglyUmbrellaUnableUnawareUncleUncoverUnderUndoUnfairUnfoldUnhappyUniformUniqueUnitUniverseUnknownUnlockUntilUnusualUnveilUpdateUpgradeUpholdUponUpperUpsetUrbanUrgeUsageUseUsedUsefulUselessUsualUtilityVacantVacuumVagueValidValleyValveVanVanishVaporVariousVastVaultVehicleVelvetVendorVentureVenueVerbVerifyVersionVeryVesselVeteranViableVibrantViciousVictoryVideoViewVillageVintageViolinVirtualVirusVisaVisitVisualVitalVividVocalVoiceVoidVolcanoVolumeVoteVoyageWageWagonWaitWalkWallWalnutWantWarfareWarmWarriorWashWaspWasteWaterWaveWayWealthWeaponWearWeaselWeatherWebWeddingWeekendWeirdWelcomeWestWetWhaleWhatWheatWheelWhenWhereWhipWhisperWideWidthWifeWildWillWinWindowWineWingWinkWinnerWinterWireWisdomWiseWishWitnessWolfWomanWonderWoodWoolWordWorkWorldWorryWorthWrapWreckWrestleWristWriteWrongYardYearYellowYouYoungYouthZebraZeroZoneZoo".replace(/([A-Z])/g," $1").toLowerCase().substring(1).split(" "),"0x3c8acc1e7b08d8e76f9fda015ef48dc8c710a73cb7e0f77b2c18a9b5a7adde60"!==iW.check(e)))throw iZ=null,Error("BIP39 Wordlist for en (English) FAILED")}let iX=new class extends iW{constructor(){super("en")}getWord(e){return i$(this),iZ[e]}getWordIndex(e){return i$(this),iZ.indexOf(e)}};iW.register(iX);let iY={en:iX},iQ=new E("hdnode/5.5.0"),i0=Q.from("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),i1=eW("Bitcoin seed"),i2=2147483648;function i3(e){return(1<<e)-1<<8-e}function i6(e){return F(U(e),32)}function i5(e){return iL.encode(R([e,D(iq(iq(e)),0,4)]))}function i8(e){if(null==e)return iY.en;if("string"==typeof e){let t=iY[e];return null==t&&iQ.throwArgumentError("unknown locale","wordlist",e),t}return e}let i4={},i7="m/44'/60'/0'/0/0";class i9{constructor(e,t,r,i,n,o,s,a){if(iQ.checkNew(new.target,i9),e!==i4)throw Error("HDNode constructor cannot be called directly");if(t){let l=new rM(t);eo(this,"privateKey",l.privateKey),eo(this,"publicKey",l.compressedPublicKey)}else eo(this,"privateKey",null),eo(this,"publicKey",U(r));eo(this,"parentFingerprint",i),eo(this,"fingerprint",D(iF(iq(this.publicKey)),0,4)),eo(this,"address",rq(this.publicKey)),eo(this,"chainCode",n),eo(this,"index",o),eo(this,"depth",s),null==a?(eo(this,"mnemonic",null),eo(this,"path",null)):"string"==typeof a?(eo(this,"mnemonic",null),eo(this,"path",a)):(eo(this,"mnemonic",a),eo(this,"path",a.path))}get extendedKey(){if(this.depth>=256)throw Error("Depth too large!");return i5(R([null!=this.privateKey?"0x0488ADE4":"0x0488B21E",U(this.depth),this.parentFingerprint,F(U(this.index),4),this.chainCode,null!=this.privateKey?R(["0x00",this.privateKey]):this.publicKey]))}neuter(){return new i9(i4,null,this.publicKey,this.parentFingerprint,this.chainCode,this.index,this.depth,this.path)}_derive(e){if(e>4294967295)throw Error("invalid index - "+String(e));let t=this.path;t&&(t+="/"+(2147483647&e));let r=new Uint8Array(37);if(e&i2){if(!this.privateKey)throw Error("cannot derive child of neutered node");r.set(T(this.privateKey),1),t&&(t+="'")}else r.set(T(this.publicKey));for(let i=24;i>=0;i-=8)r[33+(i>>3)]=e>>24-i&255;let n=T(iz(u.sha512,this.chainCode,r)),o=n.slice(0,32),s=n.slice(32),a=null,l=null;this.privateKey?a=i6(Q.from(o).add(this.privateKey).mod(i0)):l=new rM(U(o))._addPoint(this.publicKey);let c=t,d=this.mnemonic;return d&&(c=Object.freeze({phrase:d.phrase,path:t,locale:d.locale||"en"})),new i9(i4,a,l,this.fingerprint,i6(s),e,this.depth+1,c)}derivePath(e){let t=e.split("/");if(0===t.length||"m"===t[0]&&0!==this.depth)throw Error("invalid path - "+e);"m"===t[0]&&t.shift();let r=this;for(let i=0;i<t.length;i++){let n=t[i];if(n.match(/^[0-9]+'$/)){let o=parseInt(n.substring(0,n.length-1));if(o>=i2)throw Error("invalid path index - "+n);r=r._derive(i2+o)}else{if(!n.match(/^[0-9]+$/))throw Error("invalid path component - "+n);{let s=parseInt(n);if(s>=i2)throw Error("invalid path index - "+n);r=r._derive(s)}}}return r}static _fromSeed(e,t){let r=T(e);if(r.length<16||r.length>64)throw Error("invalid seed");let i=T(iz(u.sha512,i1,r));return new i9(i4,i6(i.slice(0,32)),null,"0x00000000",i6(i.slice(32)),0,0,t)}static fromMnemonic(e,t,r){return e=nr(nt(e,r=i8(r)),r),i9._fromSeed(ne(e,t),{phrase:e,path:"m",locale:r.locale})}static fromSeed(e){return i9._fromSeed(e,null)}static fromExtendedKey(e){let t=iL.decode(e);82===t.length&&i5(t.slice(0,78))===e||iQ.throwArgumentError("invalid extended key","extendedKey","[REDACTED]");let r=t[4],i=U(t.slice(5,9)),n=parseInt(U(t.slice(9,13)).substring(2),16),o=U(t.slice(13,45)),s=t.slice(45,78);switch(U(t.slice(0,4))){case"0x0488b21e":case"0x043587cf":return new i9(i4,null,U(s),i,o,n,r,null);case"0x0488ade4":case"0x04358394 ":if(0!==s[0])break;return new i9(i4,U(s.slice(1)),null,i,o,n,r,null)}return iQ.throwArgumentError("invalid extended key","extendedKey","[REDACTED]")}}function ne(e,t){t||(t="");let r=eW("mnemonic"+t,s.NFKD);return iG(eW(e,s.NFKD),r,2048,64,"sha512")}function nt(e,t){t=i8(t),iQ.checkNormalize();let r=t.split(e);if(r.length%3!=0)throw Error("invalid mnemonic");let i=T(new Uint8Array(Math.ceil(11*r.length/8))),n=0;for(let o=0;o<r.length;o++){let s=t.getWordIndex(r[o].normalize("NFKD"));if(-1===s)throw Error("invalid mnemonic");for(let a=0;a<11;a++)s&1<<10-a&&(i[n>>3]|=1<<7-n%8),n++}let l=32*r.length/3,u=i3(r.length/3);if((T(iq(i.slice(0,l/8)))[0]&u)!=(i[i.length-1]&u))throw Error("invalid checksum");return U(i.slice(0,l/8))}function nr(e,t){if(t=i8(t),(e=T(e)).length%4!=0||e.length<16||e.length>32)throw Error("invalid entropy");let r=[0],i=11;for(let n=0;n<e.length;n++)i>8?(r[r.length-1]<<=8,r[r.length-1]|=e[n],i-=8):(r[r.length-1]<<=i,r[r.length-1]|=e[n]>>8-i,r.push(e[n]&(1<<8-i)-1),i+=3);let o=e.length/4,s=T(iq(e))[0]&i3(o);return r[r.length-1]<<=o,r[r.length-1]|=s>>8-o,t.join(r.map(e=>t.getWord(e)))}function ni(e,t){try{return nt(e,t),!0}catch(r){}return!1}function nn(e){return("number"!=typeof e||e<0||e>=i2||e%1)&&iQ.throwArgumentError("invalid account index","index",e),`m/44'/60'/${e}'/0/0`}let no=new E("random/5.5.1"),ns=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw Error("unable to locate global object")}(),na=ns.crypto||ns.msCrypto;function nl(e){(e<=0||e>1024||e%1||e!=e)&&no.throwArgumentError("invalid length","length",e);let t=new Uint8Array(e);return na.getRandomValues(t),T(t)}na&&na.getRandomValues||(no.warn("WARNING: Missing strong random number source"),na={getRandomValues:function(e){return no.throwError("no secure random source avaialble",E.errors.UNSUPPORTED_OPERATION,{operation:"crypto.getRandomValues"})}});var nu=r(8826),nc=r.n(nu);let nd="json-wallets/5.5.0";function nh(e){return"string"==typeof e&&"0x"!==e.substring(0,2)&&(e="0x"+e),T(e)}function nf(e,t){for(e=String(e);e.length<t;)e="0"+e;return e}function np(e){return"string"==typeof e?eW(e,s.NFKC):T(e)}function ny(e,t){let r=e,i=t.toLowerCase().split("/");for(let n=0;n<i.length;n++){let o=null;for(let s in r)if(s.toLowerCase()===i[n]){o=r[s];break}if(null===o)return null;r=o}return r}function nm(e){let t=T(e);t[6]=15&t[6]|64,t[8]=63&t[8]|128;let r=U(t);return[r.substring(2,10),r.substring(10,14),r.substring(14,18),r.substring(18,22),r.substring(22,34)].join("-")}let nv=new E(nd);class ng extends ep{isCrowdsaleAccount(e){return!(!e||!e._isCrowdsaleAccount)}}function nb(e,t){let r=JSON.parse(e);t=np(t);let i=ej(ny(r,"ethaddr")),n=nh(ny(r,"encseed"));n&&n.length%16==0||nv.throwArgumentError("invalid encseed","json",e);let o=T(iG(t,t,2e3,32,"sha256")).slice(0,16),s=n.slice(0,16),a=n.slice(16),l=new(nc()).ModeOfOperation.cbc(o,s),u=nc().padding.pkcs7.strip(T(l.decrypt(a))),c="";for(let d=0;d<u.length;d++)c+=String.fromCharCode(u[d]);let h=eE(eW(c));return new ng({_isCrowdsaleAccount:!0,address:i,privateKey:h})}function nw(e){let t=null;try{t=JSON.parse(e)}catch(r){return!1}return t.encseed&&t.ethaddr}function n_(e){let t=null;try{t=JSON.parse(e)}catch(r){return!1}return!(!t.version||parseInt(t.version)!==t.version||3!==parseInt(t.version))}function nS(e){if(nw(e))try{return ej(JSON.parse(e).ethaddr)}catch(t){return null}if(n_(e))try{return ej(JSON.parse(e).address)}catch(r){}return null}var nE=r(7635),nk=r.n(nE);let nN=new E(nd);function nA(e){return null!=e&&e.mnemonic&&e.mnemonic.phrase}class nP extends ep{isKeystoreAccount(e){return!(!e||!e._isKeystoreAccount)}}function nx(e,t){let r=nh(ny(e,"crypto/ciphertext"));if(U(eE(R([t.slice(16,32),r]))).substring(2)!==ny(e,"crypto/mac").toLowerCase())throw Error("invalid password");let i=function(e,t,r){if("aes-128-ctr"===ny(e,"crypto/cipher")){let i=nh(ny(e,"crypto/cipherparams/iv")),n=new(nc()).Counter(i);return T(new(nc()).ModeOfOperation.ctr(t,n).decrypt(r))}return null}(e,t.slice(0,16),r);i||nN.throwError("unsupported cipher",E.errors.UNSUPPORTED_OPERATION,{operation:"decrypt"});let n=t.slice(32,64),o=rq(i);if(e.address){let s=e.address.toLowerCase();if("0x"!==s.substring(0,2)&&(s="0x"+s),ej(s)!==o)throw Error("address mismatch")}let a={_isKeystoreAccount:!0,address:o,privateKey:U(i)};if("0.1"===ny(e,"x-ethers/version")){let l=nh(ny(e,"x-ethers/mnemonicCiphertext")),u=nh(ny(e,"x-ethers/mnemonicCounter")),c=new(nc()).Counter(u),d=new(nc()).ModeOfOperation.ctr(n,c),h=ny(e,"x-ethers/path")||i7,f=ny(e,"x-ethers/locale")||"en",p=T(d.decrypt(l));try{let y=nr(p,f),m=i9.fromMnemonic(y,null,f).derivePath(h);if(m.privateKey!=a.privateKey)throw Error("mnemonic mismatch");a.mnemonic=m.mnemonic}catch(v){if(v.code!==E.errors.INVALID_ARGUMENT||"wordlist"!==v.argument)throw v}}return new nP(a)}function nO(e,t,r,i,n){return T(iG(e,t,r,i,n))}function nT(e,t,r,i,n){return Promise.resolve(nO(e,t,r,i,n))}function nR(e,t,r,i,n){let o=np(t),s=ny(e,"crypto/kdf");if(s&&"string"==typeof s){let a=function(e,t){return nN.throwArgumentError("invalid key-derivation function parameters",e,t)};if("scrypt"===s.toLowerCase()){let l=nh(ny(e,"crypto/kdfparams/salt")),u=parseInt(ny(e,"crypto/kdfparams/n")),c=parseInt(ny(e,"crypto/kdfparams/r")),d=parseInt(ny(e,"crypto/kdfparams/p"));u&&c&&d||a("kdf",s),0!=(u&u-1)&&a("N",u);let h=parseInt(ny(e,"crypto/kdfparams/dklen"));return 32!==h&&a("dklen",h),i(o,l,u,c,d,64,n)}if("pbkdf2"===s.toLowerCase()){let f=nh(ny(e,"crypto/kdfparams/salt")),p=null,y=ny(e,"crypto/kdfparams/prf");"hmac-sha256"===y?p="sha256":"hmac-sha512"===y?p="sha512":a("prf",y);let m=parseInt(ny(e,"crypto/kdfparams/c")),v=parseInt(ny(e,"crypto/kdfparams/dklen"));return 32!==v&&a("dklen",v),r(o,f,m,v,p)}}return nN.throwArgumentError("unsupported key-derivation function","kdf",s)}var nB=function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};let nC=new E("wallet/5.5.0");class nI extends t2{constructor(e,t){var r;if(nC.checkNew(new.target,nI),super(),null!=(r=e)&&I(r.privateKey,32)&&null!=r.address){let i=new rM(e.privateKey);if(eo(this,"_signingKey",()=>i),eo(this,"address",rq(this.publicKey)),this.address!==ej(e.address)&&nC.throwArgumentError("privateKey/address mismatch","privateKey","[REDACTED]"),function(e){let t=e.mnemonic;return t&&t.phrase}(e)){let n=e.mnemonic;eo(this,"_mnemonic",()=>({phrase:n.phrase,path:n.path||i7,locale:n.locale||"en"}));let o=this.mnemonic;rq(i9.fromMnemonic(o.phrase,null,o.locale).derivePath(o.path).privateKey)!==this.address&&nC.throwArgumentError("mnemonic/address mismatch","privateKey","[REDACTED]")}else eo(this,"_mnemonic",()=>null)}else{if(rM.isSigningKey(e))"secp256k1"!==e.curve&&nC.throwArgumentError("unsupported curve; must be secp256k1","privateKey","[REDACTED]"),eo(this,"_signingKey",()=>e);else{"string"==typeof e&&e.match(/^[0-9a-f]*$/i)&&64===e.length&&(e="0x"+e);let s=new rM(e);eo(this,"_signingKey",()=>s)}eo(this,"_mnemonic",()=>null),eo(this,"address",rq(this.publicKey))}t&&!tX.isProvider(t)&&nC.throwArgumentError("invalid provider","provider",t),eo(this,"provider",t||null)}get mnemonic(){return this._mnemonic()}get privateKey(){return this._signingKey().privateKey}get publicKey(){return this._signingKey().publicKey}getAddress(){return Promise.resolve(this.address)}connect(e){return new nI(this,e)}signTransaction(e){return ea(e).then(t=>{null!=t.from&&(ej(t.from)!==this.address&&nC.throwArgumentError("transaction from address mismatch","transaction.from",e.from),delete t.from);let r=this._signingKey().signDigest(eE(rX(t)));return rX(t,r)})}signMessage(e){return nB(this,void 0,void 0,function*(){return V(this._signingKey().signDigest(iS(e)))})}_signTypedData(e,t,r){return nB(this,void 0,void 0,function*(){let i=yield iD.resolveNames(e,t,r,e=>(null==this.provider&&nC.throwError("cannot resolve ENS names without a provider",E.errors.UNSUPPORTED_OPERATION,{operation:"resolveName",value:e}),this.provider.resolveName(e)));return V(this._signingKey().signDigest(iD.hash(i.domain,t,i.value)))})}encrypt(e,t,r){if("function"!=typeof t||r||(r=t,t={}),r&&"function"!=typeof r)throw Error("invalid callback");return t||(t={}),function(e,t,r,i){try{if(ej(e.address)!==rq(e.privateKey))throw Error("address/privateKey mismatch");if(nA(e)){let n=e.mnemonic;if(i9.fromMnemonic(n.phrase,null,n.locale).derivePath(n.path||i7).privateKey!=e.privateKey)throw Error("mnemonic mismatch")}}catch(o){return Promise.reject(o)}"function"!=typeof r||i||(i=r,r={}),r||(r={});let s=T(e.privateKey),a=np(t),l=null,u=null,c=null;if(nA(e)){let d=e.mnemonic;l=T(nt(d.phrase,d.locale||"en")),u=d.path||i7,c=d.locale||"en"}let h=r.client;h||(h="ethers.js");let f=null;f=r.salt?T(r.salt):nl(32);let p=null;if(r.iv){if(16!==(p=T(r.iv)).length)throw Error("invalid iv")}else p=nl(16);let y=null;if(r.uuid){if(16!==(y=T(r.uuid)).length)throw Error("invalid uuid")}else y=nl(16);let m=131072,v=8,g=1;return r.scrypt&&(r.scrypt.N&&(m=r.scrypt.N),r.scrypt.r&&(v=r.scrypt.r),r.scrypt.p&&(g=r.scrypt.p)),nk().scrypt(a,f,m,v,g,64,i).then(t=>{let r=(t=T(t)).slice(0,16),i=t.slice(16,32),n=t.slice(32,64),o=new(nc()).Counter(p),a=T(new(nc()).ModeOfOperation.ctr(r,o).encrypt(s)),d=eE(R([i,a])),b={address:e.address.substring(2).toLowerCase(),id:nm(y),version:3,Crypto:{cipher:"aes-128-ctr",cipherparams:{iv:U(p).substring(2)},ciphertext:U(a).substring(2),kdf:"scrypt",kdfparams:{salt:U(f).substring(2),n:m,dklen:32,p:g,r:v},mac:d.substring(2)}};if(l){let w=nl(16),_=new(nc()).Counter(w),S=T(new(nc()).ModeOfOperation.ctr(n,_).encrypt(l)),E=new Date,k=E.getUTCFullYear()+"-"+nf(E.getUTCMonth()+1,2)+"-"+nf(E.getUTCDate(),2)+"T"+nf(E.getUTCHours(),2)+"-"+nf(E.getUTCMinutes(),2)+"-"+nf(E.getUTCSeconds(),2)+".0Z";b["x-ethers"]={client:h,gethFilename:"UTC--"+k+"--"+b.address,mnemonicCounter:U(w).substring(2),mnemonicCiphertext:U(S).substring(2),path:u,locale:c,version:"0.1"}}return JSON.stringify(b)})}(this,e,t,r)}static createRandom(e){let t=nl(16);e||(e={}),e.extraEntropy&&(t=T(D(eE(R([t,e.extraEntropy])),0,16)));let r=nr(t,e.locale);return nI.fromMnemonic(r,e.path,e.locale)}static fromEncryptedJson(e,t,r){return(function(e,t,r){if(nw(e)){r&&r(0);let i=nb(e,t);return r&&r(1),Promise.resolve(i)}return n_(e)?function(e,t,r){var i,n,o;return i=this,o=function*(){let i=JSON.parse(e);return nx(i,(yield nR(i,t,nT,nk().scrypt,r)))},new(n=void 0,n=Promise)(function(e,t){function r(e){try{a(o.next(e))}catch(r){t(r)}}function s(e){try{a(o.throw(e))}catch(r){t(r)}}function a(t){var i;t.done?e(t.value):((i=t.value)instanceof n?i:new n(function(e){e(i)})).then(r,s)}a((o=o.apply(i,[])).next())})}(e,t,r):Promise.reject(Error("invalid JSON wallet"))})(e,t,r).then(e=>new nI(e))}static fromEncryptedJsonSync(e,t){return new nI(function(e,t){if(nw(e))return nb(e,t);if(n_(e))return function(e,t){let r=JSON.parse(e);return nx(r,nR(r,t,nO,nk().syncScrypt))}(e,t);throw Error("invalid JSON wallet")}(e,t))}static fromMnemonic(e,t,r){return t||(t=i7),new nI(i9.fromMnemonic(e,null,r).derivePath(t))}}function nM(e,t){return rV(iS(e),t)}function nU(e,t,r,i){return rV(iD.hash(e,t,r),i)}let nK="0x0000000000000000000000000000000000000000",nD="0x0000000000000000000000000000000000000000000000000000000000000000",nj="",nL=new E("networks/5.5.2");function nJ(e){let t=function(t,r){null==r&&(r={});let i=[];if(t.InfuraProvider)try{i.push(new t.InfuraProvider(e,r.infura))}catch(n){}if(t.EtherscanProvider)try{i.push(new t.EtherscanProvider(e,r.etherscan))}catch(o){}if(t.AlchemyProvider)try{i.push(new t.AlchemyProvider(e,r.alchemy))}catch(s){}if(t.PocketProvider){let a=["goerli","ropsten","rinkeby"];try{let l=new t.PocketProvider(e);l.network&&-1===a.indexOf(l.network.name)&&i.push(l)}catch(u){}}if(t.CloudflareProvider)try{i.push(new t.CloudflareProvider(e))}catch(c){}if(0===i.length)return null;if(t.FallbackProvider){let d=1;return null!=r.quorum?d=r.quorum:"homestead"===e&&(d=2),new t.FallbackProvider(i,d)}return i[0]};return t.renetwork=function(e){return nJ(e)},t}function nF(e,t){let r=function(r,i){return r.JsonRpcProvider?new r.JsonRpcProvider(e,t):null};return r.renetwork=function(t){return nF(e,t)},r}let nq={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:nJ("homestead")},nV={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:nJ("ropsten")},nz={chainId:63,name:"classicMordor",_defaultProvider:nF("https://www.ethercluster.com/mordor","classicMordor")},nG={unspecified:{chainId:0,name:"unspecified"},homestead:nq,mainnet:nq,morden:{chainId:2,name:"morden"},ropsten:nV,testnet:nV,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:nJ("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:nJ("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:nJ("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},classic:{chainId:61,name:"classic",_defaultProvider:nF("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:nz,classicTestnet:nz,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:nF("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic"},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism"},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function nH(e){var t;if(null==e)return null;if("number"==typeof e){for(let r in nG){let i=nG[r];if(i.chainId===e)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:e,name:"unknown"}}if("string"==typeof e){let n=nG[e];return null==n?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}let o=nG[e.name];if(!o)return"number"!=typeof e.chainId&&nL.throwArgumentError("invalid network chainId","network",e),e;0!==e.chainId&&e.chainId!==o.chainId&&nL.throwArgumentError("network chainId mismatch","network",e);let s=e._defaultProvider||null;return null==s&&o._defaultProvider&&(s=(t=o._defaultProvider)&&"function"==typeof t.renetwork?o._defaultProvider.renetwork(e):o._defaultProvider),{name:e.name,chainId:o.chainId,ensAddress:e.ensAddress||o.ensAddress||null,_defaultProvider:s}}function nW(e,t){t||(t=function(e){return[parseInt(e,16)]});let r=0,i={};return e.split(",").forEach(e=>{let n=e.split(":");i[r+=parseInt(n[0],16)]=t(n[1])}),i}function nZ(e){let t=0;return e.split(",").map(e=>{let r=e.split("-");return 1===r.length?r[1]="0":""===r[1]&&(r[1]="1"),{l:t+parseInt(r[0],16),h:t=parseInt(r[1],16)}})}function n$(e,t){let r=0;for(let i=0;i<t.length;i++){let n=t[i];if(e>=(r+=n.l)&&e<=r+n.h&&(e-r)%(n.d||1)==0){if(n.e&&-1!==n.e.indexOf(e-r))continue;return n}}return null}let nX=nZ("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),nY="ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(e=>parseInt(e,16)),nQ=[{h:25,s:32,l:65},{h:30,s:32,e:[23],l:127},{h:54,s:1,e:[48],l:64,d:2},{h:14,s:1,l:57,d:2},{h:44,s:1,l:17,d:2},{h:10,s:1,e:[2,6,8],l:61,d:2},{h:16,s:1,l:68,d:2},{h:84,s:1,e:[18,24,66],l:19,d:2},{h:26,s:32,e:[17],l:435},{h:22,s:1,l:71,d:2},{h:15,s:80,l:40},{h:31,s:32,l:16},{h:32,s:1,l:80,d:2},{h:52,s:1,l:42,d:2},{h:12,s:1,l:55,d:2},{h:40,s:1,e:[38],l:15,d:2},{h:14,s:1,l:48,d:2},{h:37,s:48,l:49},{h:148,s:1,l:6351,d:2},{h:88,s:1,l:160,d:2},{h:15,s:16,l:704},{h:25,s:26,l:854},{h:25,s:32,l:55915},{h:37,s:40,l:1247},{h:25,s:-119711,l:53248},{h:25,s:-119763,l:52},{h:25,s:-119815,l:52},{h:25,s:-119867,e:[1,4,5,7,8,11,12,17],l:52},{h:25,s:-119919,l:52},{h:24,s:-119971,e:[2,7,8,17],l:52},{h:24,s:-120023,e:[2,7,13,15,16,17],l:52},{h:25,s:-120075,l:52},{h:25,s:-120127,l:52},{h:25,s:-120179,l:52},{h:25,s:-120231,l:52},{h:25,s:-120283,l:52},{h:25,s:-120335,l:52},{h:24,s:-119543,e:[17],l:56},{h:24,s:-119601,e:[17],l:58},{h:24,s:-119659,e:[17],l:58},{h:24,s:-119717,e:[17],l:58},{h:24,s:-119775,e:[17],l:58}],n0=nW("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),n1=nW("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),n2=nW("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",function(e){if(e.length%4!=0)throw Error("bad data");let t=[];for(let r=0;r<e.length;r+=4)t.push(parseInt(e.substring(r,r+4),16));return t}),n3=nZ("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function n6(e){if(e.match(/^[a-z0-9-]*$/i)&&e.length<=59)return e.toLowerCase();let t=eQ(e);t=t.map(e=>nY.indexOf(e)>=0||e>=65024&&e<=65039?[]:function(e){let t=n$(e,nQ);if(t)return[e+t.s];let r=n0[e];if(r)return r;let i=n1[e];return i?[e+i[0]]:n2[e]||null}(e)||[e]).reduce((e,t)=>(t.forEach(t=>{e.push(t)}),e),[]),(t=eQ(eX(t),s.NFKC)).forEach(e=>{if(n$(e,n3))throw Error("STRINGPREP_CONTAINS_PROHIBITED")}),t.forEach(e=>{if(n$(e,nX))throw Error("STRINGPREP_CONTAINS_UNASSIGNED")});let r=eX(t);if("-"===r.substring(0,1)||"--"===r.substring(2,4)||"-"===r.substring(r.length-1))throw Error("invalid hyphen");if(r.length>63)throw Error("too long");return r}let n5=new E(iE),n8=new Uint8Array(32);n8.fill(0);let n4=RegExp("^((.*)\\.)?([^.]+)$");function n7(e){try{let t=e.split(".");for(let r=0;r<t.length;r++)if(0===n6(t[r]).length)throw Error("empty");return!0}catch(i){}return!1}function n9(e){"string"!=typeof e&&n5.throwArgumentError("invalid ENS name; not a string","name",e);let t=e,r=n8;for(;t.length;){let i=t.match(n4);null!=i&&""!==i[2]||n5.throwArgumentError("invalid ENS address; missing component","name",e),r=eE(R([r,eE(eW(n6(i[3])))])),t=i[2]||""}return U(r)}function oe(e){e=atob(e);let t=[];for(let r=0;r<e.length;r++)t.push(e.charCodeAt(r));return T(t)}function ot(e){e=T(e);let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return btoa(t)}function or(e,t){var r,i,n;return r=this,n=function*(){null==t&&(t={});let r={method:t.method||"GET",headers:t.headers||{},body:t.body||void 0};!0!==t.skipFetchSetup&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client");let i=yield fetch(e,r),n=yield i.arrayBuffer(),o={};return i.headers.forEach?i.headers.forEach((e,t)=>{o[t.toLowerCase()]=e}):i.headers.keys().forEach(e=>{o[e.toLowerCase()]=i.headers.get(e)}),{headers:o,statusCode:i.status,statusMessage:i.statusText,body:T(new Uint8Array(n))}},new(i=void 0,i=Promise)(function(e,t){function o(e){try{a(n.next(e))}catch(r){t(r)}}function s(e){try{a(n.throw(e))}catch(r){t(r)}}function a(t){var r;t.done?e(t.value):((r=t.value)instanceof i?r:new i(function(e){e(r)})).then(o,s)}a((n=n.apply(r,[])).next())})}let oi=new E("web/5.5.1");function on(e){return new Promise(t=>{setTimeout(t,e)})}function oo(e,t){if(null==e)return null;if("string"==typeof e)return e;if(P(e)){if(t&&("text"===t.split("/")[0]||"application/json"===t.split(";")[0].trim()))try{return eY(e)}catch(r){}return U(e)}return e}function os(e,t,r){let i="object"==typeof e&&null!=e.throttleLimit?e.throttleLimit:12;oi.assertArgument(i>0&&i%1==0,"invalid connection throttle limit","connection.throttleLimit",i);let n="object"==typeof e?e.throttleCallback:null,o="object"==typeof e&&"number"==typeof e.throttleSlotInterval?e.throttleSlotInterval:100;oi.assertArgument(o>0&&o%1==0,"invalid connection throttle slot interval","connection.throttleSlotInterval",o);let s={},a=null,l={method:"GET"},u=!1,c=12e4;if("string"==typeof e)a=e;else if("object"==typeof e){if(null!=e&&null!=e.url||oi.throwArgumentError("missing URL","connection.url",e),a=e.url,"number"==typeof e.timeout&&e.timeout>0&&(c=e.timeout),e.headers)for(let d in e.headers)s[d.toLowerCase()]={key:d,value:String(e.headers[d])},["if-none-match","if-modified-since"].indexOf(d.toLowerCase())>=0&&(u=!0);if(l.allowGzip=!!e.allowGzip,null!=e.user&&null!=e.password){"https:"!==a.substring(0,6)&&!0!==e.allowInsecureAuthentication&&oi.throwError("basic authentication requires a secure https url",E.errors.INVALID_ARGUMENT,{argument:"url",url:a,user:e.user,password:"[REDACTED]"});let h=e.user+":"+e.password;s.authorization={key:"Authorization",value:"Basic "+ot(eW(h))}}}let f=RegExp("^data:([a-z0-9-]+/[a-z0-9-]+);base64,(.*)$","i"),p=a?a.match(f):null;if(p)try{let y={statusCode:200,statusMessage:"OK",headers:{"content-type":p[1]},body:oe(p[2])},m=y.body;return r&&(m=r(y.body,y)),Promise.resolve(m)}catch(v){oi.throwError("processing response error",E.errors.SERVER_ERROR,{body:oo(p[1],p[2]),error:v,requestBody:null,requestMethod:"GET",url:a})}t&&(l.method="POST",l.body=t,null==s["content-type"]&&(s["content-type"]={key:"Content-Type",value:"application/octet-stream"}),null==s["content-length"]&&(s["content-length"]={key:"Content-Length",value:String(t.length)}));let g={};Object.keys(s).forEach(e=>{let t=s[e];g[t.key]=t.value}),l.headers=g;let b=function(){let e=null;return{promise:new Promise(function(t,r){c&&(e=setTimeout(()=>{null!=e&&(e=null,r(oi.makeError("timeout",E.errors.TIMEOUT,{requestBody:oo(l.body,g["content-type"]),requestMethod:l.method,timeout:c,url:a})))},c))}),cancel:function(){null!=e&&(clearTimeout(e),e=null)}}}(),w=function(){var e,t,s;return e=this,s=function*(){for(let e=0;e<i;e++){let t=null;try{if(t=yield or(a,l),e<i){if(301===t.statusCode||302===t.statusCode){let s=t.headers.location||"";if("GET"===l.method&&s.match(/^https:/)){a=t.headers.location;continue}}else if(429===t.statusCode){let c=!0;if(n&&(c=yield n(e,a)),c){let d=0,h=t.headers["retry-after"];yield on(d="string"==typeof h&&h.match(/^[1-9][0-9]*$/)?1e3*parseInt(h):o*parseInt(String(Math.random()*Math.pow(2,e))));continue}}}}catch(f){null==(t=f.response)&&(b.cancel(),oi.throwError("missing response",E.errors.SERVER_ERROR,{requestBody:oo(l.body,g["content-type"]),requestMethod:l.method,serverError:f,url:a}))}let p=t.body;if(u&&304===t.statusCode?p=null:(t.statusCode<200||t.statusCode>=300)&&(b.cancel(),oi.throwError("bad response",E.errors.SERVER_ERROR,{status:t.statusCode,headers:t.headers,body:oo(p,t.headers?t.headers["content-type"]:null),requestBody:oo(l.body,g["content-type"]),requestMethod:l.method,url:a})),r)try{let y=yield r(p,t);return b.cancel(),y}catch(w){if(w.throttleRetry&&e<i){let m=!0;if(n&&(m=yield n(e,a)),m){let v=o*parseInt(String(Math.random()*Math.pow(2,e)));yield on(v);continue}}b.cancel(),oi.throwError("processing response error",E.errors.SERVER_ERROR,{body:oo(p,t.headers?t.headers["content-type"]:null),error:w,requestBody:oo(l.body,g["content-type"]),requestMethod:l.method,url:a})}return b.cancel(),p}return oi.throwError("failed response",E.errors.SERVER_ERROR,{requestBody:oo(l.body,g["content-type"]),requestMethod:l.method,url:a})},new(t=void 0,t=Promise)(function(r,i){function n(e){try{a(s.next(e))}catch(t){i(t)}}function o(e){try{a(s.throw(e))}catch(t){i(t)}}function a(e){var i;e.done?r(e.value):((i=e.value)instanceof t?i:new t(function(e){e(i)})).then(n,o)}a((s=s.apply(e,[])).next())})}();return Promise.race([b.promise,w])}function oa(e,t,r){let i=null;if(null!=t){i=eW(t);let n="string"==typeof e?{url:e}:eu(e);n.headers?0!==Object.keys(n.headers).filter(e=>"content-type"===e.toLowerCase()).length||(n.headers=eu(n.headers),n.headers["content-type"]="application/json"):n.headers={"content-type":"application/json"},e=n}return os(e,i,(e,t)=>{let i=null;if(null!=e)try{i=JSON.parse(eY(e))}catch(n){oi.throwError("invalid JSON",E.errors.SERVER_ERROR,{body:e,error:n})}return r&&(i=r(i,t)),i})}function ol(e,t){return t||(t={}),null==(t=eu(t)).floor&&(t.floor=0),null==t.ceiling&&(t.ceiling=1e4),null==t.interval&&(t.interval=250),new Promise(function(r,i){let n=null,o=!1,s=()=>!o&&(o=!0,n&&clearTimeout(n),!0);t.timeout&&(n=setTimeout(()=>{s()&&i(Error("timeout"))},t.timeout));let a=t.retryLimit,l=0;!function n(){return e().then(function(e){if(void 0!==e)s()&&r(e);else if(t.oncePoll)t.oncePoll.once("poll",n);else if(t.onceBlock)t.onceBlock.once("block",n);else if(!o){if(++l>a)return void(s()&&i(Error("retry limit reached")));let u=t.interval*parseInt(String(Math.random()*Math.pow(2,l)));u<t.floor&&(u=t.floor),u>t.ceiling&&(u=t.ceiling),setTimeout(n,u)}return null},function(e){s()&&i(e)})}()})}var ou=r(2882),oc=r.n(ou);let od="providers/5.5.2",oh=new E(od);class of{constructor(){oh.checkNew(new.target,of),this.formats=this.getDefaultFormats()}getDefaultFormats(){let e={},t=this.address.bind(this),r=this.bigNumber.bind(this),i=this.blockTag.bind(this),n=this.data.bind(this),o=this.hash.bind(this),s=this.hex.bind(this),a=this.number.bind(this),l=this.type.bind(this);return e.transaction={hash:o,type:l,accessList:of.allowNull(this.accessList.bind(this),null),blockHash:of.allowNull(o,null),blockNumber:of.allowNull(a,null),transactionIndex:of.allowNull(a,null),confirmations:of.allowNull(a,null),from:t,gasPrice:of.allowNull(r),maxPriorityFeePerGas:of.allowNull(r),maxFeePerGas:of.allowNull(r),gasLimit:r,to:of.allowNull(t,null),value:r,nonce:a,data:n,r:of.allowNull(this.uint256),s:of.allowNull(this.uint256),v:of.allowNull(a),creates:of.allowNull(t,null),raw:of.allowNull(n)},e.transactionRequest={from:of.allowNull(t),nonce:of.allowNull(a),gasLimit:of.allowNull(r),gasPrice:of.allowNull(r),maxPriorityFeePerGas:of.allowNull(r),maxFeePerGas:of.allowNull(r),to:of.allowNull(t),value:of.allowNull(r),data:of.allowNull(e=>this.data(e,!0)),type:of.allowNull(a),accessList:of.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:a,blockNumber:a,transactionHash:o,address:t,topics:of.arrayOf(o),data:n,logIndex:a,blockHash:o},e.receipt={to:of.allowNull(this.address,null),from:of.allowNull(this.address,null),contractAddress:of.allowNull(t,null),transactionIndex:a,root:of.allowNull(s),gasUsed:r,logsBloom:of.allowNull(n),blockHash:o,transactionHash:o,logs:of.arrayOf(this.receiptLog.bind(this)),blockNumber:a,confirmations:of.allowNull(a,null),cumulativeGasUsed:r,effectiveGasPrice:of.allowNull(r),status:of.allowNull(a),type:l},e.block={hash:o,parentHash:o,number:a,timestamp:a,nonce:of.allowNull(s),difficulty:this.difficulty.bind(this),gasLimit:r,gasUsed:r,miner:t,extraData:n,transactions:of.allowNull(of.arrayOf(o)),baseFeePerGas:of.allowNull(r)},e.blockWithTransactions=eu(e.block),e.blockWithTransactions.transactions=of.allowNull(of.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:of.allowNull(i,void 0),toBlock:of.allowNull(i,void 0),blockHash:of.allowNull(o,void 0),address:of.allowNull(t,void 0),topics:of.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:of.allowNull(a),blockHash:of.allowNull(o),transactionIndex:a,removed:of.allowNull(this.boolean.bind(this)),address:t,data:of.allowFalsish(n,"0x"),topics:of.arrayOf(o),transactionHash:o,logIndex:a},e}accessList(e){return rH(e||[])}number(e){return"0x"===e?0:Q.from(e).toNumber()}type(e){return"0x"===e||null==e?0:Q.from(e).toNumber()}bigNumber(e){return Q.from(e)}boolean(e){if("boolean"==typeof e)return e;if("string"==typeof e){if("true"===(e=e.toLowerCase()))return!0;if("false"===e)return!1}throw Error("invalid boolean - "+e)}hex(e,t){return"string"==typeof e&&(t||"0x"===e.substring(0,2)||(e="0x"+e),I(e))?e.toLowerCase():oh.throwArgumentError("invalid hash","value",e)}data(e,t){let r=this.hex(e,t);if(r.length%2!=0)throw Error("invalid data; odd-length - "+e);return r}address(e){return ej(e)}callAddress(e){if(!I(e,32))return null;let t=ej(D(e,12));return t===nK?null:t}contractAddress(e){return eF(e)}blockTag(e){if(null==e)return"latest";if("earliest"===e)return"0x0";if("latest"===e||"pending"===e)return e;if("number"==typeof e||I(e))return L(e);throw Error("invalid blockTag")}hash(e,t){let r=this.hex(e,t);return 32!==K(r)?oh.throwArgumentError("invalid hash","value",e):r}difficulty(e){if(null==e)return null;let t=Q.from(e);try{return t.toNumber()}catch(r){}return null}uint256(e){if(!I(e))throw Error("invalid uint256");return F(e,32)}_block(e,t){null!=e.author&&null==e.miner&&(e.miner=e.author);let r=null!=e._difficulty?e._difficulty:e.difficulty,i=of.check(t,e);return i._difficulty=null==r?null:Q.from(r),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return of.check(this.formats.transactionRequest,e)}transactionResponse(e){null!=e.gas&&null==e.gasLimit&&(e.gasLimit=e.gas),e.to&&Q.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),null!=e.input&&null==e.data&&(e.data=e.input),null==e.to&&null==e.creates&&(e.creates=this.contractAddress(e)),1!==e.type&&2!==e.type||null!=e.accessList||(e.accessList=[]);let t=of.check(this.formats.transaction,e);if(null!=e.chainId){let r=e.chainId;I(r)&&(r=Q.from(r).toNumber()),t.chainId=r}else{let i=e.networkId;null==i&&null==t.v&&(i=e.chainId),I(i)&&(i=Q.from(i).toNumber()),"number"!=typeof i&&null!=t.v&&((i=(t.v-35)/2)<0&&(i=0),i=parseInt(i)),"number"!=typeof i&&(i=0),t.chainId=i}return t.blockHash&&"x"===t.blockHash.replace(/0/g,"")&&(t.blockHash=null),t}transaction(e){return rQ(e)}receiptLog(e){return of.check(this.formats.receiptLog,e)}receipt(e){let t=of.check(this.formats.receipt,e);if(null!=t.root){if(t.root.length<=4){let r=Q.from(t.root).toNumber();0===r||1===r?(null!=t.status&&t.status!==r&&oh.throwArgumentError("alt-root-status/status mismatch","value",{root:t.root,status:t.status}),t.status=r,delete t.root):oh.throwArgumentError("invalid alt-root-status","value.root",t.root)}else 66!==t.root.length&&oh.throwArgumentError("invalid root hash","value.root",t.root)}return null!=t.status&&(t.byzantium=!0),t}topics(e){return Array.isArray(e)?e.map(e=>this.topics(e)):null!=e?this.hash(e,!0):null}filter(e){return of.check(this.formats.filter,e)}filterLog(e){return of.check(this.formats.filterLog,e)}static check(e,t){let r={};for(let i in e)try{let n=e[i](t[i]);void 0!==n&&(r[i]=n)}catch(o){throw o.checkKey=i,o.checkValue=t[i],o}return r}static allowNull(e,t){return function(r){return null==r?t:e(r)}}static allowFalsish(e,t){return function(r){return r?e(r):t}}static arrayOf(e){return function(t){if(!Array.isArray(t))throw Error("not an array");let r=[];return t.forEach(function(t){r.push(e(t))}),r}}}function op(e){return e&&"function"==typeof e.isCommunityResource}function oy(e){return op(e)&&e.isCommunityResource()}let om=!1;function ov(){om||(om=!0,console.log("========= NOTICE ========="),console.log("Request-Rate Exceeded  (this message will not be repeated)"),console.log(""),console.log("The default API keys for each service are provided as a highly-throttled,"),console.log("community resource for low-traffic projects and early prototyping."),console.log(""),console.log("While your application will continue to function, we highly recommended"),console.log("signing up for your own API keys to improve performance, increase your"),console.log("request rate/limit and enable other perks, such as metrics and advanced APIs."),console.log(""),console.log("For more details: https://docs.ethers.io/api-keys/"),console.log("=========================="))}var og=function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};let ob=new E(od);function ow(e){return null==e?"null":(32!==K(e)&&ob.throwArgumentError("invalid topic","topic",e),e.toLowerCase())}function o_(e){for(e=e.slice();e.length>0&&null==e[e.length-1];)e.pop();return e.map(e=>{if(Array.isArray(e)){let t={};e.forEach(e=>{t[ow(e)]=!0});let r=Object.keys(t);return r.sort(),r.join("|")}return ow(e)}).join("&")}function oS(e){if("string"==typeof e){if(32===K(e=e.toLowerCase()))return"tx:"+e;if(-1===e.indexOf(":"))return e}else{if(Array.isArray(e))return"filter:*:"+o_(e);if(t$.isForkEvent(e))throw ob.warn("not implemented"),Error("not implemented");if(e&&"object"==typeof e)return"filter:"+(e.address||"*")+":"+o_(e.topics||[])}throw Error("invalid event - "+e)}function oE(){return(new Date).getTime()}function ok(e){return new Promise(t=>{setTimeout(t,e)})}let oN=["block","network","pending","poll"];class oA{constructor(e,t,r){eo(this,"tag",e),eo(this,"listener",t),eo(this,"once",r)}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){let e=this.tag.split(":");return"tx"!==e[0]?null:e[1]}get filter(){var e;let t=this.tag.split(":");if("filter"!==t[0])return null;let r=t[1],i=""===(e=t[2])?[]:e.split(/&/g).map(e=>{if(""===e)return[];let t=e.split("|").map(e=>"null"===e?null:e);return 1===t.length?t[0]:t}),n={};return i.length>0&&(n.topics=i),r&&"*"!==r&&(n.address=r),n}pollable(){return this.tag.indexOf(":")>=0||oN.indexOf(this.tag)>=0}}let oP={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function ox(e){return F(Q.from(e).toHexString(),32)}function oO(e){return iL.encode(R([e,D(iq(iq(e)),0,4)]))}let oT=RegExp("^(ipfs)://(.*)$","i"),oR=[RegExp("^(https)://(.*)$","i"),RegExp("^(data):(.*)$","i"),oT,RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function oB(e){try{return eY(oC(e))}catch(t){}return null}function oC(e){if("0x"===e)return null;let t=Q.from(D(e,0,32)).toNumber(),r=Q.from(D(e,t,t+32)).toNumber();return D(e,t+32,t+32+r)}function oI(e){return`https://gateway.ipfs.io/ipfs/${e.substring(7)}`}class oM{constructor(e,t,r,i){eo(this,"provider",e),eo(this,"name",r),eo(this,"address",e.formatter.address(t)),eo(this,"_resolvedAddress",i)}_fetchBytes(e,t){return og(this,void 0,void 0,function*(){let r={to:this.address,data:j([e,n9(this.name),t||"0x"])};try{return oC((yield this.provider.call(r)))}catch(i){return i.code,E.errors.CALL_EXCEPTION,null}})}_getAddress(e,t){let r=oP[String(e)];if(null==r&&ob.throwError(`unsupported coin type: ${e}`,E.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),"eth"===r.ilk)return this.provider.formatter.address(t);let i=T(t);if(null!=r.p2pkh){let n=t.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(n){let o=parseInt(n[1],16);if(n[2].length===2*o&&o>=1&&o<=75)return oO(R([[r.p2pkh],"0x"+n[2]]))}}if(null!=r.p2sh){let s=t.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){let a=parseInt(s[1],16);if(s[2].length===2*a&&a>=1&&a<=75)return oO(R([[r.p2sh],"0x"+s[2]]))}}if(null!=r.prefix){let l=i[1],u=i[0];if(0===u?20!==l&&32!==l&&(u=-1):u=-1,u>=0&&i.length===2+l&&l>=1&&l<=75){let c=oc().toWords(i.slice(2));return c.unshift(u),oc().encode(r.prefix,c)}}return null}getAddress(e){return og(this,void 0,void 0,function*(){if(null==e&&(e=60),60===e)try{let t={to:this.address,data:"0x3b3b57de"+n9(this.name).substring(2)},r=yield this.provider.call(t);return"0x"===r||r===nD?null:this.provider.formatter.callAddress(r)}catch(i){if(i.code===E.errors.CALL_EXCEPTION)return null;throw i}let n=yield this._fetchBytes("0xf1cb7e06",ox(e));if(null==n||"0x"===n)return null;let o=this._getAddress(e,n);return null==o&&ob.throwError("invalid or unsupported coin data",E.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:n}),o})}getAvatar(){return og(this,void 0,void 0,function*(){let e=[{type:"name",content:this.name}];try{let t=yield this.getText("avatar");if(null==t)return null;for(let r=0;r<oR.length;r++){let i=t.match(oR[r]);if(null==i)continue;let n=i[1].toLowerCase();switch(n){case"https":return e.push({type:"url",content:t}),{linkage:e,url:t};case"data":return e.push({type:"data",content:t}),{linkage:e,url:t};case"ipfs":return e.push({type:"ipfs",content:t}),{linkage:e,url:oI(t)};case"erc721":case"erc1155":{let o="erc721"===n?"0xc87b56dd":"0x0e89341c";e.push({type:n,content:t});let s=this._resolvedAddress||(yield this.getAddress()),a=(i[2]||"").split("/");if(2!==a.length)return null;let l=yield this.provider.formatter.address(a[0]),u=F(Q.from(a[1]).toHexString(),32);if("erc721"===n){let c=this.provider.formatter.callAddress((yield this.provider.call({to:l,data:j(["0x6352211e",u])})));if(s!==c)return null;e.push({type:"owner",content:c})}else if("erc1155"===n){let d=Q.from((yield this.provider.call({to:l,data:j(["0x00fdd58e",F(s,32),u])})));if(d.isZero())return null;e.push({type:"balance",content:d.toString()})}let h={to:this.provider.formatter.address(a[0]),data:j([o,u])},f=oB((yield this.provider.call(h)));if(null==f)return null;e.push({type:"metadata-url",content:f}),"erc1155"===n&&(f=f.replace("{id}",u.substring(2)),e.push({type:"metadata-url-expanded",content:f}));let p=yield oa(f);if(!p)return null;e.push({type:"metadata",content:JSON.stringify(p)});let y=p.image;if("string"!=typeof y)return null;if(y.match(/^(https:\/\/|data:)/i));else{if(null==y.match(oT))return null;e.push({type:"url-ipfs",content:y}),y=oI(y)}return e.push({type:"url",content:y}),{linkage:e,url:y}}}}}catch(m){}return null})}getContentHash(){return og(this,void 0,void 0,function*(){let e=yield this._fetchBytes("0xbc1c58d1");if(null==e||"0x"===e)return null;let t=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){let r=parseInt(t[3],16);if(t[4].length===2*r)return"ipfs://"+iL.encode("0x"+t[1])}let i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);return i&&64===i[1].length?"bzz://"+i[1]:ob.throwError("invalid or unsupported content hash data",E.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return og(this,void 0,void 0,function*(){let t=eW(e);(t=R([ox(64),ox(t.length),t])).length%32!=0&&(t=R([t,F("0x",32-e.length%32)]));let r=yield this._fetchBytes("0x59d1d43c",U(t));return null==r||"0x"===r?null:eY(r)})}}let oU=null,oK=1;class oD extends tX{constructor(e){if(ob.checkNew(new.target,tX),super(),this._events=[],this._emitted={block:-2},this.formatter=new.target.getFormatter(),eo(this,"anyNetwork","any"===e),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(e=>{}),this._ready().catch(e=>{});else{let t=es(new.target,"getNetwork")(e);t?(eo(this,"_network",t),this.emit("network",t,null)):ob.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return og(this,void 0,void 0,function*(){if(null==this._network){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch(t){}null==e&&(e=yield this.detectNetwork()),e||ob.throwError("no network detected",E.errors.UNKNOWN_ERROR,{}),null==this._network&&(this.anyNetwork?this._network=e:eo(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return ol(()=>this._ready().then(e=>e,e=>{if(e.code!==E.errors.NETWORK_ERROR||"noNetwork"!==e.event)throw e}))}static getFormatter(){return null==oU&&(oU=new of),oU}static getNetwork(e){return nH(null==e?"homestead":e)}_getInternalBlockNumber(e){return og(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){let t=this._internalBlockNumber;try{let r=yield t;if(oE()-r.respTime<=e)return r.blockNumber;break}catch(i){if(this._internalBlockNumber===t)break}}let n=oE(),o=ea({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(e=>null,e=>e)}).then(({blockNumber:e,networkError:t})=>{if(t)throw this._internalBlockNumber===o&&(this._internalBlockNumber=null),t;let r=oE();return(e=Q.from(e).toNumber())<this._maxInternalBlockNumber&&(e=this._maxInternalBlockNumber),this._maxInternalBlockNumber=e,this._setFastBlockNumber(e),{blockNumber:e,reqTime:n,respTime:r}});return this._internalBlockNumber=o,o.catch(e=>{this._internalBlockNumber===o&&(this._internalBlockNumber=null)}),(yield o).blockNumber})}poll(){return og(this,void 0,void 0,function*(){let e=oK++,t=[],r=null;try{r=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){return void this.emit("error",i)}if(this._setFastBlockNumber(r),this.emit("poll",e,r),r!==this._lastBlockNumber){if(-2===this._emitted.block&&(this._emitted.block=r-1),Math.abs(this._emitted.block-r)>1e3)ob.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${r})`),this.emit("error",ob.makeError("network block skew detected",E.errors.NETWORK_ERROR,{blockNumber:r,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",r);else for(let n=this._emitted.block+1;n<=r;n++)this.emit("block",n);this._emitted.block!==r&&(this._emitted.block=r,Object.keys(this._emitted).forEach(e=>{if("block"===e)return;let t=this._emitted[e];"pending"!==t&&r-t>12&&delete this._emitted[e]})),-2===this._lastBlockNumber&&(this._lastBlockNumber=r-1),this._events.forEach(e=>{switch(e.type){case"tx":{let i=e.hash,n=this.getTransactionReceipt(i).then(e=>(e&&null!=e.blockNumber&&(this._emitted["t:"+i]=e.blockNumber,this.emit(i,e)),null)).catch(e=>{this.emit("error",e)});t.push(n);break}case"filter":{let o=e.filter;o.fromBlock=this._lastBlockNumber+1,o.toBlock=r;let s=this.getLogs(o).then(e=>{0!==e.length&&e.forEach(e=>{this._emitted["b:"+e.blockHash]=e.blockNumber,this._emitted["t:"+e.transactionHash]=e.blockNumber,this.emit(o,e)})}).catch(e=>{this.emit("error",e)});t.push(s)}}}),this._lastBlockNumber=r,Promise.all(t).then(()=>{this.emit("didPoll",e)}).catch(e=>{this.emit("error",e)})}else this.emit("didPoll",e)})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return og(this,void 0,void 0,function*(){return ob.throwError("provider does not support network detection",E.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return og(this,void 0,void 0,function*(){let e=yield this._ready(),t=yield this.detectNetwork();if(e.chainId!==t.chainId){if(this.anyNetwork)return this._network=t,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",t,e),yield ok(0),this._network;let r=ob.makeError("underlying network changed",E.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:t});throw this.emit("error",r),r}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),null!=this._fastBlockNumber?this._fastBlockNumber:-1}get polling(){return null!=this._poller}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if("number"!=typeof e||e<=0||parseInt(String(e))!=e)throw Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){let e=oE();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(e=>((null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){null!=this._fastBlockNumber&&e<this._fastBlockNumber||(this._fastQueryDate=oE(),(null==this._fastBlockNumber||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,t,r){return og(this,void 0,void 0,function*(){return this._waitForTransaction(e,null==t?1:t,r||0,null)})}_waitForTransaction(e,t,r,i){return og(this,void 0,void 0,function*(){let n=yield this.getTransactionReceipt(e);return(n?n.confirmations:0)>=t?n:new Promise((n,o)=>{let s=[],a=!1,l=function(){return!!a||(a=!0,s.forEach(e=>{e()}),!1)},u=e=>{e.confirmations<t||l()||n(e)};if(this.on(e,u),s.push(()=>{this.removeListener(e,u)}),i){let c=i.startBlock,d=null,h=r=>og(this,void 0,void 0,function*(){a||(yield ok(1e3),this.getTransactionCount(i.from).then(n=>og(this,void 0,void 0,function*(){if(!a){if(n<=i.nonce)c=r;else{{let s=yield this.getTransaction(e);if(s&&null!=s.blockNumber)return}for(null==d&&(d=c-3)<i.startBlock&&(d=i.startBlock);d<=r;){if(a)return;let u=yield this.getBlockWithTransactions(d);for(let f=0;f<u.transactions.length;f++){let p=u.transactions[f];if(p.hash===e)return;if(p.from===i.from&&p.nonce===i.nonce){if(a)return;let y=yield this.waitForTransaction(p.hash,t);if(l())return;let m="replaced";return p.data===i.data&&p.to===i.to&&p.value.eq(i.value)?m="repriced":"0x"===p.data&&p.from===p.to&&p.value.isZero()&&(m="cancelled"),void o(ob.makeError("transaction was replaced",E.errors.TRANSACTION_REPLACED,{cancelled:"replaced"===m||"cancelled"===m,reason:m,replacement:this._wrapTransaction(p),hash:e,receipt:y}))}}d++}}a||this.once("block",h)}}),e=>{a||this.once("block",h)}))});if(a)return;this.once("block",h),s.push(()=>{this.removeListener("block",h)})}if("number"==typeof r&&r>0){let f=setTimeout(()=>{l()||o(ob.makeError("timeout exceeded",E.errors.TIMEOUT,{timeout:r}))},r);f.unref&&f.unref(),s.push(()=>{clearTimeout(f)})}})})}getBlockNumber(){return og(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return og(this,void 0,void 0,function*(){yield this.getNetwork();let e=yield this.perform("getGasPrice",{});try{return Q.from(e)}catch(t){return ob.throwError("bad result from backend",E.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:t})}})}getBalance(e,t){return og(this,void 0,void 0,function*(){yield this.getNetwork();let r=yield ea({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getBalance",r);try{return Q.from(i)}catch(n){return ob.throwError("bad result from backend",E.errors.SERVER_ERROR,{method:"getBalance",params:r,result:i,error:n})}})}getTransactionCount(e,t){return og(this,void 0,void 0,function*(){yield this.getNetwork();let r=yield ea({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getTransactionCount",r);try{return Q.from(i).toNumber()}catch(n){return ob.throwError("bad result from backend",E.errors.SERVER_ERROR,{method:"getTransactionCount",params:r,result:i,error:n})}})}getCode(e,t){return og(this,void 0,void 0,function*(){yield this.getNetwork();let r=yield ea({address:this._getAddress(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("getCode",r);try{return U(i)}catch(n){return ob.throwError("bad result from backend",E.errors.SERVER_ERROR,{method:"getCode",params:r,result:i,error:n})}})}getStorageAt(e,t,r){return og(this,void 0,void 0,function*(){yield this.getNetwork();let i=yield ea({address:this._getAddress(e),blockTag:this._getBlockTag(r),position:Promise.resolve(t).then(e=>L(e))}),n=yield this.perform("getStorageAt",i);try{return U(n)}catch(o){return ob.throwError("bad result from backend",E.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:n,error:o})}})}_wrapTransaction(e,t,r){if(null!=t&&32!==K(t))throw Error("invalid response - sendTransaction");let i=e;return null!=t&&e.hash!==t&&ob.throwError("Transaction hash mismatch from Provider.sendTransaction.",E.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:t}),i.wait=(t,i)=>og(this,void 0,void 0,function*(){let n;null==t&&(t=1),null==i&&(i=0),0!==t&&null!=r&&(n={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:r});let o=yield this._waitForTransaction(e.hash,t,i,n);return null==o&&0===t?null:(this._emitted["t:"+e.hash]=o.blockNumber,0===o.status&&ob.throwError("transaction failed",E.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:o}),o)}),i}sendTransaction(e){return og(this,void 0,void 0,function*(){yield this.getNetwork();let t=yield Promise.resolve(e).then(e=>U(e)),r=this.formatter.transaction(e);null==r.confirmations&&(r.confirmations=0);let i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{let n=yield this.perform("sendTransaction",{signedTransaction:t});return this._wrapTransaction(r,n,i)}catch(o){throw o.transaction=r,o.transactionHash=r.hash,o}})}_getTransactionRequest(e){return og(this,void 0,void 0,function*(){let t=yield e,r={};return["from","to"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>e?this._getAddress(e):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>e?Q.from(e):null))}),["type"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>null!=e?e:null))}),t.accessList&&(r.accessList=this.formatter.accessList(t.accessList)),["data"].forEach(e=>{null!=t[e]&&(r[e]=Promise.resolve(t[e]).then(e=>e?U(e):null))}),this.formatter.transactionRequest((yield ea(r)))})}_getFilter(e){return og(this,void 0,void 0,function*(){e=yield e;let t={};return null!=e.address&&(t.address=this._getAddress(e.address)),["blockHash","topics"].forEach(r=>{null!=e[r]&&(t[r]=e[r])}),["fromBlock","toBlock"].forEach(r=>{null!=e[r]&&(t[r]=this._getBlockTag(e[r]))}),this.formatter.filter((yield ea(t)))})}call(e,t){return og(this,void 0,void 0,function*(){yield this.getNetwork();let r=yield ea({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(t)}),i=yield this.perform("call",r);try{return U(i)}catch(n){return ob.throwError("bad result from backend",E.errors.SERVER_ERROR,{method:"call",params:r,result:i,error:n})}})}estimateGas(e){return og(this,void 0,void 0,function*(){yield this.getNetwork();let t=yield ea({transaction:this._getTransactionRequest(e)}),r=yield this.perform("estimateGas",t);try{return Q.from(r)}catch(i){return ob.throwError("bad result from backend",E.errors.SERVER_ERROR,{method:"estimateGas",params:t,result:r,error:i})}})}_getAddress(e){return og(this,void 0,void 0,function*(){"string"!=typeof(e=yield e)&&ob.throwArgumentError("invalid address or ENS name","name",e);let t=yield this.resolveName(e);return null==t&&ob.throwError("ENS name not configured",E.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),t})}_getBlock(e,t){return og(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let r=-128,i={includeTransactions:!!t};if(I(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),I(i.blockTag)&&(r=parseInt(i.blockTag.substring(2),16))}catch(n){ob.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return ol(()=>og(this,void 0,void 0,function*(){let e=yield this.perform("getBlock",i);if(null==e)return null!=i.blockHash&&null==this._emitted["b:"+i.blockHash]||null!=i.blockTag&&r>this._emitted.block?null:void 0;if(t){let n=null;for(let o=0;o<e.transactions.length;o++){let s=e.transactions[o];if(null==s.blockNumber)s.confirmations=0;else if(null==s.confirmations){null==n&&(n=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let a=n-s.blockNumber+1;a<=0&&(a=1),s.confirmations=a}}let l=this.formatter.blockWithTransactions(e);return l.transactions=l.transactions.map(e=>this._wrapTransaction(e)),l}return this.formatter.block(e)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return og(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let t={transactionHash:this.formatter.hash(e,!0)};return ol(()=>og(this,void 0,void 0,function*(){let r=yield this.perform("getTransaction",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;let i=this.formatter.transactionResponse(r);if(null==i.blockNumber)i.confirmations=0;else if(null==i.confirmations){let n=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;n<=0&&(n=1),i.confirmations=n}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return og(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let t={transactionHash:this.formatter.hash(e,!0)};return ol(()=>og(this,void 0,void 0,function*(){let r=yield this.perform("getTransactionReceipt",t);if(null==r)return null==this._emitted["t:"+e]?null:void 0;if(null==r.blockHash)return;let i=this.formatter.receipt(r);if(null==i.blockNumber)i.confirmations=0;else if(null==i.confirmations){let n=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;n<=0&&(n=1),i.confirmations=n}return i}),{oncePoll:this})})}getLogs(e){return og(this,void 0,void 0,function*(){yield this.getNetwork();let t=yield ea({filter:this._getFilter(e)}),r=yield this.perform("getLogs",t);return r.forEach(e=>{null==e.removed&&(e.removed=!1)}),of.arrayOf(this.formatter.filterLog.bind(this.formatter))(r)})}getEtherPrice(){return og(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return og(this,void 0,void 0,function*(){if("number"==typeof(e=yield e)&&e<0){e%1&&ob.throwArgumentError("invalid BlockTag","blockTag",e);let t=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return(t+=e)<0&&(t=0),this.formatter.blockTag(t)}return this.formatter.blockTag(e)})}getResolver(e){return og(this,void 0,void 0,function*(){try{let t=yield this._getResolver(e);return null==t?null:new oM(this,t,e)}catch(r){if(r.code===E.errors.CALL_EXCEPTION)return null;throw r}})}_getResolver(e){return og(this,void 0,void 0,function*(){let t=yield this.getNetwork();t.ensAddress||ob.throwError("network does not support ENS",E.errors.UNSUPPORTED_OPERATION,{operation:"ENS",network:t.name});let r={to:t.ensAddress,data:"0x0178b8bf"+n9(e).substring(2)};try{return this.formatter.callAddress((yield this.call(r)))}catch(i){if(i.code===E.errors.CALL_EXCEPTION)return null;throw i}})}resolveName(e){return og(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(t){if(I(e))throw t}"string"!=typeof e&&ob.throwArgumentError("invalid ENS name","name",e);let r=yield this.getResolver(e);return r?yield r.getAddress():null})}lookupAddress(e){return og(this,void 0,void 0,function*(){e=yield e;let t=(e=this.formatter.address(e)).substring(2).toLowerCase()+".addr.reverse",r=yield this._getResolver(t);if(!r)return null;let i=T((yield this.call({to:r,data:"0x691f3431"+n9(t).substring(2)})));if(i.length<32||!Q.from(i.slice(0,32)).eq(32)||(i=i.slice(32)).length<32)return null;let n=Q.from(i.slice(0,32)).toNumber();if(n>(i=i.slice(32)).length)return null;let o=eY(i.slice(0,n));return(yield this.resolveName(o))!=e?null:o})}getAvatar(e){return og(this,void 0,void 0,function*(){let t=null;if(I(e)){let r=this.formatter.address(e),i=r.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(i);if(!n)return null;t=new oM(this,n,"_",r)}else if(!(t=yield this.getResolver(e)))return null;let o=yield t.getAvatar();return null==o?null:o.url})}perform(e,t){return ob.throwError(e+" not implemented",E.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(e=>e.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(e=>e.pollable()).length>0}_addEventListener(e,t,r){let i=new oA(oS(e),t,r);return this._events.push(i),this._startEvent(i),this}on(e,t){return this._addEventListener(e,t,!1)}once(e,t){return this._addEventListener(e,t,!0)}emit(e,...t){let r=!1,i=[],n=oS(e);return this._events=this._events.filter(e=>e.tag!==n||(setTimeout(()=>{e.listener.apply(this,t)},0),r=!0,!e.once||(i.push(e),!1))),i.forEach(e=>{this._stopEvent(e)}),r}listenerCount(e){if(!e)return this._events.length;let t=oS(e);return this._events.filter(e=>e.tag===t).length}listeners(e){if(null==e)return this._events.map(e=>e.listener);let t=oS(e);return this._events.filter(e=>e.tag===t).map(e=>e.listener)}off(e,t){if(null==t)return this.removeAllListeners(e);let r=[],i=!1,n=oS(e);return this._events=this._events.filter(e=>e.tag!==n||e.listener!=t||!!i||(i=!0,r.push(e),!1)),r.forEach(e=>{this._stopEvent(e)}),this}removeAllListeners(e){let t=[];if(null==e)t=this._events,this._events=[];else{let r=oS(e);this._events=this._events.filter(e=>e.tag!==r||(t.push(e),!1))}return t.forEach(e=>{this._stopEvent(e)}),this}}var oj=function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};let oL=new E(od),oJ=["call","estimateGas"];function oF(e,t,r){if("call"===e&&t.code===E.errors.SERVER_ERROR){let i=t.error;if(i&&i.message.match("reverted")&&I(i.data))return i.data;oL.throwError("missing revert data in call exception",E.errors.CALL_EXCEPTION,{error:t,data:"0x"})}let n=t.message;t.code===E.errors.SERVER_ERROR&&t.error&&"string"==typeof t.error.message?n=t.error.message:"string"==typeof t.body?n=t.body:"string"==typeof t.responseText&&(n=t.responseText),n=(n||"").toLowerCase();let o=r.transaction||r.signedTransaction;throw n.match(/insufficient funds|base fee exceeds gas limit/)&&oL.throwError("insufficient funds for intrinsic transaction cost",E.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:o}),n.match(/nonce too low/)&&oL.throwError("nonce has already been used",E.errors.NONCE_EXPIRED,{error:t,method:e,transaction:o}),n.match(/replacement transaction underpriced/)&&oL.throwError("replacement fee too low",E.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:o}),n.match(/only replay-protected/)&&oL.throwError("legacy pre-eip-155 transactions not supported",E.errors.UNSUPPORTED_OPERATION,{error:t,method:e,transaction:o}),oJ.indexOf(e)>=0&&n.match(/gas required exceeds allowance|always failing transaction|execution reverted/)&&oL.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",E.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:o}),t}function oq(e){return new Promise(function(t){setTimeout(t,e)})}function oV(e){if(e.error){let t=Error(e.error.message);throw t.code=e.error.code,t.data=e.error.data,t}return e.result}function oz(e){return e?e.toLowerCase():e}let oG={};class oH extends t2{constructor(e,t,r){if(oL.checkNew(new.target,oH),super(),e!==oG)throw Error("do not call the JsonRpcSigner constructor directly; use provider.getSigner");eo(this,"provider",t),null==r&&(r=0),"string"==typeof r?(eo(this,"_address",this.provider.formatter.address(r)),eo(this,"_index",null)):"number"==typeof r?(eo(this,"_index",r),eo(this,"_address",null)):oL.throwArgumentError("invalid address or index","addressOrIndex",r)}connect(e){return oL.throwError("cannot alter JSON-RPC Signer connection",E.errors.UNSUPPORTED_OPERATION,{operation:"connect"})}connectUnchecked(){return new oW(oG,this.provider,this._address||this._index)}getAddress(){return this._address?Promise.resolve(this._address):this.provider.send("eth_accounts",[]).then(e=>(e.length<=this._index&&oL.throwError("unknown account #"+this._index,E.errors.UNSUPPORTED_OPERATION,{operation:"getAddress"}),this.provider.formatter.address(e[this._index])))}sendUncheckedTransaction(e){e=eu(e);let t=this.getAddress().then(e=>(e&&(e=e.toLowerCase()),e));if(null==e.gasLimit){let r=eu(e);r.from=t,e.gasLimit=this.provider.estimateGas(r)}return null!=e.to&&(e.to=Promise.resolve(e.to).then(e=>oj(this,void 0,void 0,function*(){if(null==e)return null;let t=yield this.provider.resolveName(e);return null==t&&oL.throwArgumentError("provided ENS name resolves to null","tx.to",e),t}))),ea({tx:ea(e),sender:t}).then(({tx:t,sender:r})=>{null!=t.from?t.from.toLowerCase()!==r&&oL.throwArgumentError("from address mismatch","transaction",e):t.from=r;let i=this.provider.constructor.hexlifyTransaction(t,{from:!0});return this.provider.send("eth_sendTransaction",[i]).then(e=>e,e=>oF("sendTransaction",e,i))})}signTransaction(e){return oL.throwError("signing transactions is unsupported",E.errors.UNSUPPORTED_OPERATION,{operation:"signTransaction"})}sendTransaction(e){return oj(this,void 0,void 0,function*(){let t=yield this.provider._getInternalBlockNumber(100+2*this.provider.pollingInterval),r=yield this.sendUncheckedTransaction(e);try{return yield ol(()=>oj(this,void 0,void 0,function*(){let e=yield this.provider.getTransaction(r);if(null!==e)return this.provider._wrapTransaction(e,r,t)}),{oncePoll:this.provider})}catch(i){throw i.transactionHash=r,i}})}signMessage(e){return oj(this,void 0,void 0,function*(){let t="string"==typeof e?eW(e):e,r=yield this.getAddress();return yield this.provider.send("personal_sign",[U(t),r.toLowerCase()])})}_legacySignMessage(e){return oj(this,void 0,void 0,function*(){let t="string"==typeof e?eW(e):e,r=yield this.getAddress();return yield this.provider.send("eth_sign",[r.toLowerCase(),U(t)])})}_signTypedData(e,t,r){return oj(this,void 0,void 0,function*(){let i=yield iD.resolveNames(e,t,r,e=>this.provider.resolveName(e)),n=yield this.getAddress();return yield this.provider.send("eth_signTypedData_v4",[n.toLowerCase(),JSON.stringify(iD.getPayload(i.domain,t,i.value))])})}unlock(e){return oj(this,void 0,void 0,function*(){let t=this.provider,r=yield this.getAddress();return t.send("personal_unlockAccount",[r.toLowerCase(),e,null])})}}class oW extends oH{sendTransaction(e){return this.sendUncheckedTransaction(e).then(e=>({hash:e,nonce:null,gasLimit:null,gasPrice:null,data:null,value:null,chainId:null,confirmations:0,from:null,wait:t=>this.provider.waitForTransaction(e,t)}))}}let oZ={chainId:!0,data:!0,gasLimit:!0,gasPrice:!0,nonce:!0,to:!0,value:!0,type:!0,accessList:!0,maxFeePerGas:!0,maxPriorityFeePerGas:!0};class o$ extends oD{constructor(e,t){oL.checkNew(new.target,o$);let r=t;null==r&&(r=new Promise((e,t)=>{setTimeout(()=>{this.detectNetwork().then(t=>{e(t)},e=>{t(e)})},0)})),super(r),e||(e=es(this.constructor,"defaultUrl")()),eo(this,"connection","string"==typeof e?Object.freeze({url:e}):Object.freeze(eu(e))),this._nextId=42}get _cache(){return null==this._eventLoopCache&&(this._eventLoopCache={}),this._eventLoopCache}static defaultUrl(){return"http://localhost:8545"}detectNetwork(){return this._cache.detectNetwork||(this._cache.detectNetwork=this._uncachedDetectNetwork(),setTimeout(()=>{this._cache.detectNetwork=null},0)),this._cache.detectNetwork}_uncachedDetectNetwork(){return oj(this,void 0,void 0,function*(){yield oq(0);let e=null;try{e=yield this.send("eth_chainId",[])}catch(r){try{e=yield this.send("net_version",[])}catch(t){}}if(null!=e){let i=es(this.constructor,"getNetwork");try{return i(Q.from(e).toNumber())}catch(n){return oL.throwError("could not detect network",E.errors.NETWORK_ERROR,{chainId:e,event:"invalidNetwork",serverError:n})}}return oL.throwError("could not detect network",E.errors.NETWORK_ERROR,{event:"noNetwork"})})}getSigner(e){return new oH(oG,this,e)}getUncheckedSigner(e){return this.getSigner(e).connectUnchecked()}listAccounts(){return this.send("eth_accounts",[]).then(e=>e.map(e=>this.formatter.address(e)))}send(e,t){let r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};this.emit("debug",{action:"request",request:ef(r),provider:this});let i=["eth_chainId","eth_blockNumber"].indexOf(e)>=0;if(i&&this._cache[e])return this._cache[e];let n=oa(this.connection,JSON.stringify(r),oV).then(e=>(this.emit("debug",{action:"response",request:r,response:e,provider:this}),e),e=>{throw this.emit("debug",{action:"response",error:e,request:r,provider:this}),e});return i&&(this._cache[e]=n,setTimeout(()=>{this._cache[e]=null},0)),n}prepareRequest(e,t){switch(e){case"getBlockNumber":return["eth_blockNumber",[]];case"getGasPrice":return["eth_gasPrice",[]];case"getBalance":return["eth_getBalance",[oz(t.address),t.blockTag]];case"getTransactionCount":return["eth_getTransactionCount",[oz(t.address),t.blockTag]];case"getCode":return["eth_getCode",[oz(t.address),t.blockTag]];case"getStorageAt":return["eth_getStorageAt",[oz(t.address),t.position,t.blockTag]];case"sendTransaction":return["eth_sendRawTransaction",[t.signedTransaction]];case"getBlock":return t.blockTag?["eth_getBlockByNumber",[t.blockTag,!!t.includeTransactions]]:t.blockHash?["eth_getBlockByHash",[t.blockHash,!!t.includeTransactions]]:null;case"getTransaction":return["eth_getTransactionByHash",[t.transactionHash]];case"getTransactionReceipt":return["eth_getTransactionReceipt",[t.transactionHash]];case"call":return["eth_call",[es(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0}),t.blockTag]];case"estimateGas":return["eth_estimateGas",[es(this.constructor,"hexlifyTransaction")(t.transaction,{from:!0})]];case"getLogs":return t.filter&&null!=t.filter.address&&(t.filter.address=oz(t.filter.address)),["eth_getLogs",[t.filter]]}return null}perform(e,t){return oj(this,void 0,void 0,function*(){if("call"===e||"estimateGas"===e){let r=t.transaction;if(r&&null!=r.type&&Q.from(r.type).isZero()&&null==r.maxFeePerGas&&null==r.maxPriorityFeePerGas){let i=yield this.getFeeData();null==i.maxFeePerGas&&null==i.maxPriorityFeePerGas&&((t=eu(t)).transaction=eu(r),delete t.transaction.type)}}let n=this.prepareRequest(e,t);null==n&&oL.throwError(e+" not implemented",E.errors.NOT_IMPLEMENTED,{operation:e});try{return yield this.send(n[0],n[1])}catch(o){return oF(e,o,t)}})}_startEvent(e){"pending"===e.tag&&this._startPending(),super._startEvent(e)}_startPending(){if(null!=this._pendingFilter)return;let e=this,t=this.send("eth_newPendingTransactionFilter",[]);this._pendingFilter=t,t.then(function(r){return function i(){e.send("eth_getFilterChanges",[r]).then(function(r){if(e._pendingFilter!=t)return null;let i=Promise.resolve();return r.forEach(function(t){e._emitted["t:"+t.toLowerCase()]="pending",i=i.then(function(){return e.getTransaction(t).then(function(t){return e.emit("pending",t),null})})}),i.then(function(){return oq(1e3)})}).then(function(){if(e._pendingFilter==t)return setTimeout(function(){i()},0),null;e.send("eth_uninstallFilter",[r])}).catch(e=>{})}(),r}).catch(e=>{})}_stopEvent(e){"pending"===e.tag&&0===this.listenerCount("pending")&&(this._pendingFilter=null),super._stopEvent(e)}static hexlifyTransaction(e,t){let r=eu(oZ);if(t)for(let i in t)t[i]&&(r[i]=!0);el(e,r);let n={};return["gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(function(t){if(null==e[t])return;let r=L(e[t]);"gasLimit"===t&&(t="gas"),n[t]=r}),["from","to","data"].forEach(function(t){null!=e[t]&&(n[t]=U(e[t]))}),e.accessList&&(n.accessList=rH(e.accessList)),n}}let oX=null;try{if(oX=WebSocket,null==oX)throw Error("inject please")}catch(oQ){let oY=new E(od);oX=function(){oY.throwError("WebSockets not supported in this environment",E.errors.UNSUPPORTED_OPERATION,{operation:"new WebSocket()"})}}var o0=function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};let o1=new E(od),o2=1;class o3 extends o${constructor(e,t){"any"===t&&o1.throwError("WebSocketProvider does not support 'any' network yet",E.errors.UNSUPPORTED_OPERATION,{operation:"network:any"}),super(e,t),this._pollingInterval=-1,this._wsReady=!1,eo(this,"_websocket",new oX(this.connection.url)),eo(this,"_requests",{}),eo(this,"_subs",{}),eo(this,"_subIds",{}),eo(this,"_detectNetwork",super.detectNetwork()),this._websocket.onopen=()=>{this._wsReady=!0,Object.keys(this._requests).forEach(e=>{this._websocket.send(this._requests[e].payload)})},this._websocket.onmessage=e=>{let t=e.data,r=JSON.parse(t);if(null!=r.id){let i=String(r.id),n=this._requests[i];if(delete this._requests[i],void 0!==r.result)n.callback(null,r.result),this.emit("debug",{action:"response",request:JSON.parse(n.payload),response:r.result,provider:this});else{let o=null;r.error?(eo(o=Error(r.error.message||"unknown error"),"code",r.error.code||null),eo(o,"response",t)):o=Error("unknown error"),n.callback(o,void 0),this.emit("debug",{action:"response",error:o,request:JSON.parse(n.payload),provider:this})}}else if("eth_subscription"===r.method){let s=this._subs[r.params.subscription];s&&s.processFunc(r.params.result)}else console.warn("this should not happen")};let r=setInterval(()=>{this.emit("poll")},1e3);r.unref&&r.unref()}detectNetwork(){return this._detectNetwork}get pollingInterval(){return 0}resetEventsBlock(e){o1.throwError("cannot reset events block on WebSocketProvider",E.errors.UNSUPPORTED_OPERATION,{operation:"resetEventBlock"})}set pollingInterval(e){o1.throwError("cannot set polling interval on WebSocketProvider",E.errors.UNSUPPORTED_OPERATION,{operation:"setPollingInterval"})}poll(){return o0(this,void 0,void 0,function*(){return null})}set polling(e){e&&o1.throwError("cannot set polling on WebSocketProvider",E.errors.UNSUPPORTED_OPERATION,{operation:"setPolling"})}send(e,t){let r=o2++;return new Promise((i,n)=>{let o=JSON.stringify({method:e,params:t,id:r,jsonrpc:"2.0"});this.emit("debug",{action:"request",request:JSON.parse(o),provider:this}),this._requests[String(r)]={callback:function(e,t){return e?n(e):i(t)},payload:o},this._wsReady&&this._websocket.send(o)})}static defaultUrl(){return"ws://localhost:8546"}_subscribe(e,t,r){return o0(this,void 0,void 0,function*(){let i=this._subIds[e];null==i&&(i=Promise.all(t).then(e=>this.send("eth_subscribe",e)),this._subIds[e]=i);let n=yield i;this._subs[n]={tag:e,processFunc:r}})}_startEvent(e){switch(e.type){case"block":this._subscribe("block",["newHeads"],e=>{let t=Q.from(e.number).toNumber();this._emitted.block=t,this.emit("block",t)});break;case"pending":this._subscribe("pending",["newPendingTransactions"],e=>{this.emit("pending",e)});break;case"filter":this._subscribe(e.tag,["logs",this._getFilter(e.filter)],t=>{null==t.removed&&(t.removed=!1),this.emit(e.filter,this.formatter.filterLog(t))});break;case"tx":{let t=e=>{let t=e.hash;this.getTransactionReceipt(t).then(e=>{e&&this.emit(t,e)})};t(e),this._subscribe("tx",["newHeads"],e=>{this._events.filter(e=>"tx"===e.type).forEach(t)});break}case"debug":case"poll":case"willPoll":case"didPoll":case"error":break;default:console.log("unhandled:",e)}}_stopEvent(e){let t=e.tag;if("tx"===e.type){if(this._events.filter(e=>"tx"===e.type).length)return;t="tx"}else if(this.listenerCount(e.event))return;let r=this._subIds[t];r&&(delete this._subIds[t],r.then(e=>{this._subs[e]&&(delete this._subs[e],this.send("eth_unsubscribe",[e]))}))}destroy(){return o0(this,void 0,void 0,function*(){this._websocket.readyState===oX.CONNECTING&&(yield new Promise(e=>{this._websocket.onopen=function(){e(!0)},this._websocket.onerror=function(){e(!1)}})),this._websocket.close(1e3)})}}let o6=new E(od);class o5 extends o${detectNetwork(){var e,t,r;let i=Object.create(null,{detectNetwork:{get:()=>super.detectNetwork}});return e=this,r=function*(){let e=this.network;return null==e&&((e=yield i.detectNetwork.call(this))||o6.throwError("no network detected",E.errors.UNKNOWN_ERROR,{}),null==this._network&&(eo(this,"_network",e),this.emit("network",e,null))),e},new(t=void 0,t=Promise)(function(i,n){function o(e){try{a(r.next(e))}catch(t){n(t)}}function s(e){try{a(r.throw(e))}catch(t){n(t)}}function a(e){var r;e.done?i(e.value):((r=e.value)instanceof t?r:new t(function(e){e(r)})).then(o,s)}a((r=r.apply(e,[])).next())})}}class o8 extends o5{constructor(e,t){o6.checkAbstract(new.target,o8),e=es(new.target,"getNetwork")(e),super(es(new.target,"getUrl")(e,t=es(new.target,"getApiKey")(t)),e),"string"==typeof t?eo(this,"apiKey",t):null!=t&&Object.keys(t).forEach(e=>{eo(this,e,t[e])})}_startPending(){o6.warn("WARNING: API provider does not support pending filters")}isCommunityResource(){return!1}getSigner(e){return o6.throwError("API provider does not support signing",E.errors.UNSUPPORTED_OPERATION,{operation:"getSigner"})}listAccounts(){return Promise.resolve([])}static getApiKey(e){return e}static getUrl(e,t){return o6.throwError("not implemented; sub-classes must override getUrl",E.errors.NOT_IMPLEMENTED,{operation:"getUrl"})}}let o4=new E(od),o7="_gg7wSSi0KMBsdKnGVfHDueq6xMB9EkC";class o9 extends o3{constructor(e,t){let r=new se(e,t);super(r.connection.url.replace(/^http/i,"ws").replace(".alchemyapi.",".ws.alchemyapi."),r.network),eo(this,"apiKey",r.apiKey)}isCommunityResource(){return this.apiKey===o7}}class se extends o8{static getWebSocketProvider(e,t){return new o9(e,t)}static getApiKey(e){return null==e?o7:(e&&"string"!=typeof e&&o4.throwArgumentError("invalid apiKey","apiKey",e),e)}static getUrl(e,t){let r=null;switch(e.name){case"homestead":r="eth-mainnet.alchemyapi.io/v2/";break;case"ropsten":r="eth-ropsten.alchemyapi.io/v2/";break;case"rinkeby":r="eth-rinkeby.alchemyapi.io/v2/";break;case"goerli":r="eth-goerli.alchemyapi.io/v2/";break;case"kovan":r="eth-kovan.alchemyapi.io/v2/";break;case"matic":r="polygon-mainnet.g.alchemy.com/v2/";break;case"maticmum":r="polygon-mumbai.g.alchemy.com/v2/";break;case"arbitrum":r="arb-mainnet.g.alchemy.com/v2/";break;case"arbitrum-rinkeby":r="arb-rinkeby.g.alchemy.com/v2/";break;case"optimism":r="opt-mainnet.g.alchemy.com/v2/";break;case"optimism-kovan":r="opt-kovan.g.alchemy.com/v2/";break;default:o4.throwArgumentError("unsupported network","network",arguments[0])}return{allowGzip:!0,url:"https://"+r+t,throttleCallback:(e,r)=>(t===o7&&ov(),Promise.resolve(!0))}}isCommunityResource(){return this.apiKey===o7}}let st=new E(od);class sr extends o8{static getApiKey(e){return null!=e&&st.throwArgumentError("apiKey not supported for cloudflare","apiKey",e),null}static getUrl(e,t){let r=null;return"homestead"===e.name?r="https://cloudflare-eth.com/":st.throwArgumentError("unsupported network","network",arguments[0]),r}perform(e,t){var r,i,n;let o=Object.create(null,{perform:{get:()=>super.perform}});return r=this,n=function*(){return"getBlockNumber"===e?(yield o.perform.call(this,"getBlock",{blockTag:"latest"})).number:o.perform.call(this,e,t)},new(i=void 0,i=Promise)(function(e,t){function o(e){try{a(n.next(e))}catch(r){t(r)}}function s(e){try{a(n.throw(e))}catch(r){t(r)}}function a(t){var r;t.done?e(t.value):((r=t.value)instanceof i?r:new i(function(e){e(r)})).then(o,s)}a((n=n.apply(r,[])).next())})}}var si=function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};let sn=new E(od);function so(e){let t={};for(let r in e){if(null==e[r])continue;let i=e[r];"type"===r&&0===i||(i=({type:!0,gasLimit:!0,gasPrice:!0,maxFeePerGs:!0,maxPriorityFeePerGas:!0,nonce:!0,value:!0})[r]?L(U(i)):"accessList"===r?"["+rH(i).map(e=>`{address:"${e.address}",storageKeys:["${e.storageKeys.join('","')}"]}`).join(",")+"]":U(i),t[r]=i)}return t}function ss(e){if(0==e.status&&("No records found"===e.message||"No transactions found"===e.message))return e.result;if(1!=e.status||"OK"!=e.message){let t=Error("invalid response");throw t.result=JSON.stringify(e),(e.result||"").toLowerCase().indexOf("rate limit")>=0&&(t.throttleRetry=!0),t}return e.result}function sa(e){if(e&&0==e.status&&"NOTOK"==e.message&&(e.result||"").toLowerCase().indexOf("rate limit")>=0){let t=Error("throttled response");throw t.result=JSON.stringify(e),t.throttleRetry=!0,t}if("2.0"!=e.jsonrpc){let r=Error("invalid response");throw r.result=JSON.stringify(e),r}if(e.error){let i=Error(e.error.message||"unknown error");throw e.error.code&&(i.code=e.error.code),e.error.data&&(i.data=e.error.data),i}return e.result}function sl(e){if("pending"===e)throw Error("pending not supported");return"latest"===e?e:parseInt(e.substring(2),16)}let su="9D13ZE7XSBTJ94N9BNJ2MA33VMAY2YPIRB";function sc(e,t,r){if("call"===e&&t.code===E.errors.SERVER_ERROR){let i=t.error;if(i&&(i.message.match(/reverted/i)||i.message.match(/VM execution error/i))){let n=i.data;if(n&&(n="0x"+n.replace(/^.*0x/i,"")),I(n))return n;sn.throwError("missing revert data in call exception",E.errors.CALL_EXCEPTION,{error:t,data:"0x"})}}let o=t.message;throw t.code===E.errors.SERVER_ERROR&&(t.error&&"string"==typeof t.error.message?o=t.error.message:"string"==typeof t.body?o=t.body:"string"==typeof t.responseText&&(o=t.responseText)),(o=(o||"").toLowerCase()).match(/insufficient funds/)&&sn.throwError("insufficient funds for intrinsic transaction cost",E.errors.INSUFFICIENT_FUNDS,{error:t,method:e,transaction:r}),o.match(/same hash was already imported|transaction nonce is too low|nonce too low/)&&sn.throwError("nonce has already been used",E.errors.NONCE_EXPIRED,{error:t,method:e,transaction:r}),o.match(/another transaction with same nonce/)&&sn.throwError("replacement fee too low",E.errors.REPLACEMENT_UNDERPRICED,{error:t,method:e,transaction:r}),o.match(/execution failed due to an exception|execution reverted/)&&sn.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",E.errors.UNPREDICTABLE_GAS_LIMIT,{error:t,method:e,transaction:r}),t}class sd extends oD{constructor(e,t){sn.checkNew(new.target,sd),super(e),eo(this,"baseUrl",this.getBaseUrl()),eo(this,"apiKey",t||su)}getBaseUrl(){switch(this.network?this.network.name:"invalid"){case"homestead":return"https://api.etherscan.io";case"ropsten":return"https://api-ropsten.etherscan.io";case"rinkeby":return"https://api-rinkeby.etherscan.io";case"kovan":return"https://api-kovan.etherscan.io";case"goerli":return"https://api-goerli.etherscan.io"}return sn.throwArgumentError("unsupported network","network",name)}getUrl(e,t){let r=Object.keys(t).reduce((e,r)=>{let i=t[r];return null!=i&&(e+=`&${r}=${i}`),e},""),i=this.apiKey?`&apikey=${this.apiKey}`:"";return`${this.baseUrl}/api?module=${e}${r}${i}`}getPostUrl(){return`${this.baseUrl}/api`}getPostData(e,t){return t.module=e,t.apikey=this.apiKey,t}fetch(e,t,r){return si(this,void 0,void 0,function*(){let i=r?this.getPostUrl():this.getUrl(e,t),n=r?this.getPostData(e,t):null,o="proxy"===e?sa:ss;this.emit("debug",{action:"request",request:i,provider:this});let s={url:i,throttleSlotInterval:1e3,throttleCallback:(e,t)=>(this.isCommunityResource()&&ov(),Promise.resolve(!0))},a=null;n&&(s.headers={"content-type":"application/x-www-form-urlencoded; charset=UTF-8"},a=Object.keys(n).map(e=>`${e}=${n[e]}`).join("&"));let l=yield oa(s,a,o||sa);return this.emit("debug",{action:"response",request:i,response:ef(l),provider:this}),l})}detectNetwork(){return si(this,void 0,void 0,function*(){return this.network})}perform(e,t){let r=Object.create(null,{perform:{get:()=>super.perform}});return si(this,void 0,void 0,function*(){switch(e){case"getBlockNumber":return this.fetch("proxy",{action:"eth_blockNumber"});case"getGasPrice":return this.fetch("proxy",{action:"eth_gasPrice"});case"getBalance":return this.fetch("account",{action:"balance",address:t.address,tag:t.blockTag});case"getTransactionCount":return this.fetch("proxy",{action:"eth_getTransactionCount",address:t.address,tag:t.blockTag});case"getCode":return this.fetch("proxy",{action:"eth_getCode",address:t.address,tag:t.blockTag});case"getStorageAt":return this.fetch("proxy",{action:"eth_getStorageAt",address:t.address,position:t.position,tag:t.blockTag});case"sendTransaction":return this.fetch("proxy",{action:"eth_sendRawTransaction",hex:t.signedTransaction},!0).catch(e=>sc("sendTransaction",e,t.signedTransaction));case"getBlock":if(t.blockTag)return this.fetch("proxy",{action:"eth_getBlockByNumber",tag:t.blockTag,boolean:t.includeTransactions?"true":"false"});throw Error("getBlock by blockHash not implemented");case"getTransaction":return this.fetch("proxy",{action:"eth_getTransactionByHash",txhash:t.transactionHash});case"getTransactionReceipt":return this.fetch("proxy",{action:"eth_getTransactionReceipt",txhash:t.transactionHash});case"call":{if("latest"!==t.blockTag)throw Error("EtherscanProvider does not support blockTag for call");let i=so(t.transaction);i.module="proxy",i.action="eth_call";try{return yield this.fetch("proxy",i,!0)}catch(n){return sc("call",n,t.transaction)}}case"estimateGas":{let o=so(t.transaction);o.module="proxy",o.action="eth_estimateGas";try{return yield this.fetch("proxy",o,!0)}catch(s){return sc("estimateGas",s,t.transaction)}}case"getLogs":{let a={action:"getLogs"};if(t.filter.fromBlock&&(a.fromBlock=sl(t.filter.fromBlock)),t.filter.toBlock&&(a.toBlock=sl(t.filter.toBlock)),t.filter.address&&(a.address=t.filter.address),t.filter.topics&&t.filter.topics.length>0&&(t.filter.topics.length>1&&sn.throwError("unsupported topic count",E.errors.UNSUPPORTED_OPERATION,{topics:t.filter.topics}),1===t.filter.topics.length)){let l=t.filter.topics[0];"string"==typeof l&&66===l.length||sn.throwError("unsupported topic format",E.errors.UNSUPPORTED_OPERATION,{topic0:l}),a.topic0=l}let u=yield this.fetch("logs",a),c={};for(let d=0;d<u.length;d++){let h=u[d];if(null==h.blockHash){if(null==c[h.blockNumber]){let f=yield this.getBlock(h.blockNumber);f&&(c[h.blockNumber]=f.hash)}h.blockHash=c[h.blockNumber]}}return u}case"getEtherPrice":return"homestead"!==this.network.name?0:parseFloat((yield this.fetch("stats",{action:"ethprice"})).ethusd)}return r.perform.call(this,e,t)})}getHistory(e,t,r){return si(this,void 0,void 0,function*(){let i={action:"txlist",address:yield this.resolveName(e),startblock:null==t?0:t,endblock:null==r?99999999:r,sort:"asc"};return(yield this.fetch("account",i)).map(e=>{["contractAddress","to"].forEach(function(t){""==e[t]&&delete e[t]}),null==e.creates&&null!=e.contractAddress&&(e.creates=e.contractAddress);let t=this.formatter.transactionResponse(e);return e.timeStamp&&(t.timestamp=parseInt(e.timeStamp)),t})})}isCommunityResource(){return this.apiKey===su}}function sh(e){for(let t=(e=e.slice()).length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1)),i=e[t];e[t]=e[r],e[r]=i}return e}var sf=function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};let sp=new E(od);function sy(){return(new Date).getTime()}function sm(e){let t=null;for(let r=0;r<e.length;r++){let i=e[r];if(null==i)return null;t?t.name===i.name&&t.chainId===i.chainId&&(t.ensAddress===i.ensAddress||null==t.ensAddress&&null==i.ensAddress)||sp.throwArgumentError("provider mismatch","networks",e):t=i}return t}function sv(e,t){e=e.slice().sort();let r=Math.floor(e.length/2);if(e.length%2)return e[r];let i=e[r-1],n=e[r];return null!=t&&Math.abs(i-n)>t?null:(i+n)/2}function sg(e){if(null===e)return"null";if("number"==typeof e||"boolean"==typeof e)return JSON.stringify(e);if("string"==typeof e)return e;if(Q.isBigNumber(e))return e.toString();if(Array.isArray(e))return JSON.stringify(e.map(e=>sg(e)));if("object"==typeof e){let t=Object.keys(e);return t.sort(),"{"+t.map(t=>{let r=e[t];return r="function"==typeof r?"[function]":sg(r),JSON.stringify(t)+":"+r}).join(",")+"}"}throw Error("unknown value type: "+typeof e)}let sb=1;function sw(e){let t=null,r=null,i=new Promise(i=>{r=setTimeout(t=function(){r&&(clearTimeout(r),r=null),i()},e)});return{cancel:t,getPromise:function(){return i},wait:e=>i=i.then(e)}}let s_=[E.errors.CALL_EXCEPTION,E.errors.INSUFFICIENT_FUNDS,E.errors.NONCE_EXPIRED,E.errors.REPLACEMENT_UNDERPRICED,E.errors.UNPREDICTABLE_GAS_LIMIT],sS=["address","args","errorArgs","errorSignature","method","transaction"];function sE(e,t){let r={weight:e.weight};return Object.defineProperty(r,"provider",{get:()=>e.provider}),e.start&&(r.start=e.start),t&&(r.duration=t-e.start),e.done&&(e.error?r.error=e.error:r.result=e.result||null),r}function sk(e,t){return sf(this,void 0,void 0,function*(){let r=e.provider;return null!=r.blockNumber&&r.blockNumber>=t||-1===t?r:ol(()=>new Promise((i,n)=>{setTimeout(function(){return r.blockNumber>=t?i(r):e.cancelled?i(null):i(void 0)},0)}),{oncePoll:r})})}function sN(e,t,r,i){return sf(this,void 0,void 0,function*(){let n=e.provider;switch(r){case"getBlockNumber":case"getGasPrice":return n[r]();case"getEtherPrice":if(n.getEtherPrice)return n.getEtherPrice();break;case"getBalance":case"getTransactionCount":case"getCode":return i.blockTag&&I(i.blockTag)&&(n=yield sk(e,t)),n[r](i.address,i.blockTag||"latest");case"getStorageAt":return i.blockTag&&I(i.blockTag)&&(n=yield sk(e,t)),n.getStorageAt(i.address,i.position,i.blockTag||"latest");case"getBlock":return i.blockTag&&I(i.blockTag)&&(n=yield sk(e,t)),n[i.includeTransactions?"getBlockWithTransactions":"getBlock"](i.blockTag||i.blockHash);case"call":case"estimateGas":return i.blockTag&&I(i.blockTag)&&(n=yield sk(e,t)),n[r](i.transaction);case"getTransaction":case"getTransactionReceipt":return n[r](i.transactionHash);case"getLogs":{let o=i.filter;return(o.fromBlock&&I(o.fromBlock)||o.toBlock&&I(o.toBlock))&&(n=yield sk(e,t)),n.getLogs(o)}}return sp.throwError("unknown method error",E.errors.UNKNOWN_ERROR,{method:r,params:i})})}class sA extends oD{constructor(e,t){sp.checkNew(new.target,sA),0===e.length&&sp.throwArgumentError("missing providers","providers",e);let r=e.map((e,t)=>{if(tX.isProvider(e)){let r=oy(e)?2e3:750,i=1;return Object.freeze({provider:e,weight:1,stallTimeout:r,priority:i})}let n=eu(e);null==n.priority&&(n.priority=1),null==n.stallTimeout&&(n.stallTimeout=oy(e)?2e3:750),null==n.weight&&(n.weight=1);let o=n.weight;return(o%1||o>512||o<1)&&sp.throwArgumentError("invalid weight; must be integer in [1, 512]",`providers[${t}].weight`,o),Object.freeze(n)}),i=r.reduce((e,t)=>e+t.weight,0);null==t?t=i/2:t>i&&sp.throwArgumentError("quorum will always fail; larger than total weight","quorum",t);let n=sm(r.map(e=>e.provider.network));null==n&&(n=new Promise((e,t)=>{setTimeout(()=>{this.detectNetwork().then(e,t)},0)})),super(n),eo(this,"providerConfigs",Object.freeze(r)),eo(this,"quorum",t),this._highestBlockNumber=-1}detectNetwork(){return sf(this,void 0,void 0,function*(){return sm((yield Promise.all(this.providerConfigs.map(e=>e.provider.getNetwork()))))})}perform(e,t){return sf(this,void 0,void 0,function*(){if("sendTransaction"===e){let r=yield Promise.all(this.providerConfigs.map(e=>e.provider.sendTransaction(t.signedTransaction).then(e=>e.hash,e=>e)));for(let i=0;i<r.length;i++){let n=r[i];if("string"==typeof n)return n}throw r[0]}-1===this._highestBlockNumber&&"getBlockNumber"!==e&&(yield this.getBlockNumber());let o=function(e,t,r){let i=sg;switch(t){case"getBlockNumber":return function(t){let r=t.map(e=>e.result),i=sv(t.map(e=>e.result),2);if(null!=i)return i=Math.ceil(i),r.indexOf(i+1)>=0&&i++,i>=e._highestBlockNumber&&(e._highestBlockNumber=i),e._highestBlockNumber};case"getGasPrice":return function(e){let t=e.map(e=>e.result);return t.sort(),t[Math.floor(t.length/2)]};case"getEtherPrice":return function(e){return sv(e.map(e=>e.result))};case"getBalance":case"getTransactionCount":case"getCode":case"getStorageAt":case"call":case"estimateGas":case"getLogs":break;case"getTransaction":case"getTransactionReceipt":i=function(e){return null==e?null:((e=eu(e)).confirmations=-1,sg(e))};break;case"getBlock":i=r.includeTransactions?function(e){return null==e?null:((e=eu(e)).transactions=e.transactions.map(e=>((e=eu(e)).confirmations=-1,e)),sg(e))}:function(e){return null==e?null:sg(e)};break;default:throw Error("unknown method: "+t)}return function(e,t){return function(r){let i={};r.forEach(t=>{let r=e(t.result);i[r]||(i[r]={count:0,result:t.result}),i[r].count++});let n=Object.keys(i);for(let o=0;o<n.length;o++){let s=i[n[o]];if(s.count>=t)return s.result}}}(i,e.quorum)}(this,e,t),s=sh(this.providerConfigs.map(eu));s.sort((e,t)=>e.priority-t.priority);let a=this._highestBlockNumber,l=0,u=!0;for(;;){let c=sy(),d=s.filter(e=>e.runner&&c-e.start<e.stallTimeout).reduce((e,t)=>e+t.weight,0);for(;d<this.quorum&&l<s.length;){let h=s[l++],f=sb++;h.start=sy(),h.staller=sw(h.stallTimeout),h.staller.wait(()=>{h.staller=null}),h.runner=sN(h,a,e,t).then(r=>{h.done=!0,h.result=r,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:f,backend:sE(h,sy()),request:{method:e,params:ef(t)},provider:this})},r=>{h.done=!0,h.error=r,this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:f,backend:sE(h,sy()),request:{method:e,params:ef(t)},provider:this})}),this.listenerCount("debug")&&this.emit("debug",{action:"request",rid:f,backend:sE(h,null),request:{method:e,params:ef(t)},provider:this}),d+=h.weight}let p=[];s.forEach(e=>{!e.done&&e.runner&&(p.push(e.runner),e.staller&&p.push(e.staller.getPromise()))}),p.length&&(yield Promise.race(p));let y=s.filter(e=>e.done&&null==e.error);if(y.length>=this.quorum){let m=o(y);if(void 0!==m)return s.forEach(e=>{e.staller&&e.staller.cancel(),e.cancelled=!0}),m;u||(yield sw(100).getPromise()),u=!1}let v=s.reduce((e,t)=>{if(!t.done||null==t.error)return e;let r=t.error.code;return s_.indexOf(r)>=0&&(e[r]||(e[r]={error:t.error,weight:0}),e[r].weight+=t.weight),e},{});if(Object.keys(v).forEach(e=>{let t=v[e];if(t.weight<this.quorum)return;s.forEach(e=>{e.staller&&e.staller.cancel(),e.cancelled=!0});let r=t.error,i={};sS.forEach(e=>{null!=r[e]&&(i[e]=r[e])}),sp.throwError(r.reason||r.message,e,i)}),0===s.filter(e=>!e.done).length)break}return s.forEach(e=>{e.staller&&e.staller.cancel(),e.cancelled=!0}),sp.throwError("failed to meet quorum",E.errors.SERVER_ERROR,{method:e,params:t,results:s.map(e=>sE(e)),provider:this})})}}let sP=null,sx=new E(od),sO="84842078b09946638c03157f83405213";class sT extends o3{constructor(e,t){let r=new sR(e,t),i=r.connection;i.password&&sx.throwError("INFURA WebSocket project secrets unsupported",E.errors.UNSUPPORTED_OPERATION,{operation:"InfuraProvider.getWebSocketProvider()"}),super(i.url.replace(/^http/i,"ws").replace("/v3/","/ws/v3/"),e),eo(this,"apiKey",r.projectId),eo(this,"projectId",r.projectId),eo(this,"projectSecret",r.projectSecret)}isCommunityResource(){return this.projectId===sO}}class sR extends o8{static getWebSocketProvider(e,t){return new sT(e,t)}static getApiKey(e){let t={apiKey:sO,projectId:sO,projectSecret:null};return null==e||("string"==typeof e?t.projectId=e:null!=e.projectSecret?(sx.assertArgument("string"==typeof e.projectId,"projectSecret requires a projectId","projectId",e.projectId),sx.assertArgument("string"==typeof e.projectSecret,"invalid projectSecret","projectSecret","[REDACTED]"),t.projectId=e.projectId,t.projectSecret=e.projectSecret):e.projectId&&(t.projectId=e.projectId),t.apiKey=t.projectId),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="mainnet.infura.io";break;case"ropsten":r="ropsten.infura.io";break;case"rinkeby":r="rinkeby.infura.io";break;case"kovan":r="kovan.infura.io";break;case"goerli":r="goerli.infura.io";break;case"matic":r="polygon-mainnet.infura.io";break;case"maticmum":r="polygon-mumbai.infura.io";break;case"optimism":r="optimism-mainnet.infura.io";break;case"optimism-kovan":r="optimism-kovan.infura.io";break;case"arbitrum":r="arbitrum-mainnet.infura.io";break;case"arbitrum-rinkeby":r="arbitrum-rinkeby.infura.io";break;default:sx.throwError("unsupported network",E.errors.INVALID_ARGUMENT,{argument:"network",value:e})}let i={allowGzip:!0,url:"https://"+r+"/v3/"+t.projectId,throttleCallback:(e,r)=>(t.projectId===sO&&ov(),Promise.resolve(!0))};return null!=t.projectSecret&&(i.user="",i.password=t.projectSecret),i}isCommunityResource(){return this.projectId===sO}}class sB extends o${send(e,t){let r={method:e,params:t,id:this._nextId++,jsonrpc:"2.0"};null==this._pendingBatch&&(this._pendingBatch=[]);let i={request:r,resolve:null,reject:null},n=new Promise((e,t)=>{i.resolve=e,i.reject=t});return this._pendingBatch.push(i),this._pendingBatchAggregator||(this._pendingBatchAggregator=setTimeout(()=>{let e=this._pendingBatch;this._pendingBatch=null,this._pendingBatchAggregator=null;let t=e.map(e=>e.request);return this.emit("debug",{action:"requestBatch",request:ef(t),provider:this}),oa(this.connection,JSON.stringify(t)).then(r=>{this.emit("debug",{action:"response",request:t,response:r,provider:this}),e.forEach((e,t)=>{let i=r[t];if(i.error){let n=Error(i.error.message);n.code=i.error.code,n.data=i.error.data,e.reject(n)}else e.resolve(i.result)})},r=>{this.emit("debug",{action:"response",error:r,request:t,provider:this}),e.forEach(e=>{e.reject(r)})})},10)),n}}let sC=new E(od);class sI extends o8{static getApiKey(e){return e&&"string"!=typeof e&&sC.throwArgumentError("invalid apiKey","apiKey",e),e||"ETHERS_JS_SHARED"}static getUrl(e,t){sC.warn("NodeSmith will be discontinued on 2019-12-20; please migrate to another platform.");let r=null;switch(e.name){case"homestead":r="https://ethereum.api.nodesmith.io/v1/mainnet/jsonrpc";break;case"ropsten":r="https://ethereum.api.nodesmith.io/v1/ropsten/jsonrpc";break;case"rinkeby":r="https://ethereum.api.nodesmith.io/v1/rinkeby/jsonrpc";break;case"goerli":r="https://ethereum.api.nodesmith.io/v1/goerli/jsonrpc";break;case"kovan":r="https://ethereum.api.nodesmith.io/v1/kovan/jsonrpc";break;default:sC.throwArgumentError("unsupported network","network",arguments[0])}return r+"?apiKey="+t}}let sM=new E(od),sU={homestead:"6004bcd10040261633ade990",ropsten:"6004bd4d0040261633ade991",rinkeby:"6004bda20040261633ade994",goerli:"6004bd860040261633ade992"};class sK extends o8{constructor(e,t){if(null==t){let r=es(new.target,"getNetwork")(e);if(r){let i=sU[r.name];i&&(t={applicationId:i,loadBalancer:!0})}null==t&&sM.throwError("unsupported network",E.errors.INVALID_ARGUMENT,{argument:"network",value:e})}super(e,t)}static getApiKey(e){null==e&&sM.throwArgumentError("PocketProvider.getApiKey does not support null apiKey","apiKey",e);let t={applicationId:null,loadBalancer:!1,applicationSecretKey:null};return"string"==typeof e?t.applicationId=e:null!=e.applicationSecretKey?(sM.assertArgument("string"==typeof e.applicationId,"applicationSecretKey requires an applicationId","applicationId",e.applicationId),sM.assertArgument("string"==typeof e.applicationSecretKey,"invalid applicationSecretKey","applicationSecretKey","[REDACTED]"),t.applicationId=e.applicationId,t.applicationSecretKey=e.applicationSecretKey,t.loadBalancer=!!e.loadBalancer):e.applicationId?(sM.assertArgument("string"==typeof e.applicationId,"apiKey.applicationId must be a string","apiKey.applicationId",e.applicationId),t.applicationId=e.applicationId,t.loadBalancer=!!e.loadBalancer):sM.throwArgumentError("unsupported PocketProvider apiKey","apiKey",e),t}static getUrl(e,t){let r=null;switch(e?e.name:"unknown"){case"homestead":r="eth-mainnet.gateway.pokt.network";break;case"ropsten":r="eth-ropsten.gateway.pokt.network";break;case"rinkeby":r="eth-rinkeby.gateway.pokt.network";break;case"goerli":r="eth-goerli.gateway.pokt.network";break;default:sM.throwError("unsupported network",E.errors.INVALID_ARGUMENT,{argument:"network",value:e})}let i=null;i=t.loadBalancer?`https://${r}/v1/lb/${t.applicationId}`:`https://${r}/v1/${t.applicationId}`;let n={url:i,headers:{}};return null!=t.applicationSecretKey&&(n.user="",n.password=t.applicationSecretKey),n}isCommunityResource(){return this.applicationId===sU[this.network.name]}}let sD=new E(od),sj=1;function sL(e,t){let r="Web3LegacyFetcher";return function(e,i){let n={method:e,params:i,id:sj++,jsonrpc:"2.0"};return new Promise((e,i)=>{this.emit("debug",{action:"request",fetcher:r,request:ef(n),provider:this}),t(n,(t,o)=>{if(t)return this.emit("debug",{action:"response",fetcher:r,error:t,request:n,provider:this}),i(t);if(this.emit("debug",{action:"response",fetcher:r,request:n,response:o,provider:this}),o.error){let s=Error(o.error.message);return s.code=o.error.code,s.data=o.error.data,i(s)}e(o.result)})})}}class sJ extends o${constructor(e,t){sD.checkNew(new.target,sJ),null==e&&sD.throwArgumentError("missing provider","provider",e);let r=null,i=null,n=null;"function"==typeof e?(r="unknown:",i=e):((r=e.host||e.path||"")||!e.isMetaMask||(r="metamask"),n=e,e.request?(""===r&&(r="eip-1193:"),i=function(e){return function(t,r){null==r&&(r=[]);let i={method:t,params:r};return this.emit("debug",{action:"request",fetcher:"Eip1193Fetcher",request:ef(i),provider:this}),e.request(i).then(e=>(this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:i,response:e,provider:this}),e),e=>{throw this.emit("debug",{action:"response",fetcher:"Eip1193Fetcher",request:i,error:e,provider:this}),e})}}(e)):e.sendAsync?i=sL(0,e.sendAsync.bind(e)):e.send?i=sL(0,e.send.bind(e)):sD.throwArgumentError("unsupported provider","provider",e),r||(r="unknown:")),super(r,t),eo(this,"jsonRpcFetchFunc",i),eo(this,"provider",n)}send(e,t){return this.jsonRpcFetchFunc(e,t)}}let sF=new E(od);function sq(e,t){if(null==e&&(e="homestead"),"string"==typeof e){let r=e.match(/^(ws|http)s?:/i);if(r)switch(r[1]){case"http":return new o$(e);case"ws":return new o3(e);default:sF.throwArgumentError("unsupported URL scheme","network",e)}}let i=nH(e);return i&&i._defaultProvider||sF.throwError("unsupported getDefaultProvider network",E.errors.NETWORK_ERROR,{operation:"getDefaultProvider",network:e}),i._defaultProvider({FallbackProvider:sA,AlchemyProvider:se,CloudflareProvider:sr,EtherscanProvider:sd,InfuraProvider:sR,JsonRpcProvider:o$,NodesmithProvider:sI,PocketProvider:sK,Web3Provider:sJ,IpcProvider:sP},t)}let sV=RegExp("^bytes([0-9]+)$"),sz=RegExp("^(u?int)([0-9]*)$"),sG=RegExp("^(.*)\\[([0-9]*)\\]$"),sH=new E("solidity/5.5.0");function sW(e,t,r){switch(e){case"address":return r?C(t,32):T(t);case"string":return eW(t);case"bytes":return T(t);case"bool":return t=t?"0x01":"0x00",r?C(t,32):T(t)}let i=e.match(sz);if(i){let n=parseInt(i[2]||"256");return(i[2]&&String(n)!==i[2]||n%8!=0||0===n||n>256)&&sH.throwArgumentError("invalid number type","type",e),r&&(n=256),C(t=Q.from(t).toTwos(n),n/8)}if(i=e.match(sV)){let o=parseInt(i[1]);return(String(o)!==i[1]||0===o||o>32)&&sH.throwArgumentError("invalid bytes type","type",e),T(t).byteLength!==o&&sH.throwArgumentError(`invalid value for ${e}`,"value",t),r?T((t+"0000000000000000000000000000000000000000000000000000000000000000").substring(0,66)):t}if((i=e.match(sG))&&Array.isArray(t)){let s=i[1];parseInt(i[2]||String(t.length))!=t.length&&sH.throwArgumentError(`invalid array length for ${e}`,"value",t);let a=[];return t.forEach(function(e){a.push(sW(s,e,!0))}),R(a)}return sH.throwArgumentError("invalid type","type",e)}function sZ(e,t){e.length!=t.length&&sH.throwArgumentError("wrong number of values; expected ${ types.length }","values",t);let r=[];return e.forEach(function(e,i){r.push(sW(e,t[i]))}),U(R(r))}function s$(e,t){return eE(sZ(e,t))}function sX(e,t){return iq(sZ(e,t))}function sY(e){let t=eW(e);if(t.length>31)throw Error("bytes32 string must be less than 32 bytes");return U(R([t,nD]).slice(0,32))}function sQ(e){let t=T(e);if(32!==t.length)throw Error("invalid bytes32 - not 32 bytes long");if(0!==t[31])throw Error("invalid bytes32 string - no null terminator");let r=31;for(;0===t[r-1];)r--;return eY(t.slice(0,r))}let s0=new E("units/5.5.0"),s1=["wei","kwei","mwei","gwei","szabo","finney","ether"];function s2(e){let t=String(e).split(".");(t.length>2||!t[0].match(/^-?[0-9]*$/)||t[1]&&!t[1].match(/^[0-9]*$/)||"."===e||"-."===e)&&s0.throwArgumentError("invalid value","value",e);let r=t[0],i="";for("-"===r.substring(0,1)&&(i="-",r=r.substring(1));"0"===r.substring(0,1);)r=r.substring(1);""===r&&(r="0");let n="";for(2===t.length&&(n="."+(t[1]||"0"));n.length>2&&"0"===n[n.length-1];)n=n.substring(0,n.length-1);let o=[];for(;r.length;){if(r.length<=3){o.unshift(r);break}{let s=r.length-3;o.unshift(r.substring(s)),r=r.substring(0,s)}}return i+o.join(",")+n}function s3(e,t){if("string"==typeof t){let r=s1.indexOf(t);-1!==r&&(t=3*r)}return im(e,null!=t?t:18)}function s6(e,t){if("string"!=typeof e&&s0.throwArgumentError("value must be a string","value",e),"string"==typeof t){let r=s1.indexOf(t);-1!==r&&(t=3*r)}return iv(e,null!=t?t:18)}function s5(e){return s3(e,18)}function s8(e){return s6(e,18)}let s4="ethers/5.5.3",s7=new E(s4);try{let s9=window;null==s9._ethers&&(s9._ethers=y)}catch(ae){}},3715:(e,t,r)=>{var i=t;i.utils=r(6436),i.common=r(5772),i.sha=r(9041),i.ripemd=r(2949),i.hmac=r(2344),i.sha1=i.sha.sha1,i.sha256=i.sha.sha256,i.sha224=i.sha.sha224,i.sha384=i.sha.sha384,i.sha512=i.sha.sha512,i.ripemd160=i.ripemd.ripemd160},5772:(e,t,r)=>{"use strict";var i=r(6436),n=r(9746);function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}t.BlockHash=o,o.prototype.update=function(e,t){if(e=i.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){var r=(e=this.pending).length%this._delta8;this.pending=e.slice(e.length-r,e.length),0===this.pending.length&&(this.pending=null),e=i.join32(e,0,e.length-r,this.endian);for(var n=0;n<e.length;n+=this._delta32)this._update(e,n,n+this._delta32)}return this},o.prototype.digest=function(e){return this.update(this._pad()),n(null===this.pending),this._digest(e)},o.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,r=t-(e+this.padLength)%t,i=Array(r+this.padLength);i[0]=128;for(var n=1;n<r;n++)i[n]=0;if(e<<=3,"big"===this.endian){for(var o=8;o<this.padLength;o++)i[n++]=0;i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=e>>>24&255,i[n++]=e>>>16&255,i[n++]=e>>>8&255,i[n++]=255&e}else for(i[n++]=255&e,i[n++]=e>>>8&255,i[n++]=e>>>16&255,i[n++]=e>>>24&255,i[n++]=0,i[n++]=0,i[n++]=0,i[n++]=0,o=8;o<this.padLength;o++)i[n++]=0;return i}},2344:(e,t,r)=>{"use strict";var i=r(6436),n=r(9746);function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);this.Hash=e,this.blockSize=e.blockSize/8,this.outSize=e.outSize/8,this.inner=null,this.outer=null,this._init(i.toArray(t,r))}e.exports=o,o.prototype._init=function(e){e.length>this.blockSize&&(e=(new this.Hash).update(e).digest()),n(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=(new this.Hash).update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=(new this.Hash).update(e)},o.prototype.update=function(e,t){return this.inner.update(e,t),this},o.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}},2949:(e,t,r)=>{"use strict";var i=r(6436),n=r(5772),o=i.rotl32,s=i.sum32,a=i.sum32_3,l=i.sum32_4,u=n.BlockHash;function c(){if(!(this instanceof c))return new c;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function d(e,t,r,i){return e<=15?t^r^i:e<=31?t&r|~t&i:e<=47?(t|~r)^i:e<=63?t&i|r&~i:t^(r|~i)}function h(e){return e<=15?0:e<=31?1518500249:e<=47?1859775393:e<=63?2400959708:2840853838}function f(e){return e<=15?1352829926:e<=31?1548603684:e<=47?1836072691:e<=63?2053994217:0}i.inherits(c,u),t.ripemd160=c,c.blockSize=512,c.outSize=160,c.hmacStrength=192,c.padLength=64,c.prototype._update=function(e,t){for(var r=this.h[0],i=this.h[1],n=this.h[2],u=this.h[3],c=this.h[4],g=r,b=i,w=n,_=u,S=c,E=0;E<80;E++){var k=s(o(l(r,d(E,i,n,u),e[p[E]+t],h(E)),m[E]),c);r=c,c=u,u=o(n,10),n=i,i=k,k=s(o(l(g,d(79-E,b,w,_),e[y[E]+t],f(E)),v[E]),S),g=S,S=_,_=o(w,10),w=b,b=k}k=a(this.h[1],n,_),this.h[1]=a(this.h[2],u,S),this.h[2]=a(this.h[3],c,g),this.h[3]=a(this.h[4],r,b),this.h[4]=a(this.h[0],i,w),this.h[0]=k},c.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"little"):i.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],y=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],m=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},9041:(e,t,r)=>{"use strict";t.sha1=r(4761),t.sha224=r(799),t.sha256=r(9344),t.sha384=r(772),t.sha512=r(5900)},4761:(e,t,r)=>{"use strict";var i=r(6436),n=r(5772),o=r(7038),s=i.rotl32,a=i.sum32,l=i.sum32_5,u=o.ft_1,c=n.BlockHash,d=[1518500249,1859775393,2400959708,3395469782];function h(){if(!(this instanceof h))return new h;c.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=Array(80)}i.inherits(h,c),e.exports=h,h.blockSize=512,h.outSize=160,h.hmacStrength=80,h.padLength=64,h.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=s(r[i-3]^r[i-8]^r[i-14]^r[i-16],1);var n=this.h[0],o=this.h[1],c=this.h[2],h=this.h[3],f=this.h[4];for(i=0;i<r.length;i++){var p=~~(i/20),y=l(s(n,5),u(p,o,c,h),f,r[i],d[p]);f=h,h=c,c=s(o,30),o=n,n=y}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],c),this.h[3]=a(this.h[3],h),this.h[4]=a(this.h[4],f)},h.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},799:(e,t,r)=>{"use strict";var i=r(6436),n=r(9344);function o(){if(!(this instanceof o))return new o;n.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}i.inherits(o,n),e.exports=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h.slice(0,7),"big"):i.split32(this.h.slice(0,7),"big")}},9344:(e,t,r)=>{"use strict";var i=r(6436),n=r(5772),o=r(7038),s=r(9746),a=i.sum32,l=i.sum32_4,u=i.sum32_5,c=o.ch32,d=o.maj32,h=o.s0_256,f=o.s1_256,p=o.g0_256,y=o.g1_256,m=n.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function g(){if(!(this instanceof g))return new g;m.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=Array(64)}i.inherits(g,m),e.exports=g,g.blockSize=512,g.outSize=256,g.hmacStrength=192,g.padLength=64,g.prototype._update=function(e,t){for(var r=this.W,i=0;i<16;i++)r[i]=e[t+i];for(;i<r.length;i++)r[i]=l(y(r[i-2]),r[i-7],p(r[i-15]),r[i-16]);var n=this.h[0],o=this.h[1],m=this.h[2],v=this.h[3],g=this.h[4],b=this.h[5],w=this.h[6],_=this.h[7];for(s(this.k.length===r.length),i=0;i<r.length;i++){var S=u(_,f(g),c(g,b,w),this.k[i],r[i]),E=a(h(n),d(n,o,m));_=w,w=b,b=g,g=a(v,S),v=m,m=o,o=n,n=a(S,E)}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],o),this.h[2]=a(this.h[2],m),this.h[3]=a(this.h[3],v),this.h[4]=a(this.h[4],g),this.h[5]=a(this.h[5],b),this.h[6]=a(this.h[6],w),this.h[7]=a(this.h[7],_)},g.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},772:(e,t,r)=>{"use strict";var i=r(6436),n=r(5900);function o(){if(!(this instanceof o))return new o;n.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}i.inherits(o,n),e.exports=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h.slice(0,12),"big"):i.split32(this.h.slice(0,12),"big")}},5900:(e,t,r)=>{"use strict";var i=r(6436),n=r(5772),o=r(9746),s=i.rotr64_hi,a=i.rotr64_lo,l=i.shr64_hi,u=i.shr64_lo,c=i.sum64,d=i.sum64_hi,h=i.sum64_lo,f=i.sum64_4_hi,p=i.sum64_4_lo,y=i.sum64_5_hi,m=i.sum64_5_lo,v=n.BlockHash,g=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=g,this.W=Array(160)}function w(e,t,r,i,n){var o=e&r^~e&n;return o<0&&(o+=4294967296),o}function _(e,t,r,i,n,o){var s=t&i^~t&o;return s<0&&(s+=4294967296),s}function S(e,t,r,i,n){var o=e&r^e&n^r&n;return o<0&&(o+=4294967296),o}function E(e,t,r,i,n,o){var s=t&i^t&o^i&o;return s<0&&(s+=4294967296),s}function k(e,t){var r=s(e,t,28)^s(t,e,2)^s(t,e,7);return r<0&&(r+=4294967296),r}function N(e,t){var r=a(e,t,28)^a(t,e,2)^a(t,e,7);return r<0&&(r+=4294967296),r}function A(e,t){var r=a(e,t,14)^a(e,t,18)^a(t,e,9);return r<0&&(r+=4294967296),r}function P(e,t){var r=s(e,t,1)^s(e,t,8)^l(e,t,7);return r<0&&(r+=4294967296),r}function x(e,t){var r=a(e,t,1)^a(e,t,8)^u(e,t,7);return r<0&&(r+=4294967296),r}function O(e,t){var r=a(e,t,19)^a(t,e,29)^u(e,t,6);return r<0&&(r+=4294967296),r}i.inherits(b,v),e.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(e,t){for(var r,i,n,o=this.W,a=0;a<32;a++)o[a]=e[t+a];for(;a<o.length;a+=2){var u=(r=o[a-4],i=o[a-3],n=void 0,(n=s(r,i,19)^s(i,r,29)^l(r,i,6))<0&&(n+=4294967296),n),c=O(o[a-4],o[a-3]),d=o[a-14],h=o[a-13],y=P(o[a-30],o[a-29]),m=x(o[a-30],o[a-29]),v=o[a-32],g=o[a-31];o[a]=f(u,c,d,h,y,m,v,g),o[a+1]=p(u,c,d,h,y,m,v,g)}},b.prototype._update=function(e,t){this._prepareBlock(e,t);var r,i,n,a=this.W,l=this.h[0],u=this.h[1],f=this.h[2],p=this.h[3],v=this.h[4],g=this.h[5],b=this.h[6],P=this.h[7],x=this.h[8],O=this.h[9],T=this.h[10],R=this.h[11],B=this.h[12],C=this.h[13],I=this.h[14],M=this.h[15];o(this.k.length===a.length);for(var U=0;U<a.length;U+=2){var K=I,D=M,j=(n=void 0,(n=s(r=x,i=O,14)^s(r,i,18)^s(i,r,9))<0&&(n+=4294967296),n),L=A(x,O),J=w(x,0,T,0,B),F=_(0,O,0,R,0,C),q=this.k[U],V=this.k[U+1],z=a[U],G=a[U+1],H=y(K,D,j,L,J,F,q,V,z,G),W=m(K,D,j,L,J,F,q,V,z,G);K=k(l,u),D=N(l,u),j=S(l,0,f,0,v),L=E(0,u,0,p,0,g);var Z=d(K,D,j,L),$=h(K,D,j,L);I=B,M=C,B=T,C=R,T=x,R=O,x=d(b,P,H,W),O=h(P,P,H,W),b=v,P=g,v=f,g=p,f=l,p=u,l=d(H,W,Z,$),u=h(H,W,Z,$)}c(this.h,0,l,u),c(this.h,2,f,p),c(this.h,4,v,g),c(this.h,6,b,P),c(this.h,8,x,O),c(this.h,10,T,R),c(this.h,12,B,C),c(this.h,14,I,M)},b.prototype._digest=function(e){return"hex"===e?i.toHex32(this.h,"big"):i.split32(this.h,"big")}},7038:(e,t,r)=>{"use strict";var i=r(6436).rotr32;function n(e,t,r){return e&t^~e&r}function o(e,t,r){return e&t^e&r^t&r}function s(e,t,r){return e^t^r}t.ft_1=function(e,t,r,i){return 0===e?n(t,r,i):1===e||3===e?s(t,r,i):2===e?o(t,r,i):void 0},t.ch32=n,t.maj32=o,t.p32=s,t.s0_256=function(e){return i(e,2)^i(e,13)^i(e,22)},t.s1_256=function(e){return i(e,6)^i(e,11)^i(e,25)},t.g0_256=function(e){return i(e,7)^i(e,18)^e>>>3},t.g1_256=function(e){return i(e,17)^i(e,19)^e>>>10}},6436:(e,t,r)=>{"use strict";var i=r(9746),n=r(5717);function o(e,t){return 55296==(64512&e.charCodeAt(t))&&!(t<0||t+1>=e.length)&&56320==(64512&e.charCodeAt(t+1))}function s(e){return(e>>>24|e>>>8&65280|e<<8&16711680|(255&e)<<24)>>>0}function a(e){return 1===e.length?"0"+e:e}function l(e){return 7===e.length?"0"+e:6===e.length?"00"+e:5===e.length?"000"+e:4===e.length?"0000"+e:3===e.length?"00000"+e:2===e.length?"000000"+e:1===e.length?"0000000"+e:e}t.inherits=n,t.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"==typeof e){if(t){if("hex"===t)for((e=e.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(e="0"+e),n=0;n<e.length;n+=2)r.push(parseInt(e[n]+e[n+1],16))}else for(var i=0,n=0;n<e.length;n++){var s=e.charCodeAt(n);s<128?r[i++]=s:s<2048?(r[i++]=s>>6|192,r[i++]=63&s|128):o(e,n)?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++n)),r[i++]=s>>18|240,r[i++]=s>>12&63|128,r[i++]=s>>6&63|128,r[i++]=63&s|128):(r[i++]=s>>12|224,r[i++]=s>>6&63|128,r[i++]=63&s|128)}}else for(n=0;n<e.length;n++)r[n]=0|e[n];return r},t.toHex=function(e){for(var t="",r=0;r<e.length;r++)t+=a(e[r].toString(16));return t},t.htonl=s,t.toHex32=function(e,t){for(var r="",i=0;i<e.length;i++){var n=e[i];"little"===t&&(n=s(n)),r+=l(n.toString(16))}return r},t.zero2=a,t.zero8=l,t.join32=function(e,t,r,n){var o,s=r-t;i(s%4==0);for(var a=Array(s/4),l=0,u=t;l<a.length;l++,u+=4)o="big"===n?e[u]<<24|e[u+1]<<16|e[u+2]<<8|e[u+3]:e[u+3]<<24|e[u+2]<<16|e[u+1]<<8|e[u],a[l]=o>>>0;return a},t.split32=function(e,t){for(var r=Array(4*e.length),i=0,n=0;i<e.length;i++,n+=4){var o=e[i];"big"===t?(r[n]=o>>>24,r[n+1]=o>>>16&255,r[n+2]=o>>>8&255,r[n+3]=255&o):(r[n+3]=o>>>24,r[n+2]=o>>>16&255,r[n+1]=o>>>8&255,r[n]=255&o)}return r},t.rotr32=function(e,t){return e>>>t|e<<32-t},t.rotl32=function(e,t){return e<<t|e>>>32-t},t.sum32=function(e,t){return e+t>>>0},t.sum32_3=function(e,t,r){return e+t+r>>>0},t.sum32_4=function(e,t,r,i){return e+t+r+i>>>0},t.sum32_5=function(e,t,r,i,n){return e+t+r+i+n>>>0},t.sum64=function(e,t,r,i){var n=e[t],o=i+e[t+1]>>>0,s=(o<i?1:0)+r+n;e[t]=s>>>0,e[t+1]=o},t.sum64_hi=function(e,t,r,i){return(t+i>>>0<t?1:0)+e+r>>>0},t.sum64_lo=function(e,t,r,i){return t+i>>>0},t.sum64_4_hi=function(e,t,r,i,n,o,s,a){var l,u=t;return e+r+n+s+(l=0+(((u=u+i>>>0)<t?1:0)+((u=u+o>>>0)<o?1:0)+((u=u+a>>>0)<a?1:0)))>>>0},t.sum64_4_lo=function(e,t,r,i,n,o,s,a){return t+i+o+a>>>0},t.sum64_5_hi=function(e,t,r,i,n,o,s,a,l,u){var c,d=t;return e+r+n+s+l+(c=0+(((d=d+i>>>0)<t?1:0)+((d=d+o>>>0)<o?1:0)+((d=d+a>>>0)<a?1:0)+((d=d+u>>>0)<u?1:0)))>>>0},t.sum64_5_lo=function(e,t,r,i,n,o,s,a,l,u){return t+i+o+a+u>>>0},t.rotr64_hi=function(e,t,r){return(t<<32-r|e>>>r)>>>0},t.rotr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0},t.shr64_hi=function(e,t,r){return e>>>r},t.shr64_lo=function(e,t,r){return(e<<32-r|t>>>r)>>>0}},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},1094:(e,t,r)=>{var i;!function(){"use strict";var n="input is invalid type",o="object"==typeof window,s=o?window:{};s.JS_SHA3_NO_WINDOW&&(o=!1);var a=!o&&"object"==typeof self;!s.JS_SHA3_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?s=r.g:a&&(s=self);var l=!s.JS_SHA3_NO_COMMON_JS&&e.exports,u=r.amdO,c=!s.JS_SHA3_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,d="0123456789abcdef".split(""),h=[4,1024,262144,67108864],f=[0,8,16,24],p=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],y=[224,256,384,512],m=[128,256],v=["hex","buffer","arrayBuffer","array","digest"],g={128:168,256:136};!s.JS_SHA3_NO_NODE_JS&&Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),c&&(s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(e){return"object"==typeof e&&e.buffer&&e.buffer.constructor===ArrayBuffer});for(var b=function(e,t,r){return function(i){return new I(e,t,e).update(i)[r]()}},w=function(e,t,r){return function(i,n){return new I(e,t,n).update(i)[r]()}},_=function(e,t,r){return function(t,i,n,o){return A["cshake"+e].update(t,i,n,o)[r]()}},S=function(e,t,r){return function(t,i,n,o){return A["kmac"+e].update(t,i,n,o)[r]()}},E=function(e,t,r,i){for(var n=0;n<v.length;++n){var o=v[n];e[o]=t(r,i,o)}return e},k=function(e,t){var r=b(e,t,"hex");return r.create=function(){return new I(e,t,e)},r.update=function(e){return r.create().update(e)},E(r,b,e,t)},N=[{name:"keccak",padding:[1,256,65536,16777216],bits:y,createMethod:k},{name:"sha3",padding:[6,1536,393216,100663296],bits:y,createMethod:k},{name:"shake",padding:[31,7936,2031616,520093696],bits:m,createMethod:function(e,t){var r=w(e,t,"hex");return r.create=function(r){return new I(e,t,r)},r.update=function(e,t){return r.create(t).update(e)},E(r,w,e,t)}},{name:"cshake",padding:h,bits:m,createMethod:function(e,t){var r=g[e],i=_(e,0,"hex");return i.create=function(i,n,o){return n||o?new I(e,t,i).bytepad([n,o],r):A["shake"+e].create(i)},i.update=function(e,t,r,n){return i.create(t,r,n).update(e)},E(i,_,e,t)}},{name:"kmac",padding:h,bits:m,createMethod:function(e,t){var r=g[e],i=S(e,0,"hex");return i.create=function(i,n,o){return new M(e,t,n).bytepad(["KMAC",o],r).bytepad([i],r)},i.update=function(e,t,r,n){return i.create(e,r,n).update(t)},E(i,S,e,t)}}],A={},P=[],x=0;x<N.length;++x)for(var O=N[x],T=O.bits,R=0;R<T.length;++R){var B=O.name+"_"+T[R];if(P.push(B),A[B]=O.createMethod(T[R],O.padding),"sha3"!==O.name){var C=O.name+T[R];P.push(C),A[C]=A[B]}}function I(e,t,r){this.blocks=[],this.s=[],this.padding=t,this.outputBits=r,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(e<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=r>>5,this.extraBytes=(31&r)>>3;for(var i=0;i<50;++i)this.s[i]=0}function M(e,t,r){I.call(this,e,t,r)}I.prototype.update=function(e){if(this.finalized)throw Error("finalize already called");var t,r=typeof e;if("string"!==r){if("object"!==r||null===e)throw Error(n);if(c&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||c&&ArrayBuffer.isView(e)))throw Error(n);t=!0}for(var i,o,s=this.blocks,a=this.byteCount,l=e.length,u=this.blockCount,d=0,h=this.s;d<l;){if(this.reset)for(this.reset=!1,s[0]=this.block,i=1;i<u+1;++i)s[i]=0;if(t)for(i=this.start;d<l&&i<a;++d)s[i>>2]|=e[d]<<f[3&i++];else for(i=this.start;d<l&&i<a;++d)(o=e.charCodeAt(d))<128?s[i>>2]|=o<<f[3&i++]:o<2048?(s[i>>2]|=(192|o>>6)<<f[3&i++],s[i>>2]|=(128|63&o)<<f[3&i++]):o<55296||o>=57344?(s[i>>2]|=(224|o>>12)<<f[3&i++],s[i>>2]|=(128|o>>6&63)<<f[3&i++],s[i>>2]|=(128|63&o)<<f[3&i++]):(o=65536+((1023&o)<<10|1023&e.charCodeAt(++d)),s[i>>2]|=(240|o>>18)<<f[3&i++],s[i>>2]|=(128|o>>12&63)<<f[3&i++],s[i>>2]|=(128|o>>6&63)<<f[3&i++],s[i>>2]|=(128|63&o)<<f[3&i++]);if(this.lastByteIndex=i,i>=a){for(this.start=i-a,this.block=s[u],i=0;i<u;++i)h[i]^=s[i];U(h),this.reset=!0}else this.start=i}return this},I.prototype.encode=function(e,t){var r=255&e,i=1,n=[r];for(r=255&(e>>=8);r>0;)n.unshift(r),r=255&(e>>=8),++i;return t?n.push(i):n.unshift(i),this.update(n),n.length},I.prototype.encodeString=function(e){var t,r=typeof e;if("string"!==r){if("object"!==r||null===e)throw Error(n);if(c&&e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!(Array.isArray(e)||c&&ArrayBuffer.isView(e)))throw Error(n);t=!0}var i=0,o=e.length;if(t)i=o;else for(var s=0;s<e.length;++s){var a=e.charCodeAt(s);a<128?i+=1:a<2048?i+=2:a<55296||a>=57344?i+=3:(a=65536+((1023&a)<<10|1023&e.charCodeAt(++s)),i+=4)}return i+=this.encode(8*i),this.update(e),i},I.prototype.bytepad=function(e,t){for(var r=this.encode(t),i=0;i<e.length;++i)r+=this.encodeString(e[i]);var n=t-r%t,o=[];return o.length=n,this.update(o),this},I.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,t=this.lastByteIndex,r=this.blockCount,i=this.s;if(e[t>>2]|=this.padding[3&t],this.lastByteIndex===this.byteCount)for(e[0]=e[r],t=1;t<r+1;++t)e[t]=0;for(e[r-1]|=2147483648,t=0;t<r;++t)i[t]^=e[t];U(i)}},I.prototype.toString=I.prototype.hex=function(){this.finalize();for(var e,t=this.blockCount,r=this.s,i=this.outputBlocks,n=this.extraBytes,o=0,s=0,a="";s<i;){for(o=0;o<t&&s<i;++o,++s)a+=d[(e=r[o])>>4&15]+d[15&e]+d[e>>12&15]+d[e>>8&15]+d[e>>20&15]+d[e>>16&15]+d[e>>28&15]+d[e>>24&15];s%t==0&&(U(r),o=0)}return n&&(a+=d[(e=r[o])>>4&15]+d[15&e],n>1&&(a+=d[e>>12&15]+d[e>>8&15]),n>2&&(a+=d[e>>20&15]+d[e>>16&15])),a},I.prototype.arrayBuffer=function(){this.finalize();var e,t=this.blockCount,r=this.s,i=this.outputBlocks,n=this.extraBytes,o=0,s=0,a=this.outputBits>>3;e=new ArrayBuffer(n?i+1<<2:a);for(var l=new Uint32Array(e);s<i;){for(o=0;o<t&&s<i;++o,++s)l[s]=r[o];s%t==0&&U(r)}return n&&(l[o]=r[o],e=e.slice(0,a)),e},I.prototype.buffer=I.prototype.arrayBuffer,I.prototype.digest=I.prototype.array=function(){this.finalize();for(var e,t,r=this.blockCount,i=this.s,n=this.outputBlocks,o=this.extraBytes,s=0,a=0,l=[];a<n;){for(s=0;s<r&&a<n;++s,++a)e=a<<2,t=i[s],l[e]=255&t,l[e+1]=t>>8&255,l[e+2]=t>>16&255,l[e+3]=t>>24&255;a%r==0&&U(i)}return o&&(e=a<<2,t=i[s],l[e]=255&t,o>1&&(l[e+1]=t>>8&255),o>2&&(l[e+2]=t>>16&255)),l},M.prototype=new I,M.prototype.finalize=function(){return this.encode(this.outputBits,!0),I.prototype.finalize.call(this)};var U=function(e){var t,r,i,n,o,s,a,l,u,c,d,h,f,y,m,v,g,b,w,_,S,E,k,N,A,P,x,O,T,R,B,C,I,M,U,K,D,j,L,J,F,q,V,z,G,H,W,Z,$,X,Y,Q,ee,et,er,ei,en,eo,es,ea,el,eu,ec;for(i=0;i<48;i+=2)n=e[0]^e[10]^e[20]^e[30]^e[40],o=e[1]^e[11]^e[21]^e[31]^e[41],s=e[2]^e[12]^e[22]^e[32]^e[42],a=e[3]^e[13]^e[23]^e[33]^e[43],l=e[4]^e[14]^e[24]^e[34]^e[44],u=e[5]^e[15]^e[25]^e[35]^e[45],c=e[6]^e[16]^e[26]^e[36]^e[46],d=e[7]^e[17]^e[27]^e[37]^e[47],t=(h=e[8]^e[18]^e[28]^e[38]^e[48])^(s<<1|a>>>31),r=(f=e[9]^e[19]^e[29]^e[39]^e[49])^(a<<1|s>>>31),e[0]^=t,e[1]^=r,e[10]^=t,e[11]^=r,e[20]^=t,e[21]^=r,e[30]^=t,e[31]^=r,e[40]^=t,e[41]^=r,t=n^(l<<1|u>>>31),r=o^(u<<1|l>>>31),e[2]^=t,e[3]^=r,e[12]^=t,e[13]^=r,e[22]^=t,e[23]^=r,e[32]^=t,e[33]^=r,e[42]^=t,e[43]^=r,t=s^(c<<1|d>>>31),r=a^(d<<1|c>>>31),e[4]^=t,e[5]^=r,e[14]^=t,e[15]^=r,e[24]^=t,e[25]^=r,e[34]^=t,e[35]^=r,e[44]^=t,e[45]^=r,t=l^(h<<1|f>>>31),r=u^(f<<1|h>>>31),e[6]^=t,e[7]^=r,e[16]^=t,e[17]^=r,e[26]^=t,e[27]^=r,e[36]^=t,e[37]^=r,e[46]^=t,e[47]^=r,t=c^(n<<1|o>>>31),r=d^(o<<1|n>>>31),e[8]^=t,e[9]^=r,e[18]^=t,e[19]^=r,e[28]^=t,e[29]^=r,e[38]^=t,e[39]^=r,e[48]^=t,e[49]^=r,y=e[0],m=e[1],H=e[11]<<4|e[10]>>>28,W=e[10]<<4|e[11]>>>28,O=e[20]<<3|e[21]>>>29,T=e[21]<<3|e[20]>>>29,ea=e[31]<<9|e[30]>>>23,el=e[30]<<9|e[31]>>>23,q=e[40]<<18|e[41]>>>14,V=e[41]<<18|e[40]>>>14,M=e[2]<<1|e[3]>>>31,U=e[3]<<1|e[2]>>>31,v=e[13]<<12|e[12]>>>20,g=e[12]<<12|e[13]>>>20,Z=e[22]<<10|e[23]>>>22,$=e[23]<<10|e[22]>>>22,R=e[33]<<13|e[32]>>>19,B=e[32]<<13|e[33]>>>19,eu=e[42]<<2|e[43]>>>30,ec=e[43]<<2|e[42]>>>30,et=e[5]<<30|e[4]>>>2,er=e[4]<<30|e[5]>>>2,K=e[14]<<6|e[15]>>>26,D=e[15]<<6|e[14]>>>26,b=e[25]<<11|e[24]>>>21,w=e[24]<<11|e[25]>>>21,X=e[34]<<15|e[35]>>>17,Y=e[35]<<15|e[34]>>>17,C=e[45]<<29|e[44]>>>3,I=e[44]<<29|e[45]>>>3,N=e[6]<<28|e[7]>>>4,A=e[7]<<28|e[6]>>>4,ei=e[17]<<23|e[16]>>>9,en=e[16]<<23|e[17]>>>9,j=e[26]<<25|e[27]>>>7,L=e[27]<<25|e[26]>>>7,_=e[36]<<21|e[37]>>>11,S=e[37]<<21|e[36]>>>11,Q=e[47]<<24|e[46]>>>8,ee=e[46]<<24|e[47]>>>8,z=e[8]<<27|e[9]>>>5,G=e[9]<<27|e[8]>>>5,P=e[18]<<20|e[19]>>>12,x=e[19]<<20|e[18]>>>12,eo=e[29]<<7|e[28]>>>25,es=e[28]<<7|e[29]>>>25,J=e[38]<<8|e[39]>>>24,F=e[39]<<8|e[38]>>>24,E=e[48]<<14|e[49]>>>18,k=e[49]<<14|e[48]>>>18,e[0]=y^~v&b,e[1]=m^~g&w,e[10]=N^~P&O,e[11]=A^~x&T,e[20]=M^~K&j,e[21]=U^~D&L,e[30]=z^~H&Z,e[31]=G^~W&$,e[40]=et^~ei&eo,e[41]=er^~en&es,e[2]=v^~b&_,e[3]=g^~w&S,e[12]=P^~O&R,e[13]=x^~T&B,e[22]=K^~j&J,e[23]=D^~L&F,e[32]=H^~Z&X,e[33]=W^~$&Y,e[42]=ei^~eo&ea,e[43]=en^~es&el,e[4]=b^~_&E,e[5]=w^~S&k,e[14]=O^~R&C,e[15]=T^~B&I,e[24]=j^~J&q,e[25]=L^~F&V,e[34]=Z^~X&Q,e[35]=$^~Y&ee,e[44]=eo^~ea&eu,e[45]=es^~el&ec,e[6]=_^~E&y,e[7]=S^~k&m,e[16]=R^~C&N,e[17]=B^~I&A,e[26]=J^~q&M,e[27]=F^~V&U,e[36]=X^~Q&z,e[37]=Y^~ee&G,e[46]=ea^~eu&et,e[47]=el^~ec&er,e[8]=E^~y&v,e[9]=k^~m&g,e[18]=C^~N&P,e[19]=I^~A&x,e[28]=q^~M&K,e[29]=V^~U&D,e[38]=Q^~z&H,e[39]=ee^~G&W,e[48]=eu^~et&ei,e[49]=ec^~er&en,e[0]^=p[i],e[1]^=p[i+1]};if(l)e.exports=A;else{for(x=0;x<P.length;++x)s[P[x]]=A[P[x]];u&&(void 0===(i=(function(){return A}).call(t,r,t,e))||(e.exports=i))}}()},9746:e=>{function t(e,t){if(!e)throw Error(t||"Assertion failed")}e.exports=t,t.equal=function(e,t,r){if(e!=t)throw Error(r||"Assertion failed: "+e+" != "+t)}},7635:function(e){"use strict";!function(t){let r=2147483647;function i(e){let t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),r=1779033703,i=3144134277,n=1013904242,o=2773480762,s=1359893119,a=2600822924,l=528734635,u=1541459225,c=new Uint32Array(64);function d(e){let d=0,h=e.length;for(;h>=64;){let f,p,y,m,v,g=r,b=i,w=n,_=o,S=s,E=a,k=l,N=u;for(p=0;p<16;p++)y=d+4*p,c[p]=(255&e[y])<<24|(255&e[y+1])<<16|(255&e[y+2])<<8|255&e[y+3];for(p=16;p<64;p++)m=((f=c[p-2])>>>17|f<<15)^(f>>>19|f<<13)^f>>>10,v=((f=c[p-15])>>>7|f<<25)^(f>>>18|f<<14)^f>>>3,c[p]=(m+c[p-7]|0)+(v+c[p-16]|0)|0;for(p=0;p<64;p++)m=(((S>>>6|S<<26)^(S>>>11|S<<21)^(S>>>25|S<<7))+(S&E^~S&k)|0)+(N+(t[p]+c[p]|0)|0)|0,v=((g>>>2|g<<30)^(g>>>13|g<<19)^(g>>>22|g<<10))+(g&b^g&w^b&w)|0,N=k,k=E,E=S,S=_+m|0,_=w,w=b,b=g,g=m+v|0;r=r+g|0,i=i+b|0,n=n+w|0,o=o+_|0,s=s+S|0,a=a+E|0,l=l+k|0,u=u+N|0,d+=64,h-=64}}d(e);let h,f=e.length%64,p=e.length/536870912|0,y=e.length<<3,m=f<56?56:120,v=e.slice(e.length-f,e.length);for(v.push(128),h=f+1;h<m;h++)v.push(0);return v.push(p>>>24&255),v.push(p>>>16&255),v.push(p>>>8&255),v.push(p>>>0&255),v.push(y>>>24&255),v.push(y>>>16&255),v.push(y>>>8&255),v.push(y>>>0&255),d(v),[r>>>24&255,r>>>16&255,r>>>8&255,r>>>0&255,i>>>24&255,i>>>16&255,i>>>8&255,i>>>0&255,n>>>24&255,n>>>16&255,n>>>8&255,n>>>0&255,o>>>24&255,o>>>16&255,o>>>8&255,o>>>0&255,s>>>24&255,s>>>16&255,s>>>8&255,s>>>0&255,a>>>24&255,a>>>16&255,a>>>8&255,a>>>0&255,l>>>24&255,l>>>16&255,l>>>8&255,l>>>0&255,u>>>24&255,u>>>16&255,u>>>8&255,u>>>0&255]}function n(e,t,r){e=e.length<=64?e:i(e);let n=64+t.length+4,o=Array(n),s=Array(64),a,l=[];for(a=0;a<64;a++)o[a]=54;for(a=0;a<e.length;a++)o[a]^=e[a];for(a=0;a<t.length;a++)o[64+a]=t[a];for(a=n-4;a<n;a++)o[a]=0;for(a=0;a<64;a++)s[a]=92;for(a=0;a<e.length;a++)s[a]^=e[a];function u(){for(let e=n-1;e>=n-4;e--){if(o[e]++,o[e]<=255)return;o[e]=0}}for(;r>=32;)u(),l=l.concat(i(s.concat(i(o)))),r-=32;return r>0&&(u(),l=l.concat(i(s.concat(i(o))).slice(0,r))),l}function o(e,t,r,i,n){let o;for(u(e,16*(2*r-1),n,0,16),o=0;o<2*r;o++)l(e,16*o,n,16),a(n,i),u(n,0,e,t+16*o,16);for(o=0;o<r;o++)u(e,t+2*o*16,e,16*o,16);for(o=0;o<r;o++)u(e,t+16*(2*o+1),e,16*(o+r),16)}function s(e,t){return e<<t|e>>>32-t}function a(e,t){u(e,0,t,0,16);for(let r=8;r>0;r-=2)t[4]^=s(t[0]+t[12],7),t[8]^=s(t[4]+t[0],9),t[12]^=s(t[8]+t[4],13),t[0]^=s(t[12]+t[8],18),t[9]^=s(t[5]+t[1],7),t[13]^=s(t[9]+t[5],9),t[1]^=s(t[13]+t[9],13),t[5]^=s(t[1]+t[13],18),t[14]^=s(t[10]+t[6],7),t[2]^=s(t[14]+t[10],9),t[6]^=s(t[2]+t[14],13),t[10]^=s(t[6]+t[2],18),t[3]^=s(t[15]+t[11],7),t[7]^=s(t[3]+t[15],9),t[11]^=s(t[7]+t[3],13),t[15]^=s(t[11]+t[7],18),t[1]^=s(t[0]+t[3],7),t[2]^=s(t[1]+t[0],9),t[3]^=s(t[2]+t[1],13),t[0]^=s(t[3]+t[2],18),t[6]^=s(t[5]+t[4],7),t[7]^=s(t[6]+t[5],9),t[4]^=s(t[7]+t[6],13),t[5]^=s(t[4]+t[7],18),t[11]^=s(t[10]+t[9],7),t[8]^=s(t[11]+t[10],9),t[9]^=s(t[8]+t[11],13),t[10]^=s(t[9]+t[8],18),t[12]^=s(t[15]+t[14],7),t[13]^=s(t[12]+t[15],9),t[14]^=s(t[13]+t[12],13),t[15]^=s(t[14]+t[13],18);for(let i=0;i<16;++i)e[i]+=t[i]}function l(e,t,r,i){for(let n=0;n<i;n++)r[n]^=e[t+n]}function u(e,t,r,i,n){for(;n--;)r[i++]=e[t++]}function c(e){if(!e||"number"!=typeof e.length)return!1;for(let t=0;t<e.length;t++){let r=e[t];if("number"!=typeof r||r%1||r<0||r>=256)return!1}return!0}function d(e,t){if("number"!=typeof e||e%1)throw Error("invalid "+t);return e}function h(e,t,i,s,a,h,f){if(i=d(i,"N"),s=d(s,"r"),a=d(a,"p"),h=d(h,"dkLen"),0===i||0!=(i&i-1))throw Error("N must be power of 2");if(i>r/128/s)throw Error("N too large");if(s>r/128/a)throw Error("r too large");if(!c(e))throw Error("password must be an array or buffer");if(e=Array.prototype.slice.call(e),!c(t))throw Error("salt must be an array or buffer");let p=n(e,t=Array.prototype.slice.call(t),128*a*s),y=new Uint32Array(32*a*s);for(let m=0;m<y.length;m++){let v=4*m;y[m]=(255&p[v+3])<<24|(255&p[v+2])<<16|(255&p[v+1])<<8|(255&p[v+0])<<0}let g=new Uint32Array(64*s),b=new Uint32Array(32*s*i),w=32*s,_=new Uint32Array(16),S=new Uint32Array(16),E=a*i*2,k,N,A=0,P=null,x=!1,O=0,T=0,R=f?parseInt(1e3/s):4294967295,B="undefined"!=typeof setImmediate?setImmediate:setTimeout,C=function(){let t;if(x)return f(Error("cancelled"),A/E);switch(O){case 0:u(y,N=32*T*s,g,0,w),O=1,k=0;case 1:(t=i-k)>R&&(t=R);for(let r=0;r<t;r++)u(g,0,b,(k+r)*w,w),o(g,w,s,_,S);if(k+=t,A+=t,f){let c=parseInt(1e3*A/E);if(c!==P){if(x=f(null,A/E))break;P=c}}if(k<i)break;k=0,O=2;case 2:(t=i-k)>R&&(t=R);for(let d=0;d<t;d++){let m=g[16*(2*s-1)]&i-1;l(b,m*w,g,w),o(g,w,s,_,S)}if(k+=t,A+=t,f){let v=parseInt(1e3*A/E);if(v!==P){if(x=f(null,A/E))break;P=v}}if(k<i)break;if(u(g,0,y,N,w),++T<a){O=0;break}p=[];for(let I=0;I<y.length;I++)p.push(y[I]>>0&255),p.push(y[I]>>8&255),p.push(y[I]>>16&255),p.push(y[I]>>24&255);let M=n(e,p,h);return f&&f(null,1,M),M}f&&B(C)};if(!f)for(;;){let I=C();if(null!=I)return I}C()}let f={scrypt:function(e,t,r,i,n,o,s){return new Promise(function(a,l){let u=0;s&&s(0),h(e,t,r,i,n,o,function(e,t,r){if(e)l(e);else if(r)s&&1!==u&&s(1),a(new Uint8Array(r));else if(s&&t!==u)return u=t,s(t)})})},syncScrypt:function(e,t,r,i,n,o){return new Uint8Array(h(e,t,r,i,n,o))}};e.exports=f}()},1962:function(e,t,r){"use strict";var i,n=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})},o=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,n){!function(e,t,r,i){Promise.resolve(i).then(function(t){e({value:t,done:r})},t)}(i,n,(t=e[r](t)).done,t.value)})}}},s=this&&this.__await||function(e){return this instanceof s?(this.v=e,this):new s(e)},a=this&&this.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),o=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){n[e]&&(i[e]=function(t){return new Promise(function(r,i){o.push([e,t,r,i])>1||l(e,t)})})}function l(e,t){var r;try{(r=n[e](t)).value instanceof s?Promise.resolve(r.value.v).then(u,c):d(o[0][2],r)}catch(i){d(o[0][3],i)}}function u(e){l("next",e)}function c(e){l("throw",e)}function d(e,t){e(t),o.shift(),o.length&&l(o[0][0],o[0][1])}},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.GrpcStatus=t.ApiUrls=t.SortDirection=t.MessageApi=void 0;let u=r(1796),c=r(5506),d=l(r(4203)),h=r(4147),f=r(5592);t.MessageApi=u.messageApi.MessageApi,t.SortDirection=u.messageApi.SortDirection,t.ApiUrls={local:"http://localhost:5555",dev:"https://dev.xmtp.network",production:"https://production.xmtp.network"},(i=t.GrpcStatus||(t.GrpcStatus={}))[i.OK=0]="OK",i[i.CANCELLED=1]="CANCELLED",i[i.UNKNOWN=2]="UNKNOWN",i[i.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",i[i.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",i[i.NOT_FOUND=5]="NOT_FOUND",i[i.ALREADY_EXISTS=6]="ALREADY_EXISTS",i[i.PERMISSION_DENIED=7]="PERMISSION_DENIED",i[i.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",i[i.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",i[i.ABORTED=10]="ABORTED",i[i.OUT_OF_RANGE=11]="OUT_OF_RANGE",i[i.UNIMPLEMENTED=12]="UNIMPLEMENTED",i[i.INTERNAL=13]="INTERNAL",i[i.UNAVAILABLE=14]="UNAVAILABLE",i[i.DATA_LOSS=15]="DATA_LOSS",i[i.UNAUTHENTICATED=16]="UNAUTHENTICATED";let p=e=>!(!e||"AbortError"!==e.name&&!e.message.includes("aborted")),y=e=>{var t;return!!(!(t=e)||16!==t.code)};t.default=class{constructor(e,r){this.pathPrefix=e,this.maxRetries=(null==r?void 0:r.maxRetries)||5,this.appVersion=null==r?void 0:r.appVersion,this.version="xmtp-js/"+h.version,e===t.ApiUrls.dev&&console.info(f.XMTP_DEV_WARNING)}_query(e){return(0,c.retry)(t.MessageApi.Query,[e,{pathPrefix:this.pathPrefix,mode:"cors",headers:this.headers()}],this.maxRetries,100)}_batchQuery(e){return(0,c.retry)(t.MessageApi.BatchQuery,[e,{pathPrefix:this.pathPrefix,mode:"cors",headers:this.headers()}],this.maxRetries,100)}_publish(e,r=0){var i;return n(this,void 0,void 0,function*(){let n=yield this.getToken(),o=this.headers();o.set("Authorization",`Bearer ${n}`);try{return yield(0,c.retry)(t.MessageApi.Publish,[e,{pathPrefix:this.pathPrefix,mode:"cors",headers:o}],this.maxRetries,100,y)}catch(s){if(y(s)||r>=1)throw s;return yield null===(i=this.authCache)||void 0===i?void 0:i.refresh(),this._publish(e,r+1)}})}_subscribe(e,r){let i=new AbortController;return(()=>{n(this,void 0,void 0,function*(){for(;;){let n=(new Date).getTime();try{if(yield t.MessageApi.Subscribe(e,r,{pathPrefix:this.pathPrefix,signal:i.signal,mode:"cors",headers:this.headers()}),i.signal.aborted)return;console.info("Stream connection closed. Resubscribing"),(new Date).getTime()-n<1e3&&(yield(0,c.sleep)(1e3))}catch(o){if(p(o)||i.signal.aborted)return;console.info("Stream connection closed. Resubscribing",o.toString()),(new Date).getTime()-n<1e3&&(yield(0,c.sleep)(1e3))}}})})(),()=>n(this,void 0,void 0,function*(){null==i||i.abort()})}query(e,{direction:r=t.SortDirection.SORT_DIRECTION_ASCENDING,limit:i}){var s,a;return n(this,void 0,void 0,function*(){let t=[];try{for(var n,l=o(this.queryIteratePages(e,{direction:r,pageSize:i&&i<100?i:100}));!(n=yield l.next()).done;){let u=n.value;for(let c of u)if(t.push(c),i&&t.length===i)return t}}catch(d){s={error:d}}finally{try{n&&!n.done&&(a=l.return)&&(yield a.call(l))}finally{if(s)throw s.error}}return t})}queryIterator(e,t){return a(this,arguments,function*(){var r,i;try{for(var n,a=o(this.queryIteratePages(e,t));!(n=yield s(a.next())).done;){let l=n.value;for(let u of l)yield yield s(u)}}catch(c){r={error:c}}finally{try{n&&!n.done&&(i=a.return)&&(yield s(i.call(a)))}finally{if(r)throw r.error}}})}queryIteratePages({contentTopics:e,startTime:t,endTime:r},{direction:i,pageSize:n=10}){var o,l,u;return a(this,arguments,function*(){let a;if(!e||!e.length)throw Error("Must specify content topics");let d=(0,c.toNanoString)(t),h=(0,c.toNanoString)(r);for(;;){let f={limit:n,direction:i,cursor:a},p=yield s(this._query({contentTopics:e,startTimeNs:d,endTimeNs:h,pagingInfo:f}));if(!(null===(o=p.envelopes)||void 0===o?void 0:o.length)||(yield yield s(p.envelopes),!(null===(l=p.pagingInfo)||void 0===l?void 0:l.cursor)))return yield s(void 0);a=null===(u=p.pagingInfo)||void 0===u?void 0:u.cursor}})}batchQuery(e){return n(this,void 0,void 0,function*(){let r=[];for(let i=0;i<e.length;i+=50){let o=e.slice(i,i+50),s=[];for(let a of o)s.push({contentTopics:a.contentTopics,startTimeNs:(0,c.toNanoString)(a.startTime),endTimeNs:(0,c.toNanoString)(a.endTime),pagingInfo:{limit:a.pageSize||10,direction:a.direction||t.SortDirection.SORT_DIRECTION_ASCENDING}});let l={requests:s};r.push(l)}let u=yield Promise.all(r.map(e=>n(this,void 0,void 0,function*(){return this._batchQuery(e)}))),d=[];for(let h of u){if(!h.responses)throw Error("BatchQueryResponse missing responses");for(let f of h.responses)f.envelopes?d.push(f.envelopes):d.push([])}return d})}publish(e){return n(this,void 0,void 0,function*(){let t=[];for(let{contentTopic:r,message:i,timestamp:n}of e){if(!r.length)throw Error("Content topic cannot be empty string");if(!i.length)throw Error("0 length messages not allowed");let o=n||new Date;t.push({contentTopic:r,timestampNs:(0,c.toNanoString)(o),message:Uint8Array.from(i)})}return this._publish({envelopes:t})})}subscribe(e,t){if(!e.contentTopics.length)throw Error("Must provide list of contentTopics to subscribe to");return this._subscribe(e,t)}getToken(){if(!this.authCache)throw Error("AuthCache is not set on API Client");return this.authCache.getToken()}setAuthenticator(e,t){this.authCache=new d.default(e,t)}headers(){let e=new Headers;return e.set("X-Client-Version",this.version),this.appVersion&&e.set("X-App-Version",this.appVersion),e}}},8901:function(e,t,r){"use strict";var i,n=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t},a=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})},l=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,n){!function(e,t,r,i){Promise.resolve(i).then(function(t){e({value:t,done:r})},t)}(i,n,(t=e[r](t)).done,t.value)})}}};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=t.Compression=t.KeyStoreType=void 0;let u=r(2449),c=r(5506),d=r(9982),h=r(9535),f=r(5880),p=r(6254),y=r(5783),m=r(1796),v=r(3374),g=s(r(1962)),b=r(9099),w=r(7915),_=r(98),{Compression:S}=m.content;t.Compression=S;let{b64Decode:E}=m.fetcher,k=104857600;function N(e){let t={keyStoreType:i.networkTopicStoreV1,privateKeyOverride:void 0,env:"dev",apiUrl:void 0,codecs:[new p.TextCodec],maxContentSize:k};return(null==e?void 0:e.codecs)&&(e.codecs=t.codecs.concat(e.codecs)),(null==e?void 0:e.privateKeyOverride)&&!(null==e?void 0:e.keyStoreType)&&(e.keyStoreType=i.static),Object.assign(Object.assign({},t),e)}(function(e){e[e.networkTopicStoreV1=0]="networkTopicStoreV1",e[e.static=1]="static"})(i=t.KeyStoreType||(t.KeyStoreType={})),t.defaultOptions=N;class A{constructor(e,t,r){this.contacts=new Set,this.knownPublicKeyBundles=new Map,this.legacyKeys=e,this.keys=u.PrivateKeyBundleV2.fromLegacyBundle(e),this.keystore=r,this.address=e.identityKey.publicKey.walletSignatureAddress(),this._conversations=new f.Conversations(this),this._codecs=new Map,this._maxContentSize=k,this.apiClient=t}get conversations(){return this._conversations}get publicKeyBundle(){return this.legacyKeys.getPublicKeyBundle()}static create(e,t){return a(this,void 0,void 0,function*(){let r=N(t),n=function(e){let t=e.apiUrl||g.ApiUrls[e.env];return new g.default(t,{appVersion:e.appVersion})}(r),o=yield function(e,t,r){return a(this,void 0,void 0,function*(){if(!e.privateKeyOverride&&!t)throw Error("Must provide either a Signer or specify privateKeyOverride");let n=function(e,t,r){var n;switch(e.keyStoreType){case i.networkTopicStoreV1:if(!t)throw Error("Must provide a wallet for networkTopicStore");return function(e,t){return new h.EncryptedKeyStore(e,new h.PrivateTopicStore(t))}(t,r);case i.static:if(!e.privateKeyOverride)throw Error("Must provide a privateKeyOverride to use static store");return n=e.privateKeyOverride,new h.StaticKeyStore(n)}}(e,t,r);return function(e,t){return a(this,void 0,void 0,function*(){let r=yield t.loadPrivateKeyBundle();if(r)return r;if(!e)throw Error("No wallet found");return yield t.storePrivateKeyBundle(r=yield u.PrivateKeyBundleV1.generate(e)),r})}(t,n)})}(r,e,n),s=new _.InMemoryKeystore(o);n.setAuthenticator(new b.Authenticator(o.identityKey));let l=new A(o,n,s);return yield l.init(r),l})}static getKeys(e,t){return a(this,void 0,void 0,function*(){return(yield A.create(e,t)).legacyKeys.encode()})}init(e){return a(this,void 0,void 0,function*(){e.codecs.forEach(e=>{this.registerCodec(e)}),this._maxContentSize=e.maxContentSize,yield this.ensureUserContactPublished(e.publishLegacyContact)})}close(){return a(this,void 0,void 0,function*(){})}ensureUserContactPublished(e=!1){return a(this,void 0,void 0,function*(){let t=yield P(this.apiClient,this.address);t&&t instanceof u.SignedPublicKeyBundle&&this.keys.getPublicKeyBundle().equals(t)||(this.publishUserContact(!0),e||this.publishUserContact(e))})}publishUserContact(e=!1){return a(this,void 0,void 0,function*(){let t=e?this.legacyKeys:this.keys;yield this.publishEnvelopes([{contentTopic:(0,c.buildUserContactTopic)(this.address),message:(0,v.encodeContactBundle)(t.getPublicKeyBundle())}])})}getUserContact(e){return a(this,void 0,void 0,function*(){e=d.utils.getAddress(e);let t=this.knownPublicKeyBundles.get(e);if(t)return t;let r=yield P(this.apiClient,e);return r&&this.knownPublicKeyBundles.set(e,r),r})}getUserContacts(e){return a(this,void 0,void 0,function*(){let t=e.map(e=>d.utils.getAddress(e)),r=new Map,i=[];for(let n of t){let o=this.knownPublicKeyBundles.get(n);o?r.set(n,o):(r.set(n,void 0),i.push(n))}let s=yield x(this.apiClient,i);for(let a=0;a<s.length;a++){let l=i[a],u=s[a];r.set(l,u),u&&this.knownPublicKeyBundles.set(l,u)}return t.map(e=>r.get(e))})}forgetContact(e){e=d.utils.getAddress(e),this.knownPublicKeyBundles.delete(e)}canMessage(e){return a(this,void 0,void 0,function*(){try{return Array.isArray(e)?(yield this.getUserContacts(e)).map(e=>!!e):void 0!==(yield this.getUserContact(e))}catch(t){return!1}})}static canMessage(e,t){return a(this,void 0,void 0,function*(){let r=(null==t?void 0:t.apiUrl)||g.ApiUrls[(null==t?void 0:t.env)||"dev"];if(Array.isArray(e)){let i=e.map(e=>d.utils.getAddress(e));return(yield x(new g.default(r,{appVersion:null==t?void 0:t.appVersion}),i)).map(e=>!!e)}try{e=d.utils.getAddress(e)}catch(n){return!1}return void 0!==(yield P(new g.default(r,{appVersion:null==t?void 0:t.appVersion}),e))})}validateEnvelope(e){let t=e.message;if(!e.contentTopic)throw Error("Missing content topic");if(!t||!t.length)throw Error("Cannot publish empty message")}publishEnvelopes(e){return a(this,void 0,void 0,function*(){for(let t of e)this.validateEnvelope(t);try{yield this.apiClient.publish(e)}catch(r){console.log(r)}})}registerCodec(e){let t=e.contentType,r=`${t.authorityId}/${t.typeId}`;this._codecs.set(r,e)}codecFor(e){let t=`${e.authorityId}/${e.typeId}`,r=this._codecs.get(t);if(r&&!(e.versionMajor>r.contentType.versionMajor))return r}encodeContent(e,t){return a(this,void 0,void 0,function*(){let r=(null==t?void 0:t.contentType)||p.ContentTypeText,i=this.codecFor(r);if(!i)throw Error("unknown content type "+r);let n=i.encode(e,this);return(null==t?void 0:t.contentFallback)&&(n.fallback=t.contentFallback),"number"==typeof(null==t?void 0:t.compression)&&(n.compression=t.compression),yield(0,y.compress)(n),m.content.EncodedContent.encode(n).finish()})}listInvitations(e){return this.listEnvelopes([(0,c.buildUserInviteTopic)(this.address)],w.SealedInvitation.fromEnvelope,e)}listEnvelopes(e,t,r){return a(this,void 0,void 0,function*(){r||(r={});let{startTime:i,endTime:n,limit:o}=r,s=yield this.apiClient.query({contentTopics:e,startTime:i,endTime:n},{direction:r.direction||m.messageApi.SortDirection.SORT_DIRECTION_ASCENDING,limit:o}),a=[];for(let l of s)if(l.message)try{let u=yield t(l);a.push(u)}catch(c){console.warn("Error in listEnvelopes mapper",c)}return a})}listEnvelopesPaginated(e,t,r){return(0,c.mapPaginatedStream)(this.apiClient.queryIteratePages({contentTopics:e,startTime:null==r?void 0:r.startTime,endTime:null==r?void 0:r.endTime},{direction:null==r?void 0:r.direction,pageSize:(null==r?void 0:r.pageSize)||100}),t)}signBytes(e){return a(this,void 0,void 0,function*(){return this.keys.identityKey.sign(e)})}}function P(e,t){var r,i;return a(this,void 0,void 0,function*(){let n=e.queryIterator({contentTopics:[(0,c.buildUserContactTopic)(t)]},{pageSize:5,direction:g.SortDirection.SORT_DIRECTION_DESCENDING});try{for(var o,s=l(n);!(o=yield s.next()).done;){let a=o.value;if(!a.message)continue;let u=(0,v.decodeContactBundle)(E(a.message.toString()));if((yield null==u?void 0:u.walletSignatureAddress())===t)return u}}catch(d){r={error:d}}finally{try{o&&!o.done&&(i=s.return)&&(yield i.call(s))}finally{if(r)throw r.error}}})}function x(e,t){return a(this,void 0,void 0,function*(){let r=t.map(c.buildUserContactTopic),i=yield e.batchQuery(r.map(e=>({contentTopics:[e],pageSize:5,direction:g.SortDirection.SORT_DIRECTION_DESCENDING})));return Promise.all(t.map((e,t)=>a(this,void 0,void 0,function*(){let r=i[t];if(r){for(let n of r)if(n.message)try{let o=(0,v.decodeContactBundle)(E(n.message.toString())),s=yield null==o?void 0:o.walletSignatureAddress();if(e===s)return o;console.info("Received contact bundle with incorrect address")}catch(a){console.info("Invalid contact bundle",a)}}})))})}t.default=A},5783:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.writeStreamToBytes=t.readStreamFromBytes=t.compress=t.decompress=void 0;let n=r(1796);function o(e){if(e===n.content.Compression.COMPRESSION_GZIP)return"gzip";if(e===n.content.Compression.COMPRESSION_DEFLATE)return"deflate";throw Error("unrecognized compression algorithm")}function s(e,t=1024){let r=0;return new ReadableStream({pull(i){if(r>=e.length)return i.close();let n=r+t;n=n<=e.length?n:e.length,i.enqueue(e.subarray(r,n)),r=n}})}function a(e,t){let r=0;return new WritableStream({write(i){let n=r+i.length;if(n>t)throw Error("maximum output size exceeded");for(;e.bytes.length<n;)e.bytes=l(e.bytes,t);e.bytes.set(i,r),r=n},close(){r<e.bytes.length&&(e.bytes=e.bytes.subarray(0,r))}})}function l(e,t){let r=2*e.length;r>t&&(r=t);let i=new Uint8Array(r);return i.set(e),i}r(4215),t.decompress=function(e,t){return i(this,void 0,void 0,function*(){if(void 0===e.compression)return;let r={bytes:new Uint8Array(e.content.length)};yield s(e.content).pipeThrough(new DecompressionStream(o(e.compression))).pipeTo(a(r,t)),e.content=r.bytes})},t.compress=function(e){return i(this,void 0,void 0,function*(){if(void 0===e.compression)return;let t={bytes:new Uint8Array(e.content.length/10)};yield s(e.content).pipeThrough(new CompressionStream(o(e.compression))).pipeTo(a(t,e.content.length+1e3)),e.content=t.bytes})},t.readStreamFromBytes=s,t.writeStreamToBytes=a},3374:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeContactBundle=t.decodeContactBundle=void 0;let i=r(1796),n=r(2449);t.decodeContactBundle=function(e){var t,r;let o;try{o=i.contact.ContactBundle.decode(e)}catch(a){let s=i.publicKey.PublicKeyBundle.decode(e);o={v1:{keyBundle:new n.PublicKeyBundle(s)},v2:void 0}}if(null===(t=o.v1)||void 0===t?void 0:t.keyBundle)return new n.PublicKeyBundle(o.v1.keyBundle);if(null===(r=o.v2)||void 0===r?void 0:r.keyBundle)return new n.SignedPublicKeyBundle(o.v2.keyBundle);throw Error("unknown or invalid contact bundle")},t.encodeContactBundle=function(e){return e instanceof n.PublicKeyBundle?i.contact.ContactBundle.encode({v1:{keyBundle:e},v2:void 0}).finish():i.contact.ContactBundle.encode({v1:void 0,v2:{keyBundle:e}}).finish()}},7915:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SealedInvitation=t.SealedInvitationV1=t.SealedInvitationHeaderV1=t.InvitationV1=void 0;let o=n(r(1583)),s=r(8245),a=r(1796),l=n(r(7527)),u=r(2449),c=r(5506),{b64Decode:d}=a.fetcher;class h{constructor({topic:e,context:t,aes256GcmHkdfSha256:r}){if(!e||!e.length)throw Error("Missing topic");if(!r||!r.keyMaterial||!r.keyMaterial.length)throw Error("Missing key material");this.topic=e,this.context=t,this.aes256GcmHkdfSha256=r}static createRandom(e){let t=(0,c.buildDirectMessageTopicV2)(Buffer.from(u.utils.getRandomValues(new Uint8Array(32))).toString("base64").replace(/=*$/g,"").replace("/","-")),r=u.utils.getRandomValues(new Uint8Array(32));return new h({topic:t,aes256GcmHkdfSha256:{keyMaterial:r},context:e})}toBytes(){return a.invitation.InvitationV1.encode(this).finish()}static fromBytes(e){return new h(a.invitation.InvitationV1.decode(e))}}t.InvitationV1=h;class f{constructor({sender:e,recipient:t,createdNs:r}){if(!e)throw Error("Missing sender");if(!t)throw Error("Missing recipient");this.sender=new s.SignedPublicKeyBundle(e),this.recipient=new s.SignedPublicKeyBundle(t),this.createdNs=r}toBytes(){return a.invitation.SealedInvitationHeaderV1.encode(this).finish()}static fromBytes(e){return new f(a.invitation.SealedInvitationHeaderV1.decode(e))}}t.SealedInvitationHeaderV1=f;class p{constructor({headerBytes:e,ciphertext:t}){if(!e||!e.length)throw Error("Missing header bytes");if(!t)throw Error("Missing ciphertext");this.headerBytes=e,this.ciphertext=new l.default(t)}get header(){return this._header||(this._header=f.fromBytes(this.headerBytes)),this._header}getInvitation(e){return i(this,void 0,void 0,function*(){let t;if(this._invitation)return this._invitation;let r=this.header;t=e.identityKey.matches(this.header.sender.identityKey)?yield e.sharedSecret(r.recipient,r.sender.preKey,!1):yield e.sharedSecret(r.sender,r.recipient.preKey,!0);let i=yield(0,u.decrypt)(this.ciphertext,t,this.headerBytes);return this._invitation=h.fromBytes(i),this._invitation})}toBytes(){return a.invitation.SealedInvitationV1.encode(this).finish()}static fromBytes(e){return new p(a.invitation.SealedInvitationV1.decode(e))}}t.SealedInvitationV1=p;class y{constructor({v1:e}){if(!e)throw Error("Missing v1 invitation");this.v1=new p(e)}toBytes(){return a.invitation.SealedInvitation.encode(this).finish()}static fromBytes(e){return new y(a.invitation.SealedInvitation.decode(e))}static fromEnvelope(e){return i(this,void 0,void 0,function*(){if(!e.message||!e.timestampNs)throw Error("invalid invitation envelope");let t=y.fromBytes(d(e.message)),r=o.default.fromString(e.timestampNs);if(!t.v1.header.createdNs.equals(r))throw Error("envelope and header timestamp mistmatch");return t})}static createV1({sender:e,recipient:t,created:r,invitation:n}){return i(this,void 0,void 0,function*(){let i=new f({sender:e.getPublicKeyBundle(),recipient:t,createdNs:(0,c.dateToNs)(r)}).toBytes(),o=yield e.sharedSecret(t,e.getCurrentPreKey().publicKey,!1),s=n.toBytes(),a=yield(0,u.encrypt)(s,o,i);return new y({v1:{headerBytes:i,ciphertext:a}})})}}t.SealedInvitation=y},6044:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeContent=t.DecodedMessage=t.MessageV2=t.MessageV1=void 0;let o=r(1796),s=n(r(1583)),a=n(r(7527)),l=r(2449),u=r(9272),c=r(6314),d=r(6397),h=r(5506),f=r(5783),p=e=>{var t,r;if(null===(t=e.v1)||void 0===t?void 0:t.ciphertext)return[e.v1.headerBytes,new a.default(e.v1.ciphertext)];if(null===(r=e.v2)||void 0===r?void 0:r.ciphertext)return[e.v2.headerBytes,new a.default(e.v2.ciphertext)];throw Error("unknown message version")};class y{constructor(e,t,r){[this.headerBytes,this.ciphertext]=p(r),this.id=e,this.bytes=t}toBytes(){return this.bytes}}class m extends y{constructor(e,t,r,i,n){super(e,t,r),this.conversation=void 0,this.senderAddress=n,this.header=i}static create(e,t,r){return i(this,void 0,void 0,function*(){if(!t.sender)throw Error("missing message sender");let i=new l.PublicKeyBundle(t.sender).walletSignatureAddress(),n=(0,u.bytesToHex)((yield(0,c.sha256)(r)));return new m(n,r,e,t,i)})}get sent(){return new Date(this.header.timestamp.toNumber())}get recipientAddress(){var e,t;if(null===(t=null===(e=this.header)||void 0===e?void 0:e.recipient)||void 0===t?void 0:t.identityKey)return new l.PublicKey(this.header.recipient.identityKey).walletSignatureAddress()}static encode(e,t,r,n){return i(this,void 0,void 0,function*(){let i=yield e.sharedSecret(t,e.getCurrentPreKey().publicKey,!1),a={sender:e.getPublicKeyBundle(),recipient:t,timestamp:s.default.fromNumber(n.getTime())},u=o.message.MessageHeaderV1.encode(a).finish(),c={v1:{headerBytes:u,ciphertext:yield(0,l.encrypt)(r,i,u)},v2:void 0},d=o.message.Message.encode(c).finish();return m.create(c,a,d)})}static fromBytes(e){let t=o.message.Message.decode(e),[r]=p(t),i=o.message.MessageHeaderV1.decode(r);if(!i)throw Error("missing message header");if(!i.sender)throw Error("missing message sender");if(!i.sender.identityKey)throw Error("missing message sender identity key");if(!i.sender.preKey)throw Error("missing message sender pre-key");if(!i.recipient)throw Error("missing message recipient");if(!i.recipient.identityKey)throw Error("missing message recipient identity-key");if(!i.recipient.preKey)throw Error("missing message recipient pre-key");return m.create(t,i,e)}decrypt(e){var t,r;return i(this,void 0,void 0,function*(){let i;let n=this.header;if(!((null===(t=n.recipient)||void 0===t?void 0:t.identityKey)&&(null===(r=n.sender)||void 0===r?void 0:r.identityKey)&&n.recipient.preKey&&n.sender.preKey))throw Error("Missing headers");let o=new l.PublicKeyBundle({identityKey:new l.PublicKey(n.recipient.identityKey),preKey:new l.PublicKey(n.recipient.preKey)}),s=new l.PublicKeyBundle({identityKey:new l.PublicKey(n.sender.identityKey),preKey:new l.PublicKey(n.sender.preKey)});return i=e.identityKey.matches(s.identityKey)?yield e.sharedSecret(o,s.preKey,!1):yield e.sharedSecret(s,o.preKey,!0),(0,l.decrypt)(this.ciphertext,i,this.headerBytes)})}}t.MessageV1=m;class v extends y{constructor(e,t,r,i,n,o){super(e,t,r),this.header=i,this.signed=n,this.senderAddress=o}static create(e,t,r,n){return i(this,void 0,void 0,function*(){let i=(0,u.bytesToHex)((yield(0,c.sha256)(n)));if(!r.sender)throw Error("missing message sender");let o=yield new l.SignedPublicKeyBundle(r.sender).walletSignatureAddress();return new v(i,n,e,t,r,o)})}get sent(){return(0,h.nsToDate)(this.header.createdNs)}}t.MessageV2=v;class g{constructor({id:e,messageVersion:t,senderAddress:r,recipientAddress:i,conversation:n,contentType:o,contentTopic:s,content:a,sent:l,error:u}){this.id=e,this.messageVersion=t,this.senderAddress=r,this.recipientAddress=i,this.conversation=n,this.contentType=o,this.sent=l,this.error=u,this.content=a,this.contentTopic=s}static fromV1Message(e,t,r,i,n,o){let{id:s,senderAddress:a,recipientAddress:l,sent:u}=e;if(!a)throw Error("Sender address is required");return new g({id:s,messageVersion:"v1",senderAddress:a,recipientAddress:l,sent:u,content:t,contentType:r,contentTopic:i,conversation:n,error:o})}static fromV2Message(e,t,r,i,n,o){let{id:s,senderAddress:a,sent:l}=e;if(!a)throw Error("Sender address is required");return new g({id:s,messageVersion:"v2",senderAddress:a,sent:l,content:t,contentType:r,contentTopic:i,conversation:n,error:o})}}t.DecodedMessage=g,t.decodeContent=function(e,t){return i(this,void 0,void 0,function*(){let r=o.content.EncodedContent.decode(e);if(!r.type)throw Error("missing content type");let i,n,s=new d.ContentTypeId(r.type);yield(0,f.decompress)(r,1e3);let a=t.codecFor(s);return a?i=a.decode(r,t):(n=Error("unknown content type "+s),r.fallback&&(i=r.fallback,s=d.ContentTypeFallback)),{content:i,contentType:s,error:n}})}},6397:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentTypeFallback=t.ContentTypeId=void 0;class r{constructor(e){this.authorityId=e.authorityId,this.typeId=e.typeId,this.versionMajor=e.versionMajor,this.versionMinor=e.versionMinor}toString(){return`${this.authorityId}/${this.typeId}:${this.versionMajor}.${this.versionMinor}`}sameAs(e){return this.authorityId===e.authorityId&&this.typeId===e.typeId}}t.ContentTypeId=r,t.ContentTypeFallback=new r({authorityId:"xmtp.org",typeId:"fallback",versionMajor:1,versionMinor:0})},4596:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});class i{constructor(e,t,r,i){this.messages=[],this.resolvers=[],this.topics=t,this.client=e,this.callback=this.newMessageCallback(r,i)}newMessageCallback(e,t){return i=>r(this,void 0,void 0,function*(){if(i.message)try{let r=yield e(i);if(!r)return;if(t){let n=t(r);n&&this.resubscribeToTopics(n)}let o=this.resolvers.pop();o?o({value:r}):this.messages.unshift(r)}catch(s){console.warn(s)}})}start(){return r(this,void 0,void 0,function*(){if(!this.callback)throw Error("Missing callback for stream");this.unsubscribeFn=this.client.apiClient.subscribe({contentTopics:this.topics},e=>r(this,void 0,void 0,function*(){this.callback&&(yield null==this?void 0:this.callback(e))}))})}static create(e,t,n,o){return r(this,void 0,void 0,function*(){let r=new i(e,t,n,o);return yield r.start(),r})}[Symbol.asyncIterator](){return this}return(){return r(this,void 0,void 0,function*(){return this.unsubscribeFn&&(yield this.unsubscribeFn()),this.callback&&(this.callback=void 0,this.resolvers.forEach(e=>e({value:void 0,done:!0}))),{value:void 0,done:!0}})}next(){let e=this.messages.pop();return e?Promise.resolve({value:e}):this.callback?new Promise(e=>this.resolvers.unshift(e)):Promise.resolve({value:void 0,done:!0})}resubscribeToTopics(e){return r(this,void 0,void 0,function*(){if(!this.callback||!this.unsubscribeFn)throw Error("Missing callback for stream");yield this.unsubscribeFn(),this.topics=e,this.unsubscribeFn=this.client.apiClient.subscribe({contentTopics:this.topics},e=>r(this,void 0,void 0,function*(){this.callback&&(yield null==this?void 0:this.callback(e))}))})}}t.default=i},4203:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t=3590){this.authenticator=e,this.maxAgeMs=1e3*t}getToken(){return r(this,void 0,void 0,function*(){return(!this.token||this.token.ageMs>this.maxAgeMs)&&(yield this.refresh()),this.token.toBase64()})}refresh(){return r(this,void 0,void 0,function*(){this.token=yield this.authenticator.createToken()})}}},9064:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});let i=r(1796),n=r(6908);class o{constructor({walletAddr:e,createdNs:t}){this.walletAddr=e,this.createdNs=t}static create(e,t){return t=t||new Date,new o({walletAddr:e,createdNs:(0,n.dateToNs)(t)})}static fromBytes(e){let t=i.authn.AuthData.decode(e);return new o(t)}toBytes(){return i.authn.AuthData.encode(this).finish()}}t.default=o},2138:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let o=r(1094),s=r(1796),a=n(r(9064)),l=r(9272),u=n(r(8140));t.default=class{constructor(e){if(!e.publicKey.signature)throw Error("Provided public key is not signed");this.identityKey=e}createToken(e){return i(this,void 0,void 0,function*(){let t=a.default.create(this.identityKey.publicKey.walletSignatureAddress(),e||new Date).toBytes(),r=(0,o.keccak256)(t),i=yield this.identityKey.sign((0,l.hexToBytes)(r));return new u.default(s.authn.Token.fromPartial({identityKey:s.publicKey.PublicKey.fromPartial(this.identityKey.publicKey),authDataBytes:t,authDataSignature:s.signature.Signature.fromPartial(i)}))})}}},8140:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});let n=r(1796),o=i(r(9064));class s{constructor({identityKey:e,authDataBytes:t,authDataSignature:r}){if(!e)throw Error("Missing identity key in token");if(!r)throw Error("Missing authDataSignature in token");this.identityKey=e,this.authDataBytes=t,this.authDataSignature=r}get authData(){return this._authData||(this._authData=o.default.fromBytes(this.authDataBytes)),this._authData}get ageMs(){return(new Date).valueOf()-this.authData.createdNs.div(1e6).toNumber()}toBytes(){return n.authn.Token.encode(this).finish()}static fromBytes(e){return new s(n.authn.Token.decode(e))}toBase64(){return Buffer.from(this.toBytes()).toString("base64")}}t.default=s},9099:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Token=t.AuthData=t.Authenticator=void 0;var n=r(2138);Object.defineProperty(t,"Authenticator",{enumerable:!0,get:function(){return i(n).default}});var o=r(9064);Object.defineProperty(t,"AuthData",{enumerable:!0,get:function(){return i(o).default}});var s=r(8140);Object.defineProperty(t,"Token",{enumerable:!0,get:function(){return i(s).default}})},4196:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CompositeCodec=t.ContentTypeComposite=void 0;let i=r(6397),n=r(1796);t.ContentTypeComposite=new i.ContentTypeId({authorityId:"xmtp.org",typeId:"composite",versionMajor:1,versionMinor:0}),t.CompositeCodec=class{get contentType(){return t.ContentTypeComposite}encode(e,r){let i;let o=this.toProto(e,r);i=o.composite?o.composite:{parts:[o]};let s=n.composite.Composite.encode(i).finish();return{type:t.ContentTypeComposite,parameters:{},content:s}}decode(e,t){return this.fromProto({composite:n.composite.Composite.decode(e.content),part:void 0},t)}toProto(e,t){if("type"in e){let r=t.codecFor(e.type);if(!r)throw Error(`missing codec for part type ${e.type}`);return{part:r.encode(e.content,t),composite:void 0}}let i=[];for(let n of e.parts)i.push(this.toProto(n,t));return{composite:{parts:i},part:void 0}}fromProto(e,t){if(e.part){if(!e.part.type)throw Error("missing part content type");let r=new i.ContentTypeId(e.part.type),n=t.codecFor(r);if(!n)throw Error(`missing codec for part type ${r}`);return{type:r,content:n.decode(e.part,t)}}if(!e.composite)throw Error("invalid composite");let o=[];for(let s of e.composite.parts)o.push(this.fromProto(s,t));return{parts:o}}}},6254:(e,t,r)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),t.TextCodec=t.Encoding=t.ContentTypeText=void 0;let n=r(6397);t.ContentTypeText=new n.ContentTypeId({authorityId:"xmtp.org",typeId:"text",versionMajor:1,versionMinor:0}),function(e){e.utf8="UTF-8"}(i=t.Encoding||(t.Encoding={})),t.TextCodec=class{get contentType(){return t.ContentTypeText}encode(e){return{type:t.ContentTypeText,parameters:{encoding:i.utf8},content:(new TextEncoder).encode(e)}}decode(e){let t=e.parameters.encoding;if(t&&t!==i.utf8)throw Error(`unrecognized encoding ${t}`);return(new TextDecoder).decode(e.content)}}},5592:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XMTP_DEV_WARNING=void 0,t.XMTP_DEV_WARNING="\nXX    XX MM    MM TTTTTT PPPPPP   DDDDD   EEEEEEE VV     VV \n XX  XX  MMM  MMM   TT   PP   PP  DD  DD  EE      VV     VV \n  XXXX   MM MM MM   TT   PPPPPP   DD   DD EEEEE    VV   VV  \n XX  XX  MM    MM   TT   PP       DD   DD EE        VV VV   \nXX    XX MM    MM   TT   PP       DDDDDD  EEEEEEE    VVV    \n\nConnected to the XMTP 'dev' network. Use 'production' for production messages.\nhttps://github.com/xmtp/xmtp-js#xmtp-production-and-dev-network-environments\n"},3937:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationV2=t.ConversationV1=void 0;let o=r(5506),s=r(9982),a=r(6044),l=n(r(4596)),u=r(6044),c=r(1796),d=r(2449),h=n(r(7527)),f=r(6314),p=r(6254),y=r(98),m=n(r(1583)),{b64Decode:v}=c.fetcher;class g{constructor(e,t,r){this.context=null,this.peerAddress=s.utils.getAddress(t),this.client=e,this.createdAt=r}messages(e){return i(this,void 0,void 0,function*(){let t=(0,o.buildDirectMessageTopic)(this.peerAddress,this.client.address),r=yield this.client.listEnvelopes([t],this.decodeEnvelope.bind(this),e);return this.decryptBatch(r,t,!1)})}decryptBatch(e,t,r=!1){var n,o,s;return i(this,void 0,void 0,function*(){let i=(yield this.client.keystore.decryptV1(this.buildDecryptRequest(e))).responses,a=[];for(let l=0;l<i.length;l++){let u=i[l],d=e[l];if(u.error){if(console.warn("Error decrypting message",u.error),r)throw new y.KeystoreError(null===(n=u.error)||void 0===n?void 0:n.code,null===(o=u.error)||void 0===o?void 0:o.message)}else if(null===(s=u.result)||void 0===s?void 0:s.decrypted)try{a.push((yield this.buildDecodedMessage(d,u.result.decrypted,t)))}catch(h){if(console.warn("Error decoding content",h),r)throw h}else if(console.warn("Error decrypting message",u),r)throw new y.KeystoreError(c.keystore.ErrorCode.ERROR_CODE_UNSPECIFIED,"No result returned")}return a})}buildDecryptRequest(e){return{requests:e.map(e=>{var t,r,i,n;let o=new d.PublicKeyBundle({identityKey:null===(t=e.header.sender)||void 0===t?void 0:t.identityKey,preKey:null===(r=e.header.sender)||void 0===r?void 0:r.preKey}),s=this.client.publicKeyBundle.equals(o);return{payload:e.ciphertext,peerKeys:s?new d.PublicKeyBundle({identityKey:null===(i=e.header.recipient)||void 0===i?void 0:i.identityKey,preKey:null===(n=e.header.recipient)||void 0===n?void 0:n.preKey}):o,headerBytes:e.headerBytes,isSender:s}})}}buildDecodedMessage(e,t,r){return i(this,void 0,void 0,function*(){let{content:i,contentType:n,error:o}=yield(0,u.decodeContent)(t,this.client);return a.DecodedMessage.fromV1Message(e,i,n,r,this,o)})}messagesPaginated(e){return this.client.listEnvelopesPaginated([this.topic],this.decodeMessage.bind(this),e)}decodeMessage(e){return i(this,void 0,void 0,function*(){if(!e.contentTopic)throw Error("Missing content topic");let t=yield this.decodeEnvelope(e),r=yield this.decryptBatch([t],e.contentTopic,!0);if(!r.length)throw Error("No results");return r[0]})}get topic(){return(0,o.buildDirectMessageTopic)(this.peerAddress,this.client.address)}streamMessages(){return l.default.create(this.client,[this.topic],e=>i(this,void 0,void 0,function*(){return this.decodeMessage(e)}))}export(){return{version:"v1",peerAddress:this.peerAddress,createdAt:this.createdAt.toISOString()}}static fromExport(e,t){return new g(e,t.peerAddress,new Date(t.createdAt))}decodeEnvelope({message:e,contentTopic:t}){return i(this,void 0,void 0,function*(){let r=c.fetcher.b64Decode(e),i=yield u.MessageV1.fromBytes(r),{senderAddress:n,recipientAddress:s}=i;if(!n||!s||!t||(0,o.buildDirectMessageTopic)(n,s)!==this.topic)throw Error("Headers do not match intended recipient");return i})}send(e,t){return i(this,void 0,void 0,function*(){let r,i=yield this.client.getUserContact(this.peerAddress);if(!i)throw Error(`recipient ${this.peerAddress} is not registered`);i instanceof d.PublicKeyBundle||(i=i.toLegacyBundle()),this.client.contacts.has(this.peerAddress)?r=[this.topic]:(r=[(0,o.buildUserIntroTopic)(this.peerAddress),(0,o.buildUserIntroTopic)(this.client.address),this.topic],this.client.contacts.add(this.peerAddress));let n=(null==t?void 0:t.contentType)||p.ContentTypeText,s=yield this.encodeMessage(e,i,t);return yield this.client.publishEnvelopes(r.map(e=>({contentTopic:e,message:s.toBytes(),timestamp:s.sent}))),a.DecodedMessage.fromV1Message(s,e,n,r[0],this)})}encodeMessage(e,t,r){var n;return i(this,void 0,void 0,function*(){let i=(null==r?void 0:r.timestamp)||new Date,o=yield this.client.encodeContent(e,r),s={sender:this.client.publicKeyBundle,recipient:t,timestamp:m.default.fromNumber(i.getTime())},a=c.message.MessageHeaderV1.encode(s).finish(),l=yield this.client.keystore.encryptV1({requests:[{recipient:t,headerBytes:a,payload:o}]});if(!l.responses.length)throw Error("No response from Keystore");let d=l.responses[0];this.validateKeystoreResponse(d);let h={v1:{headerBytes:a,ciphertext:null===(n=d.result)||void 0===n?void 0:n.encrypted},v2:void 0},f=c.message.Message.encode(h).finish();return u.MessageV1.create(h,s,f)})}validateKeystoreResponse(e){if(e.error)throw new y.KeystoreError(e.error.code,e.error.message);if(!e.result)throw new y.KeystoreError(c.keystore.ErrorCode.ERROR_CODE_UNSPECIFIED,"No result from Keystore")}get clientAddress(){return this.client.address}}t.ConversationV1=g;class b{constructor(e,t,r,i,n,o){this.topic=t,this.keyMaterial=r,this.createdAt=n,this.context=o,this.client=e,this.peerAddress=i}static create(e,t,r){return i(this,void 0,void 0,function*(){let i=e.keys.getPublicKeyBundle().equals(r.sender)?r.recipient:r.sender,n=s.utils.getAddress((yield i.walletSignatureAddress()));return new b(e,t.topic,t.aes256GcmHkdfSha256.keyMaterial,n,(0,o.nsToDate)(r.createdNs),t.context)})}messages(e){return i(this,void 0,void 0,function*(){return this.client.listEnvelopes([this.topic],this.decodeMessage.bind(this),e)})}messagesPaginated(e){return this.client.listEnvelopesPaginated([this.topic],this.decodeMessage.bind(this),e)}streamMessages(){return l.default.create(this.client,[this.topic],this.decodeMessage.bind(this))}send(e,t){return i(this,void 0,void 0,function*(){let r=yield this.encodeMessage(e,t);yield this.client.publishEnvelopes([{contentTopic:this.topic,message:r.toBytes(),timestamp:r.sent}]);let i=(null==t?void 0:t.contentType)||p.ContentTypeText;return a.DecodedMessage.fromV2Message(r,e,i,this.topic,this)})}get clientAddress(){return this.client.address}encodeMessage(e,t){return i(this,void 0,void 0,function*(){let r=yield this.client.encodeContent(e,t),i={topic:this.topic,createdNs:(0,o.dateToNs)((null==t?void 0:t.timestamp)||new Date)},n=c.message.MessageHeaderV2.encode(i).finish(),s=yield(0,f.sha256)(w(n,r)),a={payload:r,sender:this.client.keys.getPublicKeyBundle(),signature:yield this.client.keys.getCurrentPreKey().sign(s)},l=c.content.SignedContent.encode(a).finish(),h={v1:void 0,v2:{headerBytes:n,ciphertext:yield(0,d.encrypt)(l,this.keyMaterial,n)}},p=c.message.Message.encode(h).finish();return u.MessageV2.create(h,i,a,p)})}decodeMessage(e){var t,r,n;return i(this,void 0,void 0,function*(){if(!e.message||!e.contentTopic)throw Error("empty envelope");let i=v(e.message.toString()),o=c.message.Message.decode(i);if(!o.v2)throw Error("unknown message version");let s=o.v2,l=c.message.MessageHeaderV2.decode(s.headerBytes);if(l.topic!==this.topic)throw Error("topic mismatch");if(!s.ciphertext)throw Error("missing ciphertext");let p=yield(0,d.decrypt)(new h.default(s.ciphertext),this.keyMaterial,s.headerBytes),y=c.content.SignedContent.decode(p);if(!(null===(t=y.sender)||void 0===t?void 0:t.identityKey)||!(null===(r=y.sender)||void 0===r?void 0:r.preKey)||!y.signature)throw Error("incomplete signed content");let m=yield(0,f.sha256)(w(s.headerBytes,y.payload));if(!new d.SignedPublicKey(null===(n=y.sender)||void 0===n?void 0:n.preKey).verify(new d.Signature(y.signature),m))throw Error("invalid signature");let g=yield u.MessageV2.create(o,l,y,i),{content:b,contentType:_,error:S}=yield(0,u.decodeContent)(y.payload,this.client);return a.DecodedMessage.fromV2Message(g,b,_,e.contentTopic,this,S)})}export(){return{version:"v2",topic:this.topic,keyMaterial:Buffer.from(this.keyMaterial).toString("base64"),peerAddress:this.peerAddress,createdAt:this.createdAt.toISOString(),context:this.context}}static fromExport(e,t){return new b(e,t.topic,Buffer.from(t.keyMaterial,"base64"),t.peerAddress,new Date(t.createdAt),t.context)}}function w(e,t){let r=new Uint8Array(e.length+t.length);return r.set(e),r.set(t,e.length),r}t.ConversationV2=b},1851:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})},n=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,n){!function(e,t,r,i){Promise.resolve(i).then(function(t){e({value:t,done:r})},t)}(i,n,(t=e[r](t)).done,t.value)})}}},o=this&&this.__await||function(e){return this instanceof o?(this.v=e,this):new o(e)},s=this&&this.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){n[e]&&(i[e]=function(t){return new Promise(function(r,i){s.push([e,t,r,i])>1||l(e,t)})})}function l(e,t){var r;try{(r=n[e](t)).value instanceof o?Promise.resolve(r.value.v).then(u,c):d(s[0][2],r)}catch(i){d(s[0][3],i)}}function u(e){l("next",e)}function c(e){l("throw",e)}function d(e,t){e(t),s.shift(),s.length&&l(s[0][0],s[0][1])}},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationCache=void 0;let l=r(8125),u=r(8245),c=r(3937),d=r(6044),h=a(r(4596)),f=r(5506),p=r(7915),y=r(2449),m=r(1796),v=r(1962),{b64Decode:g}=m.fetcher,b=e=>Boolean(e.recipientAddress&&e.senderAddress);class w{constructor(){this.conversations=[],this.mutex=new l.Mutex,this.seenTopics=new Set}load(e){return i(this,void 0,void 0,function*(){let t=yield this.mutex.acquire();try{let r=yield e({latestSeen:this.latestSeen,existing:this.conversations});for(let i of r)this.seenTopics.has(i.topic)||(this.seenTopics.add(i.topic),this.conversations.push(i),(!this.latestSeen||i.createdAt>this.latestSeen)&&(this.latestSeen=i.createdAt))}finally{t()}return[...this.conversations]})}}t.ConversationCache=w,t.default=class{constructor(e){this.client=e,this.v1Cache=new w,this.v2Cache=new w}list(){return i(this,void 0,void 0,function*(){let[e,t]=yield Promise.all([this.listV1Conversations(),this.listV2Conversations()]),r=e.concat(t);return r.sort((e,t)=>e.createdAt.getTime()-t.createdAt.getTime()),r})}listV1Conversations(){return i(this,void 0,void 0,function*(){return this.v1Cache.load(({latestSeen:e})=>i(this,void 0,void 0,function*(){let t=yield this.getIntroductionPeers({startTime:e?new Date(+e-1e4):void 0,direction:v.SortDirection.SORT_DIRECTION_ASCENDING});return Array.from(t).map(([e,t])=>new c.ConversationV1(this.client,e,t))}))})}listV2Conversations(){return i(this,void 0,void 0,function*(){return this.v2Cache.load(({latestSeen:e})=>i(this,void 0,void 0,function*(){return this.v2ConversationLoader(e)}))})}v2ConversationLoader(e){return i(this,void 0,void 0,function*(){let t=[],r=yield this.client.listInvitations({startTime:e?new Date(+e-1e4):void 0,direction:v.SortDirection.SORT_DIRECTION_ASCENDING});for(let i of r)try{let n=yield i.v1.getInvitation(this.client.keys);t.push((yield c.ConversationV2.create(this.client,n,i.v1.header)))}catch(o){console.warn("Error decrypting invitation",o)}return t})}stream(){return i(this,void 0,void 0,function*(){let e=new Set,t=(0,f.buildUserIntroTopic)(this.client.address),r=(0,f.buildUserInviteTopic)(this.client.address);return h.default.create(this.client,[r,t],(n=>i(this,void 0,void 0,function*(){if(n.contentTopic===t){var i;let o=g(n.message),s=yield d.MessageV1.fromBytes(o);yield s.decrypt(this.client.legacyKeys);let a=this.getPeerAddress(s);if(i=a,e.has(i)||(e.add(i),0))return;return new c.ConversationV1(this.client,a,s.sent)}if(n.contentTopic===r){let l=yield p.SealedInvitation.fromEnvelope(n),u=yield l.v1.getInvitation(this.client.keys);return yield c.ConversationV2.create(this.client,u,l.v1.header)}throw Error("unrecognized invite topic")})).bind(this))})}streamAllMessages(){return i(this,void 0,void 0,function*(){let e=(0,f.buildUserIntroTopic)(this.client.address),t=(0,f.buildUserInviteTopic)(this.client.address),r=new Set([e,t]),a=new Map;for(let l of yield this.list())r.add(l.topic),a.set(l.topic,l);let u=(e,t)=>!r.has(e)&&(a.set(e,t),r.add(e),!0),y=yield h.default.create(this.client,Array.from(r.values()),r=>i(this,void 0,void 0,function*(){let i=r.contentTopic;if(!i)return null;if(i===e){let n=g(r.message),o=yield d.MessageV1.fromBytes(n);if(!b(o))return null;yield o.decrypt(this.client.legacyKeys);let s=o.senderAddress===this.client.address?o.recipientAddress:o.senderAddress;return new c.ConversationV1(this.client,s,o.sent).decodeMessage(r)}if(i===t){let l=yield p.SealedInvitation.fromEnvelope(r),u=yield l.v1.getInvitation(this.client.keys);return c.ConversationV2.create(this.client,u,l.v1.header)}let h=a.get(i);if(h instanceof c.ConversationV1||h instanceof c.ConversationV2)return h.decodeMessage(r);throw console.log("Unknown topic"),Error("Unknown topic")}),t=>{if(t instanceof d.DecodedMessage&&t.contentTopic===e){let i=new c.ConversationV1(this.client,t.recipientAddress===this.client.address?t.senderAddress:t.recipientAddress,t.sent);return u(i.topic,i)?Array.from(r.values()):void 0}if(t instanceof c.ConversationV2)return u(t.topic,t)?Array.from(r.values()):void 0});return function(){return s(this,arguments,function*(){var e,t;try{for(var r,i=n(y);!(r=yield o(i.next())).done;){let s=r.value;if(s instanceof d.DecodedMessage&&(yield yield o(s)),s instanceof c.ConversationV2)for(let a of yield o(s.messages()))yield yield o(a)}}catch(l){e={error:l}}finally{try{r&&!r.done&&(t=i.return)&&(yield o(t.call(i)))}finally{if(e)throw e.error}}})}()})}getIntroductionPeers(e){return i(this,void 0,void 0,function*(){let t=yield this.client.listEnvelopes([(0,f.buildUserIntroTopic)(this.client.address)],e=>i(this,void 0,void 0,function*(){let t=yield d.MessageV1.fromBytes(g(e.message));return yield t.decrypt(this.client.legacyKeys),t}),e),r=new Map;for(let n of t){if(!b(n))continue;let o=this.getPeerAddress(n);if(o){let s=r.get(o);(!s||s>n.sent)&&r.set(o,n.sent)}}return r})}newConversation(e,t){return i(this,void 0,void 0,function*(){let r,n=yield this.client.getUserContact(e);if(!n)throw Error(`Recipient ${e} is not on the XMTP network`);if(n instanceof y.PublicKeyBundle&&!(null==t?void 0:t.conversationId))return new c.ConversationV1(this.client,e,new Date);if(!(null==t?void 0:t.conversationId)){let o=(yield this.listV1Conversations()).find(t=>t.peerAddress===e);if(o){if(!this.client.keys.getPublicKeyBundle().isFromLegacyBundle())throw Error("cannot resume pre-existing V1 conversation; client keys not compatible");if(!(n instanceof y.PublicKeyBundle||n.isFromLegacyBundle()))throw Error("cannot resume pre-existing V1 conversation; peer keys not compatible");return o}}n instanceof y.PublicKeyBundle&&(n=u.SignedPublicKeyBundle.fromLegacyBundle(n));let s=r=>{var i,n,o;return r.peerAddress===e&&(n=t,o=null!==(i=r.context)&&void 0!==i?i:void 0,(null==n?void 0:n.conversationId)===(null==o?void 0:o.conversationId))};if(yield this.v2Cache.load(({latestSeen:e,existing:o})=>i(this,void 0,void 0,function*(){let i=o.find(s);if(i)return r=i,[];let a=yield this.v2ConversationLoader(e),l=a.find(s);if(l)return r=l,a;let u=p.InvitationV1.createRandom(t),d=yield this.sendInvitation(n,u,new Date);return[r=yield c.ConversationV2.create(this.client,u,d.v1.header)]})),!r)throw Error("Failed to create conversation");return r})}export(){return i(this,void 0,void 0,function*(){return(yield this.list()).map(e=>e.export())})}import(e){return i(this,void 0,void 0,function*(){let t=[],r=[],n=0;for(let o of e)try{"v1"===o.version?t.push(c.ConversationV1.fromExport(this.client,o)):"v2"===o.version&&r.push(c.ConversationV2.fromExport(this.client,o))}catch(s){console.log("Failed to import conversation",s),n+=1}return yield Promise.all([this.v1Cache.load(()=>i(this,void 0,void 0,function*(){return t})),this.v2Cache.load(()=>i(this,void 0,void 0,function*(){return r}))]),n})}sendInvitation(e,t,r){return i(this,void 0,void 0,function*(){let i=yield p.SealedInvitation.createV1({sender:this.client.keys,recipient:e,created:r,invitation:t}),n=yield e.walletSignatureAddress();return this.client.publishEnvelopes([{contentTopic:(0,f.buildUserInviteTopic)(n),message:i.toBytes(),timestamp:r},{contentTopic:(0,f.buildUserInviteTopic)(this.client.address),message:i.toBytes(),timestamp:r}]),i})}getPeerAddress(e){return e.recipientAddress===this.client.address?e.senderAddress:e.recipientAddress}}},5880:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConversationV2=t.ConversationV1=t.Conversations=void 0;var n=r(1851);Object.defineProperty(t,"Conversations",{enumerable:!0,get:function(){return i(n).default}});var o=r(3937);Object.defineProperty(t,"ConversationV1",{enumerable:!0,get:function(){return o.ConversationV1}}),Object.defineProperty(t,"ConversationV2",{enumerable:!0,get:function(){return o.ConversationV2}})},7527:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AESGCMTagLength=t.AESGCMNonceSize=t.KDFSaltSize=t.AESKeySize=void 0;let i=r(1796);t.AESKeySize=32,t.KDFSaltSize=32,t.AESGCMNonceSize=12,t.AESGCMTagLength=16;class n{constructor(e){if(!e.aes256GcmHkdfSha256)throw Error("invalid ciphertext");if(e.aes256GcmHkdfSha256.payload.length<t.AESGCMTagLength)throw Error(`invalid ciphertext ciphertext length: ${e.aes256GcmHkdfSha256.payload.length}`);if(e.aes256GcmHkdfSha256.hkdfSalt.length!==t.KDFSaltSize)throw Error(`invalid ciphertext salt length: ${e.aes256GcmHkdfSha256.hkdfSalt.length}`);if(e.aes256GcmHkdfSha256.gcmNonce.length!==t.AESGCMNonceSize)throw Error(`invalid ciphertext nonce length: ${e.aes256GcmHkdfSha256.gcmNonce.length}`);this.aes256GcmHkdfSha256=e.aes256GcmHkdfSha256}toBytes(){return i.ciphertext.Ciphertext.encode(this).finish()}static fromBytes(e){return new n(i.ciphertext.Ciphertext.decode(e))}}t.default=n},270:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PrivateKey=t.SignedPrivateKey=void 0;let l=r(1796),u=o(r(9656)),c=a(r(1583)),d=o(r(6002)),h=r(2940),f=r(6314),p=r(9272);function y(e){if(32!==e.bytes.length)throw Error(`invalid private key length: ${e.bytes.length}`)}class m{constructor(e){if(!e.secp256k1)throw Error("invalid private key");if(y(e.secp256k1),this.secp256k1=e.secp256k1,this.createdNs=e.createdNs,!e.publicKey)throw Error("missing public key");this.publicKey=new h.SignedPublicKey(e.publicKey)}static generate(e){return s(this,void 0,void 0,function*(){let t={bytes:u.utils.randomPrivateKey()},r=c.default.fromNumber((new Date).getTime()).mul(1e6),i=new h.UnsignedPublicKey({secp256k1Uncompressed:{bytes:u.getPublicKey(t.bytes)},createdNs:r}),n=yield e.signKey(i);return new m({secp256k1:t,createdNs:r,publicKey:n})})}generated(){return new Date(this.createdNs.div(1e6).toNumber())}sign(e){return s(this,void 0,void 0,function*(){let[t,r]=yield u.sign(e,this.secp256k1.bytes,{recovered:!0,der:!1});return new d.default({ecdsaCompact:{bytes:t,recovery:r}})})}signKey(e){return s(this,void 0,void 0,function*(){let t=e.toBytes(),r=yield(0,f.sha256)(t),i=yield this.sign(r);return new h.SignedPublicKey({keyBytes:t,signature:i})})}static signerKey(e,t){return s(this,void 0,void 0,function*(){let r=yield(0,f.sha256)(e.bytesToSign());return(0,d.ecdsaSignerKey)(r,t)})}sharedSecret(e){return u.getSharedSecret(this.secp256k1.bytes,e.secp256k1Uncompressed.bytes,!1)}encrypt(e,t,r){let i=this.sharedSecret(t);return(0,f.encrypt)(e,i,r)}decrypt(e,t,r){let i=this.sharedSecret(t);return(0,f.decrypt)(e,i,r)}matches(e){return this.publicKey.equals(e)}equals(e){return(0,p.equalBytes)(this.secp256k1.bytes,e.secp256k1.bytes)&&this.publicKey.equals(e.publicKey)}toBytes(){return l.privateKey.SignedPrivateKey.encode(this).finish()}static fromBytes(e){return new m(l.privateKey.SignedPrivateKey.decode(e))}static fromLegacyKey(e,t){return new m({createdNs:e.timestamp.mul(1e6),secp256k1:e.secp256k1,publicKey:h.SignedPublicKey.fromLegacyKey(e.publicKey,t)})}}t.SignedPrivateKey=m;class v{constructor(e){if(!e.secp256k1)throw Error("invalid private key");if(y(e.secp256k1),this.timestamp=e.timestamp,this.secp256k1=e.secp256k1,!e.publicKey)throw Error("missing public key");this.publicKey=new h.PublicKey(e.publicKey)}static generate(){let e={bytes:u.utils.randomPrivateKey()},t=c.default.fromNumber((new Date).getTime());return new v({secp256k1:e,timestamp:t,publicKey:new h.PublicKey({secp256k1Uncompressed:{bytes:u.getPublicKey(e.bytes)},timestamp:t})})}generated(){return new Date(this.timestamp.toNumber())}sign(e){return s(this,void 0,void 0,function*(){let[t,r]=yield u.sign(e,this.secp256k1.bytes,{recovered:!0,der:!1});return new d.default({ecdsaCompact:{bytes:t,recovery:r}})})}signKey(e){return s(this,void 0,void 0,function*(){let t=yield(0,f.sha256)(e.bytesToSign());return e.signature=yield this.sign(t),e})}sharedSecret(e){return u.getSharedSecret(this.secp256k1.bytes,e.secp256k1Uncompressed.bytes,!1)}encrypt(e,t,r){let i=this.sharedSecret(t);return(0,f.encrypt)(e,i,r)}decrypt(e,t,r){let i=this.sharedSecret(t);return(0,f.decrypt)(e,i,r)}matches(e){return this.publicKey.equals(e)}toBytes(){return l.privateKey.PrivateKey.encode(this).finish()}static fromBytes(e){return new v(l.privateKey.PrivateKey.decode(e))}}t.PrivateKey=v},741:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.decodePrivateKeyBundle=t.PrivateKeyBundleV1=t.PrivateKeyBundleV2=void 0;let n=r(1796),o=r(270),s=r(6002),a=r(8245),l=r(4728);class u{constructor(e){if(this.version=2,!e.identityKey)throw Error("missing identity key");this.identityKey=new o.SignedPrivateKey(e.identityKey),this.preKeys=(e.preKeys||[]).map(e=>new o.SignedPrivateKey(e))}static generate(e){return i(this,void 0,void 0,function*(){let t=yield o.SignedPrivateKey.generate(new s.WalletSigner(e)),r=new u({identityKey:t,preKeys:[]});return yield r.addPreKey(),r})}getCurrentPreKey(){return this.preKeys[0]}findPreKey(e){let t=this.preKeys.find(t=>t.matches(e));if(!t)throw new l.NoMatchingPreKeyError(e);return t}addPreKey(){return i(this,void 0,void 0,function*(){this._publicKeyBundle=void 0;let e=yield o.SignedPrivateKey.generate(this.identityKey);this.preKeys.unshift(e)})}getPublicKeyBundle(){return this._publicKeyBundle||(this._publicKeyBundle=new a.SignedPublicKeyBundle({identityKey:this.identityKey.publicKey,preKey:this.getCurrentPreKey().publicKey})),this._publicKeyBundle}sharedSecret(e,t,r){return i(this,void 0,void 0,function*(){let i,n,o;if(!e.identityKey||!e.preKey)throw Error("invalid peer key bundle");if(!(yield e.identityKey.verifyKey(e.preKey)))throw Error("peer preKey signature invalid");if(!this.identityKey)throw Error("missing identity key");r?(i=(o=this.findPreKey(t)).sharedSecret(e.identityKey),n=this.identityKey.sharedSecret(e.preKey)):(o=this.findPreKey(t),i=this.identityKey.sharedSecret(e.preKey),n=o.sharedSecret(e.identityKey));let s=o.sharedSecret(e.preKey),a=new Uint8Array(i.length+n.length+s.length);return a.set(i,0),a.set(n,i.length),a.set(s,i.length+n.length),a})}encode(){return n.privateKey.PrivateKeyBundle.encode({v1:void 0,v2:this}).finish()}equals(e){if(this.preKeys.length!==e.preKeys.length)return!1;for(let t=0;t<this.preKeys.length;t++)if(!this.preKeys[t].equals(e.preKeys[t]))return!1;return this.identityKey.equals(e.identityKey)}static fromLegacyBundle(e){return new u({identityKey:o.SignedPrivateKey.fromLegacyKey(e.identityKey,!0),preKeys:e.preKeys.map(e=>o.SignedPrivateKey.fromLegacyKey(e))})}}t.PrivateKeyBundleV2=u;class c{constructor(e){if(this.version=1,!e.identityKey)throw Error("missing identity key");this.identityKey=new o.PrivateKey(e.identityKey),this.preKeys=(e.preKeys||[]).map(e=>new o.PrivateKey(e))}static generate(e){return i(this,void 0,void 0,function*(){let t=o.PrivateKey.generate();e&&(yield t.publicKey.signWithWallet(e));let r=new c({identityKey:t,preKeys:[]});return yield r.addPreKey(),r})}getCurrentPreKey(){return this.preKeys[0]}findPreKey(e){let t=this.preKeys.find(t=>t.matches(e));if(!t)throw new l.NoMatchingPreKeyError(e);return t}addPreKey(){return i(this,void 0,void 0,function*(){this._publicKeyBundle=void 0;let e=o.PrivateKey.generate();yield this.identityKey.signKey(e.publicKey),this.preKeys.unshift(e)})}getPublicKeyBundle(){return this._publicKeyBundle||(this._publicKeyBundle=new a.PublicKeyBundle({identityKey:this.identityKey.publicKey,preKey:this.getCurrentPreKey().publicKey})),this._publicKeyBundle}sharedSecret(e,t,r){return i(this,void 0,void 0,function*(){let i,n,o;if(!e.identityKey||!e.preKey)throw Error("invalid peer key bundle");if(!(yield e.identityKey.verifyKey(e.preKey)))throw Error("peer preKey signature invalid");if(!this.identityKey)throw Error("missing identity key");r?(i=(o=this.findPreKey(t)).sharedSecret(e.identityKey),n=this.identityKey.sharedSecret(e.preKey)):(o=this.findPreKey(t),i=this.identityKey.sharedSecret(e.preKey),n=o.sharedSecret(e.identityKey));let s=o.sharedSecret(e.preKey),a=new Uint8Array(i.length+n.length+s.length);return a.set(i,0),a.set(n,i.length),a.set(s,i.length+n.length),a})}encode(){return n.privateKey.PrivateKeyBundle.encode({v1:this,v2:void 0}).finish()}}t.PrivateKeyBundleV1=c,t.decodePrivateKeyBundle=function(e){let t=n.privateKey.PrivateKeyBundle.decode(e);if(t.v1)return new c(t.v1);if(t.v2)return new u(t.v2);throw Error("unknown private key bundle version")}},2940:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKey=t.SignedPublicKey=t.UnsignedPublicKey=void 0;let l=r(1796),u=o(r(9656)),c=a(r(1583)),d=o(r(6002)),h=r(9272),f=r(9982),p=r(6314),y=new c.default(1e9).mul(1e9);class m{constructor(e){if(!(null==e?void 0:e.secp256k1Uncompressed))throw Error("invalid public key");(function(e){if(65!==e.bytes.length)throw Error(`invalid public key length: ${e.bytes.length}`);if(4!==e.bytes[0])throw Error(`unrecognized public key prefix: ${e.bytes[0]}`)})(e.secp256k1Uncompressed),this.secp256k1Uncompressed=e.secp256k1Uncompressed,this.createdNs=e.createdNs.toUnsigned()}generated(){return new Date(this.timestamp.toNumber())}isFromLegacyKey(){return this.createdNs.lessThan(y)}get timestamp(){return(this.isFromLegacyKey()?this.createdNs:this.createdNs.div(1e6)).toUnsigned()}verify(e,t){return!!e.ecdsaCompact&&u.verify(e.ecdsaCompact.bytes,t,this.secp256k1Uncompressed.bytes)}verifyKey(e){return s(this,void 0,void 0,function*(){if(!e.signature)return!1;let t=yield(0,p.sha256)(e.bytesToSign());return this.verify(e.signature,t)})}equals(e){return(0,h.equalBytes)(this.secp256k1Uncompressed.bytes,e.secp256k1Uncompressed.bytes)}getEthereumAddress(){return f.utils.computeAddress(this.secp256k1Uncompressed.bytes)}toBytes(){return l.publicKey.UnsignedPublicKey.encode(this).finish()}static fromBytes(e){return new m(l.publicKey.UnsignedPublicKey.decode(e))}}t.UnsignedPublicKey=m;class v extends m{constructor(e){if(!e.keyBytes)throw Error("missing key bytes");if(super(l.publicKey.UnsignedPublicKey.decode(e.keyBytes)),this.keyBytes=e.keyBytes,!e.signature)throw Error("missing key signature");this.signature=new d.default(e.signature)}get unsignedKey(){return new m({createdNs:this.createdNs,secp256k1Uncompressed:this.secp256k1Uncompressed})}signerKey(){return this.signature.signerKey(this)}walletSignatureAddress(){return s(this,void 0,void 0,function*(){if(!this.signature.walletEcdsaCompact)throw Error("key was not signed by a wallet");let e=yield this.signerKey();if(!e)throw Error("key signature not valid");return e.getEthereumAddress()})}equals(e){return this.unsignedKey.equals(e.unsignedKey)&&this.signature.equals(e.signature)}bytesToSign(){return this.keyBytes}toBytes(){return l.publicKey.SignedPublicKey.encode(this).finish()}static fromBytes(e){return new v(l.publicKey.SignedPublicKey.decode(e))}toLegacyKey(){if(!this.isFromLegacyKey())throw Error("cannot be converted to legacy key");let e=this.signature;return e.walletEcdsaCompact&&(e=new d.default({ecdsaCompact:e.walletEcdsaCompact})),new g({timestamp:this.timestamp,secp256k1Uncompressed:this.secp256k1Uncompressed,signature:e})}static fromLegacyKey(e,t){if(!e.signature)throw Error("key is not signed");let r=e.signature;return t&&(r=new d.default({walletEcdsaCompact:r.ecdsaCompact})),new v({keyBytes:e.bytesToSign(),signature:r})}}t.SignedPublicKey=v;class g extends m{constructor(e){super({createdNs:e.timestamp.mul(1e6),secp256k1Uncompressed:e.secp256k1Uncompressed}),e.signature&&(this.signature=new d.default(e.signature))}get timestamp(){return this.createdNs.div(1e6)}bytesToSign(){return l.publicKey.PublicKey.encode({timestamp:this.timestamp,secp256k1Uncompressed:this.secp256k1Uncompressed}).finish()}signWithWallet(e){return s(this,void 0,void 0,function*(){let t=yield e.signMessage(d.WalletSigner.identitySigRequestText(this.bytesToSign())),r=f.utils.splitSignature(t),i=(0,h.hexToBytes)(r.r),n=(0,h.hexToBytes)(r.s),o=new Uint8Array(64);o.set(i),o.set(n,i.length),this.signature=new d.default({ecdsaCompact:{bytes:o,recovery:r.recoveryParam}})})}walletSignatureAddress(){if(!this.signature)throw Error("key is not signed");let e=(0,h.hexToBytes)(f.utils.hashMessage(d.WalletSigner.identitySigRequestText(this.bytesToSign()))),t=this.signature.getPublicKey(e);if(!t)throw Error("key signature is malformed");return t.getEthereumAddress()}toBytes(){return l.publicKey.PublicKey.encode(this).finish()}static fromBytes(e){return new g(l.publicKey.PublicKey.decode(e))}}t.PublicKey=g},8245:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PublicKeyBundle=t.SignedPublicKeyBundle=void 0;let i=r(1796),n=r(2940);class o{constructor(e){if(!e.identityKey)throw Error("missing identity key");if(!e.preKey)throw Error("missing pre-key");this.identityKey=new n.SignedPublicKey(e.identityKey),this.preKey=new n.SignedPublicKey(e.preKey)}walletSignatureAddress(){return this.identityKey.walletSignatureAddress()}equals(e){return this.identityKey.equals(e.identityKey)&&this.preKey.equals(e.preKey)}toBytes(){return i.publicKey.SignedPublicKeyBundle.encode(this).finish()}isFromLegacyBundle(){return this.identityKey.isFromLegacyKey()&&this.preKey.isFromLegacyKey()}toLegacyBundle(){return new s({identityKey:this.identityKey.toLegacyKey(),preKey:this.preKey.toLegacyKey()})}static fromBytes(e){let t=i.publicKey.SignedPublicKeyBundle.decode(e);return new o(t)}static fromLegacyBundle(e){return new o({identityKey:n.SignedPublicKey.fromLegacyKey(e.identityKey,!0),preKey:n.SignedPublicKey.fromLegacyKey(e.preKey)})}}t.SignedPublicKeyBundle=o;class s{constructor(e){if(!e.identityKey)throw Error("missing identity key");if(!e.preKey)throw Error("missing pre-key");this.identityKey=new n.PublicKey(e.identityKey),this.preKey=new n.PublicKey(e.preKey)}equals(e){return this.identityKey.equals(e.identityKey)&&this.preKey.equals(e.preKey)}walletSignatureAddress(){return this.identityKey.walletSignatureAddress()}toBytes(){return i.publicKey.PublicKeyBundle.encode(this).finish()}static fromBytes(e){let t=i.publicKey.PublicKeyBundle.decode(e);return new s(t)}}t.PublicKeyBundle=s},6002:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletSigner=t.ecdsaSignerKey=void 0;let l=r(1796),u=a(r(1583)),c=o(r(9656)),d=r(2940),h=r(270),f=r(9982),p=r(9272);function y(e){if(64!==e.bytes.length)throw Error(`invalid signature length: ${e.bytes.length}`);if(0!==e.recovery&&1!==e.recovery)throw Error(`invalid recovery bit: ${e.recovery}`)}function m(e,t){return e.recovery===t.recovery&&(0,p.equalBytes)(e.bytes,t.bytes)}function v(e,t){let r=c.recoverPublicKey(e,t.bytes,t.recovery);return r?new d.UnsignedPublicKey({secp256k1Uncompressed:{bytes:r},createdNs:u.default.fromNumber(0)}):void 0}t.ecdsaSignerKey=v;class g{constructor(e){if(e.ecdsaCompact)y(e.ecdsaCompact),this.ecdsaCompact=e.ecdsaCompact;else{if(!e.walletEcdsaCompact)throw Error("invalid signature");y(e.walletEcdsaCompact),this.walletEcdsaCompact=e.walletEcdsaCompact}}signerKey(e){return s(this,void 0,void 0,function*(){return this.ecdsaCompact?h.SignedPrivateKey.signerKey(e,this.ecdsaCompact):this.walletEcdsaCompact?b.signerKey(e,this.walletEcdsaCompact):void 0})}getPublicKey(e){if(!this.ecdsaCompact)throw Error("invalid signature");let t=c.recoverPublicKey(e,this.ecdsaCompact.bytes,this.ecdsaCompact.recovery);return t?new d.PublicKey({secp256k1Uncompressed:{bytes:t},timestamp:u.default.fromNumber(0)}):void 0}equals(e){return this.ecdsaCompact&&e.ecdsaCompact?m(this.ecdsaCompact,e.ecdsaCompact):!(!this.walletEcdsaCompact||!e.walletEcdsaCompact)&&m(this.walletEcdsaCompact,e.walletEcdsaCompact)}toBytes(){return l.signature.Signature.encode(this).finish()}static fromBytes(e){return new g(l.signature.Signature.decode(e))}}t.default=g;class b{constructor(e){this.wallet=e}static identitySigRequestText(e){return`XMTP : Create Identity
${(0,p.bytesToHex)(e)}

For more info: https://xmtp.org/signatures/`}static signerKey(e,t){return v((0,p.hexToBytes)(f.utils.hashMessage(this.identitySigRequestText(e.bytesToSign()))),t)}signKey(e){return s(this,void 0,void 0,function*(){let t=e.toBytes(),r=yield this.wallet.signMessage(b.identitySigRequestText(t)),i=f.utils.splitSignature(r),n=(0,p.hexToBytes)(i.r),o=(0,p.hexToBytes)(i.s),s=new Uint8Array(64);s.set(n),s.set(o,n.length);let a=new g({walletEcdsaCompact:{bytes:s,recovery:i.recoveryParam}});return new d.SignedPublicKey({keyBytes:t,signature:a})})}}t.WalletSigner=b},6314:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.decrypt=t.encrypt=t.sha256=t.crypto=void 0;let a=o(r(7527));t.crypto="undefined"!=typeof window?window.crypto:r(2114).webcrypto;let l=new ArrayBuffer(0);function u(e,t){let r={name:"AES-GCM",iv:e};return t&&(r.additionalData=t),r}function c(e,r){return s(this,void 0,void 0,function*(){let i=yield t.crypto.subtle.importKey("raw",e,"HKDF",!1,["deriveKey"]);return t.crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:r,info:l},i,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])})}t.sha256=function(e){return s(this,void 0,void 0,function*(){return new Uint8Array((yield t.crypto.subtle.digest("SHA-256",e)))})},t.encrypt=function(e,r,i){return s(this,void 0,void 0,function*(){let n=t.crypto.getRandomValues(new Uint8Array(a.KDFSaltSize)),o=t.crypto.getRandomValues(new Uint8Array(a.AESGCMNonceSize)),s=yield c(r,n),l=yield t.crypto.subtle.encrypt(u(o,i),s,e);return new a.default({aes256GcmHkdfSha256:{payload:new Uint8Array(l),hkdfSalt:n,gcmNonce:o}})})},t.decrypt=function(e,r,i){return s(this,void 0,void 0,function*(){if(!e.aes256GcmHkdfSha256)throw Error("invalid payload ciphertext");let n=yield c(r,e.aes256GcmHkdfSha256.hkdfSalt),o=yield t.crypto.subtle.decrypt(u(e.aes256GcmHkdfSha256.gcmNonce,i),n,e.aes256GcmHkdfSha256.payload);return new Uint8Array(o)})}},4728:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoMatchingPreKeyError=void 0;let i=r(9272);class n extends Error{constructor(e){super(`no pre-key matches: ${(0,i.bytesToHex)(e.secp256k1Uncompressed.bytes)}`)}}t.NoMatchingPreKeyError=n},2449:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.WalletSigner=t.Signature=t.PrivateKeyBundleV2=t.PrivateKeyBundleV1=t.decodePrivateKeyBundle=t.SignedPrivateKey=t.PrivateKey=t.PublicKeyBundle=t.PublicKey=t.SignedPublicKeyBundle=t.SignedPublicKey=t.UnsignedPublicKey=t.Ciphertext=t.decrypt=t.encrypt=t.utils=void 0;let a=r(8245);Object.defineProperty(t,"PublicKeyBundle",{enumerable:!0,get:function(){return a.PublicKeyBundle}}),Object.defineProperty(t,"SignedPublicKeyBundle",{enumerable:!0,get:function(){return a.SignedPublicKeyBundle}});let l=r(270);Object.defineProperty(t,"SignedPrivateKey",{enumerable:!0,get:function(){return l.SignedPrivateKey}}),Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return l.PrivateKey}});let u=r(741);Object.defineProperty(t,"PrivateKeyBundleV1",{enumerable:!0,get:function(){return u.PrivateKeyBundleV1}}),Object.defineProperty(t,"PrivateKeyBundleV2",{enumerable:!0,get:function(){return u.PrivateKeyBundleV2}}),Object.defineProperty(t,"decodePrivateKeyBundle",{enumerable:!0,get:function(){return u.decodePrivateKeyBundle}});let c=r(2940);Object.defineProperty(t,"UnsignedPublicKey",{enumerable:!0,get:function(){return c.UnsignedPublicKey}}),Object.defineProperty(t,"SignedPublicKey",{enumerable:!0,get:function(){return c.SignedPublicKey}}),Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return c.PublicKey}});let d=o(r(6002));t.Signature=d.default,Object.defineProperty(t,"WalletSigner",{enumerable:!0,get:function(){return d.WalletSigner}});let h=o(r(9272));t.utils=h;let f=r(6314);Object.defineProperty(t,"encrypt",{enumerable:!0,get:function(){return f.encrypt}}),Object.defineProperty(t,"decrypt",{enumerable:!0,get:function(){return f.decrypt}});let p=s(r(7527));t.Ciphertext=p.default},9272:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.equalBytes=t.hexToBytes=t.bytesToHex=t.getRandomValues=void 0;let s=o(r(9656)),a=r(6314);t.getRandomValues=function(e){return a.crypto.getRandomValues(e)},t.bytesToHex=s.utils.bytesToHex,t.hexToBytes=function(e){e.startsWith("0x")&&(e=e.slice(2));let t=new Uint8Array(e.length/2);for(let r=0;r<t.length;r++){let i=2*r;t[r]=Number.parseInt(e.slice(i,i+2),16)}return t},t.equalBytes=function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}},4432:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.mapPaginatedStream=t.toNanoString=t.fromNanoString=t.dateToNs=t.nsToDate=t.SortDirection=t.ApiUrls=t.ContentTypeComposite=t.CompositeCodec=t.ContentTypeText=t.TextCodec=t.ContentTypeFallback=t.ContentTypeId=t.Conversations=t.Compression=t.KeyStoreType=t.Client=t.Stream=t.getRandomValues=t.decrypt=t.encrypt=t.Signature=t.PrivateKey=t.SignedPublicKeyBundle=t.SignedPublicKey=t.PublicKeyBundle=t.PublicKey=t.Ciphertext=t.decodeContent=t.DecodedMessage=void 0;var n=r(6044);Object.defineProperty(t,"DecodedMessage",{enumerable:!0,get:function(){return n.DecodedMessage}}),Object.defineProperty(t,"decodeContent",{enumerable:!0,get:function(){return n.decodeContent}});var o=r(2449);Object.defineProperty(t,"Ciphertext",{enumerable:!0,get:function(){return o.Ciphertext}}),Object.defineProperty(t,"PublicKey",{enumerable:!0,get:function(){return o.PublicKey}}),Object.defineProperty(t,"PublicKeyBundle",{enumerable:!0,get:function(){return o.PublicKeyBundle}}),Object.defineProperty(t,"SignedPublicKey",{enumerable:!0,get:function(){return o.SignedPublicKey}}),Object.defineProperty(t,"SignedPublicKeyBundle",{enumerable:!0,get:function(){return o.SignedPublicKeyBundle}}),Object.defineProperty(t,"PrivateKey",{enumerable:!0,get:function(){return o.PrivateKey}}),Object.defineProperty(t,"Signature",{enumerable:!0,get:function(){return o.Signature}}),Object.defineProperty(t,"encrypt",{enumerable:!0,get:function(){return o.encrypt}}),Object.defineProperty(t,"decrypt",{enumerable:!0,get:function(){return o.decrypt}});var s=r(9272);Object.defineProperty(t,"getRandomValues",{enumerable:!0,get:function(){return s.getRandomValues}});var a=r(4596);Object.defineProperty(t,"Stream",{enumerable:!0,get:function(){return i(a).default}});var l=r(8901);Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return i(l).default}}),Object.defineProperty(t,"KeyStoreType",{enumerable:!0,get:function(){return l.KeyStoreType}}),Object.defineProperty(t,"Compression",{enumerable:!0,get:function(){return l.Compression}});var u=r(5880);Object.defineProperty(t,"Conversations",{enumerable:!0,get:function(){return u.Conversations}});var c=r(6397);Object.defineProperty(t,"ContentTypeId",{enumerable:!0,get:function(){return c.ContentTypeId}}),Object.defineProperty(t,"ContentTypeFallback",{enumerable:!0,get:function(){return c.ContentTypeFallback}});var d=r(6254);Object.defineProperty(t,"TextCodec",{enumerable:!0,get:function(){return d.TextCodec}}),Object.defineProperty(t,"ContentTypeText",{enumerable:!0,get:function(){return d.ContentTypeText}});var h=r(4196);Object.defineProperty(t,"CompositeCodec",{enumerable:!0,get:function(){return h.CompositeCodec}}),Object.defineProperty(t,"ContentTypeComposite",{enumerable:!0,get:function(){return h.ContentTypeComposite}});var f=r(1962);Object.defineProperty(t,"ApiUrls",{enumerable:!0,get:function(){return f.ApiUrls}}),Object.defineProperty(t,"SortDirection",{enumerable:!0,get:function(){return f.SortDirection}});var p=r(5506);Object.defineProperty(t,"nsToDate",{enumerable:!0,get:function(){return p.nsToDate}}),Object.defineProperty(t,"dateToNs",{enumerable:!0,get:function(){return p.dateToNs}}),Object.defineProperty(t,"fromNanoString",{enumerable:!0,get:function(){return p.fromNanoString}}),Object.defineProperty(t,"toNanoString",{enumerable:!0,get:function(){return p.toNanoString}}),Object.defineProperty(t,"mapPaginatedStream",{enumerable:!0,get:function(){return p.mapPaginatedStream}})},6284:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let n=r(1796),o=r(741),s=r(7915),a=r(5417),l=r(6320),u=r(4162),c=r(5506),{ErrorCode:d}=n.keystore,h=(e,t,r)=>{for(let i of t)if(!e[i])throw new l.KeystoreError(d.ERROR_CODE_INVALID_INPUT,`Missing field ${String(i)}`);for(let n of r){let o=e[n];if(!o||!(null==o?void 0:o.length))throw new l.KeystoreError(d.ERROR_CODE_INVALID_INPUT,`Missing field ${String(n)}`)}return!0};t.default=class{constructor(e){this.v1Keys=e,this.v2Keys=o.PrivateKeyBundleV2.fromLegacyBundle(e),this.topicKeys=new Map}decryptV1(e){return i(this,void 0,void 0,function*(){let t=yield(0,u.mapAndConvertErrors)(e.requests,e=>i(this,void 0,void 0,function*(){if(!h(e,["payload","peerKeys"],["headerBytes"]))throw new l.KeystoreError(d.ERROR_CODE_INVALID_INPUT,"invalid");let{payload:t,peerKeys:r,headerBytes:i,isSender:n}=e;return{decrypted:yield(0,a.decryptV1)(this.v1Keys,(0,u.toPublicKeyBundle)(r),t,i,n)}}),n.keystore.ErrorCode.ERROR_CODE_UNSPECIFIED);return n.keystore.DecryptResponse.fromPartial({responses:t})})}decryptV2(e){return i(this,void 0,void 0,function*(){let t=yield(0,u.mapAndConvertErrors)(e.requests,e=>i(this,void 0,void 0,function*(){if(!h(e,["payload"],["headerBytes"]))throw new l.KeystoreError(n.keystore.ErrorCode.ERROR_CODE_INVALID_INPUT,"missing required field");let{payload:t,headerBytes:r,contentTopic:i}=e,o=this.topicKeys.get(i);if(!o)throw new l.KeystoreError(n.keystore.ErrorCode.ERROR_CODE_NO_MATCHING_PREKEY,"no topic key");return{decrypted:yield(0,a.decryptV2)(t,o.key,r)}}),d.ERROR_CODE_UNSPECIFIED);return n.keystore.DecryptResponse.fromPartial({responses:t})})}encryptV1(e){return i(this,void 0,void 0,function*(){let t=yield(0,u.mapAndConvertErrors)(e.requests,e=>i(this,void 0,void 0,function*(){if(!h(e,["payload","recipient"],["headerBytes"]))throw new l.KeystoreError(d.ERROR_CODE_INVALID_INPUT,"missing required field");let{recipient:t,payload:r,headerBytes:i}=e;return{encrypted:yield(0,a.encryptV1)(this.v1Keys,(0,u.toPublicKeyBundle)(t),r,i)}}),d.ERROR_CODE_UNSPECIFIED);return n.keystore.EncryptResponse.fromPartial({responses:t})})}encryptV2(e){return i(this,void 0,void 0,function*(){let t=yield(0,u.mapAndConvertErrors)(e.requests,e=>i(this,void 0,void 0,function*(){if(!h(e,["payload"],["headerBytes"]))throw new l.KeystoreError(d.ERROR_CODE_INVALID_INPUT,"missing required field");let{payload:t,headerBytes:r,contentTopic:i}=e,n=this.topicKeys.get(i);if(!n)throw new l.KeystoreError(d.ERROR_CODE_NO_MATCHING_PREKEY,"no topic key");return{encrypted:yield(0,a.encryptV2)(t,n.key,r)}}),d.ERROR_CODE_INVALID_INPUT);return n.keystore.EncryptResponse.fromPartial({responses:t})})}saveInvites(e){return i(this,void 0,void 0,function*(){let t=yield(0,u.mapAndConvertErrors)(e.requests,({payload:e,timestampNs:t})=>i(this,void 0,void 0,function*(){let r=s.SealedInvitation.fromBytes(e);if(!r.v1.header.createdNs.equals(t))throw Error("envelope and header timestamp mismatch");let i=yield r.v1.getInvitation(this.v2Keys);return{conversation:this.addConversationFromV1Invite(i,(0,c.nsToDate)(r.v1.header.createdNs))}}),d.ERROR_CODE_INVALID_INPUT);return n.keystore.SaveInvitesResponse.fromPartial({responses:t})})}createInvite(e){return i(this,void 0,void 0,function*(){try{if(!h(e,["recipient"],[]))throw new l.KeystoreError(d.ERROR_CODE_INVALID_INPUT,"missing recipient");let t=s.InvitationV1.createRandom(e.context),r=(0,c.nsToDate)(e.createdNs),i=yield s.SealedInvitation.createV1({sender:this.v2Keys,recipient:(0,u.toSignedPublicKeyBundle)(e.recipient),created:r,invitation:t}),o=this.addConversationFromV1Invite(t,r);return n.keystore.CreateInviteResponse.fromPartial({conversation:o,payload:i.toBytes()})}catch(a){throw(0,u.convertError)(a,d.ERROR_CODE_INVALID_INPUT)}})}getV2Conversations(){return i(this,void 0,void 0,function*(){let e=Array.from(this.topicKeys.entries()).map(([e,t])=>({topic:e,createdNs:(0,c.dateToNs)(t.created),context:t.context}));return e.sort((e,t)=>e.createdNs.sub(t.createdNs).toNumber()),e})}getPublicKeyBundle(){return i(this,void 0,void 0,function*(){return this.v2Keys.getPublicKeyBundle()})}getAccountAddress(){return i(this,void 0,void 0,function*(){return this.v2Keys.getPublicKeyBundle().walletSignatureAddress()})}addConversationFromV1Invite(e,t){return this.topicKeys.set(e.topic,{key:e.aes256GcmHkdfSha256.keyMaterial,context:e.context,created:t}),{topic:e.topic,createdNs:(0,c.dateToNs)(t),context:e.context}}}},5417:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.encryptV2=t.decryptV2=t.encryptV1=t.decryptV1=void 0;let n=r(2449);t.decryptV1=(e,t,r,o,s)=>i(void 0,void 0,void 0,function*(){let i=yield e.sharedSecret(t,e.getCurrentPreKey().publicKey,!s);return(0,n.decrypt)(r,i,o)}),t.encryptV1=(e,t,r,o)=>i(void 0,void 0,void 0,function*(){let i=yield e.sharedSecret(t,e.getCurrentPreKey().publicKey,!1);return(0,n.encrypt)(r,i,o)}),t.decryptV2=(e,t,r)=>(0,n.decrypt)(e,t,r),t.encryptV2=(e,t,r)=>(0,n.encrypt)(e,t,r)},6320:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeystoreError=void 0;class r extends Error{constructor(e,t){super(t),this.code=e}}t.KeystoreError=r},98:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.InMemoryKeystore=void 0;var s=r(6284);Object.defineProperty(t,"InMemoryKeystore",{enumerable:!0,get:function(){return o(s).default}}),n(r(5417),t),n(r(6320),t),n(r(9270),t)},9270:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4162:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.toSignedPublicKeyBundle=t.toPublicKeyBundle=t.mapAndConvertErrors=t.wrapResult=t.convertError=void 0;let n=r(2449),o=r(6320);t.convertError=(e,t)=>e instanceof o.KeystoreError?e:new o.KeystoreError(t,e.message),t.wrapResult=e=>({result:e}),t.mapAndConvertErrors=(e,r,n)=>Promise.all(e.map(e=>i(void 0,void 0,void 0,function*(){try{return(0,t.wrapResult)((yield r(e)))}catch(i){return{error:(0,t.convertError)(i,n)}}}))),t.toPublicKeyBundle=e=>e instanceof n.PublicKeyBundle?e:new n.PublicKeyBundle(e),t.toSignedPublicKeyBundle=e=>e instanceof n.SignedPublicKeyBundle?e:new n.SignedPublicKeyBundle(e)},4215:(e,t,r)=>{"use strict";r(3052)},7261:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.storageSigRequestText=void 0;let o=r(9982),s=r(2449),a=r(9099),l=r(9272),u=n(r(7527)),c=r(1796),d="key_bundle";function h(e){try{return[(0,s.decodePrivateKeyBundle)(e),!1]}catch(r){let t=c.privateKey.PrivateKeyBundleV1.decode(e);return[new s.PrivateKeyBundleV1(t),!0]}}function f(e){return`XMTP : Enable Identity
${(0,l.bytesToHex)(e)}

For more info: https://xmtp.org/signatures/`}t.default=class{constructor(e,t){this.signer=e,this.store=t}getStorageAddress(e){return i(this,void 0,void 0,function*(){let t=yield this.signer.getAddress();return`${t=o.utils.getAddress(t)}/${e}`})}loadPrivateKeyBundle(){return i(this,void 0,void 0,function*(){let e=yield this.store.get((yield this.getStorageAddress(d)));if(!e)return null;let[t,r]=yield this.fromEncryptedBytes(this.signer,Uint8Array.from(e));return r&&(yield this.storePrivateKeyBundle(t)),t})}storePrivateKeyBundle(e){return i(this,void 0,void 0,function*(){let t=yield this.getStorageAddress(d),r=yield this.toEncryptedBytes(e,this.signer);"function"==typeof this.store.setAuthenticator&&this.store.setAuthenticator(new a.Authenticator(e.identityKey)),yield this.store.set(t,Buffer.from(r))})}toEncryptedBytes(e,t){return i(this,void 0,void 0,function*(){let r=e.encode(),i=(0,l.getRandomValues)(new Uint8Array(32)),n=f(i),a=yield t.getAddress(),u=yield t.signMessage(n),d=o.utils.verifyMessage(n,u);if(d!==a&&(u=yield t.signMessage(n),console.log("invalid signature, retrying"),(d=o.utils.verifyMessage(n,u))!==a))throw Error("invalid signature");let h=(0,l.hexToBytes)(u),p=yield(0,s.encrypt)(r,h);return c.privateKey.EncryptedPrivateKeyBundle.encode({v1:{walletPreKey:i,ciphertext:p}}).finish()})}fromEncryptedBytes(e,t){var r;return i(this,void 0,void 0,function*(){let[i,n]=function(e){try{let t=c.privateKey.EncryptedPrivateKeyBundle.decode(e);if(t.v1)return[t.v1,!1]}catch(r){return[c.privateKey.EncryptedPrivateKeyBundleV1.decode(e),!0]}throw Error("unrecognized encrypted private key bundle version")}(t);if(!i.walletPreKey)throw Error("missing wallet pre-key");if(!(null===(r=i.ciphertext)||void 0===r?void 0:r.aes256GcmHkdfSha256))throw Error("missing bundle ciphertext");let o=(0,l.hexToBytes)((yield e.signMessage(f(i.walletPreKey))));try{let a=new u.default(i.ciphertext),d=yield(0,s.decrypt)(a,o),[p,y]=h(d);return[p,n||y]}catch(S){if(65!==o.length)throw Error("Expected 65 bytes before trying a different recovery byte");let m=o[o.length-1],v=o.slice(0,o.length-1);v=new Uint8Array(m<27?[...v,m+27]:[...v,m-27]);let g=new u.default(i.ciphertext),b=yield(0,s.decrypt)(g,v),[w,_]=h(b);return[w,n||_]}})}},t.storageSigRequestText=f},9185:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})},n=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,n){!function(e,t,r,i){Promise.resolve(i).then(function(t){e({value:t,done:r})},t)}(i,n,(t=e[r](t)).done,t.value)})}}};Object.defineProperty(t,"__esModule",{value:!0});let o=r(1796),s=r(5161),a=o.fetcher.b64Decode;t.default=class{constructor(e){this.client=e}get(e){var t,r;return i(this,void 0,void 0,function*(){try{for(var i,s=n(this.client.queryIterator({contentTopics:[this.buildTopic(e)]},{pageSize:10,direction:o.messageApi.SortDirection.SORT_DIRECTION_DESCENDING}));!(i=yield s.next()).done;){let l=i.value;if(l.message)try{let u=a(l.message.toString());return Buffer.from(u)}catch(c){console.log(c)}}}catch(d){t={error:d}}finally{try{i&&!i.done&&(r=s.return)&&(yield r.call(s))}finally{if(t)throw t.error}}return null})}set(e,t){return i(this,void 0,void 0,function*(){let r=Uint8Array.from(t);yield this.client.publish([{contentTopic:this.buildTopic(e),message:r}])})}setAuthenticator(e){this.client.setAuthenticator(e)}buildTopic(e){return(0,s.buildUserPrivateStoreTopic)(e)}}},8173:function(e,t,r){"use strict";var i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0});let n=r(741);t.default=class{constructor(e){this.value=e}loadPrivateKeyBundle(){return i(this,void 0,void 0,function*(){return(0,n.decodePrivateKeyBundle)(this.value)})}storePrivateKeyBundle(){return i(this,void 0,void 0,function*(){throw Error("Store is not possible with StaticStore")})}}},9535:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.StaticKeyStore=t.PrivateTopicStore=t.storageSigRequestText=t.EncryptedKeyStore=void 0;var n=r(7261);Object.defineProperty(t,"EncryptedKeyStore",{enumerable:!0,get:function(){return i(n).default}}),Object.defineProperty(t,"storageSigRequestText",{enumerable:!0,get:function(){return n.storageSigRequestText}});var o=r(9185);Object.defineProperty(t,"PrivateTopicStore",{enumerable:!0,get:function(){return i(o).default}});var s=r(8173);Object.defineProperty(t,"StaticKeyStore",{enumerable:!0,get:function(){return i(s).default}})},8206:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})},i=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=e[r]&&function(t){return new Promise(function(i,n){!function(e,t,r,i){Promise.resolve(i).then(function(t){e({value:t,done:r})},t)}(i,n,(t=e[r](t)).done,t.value)})}}},n=this&&this.__await||function(e){return this instanceof n?(this.v=e,this):new n(e)},o=this&&this.__asyncGenerator||function(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,o=r.apply(e,t||[]),s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(e){o[e]&&(i[e]=function(t){return new Promise(function(r,i){s.push([e,t,r,i])>1||l(e,t)})})}function l(e,t){var r;try{(r=o[e](t)).value instanceof n?Promise.resolve(r.value.v).then(u,c):d(s[0][2],r)}catch(i){d(s[0][3],i)}}function u(e){l("next",e)}function c(e){l("throw",e)}function d(e,t){e(t),s.shift(),s.length&&l(s[0][0],s[0][1])}};Object.defineProperty(t,"__esModule",{value:!0}),t.mapPaginatedStream=t.retry=t.promiseWithTimeout=t.sleep=void 0,t.sleep=e=>new Promise(t=>setTimeout(t,e)),t.promiseWithTimeout=(e,t,r)=>{let i;let n=new Promise((t,n)=>{i=setTimeout(()=>n(Error(r)),e)});return Promise.race([t(),n]).then(e=>(clearTimeout(i),e))};let s=e=>!!e;t.retry=function e(i,n,o,a,l=s,u=1){return r(this,void 0,void 0,function*(){let r="number"==typeof u?u:1;try{return yield i(...n)}catch(s){if(!l(s)||r>o)throw s;return yield(0,t.sleep)(a),e(i,n,o,a,l,r+1)}})},t.mapPaginatedStream=function(e,t){return o(this,arguments,function*(){var r,o;try{for(var s,a=i(e);!(s=yield n(a.next())).done;){let l=s.value,u=yield n(Promise.allSettled(l.map(t))),c=[];for(let d of u)"fulfilled"===d.status?c.push(d.value):console.warn("Failed to process envelope due to reason: ",d.reason);yield yield n(c)}}catch(h){r={error:h}}finally{try{s&&!s.done&&(o=a.return)&&(yield n(o.call(a)))}finally{if(r)throw r.error}}})}},6908:function(e,t,r){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fromNanoString=t.toNanoString=t.nsToDate=t.dateToNs=void 0;let n=i(r(1583));function o(e){return n.default.fromNumber(e.valueOf()).multiply(1e6)}function s(e){return new Date(e.divide(1e6).toNumber())}t.dateToNs=o,t.nsToDate=s,t.toNanoString=e=>e&&o(e).toString(),t.fromNanoString=e=>{if(e)return s(n.default.fromString(e))}},5506:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),n(r(5161),t),n(r(8206),t),n(r(6908),t)},5161:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildUserPrivateStoreTopic=t.buildUserInviteTopic=t.buildUserIntroTopic=t.buildUserContactTopic=t.buildDirectMessageTopicV2=t.buildDirectMessageTopic=t.buildContentTopic=void 0;let i=r(9982);t.buildContentTopic=e=>`/xmtp/0/${e}/proto`,t.buildDirectMessageTopic=(e,r)=>{let n=[i.utils.getAddress(e),i.utils.getAddress(r)];return n.sort(),(0,t.buildContentTopic)(`dm-${n.join("-")}`)},t.buildDirectMessageTopicV2=e=>(0,t.buildContentTopic)(`m-${e}`),t.buildUserContactTopic=e=>(0,t.buildContentTopic)(`contact-${i.utils.getAddress(e)}`),t.buildUserIntroTopic=e=>(0,t.buildContentTopic)(`intro-${i.utils.getAddress(e)}`),t.buildUserInviteTopic=e=>(0,t.buildContentTopic)(`invite-${i.utils.getAddress(e)}`),t.buildUserPrivateStoreTopic=e=>(0,t.buildContentTopic)(`privatestore-${e}`)},9159:()=>{},6601:()=>{},2114:()=>{},1583:(e,t)=>{var r,i=function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(r){}function i(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function n(e){return!0===(e&&e.__isLong__)}function o(e){var t=Math.clz32(e&-e);return e?31-t:t}i.prototype.__isLong__,Object.defineProperty(i.prototype,"__isLong__",{value:!0}),i.isLong=n;var s={},a={};function l(e,t){var r,i,n;return t?(n=0<=(e>>>=0)&&e<256)&&(i=a[e])?i:(r=c(e,0,!0),n&&(a[e]=r),r):(n=-128<=(e|=0)&&e<128)&&(i=s[e])?i:(r=c(e,e<0?-1:0,!1),n&&(s[e]=r),r)}function u(e,t){if(isNaN(e))return t?b:g;if(t){if(e<0)return b;if(e>=y)return k}else{if(e<=-m)return N;if(e+1>=m)return E}return e<0?u(-e,t).neg():c(e%p|0,e/p|0,t)}function c(e,t,r){return new i(e,t,r)}i.fromInt=l,i.fromNumber=u,i.fromBits=c;var d=Math.pow;function h(e,t,r){if(0===e.length)throw Error("empty string");if("number"==typeof t?(r=t,t=!1):t=!!t,"NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t?b:g;if((r=r||10)<2||36<r)throw RangeError("radix");if((i=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===i)return h(e.substring(1),t,r).neg();for(var i,n=u(d(r,8)),o=g,s=0;s<e.length;s+=8){var a=Math.min(8,e.length-s),l=parseInt(e.substring(s,s+a),r);if(a<8){var c=u(d(r,a));o=o.mul(c).add(u(l))}else o=(o=o.mul(n)).add(u(l))}return o.unsigned=t,o}function f(e,t){return"number"==typeof e?u(e,t):"string"==typeof e?h(e,t):c(e.low,e.high,"boolean"==typeof t?t:e.unsigned)}i.fromString=h,i.fromValue=f;var p=4294967296,y=18446744073709552e3,m=18446744073709552e3/2,v=l(16777216),g=l(0);i.ZERO=g;var b=l(0,!0);i.UZERO=b;var w=l(1);i.ONE=w;var _=l(1,!0);i.UONE=_;var S=l(-1);i.NEG_ONE=S;var E=c(-1,2147483647,!1);i.MAX_VALUE=E;var k=c(-1,-1,!0);i.MAX_UNSIGNED_VALUE=k;var N=c(0,-2147483648,!1);i.MIN_VALUE=N;var A=i.prototype;A.toInt=function(){return this.unsigned?this.low>>>0:this.low},A.toNumber=function(){return this.unsigned?(this.high>>>0)*p+(this.low>>>0):this.high*p+(this.low>>>0)},A.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(N)){var t=u(e),r=this.div(t),i=r.mul(t).sub(this);return r.toString(e)+i.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var n=u(d(e,6),this.unsigned),o=this,s="";;){var a=o.div(n),l=(o.sub(a.mul(n)).toInt()>>>0).toString(e);if((o=a).isZero())return l+s;for(;l.length<6;)l="0"+l;s=""+l+s}},A.getHighBits=function(){return this.high},A.getHighBitsUnsigned=function(){return this.high>>>0},A.getLowBits=function(){return this.low},A.getLowBitsUnsigned=function(){return this.low>>>0},A.getNumBitsAbs=function(){if(this.isNegative())return this.eq(N)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},A.isZero=function(){return 0===this.high&&0===this.low},A.eqz=A.isZero,A.isNegative=function(){return!this.unsigned&&this.high<0},A.isPositive=function(){return this.unsigned||this.high>=0},A.isOdd=function(){return 1==(1&this.low)},A.isEven=function(){return 0==(1&this.low)},A.equals=function(e){return n(e)||(e=f(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},A.eq=A.equals,A.notEquals=function(e){return!this.eq(e)},A.neq=A.notEquals,A.ne=A.notEquals,A.lessThan=function(e){return 0>this.comp(e)},A.lt=A.lessThan,A.lessThanOrEqual=function(e){return 0>=this.comp(e)},A.lte=A.lessThanOrEqual,A.le=A.lessThanOrEqual,A.greaterThan=function(e){return this.comp(e)>0},A.gt=A.greaterThan,A.greaterThanOrEqual=function(e){return this.comp(e)>=0},A.gte=A.greaterThanOrEqual,A.ge=A.greaterThanOrEqual,A.compare=function(e){if(n(e)||(e=f(e)),this.eq(e))return 0;var t=this.isNegative(),r=e.isNegative();return t&&!r?-1:!t&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},A.comp=A.compare,A.negate=function(){return!this.unsigned&&this.eq(N)?N:this.not().add(w)},A.neg=A.negate,A.add=function(e){n(e)||(e=f(e));var t,r,i,o,s=this.high>>>16,a=65535&this.high,l=this.low>>>16,u=65535&this.low,d=e.high>>>16,h=65535&e.high,p=e.low>>>16;return o=0+(((i=0+((t=0+((r=0+(u+(65535&e.low)))>>>16)+(l+p))>>>16)+(a+h))>>>16)+(s+d)),c((t&=65535)<<16|(r&=65535),(o&=65535)<<16|(i&=65535),this.unsigned)},A.subtract=function(e){return n(e)||(e=f(e)),this.add(e.neg())},A.sub=A.subtract,A.multiply=function(e){if(this.isZero())return this;if(n(e)||(e=f(e)),t)return c(t.mul(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned);if(e.isZero())return this.unsigned?b:g;if(this.eq(N))return e.isOdd()?N:g;if(e.eq(N))return this.isOdd()?N:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(v)&&e.lt(v))return u(this.toNumber()*e.toNumber(),this.unsigned);var r,i,o,s=this.high>>>16,a=65535&this.high,l=this.low>>>16,d=65535&this.low,h=e.high>>>16,p=65535&e.high,y=e.low>>>16,m=65535&e.low,w=0;return o=0+((r=0+((i=0+d*m)>>>16)+l*m)>>>16),r&=65535,o+=(r+=d*y)>>>16,w+=(o+=a*m)>>>16,o&=65535,w+=(o+=l*y)>>>16,o&=65535,w+=((o+=d*p)>>>16)+(s*m+a*y+l*p+d*h),c((r&=65535)<<16|(i&=65535),(w&=65535)<<16|(o&=65535),this.unsigned)},A.mul=A.multiply,A.divide=function(e){if(n(e)||(e=f(e)),e.isZero())throw Error("division by zero");if(t)return this.unsigned||-2147483648!==this.high||-1!==e.low||-1!==e.high?c((this.unsigned?t.div_u:t.div_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this;if(this.isZero())return this.unsigned?b:g;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return b;if(e.gt(this.shru(1)))return _;o=b}else{if(this.eq(N))return e.eq(w)||e.eq(S)?N:e.eq(N)?w:(r=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?w:S:(i=this.sub(e.mul(r)),o=r.add(i.div(e)));if(e.eq(N))return this.unsigned?b:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=g}for(i=this;i.gte(e);){r=Math.max(1,Math.floor(i.toNumber()/e.toNumber()));for(var r,i,o,s=Math.ceil(Math.log(r)/Math.LN2),a=s<=48?1:d(2,s-48),l=u(r),h=l.mul(e);h.isNegative()||h.gt(i);)h=(l=u(r-=a,this.unsigned)).mul(e);l.isZero()&&(l=w),o=o.add(l),i=i.sub(h)}return o},A.div=A.divide,A.modulo=function(e){return n(e)||(e=f(e)),t?c((this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,e.low,e.high),t.get_high(),this.unsigned):this.sub(this.div(e).mul(e))},A.mod=A.modulo,A.rem=A.modulo,A.not=function(){return c(~this.low,~this.high,this.unsigned)},A.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},A.clz=A.countLeadingZeros,A.countTrailingZeros=function(){return this.low?o(this.low):o(this.high)+32},A.ctz=A.countTrailingZeros,A.and=function(e){return n(e)||(e=f(e)),c(this.low&e.low,this.high&e.high,this.unsigned)},A.or=function(e){return n(e)||(e=f(e)),c(this.low|e.low,this.high|e.high,this.unsigned)},A.xor=function(e){return n(e)||(e=f(e)),c(this.low^e.low,this.high^e.high,this.unsigned)},A.shiftLeft=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):c(0,this.low<<e-32,this.unsigned)},A.shl=A.shiftLeft,A.shiftRight=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):c(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},A.shr=A.shiftRight,A.shiftRightUnsigned=function(e){return n(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?c(this.low>>>e|this.high<<32-e,this.high>>>e,this.unsigned):c(32===e?this.high:this.high>>>e-32,0,this.unsigned)},A.shru=A.shiftRightUnsigned,A.shr_u=A.shiftRightUnsigned,A.rotateLeft=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?c(this.high,this.low,this.unsigned):e<32?(t=32-e,c(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned)):(t=32-(e-=32),c(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned))},A.rotl=A.rotateLeft,A.rotateRight=function(e){var t;return n(e)&&(e=e.toInt()),0==(e&=63)?this:32===e?c(this.high,this.low,this.unsigned):e<32?(t=32-e,c(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned)):(t=32-(e-=32),c(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned))},A.rotr=A.rotateRight,A.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},A.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},A.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},A.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24,255&e,e>>>8&255,e>>>16&255,e>>>24]},A.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24,e>>>16&255,e>>>8&255,255&e,t>>>24,t>>>16&255,t>>>8&255,255&t]},i.fromBytes=function(e,t,r){return r?i.fromBytesLE(e,t):i.fromBytesBE(e,t)},i.fromBytesLE=function(e,t){return new i(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,t)},i.fromBytesBE=function(e,t){return new i(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],t)};var P=i;return e.default=P,"default"in e?e.default:e}({});void 0===(r=(function(){return i}).apply(t,[]))||(e.exports=r)},4147:e=>{"use strict";e.exports=JSON.parse('{"name":"@xmtp/xmtp-js","version":"7.12.0","description":"XMTP client SDK for interacting with XMTP networks.","main":"dist/cjs/src/index.js","module":"dist/esm/src/index.js","umd:main":"dist/umd/index.js","browser":"dist/umd/index.js","types":"dist/types/src/index.d.ts","scripts":{"prebench":"npm run build:cjs","bench":"node dist/cjs/bench/index.js","build":"npm run build:cjs && npm run build:esm && npm run build:umd && npm run build:types","build:cjs":"node tools/cleanup cjs && tsc -p config/tsconfig.cjs.json","build:esm":"node tools/cleanup esm && tsc -p config/tsconfig.esm.json","build:umd":"node tools/cleanup umd && webpack --config config/webpack.config.js","build:types":"node tools/cleanup types && tsc -p config/tsconfig.types.json","build:docs":"rm -rf docs && mkdir -p tmp && cp README.md tmp/ && sed -i.bak \'/badge.svg/d\' tmp/README.md && typedoc --excludePrivate --readme tmp/README.md src/index.ts","clean":"node tools/cleanup && npm run clean:proto","clean:proto":"rm -rf src/proto/*.ts","package":"npm pack","prepublishOnly":"npm run build","test:setup":"./dev/up","test:teardown":"./dev/down","test":"npm run test:node","test:node":"jest --no-cache --env=\'node\' --testTimeout=30000","test:jsdom":"jest --no-cache --env=\'./jest.jsdom.env.js\' --testTimeout=30000","test:cov":"jest --coverage --no-cache --runInBand","lint":"prettier --check . && eslint .","autolint":"prettier --write . && eslint --fix .","semantic-release":"semantic-release"},"publishConfig":{"access":"public"},"files":["dist"],"keywords":["xmtp","messaging","web3","sdk","js","javascript","node","nodejs"],"author":"XMTP Labs <eng@xmtp.com>","license":"MIT","homepage":"https://github.com/xmtp/xmtp-js","repository":{"type":"git","url":"https:git@github.com:xmtp/xmtp-js.git"},"bugs":{"url":"https://github.com/xmtp/xmtp-js/issues"},"release":{"branches":["main",{"name":"beta","prerelease":true}]},"dependencies":{"@noble/secp256k1":"^1.5.2","@stardazed/streams-polyfill":"^2.4.0","@xmtp/proto":"^3.13.0","async-mutex":"^0.4.0","ethers":"^5.5.3","long":"^5.2.0"},"devDependencies":{"@commitlint/cli":"^16.1.0","@commitlint/config-conventional":"^16.0.0","@types/benchmark":"^2.1.2","@types/bl":"^5.0.2","@types/callback-to-async-iterator":"^1.1.4","@types/jest":"^27.0.1","@typescript-eslint/eslint-plugin":"^5.38.0","@typescript-eslint/parser":"^5.38.0","benny":"^3.7.1","dd-trace":"^2.12.2","eslint":"^8.0.1","eslint-config-prettier":"^8.3.0","eslint-config-standard":"^17.0.0","eslint-plugin-import":"^2.26.0","eslint-plugin-jsdoc":"^37.9.1","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^4.0.0","eslint-plugin-promise":"^6.0.1","husky":"^7.0.4","jest":"^27.2.0","prettier":"^2.4.0","semantic-release":"^19.0.2","ts-jest":"^27.0.5","ts-loader":"^9.2.5","typedoc":"^0.22.11","typescript":"^4.4.3","webpack":"^5.52.1","webpack-cli":"^4.8.0"}}')}},__webpack_module_cache__={};function __nested_webpack_require_753154__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__nested_webpack_require_753154__),r.loaded=!0,r.exports}__nested_webpack_require_753154__.amdO={},__nested_webpack_require_753154__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __nested_webpack_require_753154__.d(t,{a:t}),t},__nested_webpack_require_753154__.d=(e,t)=>{for(var r in t)__nested_webpack_require_753154__.o(t,r)&&!__nested_webpack_require_753154__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__nested_webpack_require_753154__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__nested_webpack_require_753154__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__nested_webpack_require_753154__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__nested_webpack_require_753154__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var __webpack_exports__=__nested_webpack_require_753154__(4432);return __webpack_exports__})()},module.exports=t()},100:(e,t,r)=>{"use strict";e.exports=r(482)},482:(e,t,r)=>{"use strict";var i=t;function n(){i.util._configure(),i.Writer._configure(i.BufferWriter),i.Reader._configure(i.BufferReader)}i.build="minimal",i.Writer=r(173),i.BufferWriter=r(155),i.Reader=r(408),i.BufferReader=r(593),i.util=r(693),i.rpc=r(994),i.roots=r(54),i.configure=n,n()},408:(e,t,r)=>{"use strict";e.exports=l;var i,n=r(693),o=n.LongBits,s=n.utf8;function a(e,t){return RangeError("index out of range: "+e.pos+" + "+(t||1)+" > "+e.len)}function l(e){this.buf=e,this.pos=0,this.len=e.length}var u,c="undefined"!=typeof Uint8Array?function(e){if(e instanceof Uint8Array||Array.isArray(e))return new l(e);throw Error("illegal buffer")}:function(e){if(Array.isArray(e))return new l(e);throw Error("illegal buffer")},d=function(){return n.Buffer?function(e){return(l.create=function(e){return n.Buffer.isBuffer(e)?new i(e):c(e)})(e)}:c};function h(){var e=new o(0,0),t=0;if(!(this.len-this.pos>4)){for(;t<3;++t){if(this.pos>=this.len)throw a(this);if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e}return e.lo=(e.lo|(127&this.buf[this.pos++])<<7*t)>>>0,e}for(;t<4;++t)if(e.lo=(e.lo|(127&this.buf[this.pos])<<7*t)>>>0,this.buf[this.pos++]<128)return e;if(e.lo=(e.lo|(127&this.buf[this.pos])<<28)>>>0,e.hi=(e.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return e;if(t=0,this.len-this.pos>4){for(;t<5;++t)if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}else for(;t<5;++t){if(this.pos>=this.len)throw a(this);if(e.hi=(e.hi|(127&this.buf[this.pos])<<7*t+3)>>>0,this.buf[this.pos++]<128)return e}throw Error("invalid varint encoding")}function f(e,t){return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new o(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}l.create=d(),l.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,l.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128||(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)||(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)||(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)||(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128))return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),l.prototype.int32=function(){return 0|this.uint32()},l.prototype.sint32=function(){var e=this.uint32();return e>>>1^-(1&e)|0},l.prototype.bool=function(){return 0!==this.uint32()},l.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)},l.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|f(this.buf,this.pos+=4)},l.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var e=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,e},l.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var e=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,e},l.prototype.bytes=function(){var e=this.uint32(),t=this.pos,r=this.pos+e;if(r>this.len)throw a(this,e);return this.pos+=e,Array.isArray(this.buf)?this.buf.slice(t,r):t===r?new this.buf.constructor(0):this._slice.call(this.buf,t,r)},l.prototype.string=function(){var e=this.bytes();return s.read(e,0,e.length)},l.prototype.skip=function(e){if("number"==typeof e){if(this.pos+e>this.len)throw a(this,e);this.pos+=e}else do if(this.pos>=this.len)throw a(this);while(128&this.buf[this.pos++]);return this},l.prototype.skipType=function(e){switch(e){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(e=7&this.uint32());)this.skipType(e);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+e+" at offset "+this.pos)}return this},l._configure=function(e){i=e,l.create=d(),i._configure();var t=n.Long?"toLong":"toNumber";n.merge(l.prototype,{int64:function(){return h.call(this)[t](!1)},uint64:function(){return h.call(this)[t](!0)},sint64:function(){return h.call(this).zzDecode()[t](!1)},fixed64:function(){return p.call(this)[t](!0)},sfixed64:function(){return p.call(this)[t](!1)}})}},593:(e,t,r)=>{"use strict";e.exports=o;var i=r(408);(o.prototype=Object.create(i.prototype)).constructor=o;var n=r(693);function o(e){i.call(this,e)}o._configure=function(){n.Buffer&&(o.prototype._slice=n.Buffer.prototype.slice)},o.prototype.string=function(){var e=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+e,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+e,this.len))},o._configure()},54:e=>{"use strict";e.exports={}},994:(e,t,r)=>{"use strict";t.Service=r(948)},948:(e,t,r)=>{"use strict";e.exports=n;var i=r(693);function n(e,t,r){if("function"!=typeof e)throw TypeError("rpcImpl must be a function");i.EventEmitter.call(this),this.rpcImpl=e,this.requestDelimited=Boolean(t),this.responseDelimited=Boolean(r)}(n.prototype=Object.create(i.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function e(t,r,n,o,s){if(!o)throw TypeError("request must be specified");var a=this;if(!s)return i.asPromise(e,a,t,r,n,o);if(a.rpcImpl)try{return a.rpcImpl(t,r[a.requestDelimited?"encodeDelimited":"encode"](o).finish(),function(e,r){if(e)return a.emit("error",e,t),s(e);if(null!==r){if(!(r instanceof n))try{r=n[a.responseDelimited?"decodeDelimited":"decode"](r)}catch(i){return a.emit("error",i,t),s(i)}return a.emit("data",r,t),s(null,r)}a.end(!0)})}catch(l){return a.emit("error",l,t),void setTimeout(function(){s(l)},0)}else setTimeout(function(){s(Error("already ended"))},0)},n.prototype.end=function(e){return this.rpcImpl&&(e||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},630:(e,t,r)=>{"use strict";e.exports=n;var i=r(693);function n(e,t){this.lo=e>>>0,this.hi=t>>>0}var o=n.zero=new n(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var s=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var r=e>>>0,i=(e-r)/4294967296>>>0;return t&&(i=~i>>>0,r=~r>>>0,++r>4294967295&&(r=0,++i>4294967295&&(i=0))),new n(r,i)},n.from=function(e){if("number"==typeof e)return n.fromNumber(e);if(i.isString(e)){if(!i.Long)return n.fromNumber(parseInt(e,10));e=i.Long.fromString(e)}return e.low||e.high?new n(e.low>>>0,e.high>>>0):o},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,r=~this.hi>>>0;return t||(r=r+1>>>0),-(t+4294967296*r)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return i.Long?new i.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}};var a=String.prototype.charCodeAt;n.fromHash=function(e){return e===s?o:new n((a.call(e,0)|a.call(e,1)<<8|a.call(e,2)<<16|a.call(e,3)<<24)>>>0,(a.call(e,4)|a.call(e,5)<<8|a.call(e,6)<<16|a.call(e,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var e=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^e)>>>0,this.lo=(this.lo<<1^e)>>>0,this},n.prototype.zzDecode=function(){var e=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^e)>>>0,this.hi=(this.hi>>>1^e)>>>0,this},n.prototype.length=function(){var e=this.lo,t=(this.lo>>>28|this.hi<<4)>>>0,r=this.hi>>>24;return 0===r?0===t?e<16384?e<128?1:2:e<2097152?3:4:t<16384?t<128?5:6:t<2097152?7:8:r<128?9:10}},693:function(e,t,r){"use strict";var i=t;function n(e,t,r){for(var i=Object.keys(t),n=0;n<i.length;++n)void 0!==e[i[n]]&&r||(e[i[n]]=t[i[n]]);return e}function o(e){function t(e,r){if(!(this instanceof t))return new t(e,r);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:Error().stack||""}),r&&n(this,r)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return e},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}i.asPromise=r(537),i.base64=r(419),i.EventEmitter=r(211),i.float=r(945),i.inquire=r(199),i.utf8=r(997),i.pool=r(662),i.LongBits=r(630),i.isNode=Boolean(void 0!==r.g&&r.g&&r.g.process&&r.g.process.versions&&r.g.process.versions.node),i.global=i.isNode&&r.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,i.emptyArray=Object.freeze?Object.freeze([]):[],i.emptyObject=Object.freeze?Object.freeze({}):{},i.isInteger=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e},i.isString=function(e){return"string"==typeof e||e instanceof String},i.isObject=function(e){return e&&"object"==typeof e},i.isset=i.isSet=function(e,t){var r=e[t];return!(null==r||!e.hasOwnProperty(t))&&("object"!=typeof r||(Array.isArray(r)?r.length:Object.keys(r).length)>0)},i.Buffer=function(){try{var e=i.inquire("buffer").Buffer;return e.prototype.utf8Write?e:null}catch(t){return null}}(),i._Buffer_from=null,i._Buffer_allocUnsafe=null,i.newBuffer=function(e){return"number"==typeof e?i.Buffer?i._Buffer_allocUnsafe(e):new i.Array(e):i.Buffer?i._Buffer_from(e):"undefined"==typeof Uint8Array?e:new Uint8Array(e)},i.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,i.Long=i.global.dcodeIO&&i.global.dcodeIO.Long||i.global.Long||i.inquire("long"),i.key2Re=/^true|false|0|1$/,i.key32Re=/^-?(?:0|[1-9][0-9]*)$/,i.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,i.longToHash=function(e){return e?i.LongBits.from(e).toHash():i.LongBits.zeroHash},i.longFromHash=function(e,t){var r=i.LongBits.fromHash(e);return i.Long?i.Long.fromBits(r.lo,r.hi,t):r.toNumber(Boolean(t))},i.merge=n,i.lcFirst=function(e){return e.charAt(0).toLowerCase()+e.substring(1)},i.newError=o,i.ProtocolError=o("ProtocolError"),i.oneOfGetter=function(e){for(var t={},r=0;r<e.length;++r)t[e[r]]=1;return function(){for(var e=Object.keys(this),r=e.length-1;r>-1;--r)if(1===t[e[r]]&&void 0!==this[e[r]]&&null!==this[e[r]])return e[r]}},i.oneOfSetter=function(e){return function(t){for(var r=0;r<e.length;++r)e[r]!==t&&delete this[e[r]]}},i.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},i._configure=function(){var e=i.Buffer;e?(i._Buffer_from=e.from!==Uint8Array.from&&e.from||function(t,r){return new e(t,r)},i._Buffer_allocUnsafe=e.allocUnsafe||function(t){return new e(t)}):i._Buffer_from=i._Buffer_allocUnsafe=null}},173:(e,t,r)=>{"use strict";e.exports=d;var i,n=r(693),o=n.LongBits,s=n.base64,a=n.utf8;function l(e,t,r){this.fn=e,this.len=t,this.next=void 0,this.val=r}function u(){}function c(e){this.head=e.head,this.tail=e.tail,this.len=e.len,this.next=e.states}function d(){this.len=0,this.head=new l(u,0,0),this.tail=this.head,this.states=null}var h=function(){return n.Buffer?function(){return(d.create=function(){return new i})()}:function(){return new d}};function f(e,t,r){t[r]=255&e}function p(e,t){this.len=e,this.next=void 0,this.val=t}function y(e,t,r){for(;e.hi;)t[r++]=127&e.lo|128,e.lo=(e.lo>>>7|e.hi<<25)>>>0,e.hi>>>=7;for(;e.lo>127;)t[r++]=127&e.lo|128,e.lo=e.lo>>>7;t[r++]=e.lo}function m(e,t,r){t[r]=255&e,t[r+1]=e>>>8&255,t[r+2]=e>>>16&255,t[r+3]=e>>>24}d.create=h(),d.alloc=function(e){return new n.Array(e)},n.Array!==Array&&(d.alloc=n.pool(d.alloc,n.Array.prototype.subarray)),d.prototype._push=function(e,t,r){return this.tail=this.tail.next=new l(e,t,r),this.len+=t,this},p.prototype=Object.create(l.prototype),p.prototype.fn=function(e,t,r){for(;e>127;)t[r++]=127&e|128,e>>>=7;t[r]=e},d.prototype.uint32=function(e){return this.len+=(this.tail=this.tail.next=new p((e>>>=0)<128?1:e<16384?2:e<2097152?3:e<268435456?4:5,e)).len,this},d.prototype.int32=function(e){return e<0?this._push(y,10,o.fromNumber(e)):this.uint32(e)},d.prototype.sint32=function(e){return this.uint32((e<<1^e>>31)>>>0)},d.prototype.uint64=function(e){var t=o.from(e);return this._push(y,t.length(),t)},d.prototype.int64=d.prototype.uint64,d.prototype.sint64=function(e){var t=o.from(e).zzEncode();return this._push(y,t.length(),t)},d.prototype.bool=function(e){return this._push(f,1,e?1:0)},d.prototype.fixed32=function(e){return this._push(m,4,e>>>0)},d.prototype.sfixed32=d.prototype.fixed32,d.prototype.fixed64=function(e){var t=o.from(e);return this._push(m,4,t.lo)._push(m,4,t.hi)},d.prototype.sfixed64=d.prototype.fixed64,d.prototype.float=function(e){return this._push(n.float.writeFloatLE,4,e)},d.prototype.double=function(e){return this._push(n.float.writeDoubleLE,8,e)};var v=n.Array.prototype.set?function(e,t,r){t.set(e,r)}:function(e,t,r){for(var i=0;i<e.length;++i)t[r+i]=e[i]};d.prototype.bytes=function(e){var t=e.length>>>0;if(!t)return this._push(f,1,0);if(n.isString(e)){var r=d.alloc(t=s.length(e));s.decode(e,r,0),e=r}return this.uint32(t)._push(v,t,e)},d.prototype.string=function(e){var t=a.length(e);return t?this.uint32(t)._push(a.write,t,e):this._push(f,1,0)},d.prototype.fork=function(){return this.states=new c(this),this.head=this.tail=new l(u,0,0),this.len=0,this},d.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new l(u,0,0),this.len=0),this},d.prototype.ldelim=function(){var e=this.head,t=this.tail,r=this.len;return this.reset().uint32(r),r&&(this.tail.next=e.next,this.tail=t,this.len+=r),this},d.prototype.finish=function(){for(var e=this.head.next,t=this.constructor.alloc(this.len),r=0;e;)e.fn(e.val,t,r),r+=e.len,e=e.next;return t},d._configure=function(e){i=e,d.create=h(),i._configure()}},155:(e,t,r)=>{"use strict";e.exports=o;var i=r(173);(o.prototype=Object.create(i.prototype)).constructor=o;var n=r(693);function o(){i.call(this)}function s(e,t,r){e.length<40?n.utf8.write(e,t,r):t.utf8Write?t.utf8Write(e,r):t.write(e,r)}o._configure=function(){o.alloc=n._Buffer_allocUnsafe,o.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(e,t,r){t.set(e,r)}:function(e,t,r){if(e.copy)e.copy(t,r,0,e.length);else for(var i=0;i<e.length;)t[r++]=e[i++]}},o.prototype.bytes=function(e){n.isString(e)&&(e=n._Buffer_from(e,"base64"));var t=e.length>>>0;return this.uint32(t),t&&this._push(o.writeBytesBuffer,t,e),this},o.prototype.string=function(e){var t=n.Buffer.byteLength(e);return this.uint32(t),t&&this._push(s,t,e),this},o._configure()},882:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttachmentCodec=t.ContentTypeAttachment=void 0;let i=r(346);t.ContentTypeAttachment=new i.ContentTypeId({authorityId:"xmtp.org",typeId:"attachment",versionMajor:1,versionMinor:0}),t.AttachmentCodec=class{get contentType(){return t.ContentTypeAttachment}encode(e,r){return{type:t.ContentTypeAttachment,parameters:{filename:e.filename,mimeType:e.mimeType},content:e.data}}decode(e,t){return{filename:e.parameters.filename,mimeType:e.parameters.mimeType,data:e.content}}}},908:function(e,t,r){"use strict";var i=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);n&&!("get"in n?!t.__esModule:n.writable||n.configurable)||(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&i(t,e,r);return n(t,e),t},s=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=Promise))(function(n,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteAttachmentCodec=t.ContentTypeRemoteAttachment=void 0;let a=r(346),l=o(r(656)),u=r(775),c=r(796);t.ContentTypeRemoteAttachment=new a.ContentTypeId({authorityId:"xmtp.org",typeId:"remoteStaticAttachment",versionMajor:1,versionMinor:0}),t.RemoteAttachmentCodec=class{static load(e,t){var r;return s(this,void 0,void 0,function*(){let i=yield fetch(e.url),n=new Uint8Array((yield i.arrayBuffer()));if(!n)throw"no payload for remote attachment at "+e.url;let o=new Uint8Array((yield u.crypto.subtle.digest("SHA-256",n)));if(l.utils.bytesToHex(o)!==e.contentDigest)throw Error("content digest does not match");let s=new a.Ciphertext({aes256GcmHkdfSha256:{hkdfSalt:e.salt,gcmNonce:e.nonce,payload:n}}),d=yield(0,a.decrypt)(s,e.secret),h=c.content.EncodedContent.decode(d);if(!h||!h.type)throw"no encoded content";let f=h.type;if(!f)throw"no content type";let p=t.codecFor(new a.ContentTypeId(f));if(!p)throw"no codec found for "+(null===(r=h.type)||void 0===r?void 0:r.typeId);return p.decode(h,t)})}static encodeEncrypted(e,t){var r,i,n;return s(this,void 0,void 0,function*(){let o=u.crypto.getRandomValues(new Uint8Array(32)),s=c.content.EncodedContent.encode(t.encode(e,{codecFor(e){}})).finish(),d=yield(0,a.encrypt)(s,o),h=null===(r=d.aes256GcmHkdfSha256)||void 0===r?void 0:r.hkdfSalt,f=null===(i=d.aes256GcmHkdfSha256)||void 0===i?void 0:i.gcmNonce,p=null===(n=d.aes256GcmHkdfSha256)||void 0===n?void 0:n.payload;if(!h||!f||!p)throw"missing encryption key";console.log("encode payload",p);let y=new Uint8Array((yield u.crypto.subtle.digest("SHA-256",p)));return{digest:l.utils.bytesToHex(y),secret:o,salt:h,nonce:f,payload:p}})}get contentType(){return t.ContentTypeRemoteAttachment}encode(e,r){if(!e.url.startsWith("https"))throw Error("scheme must be https");return{type:t.ContentTypeRemoteAttachment,parameters:{contentDigest:e.contentDigest,salt:l.utils.bytesToHex(e.salt),nonce:l.utils.bytesToHex(e.nonce),secret:l.utils.bytesToHex(e.secret),scheme:e.scheme,contentLength:String(e.contentLength),filename:e.filename},content:(new TextEncoder).encode(e.url)}}decode(e,t){return{url:(new TextDecoder).decode(e.content),contentDigest:e.parameters.contentDigest,salt:l.utils.hexToBytes(e.parameters.salt),nonce:l.utils.hexToBytes(e.parameters.nonce),secret:l.utils.hexToBytes(e.parameters.secret),scheme:e.parameters.scheme,contentLength:parseInt(e.parameters.contentLength),filename:e.parameters.filename}}}},775:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="undefined"!=typeof window?window.crypto:r(85).webcrypto},159:()=>{},85:()=>{}},__webpack_module_cache__={};function __nested_webpack_require_895016__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(r.exports,r,r.exports,__nested_webpack_require_895016__),r.exports}__nested_webpack_require_895016__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __nested_webpack_require_895016__.d(t,{a:t}),t},__nested_webpack_require_895016__.d=(e,t)=>{for(var r in t)__nested_webpack_require_895016__.o(t,r)&&!__nested_webpack_require_895016__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__nested_webpack_require_895016__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__nested_webpack_require_895016__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__nested_webpack_require_895016__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};return(()=>{"use strict";var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),e.ContentTypeRemoteAttachment=e.RemoteAttachmentCodec=e.ContentTypeAttachment=e.AttachmentCodec=void 0;var t=__nested_webpack_require_895016__(882);Object.defineProperty(e,"AttachmentCodec",{enumerable:!0,get:function(){return t.AttachmentCodec}}),Object.defineProperty(e,"ContentTypeAttachment",{enumerable:!0,get:function(){return t.ContentTypeAttachment}});var r=__nested_webpack_require_895016__(908);Object.defineProperty(e,"RemoteAttachmentCodec",{enumerable:!0,get:function(){return r.RemoteAttachmentCodec}}),Object.defineProperty(e,"ContentTypeRemoteAttachment",{enumerable:!0,get:function(){return r.ContentTypeRemoteAttachment}})})(),__webpack_exports__})())}}]);