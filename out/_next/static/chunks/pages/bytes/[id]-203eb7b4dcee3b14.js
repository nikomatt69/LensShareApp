(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6015,5331],{4896:function(e,t,r){"use strict";function n(e){return e}function i(e){let t={subscribe(t){let r=null,n=!1,i=!1,s=!1;function a(){if(null===r){s=!0;return}!i&&(i=!0,"function"==typeof r?r():r&&r.unsubscribe())}return r=e({next(e){n||t.next?.(e)},error(e){n||(n=!0,t.error?.(e),a())},complete(){n||(n=!0,t.complete?.(),a())}}),s&&a(),{unsubscribe:a}},pipe:(...e)=>(0===e.length?n:1===e.length?e[0]:function(t){return e.reduce((e,t)=>t(e),t)})(t)};return t}r.d(t,{Y_:function(){return eZ},XY:function(){return eW}});class s extends Error{constructor(e){super(e),this.name="ObservableAbortError",Object.setPrototypeOf(this,s.prototype)}}class a extends Error{static from(e,t={}){return e instanceof Error?e instanceof a||"TRPCClientError"===e.name?(t.meta&&(e.meta={...e.meta,...t.meta}),e):new a(e.message,{...t,cause:e,result:null}):new a(e.error.message??"",{...t,cause:void 0,result:e})}constructor(e,t){let r=t?.cause;super(e,{cause:r}),this.meta=t?.meta,this.cause=r,this.shape=t?.result?.error,this.data=t?.result?.error.data,this.name="TRPCClientError",Object.setPrototypeOf(this,a.prototype)}}function o(e){let t=Object.create(null);for(let r in e){let n=e[r];t[n]=r}return t}let l={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099};o(l),o(l);let c=()=>{},u=e=>(function e(t,r){let n=new Proxy(c,{get(n,i){if("string"==typeof i&&"then"!==i)return e(t,[...r,i])},apply(e,n,i){let s="apply"===r[r.length-1];return t({args:s?i.length>=2?i[1]:[]:i,path:s?r.slice(0,-1):r})}});return n})(e,[]),d=e=>new Proxy(c,{get(t,r){if("string"==typeof r&&"then"!==r)return e(r)}}),p=e=>"function"==typeof e;function h(e){var t;return{url:e.url,fetch:e.fetch,AbortController:(t=e.AbortController)?t:"undefined"!=typeof window&&window.AbortController?window.AbortController:"undefined"!=typeof globalThis&&globalThis.AbortController?globalThis.AbortController:null}}let f={query:"GET",mutation:"POST"};function m(e){return"input"in e?e.runtime.transformer.serialize(e.input):function(e){let t={};for(let r=0;r<e.length;r++){let n=e[r];t[r]=n}return t}(e.inputs.map(t=>e.runtime.transformer.serialize(t)))}let g=e=>{let t=e.url+"/"+e.path,r=[];if("inputs"in e&&r.push("batch=1"),"query"===e.type){let n=m(e);void 0!==n&&r.push(`input=${encodeURIComponent(JSON.stringify(n))}`)}return r.length&&(t+="?"+r.join("&")),t},y=e=>{if("query"===e.type)return;let t=m(e);return void 0!==t?JSON.stringify(t):void 0},v=e=>w({...e,contentTypeHeader:"application/json",getUrl:g,getBody:y});async function b(e,t){let r=e.getUrl(e),n=e.getBody(e),{type:i}=e,s=await e.headers();if("subscription"===i)throw Error("Subscriptions should use wsLink");let a={...e.contentTypeHeader?{"content-type":e.contentTypeHeader}:{},...e.batchModeHeader?{"trpc-batch-mode":e.batchModeHeader}:{},...s};return(function(e){if(e)return e;if("undefined"!=typeof window&&p(window.fetch))return window.fetch;if("undefined"!=typeof globalThis&&p(globalThis.fetch))return globalThis.fetch;throw Error("No fetch implementation found")})(e.fetch)(r,{method:f[i],signal:t?.signal,body:n,headers:a})}function w(e){let t=e.AbortController?new e.AbortController:null,r={},n=new Promise((n,i)=>{b(e,t).then(e=>(r.response=e,e.json())).then(e=>{r.responseJSON=e,n({json:e,meta:r})}).catch(e=>{i(a.from(e,{meta:r}))})}),i=()=>{t?.abort()};return{promise:n,cancel:i}}function _(e){return!!e&&!Array.isArray(e)&&"object"==typeof e}class x extends Error{constructor(){super("Unable to transform response from server")}}function S(e,t){let r;try{r=function(e,t){if("error"in e){let r=t.transformer.deserialize(e.error);return{ok:!1,error:{...e,error:r}}}let n={...e.result,...(!e.result.type||"data"===e.result.type)&&{type:"data",data:t.transformer.deserialize(e.result.data)}};return{ok:!0,result:n}}(e,t)}catch(n){throw new x}if(!r.ok&&(!_(r.error.error)||"number"!=typeof r.error.error.code)||r.ok&&!_(r.result))throw new x;return r}let T=()=>{throw Error("Something went wrong. Please submit an issue at https://github.com/trpc/trpc/issues/new")};function E(e){let t=null,r=null,n=()=>{clearTimeout(r),r=null,t=null};function i(){let r=function(t){let r=[[]],n=0;for(;;){let i=t[n];if(!i)break;let s=r[r.length-1];if(i.aborted){i.reject?.(Error("Aborted")),n++;continue}let a=e.validate(s.concat(i).map(e=>e.key));if(a){s.push(i),n++;continue}if(0===s.length){i.reject?.(Error("Input is too big for a single dispatch")),n++;continue}r.push([])}return r}(t);for(let i of(n(),r)){if(!i.length)continue;let s={items:i,cancel:T};for(let a of i)a.batch=s;let o=(e,t)=>{let r=s.items[e];r.resolve?.(t),r.batch=null,r.reject=null,r.resolve=null},{promise:l,cancel:c}=e.fetch(s.items.map(e=>e.key),o);s.cancel=c,l.then(e=>{for(let t=0;t<e.length;t++){let r=e[t];o(t,r)}for(let n of s.items)n.reject?.(Error("Missing result")),n.batch=null}).catch(e=>{for(let t of s.items)t.reject?.(e),t.batch=null})}}return{load:function(e){let n={aborted:!1,key:e,batch:null,resolve:T,reject:T},s=new Promise((e,r)=>{n.reject=r,n.resolve=e,t||(t=[]),t.push(n)});r||(r=setTimeout(i));let a=()=>{n.aborted=!0,n.batch?.items.every(e=>e.aborted)&&(n.batch.cancel(),n.batch=null)};return{promise:s,cancel:a}}}}function C(e){return function(t){let r=h(t),n=t.maxURLLength??1/0;return s=>{let o=i=>{let a=e=>{if(n===1/0)return!0;let t=e.map(e=>e.path).join(","),a=e.map(e=>e.input),o=g({...r,runtime:s,type:i,path:t,inputs:a});return o.length<=n},o=e({...r,runtime:s,type:i,opts:t});return{validate:a,fetch:o}},l=E(o("query")),c=E(o("mutation")),u=E(o("subscription")),d={query:l,subscription:u,mutation:c};return({op:e})=>i(t=>{let r;let n=d[e.type],{promise:i,cancel:o}=n.load(e);return i.then(e=>{r=e;let n=S(e.json,s);if(!n.ok){t.error(a.from(n.error,{meta:e.meta}));return}t.next({context:e.meta,result:n.result}),t.complete()}).catch(e=>{t.error(a.from(e,{meta:r?.meta}))}),()=>{o()}})}}}let k=e=>t=>{let r=t.map(e=>e.path).join(","),n=t.map(e=>e.input),{promise:i,cancel:s}=v({...e,path:r,inputs:n,headers:()=>e.opts.headers?"function"==typeof e.opts.headers?e.opts.headers({opList:t}):e.opts.headers:{}});return{promise:i.then(e=>{let r=Array.isArray(e.json)?e.json:t.map(()=>e.json),n=r.map(t=>({meta:e.meta,json:t}));return n}),cancel:s}},R=C(k);function P(e){return t=>{let r=h(t);return n=>({op:s})=>i(i=>{let o;let{path:l,input:c,type:u}=s,{promise:d,cancel:p}=e.requester({...r,runtime:n,type:u,path:l,input:c,headers:()=>t.headers?"function"==typeof t.headers?t.headers({op:s}):t.headers:{}});return d.then(e=>{o=e.meta;let t=S(e.json,n);if(!t.ok){i.error(a.from(t.error,{meta:o}));return}i.next({context:e.meta,result:t.result}),i.complete()}).catch(e=>{i.error(a.from(e,{meta:o}))}),()=>{p()}})}}P({requester:v});class D{$request({type:e,input:t,path:r,context:n={}}){var s;let a=(s={links:this.links,op:{id:++this.requestId,type:e,path:r,input:t,context:n}},i(e=>{let t=function e(t=0,r=s.op){let n=s.links[t];if(!n)throw Error("No more links to execute - did you forget to add an ending link?");let i=n({op:r,next(r){let n=e(t+1,r);return n}});return i}();return t.subscribe(e)}));return a.pipe(e=>{let t=0,r=null,n=[];return{subscribe:i=>(t++,n.push(i),r||(r=e.subscribe({next(e){for(let t of n)t.next?.(e)},error(e){for(let t of n)t.error?.(e)},complete(){for(let e of n)e.complete?.()}})),{unsubscribe(){t--,function(){if(0===t&&r){let e=r;r=null,e.unsubscribe()}}();let e=n.findIndex(e=>e===i);e>-1&&n.splice(e,1)}})}})}requestAsPromise(e){let t=this.$request(e),{promise:r,abort:n}=function(e){let t;let r=new Promise((r,n)=>{let i=!1;function a(){i||(i=!0,n(new s("This operation was aborted.")),o.unsubscribe())}let o=e.subscribe({next(e){i=!0,r(e),a()},error(e){i=!0,n(e),a()},complete(){i=!0,a()}});t=a});return{promise:r,abort:t}}(t),i=new Promise((t,i)=>{e.signal?.addEventListener("abort",n),r.then(e=>{t(e.result.data)}).catch(e=>{i(a.from(e))})});return i}query(e,t,r){return this.requestAsPromise({type:"query",path:e,input:t,context:r?.context,signal:r?.signal})}mutation(e,t,r){return this.requestAsPromise({type:"mutation",path:e,input:t,context:r?.context,signal:r?.signal})}subscription(e,t,r){let n=this.$request({type:"subscription",path:e,input:t,context:r?.context});return n.subscribe({next(e){"started"===e.result.type?r.onStarted?.():"stopped"===e.result.type?r.onStopped?.():r.onData?.(e.result.data)},error(e){r.onError?.(e)},complete(){r.onComplete?.()}})}constructor(e){this.requestId=0;let t=(()=>{let t=e.transformer;return t?"input"in t?e.transformer:{input:t,output:t}:{input:{serialize:e=>e,deserialize:e=>e},output:{serialize:e=>e,deserialize:e=>e}}})();this.runtime={transformer:{serialize:e=>t.input.serialize(e),deserialize:e=>t.output.deserialize(e)},combinedTransformer:t},this.links=e.links.map(e=>e(this.runtime))}}let A={query:"query",mutate:"mutation",subscribe:"subscription"},N=e=>A[e];async function L(e){let t=e.parse??JSON.parse,r=r=>{if(e.signal?.aborted||!r||"}"===r)return;let n=r.indexOf(":"),i=r.substring(2,n-1),s=r.substring(n+1);e.onSingle(Number(i),t(s))};await O(e.readableStream,r,e.textDecoder)}async function O(e,t,r){let n="",i=e=>{let i=r.decode(e),s=i.split("\n");if(1===s.length)n+=s[0];else if(s.length>1){t(n+s[0]);for(let a=1;a<s.length-1;a++)t(s[a]);n=s[s.length-1]}};"getReader"in e?await I(e,i):await new Promise(t=>{e.on("data",i),e.on("end",t)}),t(n)}async function I(e,t){let r=e.getReader(),n=await r.read();for(;!n.done;)t(n.value),n=await r.read()}let M=(e,t)=>{let r=e.AbortController?new e.AbortController:null,n=b({...e,contentTypeHeader:"application/json",batchModeHeader:"stream",getUrl:g,getBody:y},r),i=()=>r?.abort(),s=n.then(async n=>{if(!n.body)throw Error("Received response without body");let i={response:n};return L({readableStream:n.body,onSingle:t,parse:e=>({json:JSON.parse(e),meta:i}),signal:r?.signal,textDecoder:e.textDecoder})});return{cancel:i,promise:s}},j=e=>{let t=function(e){if(e)return e;if("undefined"!=typeof window&&window.TextDecoder)return new window.TextDecoder;if("undefined"!=typeof globalThis&&globalThis.TextDecoder)return new globalThis.TextDecoder;throw Error("No TextDecoder implementation found")}(e.opts.textDecoder);return(r,n)=>{let i=r.map(e=>e.path).join(","),s=r.map(e=>e.input),{cancel:a,promise:o}=M({...e,textDecoder:t,path:i,inputs:s,headers:()=>e.opts.headers?"function"==typeof e.opts.headers?e.opts.headers({opList:r}):e.opts.headers:{}},(e,t)=>{n(e,t)});return{promise:o.then(()=>[]),cancel:a}}};C(j);let F=e=>{if("input"in e){if(!(e.input instanceof FormData))throw Error("Input is not FormData");return e.input}},$=e=>{if("mutation"!==e.type)throw Error("We only handle mutations with formdata");return w({...e,getUrl:()=>`${e.url}/${e.path}`,getBody:F})};P({requester:$});var B,U,q,z=r(6154),V=function(){function e(){this.keyToValue=new Map,this.valueToKey=new Map}return e.prototype.set=function(e,t){this.keyToValue.set(e,t),this.valueToKey.set(t,e)},e.prototype.getByKey=function(e){return this.keyToValue.get(e)},e.prototype.getByValue=function(e){return this.valueToKey.get(e)},e.prototype.clear=function(){this.keyToValue.clear(),this.valueToKey.clear()},e}(),H=function(){function e(e){this.generateIdentifier=e,this.kv=new V}return e.prototype.register=function(e,t){this.kv.getByValue(e)||(t||(t=this.generateIdentifier(e)),this.kv.set(t,e))},e.prototype.clear=function(){this.kv.clear()},e.prototype.getIdentifier=function(e){return this.kv.getByValue(e)},e.prototype.getValue=function(e){return this.kv.getByKey(e)},e}(),W=(B=function(e,t){return(B=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}B(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),Z=function(e){function t(){var t=e.call(this,function(e){return e.name})||this;return t.classToAllowedProps=new Map,t}return W(t,e),t.prototype.register=function(t,r){"object"==typeof r?(r.allowProps&&this.classToAllowedProps.set(t,r.allowProps),e.prototype.register.call(this,t,r.identifier)):e.prototype.register.call(this,t,r)},t.prototype.getAllowedProps=function(e){return this.classToAllowedProps.get(e)},t}(H),K=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a};function G(e,t){Object.entries(e).forEach(function(e){var r=K(e,2),n=r[0];return t(r[1],n)})}function Y(e,t){return -1!==e.indexOf(t)}function J(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(t(n))return n}}var Q=function(){function e(){this.transfomers={}}return e.prototype.register=function(e){this.transfomers[e.name]=e},e.prototype.findApplicable=function(e){return function(e,t){var r=function(e){if("values"in Object)return Object.values(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(e[r]);return t}(e);if("find"in r)return r.find(t);for(var n=0;n<r.length;n++){var i=r[n];if(t(i))return i}}(this.transfomers,function(t){return t.isApplicable(e)})},e.prototype.findByName=function(e){return this.transfomers[e]},e}(),X=function(e){return void 0===e},ee=function(e){return"object"==typeof e&&null!==e&&e!==Object.prototype&&(null===Object.getPrototypeOf(e)||Object.getPrototypeOf(e)===Object.prototype)},et=function(e){return ee(e)&&0===Object.keys(e).length},er=function(e){return Array.isArray(e)},en=function(e){return e instanceof Map},ei=function(e){return e instanceof Set},es=function(e){return"Symbol"===Object.prototype.toString.call(e).slice(8,-1)},ea=function(e){return"number"==typeof e&&isNaN(e)},eo=function(e){return"boolean"==typeof e||null===e||X(e)||"number"==typeof e&&!isNaN(e)||"string"==typeof e||es(e)},el=function(e){return e.replace(/\./g,"\\.")},ec=function(e){return e.map(String).map(el).join(".")},eu=function(e){for(var t=[],r="",n=0;n<e.length;n++){var i=e.charAt(n);if("\\"===i&&"."===e.charAt(n+1)){r+=".",n++;continue}if("."===i){t.push(r),r="";continue}r+=i}var s=r;return t.push(s),t},ed=function(){return(ed=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ep=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a},eh=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e};function ef(e,t,r,n){return{isApplicable:e,annotation:t,transform:r,untransform:n}}var em=[ef(X,"undefined",function(){return null},function(){}),ef(function(e){return"bigint"==typeof e},"bigint",function(e){return e.toString()},function(e){return"undefined"!=typeof BigInt?BigInt(e):(console.error("Please add a BigInt polyfill."),e)}),ef(function(e){return e instanceof Date&&!isNaN(e.valueOf())},"Date",function(e){return e.toISOString()},function(e){return new Date(e)}),ef(function(e){return e instanceof Error},"Error",function(e,t){var r={name:e.name,message:e.message};return t.allowedErrorProps.forEach(function(t){r[t]=e[t]}),r},function(e,t){var r=Error(e.message);return r.name=e.name,r.stack=e.stack,t.allowedErrorProps.forEach(function(t){r[t]=e[t]}),r}),ef(function(e){return e instanceof RegExp},"regexp",function(e){return""+e},function(e){return RegExp(e.slice(1,e.lastIndexOf("/")),e.slice(e.lastIndexOf("/")+1))}),ef(ei,"set",function(e){return eh([],ep(e.values()))},function(e){return new Set(e)}),ef(en,"map",function(e){return eh([],ep(e.entries()))},function(e){return new Map(e)}),ef(function(e){var t;return ea(e)||(t=e)===1/0||t===-1/0},"number",function(e){return ea(e)?"NaN":e>0?"Infinity":"-Infinity"},Number),ef(function(e){return 0===e&&1/e==-1/0},"number",function(){return"-0"},Number),ef(function(e){return e instanceof URL},"URL",function(e){return e.toString()},function(e){return new URL(e)})];function eg(e,t,r,n){return{isApplicable:e,annotation:t,transform:r,untransform:n}}var ey=eg(function(e,t){return!!es(e)&&!!t.symbolRegistry.getIdentifier(e)},function(e,t){return["symbol",t.symbolRegistry.getIdentifier(e)]},function(e){return e.description},function(e,t,r){var n=r.symbolRegistry.getValue(t[1]);if(!n)throw Error("Trying to deserialize unknown symbol");return n}),ev=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce(function(e,t){return e[t.name]=t,e},{}),eb=eg(function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},function(e){return["typed-array",e.constructor.name]},function(e){return eh([],ep(e))},function(e,t){var r=ev[t[1]];if(!r)throw Error("Trying to deserialize unknown typed array");return new r(e)});function ew(e,t){return null!=e&&!!e.constructor&&!!t.classRegistry.getIdentifier(e.constructor)}var e_=eg(ew,function(e,t){return["class",t.classRegistry.getIdentifier(e.constructor)]},function(e,t){var r=t.classRegistry.getAllowedProps(e.constructor);if(!r)return ed({},e);var n={};return r.forEach(function(t){n[t]=e[t]}),n},function(e,t,r){var n=r.classRegistry.getValue(t[1]);if(!n)throw Error("Trying to deserialize unknown class - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564");return Object.assign(Object.create(n.prototype),e)}),ex=eg(function(e,t){return!!t.customTransformerRegistry.findApplicable(e)},function(e,t){return["custom",t.customTransformerRegistry.findApplicable(e).name]},function(e,t){return t.customTransformerRegistry.findApplicable(e).serialize(e)},function(e,t,r){var n=r.customTransformerRegistry.findByName(t[1]);if(!n)throw Error("Trying to deserialize unknown custom value");return n.deserialize(e)}),eS=[e_,ey,ex,eb],eT=function(e,t){var r=J(eS,function(r){return r.isApplicable(e,t)});if(r)return{value:r.transform(e,t),type:r.annotation(e,t)};var n=J(em,function(r){return r.isApplicable(e,t)});if(n)return{value:n.transform(e,t),type:n.annotation}},eE={};em.forEach(function(e){eE[e.annotation]=e});var eC=function(e,t,r){if(er(t))switch(t[0]){case"symbol":return ey.untransform(e,t,r);case"class":return e_.untransform(e,t,r);case"custom":return ex.untransform(e,t,r);case"typed-array":return eb.untransform(e,t,r);default:throw Error("Unknown transformation: "+t)}else{var n=eE[t];if(!n)throw Error("Unknown transformation: "+t);return n.untransform(e,r)}},ek=function(e,t){for(var r=e.keys();t>0;)r.next(),t--;return r.next().value};function eR(e){if(Y(e,"__proto__"))throw Error("__proto__ is not allowed as a property");if(Y(e,"prototype"))throw Error("prototype is not allowed as a property");if(Y(e,"constructor"))throw Error("constructor is not allowed as a property")}var eP=function(e,t){eR(t);for(var r=0;r<t.length;r++){var n=t[r];if(ei(e))e=ek(e,+n);else if(en(e)){var i=+n,s=0==+t[++r]?"key":"value",a=ek(e,i);switch(s){case"key":e=a;break;case"value":e=e.get(a)}}else e=e[n]}return e},eD=function(e,t,r){if(eR(t),0===t.length)return r(e);for(var n=e,i=0;i<t.length-1;i++){var s=t[i];if(er(n))n=n[+s];else if(ee(n))n=n[s];else if(ei(n)){var a=+s;n=ek(n,a)}else if(en(n)){if(i===t.length-2)break;var a=+s,o=0==+t[++i]?"key":"value",l=ek(n,a);switch(o){case"key":n=l;break;case"value":n=n.get(l)}}}var c=t[t.length-1];if(er(n)?n[+c]=r(n[+c]):ee(n)&&(n[c]=r(n[c])),ei(n)){var u=ek(n,+c),d=r(u);u!==d&&(n.delete(u),n.add(d))}if(en(n)){var a=+t[t.length-2],p=ek(n,a),o=0==+c?"key":"value";switch(o){case"key":var h=r(p);n.set(h,n.get(p)),h!==p&&n.delete(p);break;case"value":n.set(p,r(n.get(p)))}}return e},eA=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a},eN=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},eL=function(e,t,r,n,i){if(void 0===n&&(n=[]),void 0===i&&(i=[]),eo(e)||(s=e,a=n,(l=(o=t).get(s))?l.push(a):o.set(s,[a])),!(ee(e)||er(e)||en(e)||ei(e)||ew(e,r))){var s,a,o,l,c,u=eT(e,r);return u?{transformedValue:u.value,annotations:[u.type]}:{transformedValue:e}}if(Y(i,e))return{transformedValue:null};var d=eT(e,r),p=null!==(c=null==d?void 0:d.value)&&void 0!==c?c:e;eo(e)||(i=eN(eN([],eA(i)),[e]));var h=er(p)?[]:{},f={};return(G(p,function(e,s){var a=eL(e,t,r,eN(eN([],eA(n)),[s]),i);h[s]=a.transformedValue,er(a.annotations)?f[s]=a.annotations:ee(a.annotations)&&G(a.annotations,function(e,t){f[el(s)+"."+t]=e})}),et(f))?{transformedValue:h,annotations:d?[d.type]:void 0}:{transformedValue:h,annotations:d?[d.type,f]:f}};function eO(e){return Object.prototype.toString.call(e).slice(8,-1)}function eI(e){return"Array"===eO(e)}var eM=function(){return(eM=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},ej=function(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,s=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)a.push(n.value)}catch(o){i={error:o}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(i)throw i.error}}return a},eF=function(e,t){for(var r=0,n=t.length,i=e.length;r<n;r++,i++)e[i]=t[r];return e},e$=function(){function e(){this.classRegistry=new Z,this.symbolRegistry=new H(function(e){var t;return null!==(t=e.description)&&void 0!==t?t:""}),this.customTransformerRegistry=new Q,this.allowedErrorProps=[]}return e.prototype.serialize=function(e){var t,r,n=new Map,i=eL(e,n,this),s={json:i.transformedValue};i.annotations&&(s.meta=eM(eM({},s.meta),{values:i.annotations}));var a=(t={},r=void 0,(n.forEach(function(e){if(!(e.length<=1)){var n=eA(e.map(function(e){return e.map(String)}).sort(function(e,t){return e.length-t.length})),i=n[0],s=n.slice(1);0===i.length?r=s.map(ec):t[ec(i)]=s.map(ec)}}),r)?et(t)?[r]:[r,t]:et(t)?void 0:t);return a&&(s.meta=eM(eM({},s.meta),{referentialEqualities:a})),s},e.prototype.deserialize=function(e){var t,r,n,i=e.json,s=e.meta,a=function e(t,r={}){if(eI(t))return t.map(t=>e(t,r));if(!function(e){if("Object"!==eO(e))return!1;let t=Object.getPrototypeOf(e);return!!t&&t.constructor===Object&&t===Object.prototype}(t))return t;let n=Object.getOwnPropertyNames(t),i=Object.getOwnPropertySymbols(t);return[...n,...i].reduce((n,i)=>{if(eI(r.props)&&!r.props.includes(i))return n;let s=t[i],a=e(s,r);return function(e,t,r,n,i){let s=({}).propertyIsEnumerable.call(n,t)?"enumerable":"nonenumerable";"enumerable"===s&&(e[t]=r),i&&"nonenumerable"===s&&Object.defineProperty(e,t,{value:r,enumerable:!1,writable:!0,configurable:!0})}(n,i,a,t,r.nonenumerable),n},{})}(i);return(null==s?void 0:s.values)&&(t=a,r=s.values,n=this,function e(t,r,n){if(void 0===n&&(n=[]),t){if(!er(t)){G(t,function(t,i){return e(t,r,eN(eN([],eA(n)),eA(eu(i))))});return}var i=eA(t,2),s=i[0],a=i[1];a&&G(a,function(t,i){e(t,r,eN(eN([],eA(n)),eA(eu(i))))}),r(s,n)}}(r,function(e,r){t=eD(t,r,function(t){return eC(t,e,n)})}),a=t),(null==s?void 0:s.referentialEqualities)&&(a=function(e,t){function r(t,r){var n=eP(e,eu(r));t.map(eu).forEach(function(t){e=eD(e,t,function(){return n})})}if(er(t)){var n=eA(t,2),i=n[0],s=n[1];i.forEach(function(t){e=eD(e,eu(t),function(){return e})}),s&&G(s,r)}else G(t,r);return e}(a,s.referentialEqualities)),a},e.prototype.stringify=function(e){return JSON.stringify(this.serialize(e))},e.prototype.parse=function(e){return this.deserialize(JSON.parse(e))},e.prototype.registerClass=function(e,t){this.classRegistry.register(e,t)},e.prototype.registerSymbol=function(e,t){this.symbolRegistry.register(e,t)},e.prototype.registerCustom=function(e,t){this.customTransformerRegistry.register(eM({name:t},e))},e.prototype.allowErrorProps=function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(e=this.allowedErrorProps).push.apply(e,eF([],ej(t)))},e.defaultInstance=new e,e.serialize=e.defaultInstance.serialize.bind(e.defaultInstance),e.deserialize=e.defaultInstance.deserialize.bind(e.defaultInstance),e.stringify=e.defaultInstance.stringify.bind(e.defaultInstance),e.parse=e.defaultInstance.parse.bind(e.defaultInstance),e.registerClass=e.defaultInstance.registerClass.bind(e.defaultInstance),e.registerSymbol=e.defaultInstance.registerSymbol.bind(e.defaultInstance),e.registerCustom=e.defaultInstance.registerCustom.bind(e.defaultInstance),e.allowErrorProps=e.defaultInstance.allowErrorProps.bind(e.defaultInstance),e}();e$.serialize,e$.deserialize,e$.stringify,e$.parse,e$.registerClass,e$.registerCustom,e$.registerSymbol,e$.allowErrorProps;var eB=r(1604);function eU(){eU=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(c){l=function(e,t,r){return e[t]=r}}function u(e,t,r,i){var s,a,o=Object.create((t&&t.prototype instanceof h?t:h).prototype);return n(o,"_invoke",{value:(s=new T(i||[]),a="suspendedStart",function(t,n){if("executing"===a)throw Error("Generator is already running");if("completed"===a){if("throw"===t)throw n;return C()}for(s.method=t,s.arg=n;;){var i=s.delegate;if(i){var o=function e(t,r){var n=r.method,i=t.iterator[n];if(void 0===i)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=void 0,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+n+"' method")),p;var s=d(i,t.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,p;var a=s.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):a:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,p)}(i,s);if(o){if(o===p)continue;return o}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if("suspendedStart"===a)throw a="completed",s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);a="executing";var l=d(e,r,s);if("normal"===l.type){if(a=s.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:s.done}}"throw"===l.type&&(a="completed",s.method="throw",s.arg=l.arg)}})}),o}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}e.wrap=u;var p={};function h(){}function f(){}function m(){}var g={};l(g,s,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(E([])));v&&v!==t&&r.call(v,s)&&(g=v);var b=m.prototype=h.prototype=Object.create(g);function w(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){var i;n(this,"_invoke",{value:function(n,s){function a(){return new t(function(i,a){!function n(i,s,a,o){var l=d(e[i],e,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,o)},function(e){n("throw",e,a,o)}):t.resolve(u).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,o)})}o(l.arg)}(n,s,i,a)})}return i=i?i.then(a,a):a()}})}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function E(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:f,configurable:!0}),f.displayName=l(m,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,o,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(_.prototype),l(_.prototype,a,function(){return this}),e.AsyncIterator=_,e.async=function(t,r,n,i,s){void 0===s&&(s=Promise);var a=new _(u(t,r,n,i),s);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},w(b),l(b,o,"Generator"),l(b,s,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=E,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var o=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function eq(e,t,r,n,i,s,a){try{var o=e[s](a),l=o.value}catch(c){r(c);return}o.done?t(l):Promise.resolve(l).then(n,i)}function ez(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var s=e.apply(t,r);function a(e){eq(s,n,i,a,o,"next",e)}function o(e){eq(s,n,i,a,o,"throw",e)}a(void 0)})}}var eV=eB.z.object({data:eB.z.object({challenge:eB.z.object({text:eB.z.string()})})}),eH=function(e){let t=new D(e),r=d(e=>t.hasOwnProperty(e)?t[e]:"__untypedClient"===e?t:u(({path:r,args:n})=>{let i=[e,...r],s=N(i.pop()),a=i.join(".");return t[s](a,...n)}));return r}({transformer:e$,links:[R({url:"https://sdk-iriko.huddle01.com/trpc"})]}),eW=(U=ez(eU().mark(function e(t){var r,n;return eU().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.Z.request({method:"POST",url:"https://api.lens.dev/",headers:{"Content-Type":"application/json"},data:{query:"query Challenge($request: ChallengeRequest!) {\n                challenge(request: $request) { text }\n              }",variables:{request:{address:t}}}});case 2:return r=e.sent.data,n=eV.parse(r).data.challenge.text,e.abrupt("return",{message:n});case 6:case"end":return e.stop()}},e)})),function(e){return U.apply(this,arguments)}),eZ=(q=ez(eU().mark(function e(t,r){var n,i,s;return eU().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=function(){var e=ez(eU().mark(function e(){return eU().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.Z.request({method:"POST",url:"https://api.lens.dev/",headers:{"Content-Type":"application/json"},data:{query:"mutation ($request: SignedAuthChallenge!) { \n            authenticate(request: $request) {\n              accessToken\n              refreshToken\n            }\n          }",variables:{request:{address:r,signature:t}}}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),e.next=4,n();case 4:return i=e.sent,e.next=7,eH.auth.login.mutate({address:r,chain:"lens",accessToken:i.data.data.authenticate.accessToken,walletName:"lens"});case 7:return s=e.sent,e.abrupt("return",{accessToken:s.accessToken});case 11:throw e.prev=11,e.t0=e.catch(0),Error("Error getting lens access token");case 14:case"end":return e.stop()}},e,null,[[0,11]])})),function(e,t){return q.apply(this,arguments)})},64985:function(e,t,r){"use strict";r.d(t,{y:function(){return l}});var n=r(3407),i=r(62810),s=r(67294),a=r(94464),o=["roomState"],l=function(){var e=(0,n.u)(),t=(0,i._)(e,2),r=t[0],l=r.roomState,c=(0,i.a)(r,o),u=t[1],d=(0,s.useState)(""),p=(0,i._)(d,2),h=p[0],f=p[1],m=(0,s.useState)(!1),g=(0,i._)(m,2),y=g[0],v=g[1],b=(0,n.a)(),w=(0,i._)(b,2),_=w[0],x=w[1],S=function(e){v(!0);try{"ROOM"===l&&(a.m.setDisplayName(e),console.log("DisplayName Broadcasted to everyone")),u((0,n._)((0,n._)({},c),{},{roomState:l})),x(function(t){return(0,n._)((0,n._)({},t),{},{displayName:e})})}catch(t){throw f(t),Error(t)}finally{v(!1)}};return S.isCallable="ROOM"===l,{setDisplayName:S,error:h,isLoading:y,displayName:_.displayName}}},93053:function(e,t,r){"use strict";r.d(t,{B:function(){return l}});var n=r(33786),i=r(62810),s=r(67294);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r(94464);var o=["peerId","track","debug"],l=function(e){var t=e.peerId,r=e.track,l=e.debug,c=(0,i.a)(e,o),u=(0,s.useRef)(null),d=(0,n.u)(t).peer,p=function(e){var t=new MediaStream;return t.addTrack(e),t};return(0,s.useEffect)(function(){var e=r||(null==d?void 0:d.mic),t=u.current;t&&e&&(t.srcObject=p(e),t.onloadedmetadata=(0,n._)((0,n.a)().mark(function e(){return(0,n.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.warn("audioCard() | Metadata loaded..."),e.prev=1,e.next=4,t.play();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error(e.t0);case 9:case"end":return e.stop()}},e,null,[[1,6]])})),t.onerror=function(){console.error("audioCard() | Error is hapenning...")})},[]),s.createElement(s.Fragment,null,l&&s.createElement("div",null,t),s.createElement("audio",a({},c,{ref:u}),"Audio"))}},3407:function(e,t,r){"use strict";r.d(t,{_:function(){return l},a:function(){return p},c:function(){return a},d:function(){return s},u:function(){return u}});var n=r(48583),i=r(15103);function s(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function a(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){a(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var c=(0,i.cn)({roomState:"IDLE",roomId:""}),u=function(){return(0,n.KO)(c)},d=(0,i.cn)({meId:"",displayName:"",role:""}),p=function(){return(0,n.KO)(d)}},62810:function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}r.d(t,{_:function(){return i},a:function(){return s}})},33786:function(e,t,r){"use strict";r.d(t,{_:function(){return l},a:function(){return a},u:function(){return c}});var n=r(62810),i=r(67294),s=r(94464);function a(){a=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",l=i.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(u){c=function(e,t,r){return e[t]=r}}function d(e,t,r,i){var s,a,o=Object.create((t&&t.prototype instanceof f?t:f).prototype);return n(o,"_invoke",{value:(s=new E(i||[]),a="suspendedStart",function(t,n){if("executing"===a)throw Error("Generator is already running");if("completed"===a){if("throw"===t)throw n;return k()}for(s.method=t,s.arg=n;;){var i=s.delegate;if(i){var o=function e(t,r){var n=r.method,i=t.iterator[n];if(void 0===i)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=void 0,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+n+"' method")),h;var s=p(i,t.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,h;var a=s.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,h):a:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,h)}(i,s);if(o){if(o===h)continue;return o}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if("suspendedStart"===a)throw a="completed",s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);a="executing";var l=p(e,r,s);if("normal"===l.type){if(a=s.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:s.done}}"throw"===l.type&&(a="completed",s.method="throw",s.arg=l.arg)}})}),o}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}e.wrap=d;var h={};function f(){}function m(){}function g(){}var y={};c(y,s,function(){return this});var v=Object.getPrototypeOf,b=v&&v(v(C([])));b&&b!==t&&r.call(b,s)&&(y=b);var w=g.prototype=f.prototype=Object.create(y);function _(e){["next","throw","return"].forEach(function(t){c(e,t,function(e){return this._invoke(t,e)})})}function x(e,t){var i;n(this,"_invoke",{value:function(n,s){function a(){return new t(function(i,a){!function n(i,s,a,o){var l=p(e[i],e,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,o)},function(e){n("throw",e,a,o)}):t.resolve(u).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,o)})}o(l.arg)}(n,s,i,a)})}return i=i?i.then(a,a):a()}})}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=g,n(w,"constructor",{value:g,configurable:!0}),n(g,"constructor",{value:m,configurable:!0}),m.displayName=c(g,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(x.prototype),c(x.prototype,o,function(){return this}),e.AsyncIterator=x,e.async=function(t,r,n,i,s){void 0===s&&(s=Promise);var a=new x(d(t,r,n,i),s);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},_(w),c(w,l,"Generator"),c(w,s,function(){return this}),c(w,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=C,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var o=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;T(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:C(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},e}function o(e,t,r,n,i,s,a){try{var o=e[s](a),l=o.value}catch(c){r(c);return}o.done?t(l):Promise.resolve(l).then(n,i)}function l(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var s=e.apply(t,r);function a(e){o(s,n,i,a,l,"next",e)}function l(e){o(s,n,i,a,l,"throw",e)}a(void 0)})}}var c=function(e){var t=(0,i.useState)(null),r=(0,n._)(t,2),a=r[0],o=r[1],l=(0,i.useState)({audio:null,video:null}),c=(0,n._)(l,2),u=c[0],d=c[1],p={peerId:e,role:null==a?void 0:a.role,mic:u.audio,cam:u.video,displayName:null==a?void 0:a.displayName};return(0,i.useEffect)(function(){var t=s.m.getPeer(e),r=s.m.getPeerTracks(e);o(t),d(r)},[]),{peer:p,error:null}}},88037:function(e,t,r){"use strict";r.d(t,{QV:function(){return f},LV:function(){return p},m6:function(){return m},P0:function(){return g},NW:function(){return y}});var n=r(3407),i=r(33786),s=r(62810),a=r(67294),o=r(94464),l=r(15103),c=r(48583),u=(0,l.cn)({}),d=["roomState"];function p(){var e=(0,n.u)(),t=(0,s._)(e,2),r=t[0],i=r.roomState,l=(0,s.a)(r,d),c=t[1],u=(0,n.a)(),p=(0,s._)(u,2),h=p[0],f=p[1],m=function(e){o.m.initialize(e);var t=o.m.getMeId();f(function(e){return(0,n._)((0,n._)({},e),{},{meId:t})})},g="IDLE"!==i;return m.isCallable=!g,(0,a.useEffect)(function(){o.m.on("app:initialized",function(){c((0,n._)((0,n._)({},l),{},{roomState:"INIT"}))}),o.m.on("room:me-role-update",function(e){f(function(t){return(0,n._)((0,n._)({},t),{},{role:e})})})},[]),{initialize:m,isInitialized:g,roomState:i,me:h}}var h=function(e,t){(0,a.useEffect)(function(){return o.m.on(e,t),function(){o.m.off(e,t)}},[])},f=function(){var e,t,r,l,c,u=(0,a.useState)(""),d=(0,s._)(u,2),p=d[0],h=d[1],f=(0,a.useState)(!1),m=(0,s._)(f,2),g=m[0],y=m[1],v=(0,a.useState)(null),b=(0,s._)(v,2),w=b[0],_=b[1],x=(0,a.useState)(!1),S=(0,s._)(x,2),T=S[0],E=S[1],C=(0,n.u)(),k=(0,s._)(C,1)[0],R=(0,a.useState)([]),P=(0,s._)(R,2),D=P[0],A=P[1],N=(e=(0,i._)((0,i.a)().mark(function e(t){var r;return(0,i.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,o.m.fetchAudioStream(t);case 4:return r=e.sent,y(!1),_(r),e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(1),y(!1),h(e.t0),e.abrupt("return");case 15:return e.prev=15,y(!1),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[1,10,15,18]])})),function(t){return e.apply(this,arguments)}),L=function(){y(!0);try{o.m.stopAudioStream(),y(!1),_(null),E(!1)}catch(e){y(!1),h(e)}},O=(t=(0,i._)((0,i.a)().mark(function e(t){return(0,i.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(y(!0),e.prev=1,t){e.next=4;break}throw Error("No audio stream");case 4:o.m.produceAudio(t),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),y(!1),h(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,7]])})),function(e){return t.apply(this,arguments)}),I=function(){y(!0);try{o.m.stopProducingAudio(),E(!1),y(!1)}catch(e){y(!1),h(e)}},M=(r=(0,i._)((0,i.a)().mark(function e(t){return(0,i.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,e.next=4,o.m.createMicConsumer(t);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),y(!1),h(e.t0);case 10:case"end":return e.stop()}},e,null,[[1,6]])})),function(e){return r.apply(this,arguments)}),j=(l=(0,i._)((0,i.a)().mark(function e(t){return(0,i.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:y(!0);try{o.m.closeMicConsumer(t)}catch(r){y(!1),h(r)}case 2:case"end":return e.stop()}},e)})),function(e){return l.apply(this,arguments)}),F=(c=(0,i._)((0,i.a)().mark(function e(){var t;return(0,i.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.m.enumerateMicDevices();case 2:return A(t=e.sent),e.abrupt("return",t);case 5:case"end":return e.stop()}},e)})),function(){return c.apply(this,arguments)});return F.isCallable=!0,N.isCallable=!g,O.isCallable="ROOM"===k.roomState,I.isCallable=T,L.isCallable=w||T,M.isCallable=!0,j.isCallable=!0,(0,a.useEffect)(function(){o.m.on("room:mic-produce-start",function(){y(!1),E(!0)}),o.m.on("room:mic-produce-stop",function(){y(!1),E(!1)})},[]),{stream:w,isLoading:g,isProducing:T,fetchAudioStream:N,produceAudio:O,stopProducingAudio:I,stopAudioStream:L,createMicConsumer:M,closeMicConsumer:j,error:p,micDevices:D,enumerateMicDevices:F}},m=function(){var e,t=(0,n.u)(),r=(0,s._)(t,2),l=r[0],c=r[1],u=(0,a.useState)(!1),d=(0,s._)(u,2),p=d[0],h=d[1],f=(0,a.useState)(null),m=(0,s._)(f,2),g=m[0],y=m[1],v=(e=(0,i._)((0,i.a)().mark(function e(t,r){return(0,i.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h(!0),o.m.joinLobby(t,r);case 2:case"end":return e.stop()}},e)})),function(t,r){return e.apply(this,arguments)}),b=function(){o.m.leaveLobby(),c({roomState:"INIT",roomId:""})};return v.isCallable="INIT"===l.roomState,b.isCallable="LOBBY"===l.roomState,(0,a.useEffect)(function(){o.m.on("lobby:joined",function(e){h(!1),c({roomState:"LOBBY",roomId:e})}),o.m.on("lobby:failed",function(e){h(!1),y(e)})},[]),{isLoading:p,isLobbyJoined:"LOBBY"===l.roomState||"ROOM"===l.roomState,joinLobby:v,leaveLobby:b,error:g}},g=function(){var e=(0,c.KO)(u),t=(0,s._)(e,2),r=t[0],i=t[1];return(0,a.useEffect)(function(){o.m.on("room:joined",function(e){var t={};Object.values(Object.fromEntries(e)).forEach(function(e){t[e.peerId]={peerId:e.peerId,role:e.role,mic:null,cam:null,displayName:e.displayName}}),i(t)}),o.m.on("room:peer-joined",function(e){var t=e.peerId,r=e.role,s=e.displayName;console.log("@huddle01/react | room:peer-left");var a={peerId:t,role:r,mic:null,cam:null,displayName:s};i(function(e){return(0,n._)((0,n._)({},e),{},(0,n.c)({},t,a))})}),o.m.on("room:peer-produce-start",function(e){var t=e.peerId,r=e.mediaType,a=e.track;console.log("@huddle01/react | room:peer-produce-start"),i(function(e){var i=e[t],o=(0,s.a)(e,[t].map(n.d));return(0,n._)((0,n._)({},o),{},(0,n.c)({},t,(0,n._)((0,n._)({},i),{},(0,n.c)({},r,a))))})}),o.m.on("room:peer-produce-stop",function(e){var t=e.peerId,r=e.mediaType;console.log("@huddle01/react | room:peer-produce-stop"),i(function(e){var i=e[t],a=(0,s.a)(e,[t].map(n.d));return(0,n._)((0,n._)({},a),{},(0,n.c)({},t,(0,n._)((0,n._)({},i),{},(0,n.c)({},r,null))))})}),o.m.on("room:peer-left",function(e){console.log("@huddle01/react | room:peer-left"),i(function(t){var r=(0,n._)({},t);return delete r[e],r})})},[]),h("room:peer-name-update",function(e,t){i(function(r){return(0,n._)((0,n._)({},r),{},(0,n.c)({},e,(0,n._)((0,n._)({},r[e]),{},{displayName:t})))})}),{peers:r}},y=function(){var e=(0,a.useState)(null),t=(0,s._)(e,2),r=t[0],i=t[1],l=(0,a.useState)(!1),c=(0,s._)(l,2),u=c[0],d=c[1],p=(0,n.u)(),h=(0,s._)(p,2),f=h[0],m=f.roomId,g=f.roomState,y=h[1],v=function(){d(!0),o.m.joinRoom()},b=function(){o.m.leaveRoom(),y(function(e){return(0,n._)((0,n._)({},e),{},{roomState:"INIT"})})};return v.isCallable="LOBBY"===g,b.isCallable="ROOM"===g,(0,a.useEffect)(function(){o.m.on("room:joined",function(){d(!1),y(function(e){return(0,n._)((0,n._)({},e),{},{roomState:"ROOM"})})}),o.m.on("room:failed",function(e){d(!1),i(e)})},[]),{roomId:m,isLoading:u,isRoomJoined:b.isCallable,joinRoom:v,leaveRoom:b,error:r}}},86907:function(e,t,r){"use strict";let n=r(71313);e.exports=n},71313:function(e,t,r){"use strict";var n=r(87592),i=r(89408),s=r(76969),a=r(32998);function o(e){let t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let l="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function c(e){let t=a.$getSelection();if(null==t)throw Error("Expected valid LexicalSelection");return a.$isRangeSelection(t)&&t.isCollapsed()||0===t.getNodes().length?"":n.$generateHtmlFromNodes(e,t)}function u(e){let t=a.$getSelection();if(null==t)throw Error("Expected valid LexicalSelection");return a.$isRangeSelection(t)&&t.isCollapsed()||0===t.getNodes().length?null:JSON.stringify(p(e,t))}function d(e,t,r){(a.DEPRECATED_$isGridSelection(r)||null!==s.$findMatchingParent(r.anchor.getNode(),e=>a.DEPRECATED_$isGridCellNode(e))&&null!==s.$findMatchingParent(r.focus.getNode(),e=>a.DEPRECATED_$isGridCellNode(e)))&&1===t.length&&a.DEPRECATED_$isGridNode(t[0])?function(e,t,r,n){let i,l;1===e.length&&a.DEPRECATED_$isGridNode(e[0])||o(42);var c=e[0];e=c.getChildren(),r=c.getFirstChildOrThrow().getChildrenSize();var u=c.getChildrenSize(),d=s.$findMatchingParent(t.anchor.getNode(),e=>a.DEPRECATED_$isGridCellNode(e));t=(c=d&&s.$findMatchingParent(d,e=>a.DEPRECATED_$isGridRowNode(e)))&&s.$findMatchingParent(c,e=>a.DEPRECATED_$isGridNode(e)),a.DEPRECATED_$isGridCellNode(d)&&a.DEPRECATED_$isGridRowNode(c)&&a.DEPRECATED_$isGridNode(t)||o(43);var p=c.getIndexWithinParent(),h=Math.min(t.getChildrenSize()-1,p+u-1);u=d.getIndexWithinParent(),d=Math.min(c.getChildrenSize()-1,u+r-1),r=Math.min(u,d),c=Math.min(p,h),u=Math.max(u,d),p=Math.max(p,h),h=t.getChildren(),d=0;for(let f=c;f<=p;f++){var m=h[f];a.DEPRECATED_$isGridRowNode(m)||o(24);var g=e[d];a.DEPRECATED_$isGridRowNode(g)||o(24),m=m.getChildren(),g=g.getChildren();let y=0;for(let v=r;v<=u;v++){let b=m[v];a.DEPRECATED_$isGridCellNode(b)||o(25);let w=g[y];a.DEPRECATED_$isGridCellNode(w)||o(25),f===c&&v===r?i=b.getKey():f===p&&v===u&&(l=b.getKey());let _=b.getChildren();w.getChildren().forEach(e=>{a.$isTextNode(e)&&a.$createParagraphNode().append(e),b.append(e)}),_.forEach(e=>e.remove()),y++}d++}i&&l&&((e=a.DEPRECATED_$createGridSelection()).set(t.getKey(),i,l),a.$setSelection(e),n.dispatchCommand(a.SELECTION_CHANGE_COMMAND,void 0))}(t,r,!1,e):function(e,t){let r=[],n=null;for(let i=0;i<e.length;i++){let s=e[i],l=a.$isLineBreakNode(s);if(l||a.$isDecoratorNode(s)&&s.isInline()||a.$isElementNode(s)&&s.isInline()||a.$isTextNode(s)||s.isParentRequired()){if(null===n&&(n=s.createParentElementNode(),r.push(n),l))continue;null!==n&&n.append(s)}else r.push(s),n=null}a.$isRangeSelection(t)?t.insertNodes(r):a.DEPRECATED_$isGridSelection(t)&&(e=t.anchor.getNode(),a.DEPRECATED_$isGridCellNode(e)||o(41),e.append(...r))}(t,r)}function p(e,t){let r=[],n=a.$getRoot().getChildren();for(let s=0;s<n.length;s++)!function e(t,r,n,s=[]){let l=null==r||n.isSelected(r),c=a.$isElementNode(n)&&n.excludeFromCopy("html");var u=n;if(null!==r){var d=i.$cloneWithProperties(n);u=d=a.$isTextNode(d)&&null!=r?i.$sliceSelectedTextNodeContent(r,d):d}let p=a.$isElementNode(u)?u.getChildren():[];var h=u;d=h.exportJSON();var f=h.constructor;d.type!==f.getType()&&o(58,f.name);let m=d.children;for(a.$isElementNode(h)&&(Array.isArray(m)||o(59,f.name)),a.$isTextNode(u)&&(0<(u=u.__text).length?d.text=u:l=!1),u=0;u<p.length;u++)h=p[u],f=e(t,r,h,d.children),!l&&a.$isElementNode(n)&&f&&n.extractWithChild(h,r,"clone")&&(l=!0);if(l&&!c)s.push(d);else if(Array.isArray(d.children))for(t=0;t<d.children.length;t++)s.push(d.children[t]);return l}(e,t,n[s],r);return{namespace:e._config.namespace,nodes:r}}function h(e){let t=[];for(let r=0;r<e.length;r++){let n=a.$parseSerializedNode(e[r]);a.$isTextNode(n)&&i.$addNodeStyle(n),t.push(n)}return t}let f=null;function m(e,t){var r=l?(e._window||window).getSelection():null;if(!r)return!1;var n=r.anchorNode;if(r=r.focusNode,null!==n&&null!==r&&!a.isSelectionWithinEditor(e,n,r)||(t.preventDefault(),t=t.clipboardData,n=a.$getSelection(),null===t||null===n))return!1;r=c(e),e=u(e);let i="";return null!==n&&(i=n.getTextContent()),null!==r&&t.setData("text/html",r),null!==e&&t.setData("application/x-lexical-editor",e),t.setData("text/plain",i),!0}t.$generateJSONFromSelectedNodes=p,t.$generateNodesFromSerializedNodes=h,t.$getHtmlContent=c,t.$getLexicalContent=u,t.$insertDataTransferForPlainText=function(e,t){null!=(e=e.getData("text/plain")||e.getData("text/uri-list"))&&t.insertRawText(e)},t.$insertDataTransferForRichText=function(e,t,r){var i=e.getData("application/x-lexical-editor");if(i)try{let s=JSON.parse(i);if(s.namespace===r._config.namespace&&Array.isArray(s.nodes)){let o=h(s.nodes);return d(r,o,t)}}catch{}if(i=e.getData("text/html"))try{var l=(new DOMParser).parseFromString(i,"text/html"),c=n.$generateNodesFromDOM(r,l);return d(r,c,t)}catch{}if(null!=(e=e.getData("text/plain")||e.getData("text/uri-list"))){if(a.$isRangeSelection(t))for(r=(e=e.split(/(\r?\n|\t)/)).length,l=0;l<r;l++)"\n"===(c=e[l])||"\r\n"===c?t.insertParagraph():"	"===c?t.insertNodes([a.$createTabNode()]):t.insertText(c);else t.insertRawText(e)}},t.$insertGeneratedNodes=d,t.copyToClipboard=async function(e,t){if(null!==f)return!1;if(null!==t)return new Promise(r=>{e.update(()=>{r(m(e,t))})});var r=e.getRootElement();let n=null==e._window?window.document:e._window.document,i=l?(e._window||window).getSelection():null;if(null===r||null===i)return!1;let o=n.createElement("span");return o.style.cssText="position: fixed; top: -1000px;",o.append(n.createTextNode("#")),r.append(o),(r=new Range).setStart(o,0),r.setEnd(o,1),i.removeAllRanges(),i.addRange(r),new Promise(t=>{let r=e.registerCommand(a.COPY_COMMAND,n=>(s.objectKlassEquals(n,ClipboardEvent)&&(r(),null!==f&&(window.clearTimeout(f),f=null),t(m(e,n))),!0),a.COMMAND_PRIORITY_CRITICAL);f=window.setTimeout(()=>{r(),f=null,t(!1)},50),n.execCommand("copy"),o.remove()})}},23277:function(e,t,r){"use strict";let n=r(88233);e.exports=n},88233:function(e,t,r){"use strict";var n=r(15660);r(35433),r(39980),r(24335),r(24064),r(4279),r(15251),r(11426),r(35266),r(80366),r(70767),r(90874),r(96836),r(52503),r(2731);var i=r(76969),s=r(32998);let a=e=>null!=e&&n.languages.hasOwnProperty(e)?e:void 0;class o extends s.ElementNode{static getType(){return"code"}static clone(e){return new o(e.__language,e.__key)}constructor(e,t){super(t),this.__language=a(e)}createDOM(e){let t=document.createElement("code");return i.addClassNamesToElement(t,e.theme.code),t.setAttribute("spellcheck","false"),(e=this.getLanguage())&&t.setAttribute("data-highlight-language",e),t}updateDOM(e,t){let r=this.__language;return e=e.__language,r?r!==e&&t.setAttribute("data-highlight-language",r):e&&t.removeAttribute("data-highlight-language"),!1}exportDOM(){let e=document.createElement("pre");e.setAttribute("spellcheck","false");let t=this.getLanguage();return t&&e.setAttribute("data-highlight-language",t),{element:e}}static importDOM(){return{code:e=>null!=e.textContent&&(/\r?\n/.test(e.textContent)||function e(t,r){for(let n of t.childNodes){if(i.isHTMLElement(n)&&n.tagName===r)return!0;e(n,r)}return!1}(e,"BR"))?{conversion:u,priority:1}:null,div:()=>({conversion:d,priority:1}),pre:()=>({conversion:u,priority:0}),table:e=>m(e)?{conversion:p,priority:3}:null,td:e=>{let t=e.closest("table");return e.classList.contains("js-file-line")?{conversion:f,priority:3}:t&&m(t)?{conversion:h,priority:3}:null},tr:e=>(e=e.closest("table"))&&m(e)?{conversion:h,priority:3}:null}}static importJSON(e){let t=l(e.language);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),type:"code",version:1}}insertNewAfter(e,t=!0){var r=this.getChildren(),n=r.length;if(2<=n&&"\n"===r[n-1].getTextContent()&&"\n"===r[n-2].getTextContent()&&e.isCollapsed()&&e.anchor.key===this.__key&&e.anchor.offset===n)return r[n-1].remove(),r[n-2].remove(),e=s.$createParagraphNode(),this.insertAfter(e,t),e;if(t=e.anchor,r=e.focus,x(t=(t.isBefore(r)?t:r).getNode())||s.$isTabNode(t)){for(t=S(t),r=[];;)if(s.$isTabNode(t))r.push(s.$createTabNode()),t=t.getNextSibling();else if(x(t)){n=0;let i=t.getTextContent(),a=t.getTextContentSize();for(;n<a&&" "===i[n];n++);if(0!==n&&r.push(_(" ".repeat(n))),n!==a)break;t=t.getNextSibling()}else break;if(0<r.length)return e.insertNodes([s.$createLineBreakNode(),...r]),r[r.length-1]}return null}canIndent(){return!1}collapseAtStart(){let e=s.$createParagraphNode();return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}setLanguage(e){this.getWritable().__language=a(e)}getLanguage(){return this.getLatest().__language}}function l(e){return s.$applyNodeReplacement(new o(e))}function c(e){return e instanceof o}function u(e){let t;return i.isHTMLElement(e)&&(t=e.getAttribute("data-highlight-language")),{node:l(t)}}function d(e){let t=null!==e.style.fontFamily.match("monospace");return t||function(e){for(e=e.parentElement;null!==e;){if(null!==e.style.fontFamily.match("monospace"))return!0;e=e.parentElement}return!1}(e)?{after:t=>{let r=e.parentNode;return null!=r&&e!==r.lastChild&&t.push(s.$createLineBreakNode()),t},node:t?l():null}:{node:null}}function p(){return{node:l()}}function h(){return{node:null}}function f(e){return{after:t=>(e.parentNode&&e.parentNode.nextSibling&&t.push(s.$createLineBreakNode()),t),node:null}}function m(e){return e.classList.contains("js-file-line-container")}let g={c:"C",clike:"C-like",cpp:"C++",css:"CSS",html:"HTML",java:"Java",js:"JavaScript",markdown:"Markdown",objc:"Objective-C",plain:"Plain Text",py:"Python",rust:"Rust",sql:"SQL",swift:"Swift",typescript:"TypeScript",xml:"XML"},y={cpp:"cpp",java:"java",javascript:"js",md:"markdown",plaintext:"plain",python:"py",text:"plain",ts:"typescript"};function v(e){return y[e]||e}class b extends s.TextNode{constructor(e,t,r){super(e,r),this.__highlightType=t}static getType(){return"code-highlight"}static clone(e){return new b(e.__text,e.__highlightType||void 0,e.__key)}getHighlightType(){return this.getLatest().__highlightType}createDOM(e){let t=super.createDOM(e);return e=w(e.theme,this.__highlightType),i.addClassNamesToElement(t,e),t}updateDOM(e,t,r){let n=super.updateDOM(e,t,r);return(e=w(r.theme,e.__highlightType))!==(r=w(r.theme,this.__highlightType))&&(e&&i.removeClassNamesFromElement(t,e),r&&i.addClassNamesToElement(t,r)),n}static importJSON(e){let t=_(e.text,e.highlightType);return t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType(),type:"code-highlight",version:1}}setFormat(){return this}isParentRequired(){return!0}createParentElementNode(){return l()}}function w(e,t){return t&&e&&e.codeHighlight&&e.codeHighlight[t]}function _(e,t){return s.$applyNodeReplacement(new b(e,t))}function x(e){return e instanceof b}function S(e){let t=e;for(;x(e)||s.$isTabNode(e);)t=e,e=e.getPreviousSibling();return t}function T(e){let t=e;for(;x(e)||s.$isTabNode(e);)t=e,e=e.getNextSibling();return t}let E={defaultLanguage:"javascript",tokenize(e,t){return n.tokenize(e,n.languages[t||""]||n.languages[this.defaultLanguage])}};function C(e,t){let r=null;var n=null,i=e;let a=t,o=e.getTextContent();for(;;){if(0===a){if(null===(i=i.getPreviousSibling()))break;if(!(x(i)||s.$isTabNode(i)||s.$isLineBreakNode(i)))throw Error("Expected a valid Code Node: CodeHighlightNode, TabNode, LineBreakNode");if(s.$isLineBreakNode(i)){r={node:i,offset:1};break}a=Math.max(0,i.getTextContentSize()-1),o=i.getTextContent()}else a--;let l=o[a];x(i)&&" "!==l&&(n={node:i,offset:a})}if(null!==n)return n;if(n=null,t<e.getTextContentSize()?x(e)&&(n=e.getTextContent()[t]):x(i=e.getNextSibling())&&(n=i.getTextContent()[0]),null!==n&&" "!==n)return r;e:for(n=e,i=e.getTextContent(),e=e.getTextContentSize();;){if(!x(n)||t===e){if(null===(n=n.getNextSibling())||s.$isLineBreakNode(n)){e=null;break e}x(n)&&(t=0,i=n.getTextContent(),e=n.getTextContentSize())}if(x(n)){if(" "!==i[t]){e={node:n,offset:t};break e}t++}}return null!==e?e:r}function k(e){if(e=T(e),s.$isLineBreakNode(e))throw Error("Unexpected lineBreakNode in getEndOfCodeInLine");return e}function R(e,t,r){let n=e.getParent();c(n)?D(n,t,r):x(e)&&e.replace(s.$createTextNode(e.__text))}let P=new Set;function D(e,t,r){let n=e.getKey();P.has(n)||(P.add(n),void 0===e.getLanguage()&&e.setLanguage(r.defaultLanguage),t.update(()=>{(function(e,t){if(c(e=s.$getNodeByKey(e))&&e.isAttached()){var r=s.$getSelection();if(s.$isRangeSelection(r)){var n=(r=r.anchor).offset,i="element"===r.type&&s.$isLineBreakNode(e.getChildAtIndex(r.offset-1)),a=0;i||(a=n+r.getNode().getPreviousSiblings().reduce((e,t)=>e+t.getTextContentSize(),0)),t()&&(i?r.getNode().select(n,n):e.getChildren().some(e=>{let t=s.$isTextNode(e);if(t||s.$isLineBreakNode(e)){let r=e.getTextContentSize();if(t&&r>=a)return e.select(a,a),!0;a-=r}return!1}))}else t()}})(n,()=>{var t=s.$getNodeByKey(n);if(!c(t)||!t.isAttached())return!1;var i=t.getTextContent();i=function e(t,r){let n=[];for(let i of t)if("string"==typeof i){let a=(t=i.split(/(\n|\t)/)).length;for(let o=0;o<a;o++){let l=t[o];"\n"===l||"\r\n"===l?n.push(s.$createLineBreakNode()):"	"===l?n.push(s.$createTabNode()):0<l.length&&n.push(_(l,r))}}else({content:t}=i),"string"==typeof t?n.push(...e([t],i.type)):Array.isArray(t)&&n.push(...e(t,i.type));return n}(i=r.tokenize(i,t.getLanguage()||r.defaultLanguage));var a=t.getChildren();for(t=0;t<a.length&&A(a[t],i[t]);)t++;var o=a.length;let l=i.length,u=Math.min(o,l)-t,d=0;for(;d<u;)if(!A(a[o-++d],i[l-d])){d--;break}a=t,o-=d;let{from:p,to:h,nodesForReplacement:f}={from:a,nodesForReplacement:i=i.slice(t,l-d),to:o};return(p!==h||!!f.length)&&(e.splice(p,h-p,f),!0)})},{onUpdate:()=>{P.delete(n)},skipTransforms:!0}))}function A(e,t){return x(e)&&x(t)&&e.__text===t.__text&&e.__highlightType===t.__highlightType||s.$isTabNode(e)&&s.$isTabNode(t)||s.$isLineBreakNode(e)&&s.$isLineBreakNode(t)}function N(e){if(!s.$isRangeSelection(e))return!1;var t=e.anchor.getNode();return e=e.focus.getNode(),!!(t.is(e)&&c(t))||c(t=t.getParent())&&t.is(e.getParent())}function L(e){e=e.getNodes();let t=[[]];if(1===e.length&&c(e[0]))return t;let r=t[0];for(let n=0;n<e.length;n++){let i=e[n];if(!(x(i)||s.$isTabNode(i)||s.$isLineBreakNode(i)))throw Error("Expected selection to be inside CodeBlock and consisting of CodeHighlightNode, TabNode and LineBreakNode");s.$isLineBreakNode(i)?0!==n&&0<r.length&&(r=[],t.push(r)):r.push(i)}return t}function O(e){var t=s.$getSelection();if(!s.$isRangeSelection(t)||!N(t))return!1;var r=L(t);let n=r.length;if(1<r.length){for(t=0;t<n;t++){var i=r[t];0<i.length&&(i=i[0],0===t&&(i=S(i)),null!==i&&(e===s.INDENT_CONTENT_COMMAND?i.insertBefore(s.$createTabNode()):s.$isTabNode(i)&&i.remove()))}return!0}if(!(c(r=t.getNodes()[0])||x(r)||s.$isTabNode(r)||s.$isLineBreakNode(r)))throw Error("Expected selection firstNode to be CodeHighlightNode or CodeTabNode");if(c(r))return e===s.INDENT_CONTENT_COMMAND&&t.insertNodes([s.$createTabNode()]),!0;if(null===(r=S(r)))throw Error("Expected getFirstCodeNodeOfLine to return a valid Code Node");return e===s.INDENT_CONTENT_COMMAND?s.$isLineBreakNode(r)?r.insertAfter(s.$createTabNode()):r.insertBefore(s.$createTabNode()):s.$isTabNode(r)&&r.remove(),!0}function I(e,t){let r,n=s.$getSelection();if(!s.$isRangeSelection(n))return!1;let{anchor:i,focus:a}=n,o=i.offset,l=a.offset,c=i.getNode(),u=a.getNode();var d=e===s.KEY_ARROW_UP_COMMAND;if(!N(n)||!x(c)&&!s.$isTabNode(c)||!x(u)&&!s.$isTabNode(u))return!1;if(!t.altKey){if(n.isCollapsed()){if(e=c.getParentOrThrow(),d&&0===o&&null===c.getPreviousSibling()){if(null===e.getPreviousSibling())return e.selectPrevious(),t.preventDefault(),!0}else if(!d&&o===c.getTextContentSize()&&null===c.getNextSibling()&&null===e.getNextSibling())return e.selectNext(),t.preventDefault(),!0}return!1}if(c.isBefore(u)){var p=S(c);r=T(u)}else p=S(u),r=T(c);if(null==p||null==r)return!1;let h=p.getNodesBetween(r);for(let f=0;f<h.length;f++){let m=h[f];if(!x(m)&&!s.$isTabNode(m)&&!s.$isLineBreakNode(m))return!1}if(t.preventDefault(),t.stopPropagation(),t=d?p.getPreviousSibling():r.getNextSibling(),!s.$isLineBreakNode(t)||null==(p=d?t.getPreviousSibling():t.getNextSibling()))return!0;let g=null!=(d=x(p)||s.$isTabNode(p)||s.$isLineBreakNode(p)?d?S(p):T(p):null)?d:p;return t.remove(),h.forEach(e=>e.remove()),e===s.KEY_ARROW_UP_COMMAND?(h.forEach(e=>g.insertBefore(e)),g.insertBefore(t)):(g.insertAfter(t),g=t,h.forEach(e=>{g.insertAfter(e),g=e})),n.setTextNodeRange(c,o,u,l),!0}function M(e,t){let r=s.$getSelection();if(!s.$isRangeSelection(r))return!1;let{anchor:n,focus:i}=r;var a=n.getNode();let o=i.getNode();if(e=e===s.MOVE_TO_START,!x(a)&&!s.$isTabNode(a)||!x(o)&&!s.$isTabNode(o))return!1;if(e){if(null!==(a=C(o,i.offset))){let{node:l,offset:c}=a;s.$isLineBreakNode(l)?l.selectNext(0,0):r.setTextNodeRange(l,c,l,c)}else o.getParentOrThrow().selectStart()}else k(o).select();return t.preventDefault(),t.stopPropagation(),!0}t.$createCodeHighlightNode=_,t.$createCodeNode=l,t.$isCodeHighlightNode=x,t.$isCodeNode=c,t.CODE_LANGUAGE_FRIENDLY_NAME_MAP=g,t.CODE_LANGUAGE_MAP=y,t.CodeHighlightNode=b,t.CodeNode=o,t.DEFAULT_CODE_LANGUAGE="javascript",t.PrismTokenizer=E,t.getCodeLanguages=()=>Object.keys(n.languages).filter(e=>"function"!=typeof n.languages[e]).sort(),t.getDefaultCodeLanguage=()=>"javascript",t.getEndOfCodeInLine=k,t.getFirstCodeNodeOfLine=S,t.getLanguageFriendlyName=function(e){return g[e=v(e)]||e},t.getLastCodeNodeOfLine=T,t.getStartOfCodeInLine=C,t.normalizeCodeLang=v,t.registerCodeHighlighting=function(e,t){if(!e.hasNodes([o,b]))throw Error("CodeHighlightPlugin: CodeNode or CodeHighlightNode not registered on editor");return null==t&&(t=E),i.mergeRegister(e.registerMutationListener(o,t=>{e.update(()=>{for(let[r,n]of t)if("destroyed"!==n){var i=s.$getNodeByKey(r);if(null!==i)e:{var a=i;if(null===(i=e.getElementByKey(a.getKey())))break e;let o=(a=a.getChildren()).length;if(o===i.__cachedChildrenLength)break e;i.__cachedChildrenLength=o;let l="1",c=1;for(let u=0;u<o;u++)s.$isLineBreakNode(a[u])&&(l+="\n"+ ++c);i.setAttribute("data-gutter",l)}}})}),e.registerNodeTransform(o,r=>D(r,e,t)),e.registerNodeTransform(s.TextNode,r=>R(r,e,t)),e.registerNodeTransform(b,r=>R(r,e,t)),e.registerCommand(s.KEY_TAB_COMMAND,t=>{let r=function(e){var t=s.$getSelection();if(!s.$isRangeSelection(t)||!N(t))return null;let r=e?s.OUTDENT_CONTENT_COMMAND:s.INDENT_CONTENT_COMMAND;if(e=e?s.OUTDENT_CONTENT_COMMAND:s.INSERT_TAB_COMMAND,1<L(t).length)return r;var n=t.getNodes()[0];if(!(c(n)||x(n)||s.$isTabNode(n)||s.$isLineBreakNode(n)))throw Error("Expected selection firstNode to be CodeHighlightNode or TabNode");if(c(n))return r;let i=S(n);n=T(n);var a=t.anchor;let o=t.focus;return o.isBefore(a)?t=o:(t=a,a=o),null!==i&&null!==n&&t.key===i.getKey()&&0===t.offset&&a.key===n.getKey()&&a.offset===n.getTextContentSize()?r:e}(t.shiftKey);return null!==r&&(t.preventDefault(),e.dispatchCommand(r,void 0),!0)},s.COMMAND_PRIORITY_LOW),e.registerCommand(s.INSERT_TAB_COMMAND,()=>!!N(s.$getSelection())&&(s.$insertNodes([s.$createTabNode()]),!0),s.COMMAND_PRIORITY_LOW),e.registerCommand(s.INDENT_CONTENT_COMMAND,()=>O(s.INDENT_CONTENT_COMMAND),s.COMMAND_PRIORITY_LOW),e.registerCommand(s.OUTDENT_CONTENT_COMMAND,()=>O(s.OUTDENT_CONTENT_COMMAND),s.COMMAND_PRIORITY_LOW),e.registerCommand(s.KEY_ARROW_UP_COMMAND,e=>I(s.KEY_ARROW_UP_COMMAND,e),s.COMMAND_PRIORITY_LOW),e.registerCommand(s.KEY_ARROW_DOWN_COMMAND,e=>I(s.KEY_ARROW_DOWN_COMMAND,e),s.COMMAND_PRIORITY_LOW),e.registerCommand(s.MOVE_TO_END,e=>M(s.MOVE_TO_END,e),s.COMMAND_PRIORITY_LOW),e.registerCommand(s.MOVE_TO_START,e=>M(s.MOVE_TO_START,e),s.COMMAND_PRIORITY_LOW))}},70573:function(e,t,r){"use strict";let n=r(97370);e.exports=n},97370:function(e,t,r){"use strict";var n=r(32998);t.registerDragonSupport=function(e){let t=window.location.origin,r=r=>{if(r.origin===t){var i=e.getRootElement();if(document.activeElement===i&&"string"==typeof(i=r.data)){try{var s=JSON.parse(i)}catch(a){return}if(s&&"nuanria_messaging"===s.protocol&&"request"===s.type&&(s=s.payload)&&"makeChanges"===s.functionId&&(s=s.args)){let[o,l,c,u,d]=s;e.update(()=>{let e=n.$getSelection();if(n.$isRangeSelection(e)){var t=e.anchor;let i=t.getNode(),s=0,a=0;n.$isTextNode(i)&&0<=o&&0<=l&&(s=o,a=o+l,e.setTextNodeRange(i,s,i,a)),(s!==a||""!==c)&&(e.insertRawText(c),i=t.getNode()),n.$isTextNode(i)&&(s=u,a=u+d,s=s>(t=i.getTextContentSize())?t:s,a=a>t?t:a,e.setTextNodeRange(i,s,i,a)),r.stopImmediatePropagation()}})}}}};return window.addEventListener("message",r,!0),()=>{window.removeEventListener("message",r,!0)}}},78780:function(e,t,r){"use strict";let n=r(70020);e.exports=n},70020:function(e,t,r){"use strict";var n=r(76969),i=r(32998);class s extends i.TextNode{static getType(){return"hashtag"}static clone(e){return new s(e.__text,e.__key)}constructor(e,t){super(e,t)}createDOM(e){let t=super.createDOM(e);return n.addClassNamesToElement(t,e.theme.hashtag),t}static importJSON(e){let t=a(e.text);return t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}exportJSON(){return{...super.exportJSON(),type:"hashtag"}}canInsertTextBefore(){return!1}isTextEntity(){return!0}}function a(e=""){return i.$applyNodeReplacement(new s(e))}t.$createHashtagNode=a,t.$isHashtagNode=function(e){return e instanceof s},t.HashtagNode=s},48854:function(e,t,r){"use strict";let n=r(54379);e.exports=n},54379:function(e,t,r){"use strict";var n=r(76969),i=r(32998);t.createEmptyHistoryState=function(){return{current:null,redoStack:[],undoStack:[]}},t.registerHistory=function(e,t,r){var s;let a,o;let l=(s=r,a=Date.now(),o=0,(t,r,n,l,c,u)=>{let d=Date.now();if(u.has("historic"))return o=0,a=d,2;let p=function(e,t,r,n,s){if(null===e||0===r.size&&0===n.size&&!s)return 0;var a=t._selection,o=e._selection;if(s)return 1;if(!(i.$isRangeSelection(a)&&i.$isRangeSelection(o)&&o.isCollapsed()&&a.isCollapsed()))return 0;s=t._nodeMap;let l=[];for(let c of r)void 0!==(r=s.get(c))&&l.push(r);for(let[u,d]of n)d&&(void 0===(n=s.get(u))||i.$isRootNode(n)||l.push(n));return 0===l.length?0:1<l.length?(t=(n=t._nodeMap).get(a.anchor.key),o=n.get(o.anchor.key),t&&o&&!e._nodeMap.has(t.__key)&&i.$isTextNode(t)&&1===t.__text.length&&1===a.anchor.offset?2:0):(t=l[0],e=e._nodeMap.get(t.__key),i.$isTextNode(e)&&i.$isTextNode(t)&&e.__mode===t.__mode)?(e=e.__text)===(t=t.__text)?0:(a=a.anchor,o=o.anchor,a.key!==o.key||"text"!==a.type)?0:(a=a.offset,o=o.offset,1==(e=t.length-e.length)&&o===a-1?2:-1===e&&o===a+1?3:-1===e&&o===a?4:0):0}(t,r,l,c,e.isComposing()),h=(()=>{var h=null===n||n.editor===e,f=u.has("history-push");if(!f&&h&&u.has("history-merge"))return 0;if(null===t)return 1;var m=r._selection;if(!(0<l.size||0<c.size))return null!==m?0:2;if(!1===f&&0!==p&&p===o&&d<a+s&&h)return 0;if(1===l.size){{f=Array.from(l)[0],h=t._nodeMap.get(f),f=r._nodeMap.get(f),m=t._selection;let g=r._selection,y=!1;i.$isRangeSelection(m)&&i.$isRangeSelection(g)&&(y="element"===m.anchor.type&&"element"===m.focus.type&&"text"===g.anchor.type&&"text"===g.focus.type),h=!!(!y&&i.$isTextNode(h)&&i.$isTextNode(f))&&h.__type===f.__type&&h.__text===f.__text&&h.__mode===f.__mode&&h.__detail===f.__detail&&h.__style===f.__style&&h.__format===f.__format&&h.__parent===f.__parent}if(h)return 0}return 1})();return a=d,o=p,h});r=({editorState:r,prevEditorState:n,dirtyLeaves:s,dirtyElements:a,tags:o})=>{let c=t.current,u=t.redoStack,d=t.undoStack,p=null===c?null:c.editorState;if(null===c||r!==p){if(1===(n=l(n,r,c,s,a,o)))0!==u.length&&(t.redoStack=[],e.dispatchCommand(i.CAN_REDO_COMMAND,!1)),null!==c&&(d.push({...c}),e.dispatchCommand(i.CAN_UNDO_COMMAND,!0));else if(2===n)return;t.current={editor:e,editorState:r}}};let c=n.mergeRegister(e.registerCommand(i.UNDO_COMMAND,()=>{let r=t.redoStack,n=t.undoStack;if(0!==n.length){let s=t.current,a=n.pop();null!==s&&(r.push(s),e.dispatchCommand(i.CAN_REDO_COMMAND,!0)),0===n.length&&e.dispatchCommand(i.CAN_UNDO_COMMAND,!1),t.current=a||null,a&&a.editor.setEditorState(a.editorState,{tag:"historic"})}return!0},i.COMMAND_PRIORITY_EDITOR),e.registerCommand(i.REDO_COMMAND,()=>{let r=t.redoStack;var n=t.undoStack;if(0!==r.length){let s=t.current;null!==s&&(n.push(s),e.dispatchCommand(i.CAN_UNDO_COMMAND,!0)),n=r.pop(),0===r.length&&e.dispatchCommand(i.CAN_REDO_COMMAND,!1),t.current=n||null,n&&n.editor.setEditorState(n.editorState,{tag:"historic"})}return!0},i.COMMAND_PRIORITY_EDITOR),e.registerCommand(i.CLEAR_EDITOR_COMMAND,()=>(t.undoStack=[],t.redoStack=[],t.current=null,!1),i.COMMAND_PRIORITY_EDITOR),e.registerCommand(i.CLEAR_HISTORY_COMMAND,()=>(t.undoStack=[],t.redoStack=[],t.current=null,e.dispatchCommand(i.CAN_REDO_COMMAND,!1),e.dispatchCommand(i.CAN_UNDO_COMMAND,!1),!0),i.COMMAND_PRIORITY_EDITOR),e.registerUpdateListener(r)),u=e.registerUpdateListener(r);return()=>{c(),u()}}},87592:function(e,t,r){"use strict";let n=r(64478);e.exports=n},64478:function(e,t,r){"use strict";var n=r(89408),i=r(32998);let s=new Set(["STYLE","SCRIPT"]);t.$generateHtmlFromNodes=function(e,t){if("undefined"==typeof document||"undefined"==typeof window)throw Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");let r=document.createElement("div"),s=i.$getRoot().getChildren();for(let a=0;a<s.length;a++)!function e(t,r,s,a=null){let o=null==a||r.isSelected(a),l=i.$isElementNode(r)&&r.excludeFromCopy("html");var c=r;null!==a&&(c=n.$cloneWithProperties(r),c=i.$isTextNode(c)&&null!=a?n.$sliceSelectedTextNodeContent(a,c):c);let u=i.$isElementNode(c)?c.getChildren():[],{element:d,after:p}=c.exportDOM(t);if(!d)return!1;let h=document.createDocumentFragment();for(let f=0;f<u.length;f++){let m=u[f],g=e(t,m,h,a);!o&&i.$isElementNode(r)&&g&&r.extractWithChild(m,a,"html")&&(o=!0)}return o&&!l?(d.append(h),s.append(d),p&&(t=p.call(c,d))&&d.replaceWith(t)):s.append(h),o}(e,s[a],r,t);return r.innerHTML},t.$generateNodesFromDOM=function(e,t){t=t.body?t.body.childNodes:[];let r=[];for(let n=0;n<t.length;n++){var a=t[n];s.has(a.nodeName)||null!==(a=function e(t,r,n=new Map,a){let o=[];if(s.has(t.nodeName))return o;let l=null;var c,{nodeName:u}=t,d=r._htmlConversions.get(u.toLowerCase());if(u=null,void 0!==d)for(c of d)null!==(d=c(t))&&(null===u||u.priority<d.priority)&&(u=d);if(u=(c=null!==u?u.conversion:null)?c(t):null,c=null,null!==u){if(c=u.after,null!==(l=Array.isArray(d=u.node)?d[d.length-1]:d)){for(var[,p]of n)if(!(l=p(l,a)))break;l&&o.push(...Array.isArray(d)?d:[l])}null!=u.forChild&&n.set(t.nodeName,u.forChild)}for(p=0,t=t.childNodes,a=[];p<t.length;p++)a.push(...e(t[p],r,new Map(n),l));return null!=c&&(a=c(a)),null==l?o=o.concat(a):i.$isElementNode(l)&&l.append(...a),o}(a,e))&&(r=r.concat(a))}return r}},73435:function(e,t,r){"use strict";let n=r(13906);e.exports=n},13906:function(e,t,r){"use strict";var n=r(76969),i=r(32998);let s=new Set(["http:","https:","mailto:","sms:","tel:"]);class a extends i.ElementNode{static getType(){return"link"}static clone(e){return new a(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}constructor(e,t={},r){super(r);let{target:n=null,rel:i=null,title:s=null}=t;this.__url=e,this.__target=n,this.__rel=i,this.__title=s}createDOM(e){let t=document.createElement("a");return t.href=this.sanitizeUrl(this.__url),null!==this.__target&&(t.target=this.__target),null!==this.__rel&&(t.rel=this.__rel),null!==this.__title&&(t.title=this.__title),n.addClassNamesToElement(t,e.theme.link),t}updateDOM(e,t){let r=this.__url,n=this.__target,i=this.__rel,s=this.__title;return r!==e.__url&&(t.href=r),n!==e.__target&&(n?t.target=n:t.removeAttribute("target")),i!==e.__rel&&(i?t.rel=i:t.removeAttribute("rel")),s!==e.__title&&(s?t.title=s:t.removeAttribute("title")),!1}static importDOM(){return{a:()=>({conversion:o,priority:1})}}static importJSON(e){let t=l(e.url,{rel:e.rel,target:e.target,title:e.title});return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}sanitizeUrl(e){try{let t=new URL(e);if(!s.has(t.protocol))return"about:blank"}catch{}return e}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),type:"link",url:this.getURL(),version:1}}getURL(){return this.getLatest().__url}setURL(e){this.getWritable().__url=e}getTarget(){return this.getLatest().__target}setTarget(e){this.getWritable().__target=e}getRel(){return this.getLatest().__rel}setRel(e){this.getWritable().__rel=e}getTitle(){return this.getLatest().__title}setTitle(e){this.getWritable().__title=e}insertNewAfter(e,t=!0){return e=this.getParentOrThrow().insertNewAfter(e,t),i.$isElementNode(e)?(t=l(this.__url,{rel:this.__rel,target:this.__target,title:this.__title}),e.append(t),t):null}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(e,t){if(!i.$isRangeSelection(t))return!1;e=t.anchor.getNode();let r=t.focus.getNode();return this.isParentOf(e)&&this.isParentOf(r)&&0<t.getTextContent().length}}function o(e){let t=null;if(n.isHTMLAnchorElement(e)){let r=e.textContent;null!==r&&""!==r&&(t=l(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function l(e,t){return i.$applyNodeReplacement(new a(e,t))}function c(e){return e instanceof a}class u extends a{static getType(){return"autolink"}static clone(e){return new u(e.__url,{rel:e.__rel,target:e.__target,title:e.__title},e.__key)}static importJSON(e){let t=d(e.url,{rel:e.rel,target:e.target,title:e.title});return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),type:"autolink",version:1}}insertNewAfter(e,t=!0){return e=this.getParentOrThrow().insertNewAfter(e,t),i.$isElementNode(e)?(t=d(this.__url,{rel:this._rel,target:this.__target,title:this.__title}),e.append(t),t):null}}function d(e,t){return i.$applyNodeReplacement(new u(e,t))}let p=i.createCommand("TOGGLE_LINK_COMMAND");t.$createAutoLinkNode=d,t.$createLinkNode=l,t.$isAutoLinkNode=function(e){return e instanceof u},t.$isLinkNode=c,t.AutoLinkNode=u,t.LinkNode=a,t.TOGGLE_LINK_COMMAND=p,t.toggleLink=function(e,t={}){let{target:r,title:n}=t,s=void 0===t.rel?"noreferrer":t.rel;if(t=i.$getSelection(),i.$isRangeSelection(t)){if(t=t.extract(),null===e)t.forEach(e=>{if(c(e=e.getParent())){let t=e.getChildren();for(let r=0;r<t.length;r++)e.insertBefore(t[r]);e.remove()}});else{if(1===t.length){var a=t[0];if(null!==(a=c(a)?a:function(e,t){for(;null!==e&&null!==(e=e.getParent())&&!t(e););return e}(a,c))){a.setURL(e),void 0!==r&&a.setTarget(r),null!==s&&a.setRel(s),void 0!==n&&a.setTitle(n);return}}let o=null,u=null;t.forEach(t=>{var a=t.getParent();if(a!==u&&null!==a&&(!i.$isElementNode(t)||t.isInline())){if(c(a))u=a,a.setURL(e),void 0!==r&&a.setTarget(r),null!==s&&u.setRel(s),void 0!==n&&u.setTitle(n);else if(a.is(o)||(o=a,u=l(e,{rel:s,target:r}),c(a)?null===t.getPreviousSibling()?a.insertBefore(u):a.insertAfter(u):t.insertBefore(u)),c(t)){if(!t.is(u)){if(null!==u){a=t.getChildren();for(let d=0;d<a.length;d++)u.append(a[d])}t.remove()}}else null!==u&&u.append(t)}})}}}},44783:function(e,t,r){"use strict";let n=r(19206);e.exports=n},19206:function(e,t,r){"use strict";var n=r(32998),i=r(76969);function s(e){let t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function a(e){let t=1;for(e=e.getParent();null!=e;){if(b(e)){if(C(e=e.getParent())){t++,e=e.getParent();continue}s(40)}break}return t}function o(e){C(e=e.getParent())||s(40);let t=e;for(;null!==t;)C(t=t.getParent())&&(e=t);return e}function l(e){return b(e)&&C(e.getFirstChild())}function c(e){return v().append(e)}function u(e,t){return b(e)&&(0===t.length||1===t.length&&e.is(t[0])&&0===e.getChildrenSize())}function d(e,t){e.splice(e.getChildrenSize(),0,t)}function p(e,t){if(C(e))return e;let r=e.getPreviousSibling(),n=e.getNextSibling(),i=v();return(i.setFormat(e.getFormatType()),i.setIndent(e.getIndent()),d(i,e.getChildren()),C(r)&&t===r.getListType())?(r.append(i),e.remove(),C(n)&&t===n.getListType()&&(d(r,n.getChildren()),n.remove()),r):C(n)&&t===n.getListType()?(n.getFirstChildOrThrow().insertBefore(i),e.remove(),n):((t=E(t)).append(i),e.replace(t),h(t),t)}function h(e,t){if(void 0!==(e=t||e.getChildren()))for(t=0;t<e.length;t++){let r=e[t];if(b(r)){let n=r.getValue();var i=r,a=i.getParent(),o=1;for(null!=a&&(C(a)?o=a.getStart():s(44)),i=i.getPreviousSiblings(),a=0;a<i.length;a++){let l=i[a];b(l)&&!C(l.getFirstChild())&&o++}n!==o&&r.setValue(o)}}}class f extends n.ElementNode{static getType(){return"listitem"}static clone(e){return new f(e.__value,e.__checked,e.__key)}constructor(e,t,r){super(r),this.__value=void 0===e?1:e,this.__checked=t}createDOM(e){let t=document.createElement("li"),r=this.getParent();return C(r)&&"check"===r.getListType()&&g(t,this,null),t.value=this.__value,m(t,e.theme,this),t}updateDOM(e,t,r){let n=this.getParent();return C(n)&&"check"===n.getListType()&&g(t,this,e),t.value=this.__value,m(t,r.theme,this),!1}static transform(){return e=>{let t=e.getParent();C(t)&&(h(t),"check"!==t.getListType()&&null!=e.getChecked()&&e.setChecked(void 0))}}static importDOM(){return{li:()=>({conversion:y,priority:0})}}static importJSON(e){let t=v();return t.setChecked(e.checked),t.setValue(e.value),t.setFormat(e.format),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),type:"listitem",value:this.getValue(),version:1}}append(...e){for(let t=0;t<e.length;t++){let r=e[t];if(n.$isElementNode(r)&&this.canMergeWith(r)){let i=r.getChildren();this.append(...i),r.remove()}else super.append(r)}return this}replace(e,t){if(b(e))return super.replace(e);this.setIndent(0);let r=this.getParentOrThrow();if(!C(r))return e;if(r.__first===this.getKey())r.insertBefore(e);else if(r.__last===this.getKey())r.insertAfter(e);else{let n=E(r.getListType()),i=this.getNextSibling();for(;i;){let s=i;i=i.getNextSibling(),n.append(s)}r.insertAfter(e),e.insertAfter(n)}return t&&this.getChildren().forEach(t=>{e.append(t)}),this.remove(),0===r.getChildrenSize()&&r.remove(),e}insertAfter(e,t=!0){var r=this.getParentOrThrow();C(r)||s(39);var n=this.getNextSiblings();if(b(e))return t=super.insertAfter(e,t),C(e=e.getParentOrThrow())&&h(e),t;if(C(e)){for(r=e,n=(e=e.getChildren()).length-1;0<=n;n--)r=e[n],this.insertAfter(r,t);return r}if(r.insertAfter(e,t),0!==n.length){let i=E(r.getListType());n.forEach(e=>i.append(e)),e.insertAfter(i,t)}return e}remove(e){let t=this.getPreviousSibling(),r=this.getNextSibling();super.remove(e),t&&r&&l(t)&&l(r)?(function e(t,r){var n=t.getLastChild();let i=r.getFirstChild();n&&i&&l(n)&&l(i)&&(e(n.getFirstChild(),i.getFirstChild()),i.remove()),0<(n=r.getChildren()).length&&(t.append(...n),h(t)),r.remove()}(t.getFirstChild(),r.getFirstChild()),r.remove()):r&&C(e=r.getParent())&&h(e)}insertNewAfter(e,t=!0){return e=v(null==this.__checked&&void 0),this.insertAfter(e,t),e}collapseAtStart(e){let t=n.$createParagraphNode();this.getChildren().forEach(e=>t.append(e));var r=this.getParentOrThrow(),i=r.getParentOrThrow();let s=b(i);return 1===r.getChildrenSize()?s?(r.remove(),i.select()):(r.insertBefore(t),r.remove(),r=e.anchor,e=e.focus,i=t.getKey(),"element"===r.type&&r.getNode().is(this)&&r.set(i,r.offset,"element"),"element"===e.type&&e.getNode().is(this)&&e.set(i,e.offset,"element")):(r.insertBefore(t),this.remove()),!0}getValue(){return this.getLatest().__value}setValue(e){this.getWritable().__value=e}getChecked(){return this.getLatest().__checked}setChecked(e){this.getWritable().__checked=e}toggleChecked(){this.setChecked(!this.__checked)}getIndent(){var e=this.getParent();if(null===e)return this.getLatest().__indent;e=e.getParentOrThrow();let t=0;for(;b(e);)e=e.getParentOrThrow().getParentOrThrow(),t++;return t}setIndent(e){"number"==typeof e&&-1<e||s(117);let t=this.getIndent();for(;t!==e;)if(t<e){e:{var r=new Set;if(l(this)||r.has(this.getKey()))break e;let n=this.getParent();var i=this.getNextSibling(),a=this.getPreviousSibling();if(l(i)&&l(a)){if(C(a=a.getFirstChild())){a.append(this);var o=i.getFirstChild();C(o)&&(d(a,o=o.getChildren()),i.remove(),r.add(i.getKey())),h(a)}}else l(i)?C(i=i.getFirstChild())&&(null!==(r=i.getFirstChild())&&r.insertBefore(this),h(i)):l(a)?C(i=a.getFirstChild())&&(i.append(this),h(i)):C(n)&&(r=v(),o=E(n.getListType()),r.append(o),o.append(this),a?a.insertAfter(r):i?i.insertBefore(r):n.append(r),h(o));C(n)&&h(n)}t++}else(function(e){if(!l(e)){var t=e.getParent(),r=t?t.getParent():void 0,n=r?r.getParent():void 0;if(C(n)&&b(r)&&C(t)){var i=t?t.getFirstChild():void 0,s=t?t.getLastChild():void 0;if(e.is(i))r.insertBefore(e),t.isEmpty()&&r.remove();else if(e.is(s))r.insertAfter(e),t.isEmpty()&&r.remove();else{var a=t.getListType();i=v();let o=E(a);i.append(o),e.getPreviousSiblings().forEach(e=>o.append(e)),s=v(),a=E(a),s.append(a),d(a,e.getNextSiblings()),r.insertBefore(i),r.insertAfter(s),r.replace(e)}h(t),h(n)}}})(this),t--;return this}insertBefore(e){if(b(e)){let t=this.getParentOrThrow();C(t)&&h(t,this.getNextSiblings())}return super.insertBefore(e)}canInsertAfter(e){return b(e)}canReplaceWith(e){return b(e)}canMergeWith(e){return n.$isParagraphNode(e)||b(e)}extractWithChild(e,t){if(!n.$isRangeSelection(t))return!1;e=t.anchor.getNode();let r=t.focus.getNode();return this.isParentOf(e)&&this.isParentOf(r)&&this.getTextContent().length===t.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return E("bullet")}}function m(e,t,r){let n=[],s=[];var a=(t=t.list)?t.listitem:void 0;if(t&&t.nested)var o=t.nested.listitem;if(void 0!==a&&(a=a.split(" "),n.push(...a)),t){a=C(a=r.getParent())&&"check"===a.getListType();let l=r.getChecked();a&&!l||s.push(t.listitemUnchecked),a&&l||s.push(t.listitemChecked),a&&n.push(l?t.listitemChecked:t.listitemUnchecked)}void 0!==o&&(o=o.split(" "),r.getChildren().some(e=>C(e))?n.push(...o):s.push(...o)),0<s.length&&i.removeClassNamesFromElement(e,...s),0<n.length&&i.addClassNamesToElement(e,...n)}function g(e,t,r){C(t.getFirstChild())?(e.removeAttribute("role"),e.removeAttribute("tabIndex"),e.removeAttribute("aria-checked")):(e.setAttribute("role","checkbox"),e.setAttribute("tabIndex","-1"),r&&t.__checked===r.__checked||e.setAttribute("aria-checked",t.getChecked()?"true":"false"))}function y(e){return{node:v(e=i.isHTMLElement(e)&&"true"===e.getAttribute("aria-checked"))}}function v(e){return n.$applyNodeReplacement(new f(void 0,e))}function b(e){return e instanceof f}class w extends n.ElementNode{static getType(){return"list"}static clone(e){return new w(e.__listType||T[e.__tag],e.__start,e.__key)}constructor(e,t,r){super(r),this.__listType=e=T[e]||e,this.__tag="number"===e?"ol":"ul",this.__start=t}getTag(){return this.__tag}setListType(e){let t=this.getWritable();t.__listType=e,t.__tag="number"===e?"ol":"ul"}getListType(){return this.__listType}getStart(){return this.__start}createDOM(e){let t=document.createElement(this.__tag);return 1!==this.__start&&t.setAttribute("start",String(this.__start)),t.__lexicalListType=this.__listType,_(t,e.theme,this),t}updateDOM(e,t,r){return e.__tag!==this.__tag||(_(t,r.theme,this),!1)}static importDOM(){return{ol:()=>({conversion:S,priority:0}),ul:()=>({conversion:S,priority:0})}}static importJSON(e){let t=E(e.listType,e.start);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportDOM(e){return{element:e}=super.exportDOM(e),e&&(1!==this.__start&&e.setAttribute("start",String(this.__start)),"check"===this.__listType&&e.setAttribute("__lexicalListType","check")),{element:e}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag(),type:"list",version:1}}canBeEmpty(){return!1}canIndent(){return!1}append(...e){for(let t=0;t<e.length;t++){var r=e[t];if(b(r))super.append(r);else{let i=v();C(r)||n.$isElementNode(r)&&(r=n.$createTextNode(r.getTextContent())),i.append(r),super.append(i)}}return h(this),this}extractWithChild(e){return b(e)}}function _(e,t,r){let n=[],s=[];var o=t.list;if(void 0!==o){let l=o[`${r.__tag}Depth`]||[],c=(t=a(r)-1)%l.length;var u=l[c];let d=o[r.__tag],p;if(void 0!==(o=o.nested)&&o.list&&(p=o.list),void 0!==d&&n.push(d),void 0!==u)for(u=u.split(" "),n.push(...u),u=0;u<l.length;u++)u!==c&&s.push(r.__tag+u);void 0!==p&&(r=p.split(" "),1<t?n.push(...r):s.push(...r))}0<s.length&&i.removeClassNamesFromElement(e,...s),0<n.length&&i.addClassNamesToElement(e,...n)}function x(e){let t=[];for(let r=0;r<e.length;r++){var n=e[r];b(n)?(t.push(n),1<(n=n.getChildren()).length&&n.forEach(e=>{C(e)&&t.push(c(e))})):t.push(c(n))}return t}function S(e){let t=e.nodeName.toLowerCase(),r=null;return"ol"===t?r=E("number",e.start):"ul"===t&&(r=i.isHTMLElement(e)&&"check"===e.getAttribute("__lexicallisttype")?E("check"):E("bullet")),{after:x,node:r}}let T={ol:"number",ul:"bullet"};function E(e,t=1){return n.$applyNodeReplacement(new w(e,t))}function C(e){return e instanceof w}let k=n.createCommand("INSERT_UNORDERED_LIST_COMMAND"),R=n.createCommand("INSERT_ORDERED_LIST_COMMAND"),P=n.createCommand("INSERT_CHECK_LIST_COMMAND"),D=n.createCommand("REMOVE_LIST_COMMAND");t.$createListItemNode=v,t.$createListNode=E,t.$getListDepth=a,t.$handleListInsertParagraph=function(){var e=n.$getSelection();if(!n.$isRangeSelection(e)||!e.isCollapsed()||!b(e=e.anchor.getNode())||""!==e.getTextContent())return!1;var t=o(e),r=e.getParent();C(r)||s(40);let i=r.getParent(),a;if(n.$isRootOrShadowRoot(i))a=n.$createParagraphNode(),t.insertAfter(a);else{if(!b(i))return!1;a=v(),i.insertAfter(a)}if(a.select(),0<(t=e.getNextSiblings()).length){let l=E(r.getListType());n.$isParagraphNode(a)?a.insertAfter(l):((r=v()).append(l),a.insertAfter(r)),t.forEach(e=>{e.remove(),l.append(e)})}return function(e){for(;null==e.getNextSibling()&&null==e.getPreviousSibling();){let t=e.getParent();if(null==t||!b(e)&&!C(e))break;e=t}e.remove()}(e),!0},t.$isListItemNode=b,t.$isListNode=C,t.INSERT_CHECK_LIST_COMMAND=P,t.INSERT_ORDERED_LIST_COMMAND=R,t.INSERT_UNORDERED_LIST_COMMAND=k,t.ListItemNode=f,t.ListNode=w,t.REMOVE_LIST_COMMAND=D,t.insertList=function(e,t){e.update(()=>{var e=n.$getSelection();if(n.$isRangeSelection(e)||n.DEPRECATED_$isGridSelection(e)){var r=e.getNodes(),i=(e=e.anchor.getNode()).getParent();if(u(e,r))r=E(t),n.$isRootOrShadowRoot(i)?(e.replace(r),i=v(),n.$isElementNode(e)&&(i.setFormat(e.getFormatType()),i.setIndent(e.getIndent())),r.append(i)):b(e)&&(d(r,(e=e.getParentOrThrow()).getChildren()),e.replace(r));else for(e=new Set,i=0;i<r.length;i++){var s=r[i];if(n.$isElementNode(s)&&s.isEmpty()&&!e.has(s.getKey()))p(s,t);else if(n.$isLeafNode(s))for(s=s.getParent();null!=s;){let a=s.getKey();if(C(s)){if(!e.has(a)){var o=E(t);d(o,s.getChildren()),s.replace(o),h(o),e.add(a)}break}if(o=s.getParent(),n.$isRootOrShadowRoot(o)&&!e.has(a)){e.add(a),p(s,t);break}s=o}}}})},t.removeList=function(e){e.update(()=>{let e=n.$getSelection();if(n.$isRangeSelection(e)){var t=new Set,r=e.getNodes(),s=e.anchor.getNode();if(u(s,r))t.add(o(s));else for(s=0;s<r.length;s++){var a=r[s];n.$isLeafNode(a)&&null!=(a=i.$getNearestNodeOfType(a,f))&&t.add(o(a))}for(let l of t){for(let c of(t=l,r=function e(t){let r=[];t=t.getChildren().filter(b);for(let n=0;n<t.length;n++){let i=t[n],s=i.getFirstChild();C(s)?r=r.concat(e(s)):r.push(i)}return r}(l)))d(r=n.$createParagraphNode(),c.getChildren()),t.insertAfter(r),t=r,c.__key===e.anchor.key&&e.anchor.set(r.getKey(),0,"element"),c.__key===e.focus.key&&e.focus.set(r.getKey(),0,"element"),c.remove();l.remove()}}})}},36571:function(e,t,r){"use strict";let n=r(16992);e.exports=n},16992:function(e,t,r){"use strict";var n=r(32998),i=r(23277),s=r(44783),a=r(2903),o=r(76969),l=r(73435);function c(e,t){let r={};for(let n of e)r[e=t(n)]?r[e].push(n):r[e]=[n];return r}function u(e){return{element:(e=c(e,e=>e.type)).element||[],textFormat:e["text-format"]||[],textMatch:e["text-match"]||[]}}let d=/[!-/:-@[-`{-~\s]/;function p(e,t,r){let i=[];e=e.getChildren();e:for(let s of e){for(let a of r)if(null!=(e=a.export(s,e=>p(e,t,r),(e,r)=>h(e,r,t)))){i.push(e);continue e}n.$isLineBreakNode(s)?i.push("\n"):n.$isTextNode(s)?i.push(h(s,s.getTextContent(),t)):n.$isElementNode(s)?i.push(p(s,t,r)):n.$isDecoratorNode(s)&&i.push(s.getTextContent())}return i.join("")}function h(e,t,r){let n=t.trim(),i=n,s=new Set;for(let a of r){r=a.format[0];let o=a.tag;if(m(e,r)&&!s.has(r)){s.add(r);var l=f(e,!0);m(l,r)||(i=o+i),m(l=f(e,!1),r)||(i+=o)}}return t.replace(n,i)}function f(e,t){let r=t?e.getPreviousSibling():e.getNextSibling();for(r||(e=e.getParentOrThrow()).isInline()&&(r=t?e.getPreviousSibling():e.getNextSibling());r;){if(n.$isElementNode(r)){if(!r.isInline())break;if(e=t?r.getLastDescendant():r.getFirstDescendant(),n.$isTextNode(e))return e;r=t?r.getPreviousSibling():r.getNextSibling()}if(n.$isTextNode(r))return r;if(!n.$isElementNode(r))break}return null}function m(e,t){return n.$isTextNode(e)&&e.hasFormat(t)}let g="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,y=g&&"documentMode"in document?document.documentMode:null;g&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),g&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),g&&"InputEvent"in window&&!y&&new window.InputEvent("input");let v=g&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),b=g&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,w=g&&/^(?=.*Chrome).*/i.test(navigator.userAgent),_=g&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!w,x=/^\s{0,3}$/,S=/^```(\w{1,10})?\s?$/;function T(e,t,r){let n=r.length;for(;t>=n;t--){let i=t-n;if(E(e,i,r,0,n)&&" "!==e[i+n])return i}return -1}function E(e,t,r,n,i){for(let s=0;s<i;s++)if(e[t+s]!==r[n+s])return!1;return!0}let C=e=>(t,r,n)=>{(n=e(n)).append(...r),t.replace(n),n.select(0,0)},k=e=>(t,r,n)=>{var i=t.getPreviousSibling(),a=t.getNextSibling();let o=s.$createListItemNode("check"===e?"x"===n[3]:void 0);s.$isListNode(a)&&a.getListType()===e?(null!==(i=a.getFirstChild())?i.insertBefore(o):a.append(o),t.remove()):s.$isListNode(i)&&i.getListType()===e?(i.append(o),t.remove()):((a=s.$createListNode(e,"number"===e?Number(n[2]):void 0)).append(o),t.replace(a)),o.append(...r),o.select(0,0),(t=Math.floor(n[1].length/4))&&o.setIndent(t)},R=(e,t,r)=>{let n=[];var i=e.getChildren();let a=0;for(let o of i)if(s.$isListItemNode(o)){if(1===o.getChildrenSize()&&(i=o.getFirstChild(),s.$isListNode(i))){n.push(R(i,t,r+1));continue}i=" ".repeat(4*r);var l=e.getListType();l="number"===l?`${e.getStart()+a}. `:"check"===l?`- [${o.getChecked()?"x":" "}] `:"- ",n.push(i+l+t(o)),a++}return n.join("\n")},P={dependencies:[a.HeadingNode],export:(e,t)=>{if(!a.$isHeadingNode(e))return null;let r=Number(e.getTag().slice(1));return"#".repeat(r)+" "+t(e)},regExp:/^(#{1,6})\s/,replace:C(e=>a.$createHeadingNode("h"+e[1].length)),type:"element"},D={dependencies:[a.QuoteNode],export:(e,t)=>{if(!a.$isQuoteNode(e))return null;for(let r of(e=t(e).split("\n"),t=[],e))t.push("> "+r);return t.join("\n")},regExp:/^>\s/,replace:(e,t,r,i)=>{if(i&&(r=e.getPreviousSibling(),a.$isQuoteNode(r))){r.splice(r.getChildrenSize(),0,[n.$createLineBreakNode(),...t]),r.select(0,0),e.remove();return}(r=a.$createQuoteNode()).append(...t),e.replace(r),r.select(0,0)},type:"element"},A={dependencies:[i.CodeNode],export:e=>{if(!i.$isCodeNode(e))return null;let t=e.getTextContent();return"```"+(e.getLanguage()||"")+(t?"\n"+t:"")+"\n```"},regExp:/^```(\w{1,10})?\s/,replace:C(e=>i.$createCodeNode(e?e[1]:void 0)),type:"element"},N={dependencies:[s.ListNode,s.ListItemNode],export:(e,t)=>s.$isListNode(e)?R(e,t,0):null,regExp:/^(\s*)[-*+]\s/,replace:k("bullet"),type:"element"},L={dependencies:[s.ListNode,s.ListItemNode],export:(e,t)=>s.$isListNode(e)?R(e,t,0):null,regExp:/^(\s*)(?:-\s)?\s?(\[(\s|x)?\])\s/i,replace:k("check"),type:"element"},O={dependencies:[s.ListNode,s.ListItemNode],export:(e,t)=>s.$isListNode(e)?R(e,t,0):null,regExp:/^(\s*)(\d{1,})\.\s/,replace:k("number"),type:"element"},I={format:["code"],tag:"`",type:"text-format"},M={format:["highlight"],tag:"==",type:"text-format"},j={format:["bold","italic"],tag:"***",type:"text-format"},F={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},$={format:["bold"],tag:"**",type:"text-format"},B={format:["bold"],intraword:!1,tag:"__",type:"text-format"},U={format:["strikethrough"],tag:"~~",type:"text-format"},q={format:["italic"],tag:"*",type:"text-format"},z={format:["italic"],intraword:!1,tag:"_",type:"text-format"},V={dependencies:[l.LinkNode],export:(e,t,r)=>{if(!l.$isLinkNode(e))return null;t=(t=e.getTitle())?`[${e.getTextContent()}](${e.getURL()} "${t}")`:`[${e.getTextContent()}](${e.getURL()})`;let i=e.getFirstChild();return 1===e.getChildrenSize()&&n.$isTextNode(i)?r(i,t):t},importRegExp:/(?:\[([^[]+)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[([^[]+)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(e,t)=>{let[,r,i,s]=t;t=l.$createLinkNode(i,{title:s});let a=n.$createTextNode(r);a.setFormat(e.getFormat()),t.append(a),e.replace(t)},trigger:")",type:"text-match"},H=[P,D,A,N,O],W=[I,j,F,$,B,M,q,z,U],Z=[V],K=[...H,...W,...Z];t.$convertFromMarkdownString=function(e,t=K,r){let l,c;return(c=function(e){let t={},r={},n=[];for(let i of e){({tag:e}=i),t[e]=i;let s=e.replace(/(\*|\^|\+)/g,"\\$1");n.push(s),r[e]=v||b||_?RegExp(`(${s})(?![${s}\\s])(.*?[^${s}\\s])${s}(?!${s})`):RegExp(`(?<![\\\\${s}])(${s})((\\\\${s})?.*?[^${s}\\s](\\\\${s})?)((?<!\\\\)|(?<=\\\\\\\\))(${s})(?![\\\\${s}])`)}return{fullMatchRegExpByTag:r,openTagsRegExp:RegExp((v||b||_?"":"(?<![\\\\])")+"("+n.join("|")+")","g"),transformersByTag:t}}((l=u(t)).textFormat),(e,t)=>{var r=(e=e.split("\n")).length;(t=t||n.$getRoot()).clear();for(let u=0;u<r;u++){var p=e[u];e:{var h=e,f=u,m=t,g=h[f].match(S);if(g){for(var y=f,v=h.length;++y<v;)if(h[y].match(S)){g=i.$createCodeNode(g[1]),h=n.$createTextNode(h.slice(f+1,y).join("\n")),g.append(h),m.append(g),m=[g,y];break e}}m=[null,f]}let[b,w]=m;if(null!=b)u=w;else{m=p,v=t;var _=l.element;for(let{regExp:T,replace:E}of(y=c,h=l.textMatch,f=m.trim(),g=n.$createTextNode(f),(p=n.$createParagraphNode()).append(g),v.append(p),_))if(v=m.match(T)){g.setTextContent(m.slice(v[0].length)),E(p,[g],v,!0);break}(function e(t,r,n){var i,s,a=t.getTextContent();let o=function(e,t){var r=e.match(t.openTagsRegExp);if(null==r)return null;for(let n of r){var i=n.replace(/^\s/,"");if(null!=(r=t.fullMatchRegExpByTag[i])&&(r=e.match(r),i=t.transformersByTag[i],null!=r&&null!=i)){if(!1!==i.intraword)return r;var{index:s=0}=r;if(i=e[s-1],s=e[s+r[0].length],!(i&&!d.test(i)||s&&!d.test(s)))return r}}return null}(a,r);if(o){if(o[0]===a)var l=t;else{let c=(a=o.index||0)+o[0].length;0===a?[l,i]=t.splitText(c):[s,l,i]=t.splitText(a,c)}if(l.setTextContent(o[2]),t=r.transformersByTag[o[1]])for(let u of t.format)l.hasFormat(u)||l.toggleFormat(u);l.hasFormat("code")||e(l,r,n),s&&e(s,r,n),i&&e(i,r,n)}else(function e(t,r){e:for(;t;){for(let n of r){let i=t.getTextContent().match(n.importRegExp);if(!i)continue;let s=i.index||0,a=s+i[0].length,o,l,c;0===s?[o,t]=t.splitText(a):[l,o,c]=t.splitText(s,a),l&&e(l,r),c&&(t=c),n.replace(o,i);continue e}break}})(t,n)})(g,y,h),p.isAttached()&&0<f.length&&(m=p.getPreviousSibling(),n.$isParagraphNode(m)||a.$isQuoteNode(m)||s.$isListNode(m))&&(y=m,s.$isListNode(m)&&(y=null==(m=m.getLastDescendant())?null:o.$findMatchingParent(m,s.$isListItemNode)),null!=y&&0<y.getTextContentSize()&&(y.splice(y.getChildrenSize(),0,[n.$createLineBreakNode(),...p.getChildren()]),p.remove()))}}for(let C of e=t.getChildren())e=C,(e=!!n.$isParagraphNode(e)&&(null==(r=e.getFirstChild())||1===e.getChildrenSize()&&n.$isTextNode(r)&&x.test(r.getTextContent())))&&C.remove();null!==n.$getSelection()&&t.selectEnd()})(e,r)},t.$convertToMarkdownString=function(e=K,t){let r,i;return(i=(r=u(e)).textFormat.filter(e=>1===e.format.length),e=>{let t=[];for(let s of e=(e||n.$getRoot()).getChildren())null!=(e=function(e,t,r,i){for(let s of t)if(null!=(t=s.export(e,e=>p(e,r,i))))return t;return n.$isElementNode(e)?p(e,r,i):n.$isDecoratorNode(e)?e.getTextContent():null}(s,r.element,i,r.textMatch))&&t.push(e);return t.join("\n\n")})(t)},t.BOLD_ITALIC_STAR=j,t.BOLD_ITALIC_UNDERSCORE=F,t.BOLD_STAR=$,t.BOLD_UNDERSCORE=B,t.CHECK_LIST=L,t.CODE=A,t.ELEMENT_TRANSFORMERS=H,t.HEADING=P,t.HIGHLIGHT=M,t.INLINE_CODE=I,t.ITALIC_STAR=q,t.ITALIC_UNDERSCORE=z,t.LINK=V,t.ORDERED_LIST=O,t.QUOTE=D,t.STRIKETHROUGH=U,t.TEXT_FORMAT_TRANSFORMERS=W,t.TEXT_MATCH_TRANSFORMERS=Z,t.TRANSFORMERS=K,t.UNORDERED_LIST=N,t.registerMarkdownShortcuts=function(e,t=K){let r=u(t),s=c(r.textFormat,({tag:e})=>e[e.length-1]),a=c(r.textMatch,({trigger:e})=>e);for(let o of t)if("element"===(t=o.type)||"text-match"===t){for(let l of t=o.dependencies)if(!e.hasNode(l))throw Error(`MarkdownShortcuts: missing dependency ${l.getType()} for transformer. Ensure node dependency is included in editor initial config.`)}return e.registerUpdateListener(({tags:t,dirtyLeaves:o,editorState:l,prevEditorState:c})=>{if(!t.has("historic")&&!e.isComposing()){var u=l.read(n.$getSelection);if(t=c.read(n.$getSelection),n.$isRangeSelection(t)&&n.$isRangeSelection(u)&&u.isCollapsed()){c=u.anchor.key;var p=u.anchor.offset,h=l._nodeMap.get(c);n.$isTextNode(h)&&o.has(c)&&(1===p||!(p>t.anchor.offset+1))&&e.update(()=>{if(!h.hasFormat("code")){var e=h.getParent();if(null!==e&&!i.$isCodeNode(e)){var t=u.anchor.offset;t:{var o=r.element,l=e.getParent();if(n.$isRootOrShadowRoot(l)&&e.getFirstChild()===h&&" "===(l=h.getTextContent())[t-1]){for(let{regExp:c,replace:p}of o)if((o=l.match(c))&&o[0].length===t){l=h.getNextSiblings();let[f,m]=h.splitText(t);f.remove(),p(e,l=m?[m,...l]:l,o,!1),e=!0;break t}}e=!1}if(!e){t:{if(null!=(e=a[(o=h.getTextContent())[t-1]])){for(y of(t<o.length&&(o=o.slice(0,t)),e))if(null!==(e=o.match(y.regExp))){l=(o=e.index||0)+e[0].length;var g=void 0;0===o?[g]=h.splitText(l):[,g]=h.splitText(o,l),g.selectNext(0,0),y.replace(g,e);var y=!0;break t}}y=!1}if(!y)t:{var v=(l=h.getTextContent())[--t];if(y=s[v])for(let b of y){var{tag:w}=b;let _=t-(y=w.length)+1;if(!(1<y&&!E(l,_,w,0,y)||" "===l[_-1])&&(g=l[t+1],!1!==b.intraword||!g||d.test(g))){e=g=h,o=T(l,_,w);for(var x=e;0>o&&(x=x.getPreviousSibling())&&!n.$isLineBreakNode(x);)n.$isTextNode(x)&&(o=x.getTextContent(),e=x,o=T(o,o.length,w));if(!(0>o||e===g&&o+y===_||(w=e.getTextContent(),0<o&&w[o-1]===v||(x=w[o-1],!1===b.intraword&&x&&!d.test(x))))){for(let S of(l=(l=g.getTextContent()).slice(0,_)+l.slice(t+1),g.setTextContent(l),l=e===g?l:w,e.setTextContent(l.slice(0,o)+l.slice(o+y)),l=n.$getSelection(),v=n.$createRangeSelection(),n.$setSelection(v),t=t-y*(e===g?2:1)+1,v.anchor.set(e.__key,o,"text"),v.focus.set(g.__key,t,"text"),b.format))v.hasFormat(S)||v.formatText(S);for(let C of(v.anchor.set(v.focus.key,v.focus.offset,v.focus.type),b.format))v.hasFormat(C)&&v.toggleFormat(C);n.$isRangeSelection(l)&&(v.format=l.format);break t}}}}}}}})}}})}},32358:function(e,t,r){"use strict";let n=r(24990);e.exports=n},24990:function(e,t,r){"use strict";var n=r(73435),i=r(84260),s=r(76969),a=r(32998),o=r(67294);function l(e,t){for(let r=0;r<t.length;r++){let n=t[r](e);if(n)return n}return null}let c=/[.,;\s]/;function u(e){var t;return e=e.getPreviousSibling(),a.$isElementNode(e)&&(e=e.getLastDescendant()),!(t=null===e||a.$isLineBreakNode(e))&&(t=a.$isTextNode(e))&&(e=e.getTextContent(),t=c.test(e[e.length-1])),t}function d(e){return e=e.getNextSibling(),a.$isElementNode(e)&&(e=e.getFirstDescendant()),null===e||a.$isLineBreakNode(e)||a.$isTextNode(e)&&c.test(e.getTextContent()[0])}function p(e,t,r){var n=e.getChildren();let i=n.length;for(let s=0;s<i;s++){let o=n[s];if(!a.$isTextNode(o)||!o.isSimpleText()){h(e),r(null,e.getURL());return}}null===(t=l(n=e.getTextContent(),t))||t.text!==n?(h(e),r(null,e.getURL())):u(e)&&d(e)?((n=e.getURL())!==t.url&&(e.setURL(t.url),r(t.url,n)),t.attributes&&((n=e.getRel())!==t.attributes.rel&&(e.setRel(t.attributes.rel||null),r(t.attributes.rel||null,n)),(n=e.getTarget())!==t.attributes.target&&(e.setTarget(t.attributes.target||null),r(t.attributes.target||null,n)))):(h(e),r(null,e.getURL()))}function h(e){let t=e.getChildren();var r=t.length;for(--r;0<=r;r--)e.insertAfter(t[r]);return e.remove(),t.map(e=>e.getLatest())}t.AutoLinkPlugin=function({matchers:e,onChange:t}){let[r]=i.useLexicalComposerContext();return o.useEffect(()=>{r.hasNodes([n.AutoLinkNode])||function(e){let t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(77);let i=(e,r)=>{t&&t(e,r)};return s.mergeRegister(r.registerNodeTransform(a.TextNode,r=>{var s,o=r.getParentOrThrow(),f=r.getPreviousSibling();if(n.$isAutoLinkNode(o))p(o,e,i);else if(!n.$isLinkNode(o)){if(r.isSimpleText()&&(c.test(r.getTextContent()[0])||!n.$isAutoLinkNode(f))){f=o=r.getTextContent();let m=0,g=r;for(;(s=l(f,e))&&null!==s;){let y=s.index,v=s.length,b=y+v;var w=m+y,_=m+b,x=o,S=r;if((0<w?c.test(x[w-1]):u(S))&&(_<x.length?c.test(x[_]):d(S))){var T=void 0;0===m+y?[T,g]=g.splitText(m+v):[,T,g]=g.splitText(m+y,m+y+v),w=n.$createAutoLinkNode(s.url,s.attributes),(_=a.$createTextNode(s.text)).setFormat(T.getFormat()),_.setDetail(T.getDetail()),w.append(_),T.replace(w),t&&t(s.url,null),m=0}else m+=b;f=f.substring(b)}}o=r.getPreviousSibling(),s=r.getNextSibling(),T=r.getTextContent(),n.$isAutoLinkNode(o)&&!c.test(T[0])&&(o.append(r),p(o,e,i),r=o.getURL(),t&&t(null,r)),n.$isAutoLinkNode(s)&&!c.test(T[T.length-1])&&(h(s),p(s,e,i),r=s.getURL(),t&&t(null,r))}}))},[r,e,t]),null},t.createLinkMatcherWithRegExp=function(e,t=e=>e){return r=>{let n=e.exec(r);return null===n?null:{index:n.index,length:n[0].length,text:n[0],url:t(r)}}}},22292:function(e,t,r){"use strict";let n=r(44149);e.exports=n},44149:function(e,t,r){"use strict";var n=r(84260),i=r(32998),s=r(67294);let a="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;var o=a?s.useLayoutEffect:s.useEffect;let l={tag:"history-merge"};t.LexicalComposer=function({initialConfig:e,children:t}){let r=s.useMemo(()=>{let{theme:t,namespace:r,editor__DEPRECATED:s,nodes:o,onError:c,editorState:u}=e,d=n.createLexicalComposerContext(null,t),p=s||null;if(null===p){let h=i.createEditor({editable:e.editable,namespace:r,nodes:o,onError:e=>c(e,h),theme:t});!function(e,t){if(null!==t){if(void 0===t)e.update(()=>{var t=i.$getRoot();if(t.isEmpty()){let r=i.$createParagraphNode();t.append(r),t=a?document.activeElement:null,(null!==i.$getSelection()||null!==t&&t===e.getRootElement())&&r.select()}},l);else if(null!==t)switch(typeof t){case"string":let r=e.parseEditorState(t);e.setEditorState(r,l);break;case"object":e.setEditorState(t,l);break;case"function":e.update(()=>{i.$getRoot().isEmpty()&&t(e)},l)}}}(h,u),p=h}return[p,d]},[]);return o(()=>{let t=e.editable,[n]=r;n.setEditable(void 0===t||t)},[]),s.createElement(n.LexicalComposerContext.Provider,{value:r},t)}},84260:function(e,t,r){"use strict";let n=r(33489);e.exports=n},33489:function(e,t,r){"use strict";var n=r(67294);let i=n.createContext(null);t.LexicalComposerContext=i,t.createLexicalComposerContext=function(e,t){let r=null;return null!=e&&(r=e[1]),{getTheme:function(){return null!=t?t:null!=r?r.getTheme():null}}},t.useLexicalComposerContext=function(){let e=n.useContext(i);return null==e&&function(e){let t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),e}},6898:function(e,t,r){"use strict";let n=r(15781);e.exports=n},15781:function(e,t,r){"use strict";var n=r(84260),i=r(67294);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var a="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;t.ContentEditable=function({ariaActiveDescendant:e,ariaAutoComplete:t,ariaControls:r,ariaDescribedBy:o,ariaExpanded:l,ariaLabel:c,ariaLabelledBy:u,ariaMultiline:d,ariaOwns:p,ariaRequired:h,autoCapitalize:f,className:m,id:g,role:y="textbox",spellCheck:v=!0,style:b,tabIndex:w,"data-testid":_,...x}){let[S]=n.useLexicalComposerContext(),[T,E]=i.useState(!1),C=i.useCallback(e=>{S.setRootElement(e)},[S]);return a(()=>(E(S.isEditable()),S.registerEditableListener(e=>{E(e)})),[S]),i.createElement("div",s({},x,{"aria-activedescendant":T?e:void 0,"aria-autocomplete":T?t:"none","aria-controls":T?r:void 0,"aria-describedby":o,"aria-expanded":T&&"combobox"===y?!!l:void 0,"aria-label":c,"aria-labelledby":u,"aria-multiline":d,"aria-owns":T?p:void 0,"aria-readonly":!T||void 0,"aria-required":h,autoCapitalize:f,className:m,contentEditable:T,"data-testid":_,id:g,ref:C,role:y,spellCheck:v,style:b,tabIndex:w}))}},50627:function(e,t,r){"use strict";let n=r(71318);e.exports=n},71318:function(e,t,r){"use strict";var n=r(78780),i=r(84260),s=r(85158),a=r(67294),o=RegExp;let l=String.fromCharCode,c="A-Za-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\xc0-\xd6\xd8-\xf6\xf8-\xff--------------------------------------------------------"+(l(173824)+"-"+l(177983)+l(177984)+"-"+l(178207)+l(194560))+"-"+l(195103)+"",{alpha:u,alphanumeric:d,hashChars:p}={alpha:c,alphanumeric:c+"0-9--------------------_",hashChars:"#\\uFF03"},h="["+d+"]",f=new o("(^|$|[^&/"+d+"])(["+p+"])("+h+"*["+u+"]"+h+"*)","i");t.HashtagPlugin=function(){let[e]=i.useLexicalComposerContext();a.useEffect(()=>{if(!e.hasNodes([n.HashtagNode]))throw Error("HashtagPlugin: HashtagNode not registered on editor")},[e]);let t=a.useCallback(e=>n.$createHashtagNode(e.getTextContent()),[]),r=a.useCallback(e=>{if(null===(e=f.exec(e)))return null;let t=e.index+e[1].length;return{end:t+(e[3].length+1),start:t}},[]);return s.useLexicalTextEntity(r,n.HashtagNode,t),null}},4506:function(e,t,r){"use strict";let n=r(548);e.exports=n},548:function(e,t,r){"use strict";var n=r(84260),i=r(48854),s=r(67294);t.createEmptyHistoryState=i.createEmptyHistoryState,t.HistoryPlugin=function({externalHistoryState:e}){let[t]=n.useLexicalComposerContext();return function(e,t,r=1e3){let n=s.useMemo(()=>t||i.createEmptyHistoryState(),[t]);s.useEffect(()=>i.registerHistory(e,n,r),[r,e,n])}(t,e),null}},74749:function(e,t,r){"use strict";let n=r(47618);e.exports=n},47618:function(e,t,r){"use strict";var n=r(84260),i=r(25567),s=r(76969),a=r(32998),o=r(67294);let l=a.createCommand("INSERT_HORIZONTAL_RULE_COMMAND");function c({nodeKey:e}){let[t]=n.useLexicalComposerContext(),[r,l,c]=i.useLexicalNodeSelection(e),u=o.useCallback(t=>(r&&a.$isNodeSelection(a.$getSelection())&&(t.preventDefault(),h(t=a.$getNodeByKey(e))&&t.remove()),!1),[r,e]);return o.useEffect(()=>s.mergeRegister(t.registerCommand(a.CLICK_COMMAND,n=>{let i=t.getElementByKey(e);return n.target===i&&(n.shiftKey||c(),l(!r),!0)},a.COMMAND_PRIORITY_LOW),t.registerCommand(a.KEY_DELETE_COMMAND,u,a.COMMAND_PRIORITY_LOW),t.registerCommand(a.KEY_BACKSPACE_COMMAND,u,a.COMMAND_PRIORITY_LOW)),[c,t,r,e,u,l]),o.useEffect(()=>{let n=t.getElementByKey(e);null!==n&&(n.className=r?"selected":"")},[t,r,e]),null}class u extends a.DecoratorNode{static getType(){return"horizontalrule"}static clone(e){return new u(e.__key)}static importJSON(){return p()}static importDOM(){return{hr:()=>({conversion:d,priority:0})}}exportJSON(){return{type:"horizontalrule",version:1}}exportDOM(){return{element:document.createElement("hr")}}createDOM(){return document.createElement("hr")}getTextContent(){return"\n"}isInline(){return!1}updateDOM(){return!1}decorate(){return o.createElement(c,{nodeKey:this.__key})}}function d(){return{node:p()}}function p(){return a.$applyNodeReplacement(new u)}function h(e){return e instanceof u}t.$createHorizontalRuleNode=p,t.$isHorizontalRuleNode=h,t.HorizontalRuleNode=u,t.INSERT_HORIZONTAL_RULE_COMMAND=l},87632:function(e,t,r){"use strict";let n=r(8845);e.exports=n},8845:function(e,t,r){"use strict";var n=r(36571),i=r(84260),s=r(74749),a=r(67294);let o=[{dependencies:[s.HorizontalRuleNode],export:e=>s.$isHorizontalRuleNode(e)?"***":null,regExp:/^(---|\*\*\*|___)\s?$/,replace:(e,t,r,n)=>{t=s.$createHorizontalRuleNode(),n||null!=e.getNextSibling()?e.replace(t):e.insertBefore(t),t.selectNext()},type:"element"},...n.TRANSFORMERS];t.DEFAULT_TRANSFORMERS=o,t.MarkdownShortcutPlugin=function({transformers:e=o}){let[t]=i.useLexicalComposerContext();return a.useEffect(()=>n.registerMarkdownShortcuts(t,e),[t,e]),null}},71954:function(e,t,r){"use strict";let n=r(61689);e.exports=n},61689:function(e,t,r){"use strict";var n=r(84260),i=r(67294),s="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;t.OnChangePlugin=function({ignoreHistoryMergeTagChange:e=!0,ignoreSelectionChange:t=!1,onChange:r}){let[i]=n.useLexicalComposerContext();return s(()=>{if(r)return i.registerUpdateListener(({editorState:n,dirtyElements:s,dirtyLeaves:a,prevEditorState:o,tags:l})=>{t&&0===s.size&&0===a.size||e&&l.has("history-merge")||o.isEmpty()||r(n,i,l)})},[i,e,t,r]),null}},86146:function(e,t,r){"use strict";let n=r(61827);e.exports=n},61827:function(e,t,r){"use strict";var n=r(84260),i=r(9722),s=r(67294),a=r(2977),o=r(76969),l=r(73935),c=r(70573),u=r(2903),d="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?s.useLayoutEffect:s.useEffect;function p(e){return e.getEditorState().read(a.$canShowPlaceholderCurry(e.isComposing()))}function h({content:e}){var[t]=n.useLexicalComposerContext();t=function(e){let[t,r]=s.useState(()=>p(e));return d(()=>{function t(){r(p(e))}return t(),o.mergeRegister(e.registerUpdateListener(()=>{t()}),e.registerEditableListener(()=>{t()}))},[e]),t}(t);let r=i();return t?"function"==typeof e?e(r):e:null}t.RichTextPlugin=function({contentEditable:e,placeholder:t,ErrorBoundary:r}){var i;let[a]=n.useLexicalComposerContext();return r=function(e,t){let[r,n]=s.useState(()=>e.getDecorators());return d(()=>e.registerDecoratorListener(e=>{l.flushSync(()=>{n(e)})}),[e]),s.useEffect(()=>{n(e.getDecorators())},[e]),s.useMemo(()=>{let n=[],i=Object.keys(r);for(let a=0;a<i.length;a++){let o=i[a],c=s.createElement(t,{onError:t=>e._onError(t)},s.createElement(s.Suspense,{fallback:null},r[o])),u=e.getElementByKey(o);null!==u&&n.push(l.createPortal(c,u,o))}return n},[t,r,e])}(a,r),d(()=>o.mergeRegister(u.registerRichText(i),c.registerDragonSupport(i)),[i=a]),s.createElement(s.Fragment,null,e,s.createElement(h,{content:t}),r)}},50185:function(e,t,r){"use strict";let n=r(68349);e.exports=n},68349:function(e,t,r){"use strict";var n=r(84260),i=r(32998),s=r(67294),a=r(76969),o="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?s.useLayoutEffect:s.useEffect;let l=e=>{let t=document.getElementById("typeahead-menu");if(t){var r=t.getBoundingClientRect();r.top+r.height>window.innerHeight&&t.scrollIntoView({block:"center"}),0>r.top&&t.scrollIntoView({block:"center"}),e.scrollIntoView({block:"nearest"})}};function c(e,t){return e=e.getBoundingClientRect(),t=t.getBoundingClientRect(),e.top>t.top&&e.top<t.bottom}let u=i.createCommand("SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND");function d({close:e,editor:t,anchorElementRef:r,resolution:n,options:c,menuRenderFn:d,onSelectOption:p,shouldSplitNodeWithQuery:h=!1}){let[f,m]=s.useState(null);s.useEffect(()=>{m(0)},[n.match&&n.match.matchingString]);let g=s.useCallback(r=>{t.update(()=>{let t=null!=n.match&&h?function(e){let t;var r=i.$getSelection();if(!i.$isRangeSelection(r)||!r.isCollapsed())return null;var n=r.anchor;if("text"!==n.type||!(r=n.getNode()).isSimpleText())return null;n=n.offset;let s=r.getTextContent().slice(0,n);var a=e.matchingString;e=e.replaceableString.length;for(let o=e;o<=a.length;o++)s.substr(-o)===a.substr(0,o)&&(e=o);return 0>(e=n-e)?null:(0===e?[t]=r.splitText(n):[,t]=r.splitText(e,n),t)}(n.match):null;p(r,t,e,n.match?n.match.matchingString:"")})},[t,h,n.match,p,e]),y=s.useCallback(e=>{let r=t.getRootElement();null!==r&&(r.setAttribute("aria-activedescendant","typeahead-item-"+e),m(e))},[t]);return s.useEffect(()=>()=>{let e=t.getRootElement();null!==e&&e.removeAttribute("aria-activedescendant")},[t]),o(()=>{null===c?m(null):null===f&&y(0)},[c,f,y]),s.useEffect(()=>a.mergeRegister(t.registerCommand(u,({option:e})=>!!e.ref&&null!=e.ref.current&&(l(e.ref.current),!0),i.COMMAND_PRIORITY_LOW)),[t,y]),s.useEffect(()=>a.mergeRegister(t.registerCommand(i.KEY_ARROW_DOWN_COMMAND,e=>{if(null!==c&&c.length&&null!==f){let r=f!==c.length-1?f+1:0;y(r);let n=c[r];null!=n.ref&&n.ref.current&&t.dispatchCommand(u,{index:r,option:n}),e.preventDefault(),e.stopImmediatePropagation()}return!0},i.COMMAND_PRIORITY_LOW),t.registerCommand(i.KEY_ARROW_UP_COMMAND,e=>{if(null!==c&&c.length&&null!==f){var t=0!==f?f-1:c.length-1;y(t),null!=(t=c[t]).ref&&t.ref.current&&l(t.ref.current),e.preventDefault(),e.stopImmediatePropagation()}return!0},i.COMMAND_PRIORITY_LOW),t.registerCommand(i.KEY_ESCAPE_COMMAND,t=>(t.preventDefault(),t.stopImmediatePropagation(),e(),!0),i.COMMAND_PRIORITY_LOW),t.registerCommand(i.KEY_TAB_COMMAND,e=>null!==c&&null!==f&&null!=c[f]&&(e.preventDefault(),e.stopImmediatePropagation(),g(c[f]),!0),i.COMMAND_PRIORITY_LOW),t.registerCommand(i.KEY_ENTER_COMMAND,e=>null!==c&&null!==f&&null!=c[f]&&(null!==e&&(e.preventDefault(),e.stopImmediatePropagation()),g(c[f]),!0),i.COMMAND_PRIORITY_LOW)),[g,e,t,c,f,y]),d(r,s.useMemo(()=>({options:c,selectOptionAndCleanUp:g,selectedIndex:f,setHighlightedIndex:m}),[g,f,c]),n.match?n.match.matchingString:"")}function p(e,t){let r=getComputedStyle(e),n="absolute"===r.position;if(t=t?/(auto|scroll|hidden)/:/(auto|scroll)/,"fixed"===r.position)return document.body;for(;e=e.parentElement;)if(r=getComputedStyle(e),(!n||"static"!==r.position)&&t.test(r.overflow+r.overflowY+r.overflowX))return e;return document.body}function h(e,t){return e=e.getBoundingClientRect(),t=t.getBoundingClientRect(),e.top>t.top&&e.top<t.bottom}let f=i.createCommand("SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND");t.LexicalTypeaheadMenuPlugin=function({options:e,onQueryChange:t,onSelectOption:r,onOpen:a,onClose:o,menuRenderFn:l,triggerFn:u,anchorClassName:p}){let[h]=n.useLexicalComposerContext(),[f,m]=s.useState(null);p=function(e,t,r){let[i]=n.useLexicalComposerContext(),a=s.useRef(document.createElement("div")),o=s.useCallback(()=>{let t=i.getRootElement(),n=a.current;var s=n.firstChild;if(null!==t&&null!==e){let{left:o,top:l,width:c,height:u}=e.getRect();if(n.style.top=`${l+window.pageYOffset}px`,n.style.left=`${o+window.pageXOffset}px`,n.style.height=`${u}px`,n.style.width=`${c}px`,null!==s){var d=s.getBoundingClientRect();s=d.height,d=d.width;let p=t.getBoundingClientRect();o+d>p.right&&(n.style.left=`${p.right-d+window.pageXOffset}px`),(l+s>window.innerHeight||l+s>p.bottom)&&l-p.top>s&&(n.style.top=`${l-s+window.pageYOffset-(u+10)}px`)}n.isConnected||(null!=r&&(n.className=r),n.setAttribute("aria-label","Typeahead menu"),n.setAttribute("id","typeahead-menu"),n.setAttribute("role","listbox"),n.style.display="block",n.style.position="absolute",document.body.append(n)),a.current=n,t.setAttribute("aria-controls","typeahead-menu")}},[i,e,r]);s.useEffect(()=>{let t=i.getRootElement();if(null!==e)return o(),()=>{null!==t&&t.removeAttribute("aria-controls");let e=a.current;null!==e&&e.isConnected&&e.remove()}},[i,o,e]);let l=s.useCallback(r=>{null!==e&&(r||t(null))},[e,t]);return function(e,t,r,i){let[a]=n.useLexicalComposerContext();s.useEffect(()=>{if(null!=t&&null!=e){let n=a.getRootElement(),s=null!=n?function(e,t){let r=getComputedStyle(e),n="absolute"===r.position;if(t=t?/(auto|scroll|hidden)/:/(auto|scroll)/,"fixed"===r.position)return document.body;for(;e=e.parentElement;)if(r=getComputedStyle(e),(!n||"static"!==r.position)&&t.test(r.overflow+r.overflowY+r.overflowX))return e;return document.body}(n,!1):document.body,o=!1,l=c(t,s),u=function(){o||(window.requestAnimationFrame(function(){r(),o=!1}),o=!0);let e=c(t,s);e!==l&&(l=e,null!=i&&i(e))},d=new ResizeObserver(r);return window.addEventListener("resize",r),document.addEventListener("scroll",u,{capture:!0,passive:!0}),d.observe(t),()=>{d.unobserve(t),window.removeEventListener("resize",r),document.removeEventListener("scroll",u)}}},[t,a,i,r,e])}(e,a.current,o,l),a}(f,m,p);let g=s.useCallback(()=>{m(null),null!=o&&null!==f&&o()},[o,f]),y=s.useCallback(e=>{m(e),null!=a&&null===f&&a(e)},[a,f]);return s.useEffect(()=>{let e=h.registerUpdateListener(()=>{h.getEditorState().read(()=>{let e;let r=document.createRange(),n=i.$getSelection(),a=(e=null,h.getEditorState().read(()=>{var t=i.$getSelection();if(i.$isRangeSelection(t)){var r=t.anchor;"text"!==r.type?e=null:(t=r.getNode()).isSimpleText()?(r=r.offset,e=t.getTextContent().slice(0,r)):e=null}}),e);if(i.$isRangeSelection(n)&&n.isCollapsed()&&null!==a&&null!==r){var o,l=u(a,h);t(l?l.matchingString:null),null===l||0===l.leadOffset&&h.getEditorState().read(()=>{var e=i.$getSelection();return!!i.$isRangeSelection(e)&&(e=e.anchor.getNode().getPreviousSibling(),i.$isTextNode(e)&&e.isTextEntity())})||null===function(e,t){var r=window.getSelection();if(null===r||!r.isCollapsed)return!1;let n=r.anchorNode;if(r=r.anchorOffset,null==n||null==r)return!1;try{t.setStart(n,e),t.setEnd(n,r)}catch(i){return!1}return!0}(l.leadOffset,r)?g():(o=()=>y({getRect:()=>r.getBoundingClientRect(),match:l}),s.startTransition?s.startTransition(o):o())}else g()})});return()=>{e()}},[h,u,t,f,g,y]),null===f||null===h?null:s.createElement(d,{close:g,resolution:f,editor:h,anchorElementRef:p,options:e,menuRenderFn:l,shouldSplitNodeWithQuery:!0,onSelectOption:r})},t.MenuOption=class{constructor(e){this.key=e,this.ref={current:null},this.setRefElement=this.setRefElement.bind(this)}setRefElement(e){this.ref={current:e}}},t.PUNCTUATION="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;",t.SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND=f,t.getScrollParent=p,t.useBasicTypeaheadTriggerMatch=function(e,{minLength:t=1,maxLength:r=75}){return s.useCallback(n=>{if(null!==(n=RegExp("(^|\\s|\\()(["+e+"]((?:[^"+e+"\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'\"~=<>_:;\\s]){0,"+r+"}))$").exec(n))){let i=n[1],s=n[3];if(s.length>=t)return{leadOffset:n.index+i.length,matchingString:s,replaceableString:n[2]}}return null},[r,t,e])},t.useDynamicPositioning=function(e,t,r,i){let[a]=n.useLexicalComposerContext();s.useEffect(()=>{if(null!=t&&null!=e){let n=a.getRootElement(),s=null!=n?p(n,!1):document.body,o=!1,l=h(t,s),c=function(){o||(window.requestAnimationFrame(function(){r(),o=!1}),o=!0);let e=h(t,s);e!==l&&(l=e,null!=i&&i(e))},u=new ResizeObserver(r);return window.addEventListener("resize",r),document.addEventListener("scroll",c,{capture:!0,passive:!0}),u.observe(t),()=>{u.unobserve(t),window.removeEventListener("resize",r),document.removeEventListener("scroll",c)}}},[t,a,i,r,e])}},9722:function(e,t,r){"use strict";let n=r(65836);e.exports=n},65836:function(e,t,r){"use strict";var n=r(84260),i=r(67294),s="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?i.useLayoutEffect:i.useEffect;function a(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}e.exports=function(){return function(e){let[t]=n.useLexicalComposerContext(),r=i.useMemo(()=>e(t),[t,e]),a=i.useRef(r.initialValueFn()),[o,l]=i.useState(a.current);return s(()=>{let{initialValueFn:e,subscribe:t}=r,n=e();return a.current!==n&&(a.current=n,l(n)),t(e=>{a.current=e,l(e)})},[r,e]),o}(a)}},25567:function(e,t,r){"use strict";let n=r(99121);e.exports=n},99121:function(e,t,r){"use strict";var n=r(84260),i=r(32998),s=r(67294);function a(e,t){return e.getEditorState().read(()=>{let e=i.$getNodeByKey(t);return null!==e&&e.isSelected()})}t.useLexicalNodeSelection=function(e){let[t]=n.useLexicalComposerContext(),[r,o]=s.useState(()=>a(t,e));return s.useEffect(()=>{let r=!0,n=t.registerUpdateListener(()=>{r&&o(a(t,e))});return()=>{r=!1,n()}},[t,e]),[r,s.useCallback(r=>{t.update(()=>{let t=i.$getSelection();i.$isNodeSelection(t)||(t=i.$createNodeSelection(),i.$setSelection(t)),r?t.add(e):t.delete(e)})},[t,e]),s.useCallback(()=>{t.update(()=>{let e=i.$getSelection();i.$isNodeSelection(e)&&e.clear()})},[t])]}},85158:function(e,t,r){"use strict";let n=r(13718);e.exports=n},13718:function(e,t,r){"use strict";var n=r(84260),i=r(2977),s=r(76969),a=r(67294);t.useLexicalTextEntity=function(e,t,r){let[o]=n.useLexicalComposerContext();a.useEffect(()=>s.mergeRegister(...i.registerLexicalTextEntity(o,e,t,r)),[r,o,e,t])}},2903:function(e,t,r){"use strict";let n=r(40925);e.exports=n},40925:function(e,t,r){"use strict";var n=r(86907),i=r(89408),s=r(76969),a=r(32998);function o(e,t){return void 0!==document.caretRangeFromPoint?null===(e=document.caretRangeFromPoint(e,t))?null:{node:e.startContainer,offset:e.startOffset}:"undefined"!==document.caretPositionFromPoint?null===(e=document.caretPositionFromPoint(e,t))?null:{node:e.offsetNode,offset:e.offset}:null}let l="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,c=l&&"documentMode"in document?document.documentMode:null;l&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),l&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);let u=!!(l&&"InputEvent"in window)&&!c&&"getTargetRanges"in new window.InputEvent("input"),d=l&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),p=l&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,h=l&&/^(?=.*Chrome).*/i.test(navigator.userAgent),f=l&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!h,m=a.createCommand("DRAG_DROP_PASTE_FILE");class g extends a.ElementNode{static getType(){return"quote"}static clone(e){return new g(e.__key)}constructor(e){super(e)}createDOM(e){let t=document.createElement("blockquote");return s.addClassNamesToElement(t,e.theme.quote),t}updateDOM(){return!1}static importDOM(){return{blockquote:()=>({conversion:_,priority:0})}}exportDOM(e){if({element:e}=super.exportDOM(e),e&&this.isEmpty()&&e.append(document.createElement("br")),e){var t=this.getFormatType();e.style.textAlign=t,(t=this.getDirection())&&(e.dir=t)}return{element:e}}static importJSON(e){let t=y();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),type:"quote"}}insertNewAfter(e,t){e=a.$createParagraphNode();let r=this.getDirection();return e.setDirection(r),this.insertAfter(e,t),e}collapseAtStart(){let e=a.$createParagraphNode();return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}}function y(){return a.$applyNodeReplacement(new g)}class v extends a.ElementNode{static getType(){return"heading"}static clone(e){return new v(e.__tag,e.__key)}constructor(e,t){super(t),this.__tag=e}getTag(){return this.__tag}createDOM(e){let t=this.__tag,r=document.createElement(t);return void 0!==(e=e.theme.heading)&&s.addClassNamesToElement(r,e[t]),r}updateDOM(){return!1}static importDOM(){return{h1:()=>({conversion:w,priority:0}),h2:()=>({conversion:w,priority:0}),h3:()=>({conversion:w,priority:0}),h4:()=>({conversion:w,priority:0}),h5:()=>({conversion:w,priority:0}),h6:()=>({conversion:w,priority:0}),p:e=>null!==(e=e.firstChild)&&b(e)?{conversion:()=>({node:null}),priority:3}:null,span:e=>b(e)?{conversion:()=>({node:x("h1")}),priority:3}:null}}exportDOM(e){if({element:e}=super.exportDOM(e),e&&this.isEmpty()&&e.append(document.createElement("br")),e){var t=this.getFormatType();e.style.textAlign=t,(t=this.getDirection())&&(e.dir=t)}return{element:e}}static importJSON(e){let t=x(e.tag);return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),tag:this.getTag(),type:"heading",version:1}}insertNewAfter(e,t=!0){e=0<(e=e?e.anchor.offset:0)&&e<this.getTextContentSize()?x(this.getTag()):a.$createParagraphNode();let r=this.getDirection();return e.setDirection(r),this.insertAfter(e,t),e}collapseAtStart(){let e=this.isEmpty()?a.$createParagraphNode():x(this.getTag());return this.getChildren().forEach(t=>e.append(t)),this.replace(e),!0}extractWithChild(){return!0}}function b(e){return"span"===e.nodeName.toLowerCase()&&"26pt"===e.style.fontSize}function w(e){let t=e.nodeName.toLowerCase(),r=null;return("h1"===t||"h2"===t||"h3"===t||"h4"===t||"h5"===t||"h6"===t)&&(r=x(t),null!==e.style&&r.setFormat(e.style.textAlign)),{node:r}}function _(e){let t=y();return null!==e.style&&t.setFormat(e.style.textAlign),{node:t}}function x(e){return a.$applyNodeReplacement(new v(e))}async function S(e,t){await n.copyToClipboard(t,s.objectKlassEquals(e,ClipboardEvent)?e:null),t.update(()=>{let e=a.$getSelection();a.$isRangeSelection(e)?e.removeText():a.$isNodeSelection(e)&&e.getNodes().forEach(e=>e.remove())})}function T(e){let t=null;if(e instanceof DragEvent?t=e.dataTransfer:e instanceof ClipboardEvent&&(t=e.clipboardData),null===t)return[!1,[],!1];var r=t.types;return e=r.includes("Files"),r=r.includes("text/html")||r.includes("text/plain"),[e,Array.from(t.files),r]}function E(e){var t=a.$getSelection();if(!a.$isRangeSelection(t))return!1;let r=new Set;t=t.getNodes();for(let n=0;n<t.length;n++){var i=t[n],o=i.getKey();r.has(o)||(o=(i=s.$getNearestBlockElementAncestorOrThrow(i)).getKey(),i.canIndent()&&!r.has(o)&&(r.add(o),e(i)))}return 0<r.size}function C(e){return e=a.$getNearestNodeFromDOMNode(e),a.$isDecoratorNode(e)}t.$createHeadingNode=x,t.$createQuoteNode=y,t.$isHeadingNode=function(e){return e instanceof v},t.$isQuoteNode=function(e){return e instanceof g},t.DRAG_DROP_PASTE=m,t.HeadingNode=v,t.QuoteNode=g,t.eventFiles=T,t.registerRichText=function(e){return s.mergeRegister(e.registerCommand(a.CLICK_COMMAND,()=>{let e=a.$getSelection();return!!a.$isNodeSelection(e)&&(e.clear(),!0)},0),e.registerCommand(a.DELETE_CHARACTER_COMMAND,e=>{let t=a.$getSelection();return!!a.$isRangeSelection(t)&&(t.deleteCharacter(e),!0)},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.DELETE_WORD_COMMAND,e=>{let t=a.$getSelection();return!!a.$isRangeSelection(t)&&(t.deleteWord(e),!0)},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.DELETE_LINE_COMMAND,e=>{let t=a.$getSelection();return!!a.$isRangeSelection(t)&&(t.deleteLine(e),!0)},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.CONTROLLED_TEXT_INSERTION_COMMAND,t=>{let r=a.$getSelection();if("string"==typeof t)a.$isRangeSelection(r)?r.insertText(t):a.DEPRECATED_$isGridSelection(r);else{if(!a.$isRangeSelection(r)&&!a.DEPRECATED_$isGridSelection(r))return!1;let i=t.dataTransfer;null!=i?n.$insertDataTransferForRichText(i,r,e):a.$isRangeSelection(r)&&(t=t.data)&&r.insertText(t)}return!0},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.REMOVE_TEXT_COMMAND,()=>{let e=a.$getSelection();return!!a.$isRangeSelection(e)&&(e.removeText(),!0)},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.FORMAT_TEXT_COMMAND,e=>{let t=a.$getSelection();return!!a.$isRangeSelection(t)&&(t.formatText(e),!0)},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.FORMAT_ELEMENT_COMMAND,e=>{var t=a.$getSelection();if(!a.$isRangeSelection(t)&&!a.$isNodeSelection(t))return!1;for(let r of t=t.getNodes())null!==(t=s.$findMatchingParent(r,e=>a.$isElementNode(e)&&!e.isInline()))&&t.setFormat(e);return!0},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.INSERT_LINE_BREAK_COMMAND,e=>{let t=a.$getSelection();return!!a.$isRangeSelection(t)&&(t.insertLineBreak(e),!0)},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.INSERT_PARAGRAPH_COMMAND,()=>{let e=a.$getSelection();return!!a.$isRangeSelection(e)&&(e.insertParagraph(),!0)},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.INSERT_TAB_COMMAND,()=>(a.$insertNodes([a.$createTabNode()]),!0),a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.INDENT_CONTENT_COMMAND,()=>E(e=>{let t=e.getIndent();e.setIndent(t+1)}),a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.OUTDENT_CONTENT_COMMAND,()=>E(e=>{let t=e.getIndent();0<t&&e.setIndent(t-1)}),a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.KEY_ARROW_UP_COMMAND,e=>{var t=a.$getSelection();if(a.$isNodeSelection(t)&&!C(e.target)){if(0<(e=t.getNodes()).length)return e[0].selectPrevious(),!0}else if(a.$isRangeSelection(t)&&(t=a.$getAdjacentNode(t.focus,!0),!e.shiftKey&&a.$isDecoratorNode(t)&&!t.isIsolated()&&!t.isInline()))return t.selectPrevious(),e.preventDefault(),!0;return!1},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.KEY_ARROW_DOWN_COMMAND,e=>{var t=a.$getSelection();if(a.$isNodeSelection(t)){if(0<(e=t.getNodes()).length)return e[0].selectNext(0,0),!0}else if(a.$isRangeSelection(t)){let r=t.focus;if("root"===r.key&&r.offset===a.$getRoot().getChildrenSize())return e.preventDefault(),!0;if(t=a.$getAdjacentNode(t.focus,!1),!e.shiftKey&&a.$isDecoratorNode(t)&&!t.isIsolated()&&!t.isInline())return t.selectNext(),e.preventDefault(),!0}return!1},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.KEY_ARROW_LEFT_COMMAND,e=>{let t=a.$getSelection();if(a.$isNodeSelection(t)){var r=t.getNodes();if(0<r.length)return e.preventDefault(),r[0].selectPrevious(),!0}return!!a.$isRangeSelection(t)&&!!i.$shouldOverrideDefaultCharacterSelection(t,!0)&&(r=e.shiftKey,e.preventDefault(),i.$moveCharacter(t,r,!0),!0)},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.KEY_ARROW_RIGHT_COMMAND,e=>{let t=a.$getSelection();if(a.$isNodeSelection(t)&&!C(e.target)){var r=t.getNodes();if(0<r.length)return e.preventDefault(),r[0].selectNext(0,0),!0}return!!a.$isRangeSelection(t)&&(r=e.shiftKey,!!i.$shouldOverrideDefaultCharacterSelection(t,!1)&&(e.preventDefault(),i.$moveCharacter(t,r,!1),!0))},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.KEY_BACKSPACE_COMMAND,t=>{if(C(t.target))return!1;let r=a.$getSelection();if(!a.$isRangeSelection(r))return!1;t.preventDefault(),{anchor:t}=r;let n=t.getNode();return r.isCollapsed()&&0===t.offset&&!a.$isRootNode(n)&&0<s.$getNearestBlockElementAncestorOrThrow(n).getIndent()?e.dispatchCommand(a.OUTDENT_CONTENT_COMMAND,void 0):e.dispatchCommand(a.DELETE_CHARACTER_COMMAND,!0)},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.KEY_DELETE_COMMAND,t=>{if(C(t.target))return!1;let r=a.$getSelection();return!!a.$isRangeSelection(r)&&(t.preventDefault(),e.dispatchCommand(a.DELETE_CHARACTER_COMMAND,!1))},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.KEY_ENTER_COMMAND,t=>{let r=a.$getSelection();if(!a.$isRangeSelection(r))return!1;if(null!==t){if((p||d||f)&&u)return!1;if(t.preventDefault(),t.shiftKey)return e.dispatchCommand(a.INSERT_LINE_BREAK_COMMAND,!1)}return e.dispatchCommand(a.INSERT_PARAGRAPH_COMMAND,void 0)},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.KEY_ESCAPE_COMMAND,()=>{let t=a.$getSelection();return!!a.$isRangeSelection(t)&&(e.blur(),!0)},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.DROP_COMMAND,t=>{let[,r]=T(t);if(0<r.length){var n=o(t.clientX,t.clientY);if(null!==n){let{offset:i,node:s}=n;var l=a.$getNearestNodeFromDOMNode(s);if(null!==l){if(n=a.$createRangeSelection(),a.$isTextNode(l))n.anchor.set(l.getKey(),i,"text"),n.focus.set(l.getKey(),i,"text");else{let c=l.getParentOrThrow().getKey();l=l.getIndexWithinParent()+1,n.anchor.set(c,l,"element"),n.focus.set(c,l,"element")}n=a.$normalizeSelection__EXPERIMENTAL(n),a.$setSelection(n)}e.dispatchCommand(m,r)}return t.preventDefault(),!0}return t=a.$getSelection(),!!a.$isRangeSelection(t)},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.DRAGSTART_COMMAND,e=>{[e]=T(e);let t=a.$getSelection();return!e||!!a.$isRangeSelection(t)},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.DRAGOVER_COMMAND,e=>{var[t]=T(e);let r=a.$getSelection();return(!t||!!a.$isRangeSelection(r))&&(null!==(t=o(e.clientX,e.clientY))&&(t=a.$getNearestNodeFromDOMNode(t.node),a.$isDecoratorNode(t)&&e.preventDefault()),!0)},a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.COPY_COMMAND,t=>(n.copyToClipboard(e,s.objectKlassEquals(t,ClipboardEvent)?t:null),!0),a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.CUT_COMMAND,t=>(S(t,e),!0),a.COMMAND_PRIORITY_EDITOR),e.registerCommand(a.PASTE_COMMAND,t=>{let[,r,i]=T(t);if(0<r.length&&!i)return e.dispatchCommand(m,r),!0;if(a.isSelectionCapturedInDecoratorInput(t.target))return!1;let s=a.$getSelection();return!!(a.$isRangeSelection(s)||a.DEPRECATED_$isGridSelection(s))&&(t.preventDefault(),e.update(()=>{let r=a.$getSelection(),i=t instanceof InputEvent||t instanceof KeyboardEvent?null:t.clipboardData;null!=i&&(a.$isRangeSelection(r)||a.DEPRECATED_$isGridSelection(r))&&n.$insertDataTransferForRichText(i,r,e)},{tag:"paste"}),!0)},a.COMMAND_PRIORITY_EDITOR))}},89408:function(e,t,r){"use strict";let n=r(49235);e.exports=n},49235:function(e,t,r){"use strict";var n=r(32998);let i=new Map;function s(e){for(;null!=e;){if(e.nodeType===Node.TEXT_NODE)return e;e=e.firstChild}return null}function a(e){let t=e.parentNode;if(null==t)throw Error("Should never happen");return[t,Array.from(t.childNodes).indexOf(e)]}function o(e){let t={};for(let r of e=e.split(";"))if(""!==r){let[n,i]=r.split(/:([^]+)/);t[n.trim()]=i.trim()}return t}function l(e){let t=i.get(e);return void 0===t&&(t=o(e),i.set(e,t)),t}function c(e,t){var r=l("getStyle"in e?e.getStyle():e.style);r=function(e){let t="";for(let r in e)r&&(t+=`${r}: ${e[r]};`);return t}(t=Object.entries(t).reduce((e,[t,r])=>(null===r?delete e[t]:e[t]=r,e),{...r})),e.setStyle(r),i.set(r,t)}function u(e,t,r,i,s=null){if(0!==t.length){var a=t[0],o=new Map,l=[];(a=n.$isElementNode(a)?a:a.getParentOrThrow()).isInline()&&(a=a.getParentOrThrow());for(var c=!1;null!==a;){var u=a.getPreviousSibling();if(null!==u){a=u,c=!0;break}if(a=a.getParentOrThrow(),n.$isRootOrShadowRoot(a))break}u=new Set;for(var d=0;d<r;d++){var p=t[d];n.$isElementNode(p)&&0===p.getChildrenSize()&&u.add(p.getKey())}var h=new Set;for(d=0;d<r;d++){var f=(p=t[d]).getParent();if(null!==f&&f.isInline()&&(f=f.getParent()),null!==f&&n.$isLeafNode(p)&&!h.has(p.getKey())){if(p=f.getKey(),void 0===o.get(p)){let m=i();m.setFormat(f.getFormatType()),m.setIndent(f.getIndent()),l.push(m),o.set(p,m),f.getChildren().forEach(e=>{m.append(e),h.add(e.getKey()),n.$isElementNode(e)&&e.getChildrenKeys().forEach(e=>h.add(e))}),function(e){for(;null!==e&&!n.$isRootOrShadowRoot(e);){let t=e.getLatest(),r=e.getParent();0===t.getChildrenSize()&&e.remove(!0),e=r}}(f)}}else u.has(p.getKey())&&((f=i()).setFormat(p.getFormatType()),f.setIndent(p.getIndent()),l.push(f),p.remove(!0))}if(null!==s)for(t=0;t<l.length;t++)s.append(l[t]);if(t=null,n.$isRootOrShadowRoot(a)){if(c){if(null!==s)a.insertAfter(s);else for(s=l.length-1;0<=s;s--)a.insertAfter(l[s])}else if(c=a.getFirstChild(),n.$isElementNode(c)&&(a=c),null===c){if(s)a.append(s);else for(s=0;s<l.length;s++)c=l[s],a.append(c),t=c}else if(null!==s)c.insertBefore(s);else for(a=0;a<l.length;a++)s=l[a],c.insertBefore(s),t=s}else if(s)a.insertAfter(s);else for(s=l.length-1;0<=s;s--)c=l[s],a.insertAfter(c),t=c;l=n.$getPreviousSelection(),n.$isRangeSelection(l)&&l.anchor.getNode().isAttached()&&l.focus.getNode().isAttached()?n.$setSelection(l.clone()):null!==t?t.selectEnd():e.dirty=!0}}function d(e,t,r,n){e.modify(t?"extend":"move",r,n)}function p(e){return e=e.anchor.getNode(),"rtl"===(n.$isRootNode(e)?e:e.getParentOrThrow()).getDirection()}t.$addNodeStyle=function(e){let t=o(e=e.getStyle());i.set(e,t)},t.$cloneWithProperties=function(e){let t=(e=e.getLatest()).constructor.clone(e);return(t.__parent=e.__parent,t.__next=e.__next,t.__prev=e.__prev,n.$isElementNode(e)&&n.$isElementNode(t))?(t.__first=e.__first,t.__last=e.__last,t.__size=e.__size,t.__format=e.__format,t.__indent=e.__indent,t.__dir=e.__dir,t):(n.$isTextNode(e)&&n.$isTextNode(t)&&(t.__format=e.__format,t.__style=e.__style,t.__mode=e.__mode,t.__detail=e.__detail),t)},t.$getSelectionStyleValueForProperty=function(e,t,r=""){let i=null,s=e.getNodes();var a=e.anchor,o=e.focus,c=e.isBackward();let u=c?o.offset:a.offset;if(a=c?o.getNode():a.getNode(),""!==e.style&&null!==(e=l(e.style))&&t in e)return e[t];for(e=0;e<s.length;e++){var d=s[e];if((0===e||0!==u||!d.is(a))&&n.$isTextNode(d)){if(o=t,c=r,d=d.getStyle(),o=null!==(d=l(d))&&d[o]||c,null===i)i=o;else if(i!==o){i="";break}}}return null===i?r:i},t.$isAtNodeEnd=function(e){return"text"===e.type?e.offset===e.getNode().getTextContentSize():e.offset===e.getNode().getChildrenSize()},t.$isParentElementRTL=p,t.$moveCaretSelection=d,t.$moveCharacter=function(e,t,r){let n=p(e);d(e,t,r?!n:n,"character")},t.$patchStyleText=function(e,t){var r=e.getNodes();let i=r.length-1,s=r[0],a=r[i];if(e.isCollapsed())c(e,t);else{var o=e.anchor,l=e.focus,u=s.getTextContent().length,d=l.offset,p=o.offset,h=o.isBefore(l),f=h?p:d;e=h?d:p;var m=h?o.type:l.type,g=h?l.type:o.type;if(o=h?l.key:o.key,n.$isTextNode(s)&&f===u&&(l=s.getNextSibling(),n.$isTextNode(l)&&(f=p=0,s=l)),1===r.length)n.$isTextNode(s)&&(f="element"===m?0:p>d?d:p)!==(e="element"===g?u:p>d?p:d)&&(0===f&&e===u?(c(s,t),s.select(f,e)):(r=s.splitText(f,e),c(r=0===f?r[0]:r[1],t),r.select(0,e-f)));else for(n.$isTextNode(s)&&f<s.getTextContentSize()&&(0!==f&&(s=s.splitText(f)[1]),c(s,t)),n.$isTextNode(a)&&(f=a.getTextContent().length,a.__key!==o&&0!==e&&(e=f),e!==f&&([a]=a.splitText(e)),0!==e&&c(a,t)),e=1;e<i;e++)u=(f=r[e]).getKey(),n.$isTextNode(f)&&u!==s.getKey()&&u!==a.getKey()&&!f.isToken()&&c(f,t)}},t.$selectAll=function(e){let t=e.anchor;e=e.focus;var r=t.getNode().getTopLevelElementOrThrow().getParentOrThrow();let i=r.getFirstDescendant();r=r.getLastDescendant();let s="element",a="element",o=0;n.$isTextNode(i)?s="text":n.$isElementNode(i)||null===i||(i=i.getParentOrThrow()),n.$isTextNode(r)?(a="text",o=r.getTextContentSize()):n.$isElementNode(r)||null===r||(r=r.getParentOrThrow()),i&&r&&(t.set(i.getKey(),0,s),e.set(r.getKey(),o,a))},t.$setBlocksType=function(e,t){if("root"===e.anchor.key){t=t();var r=n.$getRoot();(e=r.getFirstChild())?e.replace(t,!0):r.append(t)}else for(r=e.getNodes(),e=e.anchor.getNode().getParentOrThrow(),-1===r.indexOf(e)&&r.push(e),e.isInline()&&(e=e.getParentOrThrow(),-1===r.indexOf(e)&&r.push(e)),e=0;e<r.length;e++){let i=r[e];var s=i;if(!n.$isElementNode(s)||n.$isRootOrShadowRoot(s))s=!1;else{var a=s.getFirstChild();a=null===a||n.$isTextNode(a)||a.isInline(),s=!s.isInline()&&!1!==s.canBeEmpty()&&a}s&&((s=t()).setFormat(i.getFormatType()),s.setIndent(i.getIndent()),i.replace(s,!0))}},t.$shouldOverrideDefaultCharacterSelection=function(e,t){return e=n.$getAdjacentNode(e.focus,t),n.$isDecoratorNode(e)&&!e.isIsolated()||n.$isElementNode(e)&&!e.isInline()&&!e.canBeEmpty()},t.$sliceSelectedTextNodeContent=function(e,t){if(t.isSelected()&&!t.isSegmented()&&!t.isToken()&&(n.$isRangeSelection(e)||n.DEPRECATED_$isGridSelection(e))){var r=e.anchor.getNode(),i=e.focus.getNode(),s=t.is(r),a=t.is(i);if(s||a){let o;s=e.isBackward();let[l,c]=e.getCharacterOffsets();e=r.is(i),a=t.is(s?i:r),i=t.is(s?r:i),r=0,e?(r=l>c?c:l,o=l>c?l:c):a?(r=s?c:l,o=void 0):i&&(r=0,o=s=s?l:c),t.__text=t.__text.slice(r,o)}}return t},t.$wrapNodes=function(e,t,r=null){var i=e.getNodes();let s=i.length;var a=e.anchor;if(0===s||1===s&&"element"===a.type&&0===a.getNode().getChildrenSize()){i=(e="text"===a.type?a.getNode().getParentOrThrow():a.getNode()).getChildren();let o=t();o.setFormat(e.getFormatType()),o.setIndent(e.getIndent()),i.forEach(e=>o.append(e)),r&&(o=r.append(o)),e.replace(o)}else{a=null;var l=[];for(let c=0;c<s;c++){let d=i[c];n.$isRootOrShadowRoot(d)?(u(e,l,l.length,t,r),l=[],a=d):null===a||null!==a&&n.$hasAncestor(d,a)?l.push(d):(u(e,l,l.length,t,r),l=[d])}u(e,l,l.length,t,r)}},t.createDOMRange=function(e,t,r,i,o){let l=t.getKey(),c=i.getKey(),u=document.createRange(),d=e.getElementByKey(l);if(e=e.getElementByKey(c),n.$isTextNode(t)&&(d=s(d)),n.$isTextNode(i)&&(e=s(e)),void 0===t||void 0===i||null===d||null===e)return null;"BR"===d.nodeName&&([d,r]=a(d)),"BR"===e.nodeName&&([e,o]=a(e)),t=d.firstChild,d===e&&null!=t&&"BR"===t.nodeName&&0===r&&0===o&&(o=1);try{u.setStart(d,r),u.setEnd(e,o)}catch(p){return null}return u.collapsed&&(r!==o||l!==c)&&(u.setStart(e,o),u.setEnd(d,r)),u},t.createRectsFromDOMRange=function(e,t){let r;var n=e.getRootElement();if(null===n)return[];e=n.getBoundingClientRect(),n=parseFloat((n=getComputedStyle(n)).paddingLeft)+parseFloat(n.paddingRight);let i=(t=Array.from(t.getClientRects())).length;t.sort((e,t)=>{let r=e.top-t.top;return 3>=Math.abs(r)?e.left-t.left:r});for(let s=0;s<i;s++){let a=t[s],o=a.width+n===e.width;r&&r.top<=a.top&&r.top+r.height>a.top&&r.left+r.width>a.left||o?(t.splice(s--,1),i--):r=a}return t},t.getStyleObjectFromCSS=l,t.trimTextContentFromAnchor=function(e,t,r){let i=t.getNode();if(n.$isElementNode(i)){var s=i.getDescendantByIndex(t.offset);null!==s&&(i=s)}for(;0<r&&null!==i;){var a=i.getPreviousSibling(),o=0;if(null===a){s=i.getParentOrThrow();for(var l=s.getPreviousSibling();null===l;){if(null===(s=s.getParent())){a=null;break}l=s.getPreviousSibling()}null!==s&&(o=s.isInline()?0:2,a=n.$isElementNode(l)?l.getLastDescendant():l)}if(""===(l=i.getTextContent())&&n.$isElementNode(i)&&!i.isInline()&&(l="\n\n"),s=i.getTextContentSize(),!n.$isTextNode(i)||r>=s)l=i.getParent(),i.remove(),null==l||0!==l.getChildrenSize()||n.$isRootNode(l)||l.remove(),r-=s+o,i=a;else{let c=i.getKey();o=e.getEditorState().read(()=>{let e=n.$getNodeByKey(c);return n.$isTextNode(e)&&e.isSimpleText()?e.getTextContent():null}),a=s-r;let u=l.slice(0,a);null!==o&&o!==l?(r=n.$getPreviousSelection(),s=i,i.isSimpleText()?i.setTextContent(o):(s=n.$createTextNode(o),i.replace(s)),n.$isRangeSelection(r)&&r.isCollapsed()&&(r=r.anchor.offset,s.select(r,r))):i.isSimpleText()?(o=t.key===c,(l=t.offset)<r&&(l=s),r=o?l-r:0,s=o?l:a,o&&0===r?([r]=i.splitText(r,s),r.remove()):([,r]=i.splitText(r,s),r.remove())):(r=n.$createTextNode(u),i.replace(r)),r=0}}}},2977:function(e,t,r){"use strict";let n=r(28263);e.exports=n},28263:function(e,t,r){"use strict";var n=r(32998);function i(e,t=!0){return!e&&(e=s(),t&&(e=e.trim()),""===e)}function s(){return n.$getRoot().getTextContent()}function a(e){if(!i(e,!1))return!1;let t=(e=n.$getRoot().getChildren()).length;if(1<t)return!1;for(let r=0;r<t;r++){var s=e[r];if(n.$isDecoratorNode(s))return!1;if(n.$isElementNode(s)){if(!n.$isParagraphNode(s)||0!==s.__indent)return!1;let a=(s=s.getChildren()).length;for(let o=0;o<a;o++)if(!n.$isTextNode(s[r]))return!1}}return!0}t.$canShowPlaceholder=a,t.$canShowPlaceholderCurry=function(e){return()=>a(e)},t.$findTextIntersectionFromCharacters=function(e,t){var r=e.getFirstChild();e=0;e:for(;null!==r;){if(n.$isElementNode(r)){var i=r.getFirstChild();if(null!==i){r=i;continue}}else if(n.$isTextNode(r)){if(e+(i=r.getTextContentSize())>t)return{node:r,offset:t-e};e+=i}if(null!==(i=r.getNextSibling()))r=i;else{for(r=r.getParent();null!==r;){if(null!==(i=r.getNextSibling())){r=i;continue e}r=r.getParent()}break}}return null},t.$isRootTextContentEmpty=i,t.$isRootTextContentEmptyCurry=function(e,t){return()=>i(e,t)},t.$rootTextContent=s,t.registerLexicalTextEntity=function(e,t,r,i){let s=e=>{let t=n.$createTextNode(e.getTextContent());t.setFormat(e.getFormat()),e.replace(t)};return[e.registerNodeTransform(n.TextNode,e=>{if(e.isSimpleText()){var a=e.getPreviousSibling(),o=e.getTextContent(),l=e;if(n.$isTextNode(a)){var c=a.getTextContent(),u=t(c+o);if(a instanceof r){if(null===u||0!==a.getLatest().__mode){s(a);return}if(0<(u=u.end-c.length)){l=c+(l=o.slice(0,u)),a.select(),a.setTextContent(l),u===o.length?e.remove():(a=o.slice(u),e.setTextContent(a));return}}else if(null===u||u.start<c.length)return}for(;;){let d;if(o=u=null===(e=t(o))?"":o.slice(e.end),""===u){if(c=l.getNextSibling(),n.$isTextNode(c)){if(u=l.getTextContent()+c.getTextContent(),null===(u=t(u))){c instanceof r?s(c):c.markDirty();break}if(0!==u.start)break}}else if(null!==(c=t(u))&&0===c.start)break;if(null===e||!(0===e.start&&n.$isTextNode(a)&&a.isTextEntity())&&(0===e.start?[d,l]=l.splitText(e.end):[,d,l]=l.splitText(e.start,e.end),(e=i(d)).setFormat(d.getFormat()),d.replace(e),null==l))break}}}),e=e.registerNodeTransform(r,e=>{var i=e.getTextContent();let a=t(i);null===a||0!==a.start?s(e):i.length>a.end?e.splitText(a.end):(i=e.getPreviousSibling(),n.$isTextNode(i)&&i.isTextEntity()&&(s(i),s(e)),i=e.getNextSibling(),n.$isTextNode(i)&&i.isTextEntity()&&(s(i),e instanceof r&&s(e)))})]}},76969:function(e,t,r){"use strict";let n=r(87502);e.exports=n},87502:function(e,t,r){"use strict";var n=r(89408),i=r(32998);function s(e,t){for(let r of t)if(e.type.startsWith(r))return!0;return!1}function a(e,t){for(;e!==i.$getRoot()&&null!=e;){if(t(e))return e;e=e.getParent()}return null}function o(e){return 1===e.nodeType}t.$splitNode=i.$splitNode,t.$dfs=function(e,t){let r=[];e=(e||i.$getRoot()).getLatest(),t=t||(i.$isElementNode(e)?e.getLastDescendant():e);for(var n=e,s=0;null!==(n=n.getParent());)s++;for(n=s;null!==e&&!e.is(t);)if(r.push({depth:n,node:e}),i.$isElementNode(e)&&0<e.getChildrenSize())e=e.getFirstChild(),n++;else for(s=null;null===s&&null!==e;)null===(s=e.getNextSibling())?(e=e.getParent(),n--):e=s;return null!==e&&e.is(t)&&r.push({depth:n,node:e}),r},t.$findMatchingParent=a,t.$getNearestBlockElementAncestorOrThrow=function(e){let t=a(e,e=>i.$isElementNode(e)&&!e.isInline());return i.$isElementNode(t)||function(e){let t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(4,e.__key),t},t.$getNearestNodeOfType=function(e,t){for(;null!=e;){if(e instanceof t)return e;e=e.getParent()}return null},t.$insertNodeToNearestRoot=function(e){var t=i.$getSelection()||i.$getPreviousSelection();if(i.$isRangeSelection(t)){var{focus:r}=t;if(t=r.getNode(),r=r.offset,i.$isRootOrShadowRoot(t))null==(r=t.getChildAtIndex(r))?t.append(e):r.insertBefore(e),e.selectNext();else{let n,s;i.$isTextNode(t)?(n=t.getParentOrThrow(),s=t.getIndexWithinParent(),0<r&&(s+=1,t.splitText(r))):(n=t,s=r),[,t]=i.$splitNode(n,s),t.insertBefore(e),t.selectStart()}}else i.$isNodeSelection(t)||i.DEPRECATED_$isGridSelection(t)?(t=t.getNodes())[t.length-1].getTopLevelElementOrThrow().insertAfter(e):i.$getRoot().append(e),t=i.$createParagraphNode(),e.insertAfter(t),t.select();return e.getLatest()},t.$restoreEditorState=function(e,t){let r=new Map,s=e._pendingEditorState;for(let[a,o]of t._nodeMap){let l=n.$cloneWithProperties(o);i.$isTextNode(l)&&(l.__text=o.__text),r.set(a,l)}s&&(s._nodeMap=r),e._dirtyType=2,e=t._selection,i.$setSelection(null===e?null:e.clone())},t.$wrapNodeInElement=function(e,t){return t=t(),e.replace(t),t.append(e),t},t.addClassNamesToElement=function(e,...t){t.forEach(t=>{"string"==typeof t&&(t=t.split(" ").filter(e=>""!==e),e.classList.add(...t))})},t.isHTMLAnchorElement=function(e){return o(e)&&"A"===e.tagName},t.isHTMLElement=o,t.isMimeType=s,t.mediaFileReader=function(e,t){let r=e[Symbol.iterator]();return new Promise((e,n)=>{let i=[],a=()=>{let{done:o,value:l}=r.next();if(o)return e(i);let c=new FileReader;c.addEventListener("error",n),c.addEventListener("load",()=>{let e=c.result;"string"==typeof e&&i.push({file:l,result:e}),a()}),s(l,t)?c.readAsDataURL(l):a()};a()})},t.mergeRegister=function(...e){return()=>{e.forEach(e=>e())}},t.objectKlassEquals=function(e,t){return null!==e&&Object.getPrototypeOf(e).constructor.name===t.name},t.registerNestedElementResolver=function(e,t,r,n){return e.registerNodeTransform(t,e=>{e:{for(var i=e.getChildren(),s=0;s<i.length;s++)if(i[s]instanceof t){i=null;break e}for(i=e;null!==i;)if(s=i,(i=i.getParent())instanceof t){i={child:s,parent:i};break e}i=null}if(null!==i){let{child:a,parent:o}=i;if(a.is(e)){if(n(o,e),i=(e=a.getNextSiblings()).length,o.insertAfter(a),0!==i){s=r(o),a.insertAfter(s);for(let l=0;l<i;l++)s.append(e[l])}o.canBeEmpty()||0!==o.getChildrenSize()||o.remove()}}})},t.removeClassNamesFromElement=function(e,...t){t.forEach(t=>{"string"==typeof t&&e.classList.remove(...t.split(" "))})}},35385:function(e,t,r){"use strict";let n,i,s;r.d(t,{e:function(){return sM}});var a,o,l,c,u,d,p,h,f,m=r(69753),g=r(67294),y=r.t(g,2),v=r(18607);function b(){let e=(0,v.g)();return e.provider}var w=r(61688);let _=w.useSyncExternalStore;var x=r(32161),S=r(89886),T=r(30081),E=r(33989);class C extends E.l{constructor(e,t){super(),this.client=e,this.setOptions(t),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.client.defaultMutationOptions(e),(0,x.VS)(t,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this})}onUnsubscribe(){if(!this.listeners.length){var e;null==(e=this.currentMutation)||e.removeObserver(this)}}onMutationUpdate(e){this.updateResult();let t={listeners:!0};"success"===e.type?t.onSuccess=!0:"error"===e.type&&(t.onError=!0),this.notify(t)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:void 0!==e?e:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){let e=this.currentMutation?this.currentMutation.state:(0,S.R)(),t={...e,isLoading:"loading"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset};this.currentResult=t}notify(e){T.V.batch(()=>{if(this.mutateOptions&&this.hasListeners()){var t,r,n,i,s,a,o,l;e.onSuccess?(null==(t=(r=this.mutateOptions).onSuccess)||t.call(r,this.currentResult.data,this.currentResult.variables,this.currentResult.context),null==(n=(i=this.mutateOptions).onSettled)||n.call(i,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)):e.onError&&(null==(s=(a=this.mutateOptions).onError)||s.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),null==(o=(l=this.mutateOptions).onSettled)||o.call(l,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context))}e.listeners&&this.listeners.forEach(e=>{e(this.currentResult)})})}}var k=r(51098);function R(e,t){return"function"==typeof e?e(...t):!!e}function P(){}var D=r(15761),A=r(72379);class N extends E.l{constructor(e,t){super(),this.client=e,this.options=t,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(t)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.length&&(this.currentQuery.addObserver(this),L(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.listeners.length||this.destroy()}shouldFetchOnReconnect(){return O(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return O(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=[],this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(e,t){let r=this.options,n=this.currentQuery;if(this.options=this.client.defaultQueryOptions(e),(0,x.VS)(r,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled)throw Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=r.queryKey),this.updateQuery();let i=this.hasListeners();i&&I(this.currentQuery,n,this.options,r)&&this.executeFetch(),this.updateResult(t),i&&(this.currentQuery!==n||this.options.enabled!==r.enabled||this.options.staleTime!==r.staleTime)&&this.updateStaleTimeout();let s=this.computeRefetchInterval();i&&(this.currentQuery!==n||this.options.enabled!==r.enabled||s!==this.currentRefetchInterval)&&this.updateRefetchInterval(s)}getOptimisticResult(e){let t=this.client.getQueryCache().build(this.client,e);return this.createResult(t,e)}getCurrentResult(){return this.currentResult}trackResult(e){let t={};return Object.keys(e).forEach(r=>{Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(r),e[r])})}),t}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:e,...t}={}){return this.fetch({...t,meta:{refetchPage:e}})}fetchOptimistic(e){let t=this.client.defaultQueryOptions(e),r=this.client.getQueryCache().build(this.client,t);return r.isFetchingOptimistic=!0,r.fetch().then(()=>this.createResult(r,t))}fetch(e){var t;return this.executeFetch({...e,cancelRefetch:null==(t=e.cancelRefetch)||t}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(e){this.updateQuery();let t=this.currentQuery.fetch(this.options,e);return null!=e&&e.throwOnError||(t=t.catch(x.ZT)),t}updateStaleTimeout(){if(this.clearStaleTimeout(),x.sk||this.currentResult.isStale||!(0,x.PN)(this.options.staleTime))return;let e=(0,x.Kp)(this.currentResult.dataUpdatedAt,this.options.staleTime);this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},e+1)}computeRefetchInterval(){var e;return"function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.currentResult.data,this.currentQuery):null!=(e=this.options.refetchInterval)&&e}updateRefetchInterval(e){this.clearRefetchInterval(),this.currentRefetchInterval=e,!x.sk&&!1!==this.options.enabled&&(0,x.PN)(this.currentRefetchInterval)&&0!==this.currentRefetchInterval&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||D.j.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(e,t){let r;let n=this.currentQuery,i=this.options,s=this.currentResult,a=this.currentResultState,o=this.currentResultOptions,l=e!==n,c=l?e.state:this.currentQueryInitialState,u=l?this.currentResult:this.previousQueryResult,{state:d}=e,{dataUpdatedAt:p,error:h,errorUpdatedAt:f,fetchStatus:m,status:g}=d,y=!1,v=!1;if(t._optimisticResults){let b=this.hasListeners(),w=!b&&L(e,t),_=b&&I(e,n,t,i);(w||_)&&(m=(0,A.Kw)(e.options.networkMode)?"fetching":"paused",p||(g="loading")),"isRestoring"===t._optimisticResults&&(m="idle")}if(t.keepPreviousData&&!d.dataUpdatedAt&&null!=u&&u.isSuccess&&"error"!==g)r=u.data,p=u.dataUpdatedAt,g=u.status,y=!0;else if(t.select&&void 0!==d.data){if(s&&d.data===(null==a?void 0:a.data)&&t.select===this.selectFn)r=this.selectResult;else try{this.selectFn=t.select,r=t.select(d.data),r=(0,x.oE)(null==s?void 0:s.data,r,t),this.selectResult=r,this.selectError=null}catch(S){this.selectError=S}}else r=d.data;if(void 0!==t.placeholderData&&void 0===r&&"loading"===g){let T;if(null!=s&&s.isPlaceholderData&&t.placeholderData===(null==o?void 0:o.placeholderData))T=s.data;else if(T="function"==typeof t.placeholderData?t.placeholderData():t.placeholderData,t.select&&void 0!==T)try{T=t.select(T),this.selectError=null}catch(E){this.selectError=E}void 0!==T&&(g="success",r=(0,x.oE)(null==s?void 0:s.data,T,t),v=!0)}this.selectError&&(h=this.selectError,r=this.selectResult,f=Date.now(),g="error");let C="fetching"===m,k="loading"===g,R="error"===g,P={status:g,fetchStatus:m,isLoading:k,isSuccess:"success"===g,isError:R,isInitialLoading:k&&C,data:r,dataUpdatedAt:p,error:h,errorUpdatedAt:f,failureCount:d.fetchFailureCount,failureReason:d.fetchFailureReason,errorUpdateCount:d.errorUpdateCount,isFetched:d.dataUpdateCount>0||d.errorUpdateCount>0,isFetchedAfterMount:d.dataUpdateCount>c.dataUpdateCount||d.errorUpdateCount>c.errorUpdateCount,isFetching:C,isRefetching:C&&!k,isLoadingError:R&&0===d.dataUpdatedAt,isPaused:"paused"===m,isPlaceholderData:v,isPreviousData:y,isRefetchError:R&&0!==d.dataUpdatedAt,isStale:M(e,t),refetch:this.refetch,remove:this.remove};return P}updateResult(e){let t=this.currentResult,r=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,(0,x.VS)(r,t))return;this.currentResult=r;let n={cache:!0};(null==e?void 0:e.listeners)!==!1&&(()=>{if(!t)return!0;let{notifyOnChangeProps:e}=this.options;if("all"===e||!e&&!this.trackedProps.size)return!0;let r=new Set(null!=e?e:this.trackedProps);return this.options.useErrorBoundary&&r.add("error"),Object.keys(this.currentResult).some(e=>{let n=this.currentResult[e]!==t[e];return n&&r.has(e)})})()&&(n.listeners=!0),this.notify({...n,...e})}updateQuery(){let e=this.client.getQueryCache().build(this.client,this.options);if(e===this.currentQuery)return;let t=this.currentQuery;this.currentQuery=e,this.currentQueryInitialState=e.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(null==t||t.removeObserver(this),e.addObserver(this))}onQueryUpdate(e){let t={};"success"===e.type?t.onSuccess=!e.manual:"error"!==e.type||(0,A.DV)(e.error)||(t.onError=!0),this.updateResult(t),this.hasListeners()&&this.updateTimers()}notify(e){T.V.batch(()=>{var t,r,n,i,s,a,o,l;e.onSuccess?(null==(t=(r=this.options).onSuccess)||t.call(r,this.currentResult.data),null==(n=(i=this.options).onSettled)||n.call(i,this.currentResult.data,null)):e.onError&&(null==(s=(a=this.options).onError)||s.call(a,this.currentResult.error),null==(o=(l=this.options).onSettled)||o.call(l,void 0,this.currentResult.error)),e.listeners&&this.listeners.forEach(e=>{e(this.currentResult)}),e.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function L(e,t){return!1!==t.enabled&&!e.state.dataUpdatedAt&&!("error"===e.state.status&&!1===t.retryOnMount)||e.state.dataUpdatedAt>0&&O(e,t,t.refetchOnMount)}function O(e,t,r){if(!1!==t.enabled){let n="function"==typeof r?r(e):r;return"always"===n||!1!==n&&M(e,t)}return!1}function I(e,t,r,n){return!1!==r.enabled&&(e!==t||!1===n.enabled)&&(!r.suspense||"error"!==e.state.status)&&M(e,r)}function M(e,t){return e.isStaleByTime(t.staleTime)}let j=g.createContext((i=!1,{clearReset:()=>{i=!1},reset:()=>{i=!0},isReset:()=>i})),F=()=>g.useContext(j),$=g.createContext(!1),B=()=>g.useContext($);$.Provider;let U=(e,t)=>{(e.suspense||e.useErrorBoundary)&&!t.isReset()&&(e.retryOnMount=!1)},q=e=>{g.useEffect(()=>{e.clearReset()},[e])},z=({result:e,errorResetBoundary:t,useErrorBoundary:r,query:n})=>e.isError&&!t.isReset()&&!e.isFetching&&R(r,[e.error,n]),V=e=>{e.suspense&&"number"!=typeof e.staleTime&&(e.staleTime=1e3)},H=(e,t)=>e.isLoading&&e.isFetching&&!t,W=(e,t,r)=>(null==e?void 0:e.suspense)&&H(t,r),Z=(e,t,r)=>t.fetchOptimistic(e).then(({data:t})=>{null==e.onSuccess||e.onSuccess(t),null==e.onSettled||e.onSettled(t,null)}).catch(t=>{r.clearReset(),null==e.onError||e.onError(t),null==e.onSettled||e.onSettled(void 0,t)});var K=r(45216),G=r(38934);let Y=["cacheTime","networkMode","onError","onMutate","onSettled","onSuccess","retry","retryDelay","useErrorBoundary","meta"],J=["cacheTime","enabled","networkMode","initialData","initialDataUpdatedAt","isDataEqual","keepPreviousData","meta","notifyOnChangeProps","onError","onSettled","onSuccess","placeholderData","refetchInterval","refetchIntervalInBackground","refetchOnMount","refetchOnReconnect","refetchOnWindowFocus","retry","retryOnMount","retryDelay","select","staleTime","structuralSharing","suspense","useErrorBoundary"];function Q(e){let{data:t,dataUpdatedAt:r,error:n,errorUpdatedAt:i,failureCount:s,isError:a,isFetched:o,isFetchedAfterMount:l,isFetching:c,isPaused:u,isLoadingError:d,isPlaceholderData:p,isPreviousData:h,isRefetchError:f,isRefetching:m,isStale:y,isSuccess:v,refetch:b,remove:w,status:S,fetchStatus:E}=function(e,t,r){let n=(0,x._v)(e,void 0,void 0);return function(e,t){let r=(0,k.NL)({context:e.context}),n=B(),i=F(),s=r.defaultQueryOptions(e);s._optimisticResults=n?"isRestoring":"optimistic",s.onError&&(s.onError=T.V.batchCalls(s.onError)),s.onSuccess&&(s.onSuccess=T.V.batchCalls(s.onSuccess)),s.onSettled&&(s.onSettled=T.V.batchCalls(s.onSettled)),V(s),U(s,i),q(i);let[a]=g.useState(()=>new t(r,s)),o=a.getOptimisticResult(s);if(_(g.useCallback(e=>n?()=>void 0:a.subscribe(T.V.batchCalls(e)),[a,n]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),g.useEffect(()=>{a.setOptions(s,{listeners:!1})},[s,a]),W(s,o,n))throw Z(s,a,i);if(z({result:o,errorResetBoundary:i,useErrorBoundary:s.useErrorBoundary,query:a.getCurrentQuery()}))throw o.error;return s.notifyOnChangeProps?o:a.trackResult(o)}(n,N)}({...e,context:G.Q}),C=(0,g.useMemo)(()=>"loading"===S&&"idle"===E?"idle":S,[S,E]),R=(0,g.useMemo)(()=>"idle"===C,[C]),P=(0,g.useMemo)(()=>"loading"===C&&"fetching"===E,[C,E]);return{data:t,error:n,isError:a,isFetched:o,isFetching:c,isIdle:R,isLoading:P,isRefetching:m,isSuccess:v,refetch:b,status:C,internal:{fetchStatus:E,dataUpdatedAt:r,errorUpdatedAt:i,failureCount:s,isFetchedAfterMount:l,isLoadingError:d,isPaused:u,isPlaceholderData:p,isPreviousData:h,isRefetchError:f,isStale:y,remove:w}}}var X=r(3255),ee=r(52798);function et(){return(0,ee.useSyncExternalStoreWithSelector)(e=>(function(e){let t=(0,v.g)(),r=async()=>e(b()),n=t.subscribe(({provider:e})=>e,r);return n})(e),()=>b(),()=>b(),e=>e)}let er=(e,t)=>[{entity:"getPlaybackInfo",args:e,config:t}],en=(e,t,r,n,i)=>{let s=g.useMemo(()=>e?t??r:n??i,[e,t,r,n,i]);return g.useMemo(()=>g.isValidElement(s)?g.cloneElement(s):null,[s])},ei=(e,t)=>g.useMemo(()=>e&&g.isValidElement(e)?g.cloneElement(e):t,[e,t]);var es=r(84688),ea=r(5947),eo=r(85893);let el=({streamKey:e,children:t,controls:r,theme:n,title:i,onError:s,aspectRatio:a="16to9",objectFit:o="contain",mediaElementRef:l,onPlaybackStatusUpdate:c,playbackStatusSelector:u,renderChildrenOutsideContainer:d})=>{let p=et(),h=g.useMemo(()=>{let t=p.getConfig().webrtcIngestBaseUrl;return e&&t?`${t}/${e}`:null},[e,p]),[f,m]=g.useState(null),[y,v]=g.useState(null),b=g.useCallback(e=>{let t=e?{type:(0,es.Qi)(e)?"access-control":(0,es.kN)(e)?"offline":"unknown",message:e?.message??"Error with playback."}:null;return v(t),e&&(console.warn(e),s?.(e)),e},[s]);g.useEffect(()=>{e&&v(null)},[e]);let w=g.useCallback(e=>{e&&(m(e),l?.(e))},[l]),_=g.useMemo(()=>({ref:w,ingestUrl:h,objectFit:o,options:r,broadcastError:y,onBroadcastError:b,onPlaybackStatusUpdate:c,playbackStatusSelector:u}),[y,w,r,h,o,b,c,u]),x=g.useMemo(()=>({autoPlay:!1,playbackId:void 0,muted:!1,priority:!1,ingestUrl:h??void 0}),[h]),S=g.useMemo(()=>({hidePosterOnPlayed:!0,showLoadingSpinner:!0,loadingText:null,showUploadingIndicator:!1,error:y}),[y]),T=g.useMemo(()=>({ingestUrl:h,children:t,controls:r,theme:n,title:i,aspectRatio:a,objectFit:o,onBroadcastError:b,onPlaybackStatusUpdate:c,renderChildrenOutsideContainer:d}),[h,a,t,r,o,n,i,b,c,d]);return{mediaElement:f,broadcastProps:_,mediaControllerProps:x,controlsContainerProps:S,props:T}},ec=e=>{let[t,r]=g.useState(null),{onChange:n,thumbIcon:i,defaultThumbIcon:s,sliderWidth:a,ariaName:o,isActive:l,leftCss:c,middleCss:u,rightCss:d,thumbCss:p}=e,h=l||null!==t,f=g.useCallback(async(e,t)=>{if(a){let i=Math.min(Math.max(0,e/a),1);t?(await n?.(i),r(null)):r(i)}},[n,a]),{value:m,middleValue:y}=g.useMemo(()=>{let r=null!==t?t:isNaN(e.value)?0:e.value,n=null!==t?0:!e.secondaryValue||isNaN(e.value)||isNaN(e.secondaryValue)?0:e.secondaryValue-e.value;return{value:r,middleValue:n>0?n:0}},[t,e.value,e.secondaryValue]),v=g.useMemo(()=>({css:{...p,zIndex:1},size:h?"active":"default"}),[p,h]),b=ei(i,g.cloneElement(s,v)),w=g.useMemo(()=>1-(m+y),[m,y]),_=g.useMemo(()=>Math.round(100*m),[m]);return{title:`${_}% ${o}`,value:_,active:h,handle:b,sliderProps:{onUpdate:f},sliderLeftTrackProps:{shown:m>.001,rounded:1!==m||h?"left":"full",css:{...c,flex:m}},sliderMiddleTrackProps:{shown:(y??0)>0,rounded:1===y?h?"right":"full":m<=.001?"left":0===w?"right":"none",css:{...u,flex:y}},sliderRightTrackProps:{shown:(w??0)>0,rounded:m<=.001&&!h?"full":"right",css:{...d,flex:w}}}},eu=e=>{let{togglePlay:t,canPlay:r,buffered:n,isBroadcast:i,_updateLastInteraction:s}=e,a=g.useMemo(()=>r||0!==n,[r,n]),o=g.useCallback(()=>{a&&(i?s():t())},[t,a,i,s]);return{isLoaded:a,containerProps:{onPress:o}}},ed=e=>{let{enterIcon:t,exitIcon:r,onPress:n,fullscreen:i,pictureInPicture:s,requestToggleFullscreen:a,defaultEnterIcon:o,defaultExitIcon:l,...c}=e,u=g.useCallback(async()=>{await n?.(),await a()},[n,a]),d=en(i,r,l,t,o),p=g.useMemo(()=>i?"Exit full screen (f)":"Full screen (f)",[i]);return{title:p,buttonProps:s?null:{onPress:u,children:d,...c}}},ep=e=>{let{playIcon:t,pauseIcon:r,onPress:n,togglePlay:i,playing:s,defaultPauseIcon:a,defaultPlayIcon:o,...l}=e,c=async()=>{await n?.(),await i()},u=en(s,r,a,t,o),d=g.useMemo(()=>s?"Pause (k)":"Play (k)",[s]);return{title:d,buttonProps:{onPress:c,children:u,...l}}},eh=e=>{let{duration:t,progress:r,requestSeek:n,buffered:i,live:s,...a}=e,[o,l,c]=g.useMemo(()=>[0,t&&!isNaN(t)?t:0,r&&!isNaN(r)?r:0],[t,r]),u=g.useMemo(()=>c/(l-o),[o,l,c]),d=g.useMemo(()=>i/(l-o),[o,l,i]),p=g.useCallback(async t=>{let r=t*(l-o);await e?.onSeek?.(r),n(r)},[l,o,n,e]),h=g.useMemo(()=>(t/60).toFixed(1),[t]);return{isVisible:!s,title:`progress of ${h} minutes`,progressProps:{onChange:p,value:u,secondaryValue:d,leftCss:{backgroundColor:"$progressLeft"},middleCss:{backgroundColor:"$progressMiddle"},rightCss:{backgroundColor:"$progressRight"},thumbCss:{backgroundColor:"$progressThumb"},...a}}},ef=e=>{if(null!=e&&!isNaN(e)&&isFinite(e)){let t=Math.round(e),r=Math.floor(t/3600),n=Math.floor(t%60);return r>0?`${r}:${Math.floor(t%3600/60).toString().padStart(2,"0")}:${n<10?"0":""}${n}`:`${Math.floor(t/60)}:${n.toString().padStart(2,"0")}`}return"0:00"},em=e=>{let{duration:t,progress:r,live:n}=e,i=g.useMemo(()=>ef(r??null),[r]),s=g.useMemo(()=>ef(t??null),[t]),a=g.useMemo(()=>n?i:`${i} / ${s}`,[i,s,n]);return{title:a,live:n}},eg=e=>{let{unmutedIcon:t,mutedIcon:r,onPress:n,showSlider:i=!0,defaultUnmutedIcon:s,defaultMutedIcon:a,requestVolume:o,requestToggleMute:l,isVolumeChangeSupported:c,muted:u,...d}=e,p=g.useCallback(async()=>{await n?.(),l()},[n,l]),h=en(!u,t,s,r,a),f=g.useMemo(()=>u?"Unmute (m)":"Mute (m)",[u]),m=g.useCallback(async e=>{o(e)},[o]);return{title:f,buttonProps:{onPress:p,children:h,...d},progressProps:{shown:c&&i,onChange:m,leftCss:{backgroundColor:"$volumeLeft"},middleCss:{backgroundColor:"$volumeMiddle"},rightCss:{backgroundColor:"$volumeRight"},thumbCss:{backgroundColor:"$volumeThumb"}}}},ey=({decentralizedSrcOrPlaybackId:e,playbackId:t,refetchPlaybackInfoInterval:r,autoUrlUpload:n,onAssetStatusChange:i})=>{let{mutate:s,status:a,progress:o}=function(e){let t=et(),[r,n]=(0,g.useState)(void 0),i=function(e,t,r){let{data:n,error:i,isError:s,isIdle:a,isLoading:o,isSuccess:l,mutate:c,mutateAsync:u,reset:d,variables:p,status:h}=function(e,t,r){let n=(0,x.lV)(e,t,void 0),i=(0,k.NL)({context:n.context}),[s]=g.useState(()=>new C(i,n));g.useEffect(()=>{s.setOptions(n)},[s,n]);let a=_(g.useCallback(e=>s.subscribe(T.V.batchCalls(e)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),o=g.useCallback((e,t)=>{s.mutate(e,t).catch(P)},[s]);if(a.error&&R(s.options.useErrorBoundary,[a.error]))throw a.error;return{...a,mutate:o,mutateAsync:a.mutate}}(t,{context:G.Q,mutationKey:r,..."object"==typeof e?.mutationConfig?(0,K.p)(e.mutationConfig,...Y):{},useErrorBoundary:!1});return(0,g.useMemo)(()=>({data:n,error:i,isError:s,isIdle:a,isLoading:o,isSuccess:l,mutate:e?()=>c({...e,config:void 0}):void 0,mutateAsync:()=>e?u({...e,config:void 0}):void 0,variables:p,status:h,internal:{reset:d}}),[n,i,s,a,o,l,c,u,d,p,h,e])}(e,async e=>(function(e){let t=b();return t.createAsset(e)})({...e,onProgress:e=>n(e)}),[{entity:"createAsset",livepeerProvider:t}]);return(0,g.useMemo)(()=>({...i,progress:r}),[i,r])}(e?{sources:[{name:e.id,url:e.url}]}:null);g.useEffect(()=>{o?.[0]&&i(o[0])},[o,i]);let{data:l,error:c}=function(e){let t=et();return Q(function(e,t){let r="string"==typeof e?e:{playbackId:e?.playbackId??""};return{clearClient:e.clearClient,queryKey:er(r,t.getConfig()),queryFn:async()=>(function(e){let t=b();return t.getPlaybackInfo(e)})(e),enabled:Boolean("string"==typeof e?e:e?.playbackId),..."object"==typeof e?(0,X.ei)(e,...J):{}}}(e,t))}({playbackId:e?.id??t??void 0,staleTime:864e5,refetchInterval:e=>!e&&r}),u=g.useMemo(()=>c?.code,[c]);return g.useEffect(()=>{n&&s&&"idle"===a&&404===u&&s()},[n,u,s,a]),l},ev="https://w3s.link",eb="https://arweave.net",ew=({src:e,playbackId:t,jwt:r,refetchPlaybackInfoInterval:n,autoUrlUpload:i={fallback:!0},playbackInfo:s,screenWidth:a,accessKey:o,onAccessKeyRequest:l})=>{let[c,u]=g.useState(null),d=g.useCallback(e=>{u(e)},[u]),p=g.useMemo(()=>t?(0,X.lV)(t)??(0,X.qv)(t):Array.isArray(e)?null:(0,X.lV)(e)??(0,X.qv)(e),[t,e]),h=ey({decentralizedSrcOrPlaybackId:p,playbackId:t,refetchPlaybackInfoInterval:n,autoUrlUpload:i,onAssetStatusChange:d}),f=g.useMemo(()=>s??h,[s,h]),m=g.useCallback(async()=>{if(o)return o;if(f?.meta?.playbackPolicy?.type==="webhook"){let e=await l?.(f.meta.playbackPolicy);return e??null}return null},[o,l,f]),{data:y}=Q({queryKey:[f,l,o],queryFn:m,enabled:Boolean(f||o),staleTime:1/0}),[v,b]=g.useState([]);g.useEffect(()=>{let e=(a??1280)*2.5,t=(s??h)?.meta?.source?.map(t=>({url:t?.url,screenWidthDelta:t?.width?Math.abs(e-t.width):t?.url.includes("static360p")||t?.url.includes("low-bitrate")?Math.abs(e-480):t?.url.includes("static720p")?Math.abs(e-1280):t?.url.includes("static1080p")?Math.abs(e-1920):t?.url.includes("static2160p")?Math.abs(e-3840):null}))??null;t&&b(t)},[s,h,a]);let w=g.useMemo(()=>{if(p&&i){let t="boolean"!=typeof i?{arweaveGateway:i.arweaveGateway??eb,ipfsGateway:i.ipfsGateway??ev}:{arweaveGateway:eb,ipfsGateway:ev};if(p.url.startsWith("ar://")){let{host:r}=new URL(t.arweaveGateway),n={type:"video",mime:"video/mp4",src:`https://${r}/${p.id}`};return n}if(!p.url.startsWith("ipfs://"))return{type:"video",mime:"video/mp4",src:e};{let{host:s}=new URL(t.ipfsGateway),a={type:"video",mime:"video/mp4",src:`https://${s}/ipfs/${p.id}`};return a}}return null},[i,p,e]),[_,x]=g.useMemo(()=>{let t=["none",null],n=v.length>0?v.map(e=>e.url):"string"==typeof e?[e]:e;if(!n)return t;let i=n.map(e=>{if(r){let t=new URL(e);return t.searchParams.append("jwt",r),t.toString()}if(y){let n=new URL(e);return n.searchParams.append("accessKey",y),n.toString()}return e}),s=i.map(e=>"string"==typeof e?(0,ea.g)(e):null).filter(e=>e);return s?.[0]?.type==="audio"?["audio",s.filter(e=>"audio"===e.type)]:s?.[0]?.type==="video"||s?.[0]?.type==="hls"||s?.[0]?.type==="webrtc"?["video",s.filter(e=>"video"===e.type||"hls"===e.type||"webrtc"===e.type)]:t},[v,e,r,y]),S=g.useMemo(()=>{if(!x&&w)return[w];if("video"===_){let e=[...x];return e.sort((e,t)=>{if("video"===e.type&&"video"===t.type){let r=v.find(t=>t.url===e.src),n=v.find(e=>e.url===t.src);return n?.screenWidthDelta&&r?.screenWidthDelta?r.screenWidthDelta-n.screenWidthDelta:1}return"video"===e.type&&("hls"===t.type||"webrtc"===t.type)||"webrtc"===e.type&&"hls"===t.type?-1:1})}return x},[x,_,w,v]);return{source:S,uploadStatus:c}},e_=({autoPlay:e,children:t,controls:r,muted:n,playbackId:i,src:s,playbackInfo:a,theme:o,title:l,poster:c,loop:u,onStreamStatusChange:d,onAccessControlError:p,onError:h,onSourceUpdated:f,jwt:m,viewerId:y,refetchPlaybackInfoInterval:v=5e3,autoUrlUpload:b=!0,accessKey:w,onAccessKeyRequest:_,showLoadingSpinner:x=!0,showUploadingIndicator:S=!0,showTitle:T=!0,priority:E,aspectRatio:C="16to9",objectFit:k="contain",mediaElementRef:R,_isCurrentlyShown:P,onPlaybackStatusUpdate:D,playbackStatusSelector:A,renderChildrenOutsideContainer:N},{_screenWidth:L})=>{let[O,I]=g.useState(null),{source:M,uploadStatus:j}=ew({src:s,playbackId:i,jwt:m,refetchPlaybackInfoInterval:v,autoUrlUpload:b,screenWidth:L,playbackInfo:a,accessKey:w,onAccessKeyRequest:_}),[F,$]=g.useState(null),B=g.useCallback(e=>{let t=e?{type:(0,es.Qi)(e)?"access-control":(0,es.kN)(e)?"offline":"unknown",message:e?.message??"Error with playback."}:null;$(t);try{t&&console.log(t),e?t?.type==="offline"?d?.(!1):t?.type==="access-control"?p?.(Error(t.message)):t?.message&&h?.(Error(t.message)):d?.(!0)}catch(r){}return t},[p,d,h]);g.useEffect(()=>{M&&(f?.(M),$(null))},[M,f]);let[U,q]=g.useState(!1),z=g.useMemo(()=>E||P||U,[E,P,U]);g.useEffect(()=>{P&&!U&&q(!0)},[P,U]);let V=g.useMemo(()=>Array.isArray(M)&&M?.[0]?.type!=="audio"||void 0,[M]),H=g.useCallback(e=>{e&&(I(e),R?.(e))},[R]),W=g.useMemo(()=>S?j?.phase==="processing"&&(0,X.hj)(j?.progress)?`Processing: ${(100*Number(j?.progress)).toFixed(0)}%`:j?.phase==="failed"?"Upload Failed":null:null,[j,S]),Z=g.useMemo(()=>({ref:H,autoPlay:e,playbackId:i,muted:n,poster:c,loop:u,objectFit:k,options:r,priority:E,playbackError:F,onPlaybackError:B,isCurrentlyShown:P,viewerId:y,onPlaybackStatusUpdate:D,playbackStatusSelector:A}),[H,i,e,n,c,u,k,r,E,F,B,P,y,D,A]),K=g.useMemo(()=>({autoPlay:e,playbackId:i??void 0,muted:n,priority:E,viewerId:y}),[e,i,n,E,y]),G=g.useMemo(()=>({hidePosterOnPlayed:V,showLoadingSpinner:x,loadingText:W,showUploadingIndicator:S,error:F}),[V,x,W,S,F]),Y=g.useMemo(()=>({autoPlay:e,children:t,controls:r,playbackId:i,src:s,theme:o,title:l,poster:c,loop:u,jwt:m,refetchPlaybackInfoInterval:v,autoUrlUpload:b,showTitle:T,aspectRatio:C,objectFit:k,renderChildrenOutsideContainer:N}),[e,t,r,i,s,o,l,c,u,m,v,b,T,C,k,N]),J=g.useMemo(()=>z?M:null,[z,M]);return{mediaElement:O,source:J,uploadStatus:j,playerProps:Z,mediaControllerProps:K,controlsContainerProps:G,props:Y}};r(41539),r(39714);var ex=r(51115),eS=r(24270),eT=r(88462);r(4480),r(21249),r(23157),r(47042),r(66992),r(78783),r(33948),r(60285),r(41637),r(88674);var eE=r(54098),eC=r.n(eE),ek=r(4792);r(74916),r(15306),r(26699),r(32023);var eR=function(){if(!(0,ek.i)())return!1;var e,t,r,n,i,s,a,o,l,c,u,d,p=!!(null!==(e=window)&&void 0!==e&&e.RTCPeerConnection||null!==(t=window)&&void 0!==t&&t.webkitRTCPeerConnection||null!==(r=window)&&void 0!==r&&r.mozRTCPeerConnection),h=!!(null!==(n=navigator)&&void 0!==n&&n.getUserMedia||null!==(i=navigator)&&void 0!==i&&null!==(s=i.mediaDevices)&&void 0!==s&&s.getUserMedia||null!==(a=navigator)&&void 0!==a&&a.webkitGetUserMedia||null!==(o=navigator)&&void 0!==o&&o.mozGetUserMedia||null!==(l=navigator)&&void 0!==l&&l.msGetUserMedia),f=!!(null!==(c=window)&&void 0!==c&&c.RTCDataChannel||null!==(u=window)&&void 0!==u&&u.webkitRTCDataChannel||null!==(d=window)&&void 0!==d&&d.mozRTCDataChannel);return p&&h&&f};function eP(e){var t,r,n,i=(null===(t=window)||void 0===t?void 0:t.RTCPeerConnection)||(null===(r=window)||void 0===r?void 0:r.webkitRTCPeerConnection)||(null===(n=window)||void 0===n?void 0:n.mozRTCPeerConnection);return i?new i({iceServers:e?[{urls:"stun:".concat(e)},{urls:"turn:".concat(e),username:"livepeer",credential:"livepeer"}]:[]}):null}function eD(e,t,r,n){return eA.apply(this,arguments)}function eA(){return(eA=(0,eS._)((0,eS.a)().mark(function e(t,r,n,i){var s,a,o;return(0,eS.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&r&&n)){e.next=20;break}return e.next=3,function(e,t,r){return eO.apply(this,arguments)}(r,n.sdp,i);case 3:if(!(s=e.sent).ok){e.next=14;break}return e.next=7,s.text();case 7:return a=e.sent,e.next=10,t.setRemoteDescription(new RTCSessionDescription({type:"answer",sdp:a}));case 10:return o=s.headers.get("Link"),e.abrupt("return",function(e){try{var t,r=null==e?void 0:e.split(", ").map(function(e){var t,r=e.split("; "),n={urls:""},i=(0,eT.b)(r);try{for(i.s();!(t=i.n()).done;){var s=t.value;s.startsWith("stun:")||s.startsWith("turn:")?n.urls=s:s.startsWith("username=")?n.username=s.slice(10,-1):s.startsWith("credential=")&&(n.credential=s.slice(12,-1))}}catch(a){i.e(a)}finally{i.f()}return n}).filter(function(e){return e.urls});return r&&(null!==(t=null==r?void 0:r.length)&&void 0!==t?t:0)>0?r:null}catch(n){console.error(n)}return null}(o));case 14:return e.next=16,s.text();case 16:throw Error(e.sent);case 18:e.next=21;break;case 20:throw Error("Peer connection not defined.");case 21:case"end":return e.stop()}},e)}))).apply(this,arguments)}function eN(e,t){return eL.apply(this,arguments)}function eL(){return(eL=(0,eS._)((0,eS.a)().mark(function e(t,r){var n,i;return(0,eS.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&r)){e.next=12;break}return e.next=3,t.createOffer();case 3:return n=e.sent,e.next=6,t.setLocalDescription(n);case 6:return e.next=8,function(e){return ej.apply(this,arguments)}(t);case 8:if(i=e.sent){e.next=11;break}throw Error("failed to gather ICE candidates for offer");case 11:return e.abrupt("return",i);case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function eO(){return(eO=(0,eS._)((0,eS.a)().mark(function e(t,r,n){var i,s,a;return(0,eS.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=new AbortController,s=setTimeout(function(){return i.abort()},null!=n?n:1e4),e.next=4,eC()(t,{method:"POST",mode:"cors",headers:{"content-type":"application/sdp"},body:r,signal:i.signal});case 4:return a=e.sent,clearTimeout(s),e.abrupt("return",a);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function eI(e,t,r){return eM.apply(this,arguments)}function eM(){return(eM=(0,eS._)((0,eS.a)().mark(function e(t,r,n){var i,s,a;return(0,eS.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=setTimeout(function(){return r.abort()},null!=n?n:1e4),e.prev=1,e.next=4,eC()(t,{method:"HEAD",signal:r.signal});case 4:return s=e.sent,clearTimeout(i),a=new URL(s.url),e.abrupt("return",a);case 10:return e.prev=10,e.t0=e.catch(1),e.abrupt("return",null);case 13:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function ej(){return(ej=(0,eS._)((0,eS.a)().mark(function e(t){return(0,eS.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e){setTimeout(function(){e(t.localDescription)},5e3),t.onicegatheringstatechange=function(r){"complete"===t.iceGatheringState&&e(t.localDescription)}}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var eF=function(e,t,r,n){var i=!1,s=new AbortController,a=null,o=new MediaStream;return eI(e,s,null==n?void 0:n.sdpTimeout).then(function(e){if(!i&&e){var s,l,c,u=e.toString();(a=eP(e.host))&&(a.addTransceiver("video",{direction:"recvonly"}),a.addTransceiver("audio",{direction:"recvonly"}),a.ontrack=(s=(0,eS._)((0,eS.a)().mark(function e(t){var n,i,s,a,l;return(0,eS.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!o){e.next=18;break}n=t.track,s=(i=o.getTracks()).some(function(e){return"video"===e.kind}),a=i.some(function(e){return"audio"===e.kind}),e.t0=n.kind,e.next="video"===e.t0?9:"audio"===e.t0?13:17;break;case 9:if(!s){e.next=11;break}return e.abrupt("break",18);case 11:case 15:return o.addTrack(n),e.abrupt("break",18);case 13:if(!a){e.next=15;break}return e.abrupt("break",18);case 17:console.log("got unknown track "+n);case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(0),null==r||null===(l=r.onError)||void 0===l||l.call(r,e.t1);case 23:case"end":return e.stop()}},e,null,[[0,20]])})),function(e){return s.apply(this,arguments)}),a.addEventListener("connectionstatechange",(l=(0,eS._)((0,eS.a)().mark(function e(n){var i,s,l,c;return(0,eS.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(null===(i=a)||void 0===i?void 0:i.connectionState)!=="failed"){e.next=3;break}throw Error("Failed to connect to peer.");case 3:(null===(s=a)||void 0===s?void 0:s.connectionState)!=="connected"||t.srcObject||(t.srcObject=o,null==r||null===(l=r.onConnected)||void 0===l||l.call(r)),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),null==r||null===(c=r.onError)||void 0===c||c.call(r,e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])})),function(e){return l.apply(this,arguments)})),a.addEventListener("negotiationneeded",(c=(0,eS._)((0,eS.a)().mark(function e(t){var i,s;return(0,eS.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,eN(a,u);case 3:return i=e.sent,e.next=6,eD(a,u,i,null==n?void 0:n.sdpTimeout);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),null==r||null===(s=r.onError)||void 0===s||s.call(r,e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return c.apply(this,arguments)})))}}).catch(function(e){var t;return null==r?void 0:null===(t=r.onError)||void 0===t?void 0:t.call(r,e)}),{destroy:function(){var e,r,n;i=!0,null==s||null===(e=s.abort)||void 0===e||e.call(s),t&&(t.srcObject=null),null===(r=a)||void 0===r||null===(n=r.close)||void 0===n||n.call(r)}}};function e$(e){return(e$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var eB=function(e,t,r,n,i){var s=!1,a=new AbortController,o=null,l=null,c=null,u=null,d=null;return eI(e,a,null==i?void 0:i.sdpTimeout).then(function(e){if(!s&&e){var a,p,h,f=e.toString().replace("video+","");(o=eP(e.host))&&(o.addEventListener("negotiationneeded",(a=(0,eS._)((0,eS.a)().mark(function e(t){var r,s;return(0,eS.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,eN(o,f);case 3:return r=e.sent,e.next=6,eD(o,f,r,null==i?void 0:i.sdpTimeout);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),null==n||null===(s=n.onError)||void 0===s||s.call(n,e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return a.apply(this,arguments)})),o.addEventListener("connectionstatechange",(p=(0,eS._)((0,eS.a)().mark(function e(r){var i,s,a,d;return(0,eS.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,(null===(i=o)||void 0===i?void 0:i.connectionState)!=="failed"){e.next=3;break}throw Error("Failed to connect to peer.");case 3:(null===(s=o)||void 0===s?void 0:s.connectionState)==="connected"&&l&&u&&c&&(t.srcObject=l,null==n||null===(a=n.onConnected)||void 0===a||a.call(n,{stream:l,videoTransceiver:c,audioTransceiver:u})),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),null==n||null===(d=n.onError)||void 0===d||d.call(n,e.t0);case 9:case"end":return e.stop()}},e,null,[[0,6]])})),function(e){return p.apply(this,arguments)})),navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((h=(0,eS._)((0,eS.a)().mark(function e(t){var n,i,s,a,d,p,h,f,m,g,y,v;return(0,eS.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h=null!==(n=null==t?void 0:null===(i=t.getVideoTracks)||void 0===i?void 0:null===(s=i.call(t))||void 0===s?void 0:s[0])&&void 0!==n?n:null,f=null!==(a=null==t?void 0:null===(d=t.getAudioTracks)||void 0===d?void 0:null===(p=d.call(t))||void 0===p?void 0:p[0])&&void 0!==a?a:null,!h){e.next=6;break}return e.next=5,h.applyConstraints(eH(null!=r?r:"16to9"));case 5:c=null!==(m=null===(g=o)||void 0===g?void 0:g.addTransceiver(h,{direction:"sendonly"}))&&void 0!==m?m:null;case 6:f&&(u=null!==(y=null===(v=o)||void 0===v?void 0:v.addTransceiver(f,{direction:"sendonly"}))&&void 0!==y?y:null),l=t;case 8:case"end":return e.stop()}},e)})),function(e){return h.apply(this,arguments)})).catch(function(e){var t;return null==n?void 0:null===(t=n.onError)||void 0===t?void 0:t.call(n,e)}),d=function(){eC()(f,{method:"DELETE",mode:"cors"}).catch(function(e){var t;return null==n?void 0:null===(t=n.onError)||void 0===t?void 0:t.call(n,e)})})}}).catch(function(e){var t;return null==n?void 0:null===(t=n.onError)||void 0===t?void 0:t.call(n,e)}),{destroy:function(){null===(e=d)||void 0===e||e(),s=!0,null==a||null===(r=a.abort)||void 0===r||r.call(a),t&&(t.srcObject=null),null===(n=o)||void 0===n||null===(i=n.close)||void 0===i||i.call(n);var e,r,n,i,c,u,p,h,f=null!==(c=null===(u=l)||void 0===u?void 0:null===(p=u.getTracks)||void 0===p?void 0:p.call(u))&&void 0!==c?c:[],m=(0,eT.b)(f);try{for(m.s();!(h=m.n()).done;){var g,y=h.value;null==y||null===(g=y.stop)||void 0===g||g.call(y)}}catch(v){m.e(v)}finally{m.f()}}}},eU=(a=(0,eS._)((0,eS.a)().mark(function e(t){var r,n,i,s,a,o,l,c,u,d,p,h,f,m,g,y,v,b,w,_,x,S,T,E,C;return(0,eS.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f=t.newMediaStream,m=t.prevMediaStream,g=t.aspectRatio,y=t.element,v=t.onConnected,b=t.videoTransceiver,w=t.audioTransceiver,_=null!==(r=null==m?void 0:null===(n=m.getVideoTracks)||void 0===n?void 0:null===(i=n.call(m))||void 0===i?void 0:i[0])&&void 0!==r?r:null,x=null!==(s=null==m?void 0:null===(a=m.getAudioTracks)||void 0===a?void 0:null===(o=a.call(m))||void 0===o?void 0:o[0])&&void 0!==s?s:null,S=null!==(l=null==f?void 0:null===(c=f.getVideoTracks)||void 0===c?void 0:null===(u=c.call(f))||void 0===u?void 0:u[0])&&void 0!==l?l:null,T=null!==(d=null==f?void 0:null===(p=f.getAudioTracks)||void 0===p?void 0:null===(h=p.call(f))||void 0===h?void 0:h[0])&&void 0!==d?d:null,!S){e.next=11;break}return e.next=8,S.applyConstraints(eH(g));case 8:return e.next=10,b.sender.replaceTrack(S);case 10:S.enabled=null===(E=null==_?void 0:_.enabled)||void 0===E||E;case 11:if(!T){e.next=15;break}return e.next=14,w.sender.replaceTrack(T);case 14:T.enabled=null===(C=null==x?void 0:x.enabled)||void 0===C||C;case 15:y.srcObject=f,v({stream:f,videoTransceiver:b,audioTransceiver:w});case 17:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}),eq=(o=(0,eS._)((0,eS.a)().mark(function e(t){var r,n,i,s,a,o,l,c;return(0,eS.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.source,e.prev=1,e.next=4,null===(n=navigator)||void 0===n?void 0:null===(i=n.mediaDevices)||void 0===i?void 0:i.getUserMedia((0,eS.b)((0,eS.b)({},"object"===e$(r.streamConstraints)?r.streamConstraints:{}),{},{video:(0,eS.b)((0,eS.b)({},"boolean"!=typeof(null===(s=r.streamConstraints)||void 0===s?void 0:s.video)?null===(a=r.streamConstraints)||void 0===a?void 0:a.video:{}),null!=r&&r.videoDeviceId?{deviceId:null==r?void 0:r.videoDeviceId}:{}),audio:(0,eS.b)((0,eS.b)({},"boolean"!=typeof(null===(o=r.streamConstraints)||void 0===o?void 0:o.audio)?null===(l=r.streamConstraints)||void 0===l?void 0:l.audio:{}),null!=r&&r.audioDeviceId?{deviceId:null==r?void 0:r.audioDeviceId}:{})}));case 4:return c=e.sent,e.abrupt("return",null!=c?c:null);case 8:return e.prev=8,e.t0=e.catch(1),console.error(e.t0),e.abrupt("return",null);case 12:case"end":return e.stop()}},e,null,[[1,8]])})),function(e){return o.apply(this,arguments)}),ez=function(e){var t,r;if("undefined"!=typeof navigator&&null!==(t=navigator)&&void 0!==t&&null!==(r=t.mediaDevices)&&void 0!==r&&r.enumerateDevices){var n=function(){navigator.mediaDevices.enumerateDevices().then(function(t){return e(t)})};return navigator.mediaDevices.addEventListener("devicechange",n),n(),function(){navigator.mediaDevices.removeEventListener("devicechange",n)}}return function(){}},eV=(l=(0,eS._)((0,eS.a)().mark(function e(t){var r,n,i;return(0,eS.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!("undefined"!=typeof navigator&&null!==(r=navigator)&&void 0!==r&&null!==(n=r.mediaDevices)&&void 0!==n&&n.getDisplayMedia)){e.next=6;break}return e.next=4,navigator.mediaDevices.getDisplayMedia(t);case 4:return i=e.sent,e.abrupt("return",i);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return l.apply(this,arguments)}),eH=function(e){return{width:{ideal:1280},height:{ideal:720},aspectRatio:{ideal:"9to16"===e?9/16:"1to1"===e?1:"21to9"===e?21/9:"4to5"===e?.8:16/9}}},eW=r(36135),eZ=r(87462);function eK(e,t,{checkForDefaultPrevented:r=!0}={}){return function(n){if(null==e||e(n),!1===r||!n.defaultPrevented)return null==t?void 0:t(n)}}function eG(...e){return t=>e.forEach(e=>{var r;"function"==typeof(r=e)?r(t):null!=r&&(r.current=t)})}function eY(...e){return(0,g.useCallback)(eG(...e),e)}function eJ(e,t=[]){let r=[],n=()=>{let t=r.map(e=>(0,g.createContext)(e));return function(r){let n=(null==r?void 0:r[e])||t;return(0,g.useMemo)(()=>({[`__scope${e}`]:{...r,[e]:n}}),[r,n])}};return n.scopeName=e,[function(t,n){let i=(0,g.createContext)(n),s=r.length;function a(t){let{scope:r,children:n,...a}=t,o=(null==r?void 0:r[e][s])||i,l=(0,g.useMemo)(()=>a,Object.values(a));return(0,g.createElement)(o.Provider,{value:l},n)}return r=[...r,n],a.displayName=t+"Provider",[a,function(r,a){let o=(null==a?void 0:a[e][s])||i,l=(0,g.useContext)(o);if(l)return l;if(void 0!==n)return n;throw Error(`\`${r}\` must be used within \`${t}\``)}]},function(...e){let t=e[0];if(1===e.length)return t;let r=()=>{let r=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let n=r.reduce((t,{useScope:r,scopeName:n})=>{let i=r(e),s=i[`__scope${n}`];return{...t,...s}},{});return(0,g.useMemo)(()=>({[`__scope${t.scopeName}`]:n}),[n])}};return r.scopeName=t.scopeName,r}(n,...t)]}let eQ=Boolean(null==globalThis?void 0:globalThis.document)?g.useLayoutEffect:()=>{},eX=y["useId".toString()]||(()=>void 0),e0=0;function e1(e){let[t,r]=g.useState(eX());return eQ(()=>{e||r(e=>null!=e?e:String(e0++))},[e]),e||(t?`radix-${t}`:"")}function e2(e){let t=(0,g.useRef)(e);return(0,g.useEffect)(()=>{t.current=e}),(0,g.useMemo)(()=>(...e)=>{var r;return null===(r=t.current)||void 0===r?void 0:r.call(t,...e)},[])}function e5({prop:e,defaultProp:t,onChange:r=()=>{}}){let[n,i]=function({defaultProp:e,onChange:t}){let r=(0,g.useState)(e),[n]=r,i=(0,g.useRef)(n),s=e2(t);return(0,g.useEffect)(()=>{i.current!==n&&(s(n),i.current=n)},[n,i,s]),r}({defaultProp:t,onChange:r}),s=void 0!==e,a=e2(r),o=(0,g.useCallback)(t=>{if(s){let r="function"==typeof t?t(e):t;r!==e&&a(r)}else i(t)},[s,e,i,a]);return[s?e:n,o]}var e4=r(73935);let e6=(0,g.forwardRef)((e,t)=>{let{children:r,...n}=e,i=g.Children.toArray(r),s=i.find(e9);if(s){let a=s.props.children,o=i.map(e=>e!==s?e:g.Children.count(a)>1?g.Children.only(null):(0,g.isValidElement)(a)?a.props.children:null);return(0,g.createElement)(e3,(0,eZ.Z)({},n,{ref:t}),(0,g.isValidElement)(a)?(0,g.cloneElement)(a,void 0,o):null)}return(0,g.createElement)(e3,(0,eZ.Z)({},n,{ref:t}),r)});e6.displayName="Slot";let e3=(0,g.forwardRef)((e,t)=>{let{children:r,...n}=e;return(0,g.isValidElement)(r)?(0,g.cloneElement)(r,{...function(e,t){let r={...t};for(let n in t){let i=e[n],s=t[n],a=/^on[A-Z]/.test(n);a?i&&s?r[n]=(...e)=>{s(...e),i(...e)}:i&&(r[n]=i):"style"===n?r[n]={...i,...s}:"className"===n&&(r[n]=[i,s].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props),ref:t?eG(t,r.ref):r.ref}):g.Children.count(r)>1?g.Children.only(null):null});e3.displayName="SlotClone";let e8=({children:e})=>(0,g.createElement)(g.Fragment,null,e);function e9(e){return(0,g.isValidElement)(e)&&e.type===e8}let e7=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,t)=>{let r=(0,g.forwardRef)((e,r)=>{let{asChild:n,...i}=e,s=n?e6:t;return(0,g.useEffect)(()=>{window[Symbol.for("radix-ui")]=!0},[]),(0,g.createElement)(s,(0,eZ.Z)({},i,{ref:r}))});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),te="dismissableLayer.update",tt=(0,g.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),tr=(0,g.forwardRef)((e,t)=>{var r;let{disableOutsidePointerEvents:i=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...u}=e,d=(0,g.useContext)(tt),[p,h]=(0,g.useState)(null),f=null!==(r=null==p?void 0:p.ownerDocument)&&void 0!==r?r:null==globalThis?void 0:globalThis.document,[,m]=(0,g.useState)({}),y=eY(t,e=>h(e)),v=Array.from(d.layers),[b]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),w=v.indexOf(b),_=p?v.indexOf(p):-1,x=d.layersWithOutsidePointerEventsDisabled.size>0,S=_>=w,T=function(e,t=null==globalThis?void 0:globalThis.document){let r=e2(e),n=(0,g.useRef)(!1),i=(0,g.useRef)(()=>{});return(0,g.useEffect)(()=>{let e=e=>{if(e.target&&!n.current){let s={originalEvent:e};function a(){ti("dismissableLayer.pointerDownOutside",r,s,{discrete:!0})}"touch"===e.pointerType?(t.removeEventListener("click",i.current),i.current=a,t.addEventListener("click",i.current,{once:!0})):a()}n.current=!1},s=window.setTimeout(()=>{t.addEventListener("pointerdown",e)},0);return()=>{window.clearTimeout(s),t.removeEventListener("pointerdown",e),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}(e=>{let t=e.target,r=[...d.branches].some(e=>e.contains(t));!S||r||(null==a||a(e),null==l||l(e),e.defaultPrevented||null==c||c())},f),E=function(e,t=null==globalThis?void 0:globalThis.document){let r=e2(e),n=(0,g.useRef)(!1);return(0,g.useEffect)(()=>{let e=e=>{e.target&&!n.current&&ti("dismissableLayer.focusOutside",r,{originalEvent:e},{discrete:!1})};return t.addEventListener("focusin",e),()=>t.removeEventListener("focusin",e)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}(e=>{let t=e.target,r=[...d.branches].some(e=>e.contains(t));r||(null==o||o(e),null==l||l(e),e.defaultPrevented||null==c||c())},f);return!function(e,t=null==globalThis?void 0:globalThis.document){let r=e2(e);(0,g.useEffect)(()=>{let e=e=>{"Escape"===e.key&&r(e)};return t.addEventListener("keydown",e),()=>t.removeEventListener("keydown",e)},[r,t])}(e=>{let t=_===d.layers.size-1;t&&(null==s||s(e),!e.defaultPrevented&&c&&(e.preventDefault(),c()))},f),(0,g.useEffect)(()=>{if(p)return i&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(n=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(p)),d.layers.add(p),tn(),()=>{i&&1===d.layersWithOutsidePointerEventsDisabled.size&&(f.body.style.pointerEvents=n)}},[p,f,i,d]),(0,g.useEffect)(()=>()=>{p&&(d.layers.delete(p),d.layersWithOutsidePointerEventsDisabled.delete(p),tn())},[p,d]),(0,g.useEffect)(()=>{let e=()=>m({});return document.addEventListener(te,e),()=>document.removeEventListener(te,e)},[]),(0,g.createElement)(e7.div,(0,eZ.Z)({},u,{ref:y,style:{pointerEvents:x?S?"auto":"none":void 0,...e.style},onFocusCapture:eK(e.onFocusCapture,E.onFocusCapture),onBlurCapture:eK(e.onBlurCapture,E.onBlurCapture),onPointerDownCapture:eK(e.onPointerDownCapture,T.onPointerDownCapture)}))});function tn(){let e=new CustomEvent(te);document.dispatchEvent(e)}function ti(e,t,r,{discrete:n}){let i=r.originalEvent.target,s=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});(t&&i.addEventListener(e,t,{once:!0}),n)?i&&(0,e4.flushSync)(()=>i.dispatchEvent(s)):i.dispatchEvent(s)}let ts="focusScope.autoFocusOnMount",ta="focusScope.autoFocusOnUnmount",to={bubbles:!1,cancelable:!0},tl=(0,g.forwardRef)((e,t)=>{let{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=e,[o,l]=(0,g.useState)(null),c=e2(i),u=e2(s),d=(0,g.useRef)(null),p=eY(t,e=>l(e)),h=(0,g.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,g.useEffect)(()=>{if(n){function e(e){if(h.paused||!o)return;let t=e.target;o.contains(t)?d.current=t:td(d.current,{select:!0})}function t(e){if(h.paused||!o)return;let t=e.relatedTarget;null===t||o.contains(t)||td(d.current,{select:!0})}document.addEventListener("focusin",e),document.addEventListener("focusout",t);let r=new MutationObserver(function(e){let t=document.activeElement;for(let r of e)r.removedNodes.length>0&&!(null!=o&&o.contains(t))&&td(o)});return o&&r.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",e),document.removeEventListener("focusout",t),r.disconnect()}}},[n,o,h.paused]),(0,g.useEffect)(()=>{if(o){tp.add(h);let e=document.activeElement,t=o.contains(e);if(!t){let r=new CustomEvent(ts,to);o.addEventListener(ts,c),o.dispatchEvent(r),r.defaultPrevented||(function(e,{select:t=!1}={}){let r=document.activeElement;for(let n of e)if(td(n,{select:t}),document.activeElement!==r)return}(tc(o).filter(e=>"A"!==e.tagName),{select:!0}),document.activeElement===e&&td(o))}return()=>{o.removeEventListener(ts,c),setTimeout(()=>{let t=new CustomEvent(ta,to);o.addEventListener(ta,u),o.dispatchEvent(t),t.defaultPrevented||td(null!=e?e:document.body,{select:!0}),o.removeEventListener(ta,u),tp.remove(h)},0)}}},[o,c,u,h]);let f=(0,g.useCallback)(e=>{if(!r&&!n||h.paused)return;let t="Tab"===e.key&&!e.altKey&&!e.ctrlKey&&!e.metaKey,i=document.activeElement;if(t&&i){let s=e.currentTarget,[a,o]=function(e){let t=tc(e),r=tu(t,e),n=tu(t.reverse(),e);return[r,n]}(s);a&&o?e.shiftKey||i!==o?e.shiftKey&&i===a&&(e.preventDefault(),r&&td(o,{select:!0})):(e.preventDefault(),r&&td(a,{select:!0})):i===s&&e.preventDefault()}},[r,n,h.paused]);return(0,g.createElement)(e7.div,(0,eZ.Z)({tabIndex:-1},a,{ref:p,onKeyDown:f}))});function tc(e){let t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:e=>{let t="INPUT"===e.tagName&&"hidden"===e.type;return e.disabled||e.hidden||t?NodeFilter.FILTER_SKIP:e.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function tu(e,t){for(let r of e)if(!function(e,{upTo:t}){if("hidden"===getComputedStyle(e).visibility)return!0;for(;e&&(void 0===t||e!==t);){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1}(r,{upTo:t}))return r}function td(e,{select:t=!1}={}){if(e&&e.focus){var r;let n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&(r=e)instanceof HTMLInputElement&&"select"in r&&t&&e.select()}}let tp=(s=[],{add(e){let t=s[0];e!==t&&(null==t||t.pause()),(s=th(s,e)).unshift(e)},remove(e){var t;null===(t=(s=th(s,e))[0])||void 0===t||t.resume()}});function th(e,t){let r=[...e],n=r.indexOf(t);return -1!==n&&r.splice(n,1),r}let tf=(0,g.forwardRef)((e,t)=>{var r;let{container:n=null==globalThis?void 0:null===(r=globalThis.document)||void 0===r?void 0:r.body,...i}=e;return n?e4.createPortal((0,g.createElement)(e7.div,(0,eZ.Z)({},i,{ref:t})),n):null}),tm=e=>{let{present:t,children:r}=e,n=function(e){var t;let[r,n]=(0,g.useState)(),i=(0,g.useRef)({}),s=(0,g.useRef)(e),a=(0,g.useRef)("none"),[o,l]=(t={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},(0,g.useReducer)((e,r)=>{let n=t[e][r];return null!=n?n:e},e?"mounted":"unmounted"));return(0,g.useEffect)(()=>{let e=tg(i.current);a.current="mounted"===o?e:"none"},[o]),eQ(()=>{let t=i.current,r=s.current;if(r!==e){let n=a.current,o=tg(t);e?l("MOUNT"):"none"===o||(null==t?void 0:t.display)==="none"?l("UNMOUNT"):r&&n!==o?l("ANIMATION_OUT"):l("UNMOUNT"),s.current=e}},[e,l]),eQ(()=>{if(r){let e=e=>{let t=tg(i.current),n=t.includes(e.animationName);e.target===r&&n&&(0,e4.flushSync)(()=>l("ANIMATION_END"))},t=e=>{e.target===r&&(a.current=tg(i.current))};return r.addEventListener("animationstart",t),r.addEventListener("animationcancel",e),r.addEventListener("animationend",e),()=>{r.removeEventListener("animationstart",t),r.removeEventListener("animationcancel",e),r.removeEventListener("animationend",e)}}l("ANIMATION_END")},[r,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:(0,g.useCallback)(e=>{e&&(i.current=getComputedStyle(e)),n(e)},[])}}(t),i="function"==typeof r?r({present:n.isPresent}):g.Children.only(r),s=eY(n.ref,i.ref);return"function"==typeof r||n.isPresent?(0,g.cloneElement)(i,{ref:s}):null};function tg(e){return(null==e?void 0:e.animationName)||"none"}tm.displayName="Presence";let ty=0;function tv(){(0,g.useEffect)(()=>{var e,t;let r=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(e=r[0])&&void 0!==e?e:tb()),document.body.insertAdjacentElement("beforeend",null!==(t=r[1])&&void 0!==t?t:tb()),ty++,()=>{1===ty&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ty--}},[])}function tb(){let e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",e}var tw=r(97582),t_="right-scroll-bar-position",tx="width-before-scroll-bar",tS=(void 0===c&&(c={}),(void 0===u&&(u=function(e){return e}),d=[],p=!1,h={read:function(){if(p)throw Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return d.length?d[d.length-1]:null},useMedium:function(e){var t=u(e,p);return d.push(t),function(){d=d.filter(function(e){return e!==t})}},assignSyncMedium:function(e){for(p=!0;d.length;){var t=d;d=[],t.forEach(e)}d={push:function(t){return e(t)},filter:function(){return d}}},assignMedium:function(e){p=!0;var t=[];if(d.length){var r=d;d=[],r.forEach(e),t=d}var n=function(){var r=t;t=[],r.forEach(e)},i=function(){return Promise.resolve().then(n)};i(),d={push:function(e){t.push(e),i()},filter:function(e){return t=t.filter(e),d}}}}).options=(0,tw.pi)({async:!0,ssr:!1},c),h),tT=function(){},tE=g.forwardRef(function(e,t){var r,n,i,s=g.useRef(null),a=g.useState({onScrollCapture:tT,onWheelCapture:tT,onTouchMoveCapture:tT}),o=a[0],l=a[1],c=e.forwardProps,u=e.children,d=e.className,p=e.removeScrollBar,h=e.enabled,f=e.shards,m=e.sideCar,y=e.noIsolation,v=e.inert,b=e.allowPinchZoom,w=e.as,_=(0,tw._T)(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),x=(r=[s,t],n=function(e){return r.forEach(function(t){var r;return"function"==typeof(r=t)?r(e):r&&(r.current=e),r})},(i=(0,g.useState)(function(){return{value:null,callback:n,facade:{get current(){return i.value},set current(value){var e=i.value;e!==value&&(i.value=value,i.callback(value,e))}}}})[0]).callback=n,i.facade),S=(0,tw.pi)((0,tw.pi)({},_),o);return g.createElement(g.Fragment,null,h&&g.createElement(m,{sideCar:tS,removeScrollBar:p,shards:f,noIsolation:y,inert:v,setCallbacks:l,allowPinchZoom:!!b,lockRef:s}),c?g.cloneElement(g.Children.only(u),(0,tw.pi)((0,tw.pi)({},S),{ref:x})):g.createElement(void 0===w?"div":w,(0,tw.pi)({},S,{className:d,ref:x}),u))});tE.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},tE.classNames={fullWidth:tx,zeroRight:t_};var tC=function(e){var t=e.sideCar,r=(0,tw._T)(e,["sideCar"]);if(!t)throw Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw Error("Sidecar medium not found");return g.createElement(n,(0,tw.pi)({},r))};tC.isSideCarExport=!0;var tk=function(){var e=0,t=null;return{add:function(n){if(0==e&&(t=function(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=f||r.nc;return t&&e.setAttribute("nonce",t),e}())){var i,s;(i=t).styleSheet?i.styleSheet.cssText=n:i.appendChild(document.createTextNode(n)),s=t,(document.head||document.getElementsByTagName("head")[0]).appendChild(s)}e++},remove:function(){--e||!t||(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},tR=function(){var e=tk();return function(t,r){g.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},tP=function(){var e=tR();return function(t){return e(t.styles,t.dynamic),null}},tD={left:0,top:0,right:0,gap:0},tA=function(e){return parseInt(e||"",10)||0},tN=function(e){var t=window.getComputedStyle(document.body),r=t["padding"===e?"paddingLeft":"marginLeft"],n=t["padding"===e?"paddingTop":"marginTop"],i=t["padding"===e?"paddingRight":"marginRight"];return[tA(r),tA(n),tA(i)]},tL=function(e){if(void 0===e&&(e="margin"),"undefined"==typeof window)return tD;var t=tN(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},tO=tP(),tI=function(e,t,r,n){var i=e.left,s=e.top,a=e.right,o=e.gap;return void 0===r&&(r="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(n,";\n   padding-right: ").concat(o,"px ").concat(n,";\n  }\n  body {\n    overflow: hidden ").concat(n,";\n    overscroll-behavior: contain;\n    ").concat([t&&"position: relative ".concat(n,";"),"margin"===r&&"\n    padding-left: ".concat(i,"px;\n    padding-top: ").concat(s,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(o,"px ").concat(n,";\n    "),"padding"===r&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(t_," {\n    right: ").concat(o,"px ").concat(n,";\n  }\n  \n  .").concat(tx," {\n    margin-right: ").concat(o,"px ").concat(n,";\n  }\n  \n  .").concat(t_," .").concat(t_," {\n    right: 0 ").concat(n,";\n  }\n  \n  .").concat(tx," .").concat(tx," {\n    margin-right: 0 ").concat(n,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(o,"px;\n  }\n")},tM=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=void 0===n?"margin":n,s=g.useMemo(function(){return tL(i)},[i]);return g.createElement(tO,{styles:tI(s,!t,i,r?"":"!important")})},tj=!1;if("undefined"!=typeof window)try{var tF=Object.defineProperty({},"passive",{get:function(){return tj=!0,!0}});window.addEventListener("test",tF,tF),window.removeEventListener("test",tF,tF)}catch(t$){tj=!1}var tB=!!tj&&{passive:!1},tU=function(e,t){var r=window.getComputedStyle(e);return"hidden"!==r[t]&&!(r.overflowY===r.overflowX&&"TEXTAREA"!==e.tagName&&"visible"===r[t])},tq=function(e,t){var r=t;do{if("undefined"!=typeof ShadowRoot&&r instanceof ShadowRoot&&(r=r.host),tz(e,r)){var n=tV(e,r);if(n[1]>n[2])return!0}r=r.parentNode}while(r&&r!==document.body);return!1},tz=function(e,t){return"v"===e?tU(t,"overflowY"):tU(t,"overflowX")},tV=function(e,t){return"v"===e?[t.scrollTop,t.scrollHeight,t.clientHeight]:[t.scrollLeft,t.scrollWidth,t.clientWidth]},tH=function(e,t,r,n,i){var s,a=(s=window.getComputedStyle(t).direction,"h"===e&&"rtl"===s?-1:1),o=a*n,l=r.target,c=t.contains(l),u=!1,d=o>0,p=0,h=0;do{var f=tV(e,l),m=f[0],g=f[1]-f[2]-a*m;(m||g)&&tz(e,l)&&(p+=g,h+=m),l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return d&&(i&&0===p||!i&&o>p)?u=!0:!d&&(i&&0===h||!i&&-o>h)&&(u=!0),u},tW=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},tZ=function(e){return[e.deltaX,e.deltaY]},tK=function(e){return e&&"current"in e?e.current:e},tG=0,tY=[],tJ=(tS.useMedium(function(e){var t=g.useRef([]),r=g.useRef([0,0]),n=g.useRef(),i=g.useState(tG++)[0],s=g.useState(function(){return tP()})[0],a=g.useRef(e);g.useEffect(function(){a.current=e},[e]),g.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var t=(0,tw.ev)([e.lockRef.current],(e.shards||[]).map(tK),!0).filter(Boolean);return t.forEach(function(e){return e.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),t.forEach(function(e){return e.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var o=g.useCallback(function(e,t){if("touches"in e&&2===e.touches.length)return!a.current.allowPinchZoom;var i,s=tW(e),o=r.current,l="deltaX"in e?e.deltaX:o[0]-s[0],c="deltaY"in e?e.deltaY:o[1]-s[1],u=e.target,d=Math.abs(l)>Math.abs(c)?"h":"v";if("touches"in e&&"h"===d&&"range"===u.type)return!1;var p=tq(d,u);if(!p)return!0;if(p?i=d:(i="v"===d?"h":"v",p=tq(d,u)),!p)return!1;if(!n.current&&"changedTouches"in e&&(l||c)&&(n.current=i),!i)return!0;var h=n.current||i;return tH(h,t,e,"h"===h?l:c,!0)},[]),l=g.useCallback(function(e){if(tY.length&&tY[tY.length-1]===s){var r="deltaY"in e?tZ(e):tW(e),n=t.current.filter(function(t){var n;return t.name===e.type&&t.target===e.target&&(n=t.delta)[0]===r[0]&&n[1]===r[1]})[0];if(n&&n.should){e.cancelable&&e.preventDefault();return}if(!n){var i=(a.current.shards||[]).map(tK).filter(Boolean).filter(function(t){return t.contains(e.target)});(i.length>0?o(e,i[0]):!a.current.noIsolation)&&e.cancelable&&e.preventDefault()}}},[]),c=g.useCallback(function(e,r,n,i){var s={name:e,delta:r,target:n,should:i};t.current.push(s),setTimeout(function(){t.current=t.current.filter(function(e){return e!==s})},1)},[]),u=g.useCallback(function(e){r.current=tW(e),n.current=void 0},[]),d=g.useCallback(function(t){c(t.type,tZ(t),t.target,o(t,e.lockRef.current))},[]),p=g.useCallback(function(t){c(t.type,tW(t),t.target,o(t,e.lockRef.current))},[]);g.useEffect(function(){return tY.push(s),e.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:p}),document.addEventListener("wheel",l,tB),document.addEventListener("touchmove",l,tB),document.addEventListener("touchstart",u,tB),function(){tY=tY.filter(function(e){return e!==s}),document.removeEventListener("wheel",l,tB),document.removeEventListener("touchmove",l,tB),document.removeEventListener("touchstart",u,tB)}},[]);var h=e.removeScrollBar,f=e.inert;return g.createElement(g.Fragment,null,f?g.createElement(s,{styles:"\n  .block-interactivity-".concat(i," {pointer-events: none;}\n  .allow-interactivity-").concat(i," {pointer-events: all;}\n")}):null,h?g.createElement(tM,{gapMode:"margin"}):null)}),tC),tQ=g.forwardRef(function(e,t){return g.createElement(tE,(0,tw.pi)({},e,{ref:t,sideCar:tJ}))});tQ.classNames=tE.classNames;var tX=new WeakMap,t0=new WeakMap,t1={},t2=0,t5=function(e){return e&&(e.host||t5(e.parentNode))},t4=function(e,t,r,n){var i=(Array.isArray(e)?e:[e]).map(function(e){if(t.contains(e))return e;var r=t5(e);return r&&t.contains(r)?r:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)}).filter(function(e){return Boolean(e)});t1[r]||(t1[r]=new WeakMap);var s=t1[r],a=[],o=new Set,l=new Set(i),c=function(e){!e||o.has(e)||(o.add(e),c(e.parentNode))};i.forEach(c);var u=function(e){!e||l.has(e)||Array.prototype.forEach.call(e.children,function(e){if(o.has(e))u(e);else{var t=e.getAttribute(n),i=null!==t&&"false"!==t,l=(tX.get(e)||0)+1,c=(s.get(e)||0)+1;tX.set(e,l),s.set(e,c),a.push(e),1===l&&i&&t0.set(e,!0),1===c&&e.setAttribute(r,"true"),i||e.setAttribute(n,"true")}})};return u(t),o.clear(),t2++,function(){a.forEach(function(e){var t=tX.get(e)-1,i=s.get(e)-1;tX.set(e,t),s.set(e,i),t||(t0.has(e)||e.removeAttribute(n),t0.delete(e)),i||e.removeAttribute(r)}),--t2||(tX=new WeakMap,tX=new WeakMap,t0=new WeakMap,t1={})}},t6=function(e,t,r){void 0===r&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=t||("undefined"==typeof document?null:(Array.isArray(e)?e[0]:e).ownerDocument.body);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),t4(n,i,r,"aria-hidden")):function(){return null}};let t3="Dialog",[t8,t9]=eJ(t3),[t7,re]=t8(t3),rt=e=>{let{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:s,modal:a=!0}=e,o=(0,g.useRef)(null),l=(0,g.useRef)(null),[c=!1,u]=e5({prop:n,defaultProp:i,onChange:s});return(0,g.createElement)(t7,{scope:t,triggerRef:o,contentRef:l,contentId:e1(),titleId:e1(),descriptionId:e1(),open:c,onOpenChange:u,onOpenToggle:(0,g.useCallback)(()=>u(e=>!e),[u]),modal:a},r)},rr=(0,g.forwardRef)((e,t)=>{let{__scopeDialog:r,...n}=e,i=re("DialogTrigger",r),s=eY(t,i.triggerRef);return(0,g.createElement)(e7.button,(0,eZ.Z)({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":rv(i.open)},n,{ref:s,onClick:eK(e.onClick,i.onOpenToggle)}))}),rn="DialogPortal",[ri,rs]=t8(rn,{forceMount:void 0}),ra=e=>{let{__scopeDialog:t,forceMount:r,children:n,container:i}=e,s=re(rn,t);return(0,g.createElement)(ri,{scope:t,forceMount:r},g.Children.map(n,e=>(0,g.createElement)(tm,{present:r||s.open},(0,g.createElement)(tf,{asChild:!0,container:i},e))))},ro="DialogOverlay",rl=(0,g.forwardRef)((e,t)=>{let r=rs(ro,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,s=re(ro,e.__scopeDialog);return s.modal?(0,g.createElement)(tm,{present:n||s.open},(0,g.createElement)(rc,(0,eZ.Z)({},i,{ref:t}))):null}),rc=(0,g.forwardRef)((e,t)=>{let{__scopeDialog:r,...n}=e,i=re(ro,r);return(0,g.createElement)(tQ,{as:e6,allowPinchZoom:!0,shards:[i.contentRef]},(0,g.createElement)(e7.div,(0,eZ.Z)({"data-state":rv(i.open)},n,{ref:t,style:{pointerEvents:"auto",...n.style}})))}),ru="DialogContent",rd=(0,g.forwardRef)((e,t)=>{let r=rs(ru,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,s=re(ru,e.__scopeDialog);return(0,g.createElement)(tm,{present:n||s.open},s.modal?(0,g.createElement)(rp,(0,eZ.Z)({},i,{ref:t})):(0,g.createElement)(rh,(0,eZ.Z)({},i,{ref:t})))}),rp=(0,g.forwardRef)((e,t)=>{let r=re(ru,e.__scopeDialog),n=(0,g.useRef)(null),i=eY(t,r.contentRef,n);return(0,g.useEffect)(()=>{let e=n.current;if(e)return t6(e)},[]),(0,g.createElement)(rf,(0,eZ.Z)({},e,{ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:eK(e.onCloseAutoFocus,e=>{var t;e.preventDefault(),null===(t=r.triggerRef.current)||void 0===t||t.focus()}),onPointerDownOutside:eK(e.onPointerDownOutside,e=>{let t=e.detail.originalEvent,r=0===t.button&&!0===t.ctrlKey,n=2===t.button||r;n&&e.preventDefault()}),onFocusOutside:eK(e.onFocusOutside,e=>e.preventDefault())}))}),rh=(0,g.forwardRef)((e,t)=>{let r=re(ru,e.__scopeDialog),n=(0,g.useRef)(!1),i=(0,g.useRef)(!1);return(0,g.createElement)(rf,(0,eZ.Z)({},e,{ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:t=>{var s,a;null===(s=e.onCloseAutoFocus)||void 0===s||s.call(e,t),t.defaultPrevented||(n.current||null===(a=r.triggerRef.current)||void 0===a||a.focus(),t.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:t=>{var s,a;null===(s=e.onInteractOutside)||void 0===s||s.call(e,t),t.defaultPrevented||(n.current=!0,"pointerdown"!==t.detail.originalEvent.type||(i.current=!0));let o=t.target,l=null===(a=r.triggerRef.current)||void 0===a?void 0:a.contains(o);l&&t.preventDefault(),"focusin"===t.detail.originalEvent.type&&i.current&&t.preventDefault()}}))}),rf=(0,g.forwardRef)((e,t)=>{let{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=e,o=re(ru,r),l=(0,g.useRef)(null),c=eY(t,l);return tv(),(0,g.createElement)(g.Fragment,null,(0,g.createElement)(tl,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:s},(0,g.createElement)(tr,(0,eZ.Z)({role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":rv(o.open)},a,{ref:c,onDismiss:()=>o.onOpenChange(!1)}))),!1)}),rm="DialogTitle",rg=(0,g.forwardRef)((e,t)=>{let{__scopeDialog:r,...n}=e,i=re(rm,r);return(0,g.createElement)(e7.h2,(0,eZ.Z)({id:i.titleId},n,{ref:t}))}),ry=(0,g.forwardRef)((e,t)=>{let{__scopeDialog:r,...n}=e,i=re("DialogClose",r);return(0,g.createElement)(e7.button,(0,eZ.Z)({type:"button"},n,{ref:t,onClick:eK(e.onClick,()=>i.onOpenChange(!1))}))});function rv(e){return e?"open":"closed"}let[rb,rw]=function(e,t){let r=(0,g.createContext)(t);function n(e){let{children:t,...n}=e,i=(0,g.useMemo)(()=>n,Object.values(n));return(0,g.createElement)(r.Provider,{value:i},t)}return n.displayName=e+"Provider",[n,function(n){let i=(0,g.useContext)(r);if(i)return i;if(void 0!==t)return t;throw Error(`\`${n}\` must be used within \`${e}\``)}]}("DialogTitleWarning",{contentName:ru,titleName:rm,docsSlug:"dialog"});function r_(e,[t,r]){return Math.min(r,Math.max(t,e))}r(92222);let rx=(0,g.createContext)(void 0);function rS(e){return e.split("-")[1]}function rT(e){return"y"===e?"height":"width"}function rE(e){return e.split("-")[0]}function rC(e){return["top","bottom"].includes(rE(e))?"x":"y"}function rk(e,t,r){let n,{reference:i,floating:s}=e,a=i.x+i.width/2-s.width/2,o=i.y+i.height/2-s.height/2,l=rC(t),c=rT(l),u=i[c]/2-s[c]/2,d="x"===l;switch(rE(t)){case"top":n={x:a,y:i.y-s.height};break;case"bottom":n={x:a,y:i.y+i.height};break;case"right":n={x:i.x+i.width,y:o};break;case"left":n={x:i.x-s.width,y:o};break;default:n={x:i.x,y:i.y}}switch(rS(t)){case"start":n[l]-=u*(r&&d?-1:1);break;case"end":n[l]+=u*(r&&d?-1:1)}return n}let rR=async(e,t,r)=>{let{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:a}=r,o=s.filter(Boolean),l=await (null==a.isRTL?void 0:a.isRTL(t)),c=await a.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=rk(c,n,l),p=n,h={},f=0;for(let m=0;m<o.length;m++){let{name:g,fn:y}=o[m],{x:v,y:b,data:w,reset:_}=await y({x:u,y:d,initialPlacement:n,placement:p,strategy:i,middlewareData:h,rects:c,platform:a,elements:{reference:e,floating:t}});u=null!=v?v:u,d=null!=b?b:d,h={...h,[g]:{...h[g],...w}},_&&f<=50&&(f++,"object"==typeof _&&(_.placement&&(p=_.placement),_.rects&&(c=!0===_.rects?await a.getElementRects({reference:e,floating:t,strategy:i}):_.rects),{x:u,y:d}=rk(c,p,l)),m=-1)}return{x:u,y:d,placement:p,strategy:i,middlewareData:h}};function rP(e,t){return"function"==typeof e?e(t):e}function rD(e){return"number"!=typeof e?{top:0,right:0,bottom:0,left:0,...e}:{top:e,right:e,bottom:e,left:e}}function rA(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function rN(e,t){var r;void 0===t&&(t={});let{x:n,y:i,platform:s,rects:a,elements:o,strategy:l}=e,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:p=!1,padding:h=0}=rP(t,e),f=rD(h),m=o[p?"floating"===d?"reference":"floating":d],g=rA(await s.getClippingRect({element:null==(r=await (null==s.isElement?void 0:s.isElement(m)))||r?m:m.contextElement||await (null==s.getDocumentElement?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),y="floating"===d?{...a.floating,x:n,y:i}:a.reference,v=await (null==s.getOffsetParent?void 0:s.getOffsetParent(o.floating)),b=await (null==s.isElement?void 0:s.isElement(v))&&await (null==s.getScale?void 0:s.getScale(v))||{x:1,y:1},w=rA(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:v,strategy:l}):y);return{top:(g.top-w.top+f.top)/b.y,bottom:(w.bottom-g.bottom+f.bottom)/b.y,left:(g.left-w.left+f.left)/b.x,right:(w.right-g.right+f.right)/b.x}}let rL=Math.min,rO=Math.max,rI=e=>({name:"arrow",options:e,async fn(t){let{x:r,y:n,placement:i,rects:s,platform:a,elements:o}=t,{element:l,padding:c=0}=rP(e,t)||{};if(null==l)return{};let u=rD(c),d={x:r,y:n},p=rC(i),h=rT(p),f=await a.getDimensions(l),m="y"===p,g=m?"clientHeight":"clientWidth",y=s.reference[h]+s.reference[p]-d[p]-s.floating[h],v=d[p]-s.reference[p],b=await (null==a.getOffsetParent?void 0:a.getOffsetParent(l)),w=b?b[g]:0;w&&await (null==a.isElement?void 0:a.isElement(b))||(w=o.floating[g]||s.floating[h]);let _=w/2-f[h]/2-1,x=rL(u[m?"top":"left"],_),S=rL(u[m?"bottom":"right"],_),T=w-f[h]-S,E=w/2-f[h]/2+(y/2-v/2),C=rO(x,rL(E,T)),k=null!=rS(i)&&E!=C&&s.reference[h]/2-(E<x?x:S)-f[h]/2<0?E<x?x-E:T-E:0;return{[p]:d[p]-k,data:{[p]:C,centerOffset:E-C+k}}}}),rM=["top","right","bottom","left"],rj=(rM.reduce((e,t)=>e.concat(t,t+"-start",t+"-end"),[]),{left:"right",right:"left",bottom:"top",top:"bottom"});function rF(e){return e.replace(/left|right|bottom|top/g,e=>rj[e])}let r$={start:"end",end:"start"};function rB(e){return e.replace(/start|end/g,e=>r$[e])}function rU(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function rq(e){return rM.some(t=>e[t]>=0)}function rz(e){return"x"===e?"y":"x"}function rV(e){var t;return(null==e||null==(t=e.ownerDocument)?void 0:t.defaultView)||window}function rH(e){return rV(e).getComputedStyle(e)}function rW(e){return e instanceof rV(e).Node}function rZ(e){return rW(e)?(e.nodeName||"").toLowerCase():"#document"}function rK(e){return e instanceof HTMLElement||e instanceof rV(e).HTMLElement}function rG(e){return"undefined"!=typeof ShadowRoot&&(e instanceof rV(e).ShadowRoot||e instanceof ShadowRoot)}function rY(e){let{overflow:t,overflowX:r,overflowY:n,display:i}=rH(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!["inline","contents"].includes(i)}function rJ(e){let t=rQ(),r=rH(e);return"none"!==r.transform||"none"!==r.perspective||!!r.containerType&&"normal"!==r.containerType||!t&&!!r.backdropFilter&&"none"!==r.backdropFilter||!t&&!!r.filter&&"none"!==r.filter||["transform","perspective","filter"].some(e=>(r.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(r.contain||"").includes(e))}function rQ(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function rX(e){return["html","body","#document"].includes(rZ(e))}let r0=Math.min,r1=Math.max,r2=Math.round,r5=Math.floor,r4=e=>({x:e,y:e});function r6(e){let t=rH(e),r=parseFloat(t.width)||0,n=parseFloat(t.height)||0,i=rK(e),s=i?e.offsetWidth:r,a=i?e.offsetHeight:n,o=r2(r)!==s||r2(n)!==a;return o&&(r=s,n=a),{width:r,height:n,$:o}}function r3(e){return e instanceof Element||e instanceof rV(e).Element}function r8(e){return r3(e)?e:e.contextElement}function r9(e){let t=r8(e);if(!rK(t))return r4(1);let r=t.getBoundingClientRect(),{width:n,height:i,$:s}=r6(t),a=(s?r2(r.width):r.width)/n,o=(s?r2(r.height):r.height)/i;return a&&Number.isFinite(a)||(a=1),o&&Number.isFinite(o)||(o=1),{x:a,y:o}}let r7=r4(0);function ne(e){let t=rV(e);return rQ()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:r7}function nt(e,t,r,n){var i;void 0===t&&(t=!1),void 0===r&&(r=!1);let s=e.getBoundingClientRect(),a=r8(e),o=r4(1);t&&(n?r3(n)&&(o=r9(n)):o=r9(e));let l=(void 0===(i=r)&&(i=!1),!(!n||i&&n!==rV(a))&&i)?ne(a):r4(0),c=(s.left+l.x)/o.x,u=(s.top+l.y)/o.y,d=s.width/o.x,p=s.height/o.y;if(a){let h=rV(a),f=n&&r3(n)?rV(n):n,m=h.frameElement;for(;m&&n&&f!==h;){let g=r9(m),y=m.getBoundingClientRect(),v=getComputedStyle(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;c*=g.x,u*=g.y,d*=g.x,p*=g.y,c+=b,u+=w,m=rV(m).frameElement}}return rA({width:d,height:p,x:c,y:u})}function nr(e){return r3(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function nn(e){var t;return null==(t=(rW(e)?e.ownerDocument:e.document)||window.document)?void 0:t.documentElement}function ni(e){return nt(nn(e)).left+nr(e).scrollLeft}function ns(e){if("html"===rZ(e))return e;let t=e.assignedSlot||e.parentNode||rG(e)&&e.host||nn(e);return rG(t)?t.host:t}function na(e,t){var r;void 0===t&&(t=[]);let n=function e(t){let r=ns(t);return rX(r)?t.ownerDocument?t.ownerDocument.body:t.body:rK(r)&&rY(r)?r:e(r)}(e),i=n===(null==(r=e.ownerDocument)?void 0:r.body),s=rV(n);return i?t.concat(s,s.visualViewport||[],rY(n)?n:[]):t.concat(n,na(n))}function no(e,t,r){let n;if("viewport"===t)n=function(e,t){let r=rV(e),n=nn(e),i=r.visualViewport,s=n.clientWidth,a=n.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;let c=rQ();(!c||c&&"fixed"===t)&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o,y:l}}(e,r);else if("document"===t)n=function(e){let t=nn(e),r=nr(e),n=e.ownerDocument.body,i=r1(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),s=r1(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight),a=-r.scrollLeft+ni(e),o=-r.scrollTop;return"rtl"===rH(n).direction&&(a+=r1(t.clientWidth,n.clientWidth)-i),{width:i,height:s,x:a,y:o}}(nn(e));else if(r3(t))n=function(e,t){let r=nt(e,!0,"fixed"===t),n=r.top+e.clientTop,i=r.left+e.clientLeft,s=rK(e)?r9(e):r4(1);return{width:e.clientWidth*s.x,height:e.clientHeight*s.y,x:i*s.x,y:n*s.y}}(t,r);else{let i=ne(e);n={...t,x:t.x-i.x,y:t.y-i.y}}return rA(n)}function nl(e,t){return rK(e)&&"fixed"!==rH(e).position?t?t(e):e.offsetParent:null}function nc(e,t){let r=rV(e);if(!rK(e))return r;let n=nl(e,t);for(;n&&["table","td","th"].includes(rZ(n))&&"static"===rH(n).position;)n=nl(n,t);return n&&("html"===rZ(n)||"body"===rZ(n)&&"static"===rH(n).position&&!rJ(n))?r:n||function(e){let t=ns(e);for(;rK(t)&&!rX(t);){if(rJ(t))return t;t=ns(t)}return null}(e)||r}let nu={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:r,strategy:n}=e,i=rK(r),s=nn(r);if(r===s)return t;let a={scrollLeft:0,scrollTop:0},o=r4(1),l=r4(0);if((i||!i&&"fixed"!==n)&&(("body"!==rZ(r)||rY(s))&&(a=nr(r)),rK(r))){let c=nt(r);o=r9(r),l.x=c.x+r.clientLeft,l.y=c.y+r.clientTop}return{width:t.width*o.x,height:t.height*o.y,x:t.x*o.x-a.scrollLeft*o.x+l.x,y:t.y*o.y-a.scrollTop*o.y+l.y}},getDocumentElement:nn,getClippingRect:function(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e,s=[..."clippingAncestors"===r?function(e,t){let r=t.get(e);if(r)return r;let n=na(e).filter(e=>r3(e)&&"body"!==rZ(e)),i=null,s="fixed"===rH(e).position,a=s?ns(e):e;for(;r3(a)&&!rX(a);){let o=rH(a),l=rJ(a);l||"fixed"!==o.position||(i=null),(s?!l&&!i:!l&&"static"===o.position&&i&&["absolute","fixed"].includes(i.position)||rY(a)&&!l&&function e(t,r){let n=ns(t);return!(n===r||!r3(n)||rX(n))&&("fixed"===rH(n).position||e(n,r))}(e,a))?n=n.filter(e=>e!==a):i=o,a=ns(a)}return t.set(e,n),n}(t,this._c):[].concat(r),n],a=s[0],o=s.reduce((e,r)=>{let n=no(t,r,i);return e.top=r1(n.top,e.top),e.right=r0(n.right,e.right),e.bottom=r0(n.bottom,e.bottom),e.left=r1(n.left,e.left),e},no(t,a,i));return{width:o.right-o.left,height:o.bottom-o.top,x:o.left,y:o.top}},getOffsetParent:nc,getElementRects:async function(e){let{reference:t,floating:r,strategy:n}=e,i=this.getOffsetParent||nc,s=this.getDimensions;return{reference:function(e,t,r){let n=rK(t),i=nn(t),s="fixed"===r,a=nt(e,!0,s,t),o={scrollLeft:0,scrollTop:0},l=r4(0);if(n||!n&&!s){if(("body"!==rZ(t)||rY(i))&&(o=nr(t)),rK(t)){let c=nt(t,!0,s,t);l.x=c.x+t.clientLeft,l.y=c.y+t.clientTop}else i&&(l.x=ni(i))}return{x:a.left+o.scrollLeft-l.x,y:a.top+o.scrollTop-l.y,width:a.width,height:a.height}}(t,await i(r),n),floating:{x:0,y:0,...await s(r)}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){return r6(e)},getScale:r9,isElement:r3,isRTL:function(e){return"rtl"===getComputedStyle(e).direction}};function nd(e,t,r,n){void 0===n&&(n={});let{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a="function"==typeof ResizeObserver,layoutShift:o="function"==typeof IntersectionObserver,animationFrame:l=!1}=n,c=r8(e),u=i||s?[...c?na(c):[],...na(t)]:[];u.forEach(e=>{i&&e.addEventListener("scroll",r,{passive:!0}),s&&e.addEventListener("resize",r)});let d=c&&o?function(e,t){let r,n=null,i=nn(e);function s(){clearTimeout(r),n&&n.disconnect(),n=null}return function a(o,l){void 0===o&&(o=!1),void 0===l&&(l=1),s();let{left:c,top:u,width:d,height:p}=e.getBoundingClientRect();if(o||t(),!d||!p)return;let h={rootMargin:-r5(u)+"px "+-r5(i.clientWidth-(c+d))+"px "+-r5(i.clientHeight-(u+p))+"px "+-r5(c)+"px",threshold:r1(0,r0(1,l))||1},f=!0;function m(e){let t=e[0].intersectionRatio;if(t!==l){if(!f)return a();t?a(!1,t):r=setTimeout(()=>{a(!1,1e-7)},100)}f=!1}try{n=new IntersectionObserver(m,{...h,root:i.ownerDocument})}catch(g){n=new IntersectionObserver(m,h)}n.observe(e)}(!0),s}(c,r):null,p,h=-1,f=null;a&&(f=new ResizeObserver(e=>{let[n]=e;n&&n.target===c&&f&&(f.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{f&&f.observe(t)})),r()}),c&&!l&&f.observe(c),f.observe(t));let m=l?nt(e):null;return l&&function t(){let n=nt(e);m&&(n.x!==m.x||n.y!==m.y||n.width!==m.width||n.height!==m.height)&&r(),m=n,p=requestAnimationFrame(t)}(),r(),()=>{u.forEach(e=>{i&&e.removeEventListener("scroll",r),s&&e.removeEventListener("resize",r)}),d&&d(),f&&f.disconnect(),f=null,l&&cancelAnimationFrame(p)}}let np=(e,t,r)=>{let n=new Map,i={platform:nu,...r},s={...i.platform,_c:n};return rR(e,t,{...i,platform:s})},nh=e=>({name:"arrow",options:e,fn(t){let{element:r,padding:n}="function"==typeof e?e(t):e;if(r&&({}).hasOwnProperty.call(r,"current")){if(null!=r.current)return rI({element:r.current,padding:n}).fn(t)}else if(r)return rI({element:r,padding:n}).fn(t);return{}}});var nf="undefined"!=typeof document?g.useLayoutEffect:g.useEffect;function nm(e,t){let r,n,i;if(e===t)return!0;if(typeof e!=typeof t)return!1;if("function"==typeof e&&e.toString()===t.toString())return!0;if(e&&t&&"object"==typeof e){if(Array.isArray(e)){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!nm(e[n],t[n]))return!1;return!0}if((r=(i=Object.keys(e)).length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!({}).hasOwnProperty.call(t,i[n]))return!1;for(n=r;0!=n--;){let s=i[n];if(("_owner"!==s||!e.$$typeof)&&!nm(e[s],t[s]))return!1}return!0}return e!=e&&t!=t}function ng(e){if("undefined"==typeof window)return 1;let t=e.ownerDocument.defaultView||window;return t.devicePixelRatio||1}function ny(e,t){let r=ng(e);return Math.round(t*r)/r}function nv(e){let t=g.useRef(e);return nf(()=>{t.current=e}),t}let nb=(0,g.forwardRef)((e,t)=>{let{children:r,width:n=10,height:i=5,...s}=e;return(0,g.createElement)(e7.svg,(0,eZ.Z)({},s,{ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),e.asChild?r:(0,g.createElement)("polygon",{points:"0,0 30,0 15,10"}))}),nw="Popper",[n_,nx]=eJ(nw),[nS,nT]=n_(nw),nE=e=>{let{__scopePopper:t,children:r}=e,[n,i]=(0,g.useState)(null);return(0,g.createElement)(nS,{scope:t,anchor:n,onAnchorChange:i},r)},nC=(0,g.forwardRef)((e,t)=>{let{__scopePopper:r,virtualRef:n,...i}=e,s=nT("PopperAnchor",r),a=(0,g.useRef)(null),o=eY(t,a);return(0,g.useEffect)(()=>{s.onAnchorChange((null==n?void 0:n.current)||a.current)}),n?null:(0,g.createElement)(e7.div,(0,eZ.Z)({},i,{ref:o}))}),nk="PopperContent",[nR,nP]=n_(nk),nD=(0,g.forwardRef)((e,t)=>{var r,n,i,s,a,o,l,c,u,d,p,h,f,m;let{__scopePopper:y,side:v="bottom",sideOffset:b=0,align:w="center",alignOffset:_=0,arrowPadding:x=0,collisionBoundary:S=[],collisionPadding:T=0,sticky:E="partial",hideWhenDetached:C=!1,avoidCollisions:k=!0,onPlaced:R,...P}=e,D=nT(nk,y),[A,N]=(0,g.useState)(null),L=eY(t,e=>N(e)),[O,I]=(0,g.useState)(null),M=function(e){let[t,r]=(0,g.useState)(void 0);return eQ(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let n,i;if(!Array.isArray(t)||!t.length)return;let s=t[0];if("borderBoxSize"in s){let a=s.borderBoxSize,o=Array.isArray(a)?a[0]:a;n=o.inlineSize,i=o.blockSize}else n=e.offsetWidth,i=e.offsetHeight;r({width:n,height:i})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}(O),j=null!==(r=null==M?void 0:M.width)&&void 0!==r?r:0,F=null!==(n=null==M?void 0:M.height)&&void 0!==n?n:0,$="number"==typeof T?T:{top:0,right:0,bottom:0,left:0,...T},B=Array.isArray(S)?S:[S],U=B.length>0,q={padding:$,boundary:B.filter(nN),altBoundary:U},{refs:z,floatingStyles:V,placement:H,isPositioned:W,middlewareData:Z}=function(e){void 0===e&&(e={});let{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=e,[u,d]=g.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=g.useState(n);nm(p,n)||h(n);let[f,m]=g.useState(null),[y,v]=g.useState(null),b=g.useCallback(e=>{e!=S.current&&(S.current=e,m(e))},[m]),w=g.useCallback(e=>{e!==T.current&&(T.current=e,v(e))},[v]),_=s||f,x=a||y,S=g.useRef(null),T=g.useRef(null),E=g.useRef(u),C=nv(l),k=nv(i),R=g.useCallback(()=>{if(!S.current||!T.current)return;let e={placement:t,strategy:r,middleware:p};k.current&&(e.platform=k.current),np(S.current,T.current,e).then(e=>{let t={...e,isPositioned:!0};P.current&&!nm(E.current,t)&&(E.current=t,e4.flushSync(()=>{d(t)}))})},[p,t,r,k]);nf(()=>{!1===c&&E.current.isPositioned&&(E.current.isPositioned=!1,d(e=>({...e,isPositioned:!1})))},[c]);let P=g.useRef(!1);nf(()=>(P.current=!0,()=>{P.current=!1}),[]),nf(()=>{if(_&&(S.current=_),x&&(T.current=x),_&&x){if(C.current)return C.current(_,x,R);R()}},[_,x,R,C]);let D=g.useMemo(()=>({reference:S,floating:T,setReference:b,setFloating:w}),[b,w]),A=g.useMemo(()=>({reference:_,floating:x}),[_,x]),N=g.useMemo(()=>{let e={position:r,left:0,top:0};if(!A.floating)return e;let t=ny(A.floating,u.x),n=ny(A.floating,u.y);return o?{...e,transform:"translate("+t+"px, "+n+"px)",...ng(A.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:t,top:n}},[r,o,A.floating,u.x,u.y]);return g.useMemo(()=>({...u,update:R,refs:D,elements:A,floatingStyles:N}),[u,R,D,A,N])}({strategy:"fixed",placement:v+("center"!==w?"-"+w:""),whileElementsMounted:nd,elements:{reference:D.anchor},middleware:[{name:"offset",options:u={mainAxis:b+F,alignmentAxis:_},async fn(e){let{x:t,y:r}=e,n=await async function(e,t){let{placement:r,platform:n,elements:i}=e,s=await (null==n.isRTL?void 0:n.isRTL(i.floating)),a=rE(r),o=rS(r),l="x"===rC(r),c=["left","top"].includes(a)?-1:1,u=s&&l?-1:1,d=rP(t,e),{mainAxis:p,crossAxis:h,alignmentAxis:f}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return o&&"number"==typeof f&&(h="end"===o?-1*f:f),l?{x:h*u,y:p*c}:{x:p*c,y:h*u}}(e,u);return{x:t+n.x,y:r+n.y,data:n}}},k&&{name:"shift",options:p={mainAxis:!0,crossAxis:!1,limiter:"partial"===E?(void 0===d&&(d={}),{options:d,fn(e){let{x:t,y:r,placement:n,rects:i,middlewareData:s}=e,{offset:a=0,mainAxis:o=!0,crossAxis:l=!0}=rP(d,e),c={x:t,y:r},u=rC(n),p=rz(u),h=c[u],f=c[p],m=rP(a,e),g="number"==typeof m?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(o){let y="y"===u?"height":"width",v=i.reference[u]-i.floating[y]+g.mainAxis,b=i.reference[u]+i.reference[y]-g.mainAxis;h<v?h=v:h>b&&(h=b)}if(l){var w,_;let x="y"===u?"width":"height",S=["top","left"].includes(rE(n)),T=i.reference[p]-i.floating[x]+(S&&(null==(w=s.offset)?void 0:w[p])||0)+(S?0:g.crossAxis),E=i.reference[p]+i.reference[x]+(S?0:(null==(_=s.offset)?void 0:_[p])||0)-(S?g.crossAxis:0);f<T?f=T:f>E&&(f=E)}return{[u]:h,[p]:f}}}):void 0,...q},async fn(e){let{x:t,y:r,placement:n}=e,{mainAxis:i=!0,crossAxis:s=!1,limiter:a={fn:e=>{let{x:t,y:r}=e;return{x:t,y:r}}},...o}=rP(p,e),l={x:t,y:r},c=await rN(e,o),u=rC(rE(n)),d=rz(u),h=l[u],f=l[d];i&&(h=rO(h+c["y"===u?"top":"left"],rL(h,h-c["y"===u?"bottom":"right"]))),s&&(f=rO(f+c["y"===d?"top":"left"],rL(f,f-c["y"===d?"bottom":"right"])));let m=a.fn({...e,[u]:h,[d]:f});return{...m,data:{x:m.x-t,y:m.y-r}}}},k&&{name:"flip",options:h={...q},async fn(e){var t,r,n,i;let{placement:s,middlewareData:a,rects:o,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:p=!0,fallbackPlacements:f,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...v}=rP(h,e),b=rE(s),w=rE(l)===l,_=await (null==c.isRTL?void 0:c.isRTL(u.floating)),x=f||(w||!y?[rF(l)]:function(e){let t=rF(e);return[rB(e),t,rB(t)]}(l));f||"none"===g||x.push(...function(e,t,r,n){let i=rS(e),s=function(e,t,r){let n=["left","right"],i=["right","left"];switch(e){case"top":case"bottom":return r?t?i:n:t?n:i;case"left":case"right":return t?["top","bottom"]:["bottom","top"];default:return[]}}(rE(e),"start"===r,n);return i&&(s=s.map(e=>e+"-"+i),t&&(s=s.concat(s.map(rB)))),s}(l,y,g,_));let S=[l,...x],T=await rN(e,v),E=[],C=(null==(t=a.flip)?void 0:t.overflows)||[];if(d&&E.push(T[b]),p){let{main:k,cross:R}=function(e,t,r){void 0===r&&(r=!1);let n=rS(e),i=rC(e),s=rT(i),a="x"===i?n===(r?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[s]>t.floating[s]&&(a=rF(a)),{main:a,cross:rF(a)}}(s,o,_);E.push(T[k],T[R])}if(C=[...C,{placement:s,overflows:E}],!E.every(e=>e<=0)){let P=((null==(r=a.flip)?void 0:r.index)||0)+1,D=S[P];if(D)return{data:{index:P,overflows:C},reset:{placement:D}};let A=null==(n=C.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:n.placement;if(!A)switch(m){case"bestFit":{let N=null==(i=C.map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:i[0];N&&(A=N);break}case"initialPlacement":A=l}if(s!==A)return{reset:{placement:A}}}return{}}},{name:"size",options:f={...q,apply:({elements:e,rects:t,availableWidth:r,availableHeight:n})=>{let{width:i,height:s}=t.reference,a=e.floating.style;a.setProperty("--radix-popper-available-width",`${r}px`),a.setProperty("--radix-popper-available-height",`${n}px`),a.setProperty("--radix-popper-anchor-width",`${i}px`),a.setProperty("--radix-popper-anchor-height",`${s}px`)}},async fn(e){let t,r;let{placement:n,rects:i,platform:s,elements:a}=e,{apply:o=()=>{},...l}=rP(f,e),c=await rN(e,l),u=rE(n),d=rS(n),p="x"===rC(n),{width:h,height:m}=i.floating;"top"===u||"bottom"===u?(t=u,r=d===(await (null==s.isRTL?void 0:s.isRTL(a.floating))?"start":"end")?"left":"right"):(r=u,t="end"===d?"top":"bottom");let g=m-c[t],y=h-c[r],v=!e.middlewareData.shift,b=g,w=y;if(p){let _=h-c.left-c.right;w=d||v?rL(y,_):_}else{let x=m-c.top-c.bottom;b=d||v?rL(g,x):x}if(v&&!d){let S=rO(c.left,0),T=rO(c.right,0),E=rO(c.top,0),C=rO(c.bottom,0);p?w=h-2*(0!==S||0!==T?S+T:rO(c.left,c.right)):b=m-2*(0!==E||0!==C?E+C:rO(c.top,c.bottom))}await o({...e,availableWidth:w,availableHeight:b});let k=await s.getDimensions(a.floating);return h!==k.width||m!==k.height?{reset:{rects:!0}}:{}}},O&&nh({element:O,padding:x}),nL({arrowWidth:j,arrowHeight:F}),C&&{name:"hide",options:m={strategy:"referenceHidden"},async fn(e){let{rects:t}=e,{strategy:r="referenceHidden",...n}=rP(m,e);switch(r){case"referenceHidden":{let i=rU(await rN(e,{...n,elementContext:"reference"}),t.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:rq(i)}}}case"escaped":{let s=rU(await rN(e,{...n,altBoundary:!0}),t.floating);return{data:{escapedOffsets:s,escaped:rq(s)}}}default:return{}}}}]}),[K,G]=nO(H),Y=e2(R);eQ(()=>{W&&(null==Y||Y())},[W,Y]);let J=null===(i=Z.arrow)||void 0===i?void 0:i.x,Q=null===(s=Z.arrow)||void 0===s?void 0:s.y,X=(null===(a=Z.arrow)||void 0===a?void 0:a.centerOffset)!==0,[ee,et]=(0,g.useState)();return eQ(()=>{A&&et(window.getComputedStyle(A).zIndex)},[A]),(0,g.createElement)("div",{ref:z.setFloating,"data-radix-popper-content-wrapper":"",style:{...V,transform:W?V.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ee,"--radix-popper-transform-origin":[null===(o=Z.transformOrigin)||void 0===o?void 0:o.x,null===(l=Z.transformOrigin)||void 0===l?void 0:l.y].join(" ")},dir:e.dir},(0,g.createElement)(nR,{scope:y,placedSide:K,onArrowChange:I,arrowX:J,arrowY:Q,shouldHideArrow:X},(0,g.createElement)(e7.div,(0,eZ.Z)({"data-side":K,"data-align":G},P,{ref:L,style:{...P.style,animation:W?void 0:"none",opacity:null!==(c=Z.hide)&&void 0!==c&&c.referenceHidden?0:void 0}}))))}),nA={top:"bottom",right:"left",bottom:"top",left:"right"};function nN(e){return null!==e}let nL=e=>({name:"transformOrigin",options:e,fn(t){var r,n,i,s,a;let{placement:o,rects:l,middlewareData:c}=t,u=(null===(r=c.arrow)||void 0===r?void 0:r.centerOffset)!==0,d=u?0:e.arrowWidth,p=u?0:e.arrowHeight,[h,f]=nO(o),m={start:"0%",center:"50%",end:"100%"}[f],g=(null!==(n=null===(i=c.arrow)||void 0===i?void 0:i.x)&&void 0!==n?n:0)+d/2,y=(null!==(s=null===(a=c.arrow)||void 0===a?void 0:a.y)&&void 0!==s?s:0)+p/2,v="",b="";return"bottom"===h?(v=u?m:`${g}px`,b=`${-p}px`):"top"===h?(v=u?m:`${g}px`,b=`${l.floating.height+p}px`):"right"===h?(v=`${-p}px`,b=u?m:`${y}px`):"left"===h&&(v=`${l.floating.width+p}px`,b=u?m:`${y}px`),{data:{x:v,y:b}}}});function nO(e){let[t,r="center"]=e.split("-");return[t,r]}let nI=(0,g.forwardRef)((e,t)=>(0,g.createElement)(e7.span,(0,eZ.Z)({},e,{ref:t,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...e.style}}))),nM=[" ","Enter","ArrowUp","ArrowDown"],nj=[" ","Enter"],nF="Select",[n$,nB,nU]=function(e){let t=e+"CollectionProvider",[r,n]=eJ(t),[i,s]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=e=>{let{scope:t,children:r}=e,n=g.useRef(null),s=g.useRef(new Map).current;return g.createElement(i,{scope:t,itemMap:s,collectionRef:n},r)},o=e+"CollectionSlot",l=g.forwardRef((e,t)=>{let{scope:r,children:n}=e,i=s(o,r),a=eY(t,i.collectionRef);return g.createElement(e6,{ref:a},n)}),c=e+"CollectionItemSlot",u="data-radix-collection-item",d=g.forwardRef((e,t)=>{let{scope:r,children:n,...i}=e,a=g.useRef(null),o=eY(t,a),l=s(c,r);return g.useEffect(()=>(l.itemMap.set(a,{ref:a,...i}),()=>void l.itemMap.delete(a))),g.createElement(e6,{[u]:"",ref:o},n)});return[{Provider:a,Slot:l,ItemSlot:d},function(t){let r=s(e+"CollectionConsumer",t),n=g.useCallback(()=>{let e=r.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${u}]`)),n=Array.from(r.itemMap.values()),i=n.sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current));return i},[r.collectionRef,r.itemMap]);return n},n]}(nF),[nq,nz]=eJ(nF,[nU,nx]),nV=nx(),[nH,nW]=nq(nF),[nZ,nK]=nq(nF),nG=e=>{let{__scopeSelect:t,children:r,open:n,defaultOpen:i,onOpenChange:s,value:a,defaultValue:o,onValueChange:l,dir:c,name:u,autoComplete:d,disabled:p,required:h}=e,f=nV(t),[m,y]=(0,g.useState)(null),[v,b]=(0,g.useState)(null),[w,_]=(0,g.useState)(!1),x=function(e){let t=(0,g.useContext)(rx);return e||t||"ltr"}(c),[S=!1,T]=e5({prop:n,defaultProp:i,onChange:s}),[E,C]=e5({prop:a,defaultProp:o,onChange:l}),k=(0,g.useRef)(null),R=!m||Boolean(m.closest("form")),[P,D]=(0,g.useState)(new Set),A=Array.from(P).map(e=>e.props.value).join(";");return(0,g.createElement)(nE,f,(0,g.createElement)(nH,{required:h,scope:t,trigger:m,onTriggerChange:y,valueNode:v,onValueNodeChange:b,valueNodeHasChildren:w,onValueNodeHasChildrenChange:_,contentId:e1(),value:E,onValueChange:C,open:S,onOpenChange:T,dir:x,triggerPointerDownPosRef:k,disabled:p},(0,g.createElement)(n$.Provider,{scope:t},(0,g.createElement)(nZ,{scope:e.__scopeSelect,onNativeOptionAdd:(0,g.useCallback)(e=>{D(t=>new Set(t).add(e))},[]),onNativeOptionRemove:(0,g.useCallback)(e=>{D(t=>{let r=new Set(t);return r.delete(e),r})},[])},r)),R?(0,g.createElement)(ip,{key:A,"aria-hidden":!0,required:h,tabIndex:-1,name:u,autoComplete:d,value:E,onChange:e=>C(e.target.value),disabled:p},void 0===E?(0,g.createElement)("option",{value:""}):null,Array.from(P)):null))},nY=(0,g.forwardRef)((e,t)=>{let{__scopeSelect:r,disabled:n=!1,...i}=e,s=nV(r),a=nW("SelectTrigger",r),o=a.disabled||n,l=eY(t,a.onTriggerChange),c=nB(r),[u,d,p]=ih(e=>{let t=c().filter(e=>!e.disabled),r=t.find(e=>e.value===a.value),n=im(t,e,r);void 0!==n&&a.onValueChange(n.value)}),h=()=>{o||(a.onOpenChange(!0),p())};return(0,g.createElement)(nC,(0,eZ.Z)({asChild:!0},s),(0,g.createElement)(e7.button,(0,eZ.Z)({type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":void 0===a.value?"":void 0},i,{ref:l,onClick:eK(i.onClick,e=>{e.currentTarget.focus()}),onPointerDown:eK(i.onPointerDown,e=>{let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&(h(),a.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)},e.preventDefault())}),onKeyDown:eK(i.onKeyDown,e=>{let t=""!==u.current,r=e.ctrlKey||e.altKey||e.metaKey;r||1!==e.key.length||d(e.key),(!t||" "!==e.key)&&nM.includes(e.key)&&(h(),e.preventDefault())})})))}),nJ=(0,g.forwardRef)((e,t)=>{let{__scopeSelect:r,className:n,style:i,children:s,placeholder:a,...o}=e,l=nW("SelectValue",r),{onValueNodeHasChildrenChange:c}=l,u=void 0!==s,d=eY(t,l.onValueNodeChange);return eQ(()=>{c(u)},[c,u]),(0,g.createElement)(e7.span,(0,eZ.Z)({},o,{ref:d,style:{pointerEvents:"none"}}),void 0===l.value&&void 0!==a?a:s)}),nQ=(0,g.forwardRef)((e,t)=>{let{__scopeSelect:r,children:n,...i}=e;return(0,g.createElement)(e7.span,(0,eZ.Z)({"aria-hidden":!0},i,{ref:t}),n||"")}),nX=e=>(0,g.createElement)(tf,(0,eZ.Z)({asChild:!0},e)),n0="SelectContent",n1=(0,g.forwardRef)((e,t)=>{let r=nW(n0,e.__scopeSelect),[n,i]=(0,g.useState)();return(eQ(()=>{i(new DocumentFragment)},[]),r.open)?(0,g.createElement)(n4,(0,eZ.Z)({},e,{ref:t})):n?(0,e4.createPortal)((0,g.createElement)(n2,{scope:e.__scopeSelect},(0,g.createElement)(n$.Slot,{scope:e.__scopeSelect},(0,g.createElement)("div",null,e.children))),n):null}),[n2,n5]=nq(n0),n4=(0,g.forwardRef)((e,t)=>{let{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:p,collisionPadding:h,sticky:f,hideWhenDetached:m,avoidCollisions:y,...v}=e,b=nW(n0,r),[w,_]=(0,g.useState)(null),[x,S]=(0,g.useState)(null),T=eY(t,e=>_(e)),[E,C]=(0,g.useState)(null),[k,R]=(0,g.useState)(null),P=nB(r),[D,A]=(0,g.useState)(!1),N=(0,g.useRef)(!1);(0,g.useEffect)(()=>{if(w)return t6(w)},[w]),tv();let L=(0,g.useCallback)(e=>{let[t,...r]=P().map(e=>e.ref.current),[n]=r.slice(-1),i=document.activeElement;for(let s of e)if(s===i||(null==s||s.scrollIntoView({block:"nearest"}),s===t&&x&&(x.scrollTop=0),s===n&&x&&(x.scrollTop=x.scrollHeight),null==s||s.focus(),document.activeElement!==i))return},[P,x]),O=(0,g.useCallback)(()=>L([E,w]),[L,E,w]);(0,g.useEffect)(()=>{D&&O()},[D,O]);let{onOpenChange:I,triggerPointerDownPosRef:M}=b;(0,g.useEffect)(()=>{if(w){let e={x:0,y:0},t=t=>{var r,n,i,s;e={x:Math.abs(Math.round(t.pageX)-(null!==(r=null===(n=M.current)||void 0===n?void 0:n.x)&&void 0!==r?r:0)),y:Math.abs(Math.round(t.pageY)-(null!==(i=null===(s=M.current)||void 0===s?void 0:s.y)&&void 0!==i?i:0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():w.contains(r.target)||I(!1),document.removeEventListener("pointermove",t),M.current=null};return null!==M.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}},[w,I,M]),(0,g.useEffect)(()=>{let e=()=>I(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[I]);let[j,F]=ih(e=>{let t=P().filter(e=>!e.disabled),r=t.find(e=>e.ref.current===document.activeElement),n=im(t,e,r);n&&setTimeout(()=>n.ref.current.focus())}),$=(0,g.useCallback)((e,t,r)=>{let n=!N.current&&!r,i=void 0!==b.value&&b.value===t;(i||n)&&(C(e),n&&(N.current=!0))},[b.value]),B=(0,g.useCallback)(()=>null==w?void 0:w.focus(),[w]),U=(0,g.useCallback)((e,t,r)=>{let n=!N.current&&!r,i=void 0!==b.value&&b.value===t;(i||n)&&R(e)},[b.value]),q="popper"===n?n3:n6;return(0,g.createElement)(n2,{scope:r,content:w,viewport:x,onViewportChange:S,itemRefCallback:$,selectedItem:E,onItemLeave:B,itemTextRefCallback:U,focusSelectedItem:O,selectedItemText:k,position:n,isPositioned:D,searchRef:j},(0,g.createElement)(tQ,{as:e6,allowPinchZoom:!0},(0,g.createElement)(tl,{asChild:!0,trapped:b.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:eK(i,e=>{var t;null===(t=b.trigger)||void 0===t||t.focus({preventScroll:!0}),e.preventDefault()})},(0,g.createElement)(tr,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>b.onOpenChange(!1)},(0,g.createElement)(q,(0,eZ.Z)({role:"listbox",id:b.contentId,"data-state":b.open?"open":"closed",dir:b.dir,onContextMenu:e=>e.preventDefault()},v,q===n3?{side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:p,collisionPadding:h,sticky:f,hideWhenDetached:m,avoidCollisions:y}:{},{onPlaced:()=>A(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...v.style},onKeyDown:eK(v.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||F(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let r=P().filter(e=>!e.disabled),n=r.map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(n=n.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let i=e.target,s=n.indexOf(i);n=n.slice(s+1)}setTimeout(()=>L(n)),e.preventDefault()}})}))))))}),n6=(0,g.forwardRef)((e,t)=>{let{__scopeSelect:r,onPlaced:n,...i}=e,s=nW(n0,r),a=n5(n0,r),[o,l]=(0,g.useState)(null),[c,u]=(0,g.useState)(null),d=eY(t,e=>u(e)),p=nB(r),h=(0,g.useRef)(!1),f=(0,g.useRef)(!0),{viewport:m,selectedItem:y,selectedItemText:v,focusSelectedItem:b}=a,w=(0,g.useCallback)(()=>{if(s.trigger&&s.valueNode&&o&&c&&m&&y&&v){let e=s.trigger.getBoundingClientRect(),t=c.getBoundingClientRect(),r=s.valueNode.getBoundingClientRect(),i=v.getBoundingClientRect();if("rtl"!==s.dir){let a=i.left-t.left,l=r.left-a,u=e.left-l,d=e.width+u,f=Math.max(d,t.width),g=window.innerWidth-10,b=r_(l,[10,g-f]);o.style.minWidth=d+"px",o.style.left=b+"px"}else{let w=t.right-i.right,_=window.innerWidth-r.right-w,x=window.innerWidth-e.right-_,S=e.width+x,T=Math.max(S,t.width),E=window.innerWidth-10,C=r_(_,[10,E-T]);o.style.minWidth=S+"px",o.style.right=C+"px"}let k=p(),R=window.innerHeight-20,P=m.scrollHeight,D=window.getComputedStyle(c),A=parseInt(D.borderTopWidth,10),N=parseInt(D.paddingTop,10),L=parseInt(D.borderBottomWidth,10),O=parseInt(D.paddingBottom,10),I=A+N+P+O+L,M=Math.min(5*y.offsetHeight,I),j=window.getComputedStyle(m),F=parseInt(j.paddingTop,10),$=parseInt(j.paddingBottom,10),B=e.top+e.height/2-10,U=y.offsetHeight/2,q=y.offsetTop+U,z=A+N+q;if(z<=B){let V=y===k[k.length-1].ref.current;o.style.bottom="0px";let H=c.clientHeight-m.offsetTop-m.offsetHeight;o.style.height=z+Math.max(R-B,U+(V?$:0)+H+L)+"px"}else{let W=y===k[0].ref.current;o.style.top="0px";let Z=Math.max(B,A+m.offsetTop+(W?F:0)+U);o.style.height=Z+(I-z)+"px",m.scrollTop=z-B+m.offsetTop}o.style.margin="10px 0",o.style.minHeight=M+"px",o.style.maxHeight=R+"px",null==n||n(),requestAnimationFrame(()=>h.current=!0)}},[p,s.trigger,s.valueNode,o,c,m,y,v,s.dir,n]);eQ(()=>w(),[w]);let[_,x]=(0,g.useState)();eQ(()=>{c&&x(window.getComputedStyle(c).zIndex)},[c]);let S=(0,g.useCallback)(e=>{e&&!0===f.current&&(w(),null==b||b(),f.current=!1)},[w,b]);return(0,g.createElement)(n8,{scope:r,contentWrapper:o,shouldExpandOnScrollRef:h,onScrollButtonChange:S},(0,g.createElement)("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:_}},(0,g.createElement)(e7.div,(0,eZ.Z)({},i,{ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}}))))}),n3=(0,g.forwardRef)((e,t)=>{let{__scopeSelect:r,align:n="start",collisionPadding:i=10,...s}=e,a=nV(r);return(0,g.createElement)(nD,(0,eZ.Z)({},a,s,{ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}}))}),[n8,n9]=nq(n0,{}),n7="SelectViewport",ie=(0,g.forwardRef)((e,t)=>{let{__scopeSelect:r,...n}=e,i=n5(n7,r),s=n9(n7,r),a=eY(t,i.onViewportChange),o=(0,g.useRef)(0);return(0,g.createElement)(g.Fragment,null,(0,g.createElement)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),(0,g.createElement)(n$.Slot,{scope:r},(0,g.createElement)(e7.div,(0,eZ.Z)({"data-radix-select-viewport":"",role:"presentation"},n,{ref:a,style:{position:"relative",flex:1,overflow:"auto",...n.style},onScroll:eK(n.onScroll,e=>{let t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:n}=s;if(null!=n&&n.current&&r){let i=Math.abs(o.current-t.scrollTop);if(i>0){let a=window.innerHeight-20,l=parseFloat(r.style.minHeight),c=parseFloat(r.style.height),u=Math.max(l,c);if(u<a){let d=u+i,p=Math.min(a,d),h=d-p;r.style.height=p+"px","0px"===r.style.bottom&&(t.scrollTop=h>0?h:0,r.style.justifyContent="flex-end")}}}o.current=t.scrollTop})}))))}),[it,ir]=nq("SelectGroup"),ii=(0,g.forwardRef)((e,t)=>{let{__scopeSelect:r,...n}=e,i=e1();return(0,g.createElement)(it,{scope:r,id:i},(0,g.createElement)(e7.div,(0,eZ.Z)({role:"group","aria-labelledby":i},n,{ref:t})))}),is="SelectItem",[ia,io]=nq(is),il=(0,g.forwardRef)((e,t)=>{let{__scopeSelect:r,value:n,disabled:i=!1,textValue:s,...a}=e,o=nW(is,r),l=n5(is,r),c=o.value===n,[u,d]=(0,g.useState)(null!=s?s:""),[p,h]=(0,g.useState)(!1),f=eY(t,e=>{var t;return null===(t=l.itemRefCallback)||void 0===t?void 0:t.call(l,e,n,i)}),m=e1(),y=()=>{i||(o.onValueChange(n),o.onOpenChange(!1))};return(0,g.createElement)(ia,{scope:r,value:n,disabled:i,textId:m,isSelected:c,onItemTextChange:(0,g.useCallback)(e=>{d(t=>{var r;return t||(null!==(r=null==e?void 0:e.textContent)&&void 0!==r?r:"").trim()})},[])},(0,g.createElement)(n$.ItemSlot,{scope:r,value:n,disabled:i,textValue:u},(0,g.createElement)(e7.div,(0,eZ.Z)({role:"option","aria-labelledby":m,"data-highlighted":p?"":void 0,"aria-selected":c&&p,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1},a,{ref:f,onFocus:eK(a.onFocus,()=>h(!0)),onBlur:eK(a.onBlur,()=>h(!1)),onPointerUp:eK(a.onPointerUp,y),onPointerMove:eK(a.onPointerMove,e=>{if(i){var t;null===(t=l.onItemLeave)||void 0===t||t.call(l)}else e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:eK(a.onPointerLeave,e=>{if(e.currentTarget===document.activeElement){var t;null===(t=l.onItemLeave)||void 0===t||t.call(l)}}),onKeyDown:eK(a.onKeyDown,e=>{var t;let r=(null===(t=l.searchRef)||void 0===t?void 0:t.current)!=="";r&&" "===e.key||(nj.includes(e.key)&&y()," "===e.key&&e.preventDefault())})}))))}),ic="SelectItemText",iu=(0,g.forwardRef)((e,t)=>{let{__scopeSelect:r,className:n,style:i,...s}=e,a=nW(ic,r),o=n5(ic,r),l=io(ic,r),c=nK(ic,r),[u,d]=(0,g.useState)(null),p=eY(t,e=>d(e),l.onItemTextChange,e=>{var t;return null===(t=o.itemTextRefCallback)||void 0===t?void 0:t.call(o,e,l.value,l.disabled)}),h=null==u?void 0:u.textContent,f=(0,g.useMemo)(()=>(0,g.createElement)("option",{key:l.value,value:l.value,disabled:l.disabled},h),[l.disabled,l.value,h]),{onNativeOptionAdd:m,onNativeOptionRemove:y}=c;return eQ(()=>(m(f),()=>y(f)),[m,y,f]),(0,g.createElement)(g.Fragment,null,(0,g.createElement)(e7.span,(0,eZ.Z)({id:l.textId},s,{ref:p})),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?(0,e4.createPortal)(s.children,a.valueNode):null)}),id=(0,g.forwardRef)((e,t)=>{let{__scopeSelect:r,...n}=e,i=io("SelectItemIndicator",r);return i.isSelected?(0,g.createElement)(e7.span,(0,eZ.Z)({"aria-hidden":!0},n,{ref:t})):null}),ip=((e,t)=>{let{__scopeSelect:r,onAutoScroll:n,...i}=e,s=n5("SelectScrollButton",r),a=(0,g.useRef)(null),o=nB(r),l=(0,g.useCallback)(()=>{null!==a.current&&(window.clearInterval(a.current),a.current=null)},[]);return(0,g.useEffect)(()=>()=>l(),[l]),eQ(()=>{var e;let t=o().find(e=>e.ref.current===document.activeElement);null==t||null===(e=t.ref.current)||void 0===e||e.scrollIntoView({block:"nearest"})},[o]),(0,g.createElement)(e7.div,(0,eZ.Z)({"aria-hidden":!0},i,{ref:t,style:{flexShrink:0,...i.style},onPointerDown:eK(i.onPointerDown,()=>{null===a.current&&(a.current=window.setInterval(n,50))}),onPointerMove:eK(i.onPointerMove,()=>{var e;null===(e=s.onItemLeave)||void 0===e||e.call(s),null===a.current&&(a.current=window.setInterval(n,50))}),onPointerLeave:eK(i.onPointerLeave,()=>{l()})}))},(0,g.forwardRef)((e,t)=>{let{value:r,...n}=e,i=(0,g.useRef)(null),s=eY(t,i),a=function(e){let t=(0,g.useRef)({value:e,previous:e});return(0,g.useMemo)(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}(r);return(0,g.useEffect)(()=>{let e=i.current,t=window.HTMLSelectElement.prototype,n=Object.getOwnPropertyDescriptor(t,"value"),s=n.set;if(a!==r&&s){let o=new Event("change",{bubbles:!0});s.call(e,r),e.dispatchEvent(o)}},[a,r]),(0,g.createElement)(nI,{asChild:!0},(0,g.createElement)("select",(0,eZ.Z)({},n,{ref:s,defaultValue:r})))}));function ih(e){let t=e2(e),r=(0,g.useRef)(""),n=(0,g.useRef)(0),i=(0,g.useCallback)(e=>{let i=r.current+e;t(i),function e(t){r.current=t,window.clearTimeout(n.current),""!==t&&(n.current=window.setTimeout(()=>e(""),1e3))}(i)},[t]),s=(0,g.useCallback)(()=>{r.current="",window.clearTimeout(n.current)},[]);return(0,g.useEffect)(()=>()=>window.clearTimeout(n.current),[]),[r,i,s]}function im(e,t,r){var n;let i=t.length>1&&Array.from(t).every(e=>e===t[0]),s=i?t[0]:t,a=r?e.indexOf(r):-1,o=(n=Math.max(a,0),e.map((t,r)=>e[(n+r)%e.length])),l=1===s.length;l&&(o=o.filter(e=>e!==r));let c=o.find(e=>e.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==r?c:void 0}ip.displayName="BubbleSelect";var ig=r(5901),iy=r(49657),iv=r(93041),ib="data-hls-initialized",iw=0,i_=function(e,t,r,n){if("true"===t.getAttribute(ib))return{destroy:function(){}};t.setAttribute(ib,"true");var i,s,a=new iv.Z((0,eS.b)({maxBufferLength:15,maxMaxBufferLength:60,liveMaxLatencyDurationCount:7,liveSyncDurationCount:3},n));return t&&a.attachMedia(t),a.on(iv.Z.Events.LEVEL_LOADED,(i=(0,eS._)((0,eS.a)().mark(function e(t,n){var i,s,a,o,l;return(0,eS.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=(a=n.details).live,l=a.totalduration,null==r||null===(i=r.onLive)||void 0===i||i.call(r,Boolean(o)),null==r||null===(s=r.onDuration)||void 0===s||s.call(r,null!=l?l:0);case 3:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)})),a.on(iv.Z.Events.MEDIA_ATTACHED,(0,eS._)((0,eS.a)().mark(function t(){return(0,eS.a)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.loadSource(e),a.on(iv.Z.Events.MANIFEST_PARSED,function(e,t){var n;null==r||null===(n=r.onCanPlay)||void 0===n||n.call(r)});case 2:case"end":return t.stop()}},t)}))),a.on(iv.Z.Events.ERROR,(s=(0,eS._)((0,eS.a)().mark(function e(t,n){var i,s,o,l,c,u,d;return(0,eS.a)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s=n.type,o=n.details,l=n.fatal,c=s===iv.Z.ErrorTypes.NETWORK_ERROR&&l,u=s===iv.Z.ErrorTypes.MEDIA_ERROR&&l,d=iv.Z.ErrorTypes.NETWORK_ERROR&&"manifestParsingError"===o,!(!l&&!d)){e.next=6;break}return e.abrupt("return");case 6:if(null==r||null===(i=r.onError)||void 0===i||i.call(r,n),!(c||u||d)){e.next=11;break}return e.next=10,new Promise(function(e){return setTimeout(e,1e3*++iw)});case 10:null==a||a.recoverMediaError();case 11:case"end":return e.stop()}},e)})),function(e,t){return s.apply(this,arguments)})),{destroy:function(){var e,r;null==a||null===(e=a.destroy)||void 0===e||e.call(a),null==t||null===(r=t.removeAttribute)||void 0===r||r.call(t,ib)}}};function ix(){ix=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(c){l=function(e,t,r){return e[t]=r}}function u(e,t,r,i){var s,a,o=Object.create((t&&t.prototype instanceof h?t:h).prototype);return n(o,"_invoke",{value:(s=new T(i||[]),a="suspendedStart",function(t,n){if("executing"===a)throw Error("Generator is already running");if("completed"===a){if("throw"===t)throw n;return C()}for(s.method=t,s.arg=n;;){var i=s.delegate;if(i){var o=function e(t,r){var n=r.method,i=t.iterator[n];if(void 0===i)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=void 0,e(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=TypeError("The iterator does not provide a '"+n+"' method")),p;var s=d(i,t.iterator,r.arg);if("throw"===s.type)return r.method="throw",r.arg=s.arg,r.delegate=null,p;var a=s.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=void 0),r.delegate=null,p):a:(r.method="throw",r.arg=TypeError("iterator result is not an object"),r.delegate=null,p)}(i,s);if(o){if(o===p)continue;return o}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if("suspendedStart"===a)throw a="completed",s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);a="executing";var l=d(e,r,s);if("normal"===l.type){if(a=s.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:s.done}}"throw"===l.type&&(a="completed",s.method="throw",s.arg=l.arg)}})}),o}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}e.wrap=u;var p={};function h(){}function f(){}function m(){}var g={};l(g,s,function(){return this});var y=Object.getPrototypeOf,v=y&&y(y(E([])));v&&v!==t&&r.call(v,s)&&(g=v);var b=m.prototype=h.prototype=Object.create(g);function w(e){["next","throw","return"].forEach(function(t){l(e,t,function(e){return this._invoke(t,e)})})}function _(e,t){var i;n(this,"_invoke",{value:function(n,s){function a(){return new t(function(i,a){!function n(i,s,a,o){var l=d(e[i],e,s);if("throw"!==l.type){var c=l.arg,u=c.value;return u&&"object"==typeof u&&r.call(u,"__await")?t.resolve(u.__await).then(function(e){n("next",e,a,o)},function(e){n("throw",e,a,o)}):t.resolve(u).then(function(e){c.value=e,a(c)},function(e){return n("throw",e,a,o)})}o(l.arg)}(n,s,i,a)})}return i=i?i.then(a,a):a()}})}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function E(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return f.prototype=m,n(b,"constructor",{value:m,configurable:!0}),n(m,"constructor",{value:f,configurable:!0}),f.displayName=l(m,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,o,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(_.prototype),l(_.prototype,a,function(){return this}),e.AsyncIterator=_,e.async=function(t,r,n,i,s){void 0===s&&(s=Promise);var a=new _(u(t,r,n,i),s);return e.isGeneratorFunction(r)?a:a.next().then(function(e){return e.done?e.value:a.next()})},w(b),l(b,o,"Generator"),l(b,s,function(){return this}),l(b,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=E,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var o=r.call(s,"catchLoc"),l=r.call(s,"finallyLoc");if(o&&l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(o){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var s=i;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=t&&t<=s.finallyLoc&&(s=null);var a=s?s.completion:{};return a.type=e,a.arg=t,s?(this.method="next",this.next=s.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),S(r),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;S(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:E(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),p}},e}function iS(e,t,r,n,i,s,a){try{var o=e[s](a),l=o.value}catch(c){r(c);return}o.done?t(l):Promise.resolve(l).then(n,i)}function iT(e){return function(){var t=this,r=arguments;return new Promise(function(n,i){var s=e.apply(t,r);function a(e){iS(s,n,i,a,o,"next",e)}function o(e){iS(s,n,i,a,o,"throw",e)}a(void 0)})}}function iE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function iC(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s,a,o=[],l=!0,c=!1;try{if(s=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=s.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return iE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iE(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ik=function(e){return{_element:e._element,setLive:e.setLive,fullscreen:e.fullscreen,togglePlay:e.togglePlay,_updateMediaStream:e._updateMediaStream,deviceIds:e.deviceIds}},iR=g.forwardRef(function(e,t){var r,n=e.ingestUrl,i=e.title,s=e.aspectRatio,a=e.objectFit,o=e.webrtcConfig,l=e.onBroadcastError,c=e.onPlaybackStatusUpdate,u=e.playbackStatusSelector,d=g.useContext(eW.b),p=g.useCallback(function(e){var t;return null!==(t=null==u?void 0:u(e))&&void 0!==t?t:e},[u]);g.useEffect(function(){return d.subscribe(p,function(e,t){return null==c?void 0:c((0,ea.s)(e),(0,ea.s)(t))})},[c,p,d]);var h=(0,eW.u)(ik),f=h._element,m=h.setLive,y=h.fullscreen,v=h.togglePlay,b=h._updateMediaStream,w=iC(g.useState(null),2),_=w[0],x=w[1],S=g.useCallback((r=iT(ix().mark(function e(t){var r,n,i,s,a,o,c,u;return ix().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:b(t.stream,{audio:null==t?void 0:null===(r=t.audioTransceiver)||void 0===r?void 0:null===(n=r.sender)||void 0===n?void 0:null===(i=n.track)||void 0===i?void 0:null===(s=i.getSettings())||void 0===s?void 0:s.deviceId,video:null==t?void 0:null===(a=t.videoTransceiver)||void 0===a?void 0:null===(o=a.sender)||void 0===o?void 0:null===(c=o.track)||void 0===c?void 0:null===(u=c.getSettings())||void 0===u?void 0:u.deviceId}),x({audio:t.audioTransceiver,video:t.videoTransceiver}),null==l||l(null),null==v||v(!0),m(!0);case 5:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),[m,l,v,b]),T=g.useCallback(function(e){var t,r,n,i=Error(null!==(t=null==e?void 0:null===(r=e.message)||void 0===r?void 0:null===(n=r.toString)||void 0===n?void 0:n.call(r))&&void 0!==t?t:"Error with WebRTC");null==l||l(i)},[l]);return g.useEffect(function(){if(f&&n){var e=eB(n,f,null!=s?s:"16to9",{onConnected:S,onError:T},o).destroy;return function(){null==e||e()}}},[o,s,f,S,n,l,T]),g.useEffect(function(){return d.subscribe(function(e,t){var r,n;(null===(r=e._mediaStream)||void 0===r?void 0:r.id)!==(null===(n=t._mediaStream)||void 0===n?void 0:n.id)&&e._element&&_&&e._mediaStream&&eU({newMediaStream:e._mediaStream,prevMediaStream:t._mediaStream,aspectRatio:null!=s?s:"16to9",element:e._element,videoTransceiver:_.video,audioTransceiver:_.audio,onConnected:S}).catch(function(e){return T(e)})})},[d,_,s,S,T]),(0,eo.jsx)("video",{className:ex.Il.media.video({size:y?"fullscreen":a}),"aria-label":null!=i?i:"Video player",role:"video",width:"100%",height:"100%",ref:t,"webkit-playsinline":"true",playsInline:!0,muted:!0})}),iP=function(e){var t=e.value,r=e.onChange,n=e.type,i=e.portalContainer,s=e.mediaDevices,a=(0,g.useMemo)(function(){if(t&&s.every(function(e){return t!==e.deviceId})){var e,r=t.split(":",2),n=r.length>1?"".concat(null===(e=r[0])||void 0===e?void 0:e.slice(0,10),"...").concat(t.slice(-4)):t.slice(0,8);return null!=n?n:"screen"}return null},[s,t]);return(0,eo.jsxs)("div",{className:ex.Il.settings.select.group(),children:[(0,eo.jsx)("label",{className:ex.Il.settings.select.label(),htmlFor:"audio"===n?"audio-source":"video-source",children:"audio"===n?"Audio Source":"Video Source"}),(0,eo.jsxs)(nG,{disabled:0===s.length,value:t,onValueChange:r,name:"audio"===n?"audio-source":"video-source",children:[(0,eo.jsxs)(nY,{className:ex.Il.settings.select.trigger(),"aria-label":"audio"===n?"Audio Source":"Video Source",children:[(0,eo.jsx)(nJ,{placeholder:"audio"===n?"Select your audio source...":"Select your video source..."}),(0,eo.jsx)(nQ,{className:ex.Il.settings.select.icon(),children:(0,eo.jsx)(iD,{})})]}),(0,eo.jsx)(nX,{container:i,children:(0,eo.jsx)(n1,{className:ex.Il.settings.select.content(),children:(0,eo.jsx)(ie,{className:ex.Il.settings.select.viewport(),children:(0,eo.jsxs)(ii,{children:[s.map(function(e,t){var r;return(0,eo.jsxs)(il,{value:e.deviceId,className:ex.Il.settings.select.item(),children:[(0,eo.jsx)(iu,{children:null!==(r=e.label)&&void 0!==r?r:"".concat("audio"===n?"Audio Source":"Video Source"," ").concat(t+1," (").concat("default"===e.deviceId?"default":e.deviceId.slice(0,6),")")}),(0,eo.jsx)(id,{className:ex.Il.settings.select.itemIndicator(),children:(0,eo.jsx)(iA,{})})]},e.deviceId)}),t&&a&&(0,eo.jsxs)(il,{value:t,className:ex.Il.settings.select.item(),children:[(0,eo.jsx)(iu,{children:"Screen Source (".concat(a,")")}),(0,eo.jsx)(id,{className:ex.Il.settings.select.itemIndicator(),children:(0,eo.jsx)(iA,{})})]},t)]})})})})]})]})},iD=function(){return(0,eo.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"20",viewBox:"0 -960 960 960",width:"20",children:(0,eo.jsx)("path",{fill:"currentColor",d:"M480-345 240-585l43-43 197 198 197-197 43 43-240 239Z"})})},iA=function(){return(0,eo.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"16",viewBox:"0 -960 960 960",width:"16",children:(0,eo.jsx)("path",{d:"M378-246 154-470l43-43 181 181 384-384 43 43-427 427Z"})})},iN=function(e){return{deviceIds:e.deviceIds,_updateMediaStream:e._updateMediaStream}},iL=function(e){var t,r=e.portalContainer,n=e.streamConstraints,i=(0,eW.u)(iN),s=i.deviceIds,a=i._updateMediaStream,o=iC(g.useState(null),2),l=o[0],c=o[1];g.useEffect(function(){return ez(function(e){c(e.filter(function(e){return"audioinput"===e.kind}))})},[]);var u=g.useCallback((t=iT(ix().mark(function e(t){var r,i,o;return ix().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eq({source:{streamConstraints:n,videoDeviceId:null!==(r=null==s?void 0:s.video)&&void 0!==r?r:void 0,audioDeviceId:null!==(i=null!=t?t:null==s?void 0:s.audio)&&void 0!==i?i:void 0}});case 2:(o=e.sent)&&a(o);case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[a,s,n]);return(0,eo.jsx)(iP,{type:"audio",onChange:u,value:null==s?void 0:s.audio,mediaDevices:null!=l?l:[],portalContainer:r})},iO=function(){return(0,eo.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",children:[(0,eo.jsx)("path",{d:"M 9.25,9 7.98,10.27 24.71,27 l 1.27,-1.27 Z",fill:"currentColor"}),(0,eo.jsx)("path",{fill:"currentColor",d:"M8,21 L12,21 L17,26 L17,10 L12,15 L8,15 L8,21 Z M19,14 L19,22 C20.48,21.32 21.5,19.77 21.5,18 C21.5,16.26 20.48,14.74 19,14 ZM19,11.29 C21.89,12.15 24,14.83 24,18 C24,21.17 21.89,23.85 19,24.71 L19,26.77 C23.01,25.86 26,22.28 26,18 C26,13.72 23.01,10.14 19,9.23 L19,11.29 Z"})]})},iI=function(){return(0,eo.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",children:(0,eo.jsx)("path",{fill:"currentColor",d:"M8,21 L12,21 L17,26 L17,10 L12,15 L8,15 L8,21 Z M19,14 L19,22 C20.48,21.32 21.5,19.77 21.5,18 C21.5,16.26 20.48,14.74 19,14 ZM19,11.29 C21.89,12.15 24,14.83 24,18 C24,21.17 21.89,23.85 19,24.71 L19,26.77 C23.01,25.86 26,22.28 26,18 C26,13.72 23.01,10.14 19,9.23 L19,11.29 Z"})})},iM=function(e){return{isVolumeChangeSupported:e.isVolumeChangeSupported,requestToggleMute:e.requestToggleMute,requestVolume:e.requestVolume,muted:e.muted,volume:e.volume}},ij=function(e){var t=(0,eW.u)(iM),r=t.volume,n=t.requestToggleMute,i=t.muted,s=t.requestVolume,a=t.isVolumeChangeSupported,o=eg((0,m._)({volume:r,requestToggleMute:n,muted:i,requestVolume:s,isVolumeChangeSupported:a,defaultMutedIcon:(0,eo.jsx)(iO,{}),defaultUnmutedIcon:(0,eo.jsx)(iI,{})},e)),l=o.buttonProps,c=o.title;return(0,eo.jsx)("div",{className:ex.Il.volume.container(),children:(0,eo.jsx)("button",(0,m._)({style:{width:e.size,height:e.size},className:ex.Il.iconButton(),title:c,"aria-label":c,onClick:l.onPress},(0,K.o)(l,"onPress","size")))})},iF=function(e){return{deviceIds:e.deviceIds,_updateMediaStream:e._updateMediaStream}},i$=function(e){var t,r=e.portalContainer,n=e.streamConstraints,i=(0,eW.u)(iF),s=i.deviceIds,a=i._updateMediaStream,o=iC(g.useState(null),2),l=o[0],c=o[1];g.useEffect(function(){return ez(function(e){c(e.filter(function(e){return"videoinput"===e.kind}))})},[]);var u=g.useCallback((t=iT(ix().mark(function e(t){var r,i,o;return ix().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,eq({source:{streamConstraints:n,videoDeviceId:null!==(r=null!=t?t:null==s?void 0:s.video)&&void 0!==r?r:void 0,audioDeviceId:null!==(i=null==s?void 0:s.audio)&&void 0!==i?i:void 0}});case 2:(o=e.sent)&&a(o);case 4:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[a,s,n]);return(0,eo.jsx)(iP,{type:"video",onChange:u,value:null==s?void 0:s.video,mediaDevices:null!=l?l:[],portalContainer:r})},iB=function(){return(0,eo.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",children:(0,eo.jsx)("path",{d:"m 23.94,18.78 c .03,-0.25 .05,-0.51 .05,-0.78 0,-0.27 -0.02,-0.52 -0.05,-0.78 l 1.68,-1.32 c .15,-0.12 .19,-0.33 .09,-0.51 l -1.6,-2.76 c -0.09,-0.17 -0.31,-0.24 -0.48,-0.17 l -1.99,.8 c -0.41,-0.32 -0.86,-0.58 -1.35,-0.78 l -0.30,-2.12 c -0.02,-0.19 -0.19,-0.33 -0.39,-0.33 l -3.2,0 c -0.2,0 -0.36,.14 -0.39,.33 l -0.30,2.12 c -0.48,.2 -0.93,.47 -1.35,.78 l -1.99,-0.8 c -0.18,-0.07 -0.39,0 -0.48,.17 l -1.6,2.76 c -0.10,.17 -0.05,.39 .09,.51 l 1.68,1.32 c -0.03,.25 -0.05,.52 -0.05,.78 0,.26 .02,.52 .05,.78 l -1.68,1.32 c -0.15,.12 -0.19,.33 -0.09,.51 l 1.6,2.76 c .09,.17 .31,.24 .48,.17 l 1.99,-0.8 c .41,.32 .86,.58 1.35,.78 l .30,2.12 c .02,.19 .19,.33 .39,.33 l 3.2,0 c .2,0 .36,-0.14 .39,-0.33 l .30,-2.12 c .48,-0.2 .93,-0.47 1.35,-0.78 l 1.99,.8 c .18,.07 .39,0 .48,-0.17 l 1.6,-2.76 c .09,-0.17 .05,-0.39 -0.09,-0.51 l -1.68,-1.32 0,0 z m -5.94,2.01 c -1.54,0 -2.8,-1.25 -2.8,-2.8 0,-1.54 1.25,-2.8 2.8,-2.8 1.54,0 2.8,1.25 2.8,2.8 0,1.54 -1.25,2.8 -2.8,2.8 l 0,0 z",fill:"currentColor"})})},iU=function(e){return{_element:e._element}},iq=function(e){var t,r,n,i,s=(0,eW.u)(iU)._element;return(0,eo.jsx)("div",{className:ex.Il.volume.container(),children:(0,eo.jsxs)(rt,{children:[(0,eo.jsx)(rr,{asChild:!0,children:(0,eo.jsx)("button",(0,m._)((0,m._)({style:{width:e.size,height:e.size},className:ex.Il.iconButton(),title:"Broadcast settings","aria-label":"Broadcast settings"},(0,K.o)(e,"icon","size","streamConstraints")),{},{children:null!==(t=null==e?void 0:e.icon)&&void 0!==t?t:(0,eo.jsx)(iB,{})}))}),(0,eo.jsxs)(ra,{container:null!==(r=null==s?void 0:s.parentElement)&&void 0!==r?r:s,children:[(0,eo.jsx)(rl,{className:ex.Il.settings.overlay()}),(0,eo.jsxs)(rd,{className:ex.Il.settings.content(),children:[(0,eo.jsx)(rg,{className:ex.Il.settings.title(),children:"Settings"}),(0,eo.jsx)(i$,{streamConstraints:e.streamConstraints,portalContainer:null!==(n=null==s?void 0:s.parentElement)&&void 0!==n?n:s}),(0,eo.jsx)(iL,{streamConstraints:e.streamConstraints,portalContainer:null!==(i=null==s?void 0:s.parentElement)&&void 0!==i?i:s}),(0,eo.jsx)(ry,{asChild:!0,children:(0,eo.jsx)("button",{className:ex.Il.settings.close(),"aria-label":"Close",children:(0,eo.jsx)(iz,{})})})]})]})]})})},iz=function(){return(0,eo.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"48",viewBox:"0 -960 960 960",width:"48",children:(0,eo.jsx)("path",{d:"m249-207-42-42 231-231-231-231 42-42 231 231 231-231 42 42-231 231 231 231-42 42-231-231-231 231Z"})})},iV=function(){return(0,eo.jsx)("svg",{width:"100%",height:"100%",viewBox:"-340 -1265 1600 1600",children:(0,eo.jsx)("path",{fill:"currentColor",d:"M451-328h59v-194l79 81 43-43-153-152-152 152 43 43 81-81v194ZM140-160q-24 0-42-18t-18-42v-520q0-24 18-42t42-18h680q24 0 42 18t18 42v520q0 24-18 42t-42 18H140Zm0-60h680v-520H140v520Zm0 0v-520 520Z"})})},iH=function(e){return{_updateMediaStream:e._updateMediaStream}},iW=function(e){var t,r=(0,eW.u)(iH)._updateMediaStream,n=(0,g.useCallback)(iT(ix().mark(function t(){var n;return ix().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,eV(null==e?void 0:e.options);case 2:(n=t.sent)&&r(n);case 4:case"end":return t.stop()}},t)})),[r,null==e?void 0:e.options]);return(0,eo.jsx)("button",(0,m._)((0,m._)({style:{width:e.size,height:e.size},className:ex.Il.iconButton(),title:"Screen share","aria-label":"Screen share"},(0,K.o)(e,"icon","options","size")),{},{onClick:n,children:null!==(t=null==e?void 0:e.icon)&&void 0!==t?t:(0,eo.jsx)(iV,{})}))};function iZ(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var iK=["onIcon","offIcon","onPress"],iG=function(){return(0,eo.jsx)("svg",{width:"100%",height:"100%",viewBox:"-340 -1265 1600 1600",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,eo.jsx)("path",{fill:"currentColor",d:"M140-160q-24 0-42-18t-18-42v-520q0-24 18-42t42-18h520q24 0 42 18t18 42v215l160-160v410L720-435v215q0 24-18 42t-42 18H140Zm0-60h520v-520H140v520Zm0 0v-520 520Z"})})},iY=function(){return(0,eo.jsx)("svg",{width:"100%",height:"100%",viewBox:"-340 -1265 1600 1600",fill:"none",children:(0,eo.jsx)("path",{fill:"currentColor",d:"M880-275 720-435v111l-60-60v-356H304l-60-60h416q24 0 42 18t18 42v215l160-160v410ZM848-27 39-836l42-42L890-69l-42 42ZM484-560Zm-87 82ZM159-800l60 60h-79v520h520v-79l60 60v19q0 24-18 42t-42 18H140q-24 0-42-18t-18-42v-520q0-24 18-42t42-18h19Z"})})},iJ=function(e){return{toggleVideo:e.toggleVideo,video:e.video}},iQ=function(e){var t,r=(0,eW.u)(iJ),n=r.toggleVideo,i=r.video,s=e.onIcon,a=e.offIcon,o=e.onPress,l=iZ(e,iK),c=(t=iT(ix().mark(function e(){return ix().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==o?void 0:o();case 2:return e.next=4,n();case 4:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),u=en(Boolean(i),s,(0,eo.jsx)(iG,{}),a,(0,eo.jsx)(iY,{})),d=(0,g.useMemo)(function(){return i?"Turn video off (v)":"Turn video on (v)"},[i]);return(0,eo.jsx)("button",(0,m._)((0,m._)({style:{width:e.size,height:e.size},className:ex.Il.iconButton(),title:d,"aria-label":d,onClick:c},(0,K.o)(l,"size")),{},{children:u}))},iX=function(e){return{device:e.device}},i0=function(e){var t,r=(0,eW.u)(iX).device,n=g.useRef(null),i=iC(g.useState({width:0,left:0}),2),s=i[0],a=i[1];g.useEffect(function(){if("undefined"!=typeof window){var e=function(){var e,t,r,i=null===(e=n.current)||void 0===e?void 0:e.getBoundingClientRect();a({width:null!==(t=null==i?void 0:i.width)&&void 0!==t?t:0,left:null!==(r=null==i?void 0:i.left)&&void 0!==r?r:0})};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}},[]);var o=iC(g.useState(!1),2),l=o[0],c=o[1],u=iC(g.useState(0),2),d=u[0],p=u[1],h=ec((0,m._)({isActive:l||(null==r?void 0:r.isMobile),sliderWidth:s.width,defaultThumbIcon:(0,eo.jsx)(i1,{})},e)),f=h.title,y=h.value,v=h.active,b=h.handle,w=h.sliderProps,_=h.sliderLeftTrackProps,x=h.sliderMiddleTrackProps,S=h.sliderRightTrackProps,T=iC(g.useState(!1),2),E=T[0],C=T[1];g.useEffect(function(){if(E){var t,r,n,i,a,o,l,c,u=(i=iT(ix().mark(function e(t){var r;return ix().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Date.now()-d>50,e.next=3,w.onUpdate(t.clientX-s.left,r);case 3:r&&p(Date.now());case 4:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)}),h=(t=iT(ix().mark(function e(t){var r,n,i,a,o;return ix().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Date.now()-d>50,!(o=null===(r=t.touches)||void 0===r?void 0:null===(n=r.item)||void 0===n?void 0:null===(i=n.call(r,0))||void 0===i?void 0:i.clientX)){e.next=6;break}return e.next=5,w.onUpdate(o-s.left,a);case 5:a&&p(Date.now());case 6:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),f=(r=iT(ix().mark(function t(r){var n;return ix().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return C(!1),t.next=3,w.onUpdate(r.clientX-s.left,!0);case 3:return t.next=5,null==e?void 0:null===(n=e.onDone)||void 0===n?void 0:n.call(e);case 5:case"end":return t.stop()}},t)})),function(e){return r.apply(this,arguments)}),m=(n=iT(ix().mark(function t(r){var n,i,a,o,l,c,u,d,p;return ix().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(C(!1),!(p=null!==(n=null===(i=r.touches)||void 0===i?void 0:null===(a=i.item)||void 0===a?void 0:null===(o=a.call(i,0))||void 0===o?void 0:o.clientX)&&void 0!==n?n:null===(l=r.changedTouches)||void 0===l?void 0:null===(c=l.item)||void 0===c?void 0:null===(u=c.call(l,0))||void 0===u?void 0:u.clientX)){t.next=5;break}return t.next=5,w.onUpdate(p-s.left,!0);case 5:return t.next=7,null==e?void 0:null===(d=e.onDone)||void 0===d?void 0:d.call(e);case 7:case"end":return t.stop()}},t)})),function(e){return n.apply(this,arguments)});return null===(a=document)||void 0===a||a.addEventListener("mousemove",u),null===(o=document)||void 0===o||o.addEventListener("mouseup",f),null===(l=document)||void 0===l||l.addEventListener("touchmove",h),null===(c=document)||void 0===c||c.addEventListener("touchend",m),function(){var e,t,r,n;null===(e=document)||void 0===e||e.removeEventListener("mousemove",u),null===(t=document)||void 0===t||t.removeEventListener("mouseup",f),null===(r=document)||void 0===r||r.removeEventListener("touchmove",h),null===(n=document)||void 0===n||n.removeEventListener("touchend",m)}}},[E,w,e,s,d]);var k=g.useCallback((t=iT(ix().mark(function e(t){return ix().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.onUpdate(t.clientX-s.left);case 2:C(!0);case 3:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}),[w,s]),R=g.useCallback(iT(ix().mark(function e(){return ix().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c(!0);case 1:case"end":return e.stop()}},e)})),[c]),P=g.useCallback(iT(ix().mark(function e(){return ix().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c(!1);case 1:case"end":return e.stop()}},e)})),[c]);return(0,eo.jsxs)("div",{ref:n,onPointerDown:k,onMouseEnter:R,onMouseLeave:P,role:"slider","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":y,"aria-valuetext":f,"aria-orientation":"horizontal",className:ex.Il.slider.container(),children:[_.shown&&(0,eo.jsx)("div",{className:ex.Il.slider.track.left({size:v?"active":"default",rounded:_.rounded,css:_.css})}),b,x.shown&&(0,eo.jsx)("div",{className:ex.Il.slider.track.middle({size:v?"active":"default",rounded:x.rounded,css:x.css})}),S.shown&&(0,eo.jsx)("div",{className:ex.Il.slider.track.right({size:v?"active":"default",rounded:S.rounded,css:S.css})})]})},i1=function(e){var t=e.size,r=e.css;return(0,eo.jsx)("div",{className:ex.Il.slider.thumb({css:r,size:t})})},i2=function(e){return{fullscreen:e.fullscreen}},i5=function(e){var t=e.children,r=e.aspectRatio,n=e.theme,i=e.tabIndex,s=(0,eW.a)(n),a=(0,eW.u)(i2).fullscreen;return(0,eo.jsx)("div",{style:{display:"contents"},className:"".concat(s?"".concat(s," "):"","livepeer-contents-container"),children:(0,eo.jsx)("div",{className:"".concat(ex.Il.container({aspectRatio:r,size:a?"fullscreen":"default"})," livepeer-aspect-ratio-container"),tabIndex:null!=i?i:0,children:t})})},i4=function(){return(0,eo.jsxs)("svg",{viewBox:"0 0 324 140",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M82 8.30584L239.745 5.68359L242.335 118.151L83.9414 118.502L82 8.30584Z",fill:"#97F2EF"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M66 124.072L254.898 124L258 129L68.3248 128.971L66 124.072Z",fill:"#97F2EF"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M94.2062 111.151L92.5204 15.5292L229.556 14.1187L231.803 111.716L94.2062 111.151Z",fill:"#4CC38A"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M185 58.1481C185 70.8507 174.703 82 162 82C153.04 82 145.277 77.3008 141.48 70.0741C141.421 69.9609 141.362 69.8472 141.305 69.7328C140.965 69.0558 140.782 66.2859 140.704 64.963C140.278 66.2407 140.43 67.3765 140.507 67.9444C139.533 65.4642 139 62.7423 139 59.8519C139 47.1493 149.297 36 162 36C166.913 36 171.467 37.4132 175.204 39.8814C175.63 41.0012 176.226 43.6667 175.204 45.3704C176 44.8025 177.651 43.3259 177.888 41.963C182.27 45.9317 185 51.6082 185 58.1481Z",fill:"#141716"}),(0,eo.jsx)("path",{d:"M140.704 64.963C140.278 66.2407 140.43 67.3765 140.507 67.9444C140.746 68.5556 141.013 69.1521 141.305 69.7328C140.965 69.0558 140.782 66.2859 140.704 64.963Z",fill:"#141716"}),(0,eo.jsx)("path",{d:"M171 60.5003L156 70V60.6462V51L166.104 57.3994L171 60.5003Z",stroke:"#4CC38A",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,eo.jsx)("path",{d:"M101.096 100.921L176.5 101.109M219.885 101.163L198.193 101.136",stroke:"#141716",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M148.197 101.161C148.197 103.28 146.472 104.998 144.344 104.998C142.215 104.998 140.49 103.28 140.49 101.161C140.49 99.042 142.215 97.3242 144.344 97.3242C146.472 97.3242 148.197 99.042 148.197 101.161Z",fill:"#DF0087"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M148.197 101.161C148.197 103.28 146.472 104.998 144.344 104.998C142.215 104.998 140.49 103.28 140.49 101.161C140.49 99.042 142.215 97.3242 144.344 97.3242C146.472 97.3242 148.197 99.042 148.197 101.161Z",stroke:"#141716",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round"}),(0,eo.jsx)("path",{d:"M93.7252 111.754L91.7752 14.7408L230.275 13.7374L232.225 112.245L93.7252 111.754Z",stroke:"#141716",strokeWidth:"2.5"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M49.0868 58.0273L49.9632 88.7907L19.4093 88.9852L19.0201 58.6113L49.0868 58.0273ZM51 89.7922L50.0663 57L18 57.6228L18.4147 90L51 89.7922Z",fill:"#434545"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M296.114 25.1881L297.132 60.7679L261.637 60.9929L261.185 25.8636L296.114 25.1881ZM298.336 61.9263L297.252 24L260 24.7203L260.482 62.1666L298.336 61.9263Z",fill:"#434545"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M293.138 78.0001L293 67.2077L303.689 67.0001L304 77.9308L293.138 78.0001ZM304.309 78.2288L292.842 78.3019L292.696 66.9135L303.98 66.6943L304.309 78.2288ZM303.071 67.6482L293.644 67.8313L293.766 77.3599L303.346 77.2989L303.071 67.6482ZM303.362 67.3425L293.34 67.5372L293.47 77.6618L303.654 77.5969L303.362 67.3425Z",fill:"#434545"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M303.362 67.3424L303.654 77.5969L293.47 77.6617L293.34 67.5371L303.362 67.3424ZM304 77.9307L303.689 67L293 67.2076L293.138 78L304 77.9307Z",fill:"#434545"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M289.594 66.2179L289.78 72.7435L283.299 72.7847L283.216 66.3418L289.594 66.2179ZM290 72.9559L289.802 66L283 66.1321L283.088 73L290 72.9559Z",fill:"#434545"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M290.309 73.254L282.792 73.3019L282.696 65.838L290.093 65.6943L290.309 73.254ZM289.594 66.218L289.78 72.7435L283.299 72.7848L283.216 66.3419L289.594 66.218ZM289.471 72.4455L283.595 72.4829L283.52 66.636L289.303 66.5237L289.471 72.4455ZM283.088 73.0001L283 66.1322L289.802 66.0001L290 72.956L283.088 73.0001Z",fill:"#434545"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M47.442 36.3017L47.3038 47.0941L57.9925 47.3017L58.3038 36.371L47.442 36.3017ZM58.6124 36.0729L47.1459 35.9998L47 47.3883L58.284 47.6074L58.6124 36.0729ZM57.3747 46.6536L47.9476 46.4704L48.0697 36.9419L57.6496 37.0029L57.3747 46.6536ZM57.6661 46.9593L47.6438 46.7646L47.7736 36.64L57.9582 36.7048L57.6661 46.9593Z",fill:"#434545"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M57.6661 46.9593L57.9582 36.7049L47.7736 36.64L47.6439 46.7646L57.6661 46.9593ZM58.3038 36.371L57.9926 47.3018L47.3038 47.0942L47.4421 36.3018L58.3038 36.371Z",fill:"#434545"})]})},i6=function(){return(0,eo.jsxs)("svg",{viewBox:"0 0 324 142",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,eo.jsx)("circle",{cx:"162",cy:"76",r:"23",stroke:"#141716",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),(0,eo.jsx)("path",{d:"M242 88.5C242 88.5 206.183 131 162 131C117.817 131 82 88.5 82 88.5C82 88.5 117.817 46 162 46C206.183 46 242 88.5 242 88.5Z",fill:"#97F2EF"}),(0,eo.jsx)("path",{d:"M249 82C249 82 210.825 128 162.5 128C114.175 128 74.5 82.5 74.5 82.5C74.5 82.5 114.175 32 162.5 32C219 34 249 82 249 82Z",fill:"#97F2EF"}),(0,eo.jsx)("path",{d:"M249 82.5C249 82.5 210.049 129 162 129C113.951 129 75 82.5 75 82.5C75 82.5 113.951 36 162 36C210.049 36 249 82.5 249 82.5Z",fill:"#4CC38A"}),(0,eo.jsx)("path",{d:"M216.5 60.8302C202.013 51.0702 182.921 42 162 42C116.713 42 80 84.5 80 84.5C80 84.5 116.713 127 162 127C207.287 127 244 84.5 244 84.5C244 84.5 240.941 80.9589 235.5 75.921",stroke:"#141716",strokeWidth:"2.5"}),(0,eo.jsx)("path",{d:"M118 117.5C117 119.5 107.5 122.7 107.5 125.5M127 121.5C123.667 126.167 117 136.7 117 141.5",stroke:"#97F2EF",strokeWidth:"2.5"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M193 86C193 100.912 180.912 114 166 114C155.482 114 146.369 108.484 141.912 100C141.842 99.8672 141.773 99.7336 141.706 99.5994C141.306 98.8046 141.091 95.553 141 94C140.5 95.5 140.679 96.8333 140.769 97.5C139.626 94.5884 139 91.3932 139 88C139 73.0883 151.088 60 166 60C171.768 60 177.113 61.6589 181.5 64.5564C182 65.8709 182.7 69 181.5 71C182.434 70.3333 184.373 68.6 184.652 67C189.796 71.6589 193 78.3227 193 86Z",fill:"#141716"}),(0,eo.jsx)("path",{d:"M141 94C140.5 95.5 140.679 96.8333 140.769 97.5C141.05 98.2174 141.363 98.9177 141.706 99.5994C141.306 98.8046 141.091 95.553 141 94Z",fill:"#141716"}),(0,eo.jsx)("path",{d:"M170.403 79C176.754 79 182.328 84.8203 182.328 92C182.328 99.1797 177.606 105 171.254 105C167.788 105 164.552 103.266 162.328 100.523C161.871 99.9592 161.457 99.3526 161.092 98.7097C159.98 96.7509 159.328 94.4549 159.328 92C159.328 84.8203 164.051 79 170.403 79Z",fill:"#4CC38A"}),(0,eo.jsx)("path",{d:"M70.5 43C77 48.1667 87.3 55 94.5 63M98 8C103 19.6667 113 44.8 113 52M156.5 0.5C156 12.5 158 32.5 158 32.5M223 56C231.667 50.6667 241 43 263 39",stroke:"#97F2EF",strokeWidth:"2.5"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M288.028 49.4047L287.706 29.9756L312.554 29.6019L313.278 49.28L288.028 49.4047ZM313.995 49.8165L287.339 49.9481L287 29.4461L313.232 29.0515L313.995 49.8165ZM311.118 30.7687L289.203 31.0984L289.487 48.2522L311.757 48.1424L311.118 30.7687ZM311.795 30.2184L288.497 30.5688L288.798 48.7957L312.474 48.679L311.795 30.2184Z",fill:"#434545"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M311.795 30.2182L312.475 48.6788L288.798 48.7955L288.497 30.5687L311.795 30.2182ZM313.278 49.2798L312.554 29.6017L287.706 29.9755L288.028 49.4045L313.278 49.2798Z",fill:"#434545"}),(0,eo.jsx)("path",{d:"M308.595 29.6018V24.201C308.595 20.224 305.371 17 301.394 17V17C297.417 17 294.193 20.224 294.193 24.201V29.6018",stroke:"#434545",strokeWidth:"2"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.9897 127.881L31.6802 109.168L55.6122 108.808L56.309 127.761L31.9897 127.881ZM57 128.278L31.3266 128.405L31 108.658L56.2646 108.278L57 128.278ZM54.2287 109.932L33.1217 110.25L33.3951 126.771L54.8443 126.665L54.2287 109.932ZM54.8812 109.402L32.4415 109.74L32.732 127.295L55.5352 127.182L54.8812 109.402Z",fill:"#434545"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M54.8813 109.402L55.5353 127.182L32.7321 127.295L32.4416 109.74L54.8813 109.402ZM56.3091 127.761L55.6122 108.808L31.6803 109.168L31.9898 127.881L56.3091 127.761Z",fill:"#434545"}),(0,eo.jsx)("path",{d:"M51.7984 108.808V103.606C51.7984 99.776 48.6932 96.6709 44.8628 96.6709V96.6709C41.0325 96.6709 37.9273 99.776 37.9273 103.606V108.808",stroke:"#434545"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.4568 93.4225L16.3139 85.9741L27.3595 85.8309L27.6811 93.3747L16.4568 93.4225ZM28 93.5804L16.1507 93.6308L16 85.7711L27.6606 85.6199L28 93.5804ZM26.7209 86.2782L16.9793 86.4046L17.1054 92.9807L27.005 92.9386L26.7209 86.2782ZM27.0221 86.0672L16.6653 86.2016L16.7994 93.189L27.324 93.1443L27.0221 86.0672Z",fill:"#434545"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27.0221 86.0676L27.324 93.1447L16.7994 93.1895L16.6654 86.202L27.0221 86.0676ZM27.6811 93.3751L27.3595 85.8313L16.314 85.9746L16.4568 93.4229L27.6811 93.3751Z",fill:"#434545"}),(0,eo.jsx)("path",{d:"M25.5992 85.831V84.201C25.5992 82.4331 24.1661 81 22.3982 81V81C20.6304 81 19.1972 82.4331 19.1972 84.201V85.831",stroke:"#434545"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M289.419 69.8179L289.288 62.3096L299.413 62.1844L299.708 69.7762L289.419 69.8179ZM300 69.9559L289.138 70L289 62.1322L299.689 62L300 69.9559ZM299 63H290L290.013 69.4319L299.088 69.3951L299 63ZM299.104 62.3909L289.61 62.5083L289.733 69.6139L299.38 69.5748L299.104 62.3909Z",fill:"#434545"}),(0,eo.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M299.104 62.3909L299.38 69.5748L289.733 69.6139L289.61 62.5083L299.104 62.3909ZM299.708 69.7762L299.413 62.1844L289.288 62.3096L289.419 69.8179L299.708 69.7762Z",fill:"#434545"}),(0,eo.jsx)("path",{d:"M296.752 62.9402V61.2516C296.752 60.0081 295.744 59 294.5 59V59C293.257 59 292.249 60.0081 292.249 61.2516V62.9402",stroke:"#434545"})]})},i3=function(e){var t=e.isBroadcast;return(0,eo.jsxs)("div",{className:ex.Il.controlsContainer.error.background(),children:[(0,eo.jsx)(i4,{}),(0,eo.jsx)("div",{className:ex.Il.controlsContainer.error.title(),children:t?"Stream key invalid":"Stream is offline"}),(0,eo.jsx)("div",{className:ex.Il.controlsContainer.error.text(),children:t?"The provided stream key could not be found. Please check it and try again.":"Playback will start automatically once the stream has started."})]})},i8=function(){return(0,eo.jsxs)("div",{className:ex.Il.controlsContainer.error.background(),children:[(0,eo.jsx)(i6,{}),(0,eo.jsx)("div",{className:ex.Il.controlsContainer.error.title(),children:"Stream is private"}),(0,eo.jsx)("div",{className:ex.Il.controlsContainer.error.text(),children:"It looks like you don't have permission to view this content."})]})},i9=function(e){var t=e.isBroadcast;return(0,eo.jsxs)("div",{className:ex.Il.controlsContainer.error.background(),children:[(0,eo.jsx)(i4,{}),(0,eo.jsx)("div",{className:ex.Il.controlsContainer.error.title(),children:t?"Broadcast failed":"Playback failed"}),(0,eo.jsx)("div",{className:ex.Il.controlsContainer.error.text(),children:t?"There was an error with broadcasting - please try again later.":"There was an error with playback - please wait while we are retrying in the background."})]})},i7=function(e){return{hidden:e.hidden,togglePlay:e.togglePlay,canPlay:e.canPlay,hasPlayed:e.hasPlayed,buffered:e.buffered,ingestUrl:e.ingestUrl,_updateLastInteraction:e._updateLastInteraction}},se=function(e){var t=e.top,r=e.middle,n=e.left,i=e.right,s=e.poster,a=e.showLoadingSpinner,o=e.hidePosterOnPlayed,l=e.loadingText,c=e.error,u=e.children,d=(0,eW.u)(i7),p=d.hidden,h=d.togglePlay,f=d.canPlay,m=d.hasPlayed,y=d.buffered,v=d.ingestUrl,b=d._updateLastInteraction,w=g.useMemo(function(){return Boolean(v)},[v]),_=eu({togglePlay:h,canPlay:f,buffered:y,isBroadcast:w,_updateLastInteraction:b}),x=_.isLoaded,S=_.containerProps;return(0,eo.jsxs)(eo.Fragment,{children:[s?(0,eo.jsx)("div",{className:ex.Il.controlsContainer.background({display:m&&(void 0===o||o)?"hidden":"shown"}),onMouseUp:S.onPress,children:s}):(0,eo.jsx)("div",{className:ex.Il.controlsContainer.background({display:"hidden"}),onMouseUp:S.onPress}),(void 0===a||a)&&!x&&!(null!=c&&c.type)&&(0,eo.jsxs)("div",{className:ex.Il.controlsContainer.background(),onMouseUp:S.onPress,children:[l&&(0,eo.jsx)("div",{className:ex.Il.controlsContainer.loadingText(),children:l}),(0,eo.jsx)("div",{className:ex.Il.controlsContainer.loading()})]}),(null==c?void 0:c.type)&&(0,eo.jsx)("div",{className:ex.Il.controlsContainer.background(),onMouseUp:S.onPress,children:(null==c?void 0:c.type)==="access-control"?(0,eo.jsx)(i8,{}):(null==c?void 0:c.type)==="offline"?(0,eo.jsx)(i3,{isBroadcast:w}):(0,eo.jsx)(i9,{isBroadcast:w})}),x&&!(null!=c&&c.type)&&(0,eo.jsxs)(eo.Fragment,{children:[(0,eo.jsx)("div",{className:ex.Il.controlsContainer.gradient({display:p?"hidden":"shown"}),onMouseUp:S.onPress}),(0,eo.jsx)("div",{className:ex.Il.controlsContainer.top.container({display:p?"hidden":"shown"}),children:t}),(0,eo.jsxs)("div",{className:ex.Il.controlsContainer.bottom.container({display:p?"hidden":"shown"}),children:[(0,eo.jsx)("div",{className:ex.Il.controlsContainer.bottom.middle.container(),children:r}),(0,eo.jsxs)("div",{className:ex.Il.controlsContainer.bottom.lower.container(),children:[(0,eo.jsx)("div",{className:ex.Il.controlsContainer.bottom.lower.left(),children:n}),(0,eo.jsx)("div",{className:ex.Il.controlsContainer.bottom.lower.right(),children:i})]})]}),u&&(0,eo.jsx)("div",{className:ex.Il.controlsContainer.background({display:p?"hidden":"shown"}),children:u})]})]})},st=function(){return(0,eo.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,eo.jsx)("path",{fill:"currentColor",d:"m 10,16 2,0 0,-4 4,0 0,-2 L 10,10 l 0,6 0,0 z"}),(0,eo.jsx)("path",{fill:"currentColor",d:"m 20,10 0,2 4,0 0,4 2,0 L 26,10 l -6,0 0,0 z"}),(0,eo.jsx)("path",{fill:"currentColor",d:"m 24,24 -4,0 0,2 L 26,26 l 0,-6 -2,0 0,4 0,0 z"}),(0,eo.jsx)("path",{fill:"currentColor",d:"M 12,20 10,20 10,26 l 6,0 0,-2 -4,0 0,-4 0,0 z"})]})},sr=function(){return(0,eo.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg",children:[(0,eo.jsx)("path",{fill:"currentColor",d:"m 14,14 -4,0 0,2 6,0 0,-6 -2,0 0,4 0,0 z"}),(0,eo.jsx)("path",{fill:"currentColor",d:"m 22,14 0,-4 -2,0 0,6 6,0 0,-2 -4,0 0,0 z"}),(0,eo.jsx)("path",{fill:"currentColor",d:"m 20,26 2,0 0,-4 4,0 0,-2 -6,0 0,6 0,0 z"}),(0,eo.jsx)("path",{fill:"currentColor",d:"m 10,22 4,0 0,4 2,0 0,-6 -6,0 0,2 0,0 z"})]})},sn=function(e){return{fullscreen:e.fullscreen,pictureInPicture:e.pictureInPicture,requestToggleFullscreen:e.requestToggleFullscreen}},si=function(e){var t=(0,eW.u)(sn),r=t.fullscreen,n=t.pictureInPicture,i=t.requestToggleFullscreen,s=ed((0,m._)({fullscreen:r,pictureInPicture:n,requestToggleFullscreen:i,defaultEnterIcon:(0,eo.jsx)(st,{}),defaultExitIcon:(0,eo.jsx)(sr,{})},e)),a=s.title,o=s.buttonProps;return o?(0,eo.jsx)("button",(0,m._)({style:{width:e.size,height:e.size},className:ex.Il.iconButton(),title:a,"aria-label":a,onClick:o.onPress},(0,K.o)(o,"onPress","size"))):(0,eo.jsx)(eo.Fragment,{})},ss=["icon","onPress"],sa=function(){return(0,eo.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",xmlns:"http://www.w3.org/2000/svg",children:(0,eo.jsx)("path",{fill:"currentColor",d:"M25,17 L17,17 L17,23 L25,23 L25,17 L25,17 Z M29,25 L29,10.98 C29,9.88 28.1,9 27,9 L9,9 C7.9,9 7,9.88 7,10.98 L7,25 C7,26.1 7.9,27 9,27 L27,27 C28.1,27 29,26.1 29,25 L29,25 Z M27,25.02 L9,25.02 L9,10.97 L27,10.97 L27,25.02 L27,25.02 Z"})})},so=function(e){return{requestTogglePictureInPicture:e.requestTogglePictureInPicture,pictureInPicture:e.pictureInPicture,_element:e._element,fullscreen:e.fullscreen}},sl=function(e){var t=(0,eW.u)(so),r=t.requestTogglePictureInPicture,n=t._element,i=t.pictureInPicture,s=t.fullscreen,a=e.icon,o=e.onPress,l=iZ(e,ss),c=g.useCallback(iT(ix().mark(function e(){return ix().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null==o?void 0:o();case 2:return e.next=4,r();case 4:case"end":return e.stop()}},e)})),[o,r]),u=g.useMemo(function(){return(0,iy.vs)(n)},[n]),d=g.useMemo(function(){return i?"Exit mini player (i)":"Mini player (i)"},[i]);if(!u||s)return(0,eo.jsx)(eo.Fragment,{});var p=a||(0,eo.jsx)(sa,{});return(0,eo.jsx)("button",(0,m._)((0,m._)({style:{width:e.size,height:e.size},className:ex.Il.iconButton(),title:d,"aria-label":d,onClick:c},l),{},{children:p}))},sc=function(e){return{duration:e.duration,progress:e.progress,live:e.live}},su=function(){var e=(0,eW.u)(sc),t=em({duration:e.duration,progress:e.progress,live:e.live}),r=t.title,n=t.live;return(0,eo.jsx)(eo.Fragment,{children:n?(0,eo.jsxs)("div",{className:ex.Il.time.container(),children:[(0,eo.jsx)("div",{className:ex.Il.time.liveIndicator()}),(0,eo.jsx)("span",{className:ex.Il.time.text(),"aria-label":"Live streaming media",children:"LIVE"})]}):(0,eo.jsx)("span",{className:ex.Il.time.text(),"aria-label":"Playback time",children:r})})},sd=function(e){var t=e.content;return(0,eo.jsx)("span",{className:ex.Il.title(),"aria-label":"Title",children:t})};(0,g.memo)(function(e){var t=el(e),r=t.mediaElement,n=t.broadcastProps,i=t.mediaControllerProps,s=t.controlsContainerProps,a=t.props,o=a.children,l=a.controls,c=a.theme,u=a.title,d=a.aspectRatio,p=a.renderChildrenOutsideContainer;return(0,eo.jsxs)(eW.M,{element:r,opts:l,mediaProps:i,children:[(0,eo.jsxs)(i5,{theme:c,aspectRatio:d,tabIndex:e.tabIndex,children:[(0,eo.jsx)(iR,(0,m._)({},n)),!p&&g.isValidElement(o)?g.cloneElement(o,s):(0,eo.jsx)(se,(0,m._)((0,m._)({},s),{},{top:(0,eo.jsx)(eo.Fragment,{children:u&&(0,eo.jsx)(sd,{content:u})}),left:(0,eo.jsxs)(eo.Fragment,{children:[(0,eo.jsx)(iQ,{}),(0,eo.jsx)(ij,{}),(0,eo.jsx)(iW,{options:null==e?void 0:e.displayMediaOptions}),(0,eo.jsx)(su,{})]}),right:(0,eo.jsxs)(eo.Fragment,{children:[e.showPipButton&&(0,eo.jsx)(sl,{}),(0,eo.jsx)(iq,{streamConstraints:e.mediaStreamConstraints}),(0,eo.jsx)(si,{})]})}))]}),p&&g.isValidElement(o)?o:(0,eo.jsx)(eo.Fragment,{})]})});var sp=function(e){return{fullscreen:e.fullscreen}},sh=g.forwardRef(function(e,t){var r=e.src,n=e.autoPlay,i=e.title,s=e.loop,a=e.muted,o=e.objectFit,l=e.allowCrossOriginCredentials,c=(0,eW.u)(sp).fullscreen,u=g.useMemo(function(){var e;return null!==(e=null==r?void 0:r.filter(function(e){return(null==e?void 0:e.mime)&&(0,iy.wf)(e)}))&&void 0!==e?e:[]},[r]);return(0,eo.jsxs)("audio",{className:ex.Il.media.audio({size:c?"fullscreen":o}),loop:s,"aria-label":null!=i?i:"Audio player",role:"audio",autoPlay:n,ref:t,"webkit-playsinline":"true",playsInline:!0,muted:a,crossOrigin:l?"use-credentials":"anonymous",children:[u.map(function(e){return(0,eo.jsx)("source",{src:e.src,type:e.mime},e.src)}),"Your browser doesn't support the HTML5 <code>audio</code> tag, or the audio format."]})});sh.displayName="AudioPlayer";var sf=function(){return(0,eo.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,eo.jsx)("path",{d:"M 12,26 18.5,22 18.5,14 12,10 z M 18.5,22 25,18 25,18 18.5,14 z",fill:"currentColor"})})},sm=function(){return(0,eo.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",fill:"none",children:(0,eo.jsx)("path",{d:"M 12,26 16,26 16,10 12,10 z M 21,26 25,26 25,10 21,10 z",fill:"currentColor"})})},sg=function(e){return{togglePlay:e.togglePlay,playing:e.playing}},sy=function(e){var t=(0,eW.u)(sg),r=t.togglePlay,n=t.playing,i=ep((0,m._)({togglePlay:r,playing:n,defaultPauseIcon:(0,eo.jsx)(sm,{}),defaultPlayIcon:(0,eo.jsx)(sf,{})},e)),s=i.buttonProps,a=i.title;return(0,eo.jsx)("button",(0,m._)({style:{width:e.size,height:e.size},className:ex.Il.iconButton(),title:a,"aria-label":a,onClick:s.onPress},(0,K.o)(s,"onPress","size")))},sv=function(e){return{fullscreen:e.fullscreen}},sb=function(e){var t=(0,eW.u)(sv).fullscreen,r=e.content,n=e.title;return"string"==typeof r?(0,eo.jsx)("img",{className:ex.Il.media.poster({size:t?"fullscreen":"default"}),"aria-label":n,alt:n,src:r}):g.isValidElement(r)?g.cloneElement(r,{className:ex.Il.media.poster({size:t?"fullscreen":"default"})}):(0,eo.jsx)(eo.Fragment,{})},sw=function(e){return{duration:e.duration,progress:e.progress,requestSeek:e.requestSeek,buffered:e.buffered,live:e.live}},s_=function(e){var t=(0,eW.u)(sw),r=t.duration,n=t.progress,i=t.requestSeek,s=t.buffered,a=t.live,o=eh((0,m._)({duration:r,progress:n,requestSeek:i,buffered:s,live:a},e)),l=o.isVisible,c=o.progressProps,u=o.title;return l?(0,eo.jsx)(i0,(0,m._)((0,m._)({},c),{},{ariaName:u})):(0,eo.jsx)(eo.Fragment,{})},sx=function(){return(0,eo.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",children:[(0,eo.jsx)("path",{d:"M 9.25,9 7.98,10.27 24.71,27 l 1.27,-1.27 Z",fill:"currentColor"}),(0,eo.jsx)("path",{fill:"currentColor",d:"M8,21 L12,21 L17,26 L17,10 L12,15 L8,15 L8,21 Z M19,14 L19,22 C20.48,21.32 21.5,19.77 21.5,18 C21.5,16.26 20.48,14.74 19,14 ZM19,11.29 C21.89,12.15 24,14.83 24,18 C24,21.17 21.89,23.85 19,24.71 L19,26.77 C23.01,25.86 26,22.28 26,18 C26,13.72 23.01,10.14 19,9.23 L19,11.29 Z"})]})},sS=function(){return(0,eo.jsx)("svg",{width:"100%",height:"100%",viewBox:"0 0 36 36",children:(0,eo.jsx)("path",{fill:"currentColor",d:"M8,21 L12,21 L17,26 L17,10 L12,15 L8,15 L8,21 Z M19,14 L19,22 C20.48,21.32 21.5,19.77 21.5,18 C21.5,16.26 20.48,14.74 19,14 ZM19,11.29 C21.89,12.15 24,14.83 24,18 C24,21.17 21.89,23.85 19,24.71 L19,26.77 C23.01,25.86 26,22.28 26,18 C26,13.72 23.01,10.14 19,9.23 L19,11.29 Z"})})},sT=function(e){return{isVolumeChangeSupported:e.isVolumeChangeSupported,requestToggleMute:e.requestToggleMute,requestVolume:e.requestVolume,muted:e.muted,volume:e.volume}},sE=function(e){var t=(0,eW.u)(sT),r=t.volume,n=t.requestToggleMute,i=t.muted,s=t.requestVolume,a=t.isVolumeChangeSupported,o=eg((0,m._)({volume:r,requestToggleMute:n,muted:i,requestVolume:s,isVolumeChangeSupported:a,defaultMutedIcon:(0,eo.jsx)(sx,{}),defaultUnmutedIcon:(0,eo.jsx)(sS,{})},e)),l=o.progressProps,c=o.buttonProps,u=o.title;return(0,eo.jsxs)("div",{className:ex.Il.volume.container(),children:[(0,eo.jsx)("button",(0,m._)({style:{width:e.size,height:e.size},className:ex.Il.iconButton(),title:u,"aria-label":u,onClick:c.onPress},(0,K.o)(c,"onPress","size"))),l.shown&&(0,eo.jsx)(i0,(0,m._)({ariaName:"volume",value:i?0:r},l))]})},sC=function(e){return{setLive:e.setLive,onDurationChange:e.onDurationChange,onCanPlay:e.onCanPlay,_element:e._element}},sk=g.forwardRef(function(e,t){var r,n=e.src,i=e.hlsConfig,s=e.autoPlay,a=e.title,o=e.loop,l=e.muted,c=e.poster,u=e.objectFit,d=e.fullscreen,p=e.playbackError,h=e.onPlaybackError,f=e.priority,y=e.allowCrossOriginCredentials,v=(0,eW.u)(sC),b=v.setLive,w=v.onCanPlay,_=v.onDurationChange,x=v._element,S=g.useCallback((r=iT(ix().mark(function e(t){return ix().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null==h||h(null),b(t);case 2:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)}),[h,b]);return g.useEffect(function(){if(x&&n){var e=i_(null==n?void 0:n.src,x,{onLive:S,onDuration:_,onCanPlay:w,onError:function(e){var t,r,n,i,s,a=Error(null!==(t=null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(n=r.data)||void 0===n?void 0:null===(i=n.toString)||void 0===i?void 0:i.call(n))&&void 0!==t?t:(null==e?void 0:null===(s=e.response)||void 0===s?void 0:s.code)===401?es.Hn:"Error with HLS.js");null==h||h(a)}},(0,m._)({autoplay:s,xhrSetup:function(e,t){e.withCredentials=Boolean(y)}},i)).destroy;return function(){null==e||e()}}},[s,i,_,w,x,n,S,h,y]),null!=p&&p.type?(0,eo.jsx)(eo.Fragment,{}):(0,eo.jsx)("video",{className:ex.Il.media.video({size:d?"fullscreen":u}),loop:o,"aria-label":null!=a?a:"Video player",role:"video",width:"100%",height:"100%",ref:t,"webkit-playsinline":"true",playsInline:!0,autoPlay:s,muted:l,poster:"string"==typeof c?c:void 0,preload:f?"auto":"metadata",crossOrigin:y?"use-credentials":"anonymous"})}),sR=function(e){return{canPlay:e.canPlay}},sP=g.forwardRef(function(e,t){var r,n,i=e.autoPlay,s=e.title,a=e.loop,o=e.muted,l=e.poster,c=e.objectFit,u=e.priority,d=e.onPlaybackError,p=e.src,h=e.fullscreen,f=(0,eW.u)(sR).canPlay,m=g.useCallback((r=iT(ix().mark(function e(t){var r,n,i,s,a;return ix().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(s=null!==(r=null==(i=null==(n=t.target)?void 0:n.parentElement)?void 0:i.currentSrc)&&void 0!==r?r:null==n?void 0:n.currentSrc)){e.next=22;break}return e.prev=4,e.next=7,fetch(s);case 7:if(404!==(a=e.sent).status){e.next=13;break}return console.warn("Video not found"),e.abrupt("return",null==d?void 0:d(Error(es.fu)));case 13:if(401!==a.status){e.next=16;break}return console.warn("Unauthorized to view video"),e.abrupt("return",null==d?void 0:d(Error(es.Hn)));case 16:e.next=22;break;case 18:return e.prev=18,e.t0=e.catch(4),console.warn(e.t0),e.abrupt("return",null==d?void 0:d(Error("Error fetching video URL")));case 22:return console.warn("Unknown error loading video"),e.abrupt("return",null==d?void 0:d(Error("Unknown error loading video")));case 24:case"end":return e.stop()}},e,null,[[4,18]])})),function(e){return r.apply(this,arguments)}),[d]);return g.useEffect(function(){f&&(null==d||d(null))},[f,d]),(0,eo.jsx)("video",{className:ex.Il.media.video({size:h?"fullscreen":c}),loop:a,"aria-label":null!=s?s:"Video player",role:"video",autoPlay:i,width:"100%",height:"100%",ref:t,"webkit-playsinline":"true",playsInline:!0,muted:o,poster:"string"==typeof l?l:void 0,onError:m,preload:u?"auto":"metadata",src:null!==(n=null==p?void 0:p.src)&&void 0!==n?n:void 0,children:"Your browser doesn't support the HTML5 <code>video</code> tag, or the video format."})});sP.displayName="HtmlVideoPlayer";var sD=function(e){return{metadata:e.metadata,_element:e._element,setLive:e.setLive}},sA=g.forwardRef(function(e,t){var r=e.src,n=e.autoPlay,i=e.title,s=e.loop,a=e.muted,o=e.poster,l=e.objectFit,c=e.fullscreen,u=e.onPlaybackError,d=e.priority,p=e.webrtcConfig,h=(0,eW.u)(sD),f=h.metadata,m=h._element,y=h.setLive,v=g.useCallback(iT(ix().mark(function e(){return ix().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null==u||u(null),y(!0);case 2:case"end":return e.stop()}},e)})),[u,y]);return g.useEffect(function(){null!=f&&f.bframes&&u(Error("Metadata indicates that WebRTC playback contains bframes."))},[f,u]),g.useEffect(function(){if(m&&r.src){var e=eF(null==r?void 0:r.src,m,{onConnected:v,onError:function(e){var t,r,n,i=Error(null!==(t=null==e?void 0:null===(r=e.message)||void 0===r?void 0:null===(n=r.toString)||void 0===n?void 0:n.call(r))&&void 0!==t?t:"Error with WebRTC");null==u||u(i)}},p).destroy;return function(){null==e||e()}}},[p,m,v,r,u]),(0,eo.jsx)("video",{className:ex.Il.media.video({size:c?"fullscreen":l}),loop:s,"aria-label":null!=i?i:"Video player",role:"video",width:"100%",height:"100%",ref:t,"webkit-playsinline":"true",playsInline:!0,autoPlay:n,muted:a,poster:"string"==typeof o?o:void 0,preload:d?"auto":"metadata"})}),sN=function(e){return{fullscreen:e.fullscreen}},sL=g.forwardRef(function(e,t){var r=(0,eW.u)(sN).fullscreen,n=e.src,i=e.onPlaybackError,s=e.playbackError,a=e.lowLatency,o=e.onPlaybackStatusUpdate,l=e.playbackStatusSelector,c=iC(g.useMemo(function(){return[!(0,ek.i)()||iv.Z.isSupported(),eR()]},[]),2),u=c[0],d=c[1],p=g.useMemo(function(){var e;return null==n?void 0:null===(e=n.filter(function(e){return!!a||"webrtc"!==e.type}))||void 0===e?void 0:e.map(function(e){return"hls"!==e.type||u?e:(0,m._)((0,m._)({},e),{},{type:"video",mime:"application/vnd.apple.mpegurl"})})},[n,u,a]),h=iC(g.useState(0),2),f=h[0],y=h[1],v=g.useCallback(function(){y(function(e){return e+1})},[y]),b=g.useMemo(function(){var e,t;return e=1e3*Math.pow(2,f),t=null,{debouncedFn:function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];null===t&&(t=setTimeout(function(){t=null,v.apply(void 0,n)},e))},cancel:function(){t&&(clearTimeout(t),t=null)}}},[v,f]),w=b.debouncedFn,_=b.cancel,x=g.useRef(w),S=g.useRef(_);g.useEffect(function(){x.current=w,S.current=_},[w,_]);var T=g.useMemo(function(){var e,t;return null!==(e=null==p?void 0:p[f%(null!==(t=null==p?void 0:p.length)&&void 0!==t?t:0)])&&void 0!==e?e:null},[p,f]);g.useEffect(function(){if((null==s?void 0:s.type)==="offline"&&(null==T?void 0:T.type)!=="hls"){var e;null==x||null===(e=x.current)||void 0===e||e.call(x)}},[s,T]),g.useEffect(function(){var e,t;(null==s?void 0:s.type)==="unknown"?null==x||null===(e=x.current)||void 0===e||e.call(x):null===s&&(null==S||null===(t=S.current)||void 0===t||t.call(S))},[s]),g.useEffect(function(){var e;((null==T?void 0:T.type)!=="webrtc"||d)&&((null==T?void 0:T.type)!=="hls"||u)&&((null==T?void 0:T.type)!=="video"||(0,iy.wf)(T))||null==x||null===(e=x.current)||void 0===e||e.call(x)},[u,d,T]);var E=g.useContext(eW.b),C=g.useCallback(function(e){return l?l(e):e},[l]);return g.useEffect(function(){return E.subscribe(C,function(e,t){return null==o?void 0:o((0,ea.s)(e),(0,ea.s)(t))})},[o,C,E]),g.useEffect(function(){if(T){var e,t,r;null==E||null===(e=E.getState)||void 0===e||null===(t=e.call(E))||void 0===t||null===(r=t._updateSource)||void 0===r||r.call(t,null==T?void 0:T.src)}},[E,T]),g.useEffect(function(){return(0,ig.z2)(E,function(e){null==i||i(e),console.error("Not able to report player metrics",e)}).destroy},[i,E]),(null==T?void 0:T.type)==="webrtc"?(0,eo.jsx)(sA,(0,m._)((0,m._)({},e),{},{ref:t,src:T,fullscreen:r})):(null==T?void 0:T.type)==="hls"?(0,eo.jsx)(sk,(0,m._)((0,m._)({},e),{},{ref:t,src:T,fullscreen:r})):(0,eo.jsx)(sP,(0,m._)((0,m._)({},e),{},{ref:t,src:T,fullscreen:r}))}),sO=g.memo(sL),sI=function(e){var t=iC(g.useState(!1),2),r=t[0],n=t[1];return g.useEffect(function(){if("undefined"!=typeof window&&e){if("IntersectionObserver"in window){var t=new IntersectionObserver(function(e){var t=iC(e,1)[0];return n(Boolean(null==t?void 0:t.isIntersecting))});return t.observe(e),function(){t.disconnect()}}n(!0)}},[e]),r},sM=(0,g.memo)(function(e){var t,r=iC(g.useState(!1),2),n=r[0],i=r[1],s=g.useMemo(function(){var e,t,r,n;return"undefined"!=typeof window&&null!==(e=(null===(t=window)||void 0===t?void 0:null===(r=t.screen)||void 0===r?void 0:r.availWidth)||(null===(n=window)||void 0===n?void 0:n.innerWidth))&&void 0!==e?e:null},[]),a=g.useMemo(function(){var t;return null!==(t=e._isCurrentlyShown)&&void 0!==t?t:n},[e._isCurrentlyShown,n]),o=e_((0,m._)((0,m._)({},e),{},{_isCurrentlyShown:a}),{_screenWidth:s}),l=o.mediaElement,c=o.playerProps,u=o.mediaControllerProps,d=o.controlsContainerProps,p=o.source,h=o.props,f=h.children,y=h.controls,v=h.theme,b=h.title,w=h.poster,_=h.showTitle,x=h.aspectRatio,S=h.renderChildrenOutsideContainer,T=sI(l);return g.useEffect(function(){i(T)},[T]),(0,eo.jsxs)(eW.M,{element:l,opts:y,mediaProps:u,children:[(0,eo.jsxs)(i5,{theme:v,aspectRatio:x,tabIndex:e.tabIndex,children:[p&&(null==p?void 0:null===(t=p[0])||void 0===t?void 0:t.type)==="audio"?(0,eo.jsx)(sh,(0,m._)((0,m._)({},c),{},{src:p,allowCrossOriginCredentials:e.allowCrossOriginCredentials})):(0,eo.jsx)(sO,(0,m._)((0,m._)({},c),{},{hlsConfig:e.hlsConfig,webrtcConfig:e.webrtcConfig,lowLatency:e.lowLatency,playbackStatusSelector:e.playbackStatusSelector,allowCrossOriginCredentials:e.allowCrossOriginCredentials,src:p})),!S&&g.isValidElement(f)?g.cloneElement(f,d):(0,eo.jsx)(se,(0,m._)((0,m._)({},d),{},{poster:w&&(0,eo.jsx)(sb,{content:w,title:b}),top:(0,eo.jsx)(eo.Fragment,{children:b&&_&&(0,eo.jsx)(sd,{content:b})}),middle:(0,eo.jsx)(s_,{}),left:(0,eo.jsxs)(eo.Fragment,{children:[(0,eo.jsx)(sy,{}),(0,eo.jsx)(sE,{}),(0,eo.jsx)(su,{})]}),right:(0,eo.jsxs)(eo.Fragment,{children:[e.showPipButton&&(0,eo.jsx)(sl,{}),(0,eo.jsx)(si,{})]})}))]}),S&&g.isValidElement(f)?f:(0,eo.jsx)(eo.Fragment,{})]})})},32044:function(e){function t(e){let t=new globalThis.AbortController;function r(){for(let n of(t.abort(),e))n&&n.removeEventListener&&n.removeEventListener("abort",r)}for(let n of e)if(n&&n.addEventListener){if(n.aborted){r();break}n.addEventListener("abort",r)}return t.signal}e.exports=t,e.exports.anySignal=t},47329:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;let i=n(r(11227)),s="awaitqueue";t.Logger=class{constructor(e){e?(this._debug=(0,i.default)(`${s}:${e}`),this._warn=(0,i.default)(`${s}:WARN:${e}`),this._error=(0,i.default)(`${s}:ERROR:${e}`)):(this._debug=(0,i.default)(s),this._warn=(0,i.default)(`${s}:WARN`),this._error=(0,i.default)(`${s}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},32186:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AwaitQueue=t.AwaitQueueRemovedTaskError=t.AwaitQueueStoppedError=void 0;let n=r(47329),i=new n.Logger;class s extends Error{constructor(e){super(null!=e?e:"AwaitQueue stopped"),this.name="AwaitQueueStoppedError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,s)}}t.AwaitQueueStoppedError=s;class a extends Error{constructor(e){super(null!=e?e:"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,a)}}t.AwaitQueueRemovedTaskError=a,t.AwaitQueue=class{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(e,t){if(t=null!=t?t:e.name,i.debug(`push() [name:${t}]`),"function"!=typeof e)throw TypeError("given task is not a function");if(t)try{Object.defineProperty(e,"name",{value:t})}catch(r){}return new Promise((r,n)=>{let s={id:this.nextTaskId++,task:e,name:t,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:e=>{if(s.completed)return;s.completed=!0,this.pendingTasks.delete(s.id),i.debug(`resolving task [name:${s.name}]`),r(e);let[t]=this.pendingTasks.values();t&&!t.executedAt&&this.execute(t)},reject:e=>{if(!s.completed&&(s.completed=!0,this.pendingTasks.delete(s.id),i.debug(`rejecting task [name:${s.name}]: %s`,String(e)),n(e),!this.stopping)){let[t]=this.pendingTasks.values();t&&!t.executedAt&&this.execute(t)}}};this.pendingTasks.set(s.id,s),1===this.pendingTasks.size&&this.execute(s)})}stop(){for(let e of(i.debug("stop()"),this.stopping=!0,this.pendingTasks.values()))i.debug(`stop() | stopping task [name:${e.name}]`),e.reject(new s);this.stopping=!1}remove(e){i.debug(`remove() [taskIdx:${e}]`);let t=Array.from(this.pendingTasks.values())[e];if(!t){i.debug(`stop() | no task with given idx [taskIdx:${e}]`);return}t.reject(new a)}dump(){let e=Date.now(),t=0;return Array.from(this.pendingTasks.values()).map(r=>({idx:t++,task:r.task,name:r.name,enqueuedTime:r.executedAt?r.executedAt-r.enqueuedAt:e-r.enqueuedAt,executionTime:r.executedAt?e-r.executedAt:0}))}async execute(e){if(i.debug(`execute() [name:${e.name}]`),e.executedAt)throw Error("task already being executed");e.executedAt=Date.now();try{let t=await e.task();e.resolve(t)}catch(r){e.reject(r)}}}},31530:function(e,t,r){"use strict";var n=r(28710).charAt;e.exports=function(e,t,r){return t+(r?n(e,t).length:1)}},48457:function(e,t,r){"use strict";var n=r(49974),i=r(46916),s=r(47908),a=r(53411),o=r(97659),l=r(4411),c=r(26244),u=r(86135),d=r(18554),p=r(71246),h=Array;e.exports=function(e){var t,r,f,m,g,y,v=s(e),b=l(this),w=arguments.length,_=w>1?arguments[1]:void 0,x=void 0!==_;x&&(_=n(_,w>2?arguments[2]:void 0));var S=p(v),T=0;if(S&&!(this===h&&o(S)))for(g=(m=d(v,S)).next,r=b?new this:[];!(f=i(g,m)).done;T++)y=x?a(m,_,[f.value,T],!0):f.value,u(r,T,y);else for(t=c(v),r=b?new this(t):h(t);t>T;T++)y=x?_(v[T],T):v[T],u(r,T,y);return r.length=T,r}},42092:function(e,t,r){var n=r(49974),i=r(1702),s=r(68361),a=r(47908),o=r(26244),l=r(65417),c=i([].push),u=function(e){var t=1==e,r=2==e,i=3==e,u=4==e,d=6==e,p=7==e,h=5==e||d;return function(f,m,g,y){for(var v,b,w=a(f),_=s(w),x=n(m,g),S=o(_),T=0,E=y||l,C=t?E(f,S):r||p?E(f,0):void 0;S>T;T++)if((h||T in _)&&(b=x(v=_[T],T,w),e)){if(t)C[T]=b;else if(b)switch(e){case 3:return!0;case 5:return v;case 6:return T;case 2:c(C,v)}else switch(e){case 4:return!1;case 7:c(C,v)}}return d?-1:i||u?u:C}};e.exports={forEach:u(0),map:u(1),filter:u(2),some:u(3),every:u(4),find:u(5),findIndex:u(6),filterReject:u(7)}},81194:function(e,t,r){var n=r(47293),i=r(5112),s=r(7392),a=i("species");e.exports=function(e){return s>=51||!n(function(){var t=[];return(t.constructor={})[a]=function(){return{foo:1}},1!==t[e](Boolean).foo})}},41589:function(e,t,r){var n=r(51400),i=r(26244),s=r(86135),a=Array,o=Math.max;e.exports=function(e,t,r){for(var l=i(e),c=n(t,l),u=n(void 0===r?l:r,l),d=a(o(u-c,0)),p=0;c<u;c++,p++)s(d,p,e[c]);return d.length=p,d}},94362:function(e,t,r){var n=r(41589),i=Math.floor,s=function(e,t){var r=e.length,l=i(r/2);return r<8?a(e,t):o(e,s(n(e,0,l),t),s(n(e,l),t),t)},a=function(e,t){for(var r,n,i=e.length,s=1;s<i;){for(n=s,r=e[s];n&&t(e[n-1],r)>0;)e[n]=e[--n];n!==s++&&(e[n]=r)}return e},o=function(e,t,r,n){for(var i=t.length,s=r.length,a=0,o=0;a<i||o<s;)e[a+o]=a<i&&o<s?0>=n(t[a],r[o])?t[a++]:r[o++]:a<i?t[a++]:r[o++];return e};e.exports=s},77475:function(e,t,r){var n=r(43157),i=r(4411),s=r(70111),a=r(5112)("species"),o=Array;e.exports=function(e){var t;return n(e)&&(i(t=e.constructor)&&(t===o||n(t.prototype))?t=void 0:s(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?o:t}},65417:function(e,t,r){var n=r(77475);e.exports=function(e,t){return new(n(e))(0===t?0:t)}},53411:function(e,t,r){var n=r(19670),i=r(99212);e.exports=function(e,t,r,s){try{return s?t(n(r)[0],r[1]):t(r)}catch(a){i(e,"throw",a)}}},49920:function(e,t,r){var n=r(47293);e.exports=!n(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},76178:function(e){e.exports=function(e,t){return{value:e,done:t}}},86135:function(e,t,r){"use strict";var n=r(34948),i=r(3070),s=r(79114);e.exports=function(e,t,r){var a=n(t);a in e?i.f(e,a,s(0,r)):e[a]=r}},89190:function(e,t,r){var n=r(98052);e.exports=function(e,t,r){for(var i in t)n(e,i,t[i],r);return e}},7207:function(e){var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},48324:function(e){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},98509:function(e,t,r){var n=r(80317)("span").classList,i=n&&n.constructor&&n.constructor.prototype;e.exports=i===Object.prototype?void 0:i},27007:function(e,t,r){"use strict";r(74916);var n=r(21470),i=r(98052),s=r(22261),a=r(47293),o=r(5112),l=r(68880),c=o("species"),u=RegExp.prototype;e.exports=function(e,t,r,d){var p=o(e),h=!a(function(){var t={};return t[p]=function(){return 7},7!=""[e](t)}),f=h&&!a(function(){var t=!1,r=/a/;return"split"===e&&((r={}).constructor={},r.constructor[c]=function(){return r},r.flags="",r[p]=/./[p]),r.exec=function(){return t=!0,null},r[p](""),!t});if(!h||!f||r){var m=n(/./[p]),g=t(p,""[e],function(e,t,r,i,a){var o=n(e),l=t.exec;return l===s||l===u.exec?h&&!a?{done:!0,value:m(t,r,i)}:{done:!0,value:o(r,t,i)}:{done:!1}});i(String.prototype,e,g[0]),i(u,p,g[1])}d&&l(u[p],"sham",!0)}},10647:function(e,t,r){var n=r(1702),i=r(47908),s=Math.floor,a=n("".charAt),o=n("".replace),l=n("".slice),c=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,u=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,r,n,d,p){var h=r+e.length,f=n.length,m=u;return void 0!==d&&(d=i(d),m=c),o(p,m,function(i,o){var c;switch(a(o,0)){case"$":return"$";case"&":return e;case"`":return l(t,0,r);case"'":return l(t,h);case"<":c=d[l(o,1,-1)];break;default:var u=+o;if(0===u)return i;if(u>f){var p=s(u/10);if(0===p)return i;if(p<=f)return void 0===n[p-1]?a(o,1):n[p-1]+a(o,1);return i}c=n[u-1]}return void 0===c?"":c})}},43157:function(e,t,r){var n=r(84326);e.exports=Array.isArray||function(e){return"Array"==n(e)}},63061:function(e,t,r){"use strict";var n=r(13383).IteratorPrototype,i=r(70030),s=r(79114),a=r(58003),o=r(97497),l=function(){return this};e.exports=function(e,t,r,c){var u=t+" Iterator";return e.prototype=i(n,{next:s(+!c,r)}),a(e,u,!1,!0),o[u]=l,e}},51656:function(e,t,r){"use strict";var n=r(82109),i=r(46916),s=r(31913),a=r(76530),o=r(60614),l=r(63061),c=r(79518),u=r(27674),d=r(58003),p=r(68880),h=r(98052),f=r(5112),m=r(97497),g=r(13383),y=a.PROPER,v=a.CONFIGURABLE,b=g.IteratorPrototype,w=g.BUGGY_SAFARI_ITERATORS,_=f("iterator"),x="keys",S="values",T="entries",E=function(){return this};e.exports=function(e,t,r,a,f,g,C){l(r,t,a);var k,R,P,D=function(e){if(e===f&&I)return I;if(!w&&e in L)return L[e];switch(e){case x:case S:case T:return function(){return new r(this,e)}}return function(){return new r(this)}},A=t+" Iterator",N=!1,L=e.prototype,O=L[_]||L["@@iterator"]||f&&L[f],I=!w&&O||D(f),M="Array"==t&&L.entries||O;if(M&&(k=c(M.call(new e)))!==Object.prototype&&k.next&&(s||c(k)===b||(u?u(k,b):o(k[_])||h(k,_,E)),d(k,A,!0,!0),s&&(m[A]=E)),y&&f==S&&O&&O.name!==S&&(!s&&v?p(L,"name",S):(N=!0,I=function(){return i(O,this)})),f){if(R={values:D(S),keys:g?I:D(x),entries:D(T)},C)for(P in R)!w&&!N&&P in L||h(L,P,R[P]);else n({target:t,proto:!0,forced:w||N},R)}return(!s||C)&&L[_]!==I&&h(L,_,I,{name:f}),m[t]=I,R}},13383:function(e,t,r){"use strict";var n,i,s,a=r(47293),o=r(60614),l=r(70111),c=r(70030),u=r(79518),d=r(98052),p=r(5112),h=r(31913),f=p("iterator"),m=!1;[].keys&&("next"in(s=[].keys())?(i=u(u(s)))!==Object.prototype&&(n=i):m=!0),!l(n)||a(function(){var e={};return n[f].call(e)!==e})?n={}:h&&(n=c(n)),o(n[f])||d(n,f,function(){return this}),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:m}},79518:function(e,t,r){var n=r(92597),i=r(60614),s=r(47908),a=r(6200),o=r(49920),l=a("IE_PROTO"),c=Object,u=c.prototype;e.exports=o?c.getPrototypeOf:function(e){var t=s(e);if(n(t,l))return t[l];var r=t.constructor;return i(r)&&t instanceof r?r.prototype:t instanceof c?u:null}},97651:function(e,t,r){var n=r(46916),i=r(19670),s=r(60614),a=r(84326),o=r(22261),l=TypeError;e.exports=function(e,t){var r=e.exec;if(s(r)){var c=n(r,e,t);return null!==c&&i(c),c}if("RegExp"===a(e))return n(o,e,t);throw l("RegExp#exec called on incompatible receiver")}},34706:function(e,t,r){var n=r(46916),i=r(92597),s=r(47976),a=r(67066),o=RegExp.prototype;e.exports=function(e){var t=e.flags;return!(void 0===t&&!("flags"in o)&&!i(e,"flags")&&s(o,e))?t:n(a,e)}},28710:function(e,t,r){var n=r(1702),i=r(19303),s=r(41340),a=r(84488),o=n("".charAt),l=n("".charCodeAt),c=n("".slice),u=function(e){return function(t,r){var n,u,d=s(a(t)),p=i(r),h=d.length;return p<0||p>=h?e?"":void 0:(n=l(d,p))<55296||n>56319||p+1===h||(u=l(d,p+1))<56320||u>57343?e?o(d,p):n:e?c(d,p,p+2):(n-55296<<10)+(u-56320)+65536}};e.exports={codeAt:u(!1),charAt:u(!0)}},33197:function(e,t,r){var n=r(1702),i=/[^\0-\u007E]/,s=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",o=RangeError,l=n(s.exec),c=Math.floor,u=String.fromCharCode,d=n("".charCodeAt),p=n([].join),h=n([].push),f=n("".replace),m=n("".split),g=n("".toLowerCase),y=function(e){for(var t=[],r=0,n=e.length;r<n;){var i=d(e,r++);if(i>=55296&&i<=56319&&r<n){var s=d(e,r++);(64512&s)==56320?h(t,((1023&i)<<10)+(1023&s)+65536):(h(t,i),r--)}else h(t,i)}return t},v=function(e){return e+22+75*(e<26)},b=function(e,t,r){var n=0;for(e=r?c(e/700):e>>1,e+=c(e/t);e>455;)e=c(e/35),n+=36;return c(n+36*e/(e+38))},w=function(e){var t,r,n=[],i=(e=y(e)).length,s=128,l=0,d=72;for(t=0;t<e.length;t++)(r=e[t])<128&&h(n,u(r));var f=n.length,m=f;for(f&&h(n,"-");m<i;){var g=2147483647;for(t=0;t<e.length;t++)(r=e[t])>=s&&r<g&&(g=r);var w=m+1;if(g-s>c((2147483647-l)/w))throw o(a);for(l+=(g-s)*w,s=g,t=0;t<e.length;t++){if((r=e[t])<s&&++l>2147483647)throw o(a);if(r==s){for(var _=l,x=36;;){var S=x<=d?1:x>=d+26?26:x-d;if(_<S)break;var T=_-S,E=36-S;h(n,u(v(S+T%E))),_=c(T/E),x+=36}h(n,u(v(_))),d=b(l,w,m==f),l=0,m++}}l++,s++}return p(n,"")};e.exports=function(e){var t,r,n=[],a=m(f(g(e),s,"."),".");for(t=0;t<a.length;t++)h(n,l(i,r=a[t])?"xn--"+w(r):r);return p(n,".")}},85143:function(e,t,r){var n=r(47293),i=r(5112),s=r(19781),a=r(31913),o=i("iterator");e.exports=!n(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2"),n="";return e.pathname="c%20d",t.forEach(function(e,r){t.delete("b"),n+=r+e}),r.delete("a",2),a&&(!e.toJSON||!r.has("a",1)||r.has("a",2))||!t.size&&(a||!s)||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[o]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://").host||"#%D0%B1"!==new URL("http://a#").hash||"a1c3"!==n||"x"!==new URL("http://x",void 0).host})},92222:function(e,t,r){"use strict";var n=r(82109),i=r(47293),s=r(43157),a=r(70111),o=r(47908),l=r(26244),c=r(7207),u=r(86135),d=r(65417),p=r(81194),h=r(5112),f=r(7392),m=h("isConcatSpreadable"),g=f>=51||!i(function(){var e=[];return e[m]=!1,e.concat()[0]!==e}),y=function(e){if(!a(e))return!1;var t=e[m];return void 0!==t?!!t:s(e)};n({target:"Array",proto:!0,arity:1,forced:!g||!p("concat")},{concat:function(e){var t,r,n,i,s,a=o(this),p=d(a,0),h=0;for(t=-1,n=arguments.length;t<n;t++)if(s=-1===t?a:arguments[t],y(s))for(c(h+(i=l(s))),r=0;r<i;r++,h++)r in s&&u(p,h,s[r]);else c(h+1),u(p,h++,s);return p.length=h,p}})},4480:function(e,t,r){"use strict";var n=r(82109),i=r(42092).filter;n({target:"Array",proto:!0,forced:!r(81194)("filter")},{filter:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},66992:function(e,t,r){"use strict";var n=r(45656),i=r(51223),s=r(97497),a=r(29909),o=r(3070).f,l=r(51656),c=r(76178),u=r(31913),d=r(19781),p="Array Iterator",h=a.set,f=a.getterFor(p);e.exports=l(Array,"Array",function(e,t){h(this,{type:p,target:n(e),index:0,kind:t})},function(){var e=f(this),t=e.target,r=e.kind,n=e.index++;return!t||n>=t.length?(e.target=void 0,c(void 0,!0)):"keys"==r?c(n,!1):"values"==r?c(t[n],!1):c([n,t[n]],!1)},"values");var m=s.Arguments=s.Array;if(i("keys"),i("values"),i("entries"),!u&&d&&"values"!==m.name)try{o(m,"name",{value:"values"})}catch(g){}},21249:function(e,t,r){"use strict";var n=r(82109),i=r(42092).map;n({target:"Array",proto:!0,forced:!r(81194)("map")},{map:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}})},47042:function(e,t,r){"use strict";var n=r(82109),i=r(43157),s=r(4411),a=r(70111),o=r(51400),l=r(26244),c=r(45656),u=r(86135),d=r(5112),p=r(81194),h=r(50206),f=p("slice"),m=d("species"),g=Array,y=Math.max;n({target:"Array",proto:!0,forced:!f},{slice:function(e,t){var r,n,d,p=c(this),f=l(p),v=o(e,f),b=o(void 0===t?f:t,f);if(i(p)&&(s(r=p.constructor)&&(r===g||i(r.prototype))?r=void 0:a(r)&&null===(r=r[m])&&(r=void 0),r===g||void 0===r))return h(p,v,b);for(d=0,n=new(void 0===r?g:r)(y(b-v,0));v<b;v++,d++)v in p&&u(n,d,p[v]);return n.length=d,n}})},39714:function(e,t,r){"use strict";var n=r(76530).PROPER,i=r(98052),s=r(19670),a=r(41340),o=r(47293),l=r(34706),c="toString",u=RegExp.prototype[c],d=o(function(){return"/a/b"!=u.call({source:"a",flags:"b"})}),p=n&&u.name!=c;(d||p)&&i(RegExp.prototype,c,function(){var e=s(this);return"/"+a(e.source)+"/"+a(l(e))},{unsafe:!0})},78783:function(e,t,r){"use strict";var n=r(28710).charAt,i=r(41340),s=r(29909),a=r(51656),o=r(76178),l="String Iterator",c=s.set,u=s.getterFor(l);a(String,"String",function(e){c(this,{type:l,string:i(e),index:0})},function(){var e,t=u(this),r=t.string,i=t.index;return i>=r.length?o(void 0,!0):(e=n(r,i),t.index+=e.length,o(e,!1))})},15306:function(e,t,r){"use strict";var n=r(22104),i=r(46916),s=r(1702),a=r(27007),o=r(47293),l=r(19670),c=r(60614),u=r(68554),d=r(19303),p=r(17466),h=r(41340),f=r(84488),m=r(31530),g=r(58173),y=r(10647),v=r(97651),b=r(5112)("replace"),w=Math.max,_=Math.min,x=s([].concat),S=s([].push),T=s("".indexOf),E=s("".slice),C="$0"==="a".replace(/./,"$0"),k=!!/./[b]&&""===/./[b]("a","$0");a("replace",function(e,t,r){var s=k?"$":"$0";return[function(e,r){var n=f(this),s=u(e)?void 0:g(e,b);return s?i(s,e,n,r):i(t,h(n),e,r)},function(e,i){var a=l(this),o=h(e);if("string"==typeof i&&-1===T(i,s)&&-1===T(i,"$<")){var u=r(t,a,o,i);if(u.done)return u.value}var f=c(i);f||(i=h(i));var g=a.global;if(g){var b=a.unicode;a.lastIndex=0}for(var C=[];;){var k=v(a,o);if(null===k||(S(C,k),!g))break;""===h(k[0])&&(a.lastIndex=m(o,p(a.lastIndex),b))}for(var R="",P=0,D=0;D<C.length;D++){for(var A,N=h((k=C[D])[0]),L=w(_(d(k.index),o.length),0),O=[],I=1;I<k.length;I++)S(O,void 0===(A=k[I])?A:String(A));var M=k.groups;if(f){var j=x([N],O,L,o);void 0!==M&&S(j,M);var F=h(n(i,void 0,j))}else F=y(N,o,L,O,M,i);L>=P&&(R+=E(o,P,L)+F,P=L+N.length)}return R+E(o,P)}]},!!o(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})||!C||k)},23157:function(e,t,r){"use strict";var n,i=r(82109),s=r(21470),a=r(31236).f,o=r(17466),l=r(41340),c=r(3929),u=r(84488),d=r(84964),p=r(31913),h=s("".startsWith),f=s("".slice),m=Math.min,g=d("startsWith");i({target:"String",proto:!0,forced:!(!p&&!g&&(n=a(String.prototype,"startsWith"))&&!n.writable)&&!g},{startsWith:function(e){var t=l(u(this));c(e);var r=o(m(arguments.length>1?arguments[1]:void 0,t.length)),n=l(e);return h?h(t,n,r):f(t,r,r+n.length)===n}})},33948:function(e,t,r){var n=r(17854),i=r(48324),s=r(98509),a=r(66992),o=r(68880),l=r(5112),c=l("iterator"),u=l("toStringTag"),d=a.values,p=function(e,t){if(e){if(e[c]!==d)try{o(e,c,d)}catch(r){e[c]=d}if(e[u]||o(e,u,t),i[t]){for(var n in a)if(e[n]!==a[n])try{o(e,n,a[n])}catch(s){e[n]=a[n]}}}};for(var h in i)p(n[h]&&n[h].prototype,h);p(s,"DOMTokenList")},65556:function(e,t,r){"use strict";r(66992);var n=r(82109),i=r(17854),s=r(46916),a=r(1702),o=r(19781),l=r(85143),c=r(98052),u=r(47045),d=r(89190),p=r(58003),h=r(63061),f=r(29909),m=r(25787),g=r(60614),y=r(92597),v=r(49974),b=r(70648),w=r(19670),_=r(70111),x=r(41340),S=r(70030),T=r(79114),E=r(18554),C=r(71246),k=r(48053),R=r(5112),P=r(94362),D=R("iterator"),A="URLSearchParams",N=A+"Iterator",L=f.set,O=f.getterFor(A),I=f.getterFor(N),M=Object.getOwnPropertyDescriptor,j=function(e){if(!o)return i[e];var t=M(i,e);return t&&t.value},F=j("fetch"),$=j("Request"),B=j("Headers"),U=$&&$.prototype,q=B&&B.prototype,z=i.RegExp,V=i.TypeError,H=i.decodeURIComponent,W=i.encodeURIComponent,Z=a("".charAt),K=a([].join),G=a([].push),Y=a("".replace),J=a([].shift),Q=a([].splice),X=a("".split),ee=a("".slice),et=/\+/g,er=[,,,,],en=function(e){try{return H(e)}catch(t){return e}},ei=function(e){var t,r=Y(e,et," "),n=4;try{return H(r)}catch(i){for(;n;)r=Y(r,er[(t=n--)-1]||(er[t-1]=z("((?:%[\\da-f]{2}){"+t+"})","gi")),en);return r}},es=/[!'()~]|%20/g,ea={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},eo=function(e){return ea[e]},el=function(e){return Y(W(e),es,eo)},ec=h(function(e,t){L(this,{type:N,iterator:E(O(e).entries),kind:t})},"Iterator",function(){var e=I(this),t=e.kind,r=e.iterator.next(),n=r.value;return r.done||(r.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),r},!0),eu=function(e){this.entries=[],this.url=null,void 0!==e&&(_(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===Z(e,0)?ee(e,1):e:x(e)))};eu.prototype={type:A,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,r,n,i,a,o,l,c=C(e);if(c)for(r=(t=E(e,c)).next;!(n=s(r,t)).done;){if((o=s(a=(i=E(w(n.value))).next,i)).done||(l=s(a,i)).done||!s(a,i).done)throw V("Expected sequence with length 2");G(this.entries,{key:x(o.value),value:x(l.value)})}else for(var u in e)y(e,u)&&G(this.entries,{key:u,value:x(e[u])})},parseQuery:function(e){if(e)for(var t,r,n=X(e,"&"),i=0;i<n.length;)(t=n[i++]).length&&(r=X(t,"="),G(this.entries,{key:ei(J(r)),value:ei(K(r,"="))}))},serialize:function(){for(var e,t=this.entries,r=[],n=0;n<t.length;)G(r,el((e=t[n++]).key)+"="+el(e.value));return K(r,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ed=function(){m(this,ep);var e=arguments.length>0?arguments[0]:void 0,t=L(this,new eu(e));o||(this.size=t.entries.length)},ep=ed.prototype;if(d(ep,{append:function(e,t){var r=O(this);k(arguments.length,2),G(r.entries,{key:x(e),value:x(t)}),!o&&this.length++,r.updateURL()},delete:function(e){for(var t=O(this),r=k(arguments.length,1),n=t.entries,i=x(e),s=r<2?void 0:arguments[1],a=void 0===s?s:x(s),l=0;l<n.length;){var c=n[l];if(c.key===i&&(void 0===a||c.value===a)){if(Q(n,l,1),void 0!==a)break}else l++}o||(this.size=n.length),t.updateURL()},get:function(e){var t=O(this).entries;k(arguments.length,1);for(var r=x(e),n=0;n<t.length;n++)if(t[n].key===r)return t[n].value;return null},getAll:function(e){var t=O(this).entries;k(arguments.length,1);for(var r=x(e),n=[],i=0;i<t.length;i++)t[i].key===r&&G(n,t[i].value);return n},has:function(e){for(var t=O(this).entries,r=k(arguments.length,1),n=x(e),i=r<2?void 0:arguments[1],s=void 0===i?i:x(i),a=0;a<t.length;){var o=t[a++];if(o.key===n&&(void 0===s||o.value===s))return!0}return!1},set:function(e,t){var r,n=O(this);k(arguments.length,1);for(var i=n.entries,s=!1,a=x(e),l=x(t),c=0;c<i.length;c++)(r=i[c]).key===a&&(s?Q(i,c--,1):(s=!0,r.value=l));s||G(i,{key:a,value:l}),o||(this.size=i.length),n.updateURL()},sort:function(){var e=O(this);P(e.entries,function(e,t){return e.key>t.key?1:-1}),e.updateURL()},forEach:function(e){for(var t,r=O(this).entries,n=v(e,arguments.length>1?arguments[1]:void 0),i=0;i<r.length;)n((t=r[i++]).value,t.key,this)},keys:function(){return new ec(this,"keys")},values:function(){return new ec(this,"values")},entries:function(){return new ec(this,"entries")}},{enumerable:!0}),c(ep,D,ep.entries,{name:"entries"}),c(ep,"toString",function(){return O(this).serialize()},{enumerable:!0}),o&&u(ep,"size",{get:function(){return O(this).entries.length},configurable:!0,enumerable:!0}),p(ed,A),n({global:!0,constructor:!0,forced:!l},{URLSearchParams:ed}),!l&&g(B)){var eh=a(q.has),ef=a(q.set),em=function(e){if(_(e)){var t,r=e.body;if(b(r)===A)return eh(t=e.headers?new B(e.headers):new B,"content-type")||ef(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),S(e,{body:T(0,x(r)),headers:T(0,t)})}return e};if(g(F)&&n({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return F(e,arguments.length>1?em(arguments[1]):{})}}),g($)){var eg=function(e){return m(this,U),new $(e,arguments.length>1?em(arguments[1]):{})};U.constructor=eg,eg.prototype=U,n({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:eg})}}e.exports={URLSearchParams:ed,getState:O}},41637:function(e,t,r){r(65556)},68789:function(e,t,r){"use strict";r(78783);var n,i=r(82109),s=r(19781),a=r(85143),o=r(17854),l=r(49974),c=r(1702),u=r(98052),d=r(47045),p=r(25787),h=r(92597),f=r(21574),m=r(48457),g=r(41589),y=r(28710).codeAt,v=r(33197),b=r(41340),w=r(58003),_=r(48053),x=r(65556),S=r(29909),T=S.set,E=S.getterFor("URL"),C=x.URLSearchParams,k=x.getState,R=o.URL,P=o.TypeError,D=o.parseInt,A=Math.floor,N=Math.pow,L=c("".charAt),O=c(/./.exec),I=c([].join),M=c(1..toString),j=c([].pop),F=c([].push),$=c("".replace),B=c([].shift),U=c("".split),q=c("".slice),z=c("".toLowerCase),V=c([].unshift),H="Invalid scheme",W="Invalid host",Z="Invalid port",K=/[a-z]/i,G=/[\d+-.a-z]/i,Y=/\d/,J=/^0x/i,Q=/^[0-7]+$/,X=/^\d+$/,ee=/^[\da-f]+$/i,et=/[\0\t\n\r #%/:<>?@[\\\]^|]/,er=/[\0\t\n\r #/:<>?@[\\\]^|]/,en=/^[\u0000-\u0020]+/,ei=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,es=/[\t\n\r]/g,ea=function(e){var t,r,n,i,s,a,o,l=U(e,".");if(l.length&&""==l[l.length-1]&&l.length--,(t=l.length)>4)return e;for(n=0,r=[];n<t;n++){if(""==(i=l[n]))return e;if(s=10,i.length>1&&"0"==L(i,0)&&(s=O(J,i)?16:8,i=q(i,8==s?1:2)),""===i)a=0;else{if(!O(10==s?X:8==s?Q:ee,i))return e;a=D(i,s)}F(r,a)}for(n=0;n<t;n++)if(a=r[n],n==t-1){if(a>=N(256,5-t))return null}else if(a>255)return null;for(n=0,o=j(r);n<r.length;n++)o+=r[n]*N(256,3-n);return o},eo=function(e){var t,r,n,i,s,a,o,l=[0,0,0,0,0,0,0,0],c=0,u=null,d=0,p=function(){return L(e,d)};if(":"==p()){if(":"!=L(e,1))return;d+=2,u=++c}for(;p();){if(8==c)return;if(":"==p()){if(null!==u)return;d++,u=++c;continue}for(t=r=0;r<4&&O(ee,p());)t=16*t+D(p(),16),d++,r++;if("."==p()){if(0==r||(d-=r,c>6))return;for(n=0;p();){if(i=null,n>0){if("."!=p()||!(n<4))return;d++}if(!O(Y,p()))return;for(;O(Y,p());){if(s=D(p(),10),null===i)i=s;else{if(0==i)return;i=10*i+s}if(i>255)return;d++}l[c]=256*l[c]+i,(2==++n||4==n)&&c++}if(4!=n)return;break}if(":"==p()){if(d++,!p())return}else if(p())return;l[c++]=t}if(null!==u)for(a=c-u,c=7;0!=c&&a>0;)o=l[c],l[c--]=l[u+a-1],l[u+--a]=o;else if(8!=c)return;return l},el=function(e){for(var t=null,r=1,n=null,i=0,s=0;s<8;s++)0!==e[s]?(i>r&&(t=n,r=i),n=null,i=0):(null===n&&(n=s),++i);return i>r&&(t=n,r=i),t},ec=function(e){var t,r,n,i;if("number"==typeof e){for(r=0,t=[];r<4;r++)V(t,e%256),e=A(e/256);return I(t,".")}if("object"==typeof e){for(r=0,t="",n=el(e);r<8;r++)(!i||0!==e[r])&&(i&&(i=!1),n===r?(t+=r?":":"::",i=!0):(t+=M(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},eu={},ed=f({},eu,{" ":1,'"':1,"<":1,">":1,"`":1}),ep=f({},ed,{"#":1,"?":1,"{":1,"}":1}),eh=f({},ep,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ef=function(e,t){var r=y(e,0);return r>32&&r<127&&!h(t,e)?e:encodeURIComponent(e)},em={ftp:21,file:null,http:80,https:443,ws:80,wss:443},eg=function(e,t){var r;return 2==e.length&&O(K,L(e,0))&&(":"==(r=L(e,1))||!t&&"|"==r)},ey=function(e){var t;return e.length>1&&eg(q(e,0,2))&&(2==e.length||"/"===(t=L(e,2))||"\\"===t||"?"===t||"#"===t)},ev={},eb={},ew={},e_={},ex={},eS={},eT={},eE={},eC={},ek={},eR={},eP={},eD={},eA={},eN={},eL={},eO={},eI={},eM={},ej={},eF={},e$=function(e,t,r){var n,i,s,a=b(e);if(t){if(i=this.parse(a))throw P(i);this.searchParams=null}else{if(void 0!==r&&(n=new e$(r,!0)),i=this.parse(a,null,n))throw P(i);(s=k(new C)).bindURL(this),this.searchParams=s}};e$.prototype={type:"URL",parse:function(e,t,r){var i,s,a,o,l=this,c=t||ev,u=0,d="",p=!1,f=!1,y=!1;for(e=b(e),t||(l.scheme="",l.username="",l.password="",l.host=null,l.port=null,l.path=[],l.query=null,l.fragment=null,l.cannotBeABaseURL=!1,e=$(e,en,""),e=$(e,ei,"$1")),i=m(e=$(e,es,""));u<=i.length;){switch(s=i[u],c){case ev:if(s&&O(K,s))d+=z(s),c=eb;else{if(t)return H;c=ew;continue}break;case eb:if(s&&(O(G,s)||"+"==s||"-"==s||"."==s))d+=z(s);else if(":"==s){if(t&&(l.isSpecial()!=h(em,d)||"file"==d&&(l.includesCredentials()||null!==l.port)||"file"==l.scheme&&!l.host))return;if(l.scheme=d,t){l.isSpecial()&&em[l.scheme]==l.port&&(l.port=null);return}d="","file"==l.scheme?c=eA:l.isSpecial()&&r&&r.scheme==l.scheme?c=e_:l.isSpecial()?c=eE:"/"==i[u+1]?(c=ex,u++):(l.cannotBeABaseURL=!0,F(l.path,""),c=eM)}else{if(t)return H;d="",c=ew,u=0;continue}break;case ew:if(!r||r.cannotBeABaseURL&&"#"!=s)return H;if(r.cannotBeABaseURL&&"#"==s){l.scheme=r.scheme,l.path=g(r.path),l.query=r.query,l.fragment="",l.cannotBeABaseURL=!0,c=eF;break}c="file"==r.scheme?eA:eS;continue;case e_:if("/"==s&&"/"==i[u+1])c=eC,u++;else{c=eS;continue}break;case ex:if("/"==s){c=ek;break}c=eI;continue;case eS:if(l.scheme=r.scheme,s==n)l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=g(r.path),l.query=r.query;else if("/"==s||"\\"==s&&l.isSpecial())c=eT;else if("?"==s)l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=g(r.path),l.query="",c=ej;else if("#"==s)l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=g(r.path),l.query=r.query,l.fragment="",c=eF;else{l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,l.path=g(r.path),l.path.length--,c=eI;continue}break;case eT:if(l.isSpecial()&&("/"==s||"\\"==s))c=eC;else if("/"==s)c=ek;else{l.username=r.username,l.password=r.password,l.host=r.host,l.port=r.port,c=eI;continue}break;case eE:if(c=eC,"/"!=s||"/"!=L(d,u+1))continue;u++;break;case eC:if("/"!=s&&"\\"!=s){c=ek;continue}break;case ek:if("@"==s){p&&(d="%40"+d),p=!0,a=m(d);for(var v,w,_=0;_<a.length;_++){var x=a[_];if(":"==x&&!y){y=!0;continue}var S=ef(x,eh);y?l.password+=S:l.username+=S}d=""}else if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&l.isSpecial()){if(p&&""==d)return"Invalid authority";u-=m(d).length+1,d="",c=eR}else d+=s;break;case eR:case eP:if(t&&"file"==l.scheme){c=eL;continue}if(":"!=s||f){if(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&l.isSpecial()){if(l.isSpecial()&&""==d)return W;if(t&&""==d&&(l.includesCredentials()||null!==l.port))return;if(o=l.parseHost(d))return o;if(d="",c=eO,t)return;continue}"["==s?f=!0:"]"==s&&(f=!1),d+=s}else{if(""==d)return W;if(o=l.parseHost(d))return o;if(d="",c=eD,t==eP)return}break;case eD:if(O(Y,s))d+=s;else{if(!(s==n||"/"==s||"?"==s||"#"==s||"\\"==s&&l.isSpecial())&&!t)return Z;if(""!=d){var T=D(d,10);if(T>65535)return Z;l.port=l.isSpecial()&&T===em[l.scheme]?null:T,d=""}if(t)return;c=eO;continue}break;case eA:if(l.scheme="file","/"==s||"\\"==s)c=eN;else if(r&&"file"==r.scheme){if(s==n)l.host=r.host,l.path=g(r.path),l.query=r.query;else if("?"==s)l.host=r.host,l.path=g(r.path),l.query="",c=ej;else if("#"==s)l.host=r.host,l.path=g(r.path),l.query=r.query,l.fragment="",c=eF;else{ey(I(g(i,u),""))||(l.host=r.host,l.path=g(r.path),l.shortenPath()),c=eI;continue}}else{c=eI;continue}break;case eN:if("/"==s||"\\"==s){c=eL;break}r&&"file"==r.scheme&&!ey(I(g(i,u),""))&&(eg(r.path[0],!0)?F(l.path,r.path[0]):l.host=r.host),c=eI;continue;case eL:if(s==n||"/"==s||"\\"==s||"?"==s||"#"==s){if(!t&&eg(d))c=eI;else if(""==d){if(l.host="",t)return;c=eO}else{if(o=l.parseHost(d))return o;if("localhost"==l.host&&(l.host=""),t)return;d="",c=eO}continue}d+=s;break;case eO:if(l.isSpecial()){if(c=eI,"/"!=s&&"\\"!=s)continue}else if(t||"?"!=s){if(t||"#"!=s){if(s!=n&&(c=eI,"/"!=s))continue}else l.fragment="",c=eF}else l.query="",c=ej;break;case eI:if(s==n||"/"==s||"\\"==s&&l.isSpecial()||!t&&("?"==s||"#"==s)){if(".."===(v=z(v=d))||"%2e."===v||".%2e"===v||"%2e%2e"===v?(l.shortenPath(),"/"==s||"\\"==s&&l.isSpecial()||F(l.path,"")):"."===(w=d)||"%2e"===z(w)?"/"==s||"\\"==s&&l.isSpecial()||F(l.path,""):("file"==l.scheme&&!l.path.length&&eg(d)&&(l.host&&(l.host=""),d=L(d,0)+":"),F(l.path,d)),d="","file"==l.scheme&&(s==n||"?"==s||"#"==s))for(;l.path.length>1&&""===l.path[0];)B(l.path);"?"==s?(l.query="",c=ej):"#"==s&&(l.fragment="",c=eF)}else d+=ef(s,ep);break;case eM:"?"==s?(l.query="",c=ej):"#"==s?(l.fragment="",c=eF):s!=n&&(l.path[0]+=ef(s,eu));break;case ej:t||"#"!=s?s!=n&&("'"==s&&l.isSpecial()?l.query+="%27":"#"==s?l.query+="%23":l.query+=ef(s,eu)):(l.fragment="",c=eF);break;case eF:s!=n&&(l.fragment+=ef(s,ed))}u++}},parseHost:function(e){var t,r,n;if("["==L(e,0)){if("]"!=L(e,e.length-1)||!(t=eo(q(e,1,-1))))return W;this.host=t}else if(this.isSpecial()){if(O(et,e=v(e))||null===(t=ea(e)))return W;this.host=t}else{if(O(er,e))return W;for(n=0,t="",r=m(e);n<r.length;n++)t+=ef(r[n],eu);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"==this.scheme},includesCredentials:function(){return""!=this.username||""!=this.password},isSpecial:function(){return h(em,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;t&&("file"!=this.scheme||1!=t||!eg(e[0],!0))&&e.length--},serialize:function(){var e=this.scheme,t=this.username,r=this.password,n=this.host,i=this.port,s=this.path,a=this.query,o=this.fragment,l=e+":";return null!==n?(l+="//",this.includesCredentials()&&(l+=t+(r?":"+r:"")+"@"),l+=ec(n),null!==i&&(l+=":"+i)):"file"==e&&(l+="//"),l+=this.cannotBeABaseURL?s[0]:s.length?"/"+I(s,"/"):"",null!==a&&(l+="?"+a),null!==o&&(l+="#"+o),l},setHref:function(e){var t=this.parse(e);if(t)throw P(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"==e)try{return new eB(e.path[0]).origin}catch(r){return"null"}return"file"!=e&&this.isSpecial()?e+"://"+ec(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(b(e)+":",ev)},getUsername:function(){return this.username},setUsername:function(e){var t=m(b(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=ef(t[r],eh)}},getPassword:function(){return this.password},setPassword:function(e){var t=m(b(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=ef(t[r],eh)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?ec(e):ec(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,eR)},getHostname:function(){var e=this.host;return null===e?"":ec(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,eP)},getPort:function(){var e=this.port;return null===e?"":b(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""==(e=b(e))?this.port=null:this.parse(e,eD))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+I(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,eO))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""==(e=b(e))?this.query=null:("?"==L(e,0)&&(e=q(e,1)),this.query="",this.parse(e,ej)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(""==(e=b(e))){this.fragment=null;return}"#"==L(e,0)&&(e=q(e,1)),this.fragment="",this.parse(e,eF)},update:function(){this.query=this.searchParams.serialize()||null}};var eB=function(e){var t=p(this,eU),r=_(arguments.length,1)>1?arguments[1]:void 0,n=T(t,new e$(e,!1,r));s||(t.href=n.serialize(),t.origin=n.getOrigin(),t.protocol=n.getProtocol(),t.username=n.getUsername(),t.password=n.getPassword(),t.host=n.getHost(),t.hostname=n.getHostname(),t.port=n.getPort(),t.pathname=n.getPathname(),t.search=n.getSearch(),t.searchParams=n.getSearchParams(),t.hash=n.getHash())},eU=eB.prototype,eq=function(e,t){return{get:function(){return E(this)[e]()},set:t&&function(e){return E(this)[t](e)},configurable:!0,enumerable:!0}};if(s&&(d(eU,"href",eq("serialize","setHref")),d(eU,"origin",eq("getOrigin")),d(eU,"protocol",eq("getProtocol","setProtocol")),d(eU,"username",eq("getUsername","setUsername")),d(eU,"password",eq("getPassword","setPassword")),d(eU,"host",eq("getHost","setHost")),d(eU,"hostname",eq("getHostname","setHostname")),d(eU,"port",eq("getPort","setPort")),d(eU,"pathname",eq("getPathname","setPathname")),d(eU,"search",eq("getSearch","setSearch")),d(eU,"searchParams",eq("getSearchParams")),d(eU,"hash",eq("getHash","setHash"))),u(eU,"toJSON",function(){return E(this).serialize()},{enumerable:!0}),u(eU,"toString",function(){return E(this).serialize()},{enumerable:!0}),R){var ez=R.createObjectURL,eV=R.revokeObjectURL;ez&&u(eB,"createObjectURL",l(ez,R)),eV&&u(eB,"revokeObjectURL",l(eV,R))}w(eB,"URL"),i({global:!0,constructor:!0,forced:!a,sham:!s},{URL:eB})},60285:function(e,t,r){r(68789)},59435:function(e){function t(e,t,r,n){return Math.round(e/r)+" "+n+(t>=1.5*r?"s":"")}e.exports=function(e,r){r=r||{};var n,i,s=typeof e;if("string"===s&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*r;case"weeks":case"week":case"w":return 6048e5*r;case"days":case"day":case"d":return 864e5*r;case"hours":case"hour":case"hrs":case"hr":case"h":return 36e5*r;case"minutes":case"minute":case"mins":case"min":case"m":return 6e4*r;case"seconds":case"second":case"secs":case"sec":case"s":return 1e3*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}(e);if("number"===s&&isFinite(e))return r.long?(n=Math.abs(e))>=864e5?t(e,n,864e5,"day"):n>=36e5?t(e,n,36e5,"hour"):n>=6e4?t(e,n,6e4,"minute"):n>=1e3?t(e,n,1e3,"second"):e+" ms":(i=Math.abs(e))>=864e5?Math.round(e/864e5)+"d":i>=36e5?Math.round(e/36e5)+"h":i>=6e4?Math.round(e/6e4)+"m":i>=1e3?Math.round(e/1e3)+"s":e+"ms";throw Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},11227:function(e,t,r){let n;var i=r(34155);t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;let r="color: "+this.color;t.splice(1,0,r,"color: inherit");let n=0,i=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(i=n))}),t.splice(i,0,r)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch(r){}},t.load=function(){let e;try{e=t.storage.getItem("debug")}catch(r){}return!e&&void 0!==i&&"env"in i&&(e=i.env.DEBUG),e},t.useColors=function(){return"undefined"!=typeof window&&!!window.process&&("renderer"===window.process.type||!!window.process.__nwjs)||!("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},t.storage=function(){try{return localStorage}catch(e){}}(),t.destroy=(n=!1,()=>{n||(n=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=r(82447)(t);let{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},82447:function(e,t,r){e.exports=function(e){function t(e){let r,i,s;let a=null;function o(...e){if(!o.enabled)return;let n=o,i=Number(new Date),s=i-(r||i);n.diff=s,n.prev=r,n.curr=i,r=i,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(r,i)=>{if("%%"===r)return"%";a++;let s=t.formatters[i];if("function"==typeof s){let o=e[a];r=s.call(n,o),e.splice(a,1),a--}return r}),t.formatArgs.call(n,e);let l=n.log||t.log;l.apply(n,e)}return o.namespace=e,o.useColors=t.useColors(),o.color=t.selectColor(e),o.extend=n,o.destroy=t.destroy,Object.defineProperty(o,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==a?a:(i!==t.namespaces&&(i=t.namespaces,s=t.enabled(e)),s),set:e=>{a=e}}),"function"==typeof t.init&&t.init(o),o}function n(e,r){let n=t(this.namespace+(void 0===r?":":r)+e);return n.log=this.log,n}function i(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){let e=[...t.names.map(i),...t.skips.map(i).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let r;t.save(e),t.namespaces=e,t.names=[],t.skips=[];let n=("string"==typeof e?e:"").split(/[\s,]+/),i=n.length;for(r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(RegExp("^"+e.slice(1)+"$")):t.names.push(RegExp("^"+e+"$")))},t.enabled=function(e){let r,n;if("*"===e[e.length-1])return!0;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(59435),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(r=>{t[r]=e[r]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let r=0;for(let n=0;n<e.length;n++)r=(r<<5)-r+e.charCodeAt(n)|0;return t.colors[Math.abs(r)%t.colors.length]},t.enable(t.load()),t}},32114:function(e){"use strict";function t(e,t){for(let r in t)Object.defineProperty(e,r,{value:t[r],enumerable:!0,configurable:!0});return e}e.exports=function(e,r,n){if(!e||"string"==typeof e)throw TypeError("Please pass an Error to err-code");n||(n={}),"object"==typeof r&&(n=r,r=""),r&&(n.code=r);try{return t(e,n)}catch(a){n.message=e.message,n.stack=e.stack;let i=function(){};i.prototype=Object.create(Object.getPrototypeOf(e));let s=t(new i,n);return s}}},57855:function(e,t,r){let n=r(11227)("h264-profile-level-id");n.log=console.info.bind(console),t.ProfileConstrainedBaseline=1,t.ProfileBaseline=2,t.ProfileMain=3,t.ProfileConstrainedHigh=4,t.ProfileHigh=5,t.Level1_b=0,t.Level1=10,t.Level1_1=11,t.Level1_2=12,t.Level1_3=13,t.Level2=20,t.Level2_1=21,t.Level2_2=22,t.Level3=30,t.Level3_1=31,t.Level3_2=32,t.Level4=40,t.Level4_1=41,t.Level4_2=42,t.Level5=50,t.Level5_1=51,t.Level5_2=52;class i{constructor(e,t){this.profile=e,this.level=t}}t.ProfileLevelId=i;let s=new i(1,31);class a{constructor(e){this._mask=~c("x",e),this._maskedValue=c("1",e)}isMatch(e){return this._maskedValue===(e&this._mask)}}class o{constructor(e,t,r){this.profile_idc=e,this.profile_iop=t,this.profile=r}}let l=[new o(66,new a("x1xx0000"),1),new o(77,new a("1xxx0000"),1),new o(88,new a("11xx0000"),1),new o(66,new a("x0xx0000"),2),new o(88,new a("10xx0000"),2),new o(77,new a("0x0x0000"),3),new o(100,new a("00000000"),5),new o(100,new a("00001100"),4)];function c(e,t){return(t[0]===e)<<7|(t[1]===e)<<6|(t[2]===e)<<5|(t[3]===e)<<4|(t[4]===e)<<3|(t[5]===e)<<2|(t[6]===e)<<1|(t[7]===e)<<0}function u(e={}){let t=e["level-asymmetry-allowed"];return 1===t||"1"===t}t.parseProfileLevelId=function(e){let t;if("string"!=typeof e||6!==e.length)return null;let r=parseInt(e,16);if(0===r)return null;let s=255&r,a=r>>8&255,o=r>>16&255;switch(s){case 11:t=(16&a)!=0?0:11;break;case 10:case 12:case 13:case 20:case 21:case 22:case 30:case 31:case 32:case 40:case 41:case 42:case 50:case 51:case 52:t=s;break;default:return n("parseProfileLevelId() | unrecognized level_idc:%s",s),null}for(let c of l)if(o===c.profile_idc&&c.profile_iop.isMatch(a))return new i(c.profile,t);return n("parseProfileLevelId() | unrecognized profile_idc/profile_iop combination"),null},t.profileLevelIdToString=function(e){let t;if(0==e.level)switch(e.profile){case 1:return"42f00b";case 2:return"42100b";case 3:return"4d100b";default:return n("profileLevelIdToString() | Level 1_b not is allowed for profile:%s",e.profile),null}switch(e.profile){case 1:t="42e0";break;case 2:t="4200";break;case 3:t="4d00";break;case 4:t="640c";break;case 5:t="6400";break;default:return n("profileLevelIdToString() | unrecognized profile:%s",e.profile),null}let r=e.level.toString(16);return 1===r.length&&(r=`0${r}`),`${t}${r}`},t.parseSdpProfileLevelId=function(e={}){let r=e["profile-level-id"];return r?t.parseProfileLevelId(r):s},t.isSameProfile=function(e={},r={}){let n=t.parseSdpProfileLevelId(e),i=t.parseSdpProfileLevelId(r);return Boolean(n&&i&&n.profile===i.profile)},t.generateProfileLevelIdForAnswer=function(e={},r={}){var s,a;if(!e["profile-level-id"]&&!r["profile-level-id"])return n("generateProfileLevelIdForAnswer() | no profile-level-id in local and remote params"),null;let o=t.parseSdpProfileLevelId(e),l=t.parseSdpProfileLevelId(r);if(!o)throw TypeError("invalid local_profile_level_id");if(!l)throw TypeError("invalid remote_profile_level_id");if(o.profile!==l.profile)throw TypeError("H264 Profile mismatch");let c=u(e)&&u(r),d=o.level,p=l.level,h=(s=d,a=p,(0===s?10!==a&&0!==a:0===a?10!==s:s<a)?s:a),f=c?d:h;return n("generateProfileLevelIdForAnswer() | result: [profile:%s, level:%s]",o.profile,f),t.profileLevelIdToString(new i(o.profile,f))}},69111:function(e,t,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var i=r(57206),s=r(92642),a=r(59726),o=n(n({},i.namedReferences),{all:i.namedReferences.html5}),l={specialChars:/[<>'"&]/g,nonAscii:/[<>'"&\u0080-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,nonAsciiPrintable:/[<>'"&\x01-\x08\x11-\x15\x17-\x1F\x7f-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,nonAsciiPrintableOnly:/[\x01-\x08\x11-\x15\x17-\x1F\x7f-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g,extensive:/[\x01-\x0c\x0e-\x1f\x21-\x2c\x2e-\x2f\x3a-\x40\x5b-\x60\x7b-\x7d\x7f-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/g},c={mode:"specialChars",level:"all",numeric:"decimal"};t.encode=function(e,t){var r=void 0===t?c:t,n=r.mode,i=void 0===n?"specialChars":n,s=r.numeric,u=void 0===s?"decimal":s,d=r.level,p=void 0===d?"all":d;if(!e)return"";var h=l[i],f=o[p].characters,m="hexadecimal"===u;h.lastIndex=0;var r=h.exec(e);if(r){n="";var s=0;do{s!==r.index&&(n+=e.substring(s,r.index));var d=r[0],g=f[d];if(!g){var y=d.length>1?a.getCodePoint(d,0):d.charCodeAt(0);g=(m?"&#x"+y.toString(16):"&#"+y)+";"}n+=g,s=r.index+d.length}while(r=h.exec(e));s!==e.length&&(n+=e.substring(s))}else n=e;return n};var u={scope:"body",level:"all"},d=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);/g,p=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+)[;=]?/g,h={xml:{strict:d,attribute:p,body:i.bodyRegExps.xml},html4:{strict:d,attribute:p,body:i.bodyRegExps.html4},html5:{strict:d,attribute:p,body:i.bodyRegExps.html5}},f=n(n({},h),{all:h.html5}),m=String.fromCharCode,g=m(65533),y={level:"all"};t.decodeEntity=function(e,t){var r=(void 0===t?y:t).level,n=void 0===r?"all":r;if(!e)return"";var r=e;e[e.length-1];var i=o[n].entities[e];if(i)r=i;else if("&"===e[0]&&"#"===e[1]){var l=e[2],c="x"==l||"X"==l?parseInt(e.substr(3),16):parseInt(e.substr(2));r=c>=1114111?g:c>65535?a.fromCodePoint(c):m(s.numericUnicodeMap[c]||c)}return r},t.decode=function(e,t){var r,n=void 0===t?u:t,i=n.level,l=void 0===i?"all":i,c=n.scope,d=void 0===c?"xml"===l?"strict":"body":c;if(!e)return"";var p=f[l][d],h=o[l].entities,y="attribute"===d,v="strict"===d;p.lastIndex=0;var b=p.exec(e);if(b){r="";var w=0;do{w!==b.index&&(r+=e.substring(w,b.index));var _=b[0],x=_,S=_[_.length-1];if(y&&"="===S)x=_;else if(v&&";"!==S)x=_;else{var T=h[_];if(T)x=T;else if("&"===_[0]&&"#"===_[1]){var E=_[2],C="x"==E||"X"==E?parseInt(_.substr(3),16):parseInt(_.substr(2));x=C>=1114111?g:C>65535?a.fromCodePoint(C):m(s.numericUnicodeMap[C]||C)}}r+=x,w=b.index+_.length}while(b=p.exec(e));w!==e.length&&(r+=e.substring(w))}else r=e;return r}},57206:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bodyRegExps={xml:/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html4:/&notin;|&(?:nbsp|iexcl|cent|pound|curren|yen|brvbar|sect|uml|copy|ordf|laquo|not|shy|reg|macr|deg|plusmn|sup2|sup3|acute|micro|para|middot|cedil|sup1|ordm|raquo|frac14|frac12|frac34|iquest|Agrave|Aacute|Acirc|Atilde|Auml|Aring|AElig|Ccedil|Egrave|Eacute|Ecirc|Euml|Igrave|Iacute|Icirc|Iuml|ETH|Ntilde|Ograve|Oacute|Ocirc|Otilde|Ouml|times|Oslash|Ugrave|Uacute|Ucirc|Uuml|Yacute|THORN|szlig|agrave|aacute|acirc|atilde|auml|aring|aelig|ccedil|egrave|eacute|ecirc|euml|igrave|iacute|icirc|iuml|eth|ntilde|ograve|oacute|ocirc|otilde|ouml|divide|oslash|ugrave|uacute|ucirc|uuml|yacute|thorn|yuml|quot|amp|lt|gt|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html5:/&centerdot;|&copysr;|&divideontimes;|&gtcc;|&gtcir;|&gtdot;|&gtlPar;|&gtquest;|&gtrapprox;|&gtrarr;|&gtrdot;|&gtreqless;|&gtreqqless;|&gtrless;|&gtrsim;|&ltcc;|&ltcir;|&ltdot;|&lthree;|&ltimes;|&ltlarr;|&ltquest;|&ltrPar;|&ltri;|&ltrie;|&ltrif;|&notin;|&notinE;|&notindot;|&notinva;|&notinvb;|&notinvc;|&notni;|&notniva;|&notnivb;|&notnivc;|&parallel;|&timesb;|&timesbar;|&timesd;|&(?:AElig|AMP|Aacute|Acirc|Agrave|Aring|Atilde|Auml|COPY|Ccedil|ETH|Eacute|Ecirc|Egrave|Euml|GT|Iacute|Icirc|Igrave|Iuml|LT|Ntilde|Oacute|Ocirc|Ograve|Oslash|Otilde|Ouml|QUOT|REG|THORN|Uacute|Ucirc|Ugrave|Uuml|Yacute|aacute|acirc|acute|aelig|agrave|amp|aring|atilde|auml|brvbar|ccedil|cedil|cent|copy|curren|deg|divide|eacute|ecirc|egrave|eth|euml|frac12|frac14|frac34|gt|iacute|icirc|iexcl|igrave|iquest|iuml|laquo|lt|macr|micro|middot|nbsp|not|ntilde|oacute|ocirc|ograve|ordf|ordm|oslash|otilde|ouml|para|plusmn|pound|quot|raquo|reg|sect|shy|sup1|sup2|sup3|szlig|thorn|times|uacute|ucirc|ugrave|uml|uuml|yacute|yen|yuml|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g},t.namedReferences={xml:{entities:{"&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&amp;":"&"},characters:{"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;","&":"&amp;"}},html4:{entities:{"&apos;":"'","&nbsp":"\xa0","&nbsp;":"\xa0","&iexcl":"\xa1","&iexcl;":"\xa1","&cent":"\xa2","&cent;":"\xa2","&pound":"\xa3","&pound;":"\xa3","&curren":"\xa4","&curren;":"\xa4","&yen":"\xa5","&yen;":"\xa5","&brvbar":"\xa6","&brvbar;":"\xa6","&sect":"\xa7","&sect;":"\xa7","&uml":"\xa8","&uml;":"\xa8","&copy":"\xa9","&copy;":"\xa9","&ordf":"\xaa","&ordf;":"\xaa","&laquo":"\xab","&laquo;":"\xab","&not":"\xac","&not;":"\xac","&shy":"\xad","&shy;":"\xad","&reg":"\xae","&reg;":"\xae","&macr":"\xaf","&macr;":"\xaf","&deg":"\xb0","&deg;":"\xb0","&plusmn":"\xb1","&plusmn;":"\xb1","&sup2":"\xb2","&sup2;":"\xb2","&sup3":"\xb3","&sup3;":"\xb3","&acute":"\xb4","&acute;":"\xb4","&micro":"\xb5","&micro;":"\xb5","&para":"\xb6","&para;":"\xb6","&middot":"\xb7","&middot;":"\xb7","&cedil":"\xb8","&cedil;":"\xb8","&sup1":"\xb9","&sup1;":"\xb9","&ordm":"\xba","&ordm;":"\xba","&raquo":"\xbb","&raquo;":"\xbb","&frac14":"\xbc","&frac14;":"\xbc","&frac12":"\xbd","&frac12;":"\xbd","&frac34":"\xbe","&frac34;":"\xbe","&iquest":"\xbf","&iquest;":"\xbf","&Agrave":"\xc0","&Agrave;":"\xc0","&Aacute":"\xc1","&Aacute;":"\xc1","&Acirc":"\xc2","&Acirc;":"\xc2","&Atilde":"\xc3","&Atilde;":"\xc3","&Auml":"\xc4","&Auml;":"\xc4","&Aring":"\xc5","&Aring;":"\xc5","&AElig":"\xc6","&AElig;":"\xc6","&Ccedil":"\xc7","&Ccedil;":"\xc7","&Egrave":"\xc8","&Egrave;":"\xc8","&Eacute":"\xc9","&Eacute;":"\xc9","&Ecirc":"\xca","&Ecirc;":"\xca","&Euml":"\xcb","&Euml;":"\xcb","&Igrave":"\xcc","&Igrave;":"\xcc","&Iacute":"\xcd","&Iacute;":"\xcd","&Icirc":"\xce","&Icirc;":"\xce","&Iuml":"\xcf","&Iuml;":"\xcf","&ETH":"\xd0","&ETH;":"\xd0","&Ntilde":"\xd1","&Ntilde;":"\xd1","&Ograve":"\xd2","&Ograve;":"\xd2","&Oacute":"\xd3","&Oacute;":"\xd3","&Ocirc":"\xd4","&Ocirc;":"\xd4","&Otilde":"\xd5","&Otilde;":"\xd5","&Ouml":"\xd6","&Ouml;":"\xd6","&times":"\xd7","&times;":"\xd7","&Oslash":"\xd8","&Oslash;":"\xd8","&Ugrave":"\xd9","&Ugrave;":"\xd9","&Uacute":"\xda","&Uacute;":"\xda","&Ucirc":"\xdb","&Ucirc;":"\xdb","&Uuml":"\xdc","&Uuml;":"\xdc","&Yacute":"\xdd","&Yacute;":"\xdd","&THORN":"\xde","&THORN;":"\xde","&szlig":"\xdf","&szlig;":"\xdf","&agrave":"\xe0","&agrave;":"\xe0","&aacute":"\xe1","&aacute;":"\xe1","&acirc":"\xe2","&acirc;":"\xe2","&atilde":"\xe3","&atilde;":"\xe3","&auml":"\xe4","&auml;":"\xe4","&aring":"\xe5","&aring;":"\xe5","&aelig":"\xe6","&aelig;":"\xe6","&ccedil":"\xe7","&ccedil;":"\xe7","&egrave":"\xe8","&egrave;":"\xe8","&eacute":"\xe9","&eacute;":"\xe9","&ecirc":"\xea","&ecirc;":"\xea","&euml":"\xeb","&euml;":"\xeb","&igrave":"\xec","&igrave;":"\xec","&iacute":"\xed","&iacute;":"\xed","&icirc":"\xee","&icirc;":"\xee","&iuml":"\xef","&iuml;":"\xef","&eth":"\xf0","&eth;":"\xf0","&ntilde":"\xf1","&ntilde;":"\xf1","&ograve":"\xf2","&ograve;":"\xf2","&oacute":"\xf3","&oacute;":"\xf3","&ocirc":"\xf4","&ocirc;":"\xf4","&otilde":"\xf5","&otilde;":"\xf5","&ouml":"\xf6","&ouml;":"\xf6","&divide":"\xf7","&divide;":"\xf7","&oslash":"\xf8","&oslash;":"\xf8","&ugrave":"\xf9","&ugrave;":"\xf9","&uacute":"\xfa","&uacute;":"\xfa","&ucirc":"\xfb","&ucirc;":"\xfb","&uuml":"\xfc","&uuml;":"\xfc","&yacute":"\xfd","&yacute;":"\xfd","&thorn":"\xfe","&thorn;":"\xfe","&yuml":"\xff","&yuml;":"\xff","&quot":'"',"&quot;":'"',"&amp":"&","&amp;":"&","&lt":"<","&lt;":"<","&gt":">","&gt;":">","&OElig;":"","&oelig;":"","&Scaron;":"","&scaron;":"","&Yuml;":"","&circ;":"","&tilde;":"","&ensp;":"","&emsp;":"","&thinsp;":"","&zwnj;":"","&zwj;":"","&lrm;":"","&rlm;":"","&ndash;":"","&mdash;":"","&lsquo;":"","&rsquo;":"","&sbquo;":"","&ldquo;":"","&rdquo;":"","&bdquo;":"","&dagger;":"","&Dagger;":"","&permil;":"","&lsaquo;":"","&rsaquo;":"","&euro;":"","&fnof;":"","&Alpha;":"","&Beta;":"","&Gamma;":"","&Delta;":"","&Epsilon;":"","&Zeta;":"","&Eta;":"","&Theta;":"","&Iota;":"","&Kappa;":"","&Lambda;":"","&Mu;":"","&Nu;":"","&Xi;":"","&Omicron;":"","&Pi;":"","&Rho;":"","&Sigma;":"","&Tau;":"","&Upsilon;":"","&Phi;":"","&Chi;":"","&Psi;":"","&Omega;":"","&alpha;":"","&beta;":"","&gamma;":"","&delta;":"","&epsilon;":"","&zeta;":"","&eta;":"","&theta;":"","&iota;":"","&kappa;":"","&lambda;":"","&mu;":"","&nu;":"","&xi;":"","&omicron;":"","&pi;":"","&rho;":"","&sigmaf;":"","&sigma;":"","&tau;":"","&upsilon;":"","&phi;":"","&chi;":"","&psi;":"","&omega;":"","&thetasym;":"","&upsih;":"","&piv;":"","&bull;":"","&hellip;":"","&prime;":"","&Prime;":"","&oline;":"","&frasl;":"","&weierp;":"","&image;":"","&real;":"","&trade;":"","&alefsym;":"","&larr;":"","&uarr;":"","&rarr;":"","&darr;":"","&harr;":"","&crarr;":"","&lArr;":"","&uArr;":"","&rArr;":"","&dArr;":"","&hArr;":"","&forall;":"","&part;":"","&exist;":"","&empty;":"","&nabla;":"","&isin;":"","&notin;":"","&ni;":"","&prod;":"","&sum;":"","&minus;":"","&lowast;":"","&radic;":"","&prop;":"","&infin;":"","&ang;":"","&and;":"","&or;":"","&cap;":"","&cup;":"","&int;":"","&there4;":"","&sim;":"","&cong;":"","&asymp;":"","&ne;":"","&equiv;":"","&le;":"","&ge;":"","&sub;":"","&sup;":"","&nsub;":"","&sube;":"","&supe;":"","&oplus;":"","&otimes;":"","&perp;":"","&sdot;":"","&lceil;":"","&rceil;":"","&lfloor;":"","&rfloor;":"","&lang;":"","&rang;":"","&loz;":"","&spades;":"","&clubs;":"","&hearts;":"","&diams;":""},characters:{"'":"&apos;","\xa0":"&nbsp;","\xa1":"&iexcl;","\xa2":"&cent;","\xa3":"&pound;","\xa4":"&curren;","\xa5":"&yen;","\xa6":"&brvbar;","\xa7":"&sect;","\xa8":"&uml;","\xa9":"&copy;",:"&ordf;","\xab":"&laquo;","\xac":"&not;","\xad":"&shy;","\xae":"&reg;","\xaf":"&macr;","\xb0":"&deg;","\xb1":"&plusmn;","\xb2":"&sup2;","\xb3":"&sup3;","\xb4":"&acute;",:"&micro;","\xb6":"&para;","\xb7":"&middot;","\xb8":"&cedil;","\xb9":"&sup1;",:"&ordm;","\xbb":"&raquo;","\xbc":"&frac14;","\xbd":"&frac12;","\xbe":"&frac34;","\xbf":"&iquest;",:"&Agrave;",:"&Aacute;",:"&Acirc;",:"&Atilde;",:"&Auml;",:"&Aring;",:"&AElig;",:"&Ccedil;",:"&Egrave;",:"&Eacute;",:"&Ecirc;",:"&Euml;",:"&Igrave;",:"&Iacute;",:"&Icirc;",:"&Iuml;",:"&ETH;",:"&Ntilde;",:"&Ograve;",:"&Oacute;",:"&Ocirc;",:"&Otilde;",:"&Ouml;","\xd7":"&times;",:"&Oslash;",:"&Ugrave;",:"&Uacute;",:"&Ucirc;",:"&Uuml;",:"&Yacute;",:"&THORN;",:"&szlig;",:"&agrave;",:"&aacute;",:"&acirc;",:"&atilde;",:"&auml;",:"&aring;",:"&aelig;",:"&ccedil;",:"&egrave;",:"&eacute;",:"&ecirc;",:"&euml;",:"&igrave;",:"&iacute;",:"&icirc;",:"&iuml;",:"&eth;",:"&ntilde;",:"&ograve;",:"&oacute;",:"&ocirc;",:"&otilde;",:"&ouml;","\xf7":"&divide;",:"&oslash;",:"&ugrave;",:"&uacute;",:"&ucirc;",:"&uuml;",:"&yacute;",:"&thorn;",:"&yuml;",'"':"&quot;","&":"&amp;","<":"&lt;",">":"&gt;",:"&OElig;",:"&oelig;",:"&Scaron;",:"&scaron;",:"&Yuml;",:"&circ;","":"&tilde;","":"&ensp;","":"&emsp;","":"&thinsp;","":"&zwnj;","":"&zwj;","":"&lrm;","":"&rlm;","":"&ndash;","":"&mdash;","":"&lsquo;","":"&rsquo;","":"&sbquo;","":"&ldquo;","":"&rdquo;","":"&bdquo;","":"&dagger;","":"&Dagger;","":"&permil;","":"&lsaquo;","":"&rsaquo;","":"&euro;",:"&fnof;",:"&Alpha;",:"&Beta;",:"&Gamma;",:"&Delta;",:"&Epsilon;",:"&Zeta;",:"&Eta;",:"&Theta;",:"&Iota;",:"&Kappa;",:"&Lambda;",:"&Mu;",:"&Nu;",:"&Xi;",:"&Omicron;",:"&Pi;",:"&Rho;",:"&Sigma;",:"&Tau;",:"&Upsilon;",:"&Phi;",:"&Chi;",:"&Psi;",:"&Omega;",:"&alpha;",:"&beta;",:"&gamma;",:"&delta;",:"&epsilon;",:"&zeta;",:"&eta;",:"&theta;",:"&iota;",:"&kappa;",:"&lambda;",:"&mu;",:"&nu;",:"&xi;",:"&omicron;",:"&pi;",:"&rho;",:"&sigmaf;",:"&sigma;",:"&tau;",:"&upsilon;",:"&phi;",:"&chi;",:"&psi;",:"&omega;",:"&thetasym;",:"&upsih;",:"&piv;","":"&bull;","":"&hellip;","":"&prime;","":"&Prime;","":"&oline;","":"&frasl;",:"&weierp;",:"&image;",:"&real;","":"&trade;",:"&alefsym;","":"&larr;","":"&uarr;","":"&rarr;","":"&darr;","":"&harr;","":"&crarr;","":"&lArr;","":"&uArr;","":"&rArr;","":"&dArr;","":"&hArr;","":"&forall;","":"&part;","":"&exist;","":"&empty;","":"&nabla;","":"&isin;","":"&notin;","":"&ni;","":"&prod;","":"&sum;","":"&minus;","":"&lowast;","":"&radic;","":"&prop;","":"&infin;","":"&ang;","":"&and;","":"&or;","":"&cap;","":"&cup;","":"&int;","":"&there4;","":"&sim;","":"&cong;","":"&asymp;","":"&ne;","":"&equiv;","":"&le;","":"&ge;","":"&sub;","":"&sup;","":"&nsub;","":"&sube;","":"&supe;","":"&oplus;","":"&otimes;","":"&perp;","":"&sdot;","":"&lceil;","":"&rceil;","":"&lfloor;","":"&rfloor;","":"&lang;","":"&rang;","":"&loz;","":"&spades;","":"&clubs;","":"&hearts;","":"&diams;"}},html5:{entities:{"&AElig":"\xc6","&AElig;":"\xc6","&AMP":"&","&AMP;":"&","&Aacute":"\xc1","&Aacute;":"\xc1","&Abreve;":"","&Acirc":"\xc2","&Acirc;":"\xc2","&Acy;":"","&Afr;":"\uD835\uDD04","&Agrave":"\xc0","&Agrave;":"\xc0","&Alpha;":"","&Amacr;":"","&And;":"","&Aogon;":"","&Aopf;":"\uD835\uDD38","&ApplyFunction;":"","&Aring":"\xc5","&Aring;":"\xc5","&Ascr;":"\uD835\uDC9C","&Assign;":"","&Atilde":"\xc3","&Atilde;":"\xc3","&Auml":"\xc4","&Auml;":"\xc4","&Backslash;":"","&Barv;":"","&Barwed;":"","&Bcy;":"","&Because;":"","&Bernoullis;":"","&Beta;":"","&Bfr;":"\uD835\uDD05","&Bopf;":"\uD835\uDD39","&Breve;":"","&Bscr;":"","&Bumpeq;":"","&CHcy;":"","&COPY":"\xa9","&COPY;":"\xa9","&Cacute;":"","&Cap;":"","&CapitalDifferentialD;":"","&Cayleys;":"","&Ccaron;":"","&Ccedil":"\xc7","&Ccedil;":"\xc7","&Ccirc;":"","&Cconint;":"","&Cdot;":"","&Cedilla;":"\xb8","&CenterDot;":"\xb7","&Cfr;":"","&Chi;":"","&CircleDot;":"","&CircleMinus;":"","&CirclePlus;":"","&CircleTimes;":"","&ClockwiseContourIntegral;":"","&CloseCurlyDoubleQuote;":"","&CloseCurlyQuote;":"","&Colon;":"","&Colone;":"","&Congruent;":"","&Conint;":"","&ContourIntegral;":"","&Copf;":"","&Coproduct;":"","&CounterClockwiseContourIntegral;":"","&Cross;":"","&Cscr;":"\uD835\uDC9E","&Cup;":"","&CupCap;":"","&DD;":"","&DDotrahd;":"","&DJcy;":"","&DScy;":"","&DZcy;":"","&Dagger;":"","&Darr;":"","&Dashv;":"","&Dcaron;":"","&Dcy;":"","&Del;":"","&Delta;":"","&Dfr;":"\uD835\uDD07","&DiacriticalAcute;":"\xb4","&DiacriticalDot;":"","&DiacriticalDoubleAcute;":"","&DiacriticalGrave;":"`","&DiacriticalTilde;":"","&Diamond;":"","&DifferentialD;":"","&Dopf;":"\uD835\uDD3B","&Dot;":"\xa8","&DotDot;":"","&DotEqual;":"","&DoubleContourIntegral;":"","&DoubleDot;":"\xa8","&DoubleDownArrow;":"","&DoubleLeftArrow;":"","&DoubleLeftRightArrow;":"","&DoubleLeftTee;":"","&DoubleLongLeftArrow;":"","&DoubleLongLeftRightArrow;":"","&DoubleLongRightArrow;":"","&DoubleRightArrow;":"","&DoubleRightTee;":"","&DoubleUpArrow;":"","&DoubleUpDownArrow;":"","&DoubleVerticalBar;":"","&DownArrow;":"","&DownArrowBar;":"","&DownArrowUpArrow;":"","&DownBreve;":"","&DownLeftRightVector;":"","&DownLeftTeeVector;":"","&DownLeftVector;":"","&DownLeftVectorBar;":"","&DownRightTeeVector;":"","&DownRightVector;":"","&DownRightVectorBar;":"","&DownTee;":"","&DownTeeArrow;":"","&Downarrow;":"","&Dscr;":"\uD835\uDC9F","&Dstrok;":"","&ENG;":"","&ETH":"\xd0","&ETH;":"\xd0","&Eacute":"\xc9","&Eacute;":"\xc9","&Ecaron;":"","&Ecirc":"\xca","&Ecirc;":"\xca","&Ecy;":"","&Edot;":"","&Efr;":"\uD835\uDD08","&Egrave":"\xc8","&Egrave;":"\xc8","&Element;":"","&Emacr;":"","&EmptySmallSquare;":"","&EmptyVerySmallSquare;":"","&Eogon;":"","&Eopf;":"\uD835\uDD3C","&Epsilon;":"","&Equal;":"","&EqualTilde;":"","&Equilibrium;":"","&Escr;":"","&Esim;":"","&Eta;":"","&Euml":"\xcb","&Euml;":"\xcb","&Exists;":"","&ExponentialE;":"","&Fcy;":"","&Ffr;":"\uD835\uDD09","&FilledSmallSquare;":"","&FilledVerySmallSquare;":"","&Fopf;":"\uD835\uDD3D","&ForAll;":"","&Fouriertrf;":"","&Fscr;":"","&GJcy;":"","&GT":">","&GT;":">","&Gamma;":"","&Gammad;":"","&Gbreve;":"","&Gcedil;":"","&Gcirc;":"","&Gcy;":"","&Gdot;":"","&Gfr;":"\uD835\uDD0A","&Gg;":"","&Gopf;":"\uD835\uDD3E","&GreaterEqual;":"","&GreaterEqualLess;":"","&GreaterFullEqual;":"","&GreaterGreater;":"","&GreaterLess;":"","&GreaterSlantEqual;":"","&GreaterTilde;":"","&Gscr;":"\uD835\uDCA2","&Gt;":"","&HARDcy;":"","&Hacek;":"","&Hat;":"^","&Hcirc;":"","&Hfr;":"","&HilbertSpace;":"","&Hopf;":"","&HorizontalLine;":"","&Hscr;":"","&Hstrok;":"","&HumpDownHump;":"","&HumpEqual;":"","&IEcy;":"","&IJlig;":"","&IOcy;":"","&Iacute":"\xcd","&Iacute;":"\xcd","&Icirc":"\xce","&Icirc;":"\xce","&Icy;":"","&Idot;":"","&Ifr;":"","&Igrave":"\xcc","&Igrave;":"\xcc","&Im;":"","&Imacr;":"","&ImaginaryI;":"","&Implies;":"","&Int;":"","&Integral;":"","&Intersection;":"","&InvisibleComma;":"","&InvisibleTimes;":"","&Iogon;":"","&Iopf;":"\uD835\uDD40","&Iota;":"","&Iscr;":"","&Itilde;":"","&Iukcy;":"","&Iuml":"\xcf","&Iuml;":"\xcf","&Jcirc;":"","&Jcy;":"","&Jfr;":"\uD835\uDD0D","&Jopf;":"\uD835\uDD41","&Jscr;":"\uD835\uDCA5","&Jsercy;":"","&Jukcy;":"","&KHcy;":"","&KJcy;":"","&Kappa;":"","&Kcedil;":"","&Kcy;":"","&Kfr;":"\uD835\uDD0E","&Kopf;":"\uD835\uDD42","&Kscr;":"\uD835\uDCA6","&LJcy;":"","&LT":"<","&LT;":"<","&Lacute;":"","&Lambda;":"","&Lang;":"","&Laplacetrf;":"","&Larr;":"","&Lcaron;":"","&Lcedil;":"","&Lcy;":"","&LeftAngleBracket;":"","&LeftArrow;":"","&LeftArrowBar;":"","&LeftArrowRightArrow;":"","&LeftCeiling;":"","&LeftDoubleBracket;":"","&LeftDownTeeVector;":"","&LeftDownVector;":"","&LeftDownVectorBar;":"","&LeftFloor;":"","&LeftRightArrow;":"","&LeftRightVector;":"","&LeftTee;":"","&LeftTeeArrow;":"","&LeftTeeVector;":"","&LeftTriangle;":"","&LeftTriangleBar;":"","&LeftTriangleEqual;":"","&LeftUpDownVector;":"","&LeftUpTeeVector;":"","&LeftUpVector;":"","&LeftUpVectorBar;":"","&LeftVector;":"","&LeftVectorBar;":"","&Leftarrow;":"","&Leftrightarrow;":"","&LessEqualGreater;":"","&LessFullEqual;":"","&LessGreater;":"","&LessLess;":"","&LessSlantEqual;":"","&LessTilde;":"","&Lfr;":"\uD835\uDD0F","&Ll;":"","&Lleftarrow;":"","&Lmidot;":"","&LongLeftArrow;":"","&LongLeftRightArrow;":"","&LongRightArrow;":"","&Longleftarrow;":"","&Longleftrightarrow;":"","&Longrightarrow;":"","&Lopf;":"\uD835\uDD43","&LowerLeftArrow;":"","&LowerRightArrow;":"","&Lscr;":"","&Lsh;":"","&Lstrok;":"","&Lt;":"","&Map;":"","&Mcy;":"","&MediumSpace;":"","&Mellintrf;":"","&Mfr;":"\uD835\uDD10","&MinusPlus;":"","&Mopf;":"\uD835\uDD44","&Mscr;":"","&Mu;":"","&NJcy;":"","&Nacute;":"","&Ncaron;":"","&Ncedil;":"","&Ncy;":"","&NegativeMediumSpace;":"","&NegativeThickSpace;":"","&NegativeThinSpace;":"","&NegativeVeryThinSpace;":"","&NestedGreaterGreater;":"","&NestedLessLess;":"","&NewLine;":"\n","&Nfr;":"\uD835\uDD11","&NoBreak;":"","&NonBreakingSpace;":"\xa0","&Nopf;":"","&Not;":"","&NotCongruent;":"","&NotCupCap;":"","&NotDoubleVerticalBar;":"","&NotElement;":"","&NotEqual;":"","&NotEqualTilde;":"","&NotExists;":"","&NotGreater;":"","&NotGreaterEqual;":"","&NotGreaterFullEqual;":"","&NotGreaterGreater;":"","&NotGreaterLess;":"","&NotGreaterSlantEqual;":"","&NotGreaterTilde;":"","&NotHumpDownHump;":"","&NotHumpEqual;":"","&NotLeftTriangle;":"","&NotLeftTriangleBar;":"","&NotLeftTriangleEqual;":"","&NotLess;":"","&NotLessEqual;":"","&NotLessGreater;":"","&NotLessLess;":"","&NotLessSlantEqual;":"","&NotLessTilde;":"","&NotNestedGreaterGreater;":"","&NotNestedLessLess;":"","&NotPrecedes;":"","&NotPrecedesEqual;":"","&NotPrecedesSlantEqual;":"","&NotReverseElement;":"","&NotRightTriangle;":"","&NotRightTriangleBar;":"","&NotRightTriangleEqual;":"","&NotSquareSubset;":"","&NotSquareSubsetEqual;":"","&NotSquareSuperset;":"","&NotSquareSupersetEqual;":"","&NotSubset;":"","&NotSubsetEqual;":"","&NotSucceeds;":"","&NotSucceedsEqual;":"","&NotSucceedsSlantEqual;":"","&NotSucceedsTilde;":"","&NotSuperset;":"","&NotSupersetEqual;":"","&NotTilde;":"","&NotTildeEqual;":"","&NotTildeFullEqual;":"","&NotTildeTilde;":"","&NotVerticalBar;":"","&Nscr;":"\uD835\uDCA9","&Ntilde":"\xd1","&Ntilde;":"\xd1","&Nu;":"","&OElig;":"","&Oacute":"\xd3","&Oacute;":"\xd3","&Ocirc":"\xd4","&Ocirc;":"\xd4","&Ocy;":"","&Odblac;":"","&Ofr;":"\uD835\uDD12","&Ograve":"\xd2","&Ograve;":"\xd2","&Omacr;":"","&Omega;":"","&Omicron;":"","&Oopf;":"\uD835\uDD46","&OpenCurlyDoubleQuote;":"","&OpenCurlyQuote;":"","&Or;":"","&Oscr;":"\uD835\uDCAA","&Oslash":"\xd8","&Oslash;":"\xd8","&Otilde":"\xd5","&Otilde;":"\xd5","&Otimes;":"","&Ouml":"\xd6","&Ouml;":"\xd6","&OverBar;":"","&OverBrace;":"","&OverBracket;":"","&OverParenthesis;":"","&PartialD;":"","&Pcy;":"","&Pfr;":"\uD835\uDD13","&Phi;":"","&Pi;":"","&PlusMinus;":"\xb1","&Poincareplane;":"","&Popf;":"","&Pr;":"","&Precedes;":"","&PrecedesEqual;":"","&PrecedesSlantEqual;":"","&PrecedesTilde;":"","&Prime;":"","&Product;":"","&Proportion;":"","&Proportional;":"","&Pscr;":"\uD835\uDCAB","&Psi;":"","&QUOT":'"',"&QUOT;":'"',"&Qfr;":"\uD835\uDD14","&Qopf;":"","&Qscr;":"\uD835\uDCAC","&RBarr;":"","&REG":"\xae","&REG;":"\xae","&Racute;":"","&Rang;":"","&Rarr;":"","&Rarrtl;":"","&Rcaron;":"","&Rcedil;":"","&Rcy;":"","&Re;":"","&ReverseElement;":"","&ReverseEquilibrium;":"","&ReverseUpEquilibrium;":"","&Rfr;":"","&Rho;":"","&RightAngleBracket;":"","&RightArrow;":"","&RightArrowBar;":"","&RightArrowLeftArrow;":"","&RightCeiling;":"","&RightDoubleBracket;":"","&RightDownTeeVector;":"","&RightDownVector;":"","&RightDownVectorBar;":"","&RightFloor;":"","&RightTee;":"","&RightTeeArrow;":"","&RightTeeVector;":"","&RightTriangle;":"","&RightTriangleBar;":"","&RightTriangleEqual;":"","&RightUpDownVector;":"","&RightUpTeeVector;":"","&RightUpVector;":"","&RightUpVectorBar;":"","&RightVector;":"","&RightVectorBar;":"","&Rightarrow;":"","&Ropf;":"","&RoundImplies;":"","&Rrightarrow;":"","&Rscr;":"","&Rsh;":"","&RuleDelayed;":"","&SHCHcy;":"","&SHcy;":"","&SOFTcy;":"","&Sacute;":"","&Sc;":"","&Scaron;":"","&Scedil;":"","&Scirc;":"","&Scy;":"","&Sfr;":"\uD835\uDD16","&ShortDownArrow;":"","&ShortLeftArrow;":"","&ShortRightArrow;":"","&ShortUpArrow;":"","&Sigma;":"","&SmallCircle;":"","&Sopf;":"\uD835\uDD4A","&Sqrt;":"","&Square;":"","&SquareIntersection;":"","&SquareSubset;":"","&SquareSubsetEqual;":"","&SquareSuperset;":"","&SquareSupersetEqual;":"","&SquareUnion;":"","&Sscr;":"\uD835\uDCAE","&Star;":"","&Sub;":"","&Subset;":"","&SubsetEqual;":"","&Succeeds;":"","&SucceedsEqual;":"","&SucceedsSlantEqual;":"","&SucceedsTilde;":"","&SuchThat;":"","&Sum;":"","&Sup;":"","&Superset;":"","&SupersetEqual;":"","&Supset;":"","&THORN":"\xde","&THORN;":"\xde","&TRADE;":"","&TSHcy;":"","&TScy;":"","&Tab;":"	","&Tau;":"","&Tcaron;":"","&Tcedil;":"","&Tcy;":"","&Tfr;":"\uD835\uDD17","&Therefore;":"","&Theta;":"","&ThickSpace;":"","&ThinSpace;":"","&Tilde;":"","&TildeEqual;":"","&TildeFullEqual;":"","&TildeTilde;":"","&Topf;":"\uD835\uDD4B","&TripleDot;":"","&Tscr;":"\uD835\uDCAF","&Tstrok;":"","&Uacute":"\xda","&Uacute;":"\xda","&Uarr;":"","&Uarrocir;":"","&Ubrcy;":"","&Ubreve;":"","&Ucirc":"\xdb","&Ucirc;":"\xdb","&Ucy;":"","&Udblac;":"","&Ufr;":"\uD835\uDD18","&Ugrave":"\xd9","&Ugrave;":"\xd9","&Umacr;":"","&UnderBar;":"_","&UnderBrace;":"","&UnderBracket;":"","&UnderParenthesis;":"","&Union;":"","&UnionPlus;":"","&Uogon;":"","&Uopf;":"\uD835\uDD4C","&UpArrow;":"","&UpArrowBar;":"","&UpArrowDownArrow;":"","&UpDownArrow;":"","&UpEquilibrium;":"","&UpTee;":"","&UpTeeArrow;":"","&Uparrow;":"","&Updownarrow;":"","&UpperLeftArrow;":"","&UpperRightArrow;":"","&Upsi;":"","&Upsilon;":"","&Uring;":"","&Uscr;":"\uD835\uDCB0","&Utilde;":"","&Uuml":"\xdc","&Uuml;":"\xdc","&VDash;":"","&Vbar;":"","&Vcy;":"","&Vdash;":"","&Vdashl;":"","&Vee;":"","&Verbar;":"","&Vert;":"","&VerticalBar;":"","&VerticalLine;":"|","&VerticalSeparator;":"","&VerticalTilde;":"","&VeryThinSpace;":"","&Vfr;":"\uD835\uDD19","&Vopf;":"\uD835\uDD4D","&Vscr;":"\uD835\uDCB1","&Vvdash;":"","&Wcirc;":"","&Wedge;":"","&Wfr;":"\uD835\uDD1A","&Wopf;":"\uD835\uDD4E","&Wscr;":"\uD835\uDCB2","&Xfr;":"\uD835\uDD1B","&Xi;":"","&Xopf;":"\uD835\uDD4F","&Xscr;":"\uD835\uDCB3","&YAcy;":"","&YIcy;":"","&YUcy;":"","&Yacute":"\xdd","&Yacute;":"\xdd","&Ycirc;":"","&Ycy;":"","&Yfr;":"\uD835\uDD1C","&Yopf;":"\uD835\uDD50","&Yscr;":"\uD835\uDCB4","&Yuml;":"","&ZHcy;":"","&Zacute;":"","&Zcaron;":"","&Zcy;":"","&Zdot;":"","&ZeroWidthSpace;":"","&Zeta;":"","&Zfr;":"","&Zopf;":"","&Zscr;":"\uD835\uDCB5","&aacute":"\xe1","&aacute;":"\xe1","&abreve;":"","&ac;":"","&acE;":"","&acd;":"","&acirc":"\xe2","&acirc;":"\xe2","&acute":"\xb4","&acute;":"\xb4","&acy;":"","&aelig":"\xe6","&aelig;":"\xe6","&af;":"","&afr;":"\uD835\uDD1E","&agrave":"\xe0","&agrave;":"\xe0","&alefsym;":"","&aleph;":"","&alpha;":"","&amacr;":"","&amalg;":"","&amp":"&","&amp;":"&","&and;":"","&andand;":"","&andd;":"","&andslope;":"","&andv;":"","&ang;":"","&ange;":"","&angle;":"","&angmsd;":"","&angmsdaa;":"","&angmsdab;":"","&angmsdac;":"","&angmsdad;":"","&angmsdae;":"","&angmsdaf;":"","&angmsdag;":"","&angmsdah;":"","&angrt;":"","&angrtvb;":"","&angrtvbd;":"","&angsph;":"","&angst;":"\xc5","&angzarr;":"","&aogon;":"","&aopf;":"\uD835\uDD52","&ap;":"","&apE;":"","&apacir;":"","&ape;":"","&apid;":"","&apos;":"'","&approx;":"","&approxeq;":"","&aring":"\xe5","&aring;":"\xe5","&ascr;":"\uD835\uDCB6","&ast;":"*","&asymp;":"","&asympeq;":"","&atilde":"\xe3","&atilde;":"\xe3","&auml":"\xe4","&auml;":"\xe4","&awconint;":"","&awint;":"","&bNot;":"","&backcong;":"","&backepsilon;":"","&backprime;":"","&backsim;":"","&backsimeq;":"","&barvee;":"","&barwed;":"","&barwedge;":"","&bbrk;":"","&bbrktbrk;":"","&bcong;":"","&bcy;":"","&bdquo;":"","&becaus;":"","&because;":"","&bemptyv;":"","&bepsi;":"","&bernou;":"","&beta;":"","&beth;":"","&between;":"","&bfr;":"\uD835\uDD1F","&bigcap;":"","&bigcirc;":"","&bigcup;":"","&bigodot;":"","&bigoplus;":"","&bigotimes;":"","&bigsqcup;":"","&bigstar;":"","&bigtriangledown;":"","&bigtriangleup;":"","&biguplus;":"","&bigvee;":"","&bigwedge;":"","&bkarow;":"","&blacklozenge;":"","&blacksquare;":"","&blacktriangle;":"","&blacktriangledown;":"","&blacktriangleleft;":"","&blacktriangleright;":"","&blank;":"","&blk12;":"","&blk14;":"","&blk34;":"","&block;":"","&bne;":"=","&bnequiv;":"","&bnot;":"","&bopf;":"\uD835\uDD53","&bot;":"","&bottom;":"","&bowtie;":"","&boxDL;":"","&boxDR;":"","&boxDl;":"","&boxDr;":"","&boxH;":"","&boxHD;":"","&boxHU;":"","&boxHd;":"","&boxHu;":"","&boxUL;":"","&boxUR;":"","&boxUl;":"","&boxUr;":"","&boxV;":"","&boxVH;":"","&boxVL;":"","&boxVR;":"","&boxVh;":"","&boxVl;":"","&boxVr;":"","&boxbox;":"","&boxdL;":"","&boxdR;":"","&boxdl;":"","&boxdr;":"","&boxh;":"","&boxhD;":"","&boxhU;":"","&boxhd;":"","&boxhu;":"","&boxminus;":"","&boxplus;":"","&boxtimes;":"","&boxuL;":"","&boxuR;":"","&boxul;":"","&boxur;":"","&boxv;":"","&boxvH;":"","&boxvL;":"","&boxvR;":"","&boxvh;":"","&boxvl;":"","&boxvr;":"","&bprime;":"","&breve;":"","&brvbar":"\xa6","&brvbar;":"\xa6","&bscr;":"\uD835\uDCB7","&bsemi;":"","&bsim;":"","&bsime;":"","&bsol;":"\\","&bsolb;":"","&bsolhsub;":"","&bull;":"","&bullet;":"","&bump;":"","&bumpE;":"","&bumpe;":"","&bumpeq;":"","&cacute;":"","&cap;":"","&capand;":"","&capbrcup;":"","&capcap;":"","&capcup;":"","&capdot;":"","&caps;":"","&caret;":"","&caron;":"","&ccaps;":"","&ccaron;":"","&ccedil":"\xe7","&ccedil;":"\xe7","&ccirc;":"","&ccups;":"","&ccupssm;":"","&cdot;":"","&cedil":"\xb8","&cedil;":"\xb8","&cemptyv;":"","&cent":"\xa2","&cent;":"\xa2","&centerdot;":"\xb7","&cfr;":"\uD835\uDD20","&chcy;":"","&check;":"","&checkmark;":"","&chi;":"","&cir;":"","&cirE;":"","&circ;":"","&circeq;":"","&circlearrowleft;":"","&circlearrowright;":"","&circledR;":"\xae","&circledS;":"","&circledast;":"","&circledcirc;":"","&circleddash;":"","&cire;":"","&cirfnint;":"","&cirmid;":"","&cirscir;":"","&clubs;":"","&clubsuit;":"","&colon;":":","&colone;":"","&coloneq;":"","&comma;":",","&commat;":"@","&comp;":"","&compfn;":"","&complement;":"","&complexes;":"","&cong;":"","&congdot;":"","&conint;":"","&copf;":"\uD835\uDD54","&coprod;":"","&copy":"\xa9","&copy;":"\xa9","&copysr;":"","&crarr;":"","&cross;":"","&cscr;":"\uD835\uDCB8","&csub;":"","&csube;":"","&csup;":"","&csupe;":"","&ctdot;":"","&cudarrl;":"","&cudarrr;":"","&cuepr;":"","&cuesc;":"","&cularr;":"","&cularrp;":"","&cup;":"","&cupbrcap;":"","&cupcap;":"","&cupcup;":"","&cupdot;":"","&cupor;":"","&cups;":"","&curarr;":"","&curarrm;":"","&curlyeqprec;":"","&curlyeqsucc;":"","&curlyvee;":"","&curlywedge;":"","&curren":"\xa4","&curren;":"\xa4","&curvearrowleft;":"","&curvearrowright;":"","&cuvee;":"","&cuwed;":"","&cwconint;":"","&cwint;":"","&cylcty;":"","&dArr;":"","&dHar;":"","&dagger;":"","&daleth;":"","&darr;":"","&dash;":"","&dashv;":"","&dbkarow;":"","&dblac;":"","&dcaron;":"","&dcy;":"","&dd;":"","&ddagger;":"","&ddarr;":"","&ddotseq;":"","&deg":"\xb0","&deg;":"\xb0","&delta;":"","&demptyv;":"","&dfisht;":"","&dfr;":"\uD835\uDD21","&dharl;":"","&dharr;":"","&diam;":"","&diamond;":"","&diamondsuit;":"","&diams;":"","&die;":"\xa8","&digamma;":"","&disin;":"","&div;":"\xf7","&divide":"\xf7","&divide;":"\xf7","&divideontimes;":"","&divonx;":"","&djcy;":"","&dlcorn;":"","&dlcrop;":"","&dollar;":"$","&dopf;":"\uD835\uDD55","&dot;":"","&doteq;":"","&doteqdot;":"","&dotminus;":"","&dotplus;":"","&dotsquare;":"","&doublebarwedge;":"","&downarrow;":"","&downdownarrows;":"","&downharpoonleft;":"","&downharpoonright;":"","&drbkarow;":"","&drcorn;":"","&drcrop;":"","&dscr;":"\uD835\uDCB9","&dscy;":"","&dsol;":"","&dstrok;":"","&dtdot;":"","&dtri;":"","&dtrif;":"","&duarr;":"","&duhar;":"","&dwangle;":"","&dzcy;":"","&dzigrarr;":"","&eDDot;":"","&eDot;":"","&eacute":"\xe9","&eacute;":"\xe9","&easter;":"","&ecaron;":"","&ecir;":"","&ecirc":"\xea","&ecirc;":"\xea","&ecolon;":"","&ecy;":"","&edot;":"","&ee;":"","&efDot;":"","&efr;":"\uD835\uDD22","&eg;":"","&egrave":"\xe8","&egrave;":"\xe8","&egs;":"","&egsdot;":"","&el;":"","&elinters;":"","&ell;":"","&els;":"","&elsdot;":"","&emacr;":"","&empty;":"","&emptyset;":"","&emptyv;":"","&emsp13;":"","&emsp14;":"","&emsp;":"","&eng;":"","&ensp;":"","&eogon;":"","&eopf;":"\uD835\uDD56","&epar;":"","&eparsl;":"","&eplus;":"","&epsi;":"","&epsilon;":"","&epsiv;":"","&eqcirc;":"","&eqcolon;":"","&eqsim;":"","&eqslantgtr;":"","&eqslantless;":"","&equals;":"=","&equest;":"","&equiv;":"","&equivDD;":"","&eqvparsl;":"","&erDot;":"","&erarr;":"","&escr;":"","&esdot;":"","&esim;":"","&eta;":"","&eth":"\xf0","&eth;":"\xf0","&euml":"\xeb","&euml;":"\xeb","&euro;":"","&excl;":"!","&exist;":"","&expectation;":"","&exponentiale;":"","&fallingdotseq;":"","&fcy;":"","&female;":"","&ffilig;":"","&fflig;":"","&ffllig;":"","&ffr;":"\uD835\uDD23","&filig;":"","&fjlig;":"fj","&flat;":"","&fllig;":"","&fltns;":"","&fnof;":"","&fopf;":"\uD835\uDD57","&forall;":"","&fork;":"","&forkv;":"","&fpartint;":"","&frac12":"\xbd","&frac12;":"\xbd","&frac13;":"","&frac14":"\xbc","&frac14;":"\xbc","&frac15;":"","&frac16;":"","&frac18;":"","&frac23;":"","&frac25;":"","&frac34":"\xbe","&frac34;":"\xbe","&frac35;":"","&frac38;":"","&frac45;":"","&frac56;":"","&frac58;":"","&frac78;":"","&frasl;":"","&frown;":"","&fscr;":"\uD835\uDCBB","&gE;":"","&gEl;":"","&gacute;":"","&gamma;":"","&gammad;":"","&gap;":"","&gbreve;":"","&gcirc;":"","&gcy;":"","&gdot;":"","&ge;":"","&gel;":"","&geq;":"","&geqq;":"","&geqslant;":"","&ges;":"","&gescc;":"","&gesdot;":"","&gesdoto;":"","&gesdotol;":"","&gesl;":"","&gesles;":"","&gfr;":"\uD835\uDD24","&gg;":"","&ggg;":"","&gimel;":"","&gjcy;":"","&gl;":"","&glE;":"","&gla;":"","&glj;":"","&gnE;":"","&gnap;":"","&gnapprox;":"","&gne;":"","&gneq;":"","&gneqq;":"","&gnsim;":"","&gopf;":"\uD835\uDD58","&grave;":"`","&gscr;":"","&gsim;":"","&gsime;":"","&gsiml;":"","&gt":">","&gt;":">","&gtcc;":"","&gtcir;":"","&gtdot;":"","&gtlPar;":"","&gtquest;":"","&gtrapprox;":"","&gtrarr;":"","&gtrdot;":"","&gtreqless;":"","&gtreqqless;":"","&gtrless;":"","&gtrsim;":"","&gvertneqq;":"","&gvnE;":"","&hArr;":"","&hairsp;":"","&half;":"\xbd","&hamilt;":"","&hardcy;":"","&harr;":"","&harrcir;":"","&harrw;":"","&hbar;":"","&hcirc;":"","&hearts;":"","&heartsuit;":"","&hellip;":"","&hercon;":"","&hfr;":"\uD835\uDD25","&hksearow;":"","&hkswarow;":"","&hoarr;":"","&homtht;":"","&hookleftarrow;":"","&hookrightarrow;":"","&hopf;":"\uD835\uDD59","&horbar;":"","&hscr;":"\uD835\uDCBD","&hslash;":"","&hstrok;":"","&hybull;":"","&hyphen;":"","&iacute":"\xed","&iacute;":"\xed","&ic;":"","&icirc":"\xee","&icirc;":"\xee","&icy;":"","&iecy;":"","&iexcl":"\xa1","&iexcl;":"\xa1","&iff;":"","&ifr;":"\uD835\uDD26","&igrave":"\xec","&igrave;":"\xec","&ii;":"","&iiiint;":"","&iiint;":"","&iinfin;":"","&iiota;":"","&ijlig;":"","&imacr;":"","&image;":"","&imagline;":"","&imagpart;":"","&imath;":"","&imof;":"","&imped;":"","&in;":"","&incare;":"","&infin;":"","&infintie;":"","&inodot;":"","&int;":"","&intcal;":"","&integers;":"","&intercal;":"","&intlarhk;":"","&intprod;":"","&iocy;":"","&iogon;":"","&iopf;":"\uD835\uDD5A","&iota;":"","&iprod;":"","&iquest":"\xbf","&iquest;":"\xbf","&iscr;":"\uD835\uDCBE","&isin;":"","&isinE;":"","&isindot;":"","&isins;":"","&isinsv;":"","&isinv;":"","&it;":"","&itilde;":"","&iukcy;":"","&iuml":"\xef","&iuml;":"\xef","&jcirc;":"","&jcy;":"","&jfr;":"\uD835\uDD27","&jmath;":"","&jopf;":"\uD835\uDD5B","&jscr;":"\uD835\uDCBF","&jsercy;":"","&jukcy;":"","&kappa;":"","&kappav;":"","&kcedil;":"","&kcy;":"","&kfr;":"\uD835\uDD28","&kgreen;":"","&khcy;":"","&kjcy;":"","&kopf;":"\uD835\uDD5C","&kscr;":"\uD835\uDCC0","&lAarr;":"","&lArr;":"","&lAtail;":"","&lBarr;":"","&lE;":"","&lEg;":"","&lHar;":"","&lacute;":"","&laemptyv;":"","&lagran;":"","&lambda;":"","&lang;":"","&langd;":"","&langle;":"","&lap;":"","&laquo":"\xab","&laquo;":"\xab","&larr;":"","&larrb;":"","&larrbfs;":"","&larrfs;":"","&larrhk;":"","&larrlp;":"","&larrpl;":"","&larrsim;":"","&larrtl;":"","&lat;":"","&latail;":"","&late;":"","&lates;":"","&lbarr;":"","&lbbrk;":"","&lbrace;":"{","&lbrack;":"[","&lbrke;":"","&lbrksld;":"","&lbrkslu;":"","&lcaron;":"","&lcedil;":"","&lceil;":"","&lcub;":"{","&lcy;":"","&ldca;":"","&ldquo;":"","&ldquor;":"","&ldrdhar;":"","&ldrushar;":"","&ldsh;":"","&le;":"","&leftarrow;":"","&leftarrowtail;":"","&leftharpoondown;":"","&leftharpoonup;":"","&leftleftarrows;":"","&leftrightarrow;":"","&leftrightarrows;":"","&leftrightharpoons;":"","&leftrightsquigarrow;":"","&leftthreetimes;":"","&leg;":"","&leq;":"","&leqq;":"","&leqslant;":"","&les;":"","&lescc;":"","&lesdot;":"","&lesdoto;":"","&lesdotor;":"","&lesg;":"","&lesges;":"","&lessapprox;":"","&lessdot;":"","&lesseqgtr;":"","&lesseqqgtr;":"","&lessgtr;":"","&lesssim;":"","&lfisht;":"","&lfloor;":"","&lfr;":"\uD835\uDD29","&lg;":"","&lgE;":"","&lhard;":"","&lharu;":"","&lharul;":"","&lhblk;":"","&ljcy;":"","&ll;":"","&llarr;":"","&llcorner;":"","&llhard;":"","&lltri;":"","&lmidot;":"","&lmoust;":"","&lmoustache;":"","&lnE;":"","&lnap;":"","&lnapprox;":"","&lne;":"","&lneq;":"","&lneqq;":"","&lnsim;":"","&loang;":"","&loarr;":"","&lobrk;":"","&longleftarrow;":"","&longleftrightarrow;":"","&longmapsto;":"","&longrightarrow;":"","&looparrowleft;":"","&looparrowright;":"","&lopar;":"","&lopf;":"\uD835\uDD5D","&loplus;":"","&lotimes;":"","&lowast;":"","&lowbar;":"_","&loz;":"","&lozenge;":"","&lozf;":"","&lpar;":"(","&lparlt;":"","&lrarr;":"","&lrcorner;":"","&lrhar;":"","&lrhard;":"","&lrm;":"","&lrtri;":"","&lsaquo;":"","&lscr;":"\uD835\uDCC1","&lsh;":"","&lsim;":"","&lsime;":"","&lsimg;":"","&lsqb;":"[","&lsquo;":"","&lsquor;":"","&lstrok;":"","&lt":"<","&lt;":"<","&ltcc;":"","&ltcir;":"","&ltdot;":"","&lthree;":"","&ltimes;":"","&ltlarr;":"","&ltquest;":"","&ltrPar;":"","&ltri;":"","&ltrie;":"","&ltrif;":"","&lurdshar;":"","&luruhar;":"","&lvertneqq;":"","&lvnE;":"","&mDDot;":"","&macr":"\xaf","&macr;":"\xaf","&male;":"","&malt;":"","&maltese;":"","&map;":"","&mapsto;":"","&mapstodown;":"","&mapstoleft;":"","&mapstoup;":"","&marker;":"","&mcomma;":"","&mcy;":"","&mdash;":"","&measuredangle;":"","&mfr;":"\uD835\uDD2A","&mho;":"","&micro":"\xb5","&micro;":"\xb5","&mid;":"","&midast;":"*","&midcir;":"","&middot":"\xb7","&middot;":"\xb7","&minus;":"","&minusb;":"","&minusd;":"","&minusdu;":"","&mlcp;":"","&mldr;":"","&mnplus;":"","&models;":"","&mopf;":"\uD835\uDD5E","&mp;":"","&mscr;":"\uD835\uDCC2","&mstpos;":"","&mu;":"","&multimap;":"","&mumap;":"","&nGg;":"","&nGt;":"","&nGtv;":"","&nLeftarrow;":"","&nLeftrightarrow;":"","&nLl;":"","&nLt;":"","&nLtv;":"","&nRightarrow;":"","&nVDash;":"","&nVdash;":"","&nabla;":"","&nacute;":"","&nang;":"","&nap;":"","&napE;":"","&napid;":"","&napos;":"","&napprox;":"","&natur;":"","&natural;":"","&naturals;":"","&nbsp":"\xa0","&nbsp;":"\xa0","&nbump;":"","&nbumpe;":"","&ncap;":"","&ncaron;":"","&ncedil;":"","&ncong;":"","&ncongdot;":"","&ncup;":"","&ncy;":"","&ndash;":"","&ne;":"","&neArr;":"","&nearhk;":"","&nearr;":"","&nearrow;":"","&nedot;":"","&nequiv;":"","&nesear;":"","&nesim;":"","&nexist;":"","&nexists;":"","&nfr;":"\uD835\uDD2B","&ngE;":"","&nge;":"","&ngeq;":"","&ngeqq;":"","&ngeqslant;":"","&nges;":"","&ngsim;":"","&ngt;":"","&ngtr;":"","&nhArr;":"","&nharr;":"","&nhpar;":"","&ni;":"","&nis;":"","&nisd;":"","&niv;":"","&njcy;":"","&nlArr;":"","&nlE;":"","&nlarr;":"","&nldr;":"","&nle;":"","&nleftarrow;":"","&nleftrightarrow;":"","&nleq;":"","&nleqq;":"","&nleqslant;":"","&nles;":"","&nless;":"","&nlsim;":"","&nlt;":"","&nltri;":"","&nltrie;":"","&nmid;":"","&nopf;":"\uD835\uDD5F","&not":"\xac","&not;":"\xac","&notin;":"","&notinE;":"","&notindot;":"","&notinva;":"","&notinvb;":"","&notinvc;":"","&notni;":"","&notniva;":"","&notnivb;":"","&notnivc;":"","&npar;":"","&nparallel;":"","&nparsl;":"","&npart;":"","&npolint;":"","&npr;":"","&nprcue;":"","&npre;":"","&nprec;":"","&npreceq;":"","&nrArr;":"","&nrarr;":"","&nrarrc;":"","&nrarrw;":"","&nrightarrow;":"","&nrtri;":"","&nrtrie;":"","&nsc;":"","&nsccue;":"","&nsce;":"","&nscr;":"\uD835\uDCC3","&nshortmid;":"","&nshortparallel;":"","&nsim;":"","&nsime;":"","&nsimeq;":"","&nsmid;":"","&nspar;":"","&nsqsube;":"","&nsqsupe;":"","&nsub;":"","&nsubE;":"","&nsube;":"","&nsubset;":"","&nsubseteq;":"","&nsubseteqq;":"","&nsucc;":"","&nsucceq;":"","&nsup;":"","&nsupE;":"","&nsupe;":"","&nsupset;":"","&nsupseteq;":"","&nsupseteqq;":"","&ntgl;":"","&ntilde":"\xf1","&ntilde;":"\xf1","&ntlg;":"","&ntriangleleft;":"","&ntrianglelefteq;":"","&ntriangleright;":"","&ntrianglerighteq;":"","&nu;":"","&num;":"#","&numero;":"","&numsp;":"","&nvDash;":"","&nvHarr;":"","&nvap;":"","&nvdash;":"","&nvge;":"","&nvgt;":">","&nvinfin;":"","&nvlArr;":"","&nvle;":"","&nvlt;":"<","&nvltrie;":"","&nvrArr;":"","&nvrtrie;":"","&nvsim;":"","&nwArr;":"","&nwarhk;":"","&nwarr;":"","&nwarrow;":"","&nwnear;":"","&oS;":"","&oacute":"\xf3","&oacute;":"\xf3","&oast;":"","&ocir;":"","&ocirc":"\xf4","&ocirc;":"\xf4","&ocy;":"","&odash;":"","&odblac;":"","&odiv;":"","&odot;":"","&odsold;":"","&oelig;":"","&ofcir;":"","&ofr;":"\uD835\uDD2C","&ogon;":"","&ograve":"\xf2","&ograve;":"\xf2","&ogt;":"","&ohbar;":"","&ohm;":"","&oint;":"","&olarr;":"","&olcir;":"","&olcross;":"","&oline;":"","&olt;":"","&omacr;":"","&omega;":"","&omicron;":"","&omid;":"","&ominus;":"","&oopf;":"\uD835\uDD60","&opar;":"","&operp;":"","&oplus;":"","&or;":"","&orarr;":"","&ord;":"","&order;":"","&orderof;":"","&ordf":"\xaa","&ordf;":"\xaa","&ordm":"\xba","&ordm;":"\xba","&origof;":"","&oror;":"","&orslope;":"","&orv;":"","&oscr;":"","&oslash":"\xf8","&oslash;":"\xf8","&osol;":"","&otilde":"\xf5","&otilde;":"\xf5","&otimes;":"","&otimesas;":"","&ouml":"\xf6","&ouml;":"\xf6","&ovbar;":"","&par;":"","&para":"\xb6","&para;":"\xb6","&parallel;":"","&parsim;":"","&parsl;":"","&part;":"","&pcy;":"","&percnt;":"%","&period;":".","&permil;":"","&perp;":"","&pertenk;":"","&pfr;":"\uD835\uDD2D","&phi;":"","&phiv;":"","&phmmat;":"","&phone;":"","&pi;":"","&pitchfork;":"","&piv;":"","&planck;":"","&planckh;":"","&plankv;":"","&plus;":"+","&plusacir;":"","&plusb;":"","&pluscir;":"","&plusdo;":"","&plusdu;":"","&pluse;":"","&plusmn":"\xb1","&plusmn;":"\xb1","&plussim;":"","&plustwo;":"","&pm;":"\xb1","&pointint;":"","&popf;":"\uD835\uDD61","&pound":"\xa3","&pound;":"\xa3","&pr;":"","&prE;":"","&prap;":"","&prcue;":"","&pre;":"","&prec;":"","&precapprox;":"","&preccurlyeq;":"","&preceq;":"","&precnapprox;":"","&precneqq;":"","&precnsim;":"","&precsim;":"","&prime;":"","&primes;":"","&prnE;":"","&prnap;":"","&prnsim;":"","&prod;":"","&profalar;":"","&profline;":"","&profsurf;":"","&prop;":"","&propto;":"","&prsim;":"","&prurel;":"","&pscr;":"\uD835\uDCC5","&psi;":"","&puncsp;":"","&qfr;":"\uD835\uDD2E","&qint;":"","&qopf;":"\uD835\uDD62","&qprime;":"","&qscr;":"\uD835\uDCC6","&quaternions;":"","&quatint;":"","&quest;":"?","&questeq;":"","&quot":'"',"&quot;":'"',"&rAarr;":"","&rArr;":"","&rAtail;":"","&rBarr;":"","&rHar;":"","&race;":"","&racute;":"","&radic;":"","&raemptyv;":"","&rang;":"","&rangd;":"","&range;":"","&rangle;":"","&raquo":"\xbb","&raquo;":"\xbb","&rarr;":"","&rarrap;":"","&rarrb;":"","&rarrbfs;":"","&rarrc;":"","&rarrfs;":"","&rarrhk;":"","&rarrlp;":"","&rarrpl;":"","&rarrsim;":"","&rarrtl;":"","&rarrw;":"","&ratail;":"","&ratio;":"","&rationals;":"","&rbarr;":"","&rbbrk;":"","&rbrace;":"}","&rbrack;":"]","&rbrke;":"","&rbrksld;":"","&rbrkslu;":"","&rcaron;":"","&rcedil;":"","&rceil;":"","&rcub;":"}","&rcy;":"","&rdca;":"","&rdldhar;":"","&rdquo;":"","&rdquor;":"","&rdsh;":"","&real;":"","&realine;":"","&realpart;":"","&reals;":"","&rect;":"","&reg":"\xae","&reg;":"\xae","&rfisht;":"","&rfloor;":"","&rfr;":"\uD835\uDD2F","&rhard;":"","&rharu;":"","&rharul;":"","&rho;":"","&rhov;":"","&rightarrow;":"","&rightarrowtail;":"","&rightharpoondown;":"","&rightharpoonup;":"","&rightleftarrows;":"","&rightleftharpoons;":"","&rightrightarrows;":"","&rightsquigarrow;":"","&rightthreetimes;":"","&ring;":"","&risingdotseq;":"","&rlarr;":"","&rlhar;":"","&rlm;":"","&rmoust;":"","&rmoustache;":"","&rnmid;":"","&roang;":"","&roarr;":"","&robrk;":"","&ropar;":"","&ropf;":"\uD835\uDD63","&roplus;":"","&rotimes;":"","&rpar;":")","&rpargt;":"","&rppolint;":"","&rrarr;":"","&rsaquo;":"","&rscr;":"\uD835\uDCC7","&rsh;":"","&rsqb;":"]","&rsquo;":"","&rsquor;":"","&rthree;":"","&rtimes;":"","&rtri;":"","&rtrie;":"","&rtrif;":"","&rtriltri;":"","&ruluhar;":"","&rx;":"","&sacute;":"","&sbquo;":"","&sc;":"","&scE;":"","&scap;":"","&scaron;":"","&sccue;":"","&sce;":"","&scedil;":"","&scirc;":"","&scnE;":"","&scnap;":"","&scnsim;":"","&scpolint;":"","&scsim;":"","&scy;":"","&sdot;":"","&sdotb;":"","&sdote;":"","&seArr;":"","&searhk;":"","&searr;":"","&searrow;":"","&sect":"\xa7","&sect;":"\xa7","&semi;":";","&seswar;":"","&setminus;":"","&setmn;":"","&sext;":"","&sfr;":"\uD835\uDD30","&sfrown;":"","&sharp;":"","&shchcy;":"","&shcy;":"","&shortmid;":"","&shortparallel;":"","&shy":"\xad","&shy;":"\xad","&sigma;":"","&sigmaf;":"","&sigmav;":"","&sim;":"","&simdot;":"","&sime;":"","&simeq;":"","&simg;":"","&simgE;":"","&siml;":"","&simlE;":"","&simne;":"","&simplus;":"","&simrarr;":"","&slarr;":"","&smallsetminus;":"","&smashp;":"","&smeparsl;":"","&smid;":"","&smile;":"","&smt;":"","&smte;":"","&smtes;":"","&softcy;":"","&sol;":"/","&solb;":"","&solbar;":"","&sopf;":"\uD835\uDD64","&spades;":"","&spadesuit;":"","&spar;":"","&sqcap;":"","&sqcaps;":"","&sqcup;":"","&sqcups;":"","&sqsub;":"","&sqsube;":"","&sqsubset;":"","&sqsubseteq;":"","&sqsup;":"","&sqsupe;":"","&sqsupset;":"","&sqsupseteq;":"","&squ;":"","&square;":"","&squarf;":"","&squf;":"","&srarr;":"","&sscr;":"\uD835\uDCC8","&ssetmn;":"","&ssmile;":"","&sstarf;":"","&star;":"","&starf;":"","&straightepsilon;":"","&straightphi;":"","&strns;":"\xaf","&sub;":"","&subE;":"","&subdot;":"","&sube;":"","&subedot;":"","&submult;":"","&subnE;":"","&subne;":"","&subplus;":"","&subrarr;":"","&subset;":"","&subseteq;":"","&subseteqq;":"","&subsetneq;":"","&subsetneqq;":"","&subsim;":"","&subsub;":"","&subsup;":"","&succ;":"","&succapprox;":"","&succcurlyeq;":"","&succeq;":"","&succnapprox;":"","&succneqq;":"","&succnsim;":"","&succsim;":"","&sum;":"","&sung;":"","&sup1":"\xb9","&sup1;":"\xb9","&sup2":"\xb2","&sup2;":"\xb2","&sup3":"\xb3","&sup3;":"\xb3","&sup;":"","&supE;":"","&supdot;":"","&supdsub;":"","&supe;":"","&supedot;":"","&suphsol;":"","&suphsub;":"","&suplarr;":"","&supmult;":"","&supnE;":"","&supne;":"","&supplus;":"","&supset;":"","&supseteq;":"","&supseteqq;":"","&supsetneq;":"","&supsetneqq;":"","&supsim;":"","&supsub;":"","&supsup;":"","&swArr;":"","&swarhk;":"","&swarr;":"","&swarrow;":"","&swnwar;":"","&szlig":"\xdf","&szlig;":"\xdf","&target;":"","&tau;":"","&tbrk;":"","&tcaron;":"","&tcedil;":"","&tcy;":"","&tdot;":"","&telrec;":"","&tfr;":"\uD835\uDD31","&there4;":"","&therefore;":"","&theta;":"","&thetasym;":"","&thetav;":"","&thickapprox;":"","&thicksim;":"","&thinsp;":"","&thkap;":"","&thksim;":"","&thorn":"\xfe","&thorn;":"\xfe","&tilde;":"","&times":"\xd7","&times;":"\xd7","&timesb;":"","&timesbar;":"","&timesd;":"","&tint;":"","&toea;":"","&top;":"","&topbot;":"","&topcir;":"","&topf;":"\uD835\uDD65","&topfork;":"","&tosa;":"","&tprime;":"","&trade;":"","&triangle;":"","&triangledown;":"","&triangleleft;":"","&trianglelefteq;":"","&triangleq;":"","&triangleright;":"","&trianglerighteq;":"","&tridot;":"","&trie;":"","&triminus;":"","&triplus;":"","&trisb;":"","&tritime;":"","&trpezium;":"","&tscr;":"\uD835\uDCC9","&tscy;":"","&tshcy;":"","&tstrok;":"","&twixt;":"","&twoheadleftarrow;":"","&twoheadrightarrow;":"","&uArr;":"","&uHar;":"","&uacute":"\xfa","&uacute;":"\xfa","&uarr;":"","&ubrcy;":"","&ubreve;":"","&ucirc":"\xfb","&ucirc;":"\xfb","&ucy;":"","&udarr;":"","&udblac;":"","&udhar;":"","&ufisht;":"","&ufr;":"\uD835\uDD32","&ugrave":"\xf9","&ugrave;":"\xf9","&uharl;":"","&uharr;":"","&uhblk;":"","&ulcorn;":"","&ulcorner;":"","&ulcrop;":"","&ultri;":"","&umacr;":"","&uml":"\xa8","&uml;":"\xa8","&uogon;":"","&uopf;":"\uD835\uDD66","&uparrow;":"","&updownarrow;":"","&upharpoonleft;":"","&upharpoonright;":"","&uplus;":"","&upsi;":"","&upsih;":"","&upsilon;":"","&upuparrows;":"","&urcorn;":"","&urcorner;":"","&urcrop;":"","&uring;":"","&urtri;":"","&uscr;":"\uD835\uDCCA","&utdot;":"","&utilde;":"","&utri;":"","&utrif;":"","&uuarr;":"","&uuml":"\xfc","&uuml;":"\xfc","&uwangle;":"","&vArr;":"","&vBar;":"","&vBarv;":"","&vDash;":"","&vangrt;":"","&varepsilon;":"","&varkappa;":"","&varnothing;":"","&varphi;":"","&varpi;":"","&varpropto;":"","&varr;":"","&varrho;":"","&varsigma;":"","&varsubsetneq;":"","&varsubsetneqq;":"","&varsupsetneq;":"","&varsupsetneqq;":"","&vartheta;":"","&vartriangleleft;":"","&vartriangleright;":"","&vcy;":"","&vdash;":"","&vee;":"","&veebar;":"","&veeeq;":"","&vellip;":"","&verbar;":"|","&vert;":"|","&vfr;":"\uD835\uDD33","&vltri;":"","&vnsub;":"","&vnsup;":"","&vopf;":"\uD835\uDD67","&vprop;":"","&vrtri;":"","&vscr;":"\uD835\uDCCB","&vsubnE;":"","&vsubne;":"","&vsupnE;":"","&vsupne;":"","&vzigzag;":"","&wcirc;":"","&wedbar;":"","&wedge;":"","&wedgeq;":"","&weierp;":"","&wfr;":"\uD835\uDD34","&wopf;":"\uD835\uDD68","&wp;":"","&wr;":"","&wreath;":"","&wscr;":"\uD835\uDCCC","&xcap;":"","&xcirc;":"","&xcup;":"","&xdtri;":"","&xfr;":"\uD835\uDD35","&xhArr;":"","&xharr;":"","&xi;":"","&xlArr;":"","&xlarr;":"","&xmap;":"","&xnis;":"","&xodot;":"","&xopf;":"\uD835\uDD69","&xoplus;":"","&xotime;":"","&xrArr;":"","&xrarr;":"","&xscr;":"\uD835\uDCCD","&xsqcup;":"","&xuplus;":"","&xutri;":"","&xvee;":"","&xwedge;":"","&yacute":"\xfd","&yacute;":"\xfd","&yacy;":"","&ycirc;":"","&ycy;":"","&yen":"\xa5","&yen;":"\xa5","&yfr;":"\uD835\uDD36","&yicy;":"","&yopf;":"\uD835\uDD6A","&yscr;":"\uD835\uDCCE","&yucy;":"","&yuml":"\xff","&yuml;":"\xff","&zacute;":"","&zcaron;":"","&zcy;":"","&zdot;":"","&zeetrf;":"","&zeta;":"","&zfr;":"\uD835\uDD37","&zhcy;":"","&zigrarr;":"","&zopf;":"\uD835\uDD6B","&zscr;":"\uD835\uDCCF","&zwj;":"","&zwnj;":""},characters:{:"&AElig;","&":"&amp;",:"&Aacute;",:"&Abreve;",:"&Acirc;",:"&Acy;",:"&Afr;",:"&Agrave;",:"&Alpha;",:"&Amacr;","":"&And;",:"&Aogon;",:"&Aopf;","":"&af;",:"&angst;",:"&Ascr;","":"&coloneq;",:"&Atilde;",:"&Auml;","":"&ssetmn;","":"&Barv;","":"&doublebarwedge;",:"&Bcy;","":"&because;",:"&bernou;",:"&Beta;",:"&Bfr;",:"&Bopf;","":"&breve;","":"&bump;",:"&CHcy;","\xa9":"&copy;",:"&Cacute;","":"&Cap;",:"&DD;",:"&Cfr;",:"&Ccaron;",:"&Ccedil;",:"&Ccirc;","":"&Cconint;",:"&Cdot;","\xb8":"&cedil;","\xb7":"&middot;",:"&Chi;","":"&odot;","":"&ominus;","":"&oplus;","":"&otimes;","":"&cwconint;","":"&rdquor;","":"&rsquor;","":"&Proportion;","":"&Colone;","":"&equiv;","":"&DoubleContourIntegral;","":"&oint;",:"&complexes;","":"&coprod;","":"&awconint;","":"&Cross;",:"&Cscr;","":"&Cup;","":"&asympeq;","":"&DDotrahd;",:"&DJcy;",:"&DScy;",:"&DZcy;","":"&ddagger;","":"&Darr;","":"&DoubleLeftTee;",:"&Dcaron;",:"&Dcy;","":"&nabla;",:"&Delta;",:"&Dfr;","\xb4":"&acute;","":"&dot;","":"&dblac;","`":"&grave;","":"&tilde;","":"&diamond;",:"&dd;",:"&Dopf;","\xa8":"&uml;","":"&DotDot;","":"&esdot;","":"&dArr;","":"&lArr;","":"&iff;","":"&xlArr;","":"&xhArr;","":"&xrArr;","":"&rArr;","":"&vDash;","":"&uArr;","":"&vArr;","":"&spar;","":"&downarrow;","":"&DownArrowBar;","":"&duarr;","":"&DownBreve;","":"&DownLeftRightVector;","":"&DownLeftTeeVector;","":"&lhard;","":"&DownLeftVectorBar;","":"&DownRightTeeVector;","":"&rightharpoondown;","":"&DownRightVectorBar;","":"&top;","":"&mapstodown;",:"&Dscr;",:"&Dstrok;",:"&ENG;",:"&ETH;",:"&Eacute;",:"&Ecaron;",:"&Ecirc;",:"&Ecy;",:"&Edot;",:"&Efr;",:"&Egrave;","":"&isinv;",:"&Emacr;","":"&EmptySmallSquare;","":"&EmptyVerySmallSquare;",:"&Eogon;",:"&Eopf;",:"&Epsilon;","":"&Equal;","":"&esim;","":"&rlhar;",:"&expectation;","":"&Esim;",:"&Eta;",:"&Euml;","":"&exist;",:"&exponentiale;",:"&Fcy;",:"&Ffr;","":"&FilledSmallSquare;","":"&squf;",:"&Fopf;","":"&forall;",:"&Fscr;",:"&GJcy;",">":"&gt;",:"&Gamma;",:"&Gammad;",:"&Gbreve;",:"&Gcedil;",:"&Gcirc;",:"&Gcy;",:"&Gdot;",:"&Gfr;","":"&ggg;",:"&Gopf;","":"&geq;","":"&gtreqless;","":"&geqq;","":"&GreaterGreater;","":"&gtrless;","":"&ges;","":"&gtrsim;",:"&Gscr;","":"&gg;",:"&HARDcy;",:"&caron;","^":"&Hat;",:"&Hcirc;",:"&Poincareplane;",:"&hamilt;",:"&quaternions;","":"&boxh;",:"&Hstrok;","":"&bumpeq;",:"&IEcy;",:"&IJlig;",:"&IOcy;",:"&Iacute;",:"&Icirc;",:"&Icy;",:"&Idot;",:"&imagpart;",:"&Igrave;",:"&Imacr;",:"&ii;","":"&Int;","":"&int;","":"&xcap;","":"&ic;","":"&it;",:"&Iogon;",:"&Iopf;",:"&Iota;",:"&imagline;",:"&Itilde;",:"&Iukcy;",:"&Iuml;",:"&Jcirc;",:"&Jcy;",:"&Jfr;",:"&Jopf;",:"&Jscr;",:"&Jsercy;",:"&Jukcy;",:"&KHcy;",:"&KJcy;",:"&Kappa;",:"&Kcedil;",:"&Kcy;",:"&Kfr;",:"&Kopf;",:"&Kscr;",:"&LJcy;","<":"&lt;",:"&Lacute;",:"&Lambda;","":"&Lang;",:"&lagran;","":"&twoheadleftarrow;",:"&Lcaron;",:"&Lcedil;",:"&Lcy;","":"&langle;","":"&slarr;","":"&larrb;","":"&lrarr;","":"&lceil;","":"&lobrk;","":"&LeftDownTeeVector;","":"&downharpoonleft;","":"&LeftDownVectorBar;","":"&lfloor;","":"&leftrightarrow;","":"&LeftRightVector;","":"&dashv;","":"&mapstoleft;","":"&LeftTeeVector;","":"&vltri;","":"&LeftTriangleBar;","":"&trianglelefteq;","":"&LeftUpDownVector;","":"&LeftUpTeeVector;","":"&upharpoonleft;","":"&LeftUpVectorBar;","":"&lharu;","":"&LeftVectorBar;","":"&lesseqgtr;","":"&leqq;","":"&lg;","":"&LessLess;","":"&les;","":"&lsim;",:"&Lfr;","":"&Ll;","":"&lAarr;",:"&Lmidot;","":"&xlarr;","":"&xharr;","":"&xrarr;",:"&Lopf;","":"&swarrow;","":"&searrow;","":"&lsh;",:"&Lstrok;","":"&ll;","":"&Map;",:"&Mcy;","":"&MediumSpace;",:"&phmmat;",:"&Mfr;","":"&mp;",:"&Mopf;",:"&Mu;",:"&NJcy;",:"&Nacute;",:"&Ncaron;",:"&Ncedil;",:"&Ncy;","":"&ZeroWidthSpace;","\n":"&NewLine;",:"&Nfr;","":"&NoBreak;","\xa0":"&nbsp;",:"&naturals;","":"&Not;","":"&nequiv;","":"&NotCupCap;","":"&nspar;","":"&notinva;","":"&ne;","":"&nesim;","":"&nexists;","":"&ngtr;","":"&ngeq;","":"&ngeqq;","":"&nGtv;","":"&ntgl;","":"&nges;","":"&ngsim;","":"&nbump;","":"&nbumpe;","":"&ntriangleleft;","":"&NotLeftTriangleBar;","":"&ntrianglelefteq;","":"&nlt;","":"&nleq;","":"&ntlg;","":"&nLtv;","":"&nles;","":"&nlsim;","":"&NotNestedGreaterGreater;","":"&NotNestedLessLess;","":"&nprec;","":"&npreceq;","":"&nprcue;","":"&notniva;","":"&ntriangleright;","":"&NotRightTriangleBar;","":"&ntrianglerighteq;","":"&NotSquareSubset;","":"&nsqsube;","":"&NotSquareSuperset;","":"&nsqsupe;","":"&vnsub;","":"&nsubseteq;","":"&nsucc;","":"&nsucceq;","":"&nsccue;","":"&NotSucceedsTilde;","":"&vnsup;","":"&nsupseteq;","":"&nsim;","":"&nsimeq;","":"&ncong;","":"&napprox;","":"&nsmid;",:"&Nscr;",:"&Ntilde;",:"&Nu;",:"&OElig;",:"&Oacute;",:"&Ocirc;",:"&Ocy;",:"&Odblac;",:"&Ofr;",:"&Ograve;",:"&Omacr;",:"&ohm;",:"&Omicron;",:"&Oopf;","":"&ldquo;","":"&lsquo;","":"&Or;",:"&Oscr;",:"&Oslash;",:"&Otilde;","":"&Otimes;",:"&Ouml;","":"&oline;","":"&OverBrace;","":"&tbrk;","":"&OverParenthesis;","":"&part;",:"&Pcy;",:"&Pfr;",:"&Phi;",:"&Pi;","\xb1":"&pm;",:"&primes;","":"&Pr;","":"&prec;","":"&preceq;","":"&preccurlyeq;","":"&prsim;","":"&Prime;","":"&prod;","":"&vprop;",:"&Pscr;",:"&Psi;",'"':"&quot;",:"&Qfr;",:"&rationals;",:"&Qscr;","":"&drbkarow;","\xae":"&reg;",:"&Racute;","":"&Rang;","":"&twoheadrightarrow;","":"&Rarrtl;",:"&Rcaron;",:"&Rcedil;",:"&Rcy;",:"&realpart;","":"&niv;","":"&lrhar;","":"&duhar;",:"&Rho;","":"&rangle;","":"&srarr;","":"&rarrb;","":"&rlarr;","":"&rceil;","":"&robrk;","":"&RightDownTeeVector;","":"&downharpoonright;","":"&RightDownVectorBar;","":"&rfloor;","":"&vdash;","":"&mapsto;","":"&RightTeeVector;","":"&vrtri;","":"&RightTriangleBar;","":"&trianglerighteq;","":"&RightUpDownVector;","":"&RightUpTeeVector;","":"&upharpoonright;","":"&RightUpVectorBar;","":"&rightharpoonup;","":"&RightVectorBar;",:"&reals;","":"&RoundImplies;","":"&rAarr;",:"&realine;","":"&rsh;","":"&RuleDelayed;",:"&SHCHcy;",:"&SHcy;",:"&SOFTcy;",:"&Sacute;","":"&Sc;",:"&Scaron;",:"&Scedil;",:"&Scirc;",:"&Scy;",:"&Sfr;","":"&uparrow;",:"&Sigma;","":"&compfn;",:"&Sopf;","":"&radic;","":"&square;","":"&sqcap;","":"&sqsubset;","":"&sqsubseteq;","":"&sqsupset;","":"&sqsupseteq;","":"&sqcup;",:"&Sscr;","":"&sstarf;","":"&Subset;","":"&subseteq;","":"&succ;","":"&succeq;","":"&succcurlyeq;","":"&succsim;","":"&sum;","":"&Supset;","":"&supset;","":"&supseteq;",:"&THORN;","":"&trade;",:"&TSHcy;",:"&TScy;","	":"&Tab;",:"&Tau;",:"&Tcaron;",:"&Tcedil;",:"&Tcy;",:"&Tfr;","":"&therefore;",:"&Theta;","":"&ThickSpace;","":"&thinsp;","":"&thksim;","":"&simeq;","":"&cong;","":"&thkap;",:"&Topf;","":"&tdot;",:"&Tscr;",:"&Tstrok;",:"&Uacute;","":"&Uarr;","":"&Uarrocir;",:"&Ubrcy;",:"&Ubreve;",:"&Ucirc;",:"&Ucy;",:"&Udblac;",:"&Ufr;",:"&Ugrave;",:"&Umacr;",_:"&lowbar;","":"&UnderBrace;","":"&bbrk;","":"&UnderParenthesis;","":"&xcup;","":"&uplus;",:"&Uogon;",:"&Uopf;","":"&UpArrowBar;","":"&udarr;","":"&varr;","":"&udhar;","":"&perp;","":"&mapstoup;","":"&nwarrow;","":"&nearrow;",:"&upsih;",:"&Upsilon;",:"&Uring;",:"&Uscr;",:"&Utilde;",:"&Uuml;","":"&VDash;","":"&Vbar;",:"&Vcy;","":"&Vdash;","":"&Vdashl;","":"&xvee;","":"&Vert;","":"&smid;","|":"&vert;","":"&VerticalSeparator;","":"&wreath;","":"&hairsp;",:"&Vfr;",:"&Vopf;",:"&Vscr;","":"&Vvdash;",:"&Wcirc;","":"&xwedge;",:"&Wfr;",:"&Wopf;",:"&Wscr;",:"&Xfr;",:"&Xi;",:"&Xopf;",:"&Xscr;",:"&YAcy;",:"&YIcy;",:"&YUcy;",:"&Yacute;",:"&Ycirc;",:"&Ycy;",:"&Yfr;",:"&Yopf;",:"&Yscr;",:"&Yuml;",:"&ZHcy;",:"&Zacute;",:"&Zcaron;",:"&Zcy;",:"&Zdot;",:"&Zeta;",:"&zeetrf;",:"&integers;",:"&Zscr;",:"&aacute;",:"&abreve;","":"&mstpos;","":"&acE;","":"&acd;",:"&acirc;",:"&acy;",:"&aelig;",:"&afr;",:"&agrave;",:"&aleph;",:"&alpha;",:"&amacr;","":"&amalg;","":"&wedge;","":"&andand;","":"&andd;","":"&andslope;","":"&andv;","":"&angle;","":"&ange;","":"&measuredangle;","":"&angmsdaa;","":"&angmsdab;","":"&angmsdac;","":"&angmsdad;","":"&angmsdae;","":"&angmsdaf;","":"&angmsdag;","":"&angmsdah;","":"&angrt;","":"&angrtvb;","":"&angrtvbd;","":"&angsph;","":"&angzarr;",:"&aogon;",:"&aopf;","":"&apE;","":"&apacir;","":"&approxeq;","":"&apid;","'":"&apos;",:"&aring;","\uD835\uDCB6":"&ascr;","*":"&midast;",:"&atilde;",:"&auml;","":"&awint;","":"&bNot;","":"&bcong;","":"&bepsi;","":"&bprime;","":"&bsim;","":"&bsime;","":"&barvee;","":"&barwedge;","":"&bbrktbrk;",:"&bcy;","":"&ldquor;","":"&bemptyv;",:"&beta;",:"&beth;","":"&twixt;",:"&bfr;","":"&xcirc;","":"&xodot;","":"&xoplus;","":"&xotime;","":"&xsqcup;","":"&starf;","":"&xdtri;","":"&xutri;","":"&xuplus;","":"&rbarr;","":"&lozf;","":"&utrif;","":"&dtrif;","":"&ltrif;","":"&rtrif;","":"&blank;","":"&blk12;","":"&blk14;","":"&blk34;","":"&block;","=":"&bne;","":"&bnequiv;","":"&bnot;",:"&bopf;","":"&bowtie;","":"&boxDL;","":"&boxDR;","":"&boxDl;","":"&boxDr;","":"&boxH;","":"&boxHD;","":"&boxHU;","":"&boxHd;","":"&boxHu;","":"&boxUL;","":"&boxUR;","":"&boxUl;","":"&boxUr;","":"&boxV;","":"&boxVH;","":"&boxVL;","":"&boxVR;","":"&boxVh;","":"&boxVl;","":"&boxVr;","":"&boxbox;","":"&boxdL;","":"&boxdR;","":"&boxdl;","":"&boxdr;","":"&boxhD;","":"&boxhU;","":"&boxhd;","":"&boxhu;","":"&minusb;","":"&plusb;","":"&timesb;","":"&boxuL;","":"&boxuR;","":"&boxul;","":"&boxur;","":"&boxv;","":"&boxvH;","":"&boxvL;","":"&boxvR;","":"&boxvh;","":"&boxvl;","":"&boxvr;","\xa6":"&brvbar;",:"&bscr;","":"&bsemi;","\\":"&bsol;","":"&bsolb;","":"&bsolhsub;","":"&bullet;","":"&bumpE;",:"&cacute;","":"&cap;","":"&capand;","":"&capbrcup;","":"&capcap;","":"&capcup;","":"&capdot;","":"&caps;","":"&caret;","":"&ccaps;",:"&ccaron;",:"&ccedil;",:"&ccirc;","":"&ccups;","":"&ccupssm;",:"&cdot;","":"&cemptyv;","\xa2":"&cent;",:"&cfr;",:"&chcy;","":"&checkmark;",:"&chi;","":"&cir;","":"&cirE;",:"&circ;","":"&cire;","":"&olarr;","":"&orarr;","":"&oS;","":"&oast;","":"&ocir;","":"&odash;","":"&cirfnint;","":"&cirmid;","":"&cirscir;","":"&clubsuit;",":":"&colon;",",":"&comma;","@":"&commat;","":"&complement;","":"&congdot;",:"&copf;","":"&copysr;","":"&crarr;","":"&cross;",:"&cscr;","":"&csub;","":"&csube;","":"&csup;","":"&csupe;","":"&ctdot;","":"&cudarrl;","":"&cudarrr;","":"&curlyeqprec;","":"&curlyeqsucc;","":"&curvearrowleft;","":"&cularrp;","":"&cup;","":"&cupbrcap;","":"&cupcap;","":"&cupcup;","":"&cupdot;","":"&cupor;","":"&cups;","":"&curvearrowright;","":"&curarrm;","":"&cuvee;","":"&cuwed;","\xa4":"&curren;","":"&cwint;","":"&cylcty;","":"&dHar;","":"&dagger;",:"&daleth;","":"&hyphen;","":"&rBarr;",:"&dcaron;",:"&dcy;","":"&downdownarrows;","":"&eDDot;","\xb0":"&deg;",:"&delta;","":"&demptyv;","":"&dfisht;",:"&dfr;","":"&diams;",:"&gammad;","":"&disin;","\xf7":"&divide;","":"&divonx;",:"&djcy;","":"&llcorner;","":"&dlcrop;",$:"&dollar;",:"&dopf;","":"&eDot;","":"&minusd;","":"&plusdo;","":"&sdotb;","":"&lrcorner;","":"&drcrop;",:"&dscr;",:"&dscy;","":"&dsol;",:"&dstrok;","":"&dtdot;","":"&triangledown;","":"&dwangle;",:"&dzcy;","":"&dzigrarr;",:"&eacute;","":"&easter;",:"&ecaron;","":"&eqcirc;",:"&ecirc;","":"&eqcolon;",:"&ecy;",:"&edot;","":"&fallingdotseq;",:"&efr;","":"&eg;",:"&egrave;","":"&eqslantgtr;","":"&egsdot;","":"&el;","":"&elinters;",:"&ell;","":"&eqslantless;","":"&elsdot;",:"&emacr;","":"&varnothing;","":"&emsp13;","":"&emsp14;","":"&emsp;",:"&eng;","":"&ensp;",:"&eogon;",:"&eopf;","":"&epar;","":"&eparsl;","":"&eplus;",:"&epsilon;",:"&varepsilon;","=":"&equals;","":"&questeq;","":"&equivDD;","":"&eqvparsl;","":"&risingdotseq;","":"&erarr;",:"&escr;",:"&eta;",:"&eth;",:"&euml;","":"&euro;","!":"&excl;",:"&fcy;","":"&female;",:"&ffilig;",:"&fflig;",:"&ffllig;",:"&ffr;",:"&filig;",fj:"&fjlig;","":"&flat;",:"&fllig;","":"&fltns;",:"&fnof;",:"&fopf;","":"&pitchfork;","":"&forkv;","":"&fpartint;","\xbd":"&half;","":"&frac13;","\xbc":"&frac14;","":"&frac15;","":"&frac16;","":"&frac18;","":"&frac23;","":"&frac25;","\xbe":"&frac34;","":"&frac35;","":"&frac38;","":"&frac45;","":"&frac56;","":"&frac58;","":"&frac78;","":"&frasl;","":"&sfrown;",:"&fscr;","":"&gtreqqless;",:"&gacute;",:"&gamma;","":"&gtrapprox;",:"&gbreve;",:"&gcirc;",:"&gcy;",:"&gdot;","":"&gescc;","":"&gesdot;","":"&gesdoto;","":"&gesdotol;","":"&gesl;","":"&gesles;",:"&gfr;",:"&gimel;",:"&gjcy;","":"&glE;","":"&gla;","":"&glj;","":"&gneqq;","":"&gnapprox;","":"&gneq;","":"&gnsim;",:"&gopf;",:"&gscr;","":"&gsime;","":"&gsiml;","":"&gtcc;","":"&gtcir;","":"&gtrdot;","":"&gtlPar;","":"&gtquest;","":"&gtrarr;","":"&gvnE;",:"&hardcy;","":"&harrcir;","":"&leftrightsquigarrow;",:"&plankv;",:"&hcirc;","":"&heartsuit;","":"&mldr;","":"&hercon;",:"&hfr;","":"&searhk;","":"&swarhk;","":"&hoarr;","":"&homtht;","":"&larrhk;","":"&rarrhk;",:"&hopf;","":"&horbar;",:"&hscr;",:"&hstrok;","":"&hybull;",:"&iacute;",:"&icirc;",:"&icy;",:"&iecy;","\xa1":"&iexcl;",:"&ifr;",:"&igrave;","":"&qint;","":"&tint;","":"&iinfin;","":"&iiota;",:"&ijlig;",:"&imacr;",:"&inodot;","":"&imof;",:"&imped;","":"&incare;","":"&infin;","":"&infintie;","":"&intercal;","":"&intlarhk;","":"&iprod;",:"&iocy;",:"&iogon;",:"&iopf;",:"&iota;","\xbf":"&iquest;",:"&iscr;","":"&isinE;","":"&isindot;","":"&isins;","":"&isinsv;",:"&itilde;",:"&iukcy;",:"&iuml;",:"&jcirc;",:"&jcy;",:"&jfr;",:"&jmath;",:"&jopf;",:"&jscr;",:"&jsercy;",:"&jukcy;",:"&kappa;",:"&varkappa;",:"&kcedil;",:"&kcy;",:"&kfr;",:"&kgreen;",:"&khcy;",:"&kjcy;",:"&kopf;",:"&kscr;","":"&lAtail;","":"&lBarr;","":"&lesseqqgtr;","":"&lHar;",:"&lacute;","":"&laemptyv;",:"&lambda;","":"&langd;","":"&lessapprox;","\xab":"&laquo;","":"&larrbfs;","":"&larrfs;","":"&looparrowleft;","":"&larrpl;","":"&larrsim;","":"&leftarrowtail;","":"&lat;","":"&latail;","":"&late;","":"&lates;","":"&lbarr;","":"&lbbrk;","{":"&lcub;","[":"&lsqb;","":"&lbrke;","":"&lbrksld;","":"&lbrkslu;",:"&lcaron;",:"&lcedil;",:"&lcy;","":"&ldca;","":"&ldrdhar;","":"&ldrushar;","":"&ldsh;","":"&leq;","":"&llarr;","":"&lthree;","":"&lescc;","":"&lesdot;","":"&lesdoto;","":"&lesdotor;","":"&lesg;","":"&lesges;","":"&ltdot;","":"&lfisht;",:"&lfr;","":"&lgE;","":"&lharul;","":"&lhblk;",:"&ljcy;","":"&llhard;","":"&lltri;",:"&lmidot;","":"&lmoustache;","":"&lneqq;","":"&lnapprox;","":"&lneq;","":"&lnsim;","":"&loang;","":"&loarr;","":"&xmap;","":"&rarrlp;","":"&lopar;",:"&lopf;","":"&loplus;","":"&lotimes;","":"&lowast;","":"&lozenge;","(":"&lpar;","":"&lparlt;","":"&lrhard;","":"&lrm;","":"&lrtri;","":"&lsaquo;",:"&lscr;","":"&lsime;","":"&lsimg;","":"&sbquo;",:"&lstrok;","":"&ltcc;","":"&ltcir;","":"&ltimes;","":"&ltlarr;","":"&ltquest;","":"&ltrPar;","":"&triangleleft;","":"&lurdshar;","":"&luruhar;","":"&lvnE;","":"&mDDot;","\xaf":"&strns;","":"&male;","":"&maltese;","":"&marker;","":"&mcomma;",:"&mcy;","":"&mdash;",:"&mfr;","":"&mho;",:"&micro;","":"&midcir;","":"&minus;","":"&minusdu;","":"&mlcp;","":"&models;",:"&mopf;",:"&mscr;",:"&mu;","":"&mumap;","":"&nGg;","":"&nGt;","":"&nlArr;","":"&nhArr;","":"&nLl;","":"&nLt;","":"&nrArr;","":"&nVDash;","":"&nVdash;",:"&nacute;","":"&nang;","":"&napE;","":"&napid;",:"&napos;","":"&natural;","":"&ncap;",:"&ncaron;",:"&ncedil;","":"&ncongdot;","":"&ncup;",:"&ncy;","":"&ndash;","":"&neArr;","":"&nearhk;","":"&nedot;","":"&toea;",:"&nfr;","":"&nleftrightarrow;","":"&nhpar;","":"&nis;","":"&nisd;",:"&njcy;","":"&nleqq;","":"&nleftarrow;","":"&nldr;",:"&nopf;","\xac":"&not;","":"&notinE;","":"&notindot;","":"&notinvb;","":"&notinvc;","":"&notnivb;","":"&notnivc;","":"&nparsl;","":"&npart;","":"&npolint;","":"&nrightarrow;","":"&nrarrc;","":"&nrarrw;",:"&nscr;","":"&nsub;","":"&nsubseteqq;","":"&nsup;","":"&nsupseteqq;",:"&ntilde;",:"&nu;","#":"&num;","":"&numero;","":"&numsp;","":"&nvDash;","":"&nvHarr;","":"&nvap;","":"&nvdash;","":"&nvge;",">":"&nvgt;","":"&nvinfin;","":"&nvlArr;","":"&nvle;","<":"&nvlt;","":"&nvltrie;","":"&nvrArr;","":"&nvrtrie;","":"&nvsim;","":"&nwArr;","":"&nwarhk;","":"&nwnear;",:"&oacute;",:"&ocirc;",:"&ocy;",:"&odblac;","":"&odiv;","":"&odsold;",:"&oelig;","":"&ofcir;",:"&ofr;","":"&ogon;",:"&ograve;","":"&ogt;","":"&ohbar;","":"&olcir;","":"&olcross;","":"&olt;",:"&omacr;",:"&omega;",:"&omicron;","":"&omid;",:"&oopf;","":"&opar;","":"&operp;","":"&vee;","":"&ord;",:"&oscr;",:"&ordf;",:"&ordm;","":"&origof;","":"&oror;","":"&orslope;","":"&orv;",:"&oslash;","":"&osol;",:"&otilde;","":"&otimesas;",:"&ouml;","":"&ovbar;","\xb6":"&para;","":"&parsim;","":"&parsl;",:"&pcy;","%":"&percnt;",".":"&period;","":"&permil;","":"&pertenk;",:"&pfr;",:"&phi;",:"&varphi;","":"&phone;",:"&pi;",:"&varpi;",:"&planckh;","+":"&plus;","":"&plusacir;","":"&pluscir;","":"&plusdu;","":"&pluse;","":"&plussim;","":"&plustwo;","":"&pointint;",:"&popf;","\xa3":"&pound;","":"&prE;","":"&precapprox;","":"&prnap;","":"&prnE;","":"&prnsim;","":"&prime;","":"&profalar;","":"&profline;","":"&profsurf;","":"&prurel;",:"&pscr;",:"&psi;","":"&puncsp;",:"&qfr;",:"&qopf;","":"&qprime;",:"&qscr;","":"&quatint;","?":"&quest;","":"&rAtail;","":"&rHar;","":"&race;",:"&racute;","":"&raemptyv;","":"&rangd;","":"&range;","\xbb":"&raquo;","":"&rarrap;","":"&rarrbfs;","":"&rarrc;","":"&rarrfs;","":"&rarrpl;","":"&rarrsim;","":"&rightarrowtail;","":"&rightsquigarrow;","":"&ratail;","":"&ratio;","":"&rbbrk;","}":"&rcub;","]":"&rsqb;","":"&rbrke;","":"&rbrksld;","":"&rbrkslu;",:"&rcaron;",:"&rcedil;",:"&rcy;","":"&rdca;","":"&rdldhar;","":"&rdsh;","":"&rect;","":"&rfisht;",:"&rfr;","":"&rharul;",:"&rho;",:"&varrho;","":"&rrarr;","":"&rthree;","":"&ring;","":"&rlm;","":"&rmoustache;","":"&rnmid;","":"&roang;","":"&roarr;","":"&ropar;",:"&ropf;","":"&roplus;","":"&rotimes;",")":"&rpar;","":"&rpargt;","":"&rppolint;","":"&rsaquo;",:"&rscr;","":"&rtimes;","":"&triangleright;","":"&rtriltri;","":"&ruluhar;","":"&rx;",:"&sacute;","":"&scE;","":"&succapprox;",:"&scaron;",:"&scedil;",:"&scirc;","":"&succneqq;","":"&succnapprox;","":"&succnsim;","":"&scpolint;",:"&scy;","":"&sdot;","":"&sdote;","":"&seArr;","\xa7":"&sect;",";":"&semi;","":"&tosa;","":"&sext;",:"&sfr;","":"&sharp;",:"&shchcy;",:"&shcy;","\xad":"&shy;",:"&sigma;",:"&varsigma;","":"&simdot;","":"&simg;","":"&simgE;","":"&siml;","":"&simlE;","":"&simne;","":"&simplus;","":"&simrarr;","":"&smashp;","":"&smeparsl;","":"&ssmile;","":"&smt;","":"&smte;","":"&smtes;",:"&softcy;","/":"&sol;","":"&solb;","":"&solbar;",:"&sopf;","":"&spadesuit;","":"&sqcaps;","":"&sqcups;",:"&sscr;","":"&star;","":"&subset;","":"&subseteqq;","":"&subdot;","":"&subedot;","":"&submult;","":"&subsetneqq;","":"&subsetneq;","":"&subplus;","":"&subrarr;","":"&subsim;","":"&subsub;","":"&subsup;","":"&sung;","\xb9":"&sup1;","\xb2":"&sup2;","\xb3":"&sup3;","":"&supseteqq;","":"&supdot;","":"&supdsub;","":"&supedot;","":"&suphsol;","":"&suphsub;","":"&suplarr;","":"&supmult;","":"&supsetneqq;","":"&supsetneq;","":"&supplus;","":"&supsim;","":"&supsub;","":"&supsup;","":"&swArr;","":"&swnwar;",:"&szlig;","":"&target;",:"&tau;",:"&tcaron;",:"&tcedil;",:"&tcy;","":"&telrec;",:"&tfr;",:"&theta;",:"&vartheta;",:"&thorn;","\xd7":"&times;","":"&timesbar;","":"&timesd;","":"&topbot;","":"&topcir;",:"&topf;","":"&topfork;","":"&tprime;","":"&utri;","":"&trie;","":"&tridot;","":"&triminus;","":"&triplus;","":"&trisb;","":"&tritime;","":"&trpezium;",:"&tscr;",:"&tscy;",:"&tshcy;",:"&tstrok;","":"&uHar;",:"&uacute;",:"&ubrcy;",:"&ubreve;",:"&ucirc;",:"&ucy;",:"&udblac;","":"&ufisht;",:"&ufr;",:"&ugrave;","":"&uhblk;","":"&ulcorner;","":"&ulcrop;","":"&ultri;",:"&umacr;",:"&uogon;",:"&uopf;",:"&upsilon;","":"&uuarr;","":"&urcorner;","":"&urcrop;",:"&uring;","":"&urtri;",:"&uscr;","":"&utdot;",:"&utilde;",:"&uuml;","":"&uwangle;","":"&vBar;","":"&vBarv;","":"&vangrt;","":"&vsubne;","":"&vsubnE;","":"&vsupne;","":"&vsupnE;",:"&vcy;","":"&veebar;","":"&veeeq;","":"&vellip;",:"&vfr;",:"&vopf;",:"&vscr;","":"&vzigzag;",:"&wcirc;","":"&wedbar;","":"&wedgeq;",:"&wp;",:"&wfr;",:"&wopf;",:"&wscr;",:"&xfr;",:"&xi;","":"&xnis;",:"&xopf;",:"&xscr;",:"&yacute;",:"&yacy;",:"&ycirc;",:"&ycy;","\xa5":"&yen;",:"&yfr;",:"&yicy;",:"&yopf;",:"&yscr;",:"&yucy;",:"&yuml;",:"&zacute;",:"&zcaron;",:"&zcy;",:"&zdot;",:"&zeta;",:"&zfr;",:"&zhcy;","":"&zigrarr;",:"&zopf;",:"&zscr;","":"&zwj;","":"&zwnj;"}}}},92642:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.numericUnicodeMap={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376}},59726:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fromCodePoint=String.fromCodePoint||function(e){return String.fromCharCode(Math.floor((e-65536)/1024)+55296,(e-65536)%1024+56320)},t.getCodePoint=String.prototype.codePointAt?function(e,t){return e.codePointAt(t)}:function(e,t){return(e.charCodeAt(t)-55296)*1024+e.charCodeAt(t+1)-56320+65536},t.highSurrogateFrom=55296,t.highSurrogateTo=56319},74449:function(e){"use strict";async function*t(e,t={}){let r=e.getReader();try{for(;;){let n=await r.read();if(n.done)return;yield n.value}}finally{!0!==t.preventCancel&&r.cancel(),r.releaseLock()}}e.exports=t},106:function(e,t,r){"use strict";var n=r(34155);let i=r(37643),s="object"==typeof window&&"object"==typeof document&&9===document.nodeType,a=i(),o=void 0!==n&&void 0!==n.release&&"node"===n.release.name&&!a,l="function"==typeof importScripts&&"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,c=void 0!==n&&void 0!==n.env&&!1,u="undefined"!=typeof navigator&&"ReactNative"===navigator.product;e.exports={isTest:c,isElectron:a,isElectronMain:a&&!s,isElectronRenderer:a&&s,isNode:o,isBrowser:s&&!a,isWebWorker:l,isEnvWithDom:s,isReactNative:u}},38688:function(e,t,r){"use strict";e.exports=r(30700)},46953:function(e,t,r){"use strict";let n=r(67137),i=(e,t)=>({path:decodeURIComponent(new URL(e).pathname.split("/").pop()||""),content:s(e,t)});async function*s(e,t){let r=new n,i=await r.get(e,t);yield*i.iterator()}e.exports=i},67137:function(e,t,r){"use strict";let{fetch:n,Request:i,Headers:s}=r(50730),{TimeoutError:a,HTTPError:o}=r(44171),l=r(70942).bind({ignoreUndefined:!0}),{URL:c,URLSearchParams:u}=r(17745),d=r(32044),p=r(74449),{isBrowser:h,isWebWorker:f}=r(106),m=r(31303),g=(e,t,r)=>{if(void 0===t)return e;let n=Date.now(),i=()=>{let e=Date.now()-n;return e>=t};return new Promise((n,s)=>{let o=setTimeout(()=>{i()&&(s(new a),r.abort())},t),l=e=>{let t=t=>{if(clearTimeout(o),i()){s(new a);return}e(t)};return t};e.then(l(n),l(s))})},y={throwHttpErrors:!0,credentials:"same-origin"};class v{constructor(e={}){this.opts=l(y,e)}async fetch(e,t={}){let r=l(this.opts,t),a=new s(r.headers);if("string"!=typeof e&&!(e instanceof c||e instanceof i))throw TypeError("`resource` must be a string, URL, or Request");let y=new c(e.toString(),r.base),{searchParams:v,transformSearchParams:_,json:x}=r;v&&("function"==typeof _?y.search=_(new u(r.searchParams)):y.search=new u(r.searchParams)),x&&(r.body=JSON.stringify(r.json),a.set("content-type","application/json"));let S=new AbortController,T=d([S.signal,r.signal]);null!=globalThis.ReadableStream&&r.body instanceof globalThis.ReadableStream&&(h||f)&&(r.body=new Blob(await m(p(r.body))));let E=await g(n(y.toString(),{...r,signal:T,timeout:void 0,headers:a,duplex:"half"}),r.timeout,S);if(!E.ok&&r.throwHttpErrors)throw r.handleError&&await r.handleError(E),new o(E);return E.iterator=async function*(){yield*w(E.body)},E.ndjson=async function*(){for await(let e of b(E.iterator()))t.transform?yield t.transform(e):yield e},E}post(e,t={}){return this.fetch(e,{...t,method:"POST"})}get(e,t={}){return this.fetch(e,{...t,method:"GET"})}put(e,t={}){return this.fetch(e,{...t,method:"PUT"})}delete(e,t={}){return this.fetch(e,{...t,method:"DELETE"})}options(e,t={}){return this.fetch(e,{...t,method:"OPTIONS"})}}let b=async function*(e){let t=new TextDecoder,r="";for await(let n of e){r+=t.decode(n,{stream:!0});let i=r.split(/\r?\n/);for(let s=0;s<i.length-1;s++){let a=i[s].trim();a.length>0&&(yield JSON.parse(a))}r=i[i.length-1]}r+=t.decode(),0!==(r=r.trim()).length&&(yield JSON.parse(r))},w=e=>{if(_(e))return e;if(S(e)){let t=e[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:t.next.bind(t),return:r=>(e.destroy(),"function"==typeof t.return)?t.return():Promise.resolve({done:!0,value:r})})}}if(x(e)){let r=e.getReader();return async function*(){try{for(;;){let{done:e,value:t}=await r.read();if(e)return;t&&(yield t)}}finally{r.releaseLock()}}()}throw TypeError("Body can't be converted to AsyncIterable")},_=e=>"object"==typeof e&&null!==e&&"function"==typeof e[Symbol.asyncIterator],x=e=>e&&"function"==typeof e.getReader,S=e=>Object.prototype.hasOwnProperty.call(e,"readable")&&Object.prototype.hasOwnProperty.call(e,"writable");v.HTTPError=o,v.TimeoutError=a,v.streamToAsyncIterator=w,v.post=(e,t)=>new v(t).post(e,t),v.get=(e,t)=>new v(t).get(e,t),v.put=(e,t)=>new v(t).put(e,t),v.delete=(e,t)=>new v(t).delete(e,t),v.options=(e,t)=>new v(t).options(e,t),e.exports=v},44171:function(e,t){"use strict";t.TimeoutError=class extends Error{constructor(e="Request timed out"){super(e),this.name="TimeoutError"}},t.AbortError=class extends Error{constructor(e="The operation was aborted."){super(e),this.name="AbortError"}},t.HTTPError=class extends Error{constructor(e){super(e.statusText),this.name="HTTPError",this.response=e}}},50730:function(e,t,r){"use strict";let{TimeoutError:n,AbortError:i}=r(44171),{Response:s,Request:a,Headers:o,default:l}=r(38688),c=(e,t={})=>{let r=new XMLHttpRequest;r.open(t.method||"GET",e.toString(),!0);let{timeout:a,headers:l}=t;if(a&&a>0&&a<1/0&&(r.timeout=a),null!=t.overrideMimeType&&r.overrideMimeType(t.overrideMimeType),l)for(let[c,u]of new o(l))r.setRequestHeader(c,u);return t.signal&&(t.signal.onabort=()=>r.abort()),t.onUploadProgress&&(r.upload.onprogress=t.onUploadProgress),r.responseType="arraybuffer",new Promise((e,a)=>{let o=t=>{switch(t.type){case"error":e(s.error());break;case"load":e(new p(r.responseURL,r.response,{status:r.status,statusText:r.statusText,headers:d(r.getAllResponseHeaders())}));break;case"timeout":a(new n);break;case"abort":a(new i)}};r.onerror=o,r.onload=o,r.ontimeout=o,r.onabort=o,r.send(t.body)})},u=(e,t={})=>null!=t.onUploadProgress?c(e,t):l(e,t),d=e=>{let t=new o;for(let r of e.trim().split(/[\r\n]+/)){let n=r.indexOf(": ");n>0&&t.set(r.slice(0,n),r.slice(n+1))}return t};class p extends s{constructor(e,t,r){super(t,r),Object.defineProperty(this,"url",{value:e})}}e.exports={fetch:u,Request:a,Headers:o}},37643:function(e,t,r){var n=r(34155);e.exports=function(){return!!("undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||void 0!==n&&"object"==typeof n.versions&&n.versions.electron||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}},33310:function(e){"use strict";e.exports=e=>{if("[object Object]"!==Object.prototype.toString.call(e))return!1;let t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}},17745:function(e,t,r){"use strict";let{URLWithLegacySupport:n,format:i,URLSearchParams:s,defaultBase:a}=r(82049),o=r(15939);e.exports={URL:n,URLSearchParams:s,format:i,relative:o,defaultBase:a}},15939:function(e,t,r){"use strict";let{URLWithLegacySupport:n,format:i}=r(82049);e.exports=(e,t={},r={},s)=>{let a,o=t.protocol?t.protocol.replace(":",""):"http";o=(r[o]||s||o)+":";try{a=new n(e)}catch(l){a={}}let c=Object.assign({},t,{protocol:o||a.protocol,host:t.host||a.host});return new n(e,i(c)).toString()}},82049:function(e){"use strict";let t="undefined"!=typeof navigator&&"ReactNative"===navigator.product,r=self.URL,n=t?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:"";e.exports={URLWithLegacySupport:class{constructor(e="",t=n){this.super=new r(e,t),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return r.createObjectURL(e)}static revokeObjectURL(e){r.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}},URLSearchParams:self.URLSearchParams,defaultBase:n,format:function(e){if("string"==typeof e){let t=new r(e);return t.toString()}if(!(e instanceof r)){let n=e.username&&e.password?`${e.username}:${e.password}@`:"",i=e.auth?e.auth+"@":"",s=e.port?":"+e.port:"",a=e.protocol?e.protocol+"//":"",o=e.host||"",l=e.hostname||"",c=e.search||(e.query?"?"+e.query:""),u=e.hash||"",d=e.pathname||"",p=e.path||d+c;return`${a}${n||i}${o||l+s}${p}${u}`}}}},31303:function(e){"use strict";let t=async e=>{let t=[];for await(let r of e)t.push(r);return t};e.exports=t},32998:function(e,t,r){"use strict";let n=r(34556);e.exports=n},34556:function(e,t){"use strict";let r={},n={},i={},s={},a={},o={},l={},c={},u={},d={},p={},h={},f={},m={},g={},y={},v={},b={},w={},_={},x={},S={},T={},E={},C={},k={},R={},P={},D={},A={},N={},L={},O={},I={},M={};function j(e){let t=new URLSearchParams;t.append("code",e);for(let r=1;r<arguments.length;r++)t.append("v",arguments[r]);throw Error(`Minified Lexical error #${e}; visit https://lexical.dev/docs/error?${t} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}let F="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,$=F&&"documentMode"in document?document.documentMode:null,B=F&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),U=F&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),q=!!(F&&"InputEvent"in window)&&!$&&"getTargetRanges"in new window.InputEvent("input"),z=F&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),V=F&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,H=F&&/^(?=.*Chrome).*/i.test(navigator.userAgent),W=F&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!H,Z=z||V||W?"\xa0":"",K=U?"\xa0":Z,G=/^[^A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]*[\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]/,Y=/^[^\u0591-\u07ff\ufb1d-\ufdfd\ufe70-\ufefc]*[A-Za-z\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02b8\u0300-\u0590\u0800-\u1fff\u200e\u2c00-\ufb1c\ufe00-\ufe6f\ufefd-\uffff]/,J={bold:1,code:16,highlight:128,italic:2,strikethrough:4,subscript:32,superscript:64,underline:8},Q={directionless:1,unmergeable:2},X={center:2,end:6,justify:4,left:1,right:3,start:5},ee={2:"center",6:"end",4:"justify",1:"left",3:"right",5:"start"},et={normal:0,segmented:2,token:1},er={0:"normal",2:"segmented",1:"token"},en=!1,ei=0;function es(e){ei=e.timeStamp}function ea(e,t,r){return t.__lexicalLineBreak===e||void 0!==e[`__lexicalKey_${r._key}`]}function eo(e,t,r){en=!0;let n=100<performance.now()-ei;try{r2(e,()=>{let i=rA()||e.getEditorState().read(()=>{let e=rA();return null!==e?e.clone():null});var s=new Map,a=e.getRootElement(),o=e._editorState,l=e._blockCursorElement;let c=!1,u="";for(var d=0;d<t.length;d++){var p=t[d],h=p.type,f=p.target,m=eA(f,o);if(!(null===m&&f!==a||r4(m))){if("characterData"===h){if(p=n&&ra(m))e:{p=i,h=f;var g=m;if(rm(p)){var y=p.anchor.getNode();if(y.is(g)&&p.format!==y.getFormat()){p=!1;break e}}p=3===h.nodeType&&g.isAttached()}p&&(g=e3(e._window),h=p=null,null!==g&&g.anchorNode===f&&(p=g.anchorOffset,h=g.focusOffset),f=f.nodeValue,null!==f&&eU(m,f,p,h,!1))}else if("childList"===h){for(g=0,c=!0,h=p.addedNodes;g<h.length;g++){y=h[g];var v=eD(y),b=y.parentNode;null==b||y===l||null!==v||"BR"===y.nodeName&&ea(y,b,e)||(U&&(v=y.innerText||y.nodeValue)&&(u+=v),b.removeChild(y))}if(h=(p=p.removedNodes).length,0<h){for(y=0,g=0;y<h;y++)b=p[y],("BR"===b.nodeName&&ea(b,f,e)||l===b)&&(f.appendChild(b),g++);h!==g&&(f===a&&(m=o._nodeMap.get("root")),s.set(f,m))}}}}if(0<s.size)for(let[w,_]of s)if(r3(_))for(s=_.getChildrenKeys(),a=w.firstChild,o=0;o<s.length;o++)l=e.getElementByKey(s[o]),null!==l&&(null==a?(w.appendChild(l),a=l):a!==l&&w.replaceChild(l,a),a=a.nextSibling);else ra(_)&&_.markDirty();if(s=r.takeRecords(),0<s.length){for(a=0;a<s.length;a++)for(o=(l=s[a]).addedNodes,l=l.target,d=0;d<o.length;d++)f=(m=o[d]).parentNode,null==f||"BR"!==m.nodeName||ea(m,l,e)||f.removeChild(m);r.takeRecords()}null!==i&&(c&&(i.dirty=!0,eI(i)),U&&eZ(e)&&i.insertRawText(u))})}finally{en=!1}}function el(e){let t=e._observer;null!==t&&eo(e,t.takeRecords(),t)}function ec(e){0===ei&&eQ(e).addEventListener("textInput",es,!0),e._observer=new MutationObserver((t,r)=>{eo(e,t,r)})}function eu(e,t){let r=e.__mode,n=e.__format;e=e.__style;let i=t.__mode,s=t.__format;return t=t.__style,(null===r||r===i)&&(null===n||n===s)&&(null===e||e===t)}function ed(e,t){let r=e.mergeWithSibling(t),n=rZ()._normalizedNodes;return n.add(e.__key),n.add(t.__key),r}function ep(e){if(""===e.__text&&e.isSimpleText()&&!e.isUnmergeable())e.remove();else{for(var t,r;null!==(t=e.getPreviousSibling())&&ra(t)&&t.isSimpleText()&&!t.isUnmergeable();)if(""===t.__text)t.remove();else{eu(t,e)&&(e=ed(t,e));break}for(;null!==(r=e.getNextSibling())&&ra(r)&&r.isSimpleText()&&!r.isUnmergeable();)if(""===r.__text)r.remove();else{eu(e,r)&&ed(e,r);break}}}function eh(e){return ef(e.anchor),ef(e.focus),e}function ef(e){for(;"element"===e.type;){var t=e.getNode(),r=e.offset;if(r===t.getChildrenSize()?(t=t.getChildAtIndex(r-1),r=!0):(t=t.getChildAtIndex(r),r=!1),ra(t)){e.set(t.__key,r?t.getTextContentSize():0,"text");break}if(!r3(t))break;e.set(t.__key,r?t.getChildrenSize():0,"element")}}let em=1,eg="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)};function ey(e){let t=document.activeElement;if(null===t)return!1;let r=t.nodeName;return r4(eA(e))&&("INPUT"===r||"TEXTAREA"===r||"true"===t.contentEditable&&null==t.__lexicalEditor)}function ev(e,t,r){let n=e.getRootElement();try{return null!==n&&n.contains(t)&&n.contains(r)&&null!==t&&!ey(t)&&eb(t)===e}catch(i){return!1}}function eb(e){for(;null!=e;){let t=e.__lexicalEditor;if(null!=t)return t;e=eY(e)}return null}function ew(e){return e.isToken()||e.isSegmented()}function e_(e){for(;null!=e;){if(3===e.nodeType)return e;e=e.firstChild}return null}function ex(e,t,r){return e&(t=J[t])&&(null===r||0==(r&t))?e^t:null===r||r&t?e|t:e}function eS(e){return ra(e)||t0(e)||r4(e)}function eT(e,t){if(null!=t)e.__key=t;else{rH(),99<rq&&j(14),t=rZ();var r=rW(),n=""+em++;r._nodeMap.set(n,e),r3(e)?t._dirtyElements.set(n,!0):t._dirtyLeaves.add(n),t._cloneNotNeeded.add(n),t._dirtyType=1,e.__key=n}}function eE(e){var t=e.getParent();if(null!==t){let r=e.getWritable();t=t.getWritable();var n=e.getPreviousSibling();if(e=e.getNextSibling(),null===n){if(null!==e){var i=e.getWritable();t.__first=e.__key,i.__prev=null}else t.__first=null}else{if(i=n.getWritable(),null!==e){let s=e.getWritable();s.__prev=i.__key,i.__next=s.__key}else i.__next=null;r.__prev=null}null===e?null!==n?(e=n.getWritable(),t.__last=n.__key,e.__next=null):t.__last=null:(e=e.getWritable(),null!==n?((n=n.getWritable()).__next=e.__key,e.__prev=n.__key):e.__prev=null,r.__next=null),t.__size--,r.__parent=null}}function eC(e){99<rq&&j(14);var t=e.getLatest(),r=t.__parent,n=rW();let i=rZ(),s=n._nodeMap;if(n=i._dirtyElements,null!==r)e:for(;null!==r;){if(n.has(r))break e;let a=s.get(r);if(void 0===a)break;n.set(r,!1),r=a.__parent}t=t.__key,i._dirtyType=1,r3(e)?n.set(t,!0):i._dirtyLeaves.add(t)}function ek(e){rH();var t=rZ();let r=t._compositionKey;e!==r&&(t._compositionKey=e,null!==r&&null!==(t=eP(r))&&t.getWritable(),null!==e&&null!==(e=eP(e))&&e.getWritable())}function eR(){return rV()?null:rZ()._compositionKey}function eP(e,t){return void 0===(e=(t||rW())._nodeMap.get(e))?null:e}function eD(e,t){return void 0!==(e=e[`__lexicalKey_${rZ()._key}`])?eP(e,t):null}function eA(e,t){for(;null!=e;){let r=eD(e,t);if(null!==r)return r;e=eY(e)}return null}function eN(e){let t=Object.assign({},e._decorators);return e._pendingDecorators=t}function eL(e){return e.read(()=>eO().getTextContent())}function eO(){return rW()._nodeMap.get("root")}function eI(e){rH();let t=rW();null!==e&&(e.dirty=!0,e._cachedNodes=null),t._selection=e}function eM(e){var t,r=rZ();e:{for(t=e;null!=t;){let n=t[`__lexicalKey_${r._key}`];if(void 0!==n){t=n;break e}t=eY(t)}t=null}return null===t?e===(r=r.getRootElement())?eP("root"):null:eP(t)}function ej(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function eF(e){let t=[];for(;null!==e;)t.push(e),e=e._parentEditor;return t}function e$(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,5)}function eB(e,t,r){if(null!==(t=e3(t._window))){var n=t.anchorNode,{anchorOffset:i,focusOffset:s}=t;if(null!==n&&(t=3===n.nodeType?n.nodeValue:null,n=eA(n),null!==t&&ra(n))){if(t===Z&&r){let a=r.length;t=r,s=i=a}null!==t&&eU(n,t,i,s,e)}}}function eU(e,t,r,n,i){let s=e;if(s.isAttached()&&(i||!s.isDirty())){let a=s.isComposing(),o=t;if((a||i)&&t[t.length-1]===Z&&(o=t.slice(0,-1)),t=s.getTextContent(),i||o!==t){if(""===o){if(ek(null),z||V||W)s.remove();else{let l=rZ();setTimeout(()=>{l.update(()=>{s.isAttached()&&s.remove()})},20)}}else{i=s.getParent(),t=rN();var c=s.getTextContentSize(),u=eR(),d=s.getKey();s.isToken()||null!==u&&d===u&&!a||rm(t)&&(null!==i&&!i.canInsertTextBefore()&&0===t.anchor.offset||t.anchor.key===e.__key&&0===t.anchor.offset&&!s.canInsertTextBefore()||t.focus.key===e.__key&&t.focus.offset===c&&!s.canInsertTextAfter())?s.markDirty():(rm(e=rA())&&null!==r&&null!==n&&(e.setTextNodeRange(s,r,s,n),s.isSegmented()&&(r=rs(r=s.getTextContent()),s.replace(r),s=r)),s.setTextContent(o))}}}}function eq(){var e=eO();eI(eh(e=e.select(0,e.getChildrenSize())))}function ez(e,t){void 0===e.__lexicalClassNameCache&&(e.__lexicalClassNameCache={});let r=e.__lexicalClassNameCache,n=r[t];return void 0!==n?n:"string"==typeof(e=e[t])?(e=e.split(" "),r[t]=e):e}function eV(e,t,r,n,i){0!==r.size&&(r=n.__type,n=n.__key,void 0===(t=t.get(r))&&j(33,r),r=t.klass,void 0===(t=e.get(r))&&(t=new Map,e.set(r,t)),r="destroyed"===(e=t.get(n))&&"created"===i,(void 0===e||r)&&t.set(n,r?"updated":i))}function eH(e,t,r){let n=e.getParent(),i=r;return null!==n&&(t&&0===r?(i=e.getIndexWithinParent(),e=n):t||r!==e.getChildrenSize()||(i=e.getIndexWithinParent()+1,e=n)),e.getChildAtIndex(t?i-1:i)}function eW(e,t){var r=e.offset;return"element"===e.type?eH(e=e.getNode(),t,r):(e=e.getNode(),t&&0===r||!t&&r===e.getTextContentSize()?null===(r=t?e.getPreviousSibling():e.getNextSibling())?eH(e.getParentOrThrow(),t,e.getIndexWithinParent()+(t?0:1)):r:null)}function eZ(e){return"insertFromPaste"===(e=(e=eQ(e).event)&&e.inputType)||"insertFromPasteAsQuotation"===e}function eK(e){return!r7(e)&&!e.isLastChild()&&!e.isInline()}function eG(e,t){return void 0===(e=e._keyToDOMMap.get(t))&&j(75,t),e}function eY(e){return null!==(e=e.assignedSlot||e.parentElement)&&11===e.nodeType?e.host:e}function eJ(e,t){for(e=e.getParent();null!==e;){if(e.is(t))return!0;e=e.getParent()}return!1}function eQ(e){return null===(e=e._window)&&j(78),e}function eX(e){for(e=e.getParentOrThrow();null!==e&&!e0(e);)e=e.getParentOrThrow();return e}function e0(e){return r7(e)||r3(e)&&e.isShadowRoot()}function e1(e){return eT(e=e.constructor.clone(e),null),e}function e2(e){var t=rZ();let r=e.constructor.getType();return void 0===(t=t._nodes.get(r))&&j(97),null!==(t=t.replace)?((t=t(e))instanceof e.constructor||j(98),t):e}function e5(e,t){!r7(e=e.getParent())||r3(t)||r4(t)||j(99)}function e4(e){return(r4(e)||r3(e)&&!e.canBeEmpty())&&!e.isInline()}function e6(e,t,r){r.style.removeProperty("caret-color"),t._blockCursorElement=null,null!==(t=e.parentElement)&&t.removeChild(e)}function e3(e){return F?(e||window).getSelection():null}function e8(e,t){let r=e.getChildAtIndex(t);null==r&&(r=e),e0(e)&&j(102);let n=e=>{let t=e.getParentOrThrow(),i=e0(t),s=e!==r||i?e1(e):e;if(i)return e.insertAfter(s),[e,s,s];let[a,o,l]=n(t);return e=e.getNextSiblings(),l.append(s,...e),[a,o,s]},[i,s]=n(r);return[i,s]}function e9(e,t){for(;e!==eO()&&null!=e;){if(t(e))return e;e=e.getParent()}return null}let e7="",te="",tt="",tr,tn,ti,ts=!1,ta=!1,to,tl=null,tc,tu,td,tp,th,tf;function tm(e,t){let r=td.get(e);if(null!==t){let n=tR(e);n.parentNode===t&&t.removeChild(n)}tp.has(e)||tn._keyToDOMMap.delete(e),r3(r)&&tg(e=tE(r,td),0,e.length-1,null),void 0!==r&&eV(tf,ti,to,r,"destroyed")}function tg(e,t,r,n){for(;t<=r;++t){let i=e[t];void 0!==i&&tm(i,n)}}function ty(e,t){e.setProperty("text-align",t)}function tv(e,t){var r=tr.theme.indent;if("string"==typeof r){let n=e.classList.contains(r);0<t&&!n?e.classList.add(r):1>t&&n&&e.classList.remove(r)}r=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||"40px",e.style.setProperty("padding-inline-start",0===t?"":`calc(${t} * ${r})`)}function tb(e,t){e=e.style,0===t?ty(e,""):1===t?ty(e,"left"):2===t?ty(e,"center"):3===t?ty(e,"right"):4===t?ty(e,"justify"):5===t?ty(e,"start"):6===t&&ty(e,"end")}function tw(e,t,r){let n=tp.get(e);void 0===n&&j(60);let i=n.createDOM(tr,tn);var s=tn._keyToDOMMap;if(i["__lexicalKey_"+tn._key]=e,s.set(e,i),ra(n)?i.setAttribute("data-lexical-text","true"):r4(n)&&i.setAttribute("data-lexical-decorator","true"),r3(n)){if(e=n.__indent,s=n.__size,0!==e&&tv(i,e),0!==s){--s;var a=te;te="",t_(e=tE(n,tp),n,0,s,i,null),tT(n,i),te=a}0!==(e=n.__format)&&tb(i,e),n.isInline()||tS(null,n,i),eK(n)&&(e7+="\n\n",tt+="\n\n")}else s=n.getTextContent(),r4(n)?(null!==(a=n.decorate(tn,tr))&&tC(e,a),i.contentEditable="false"):ra(n)&&(n.isDirectionless()||(te+=s)),e7+=s,tt+=s;return null!==t&&(null!=r?t.insertBefore(i,r):null!=(r=t.__lexicalLineBreak)?t.insertBefore(i,r):t.appendChild(i)),eV(tf,ti,to,n,"created"),i}function t_(e,t,r,n,i,s){let a=e7;for(e7="";r<=n;++r)tw(e[r],i,s);eK(t)&&(e7+="\n\n"),i.__lexicalTextContent=e7,e7=a+e7}function tx(e,t){return t0(e=t.get(e))||r4(e)&&e.isInline()}function tS(e,t,r){e=null!==e&&(0===e.__size||tx(e.__last,td)),t=0===t.__size||tx(t.__last,tp),e?t||(null!=(t=r.__lexicalLineBreak)&&r.removeChild(t),r.__lexicalLineBreak=null):t&&(t=document.createElement("br"),r.__lexicalLineBreak=t,r.appendChild(t))}function tT(e,t){var r=t.__lexicalDir;if(t.__lexicalDirTextContent!==te||r!==tl){let n=""===te;if(n)var i=tl;else i=te,i=G.test(i)?"rtl":Y.test(i)?"ltr":null;if(i!==r){let s=t.classList,a=tr.theme;var o=null!==r?a[r]:void 0;let l=null!==i?a[i]:void 0;void 0!==o&&("string"==typeof o&&(o=o.split(" "),o=a[r]=o),s.remove(...o)),null===i||n&&"ltr"===i?t.removeAttribute("dir"):(void 0!==l&&("string"==typeof l&&(r=l.split(" "),l=a[i]=r),void 0!==l&&s.add(...l)),t.dir=i),ta||(e.getWritable().__dir=i)}tl=i,t.__lexicalDirTextContent=te,t.__lexicalDir=i}}function tE(e,t){let r=[];for(e=e.__first;null!==e;){let n=t.get(e);void 0===n&&j(101),r.push(e),e=n.__next}return r}function tC(e,t){let r=tn._pendingDecorators,n=tn._decorators;if(null===r){if(n[e]===t)return;r=eN(tn)}r[e]=t}function tk(e){return null!==(e=e.nextSibling)&&e===tn._blockCursorElement&&(e=e.nextSibling),e}function tR(e){let t=th.get(e);return void 0===t&&j(75,e),t}let tP=Object.freeze({}),tD=[["keydown",function(e,t){if(tA=e.timeStamp,tN=e.keyCode,!t.isComposing()){var{keyCode:r,shiftKey:n,ctrlKey:a,metaKey:o,altKey:l}=e;if(!rX(t,m,e)){if(39!==r||a||o||l){if(39!==r||l||n||!a&&!o){if(37!==r||a||o||l){if(37!==r||l||n||!a&&!o){if(38!==r||a||o){if(40!==r||a||o){if(13===r&&n)tF=!0,rX(t,x,e);else if(32===r)rX(t,S,e);else if(B&&a&&79===r)e.preventDefault(),tF=!0,rX(t,s,!0);else if(13!==r||n){if(B?l||o?0:8===r||72===r&&a:a||l||o?0:8===r)8===r?rX(t,T,e):(e.preventDefault(),rX(t,i,!0));else if(27===r)rX(t,E,e);else if(B?n||l||o?0:46===r||68===r&&a:a||l||o?0:46===r)46===r?rX(t,C,e):(e.preventDefault(),rX(t,i,!1));else if(8===r&&(B?l:a))e.preventDefault(),rX(t,u,!0);else if(46===r&&(B?l:a))e.preventDefault(),rX(t,u,!1);else if(B&&o&&8===r)e.preventDefault(),rX(t,d,!0);else if(B&&o&&46===r)e.preventDefault(),rX(t,d,!1);else if(66===r&&!l&&(B?o:a))e.preventDefault(),rX(t,p,"bold");else if(85===r&&!l&&(B?o:a))e.preventDefault(),rX(t,p,"underline");else if(73===r&&!l&&(B?o:a))e.preventDefault(),rX(t,p,"italic");else if(9!==r||l||a||o){if(90===r&&!n&&(B?o:a))e.preventDefault(),rX(t,h,void 0);else{var c=B?90===r&&o&&n:89===r&&a||90===r&&a&&n;c?(e.preventDefault(),rX(t,f,void 0)):rb(t._editorState._selection)?(c=!n&&67===r&&(B?o:a))?(e.preventDefault(),rX(t,N,e)):(c=!n&&88===r&&(B?o:a))?(e.preventDefault(),rX(t,L,e)):65===r&&(B?o:a)&&(e.preventDefault(),t.update(()=>{eq()})):!U&&65===r&&(B?o:a)&&(e.preventDefault(),t.update(()=>{eq()}))}}else rX(t,k,e)}else tF=!1,rX(t,x,e)}else rX(t,_,e)}else rX(t,w,e)}else rX(t,b,e)}else rX(t,v,e)}else rX(t,y,e)}else rX(t,g,e);(a||n||l||o)&&rX(t,M,e)}}}],["pointerdown",function(e,t){let r=e.target;e=e.pointerType,r instanceof Node&&"touch"!==e&&r2(t,()=>{r4(eA(r))||(tj=!0)})}],["compositionstart",function(e,t){r2(t,()=>{let r=rA();if(rm(r)&&!t.isComposing()){let n=r.anchor,i=r.anchor.getNode();ek(n.key),(e.timeStamp<tA+30||"element"===n.type||!r.isCollapsed()||i.getFormat()!==r.format||i.getStyle()!==r.style)&&rX(t,o,K)}})}],["compositionend",function(e,t){U?t$=!0:r2(t,()=>{tH(t,e.data)})}],["input",function(e,t){e.stopPropagation(),r2(t,()=>{var r=rA(),n=e.data,i=tV(e);if(null!=n&&rm(r)&&tU(r,i,n,e.timeStamp,!1)){t$&&(tH(t,n),t$=!1);var s=r.anchor,a=s.getNode();if(null===(i=e3(t._window)))return;let l=s.offset;(s=q&&!r.isCollapsed()&&ra(a)&&null!==i.anchorNode)&&(s=(a=a.getTextContent().slice(0,l)+n+a.getTextContent().slice(l+r.focus.offset))===(3===(i=i.anchorNode).nodeType?i.nodeValue:null)),s||rX(t,o,n),n=n.length,U&&1<n&&"insertCompositionText"===e.inputType&&!t.isComposing()&&(r.anchor.offset-=n),z||V||W||!t.isComposing()||(tA=0,ek(null))}else eB(!1,t,null!==n?n:void 0),t$&&(tH(t,n||void 0),t$=!1);rH(),el(r=rZ())}),tO=null}],["click",function(e,t){r2(t,()=>{let r=rA();var i=e3(t._window);let s=rN();if(i){if(rm(r)){let a=r.anchor;var o=a.getNode();"element"===a.type&&0===a.offset&&r.isCollapsed()&&!r7(o)&&1===eO().getChildrenSize()&&o.getTopLevelElementOrThrow().isEmpty()&&null!==s&&r.is(s)?(i.removeAllRanges(),r.dirty=!0):3!==e.detail||r.isCollapsed()||o!==(i=r.focus.getNode())&&(r3(o)?o.select(0):o.getParentOrThrow().select(0))}else"touch"===e.pointerType&&null!==(o=i.anchorNode)&&(1===(o=o.nodeType)||3===o)&&eI(i=rD(s,i,t))}rX(t,n,e)})}],["cut",tP],["copy",tP],["dragstart",tP],["dragover",tP],["dragend",tP],["paste",tP],["focus",tP],["blur",tP],["drop",tP]];q&&tD.push(["beforeinput",(e,t)=>{let r,n;return r=e.inputType,n=tV(e),void("deleteCompositionText"===r||U&&eZ(t)||"insertCompositionText"!==r&&r2(t,()=>{let m=rA();if("deleteContentBackward"===r){if(null===m){var g=rN();if(!rm(g))return;eI(g.clone())}if(rm(m)){229===tN&&e.timeStamp<tA+30&&t.isComposing()&&m.anchor.key===m.focus.key?(ek(null),tA=0,setTimeout(()=>{r2(t,()=>{ek(null)})},30),rm(m)&&((g=m.anchor.getNode()).markDirty(),m.format=g.getFormat(),m.style=g.getStyle())):(e.preventDefault(),rX(t,i,!0));return}}if(rm(m)){g=e.data,null!==tO&&eB(!1,t,tO),m.dirty&&null===tO||!m.isCollapsed()||r7(m.anchor.getNode())||null===n||m.applyDOMRange(n),tO=null;var y,v=m.focus,b=m.anchor.getNode();if(v=v.getNode(),"insertText"===r||"insertTranspose"===r)"\n"===g?(e.preventDefault(),rX(t,s,!1)):"\n\n"===g?(e.preventDefault(),rX(t,a,void 0)):null==g&&e.dataTransfer?(g=e.dataTransfer.getData("text/plain"),e.preventDefault(),m.insertRawText(g)):null!=g&&tU(m,n,g,e.timeStamp,!0)?(e.preventDefault(),rX(t,o,g)):tO=g,tL=e.timeStamp;else switch(e.preventDefault(),r){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":rX(t,o,e);break;case"insertFromComposition":ek(null),rX(t,o,e);break;case"insertLineBreak":ek(null),rX(t,s,!1);break;case"insertParagraph":ek(null),tF&&!V?(tF=!1,rX(t,s,!1)):rX(t,a,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":rX(t,l,e);break;case"deleteByComposition":(b!==(y=v)||r3(b)||r3(y)||!b.isToken()||!y.isToken())&&rX(t,c,e);break;case"deleteByDrag":case"deleteByCut":rX(t,c,e);break;case"deleteContent":rX(t,i,!1);break;case"deleteWordBackward":rX(t,u,!0);break;case"deleteWordForward":rX(t,u,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":rX(t,d,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":rX(t,d,!1);break;case"formatStrikeThrough":rX(t,p,"strikethrough");break;case"formatBold":rX(t,p,"bold");break;case"formatItalic":rX(t,p,"italic");break;case"formatUnderline":rX(t,p,"underline");break;case"historyUndo":rX(t,h,void 0);break;case"historyRedo":rX(t,f,void 0)}}}))}]);let tA=0,tN=0,tL=0,tO=null,tI=0,tM=!1,tj=!1,tF=!1,t$=!1,tB=[0,"",0,"root",0];function tU(e,t,r,n,i){let s=e.anchor,a=e.focus,o=s.getNode();var l=rZ();let c=e3(l._window),u=null!==c?c.anchorNode:null,d=s.key;l=l.getElementByKey(d);let p=r.length;return d!==a.key||!ra(o)||(!i&&(!q||tL<n+50)||o.isDirty()&&2>p||ej(r))&&s.offset!==a.offset&&!o.isComposing()||ew(o)||o.isDirty()&&1<p||(i||!q)&&null!==l&&!o.isComposing()&&u!==e_(l)||null!==c&&null!==t&&(!t.collapsed||t.startContainer!==c.anchorNode||t.startOffset!==c.anchorOffset)||o.getFormat()!==e.format||o.getStyle()!==e.style||function(e,t){if(t.isSegmented())return!0;if(!e.isCollapsed())return!1;e=e.anchor.offset;let r=t.getParentOrThrow(),n=t.isToken();return 0===e?((e=!t.canInsertTextBefore()||!r.canInsertTextBefore()||n)||(e=(ra(t=t.getPreviousSibling())||r3(t)&&t.isInline())&&!t.canInsertTextAfter()),e):e===t.getTextContentSize()&&(!t.canInsertTextAfter()||!r.canInsertTextAfter()||n)}(e,o)}function tq(e,t){return null!==e&&null!==e.nodeValue&&3===e.nodeType&&0!==t&&t!==e.nodeValue.length}function tz(e,t,n){let{anchorNode:i,anchorOffset:s,focusNode:a,focusOffset:o}=e;tM&&(tM=!1,tq(i,s)&&tq(a,o))||r2(t,()=>{if(n){if(ev(t,i,a)){var s=rA();if(rm(s)){var o=s.anchor,l=o.getNode();if(s.isCollapsed()){"Range"===e.type&&e.anchorNode===e.focusNode&&(s.dirty=!0);var c=eQ(t).event;c=c?c.timeStamp:performance.now();let[u,d,p,h,f]=tB;c<f+200&&o.offset===p&&o.key===h?(s.format=u,s.style=d):"text"===o.type?(s.format=l.getFormat(),s.style=l.getStyle()):"element"===o.type&&(s.format=0,s.style="")}else{o=255,l=!1;let m=(c=s.getNodes()).length;for(let g=0;g<m;g++){let y=c[g];if(ra(y)&&(l=!0,0==(o&=y.getFormat())))break}s.format=l?o:0}}rX(t,r,void 0)}}else eI(null)})}function tV(e){return e.getTargetRanges?0===(e=e.getTargetRanges()).length?null:e[0]:null}function tH(e,t){var r=e._compositionKey;if(ek(null),null!==r&&null!=t){if(""===t){t=eP(r),null!==(e=e_(e.getElementByKey(r)))&&null!==e.nodeValue&&ra(t)&&eU(t,e.nodeValue,null,null,!0);return}if("\n"===t[t.length-1]&&rm(r=rA())){t=r.focus,r.anchor.set(t.key,t.offset,t.type),rX(e,x,null);return}}eB(!0,e,t)}function tW(e){let t=e.__lexicalEventHandles;return void 0===t&&(t=[],e.__lexicalEventHandles=t),t}let tZ=new Map;function tK(e){let t=e3(null==(e=e.target)?null:9===e.nodeType?e.defaultView:e.ownerDocument.defaultView);if(null!==t){var r=eb(t.anchorNode);if(null!==r){tj&&(tj=!1,r2(r,()=>{var e=rN(),n=t.anchorNode;null!==n&&(1===(n=n.nodeType)||3===n)&&eI(e=rD(e,t,r))}));var n=(e=(e=eF(r))[e.length-1])._key,i=tZ.get(n),s=i||e;s!==r&&tz(t,s,!1),tz(t,r,!0),r!==e?tZ.set(n,r):i&&tZ.delete(n)}}}function tG(e,t,r){rH();var n=e.__key;let i=e.getParent();if(null!==i){var s=rA();if(rm(s)&&r3(e)){var{anchor:a,focus:o}=s,l=a.getNode(),c=o.getNode();eJ(l,e)&&a.set(e.__key,0,"element"),eJ(c,e)&&o.set(e.__key,0,"element")}if(c=!1,rm(l=s)&&t){s=l.anchor;let u=l.focus;s.key===n&&(rI(s,e,i,e.getPreviousSibling(),e.getNextSibling()),c=!0),u.key===n&&(rI(u,e,i,e.getPreviousSibling(),e.getNextSibling()),c=!0)}else rb(l)&&t&&e.isSelected()&&e.selectPrevious();rm(l)&&t&&!c?(n=e.getIndexWithinParent(),eE(e),rL(l,i,n,-1)):eE(e),r||e0(i)||i.canBeEmpty()||!i.isEmpty()||tG(i,t),t&&r7(i)&&i.isEmpty()&&i.selectEnd()}}class tY{static getType(){j(64,this.name)}static clone(){j(65,this.name)}constructor(e){this.__type=this.constructor.getType(),this.__next=this.__prev=this.__parent=null,eT(this,e)}getType(){return this.__type}isAttached(){for(var e=this.__key;null!==e;){if("root"===e)return!0;if(null===(e=eP(e)))break;e=e.__parent}return!1}isSelected(e){if(null==(e=e||rA()))return!1;let t=e.getNodes().some(e=>e.__key===this.__key);return ra(this)?t:(!rm(e)||"element"!==e.anchor.type||"element"!==e.focus.type||e.anchor.key!==e.focus.key||e.anchor.offset!==e.focus.offset)&&t}getKey(){return this.__key}getIndexWithinParent(){var e=this.getParent();if(null===e)return -1;e=e.getFirstChild();let t=0;for(;null!==e;){if(this.is(e))return t;t++,e=e.getNextSibling()}return -1}getParent(){let e=this.getLatest().__parent;return null===e?null:eP(e)}getParentOrThrow(){let e=this.getParent();return null===e&&j(66,this.__key),e}getTopLevelElement(){let e=this;for(;null!==e;){let t=e.getParent();if(e0(t))return e;e=t}return null}getTopLevelElementOrThrow(){let e=this.getTopLevelElement();return null===e&&j(67,this.__key),e}getParents(){let e=[],t=this.getParent();for(;null!==t;)e.push(t),t=t.getParent();return e}getParentKeys(){let e=[],t=this.getParent();for(;null!==t;)e.push(t.__key),t=t.getParent();return e}getPreviousSibling(){let e=this.getLatest().__prev;return null===e?null:eP(e)}getPreviousSiblings(){let e=[];var t=this.getParent();if(null===t)return e;for(t=t.getFirstChild();null!==t&&!t.is(this);)e.push(t),t=t.getNextSibling();return e}getNextSibling(){let e=this.getLatest().__next;return null===e?null:eP(e)}getNextSiblings(){let e=[],t=this.getNextSibling();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getCommonAncestor(e){let t=this.getParents();var r=e.getParents();r3(this)&&t.unshift(this),r3(e)&&r.unshift(e),e=t.length;var n=r.length;if(0===e||0===n||t[e-1]!==r[n-1])return null;for(n=0,r=new Set(r);n<e;n++){let i=t[n];if(r.has(i))return i}return null}is(e){return null!=e&&this.__key===e.__key}isBefore(e){if(this===e)return!1;if(e.isParentOf(this))return!0;if(this.isParentOf(e))return!1;var t=this.getCommonAncestor(e);let r=this;for(;;){var n=r.getParentOrThrow();if(n===t){n=r.getIndexWithinParent();break}r=n}for(r=e;;){if((e=r.getParentOrThrow())===t){t=r.getIndexWithinParent();break}r=e}return n<t}isParentOf(e){let t=this.__key;if(t===e.__key)return!1;for(;null!==e;){if(e.__key===t)return!0;e=e.getParent()}return!1}getNodesBetween(e){let t=this.isBefore(e),r=[],n=new Set;for(var i=this;;){var s=i.__key;if(n.has(s)||(n.add(s),r.push(i)),i===e)break;if(null!==(s=r3(i)?t?i.getFirstChild():i.getLastChild():null))i=s;else if(null!==(s=t?i.getNextSibling():i.getPreviousSibling()))i=s;else{if(i=i.getParentOrThrow(),n.has(i.__key)||r.push(i),i===e)break;s=i;do null===s&&j(68),i=t?s.getNextSibling():s.getPreviousSibling(),null!==(s=s.getParent())&&(null!==i||n.has(s.__key)||r.push(s));while(null===i)}}return t||r.reverse(),r}isDirty(){let e=rZ()._dirtyLeaves;return null!==e&&e.has(this.__key)}getLatest(){let e=eP(this.__key);return null===e&&j(113),e}getWritable(){rH();var e=rW(),t=rZ();e=e._nodeMap;let r=this.__key,n=this.getLatest(),i=n.__parent;t=t._cloneNotNeeded;var s=rA();return(null!==s&&(s._cachedNodes=null),t.has(r))?(eC(n),n):((s=n.constructor.clone(n)).__parent=i,s.__next=n.__next,s.__prev=n.__prev,r3(n)&&r3(s)?(s.__first=n.__first,s.__last=n.__last,s.__size=n.__size,s.__indent=n.__indent,s.__format=n.__format,s.__dir=n.__dir):ra(n)&&ra(s)&&(s.__format=n.__format,s.__style=n.__style,s.__mode=n.__mode,s.__detail=n.__detail),t.add(r),s.__key=r,eC(s),e.set(r,s),s)}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(){j(70)}updateDOM(){j(71)}exportDOM(e){return{element:this.createDOM(e._config,e)}}exportJSON(){j(72)}static importJSON(){j(18,this.name)}static transform(){return null}remove(e){tG(this,!0,e)}replace(e,t){rH();var r=rA();null!==r&&(r=r.clone()),e5(this,e);let n=this.getLatest(),i=this.__key,s=e.__key,a=e.getWritable(),o=(e=this.getParentOrThrow().getWritable()).__size;eE(a);let l=n.getPreviousSibling(),c=n.getNextSibling(),u=n.__prev,d=n.__next,p=n.__parent;return tG(n,!1,!0),null===l?e.__first=s:l.getWritable().__next=s,a.__prev=u,null===c?e.__last=s:c.getWritable().__prev=s,a.__next=d,a.__parent=p,e.__size=o,t&&this.getChildren().forEach(e=>{a.append(e)}),rm(r)&&(eI(r),t=r.anchor,r=r.focus,t.key===i&&rd(t,a),r.key===i&&rd(r,a)),eR()===i&&ek(s),a}insertAfter(e,t=!0){rH(),e5(this,e);var r=this.getWritable();let n=e.getWritable();var i=n.getParent();let s=rA();var a=!1,o=!1;if(null!==i){var l=e.getIndexWithinParent();eE(n),rm(s)&&(o=i.__key,a=s.anchor,i=s.focus,a="element"===a.type&&a.key===o&&a.offset===l+1,o="element"===i.type&&i.key===o&&i.offset===l+1)}i=this.getNextSibling(),l=this.getParentOrThrow().getWritable();let c=n.__key,u=r.__next;return null===i?l.__last=c:i.getWritable().__prev=c,l.__size++,r.__next=c,n.__next=u,n.__prev=r.__key,n.__parent=r.__parent,t&&rm(s)&&(rL(s,l,(t=this.getIndexWithinParent())+1),r=l.__key,a&&s.anchor.set(r,t+2,"element"),o&&s.focus.set(r,t+2,"element")),e}insertBefore(e,t=!0){rH(),e5(this,e);var r=this.getWritable();let n=e.getWritable(),i=n.__key;eE(n);let s=this.getPreviousSibling(),a=this.getParentOrThrow().getWritable(),o=r.__prev,l=this.getIndexWithinParent();return null===s?a.__first=i:s.getWritable().__next=i,a.__size++,r.__prev=i,n.__prev=o,n.__next=r.__key,n.__parent=r.__parent,r=rA(),t&&rm(r)&&rL(r,t=this.getParentOrThrow(),l),e}isParentRequired(){return!1}createParentElementNode(){return ni()}selectPrevious(e,t){rH();let r=this.getPreviousSibling(),n=this.getParentOrThrow();return null===r?n.select(0,0):r3(r)?r.select():ra(r)?r.select(e,t):(e=r.getIndexWithinParent()+1,n.select(e,e))}selectNext(e,t){rH();let r=this.getNextSibling(),n=this.getParentOrThrow();return null===r?n.select():r3(r)?r.select(0,0):ra(r)?r.select(e,t):(e=r.getIndexWithinParent(),n.select(e,e))}markDirty(){this.getWritable()}}class tJ extends tY{static getType(){return"linebreak"}static clone(e){return new tJ(e.__key)}constructor(e){super(e)}getTextContent(){return"\n"}createDOM(){return document.createElement("br")}updateDOM(){return!1}static importDOM(){return{br:e=>{let t=e.parentElement,r,n;return null!==t&&((r=t.firstChild)===e||r.nextSibling===e&&3===r.nodeType&&null!==(r.textContent||"").match(/^[\s|\r?\n|\t]+$/))&&((n=t.lastChild)===e||n.previousSibling===e&&3===n.nodeType&&null!==(n.textContent||"").match(/^[\s|\r?\n|\t]+$/))?null:{conversion:tQ,priority:0}}}}static importJSON(){return tX()}exportJSON(){return{type:"linebreak",version:1}}}function tQ(){return{node:tX()}}function tX(){return e2(new tJ)}function t0(e){return e instanceof tJ}function t1(e,t){return 16&t?"code":128&t?"mark":32&t?"sub":64&t?"sup":null}function t2(e,t){return 1&t?"strong":2&t?"em":"span"}function t5(e,t,r,n,i){e=n.classList,void 0!==(n=ez(i,"base"))&&e.add(...n);let s=!1,a=8&t&&4&t;var o=8&r&&4&r;for(let l in void 0!==(n=ez(i,"underlineStrikethrough"))&&(o?(s=!0,a||e.add(...n)):a&&e.remove(...n)),J)o=J[l],void 0!==(n=ez(i,l))&&(r&o?s&&("underline"===l||"strikethrough"===l)?t&o&&e.remove(...n):(0==(t&o)||a&&"underline"===l||"strikethrough"===l)&&e.add(...n):t&o&&e.remove(...n))}function t4(e,t,r){let n=t.firstChild;if(e+=(r=r.isComposing())?Z:"",null==n)t.textContent=e;else if((t=n.nodeValue)!==e){if(r||U){r=t.length;let i=e.length,s=0,a=0;for(;s<r&&s<i&&t[s]===e[s];)s++;for(;a+s<r&&a+s<i&&t[r-a-1]===e[i-a-1];)a++;let[o,l,c]=e=[s,r-s-a,e.slice(s,i-a)];0!==l&&n.deleteData(o,l),n.insertData(o,c)}else n.nodeValue=e}}function t6(e,t){return(t=document.createElement(t)).appendChild(e),t}class t3 extends tY{static getType(){return"text"}static clone(e){return new t3(e.__text,e.__key)}constructor(e,t){super(t),this.__text=e,this.__format=0,this.__style="",this.__detail=this.__mode=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){return er[this.getLatest().__mode]}getStyle(){return this.getLatest().__style}isToken(){return 1===this.getLatest().__mode}isComposing(){return this.__key===eR()}isSegmented(){return 2===this.getLatest().__mode}isDirectionless(){return 0!=(1&this.getLatest().__detail)}isUnmergeable(){return 0!=(2&this.getLatest().__detail)}hasFormat(e){return e=J[e],0!=(this.getFormat()&e)}isSimpleText(){return"text"===this.__type&&0===this.__mode}getTextContent(){return this.getLatest().__text}getFormatFlags(e,t){return ex(this.getLatest().__format,e,t)}createDOM(e){var t=this.__format,r=t1(this,t);let n=t2(this,t),i=document.createElement(null===r?n:r),s=i;return null!==r&&(s=document.createElement(n),i.appendChild(s)),r=s,t4(this.__text,r,this),void 0!==(e=e.theme.text)&&t5(n,0,t,r,e),""!==(t=this.__style)&&(i.style.cssText=t),i}updateDOM(e,t,r){let n=this.__text;var i=e.__format,s=this.__format,a=t1(this,i);let o=t1(this,s);var l=t2(this,i);let c=t2(this,s);return(null===a?l:a)!==(null===o?c:o)||(a===o&&l!==c?(null==(i=t.firstChild)&&j(48),t4(n,e=a=document.createElement(c),this),void 0!==(r=r.theme.text)&&t5(c,0,s,e,r),t.replaceChild(a,i),!1):(l=t,null!==o&&null!==a&&null==(l=t.firstChild)&&j(49),t4(n,l,this),void 0!==(r=r.theme.text)&&i!==s&&t5(c,i,s,l,r),s=this.__style,e.__style!==s&&(t.style.cssText=s),!1))}static importDOM(){return{"#text":()=>({conversion:re,priority:0}),b:()=>({conversion:t9,priority:0}),code:()=>({conversion:ri,priority:0}),em:()=>({conversion:ri,priority:0}),i:()=>({conversion:ri,priority:0}),s:()=>({conversion:ri,priority:0}),span:()=>({conversion:t8,priority:0}),strong:()=>({conversion:ri,priority:0}),sub:()=>({conversion:ri,priority:0}),sup:()=>({conversion:ri,priority:0}),u:()=>({conversion:ri,priority:0})}}static importJSON(e){let t=rs(e.text);return t.setFormat(e.format),t.setDetail(e.detail),t.setMode(e.mode),t.setStyle(e.style),t}exportDOM(e){return{element:e}=super.exportDOM(e),null!==e&&(this.hasFormat("bold")&&(e=t6(e,"b")),this.hasFormat("italic")&&(e=t6(e,"i")),this.hasFormat("strikethrough")&&(e=t6(e,"s")),this.hasFormat("underline")&&(e=t6(e,"u"))),{element:e}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),type:"text",version:1}}selectionTransform(){}setFormat(e){let t=this.getWritable();return t.__format="string"==typeof e?J[e]:e,t}setDetail(e){let t=this.getWritable();return t.__detail="string"==typeof e?Q[e]:e,t}setStyle(e){let t=this.getWritable();return t.__style=e,t}toggleFormat(e){return e=J[e],this.setFormat(this.getFormat()^e)}toggleDirectionless(){let e=this.getWritable();return e.__detail^=1,e}toggleUnmergeable(){let e=this.getWritable();return e.__detail^=2,e}setMode(e){if(e=et[e],this.__mode===e)return this;let t=this.getWritable();return t.__mode=e,t}setTextContent(e){if(this.__text===e)return this;let t=this.getWritable();return t.__text=e,t}select(e,t){rH();let r=rA();var n=this.getTextContent();let i=this.__key;return("string"==typeof n?(n=n.length,void 0===e&&(e=n),void 0===t&&(t=n)):t=e=0,rm(r))?((n=eR())!==r.anchor.key&&n!==r.focus.key||ek(i),r.setTextNodeRange(this,e,this,t),r):rR(i,e,i,t,"text","text")}spliceText(e,t,r,n){let i=this.getWritable(),s=i.__text,a=r.length,o=e;0>o&&0>(o=a+o)&&(o=0);let l=rA();return n&&rm(l)&&(e+=a,l.setTextNodeRange(i,e,i,e)),t=s.slice(0,o)+r+s.slice(o+t),i.__text=t,i}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...e){rH();var t=this.getLatest(),r=t.getTextContent(),n=t.__key,i=eR(),s=new Set(e);e=[];for(var a=r.length,o="",l=0;l<a;l++)""!==o&&s.has(l)&&(e.push(o),o=""),o+=r[l];if(""!==o&&e.push(o),0===(s=e.length))return[];if(e[0]===r)return[t];var c=e[0];r=t.getParentOrThrow(),l=t.getFormat();let u=t.getStyle(),d=t.__detail;a=!1,t.isSegmented()?((o=rs(c)).__format=l,o.__style=u,o.__detail=d,a=!0):(o=t.getWritable()).__text=c,t=rA(),o=[o],c=c.length;for(let p=1;p<s;p++){var h=e[p],f=h.length;(h=rs(h).getWritable()).__format=l,h.__style=u,h.__detail=d;let m=h.__key;if(f=c+f,rm(t)){let g=t.anchor,y=t.focus;g.key===n&&"text"===g.type&&g.offset>c&&g.offset<=f&&(g.key=m,g.offset-=c,t.dirty=!0),y.key===n&&"text"===y.type&&y.offset>c&&y.offset<=f&&(y.key=m,y.offset-=c,t.dirty=!0)}i===n&&ek(m),c=f,o.push(h)}return n=this.getPreviousSibling(),i=this.getNextSibling(),null!==n&&eC(n),null!==i&&eC(i),n=r.getWritable(),i=this.getIndexWithinParent(),a?(n.splice(i,0,o),this.remove()):n.splice(i,1,o),rm(t)&&rL(t,r,i,s-1),o}mergeWithSibling(e){var t=e===this.getPreviousSibling();t||e===this.getNextSibling()||j(50);var r=this.__key;let n=e.__key,i=this.__text,s=i.length;eR()===n&&ek(r);let a=rA();if(rm(a)){let o=a.anchor,l=a.focus;null!==o&&o.key===n&&(rM(o,t,r,e,s),a.dirty=!0),null!==l&&l.key===n&&(rM(l,t,r,e,s),a.dirty=!0)}return r=e.__text,this.setTextContent(t?r+i:i+r),t=this.getWritable(),e.remove(),t}isTextEntity(){return!1}}function t8(e){let t="700"===e.style.fontWeight,r="line-through"===e.style.textDecoration,n="italic"===e.style.fontStyle,i="underline"===e.style.textDecoration,s=e.style.verticalAlign;return{forChild:e=>(ra(e)&&(t&&e.toggleFormat("bold"),r&&e.toggleFormat("strikethrough"),n&&e.toggleFormat("italic"),i&&e.toggleFormat("underline"),"sub"===s&&e.toggleFormat("subscript"),"super"===s&&e.toggleFormat("superscript")),e),node:null}}function t9(e){let t="normal"===e.style.fontWeight;return{forChild:e=>(ra(e)&&!t&&e.toggleFormat("bold"),e),node:null}}let t7=new WeakMap;function re(e){null===e.parentElement&&j(129);for(var t,r=e.textContent||"",n=e.parentNode,i=[e];null!==n&&void 0===(t=t7.get(n))&&!("PRE"===n.nodeName||1===n.nodeType&&n.style.whiteSpace.startsWith("pre"));)i.push(n),n=n.parentNode;for(t=void 0===t?n:t,n=0;n<i.length;n++)t7.set(i[n],t);if(null!==t){for(t=0,r=r.split(/(\r?\n|\t)/),e=[],i=r.length;t<i;t++)"\n"===(n=r[t])||"\r\n"===n?e.push(tX()):"	"===n?e.push(rl()):""!==n&&e.push(rs(n));return{node:e}}if(""===(r=r.replace(/\r?\n|\t/gm," ").replace("\r","").replace(/\s+/g," ")))return{node:null};if(" "===r[0]){for(i=e,t=!0;null!==i&&null!==(i=rr(i,!1));)if(0<(n=i.textContent||"").length){n.match(/(?:\s|\r?\n|\t)$/)&&(r=r.slice(1)),t=!1;break}t&&(r=r.slice(1))}if(" "===r[r.length-1]){for(i=!0;null!==e&&null!==(e=rr(e,!0));)if(0<(e.textContent||"").replace(/^[\s|\r?\n|\t]+/,"").length){i=!1;break}i&&(r=r.slice(0,r.length-1))}return""===r?{node:null}:{node:rs(r)}}let rt=RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/,"i");function rr(e,t){for(;;){for(var r=void 0;null===(r=t?e.nextSibling:e.previousSibling);)if(null===(e=e.parentElement))return null;if(1===(e=r).nodeType&&(""===(r=e.style.display)&&null===e.nodeName.match(rt)||""!==r&&!r.startsWith("inline")))return null;for(;null!==(r=t?e.firstChild:e.lastChild);)e=r;if(3===e.nodeType)return e;if("BR"===e.nodeName)return null}}let rn={code:"code",em:"italic",i:"italic",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function ri(e){let t=rn[e.nodeName.toLowerCase()];return void 0===t?{node:null}:{forChild:e=>(ra(e)&&!e.hasFormat(t)&&e.toggleFormat(t),e),node:null}}function rs(e=""){return e2(new t3(e))}function ra(e){return e instanceof t3}class ro extends t3{static getType(){return"tab"}static clone(e){let t=new ro(e.__key);return t.__text=e.__text,t.__format=e.__format,t.__style=e.__style,t}constructor(e){super("	",e),this.__detail=2}static importDOM(){return null}static importJSON(e){let t=rl();return t.setFormat(e.format),t.setStyle(e.style),t}exportJSON(){return{...super.exportJSON(),type:"tab",version:1}}setTextContent(){j(126)}setDetail(){j(127)}setMode(){j(128)}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function rl(){return e2(new ro)}class rc{constructor(e,t,r){this._selection=null,this.key=e,this.offset=t,this.type=r}is(e){return this.key===e.key&&this.offset===e.offset&&this.type===e.type}isBefore(e){let t=this.getNode(),r=e.getNode(),n=this.offset;if(e=e.offset,r3(t)){var i=t.getDescendantByIndex(n);t=null!=i?i:t}return r3(r)&&(r=null!=(i=r.getDescendantByIndex(e))?i:r),t===r?n<e:t.isBefore(r)}getNode(){let e=eP(this.key);return null===e&&j(20),e}set(e,t,r){let n=this._selection,i=this.key;this.key=e,this.offset=t,this.type=r,rV()||(eR()===i&&ek(e),null!==n&&(n._cachedNodes=null,n.dirty=!0))}}function ru(e,t){let r=t.__key,n=e.offset,i="element";if(ra(t))i="text",n>(t=t.getTextContentSize())&&(n=t);else if(!r3(t)){var s=t.getNextSibling();ra(s)?(r=s.__key,n=0,i="text"):(s=t.getParent())&&(r=s.__key,n=t.getIndexWithinParent()+1)}e.set(r,n,i)}function rd(e,t){if(r3(t)){let r=t.getLastDescendant();r3(r)||ra(r)?ru(e,r):ru(e,t)}else ru(e,t)}function rp(e,t,r,n){let i=e.getNode(),s=i.getChildAtIndex(e.offset),a=rs(),o=r7(i)?ni().append(a):a;a.setFormat(r),a.setStyle(n),null===s?i.append(o):(s.insertBefore(o),"element"===t.type&&t.key===e.key&&t.offset!==e.offset&&t.set(t.key,t.offset+1,"element")),e.is(t)&&t.set(a.__key,0,"text"),e.set(a.__key,0,"text")}function rh(e,t,r,n){e.key=t,e.offset=r,e.type=n}class rf{constructor(e){this.dirty=!1,this._nodes=e,this._cachedNodes=null}is(e){if(!rb(e))return!1;let t=this._nodes,r=e._nodes;return t.size===r.size&&Array.from(t).every(e=>r.has(e))}add(e){this.dirty=!0,this._nodes.add(e),this._cachedNodes=null}delete(e){this.dirty=!0,this._nodes.delete(e),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(e){return this._nodes.has(e)}clone(){return new rf(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(){}insertText(){}insertNodes(e,t){let r=this.getNodes(),n=r.length;var i=r[n-1];if(ra(i))i=i.select();else{let s=i.getIndexWithinParent()+1;i=i.getParentOrThrow().select(s,s)}for(i.insertNodes(e,t),e=0;e<n;e++)r[e].remove();return!0}getNodes(){var e=this._cachedNodes;if(null!==e)return e;var t=this._nodes;for(let r of(e=[],t))null!==(t=eP(r))&&e.push(t);return rV()||(this._cachedNodes=e),e}getTextContent(){let e=this.getNodes(),t="";for(let r=0;r<e.length;r++)t+=e[r].getTextContent();return t}}function rm(e){return e instanceof rv}class rg{constructor(e,t,r){this.gridKey=e,this.anchor=t,this.focus=r,this.dirty=!1,this._cachedNodes=null,t._selection=this,r._selection=this}is(e){return!!ry(e)&&this.gridKey===e.gridKey&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)}set(e,t,r){this.dirty=!0,this.gridKey=e,this.anchor.key=t,this.focus.key=r,this._cachedNodes=null}clone(){return new rg(this.gridKey,this.anchor,this.focus)}isCollapsed(){return!1}isBackward(){return this.focus.isBefore(this.anchor)}getCharacterOffsets(){return r_(this)}extract(){return this.getNodes()}insertRawText(){}insertText(){}insertNodes(e,t){let r=this.focus.getNode();return eh(r.select(0,r.getChildrenSize())).insertNodes(e,t)}getShape(){var e=eP(this.anchor.key);null===e&&j(21);var t=e.getIndexWithinParent();e=e.getParentOrThrow().getIndexWithinParent();var r=eP(this.focus.key);null===r&&j(22);var n=r.getIndexWithinParent();let i=r.getParentOrThrow().getIndexWithinParent();return{fromX:Math.min(r=Math.min(t,n),t=Math.max(t,n)),fromY:Math.min(n=Math.min(e,i),e=Math.max(e,i)),toX:Math.max(r,t),toY:Math.max(n,e)}}getNodes(){function e(e){let{cell:t,startColumn:r,startRow:n}=e;o=Math.min(o,r),l=Math.min(l,n),c=Math.max(c,r+t.__colSpan-1),u=Math.max(u,n+t.__rowSpan-1)}var t=this._cachedNodes;if(null!==t)return t;var r=this.anchor.getNode();t=this.focus.getNode(),r=e9(r,nl);var n=e9(t,nl);nl(r)||j(103),nl(n)||j(104),np(t=r.getParent())||j(105),nu(t=t.getParent())||j(106);let[i,s,a]=rj(t,r,n),o=Math.min(s.startColumn,a.startColumn),l=Math.min(s.startRow,a.startRow),c=Math.max(s.startColumn+s.cell.__colSpan-1,a.startColumn+a.cell.__colSpan-1),u=Math.max(s.startRow+s.cell.__rowSpan-1,a.startRow+a.cell.__rowSpan-1);r=o,n=l;for(var d=o,p=l;o<r||l<n||c>d||u>p;){if(o<r){var h=p-n;--r;for(var f=0;f<=h;f++)e(i[n+f][r])}if(l<n)for(h=d-r,--n,f=0;f<=h;f++)e(i[n][r+f]);if(c>d)for(h=p-n,d+=1,f=0;f<=h;f++)e(i[n+f][d]);if(u>p)for(h=d-r,p+=1,f=0;f<=h;f++)e(i[p][r+f])}for(t=[t],r=null,n=l;n<=u;n++)for(d=o;d<=c;d++)({cell:p}=i[n][d]),np(h=p.getParent())||j(107),h!==r&&t.push(h),t.push(p,...function(e){let t=[],r=[e];for(;0<r.length;){let n=r.pop();void 0===n&&j(112),r3(n)&&r.unshift(...n.getChildren()),n!==e&&t.push(n)}return t}(p)),r=h;return rV()||(this._cachedNodes=t),t}getTextContent(){let e=this.getNodes(),t="";for(let r=0;r<e.length;r++)t+=e[r].getTextContent();return t}}function ry(e){return e instanceof rg}class rv{constructor(e,t,r,n){this.anchor=e,this.focus=t,this.dirty=!1,this.format=r,this.style=n,this._cachedNodes=null,e._selection=this,t._selection=this}is(e){return!!rm(e)&&this.anchor.is(e.anchor)&&this.focus.is(e.focus)&&this.format===e.format&&this.style===e.style}isBackward(){return this.focus.isBefore(this.anchor)}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){var e=this._cachedNodes;if(null!==e)return e;e=this.anchor;var t=this.focus,r=e.isBefore(t),n=r?e:t;r=r?t:e,e=n.getNode(),t=r.getNode();let i=n.offset;return n=r.offset,r3(e)&&(e=null!=(r=e.getDescendantByIndex(i))?r:e),r3(t)&&(null!==(r=t.getDescendantByIndex(n))&&r!==e&&t.getChildAtIndex(n)===r&&(r=r.getPreviousSibling()),t=null!=r?r:t),e=e.is(t)?r3(e)&&0<e.getChildrenSize()?[]:[e]:e.getNodesBetween(t),rV()||(this._cachedNodes=e),e}setTextNodeRange(e,t,r,n){rh(this.anchor,e.__key,t,"text"),rh(this.focus,r.__key,n,"text"),this._cachedNodes=null,this.dirty=!0}getTextContent(){let e=this.getNodes();if(0===e.length)return"";let t=e[0],r=e[e.length-1],n=this.anchor,i=this.focus,s=n.isBefore(i),[a,o]=r_(this),l="",c=!0;for(let u=0;u<e.length;u++){let d=e[u];if(r3(d)&&!d.isInline())c||(l+="\n"),c=!d.isEmpty();else if(c=!1,ra(d)){let p=d.getTextContent();d===t?d===r?("element"!==n.type||"element"!==i.type||i.offset===n.offset)&&(p=a<o?p.slice(a,o):p.slice(o,a)):p=s?p.slice(a):p.slice(o):d===r&&(p=s?p.slice(0,o):p.slice(0,a)),l+=p}else!r4(d)&&!t0(d)||d===r&&this.isCollapsed()||(l+=d.getTextContent())}return l}applyDOMRange(e){let t=rZ(),r=t.getEditorState()._selection;if(null!==(e=rC(e.startContainer,e.startOffset,e.endContainer,e.endOffset,t,r))){var[n,i]=e;rh(this.anchor,n.key,n.offset,n.type),rh(this.focus,i.key,i.offset,i.type),this._cachedNodes=null}}clone(){let e=this.anchor,t=this.focus;return new rv(new rc(e.key,e.offset,e.type),new rc(t.key,t.offset,t.type),this.format,this.style)}toggleFormat(e){this.format=ex(this.format,e,null),this.dirty=!0}setStyle(e){this.style=e,this.dirty=!0}hasFormat(e){return 0!=(this.format&J[e])}insertRawText(e){e=e.split(/(\r?\n|\t)/);let t=[],r=e.length;for(let n=0;n<r;n++){let i=e[n];"\n"===i||"\r\n"===i?t.push(tX()):"	"===i?t.push(rl()):t.push(rs(i))}this.insertNodes(t)}insertText(e){var t=this.anchor,r=this.focus,n=this.isCollapsed()||t.isBefore(r),i=this.format,s=this.style;n&&"element"===t.type?rp(t,r,i,s):n||"element"!==r.type||rp(r,t,i,s);var a=this.getNodes(),o=a.length,l=n?r:t;r=(n?t:r).offset;var c=l.offset;ra(t=a[0])||j(26),n=t.getTextContent().length;var u=t.getParentOrThrow(),d=a[o-1];if(this.isCollapsed()&&r===n&&(t.isSegmented()||t.isToken()||!t.canInsertTextAfter()||!u.canInsertTextAfter()&&null===t.getNextSibling())){var p=t.getNextSibling();if(ra(p)&&p.canInsertTextBefore()&&!ew(p)||((p=rs()).setFormat(i),u.canInsertTextAfter()?t.insertAfter(p):u.insertAfter(p)),p.select(0,0),t=p,""!==e){this.insertText(e);return}}else if(this.isCollapsed()&&0===r&&(t.isSegmented()||t.isToken()||!t.canInsertTextBefore()||!u.canInsertTextBefore()&&null===t.getPreviousSibling())){if((!ra(p=t.getPreviousSibling())||ew(p))&&((p=rs()).setFormat(i),u.canInsertTextBefore()?t.insertBefore(p):u.insertBefore(p)),p.select(),t=p,""!==e){this.insertText(e);return}}else if(t.isSegmented()&&r!==n)(u=rs(t.getTextContent())).setFormat(i),t.replace(u),t=u;else if(!(this.isCollapsed()||""===e||(p=d.getParent(),u.canInsertTextBefore()&&u.canInsertTextAfter()&&(!r3(p)||p.canInsertTextBefore()&&p.canInsertTextAfter())))){this.insertText(""),rE(this.anchor,this.focus,null),this.insertText(e);return}if(1===o){if(t.isToken())(e=rs(e)).select(),t.replace(e);else{if(a=t.getFormat(),o=t.getStyle(),r===c&&(a!==i||o!==s)){if(""===t.getTextContent())t.setFormat(i),t.setStyle(s);else{(a=rs(e)).setFormat(i),a.setStyle(s),a.select(),0===r?t.insertBefore(a,!1):([o]=t.splitText(r),o.insertAfter(a,!1)),a.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length);return}}""===(t=t.spliceText(r,c-r,e,!0)).getTextContent()?t.remove():"text"===this.anchor.type&&(t.isComposing()?this.anchor.offset-=e.length:(this.format=a,this.style=o))}}else{if(i=new Set([...t.getParentKeys(),...d.getParentKeys()]),p=r3(t)?t:t.getParentOrThrow(),s=r3(d)?d:d.getParentOrThrow(),u=d,!p.is(s)&&s.isInline())do u=s,s=s.getParentOrThrow();while(s.isInline());"text"===l.type&&(0!==c||""===d.getTextContent())||"element"===l.type&&d.getIndexWithinParent()<c?ra(d)&&!d.isToken()&&c!==d.getTextContentSize()?(d.isSegmented()&&(l=rs(d.getTextContent()),d.replace(l),d=l),d=d.spliceText(0,c,""),i.add(d.__key)):(l=d.getParentOrThrow()).canBeEmpty()||1!==l.getChildrenSize()?d.remove():l.remove():i.add(d.__key),l=s.getChildren(),c=new Set(a),d=p.is(s),p=p.isInline()&&null===t.getNextSibling()?p:t;for(let h=l.length-1;0<=h;h--){let f=l[h];if(f.is(t)||r3(f)&&f.isParentOf(t))break;f.isAttached()&&(!c.has(f)||f.is(u)?d||p.insertAfter(f,!1):f.remove())}if(!d)for(l=s,c=null;null!==l;)(0===(d=(s=l.getChildren()).length)||s[d-1].is(c))&&(i.delete(l.__key),c=l),l=l.getParent();for(t.isToken()?r===n?t.select():((e=rs(e)).select(),t.replace(e)):""===(t=t.spliceText(r,n-r,e,!0)).getTextContent()?t.remove():t.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length),e=1;e<o;e++)t=a[e],i.has(t.__key)||t.remove()}}removeText(){this.insertText("")}formatText(e){if(this.isCollapsed())this.toggleFormat(e),ek(null);else{var t=this.getNodes(),r=[];for(var n of t)ra(n)&&r.push(n);var i=r.length;if(0===i)this.toggleFormat(e),ek(null);else{n=this.anchor;var s=this.focus,a=this.isBackward();t=a?s:n,n=a?n:s;var o=0,l=r[0];if(s="element"===t.type?0:t.offset,"text"===t.type&&s===l.getTextContentSize()&&(o=1,l=r[1],s=0),null!=l){a=l.getFormatFlags(e,null);var c=i-1,u=r[c];if(i="text"===n.type?n.offset:u.getTextContentSize(),l.is(u))s!==i&&(0===s&&i===l.getTextContentSize()?l.setFormat(a):(e=l.splitText(s,i),(e=0===s?e[0]:e[1]).setFormat(a),"text"===t.type&&t.set(e.__key,0,"text"),"text"===n.type&&n.set(e.__key,i-s,"text")),this.format=a);else{0!==s&&([,l]=l.splitText(s),s=0),l.setFormat(a);var d=u.getFormatFlags(e,a);for(0<i&&(i!==u.getTextContentSize()&&([u]=u.splitText(i)),u.setFormat(d)),o+=1;o<c;o++){let p=r[o];if(!p.isToken()){let h=p.getFormatFlags(e,d);p.setFormat(h)}}"text"===t.type&&t.set(l.__key,s,"text"),"text"===n.type&&n.set(u.__key,i,"text"),this.format=a|d}}}}}insertNodes(e,t){if(!this.isCollapsed()){var r=this.isBackward()?this.anchor:this.focus,n=r.getNode().getNextSibling();if(n=n?n.getKey():null,r=(r=r.getNode().getPreviousSibling())?r.getKey():null,this.removeText(),this.isCollapsed()&&"element"===this.focus.type){if(this.focus.key===n&&0===this.focus.offset){var i=rs();this.focus.getNode().insertBefore(i)}else this.focus.key===r&&this.focus.offset===this.focus.getNode().getChildrenSize()&&(i=rs(),this.focus.getNode().insertAfter(i));i&&(this.focus.set(i.__key,0,"text"),this.anchor.set(i.__key,0,"text"))}}r=(i=this.anchor).offset;var s=i.getNode();n=s,"element"===i.type&&(n=null===(n=(i=i.getNode()).getChildAtIndex(r-1))?i:n),i=[];var a=s.getNextSiblings(),o=e0(s)?null:s.getTopLevelElementOrThrow();if(ra(s)){if(n=s.getTextContent().length,0===r&&0!==n)n=null!==(n=s.getPreviousSibling())?n:s.getParentOrThrow(),i.push(s);else if(r===n)n=s;else{if(s.isToken())return!1;[n,s]=s.splitText(r),i.push(s)}}s=n,i.push(...a),a=e[0];var l=!1,c=null;for(let u=0;u<e.length;u++){var d=e[u];if(e0(n)||r4(n)||!r3(d)||d.isInline())l&&!r3(d)&&!r4(d)&&e0(n.getParent())&&j(28);else{if(d.is(a)){if(r3(n)&&n.isEmpty()&&n.canReplaceWith(d)){n.replace(d),n=d,l=!0;continue}if(eS(l=d.getFirstDescendant())){for(var p=l.getParentOrThrow();p.isInline();)p=p.getParentOrThrow();if(l=(c=p.getChildren()).length,r3(n)){var h=n.getFirstChild();for(let f=0;f<l;f++){let m=c[f];null===h?n.append(m):h.insertAfter(m),h=m}}else{for(h=l-1;0<=h;h--)n.insertAfter(c[h]);n=n.getParentOrThrow()}if(c=c[l-1],p.remove(),l=!0,p.is(d))continue}}ra(n)&&(null===o&&j(27),n=o)}l=!1,r3(n)&&!n.isInline()?(c=d,r4(d)&&!d.isInline())?n=n.insertAfter(d,!1):r3(d)?(d.canBeEmpty()||!d.isEmpty())&&(r7(n)?(null!==(p=n.getChildAtIndex(r))?p.insertBefore(d):n.append(d),n=d):d.isInline()?(n.append(d),n=d):n=n.insertAfter(d,!1)):(null!==(p=n.getFirstChild())?p.insertBefore(d):n.append(d),n=d):!r3(d)||r3(d)&&d.isInline()||r4(n)&&!n.isInline()?(c=d,rm(this)&&r4(d)&&(r3(n)||ra(n))&&!d.isInline()?(ra(n)?(p=n.getParentOrThrow(),[n]=n.splitText(r),n=n.getIndexWithinParent()+1):(p=n,n=r),[,n]=e8(p,n),n=n.insertBefore(d)):n=n.insertAfter(d,!1)):(d=n.getParentOrThrow(),t0(n)&&n.remove(),n=d,u--)}if(t&&(ra(s)?s.select():ra(e=n.getPreviousSibling())?e.select():(e=n.getIndexWithinParent(),n.getParentOrThrow().select(e,e))),r3(n)){if(e=ra(c)?c:r3(c)&&c.isInline()?c.getLastDescendant():n.getLastDescendant(),t||(null===e?n.select():ra(e)?""===e.getTextContent()?e.selectPrevious():e.select():e.selectNext()),0!==i.length)for(t=n,e=i.length-1;0<=e;e--)o=(r=i[e]).getParentOrThrow(),!r3(n)||rk(r)||r4(r)&&(!r.isInline()||r.isIsolated())?r3(n)||rk(r)?r3(r)&&!r.canInsertAfter(n)?(r3(s=o.constructor.clone(o))||j(29),s.append(r),n.insertAfter(s)):n.insertAfter(r):(n.insertBefore(r),n=r):(t===n?n.append(r):n.insertBefore(r),n=r),o.isEmpty()&&!o.canBeEmpty()&&o.remove()}else t||(ra(n)?n.select():(t=n.getParentOrThrow(),e=n.getIndexWithinParent()+1,t.select(e,e)));return!0}insertParagraph(){this.isCollapsed()||this.removeText();var e=this.anchor,t=e.offset,r=[];if("text"===e.type){var n=e.getNode(),i=n.getNextSiblings().reverse(),s=n.getParentOrThrow(),a=s.isInline(),o=a?s.getTextContentSize():n.getTextContentSize();0===t?i.push(n):(a&&(r=s.getNextSiblings()),t===o||a&&t===n.getTextContentSize()||([,n]=n.splitText(t),i.push(n)))}else{if(e0(s=e.getNode())){i=ni(),r=s.getChildAtIndex(t),i.select(),null!==r?r.insertBefore(i,!1):s.append(i);return}i=s.getChildren().slice(t).reverse()}if(n=i.length,0===t&&0<n&&s.isInline()){if(r3(i=(r=s.getParentOrThrow()).insertNewAfter(this,!1)))for(r=r.getChildren(),s=0;s<r.length;s++)i.append(r[s])}else if(null===(a=s.insertNewAfter(this,!1)))this.insertLineBreak();else if(r3(a)){if(o=s.getFirstChild(),0===t&&(s.is(e.getNode())||o&&o.is(e.getNode()))&&0<n)s.insertBefore(a);else{if(s=null,t=r.length,e=a.getParentOrThrow(),0<t)for(o=0;o<t;o++)e.append(r[o]);if(0!==n)for(r=0;r<n;r++)t=i[r],null===s?a.append(t):s.insertBefore(t),s=t;a.canBeEmpty()||0!==a.getChildrenSize()?a.selectStart():(a.selectPrevious(),a.remove())}}}insertLineBreak(e){let t=tX();var r=this.anchor;"element"===r.type&&r7(r=r.getNode())&&this.insertParagraph(),e?this.insertNodes([t],!0):this.insertNodes([t])&&t.selectNext(0,0)}getCharacterOffsets(){return r_(this)}extract(){var e=this.getNodes(),t=e.length,r=t-1,n=this.anchor;let i=this.focus;var s=e[0];let a=e[r],[o,l]=r_(this);return 0===t?[]:1===t?ra(s)&&!this.isCollapsed()?(e=o>l?l:o,r=s.splitText(e,o>l?o:l),null!=(e=0===e?r[0]:r[1])?[e]:[]):[s]:(t=n.isBefore(i),ra(s)&&((n=t?o:l)===s.getTextContentSize()?e.shift():0!==n&&([,s]=s.splitText(n),e[0]=s)),ra(a)&&(s=a.getTextContent().length,0===(t=t?l:o)?e.pop():t!==s&&([a]=a.splitText(t),e[r]=a)),e)}modify(e,t,r){var n=this.focus,i=this.anchor,s="move"===e,a=eW(n,t);if(r4(a)&&!a.isIsolated())s&&a.isKeyboardSelectable()?((t=rP()).add(a.__key),eI(t)):ra(e=t?a.getPreviousSibling():a.getNextSibling())?(a=e.__key,t=t?e.getTextContent().length:0,n.set(a,t,"text"),s&&i.set(a,t,"text")):(r=a.getParentOrThrow(),r3(e)?(r=e.__key,a=t?e.getChildrenSize():0):(a=a.getIndexWithinParent(),r=r.__key,t||a++),n.set(r,a,"element"),s&&i.set(r,a,"element"));else if(n=e3((i=rZ())._window)){var o=i._blockCursorElement,l=i._rootElement;if(null===l||null===o||!r3(a)||a.isInline()||a.canBeEmpty()||e6(o,i,l),n.modify(e,t?"backward":"forward",r),0<n.rangeCount&&(a=n.getRangeAt(0),i=r7(i=this.anchor.getNode())?i:eX(i),this.applyDOMRange(a),this.dirty=!0,!s)){for(o=0,s=this.getNodes(),e=[],r=!1;o<s.length;o++)eJ(l=s[o],i)?e.push(l):r=!0;r&&0<e.length&&(t?r3(t=e[0])?t.selectStart():t.getParentOrThrow().selectStart():r3(t=e[e.length-1])?t.selectEnd():t.getParentOrThrow().selectEnd()),(n.anchorNode!==a.startContainer||n.anchorOffset!==a.startOffset)&&(t=this.focus,n=(s=this.anchor).key,a=s.offset,i=s.type,rh(s,t.key,t.offset,t.type),rh(t,n,a,i),this._cachedNodes=null)}}}deleteCharacter(e){let t=this.isCollapsed();if(this.isCollapsed()){var n=this.anchor,i=this.focus,s=n.getNode();if(!e&&("element"===n.type&&r3(s)&&n.offset===s.getChildrenSize()||"text"===n.type&&n.offset===s.getTextContentSize())){var a=s.getParent();if(r3(a=s.getNextSibling()||(null===a?null:a.getNextSibling()))&&a.isShadowRoot())return}if(r4(a=eW(i,e))&&!a.isIsolated()){a.isKeyboardSelectable()&&r3(s)&&0===s.getChildrenSize()?(s.remove(),(e=rP()).add(a.__key),eI(e)):(a.remove(),rZ().dispatchCommand(r,void 0));return}if(!e&&r3(a)&&r3(s)&&s.isEmpty()){s.remove(),a.selectStart();return}if(this.modify("extend",e,"character"),this.isCollapsed()){if(e&&0===n.offset&&("element"===n.type?n.getNode():n.getNode().getParentOrThrow()).collapseAtStart(this))return}else{if(a="text"===i.type?i.getNode():null,s="text"===n.type?n.getNode():null,null!==a&&a.isSegmented()){if(n=i.offset,i=a.getTextContentSize(),a.is(s)||e&&n!==i||!e&&0!==n){rx(a,e,n);return}}else if(null!==s&&s.isSegmented()&&(n=n.offset,i=s.getTextContentSize(),s.is(a)||e&&0!==n||!e&&n!==i)){rx(s,e,n);return}if(s=this.anchor,a=this.focus,(n=s.getNode())===(i=a.getNode())&&"text"===s.type&&"text"===a.type){var o=s.offset,l=a.offset;let c=o<l;(i=c?o:l)!==(o=(l=c?l:o)-1)&&(ej(n=n.getTextContent().slice(i,l))||(e?a.offset=o:s.offset=o))}}}this.removeText(),e&&!t&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset&&(e=this.anchor.getNode()).isEmpty()&&r7(e.getParent())&&0===e.getIndexWithinParent()&&e.collapseAtStart(this)}deleteLine(e){this.isCollapsed()&&("text"===this.anchor.type&&this.modify("extend",e,"lineboundary"),0===(e?this.focus:this.anchor).offset&&this.modify("extend",e,"character")),this.removeText()}deleteWord(e){this.isCollapsed()&&this.modify("extend",e,"word"),this.removeText()}}function rb(e){return e instanceof rf}function rw(e){let t=e.offset;return"text"===e.type?t:t===(e=e.getNode()).getChildrenSize()?e.getTextContent().length:0}function r_(e){let t=e.anchor;return e=e.focus,"element"===t.type&&"element"===e.type&&t.key===e.key&&t.offset===e.offset?[0,0]:[rw(t),rw(e)]}function rx(e,t,r){let n=e.getTextContent().split(/(?=\s)/g),i=n.length,s=0,a=0;for(let o=0;o<i;o++){let l=n[o],c=o===i-1;if(a=s,s+=l.length,t&&s===r||s>r||c){n.splice(o,1),c&&(a=void 0);break}}""===(t=n.join("").trim())?e.remove():(e.setTextContent(t),e.select(a,a))}function rS(e,t,r,n){var i=t;if(1===e.nodeType){let s=!1;var a=e.childNodes,o=a.length;i===o&&(s=!0,i=o-1);let l=a[i];if(o=!1,l===n._blockCursorElement?(l=a[i+1],o=!0):null!==n._blockCursorElement&&i--,ra(n=eM(l)))i=s?n.getTextContentSize():0;else{if(null===(a=eM(e)))return null;if(r3(a)?(e=a.getChildAtIndex(i),(t=r3(e))&&(t=e.getParent(),t=null===r||null===t||!t.canBeEmpty()||t!==r.getNode()),t&&(null===(r=s?e.getLastDescendant():e.getFirstDescendant())?(a=e,i=0):a=r3(e=r)?e:e.getParentOrThrow()),ra(e)?(n=e,a=null,i=s?e.getTextContentSize():0):e!==a&&s&&!o&&i++):(i=a.getIndexWithinParent(),i=0===t&&r4(a)&&eM(e)===a?i:i+1,a=a.getParentOrThrow()),r3(a))return new rc(a.__key,i,"element")}}else n=eM(e);return ra(n)?new rc(n.__key,i,"text"):null}function rT(e,t,r){var n=e.offset,i=e.getNode();0===n?(n=i.getPreviousSibling(),i=i.getParent(),t)?(r||!t)&&null===n&&r3(i)&&i.isInline()&&ra(t=i.getPreviousSibling())&&(e.key=t.__key,e.offset=t.getTextContent().length):r3(n)&&!r&&n.isInline()?(e.key=n.__key,e.offset=n.getChildrenSize(),e.type="element"):ra(n)&&(e.key=n.__key,e.offset=n.getTextContent().length):n===i.getTextContent().length&&(n=i.getNextSibling(),i=i.getParent(),t&&r3(n)&&n.isInline()?(e.key=n.__key,e.offset=0,e.type="element"):(r||t)&&null===n&&r3(i)&&i.isInline()&&!i.canInsertTextAfter()&&ra(t=i.getNextSibling())&&(e.key=t.__key,e.offset=0))}function rE(e,t,r){if("text"===e.type&&"text"===t.type){var n=e.isBefore(t);let i=e.is(t);rT(e,n,i),rT(t,!n,i),i&&(t.key=e.key,t.offset=e.offset,t.type=e.type),(n=rZ()).isComposing()&&n._compositionKey!==e.key&&rm(r)&&(n=r.anchor,r=r.focus,rh(e,n.key,n.offset,n.type),rh(t,r.key,r.offset,r.type))}}function rC(e,t,r,n,i,s){return null===e||null===r||!ev(i,e,r)||null===(t=rS(e,t,rm(s)?s.anchor:null,i))||null===(n=rS(r,n,rm(s)?s.focus:null,i))||"element"===t.type&&"element"===n.type&&(e=eM(e),r=eM(r),r4(e)&&r4(r))?null:(rE(t,n,s),[t,n])}function rk(e){return r3(e)&&!e.isInline()}function rR(e,t,r,n,i,s){let a=rW();return(e=new rv(new rc(e,t,i),new rc(r,n,s),0,"")).dirty=!0,a._selection=e}function rP(){return new rf(new Set)}function rD(e,t,r){let n;var i=r._window;if(null===i)return null;var s=i.event,a=s?s.type:void 0;if(i="selectionchange"===a,s=!en&&(i||"beforeinput"===a||"compositionstart"===a||"compositionend"===a||"click"===a&&s&&3===s.detail||"drop"===a||void 0===a),rm(e)&&!s)return e.clone();if(null===t)return null;if(s=t.anchorNode,a=t.focusNode,n=t.anchorOffset,t=t.focusOffset,i&&rm(e)&&!ev(r,s,a))return e.clone();if(null===(r=rC(s,n,a,t,r,e)))return null;let[o,l]=r;return new rv(o,l,rm(e)?e.format:0,rm(e)?e.style:"")}function rA(){return rW()._selection}function rN(){return rZ()._editorState._selection}function rL(e,t,r,n=1){var i=e.anchor,s=e.focus,a=i.getNode(),o=s.getNode();if(t.is(a)||t.is(o)){if(a=t.__key,e.isCollapsed())(r<=(t=i.offset)&&0<n||r<t&&0>n)&&(r=Math.max(0,t+n),i.set(a,r,"element"),s.set(a,r,"element"),rO(e));else{let l=e.isBackward();var c=(o=l?s:i).getNode();s=(i=l?i:s).getNode(),t.is(c)&&(r<=(c=o.offset)&&0<n||r<c&&0>n)&&o.set(a,Math.max(0,c+n),"element"),t.is(s)&&(r<=(t=i.offset)&&0<n||r<t&&0>n)&&i.set(a,Math.max(0,t+n),"element")}rO(e)}}function rO(e){var t=e.anchor,r=t.offset;let n=e.focus;var i=n.offset,s=t.getNode(),a=n.getNode();if(e.isCollapsed())r3(s)&&ra(a=(i=r>=(a=s.getChildrenSize()))?s.getChildAtIndex(a-1):s.getChildAtIndex(r))&&(r=0,i&&(r=a.getTextContentSize()),t.set(a.__key,r,"text"),n.set(a.__key,r,"text"));else{if(r3(s)){let o=s.getChildrenSize();ra(r=(e=r>=o)?s.getChildAtIndex(o-1):s.getChildAtIndex(r))&&(s=0,e&&(s=r.getTextContentSize()),t.set(r.__key,s,"text"))}r3(a)&&(r=a.getChildrenSize(),ra(i=(t=i>=r)?a.getChildAtIndex(r-1):a.getChildAtIndex(i))&&(a=0,t&&(a=i.getTextContentSize()),n.set(i.__key,a,"text")))}}function rI(e,t,r,n,i){let s=null,a=0,o=null;null!==n?(s=n.__key,ra(n)?(a=n.getTextContentSize(),o="text"):r3(n)&&(a=n.getChildrenSize(),o="element")):null!==i&&(s=i.__key,ra(i)?o="text":r3(i)&&(o="element")),null!==s&&null!==o?e.set(s,a,o):(-1===(a=t.getIndexWithinParent())&&(a=r.getChildrenSize()),e.set(r.__key,a,"element"))}function rM(e,t,r,n,i){"text"===e.type?(e.key=r,t||(e.offset+=i)):e.offset>n.getIndexWithinParent()&&--e.offset}function rj(e,t,r){let n=[],i=null,s=null;e=e.getChildren();for(let a=0;a<e.length;a++){var o=e[a];np(o)||j(108);var l=o.getChildren();for(let c of(o=0,l)){for(nl(c)||j(109);void 0!==n[a]&&void 0!==n[a][o];)o++;var u=o,d=c;let p={cell:d,startColumn:u,startRow:l=a},h=d.__rowSpan,f=d.__colSpan;for(let m=0;m<h;m++){void 0===n[l+m]&&(n[l+m]=[]);for(let g=0;g<f;g++)n[l+m][u+g]=p}t.is(d)&&(i=p),r.is(d)&&(s=p),o+=c.__colSpan}}return null===i&&j(110),null===s&&j(111),[n,i,s]}let rF=null,r$=null,rB=!1,rU=!1,rq=0,rz={characterData:!0,childList:!0,subtree:!0};function rV(){return rB||null!==rF&&rF._readOnly}function rH(){rB&&j(13)}function rW(){return null===rF&&j(15),rF}function rZ(){return null===r$&&j(16),r$}function rK(e,t,r){var n=t.__type;let i=e._nodes.get(n);for(void 0===i&&j(30,n),void 0===(e=r.get(n))&&(e=Array.from(i.transforms),r.set(n,e)),r=e.length,n=0;n<r&&(e[n](t),t.isAttached());n++);}function rG(e,t){var r=e.type,n=t.get(r);if(void 0===n&&j(17,r),r=n.klass,e.type!==r.getType()&&j(18,r.name),r=r.importJSON(e),e=e.children,r3(r)&&Array.isArray(e))for(n=0;n<e.length;n++){let i=rG(e[n],t);r.append(i)}return r}function rY(e,t){let r=rF,n=rB,i=r$;rF=e,rB=!0,r$=null;try{return t()}finally{rF=r,rB=n,r$=i}}function rJ(e,t){let n=e._pendingEditorState,i=e._rootElement,s=e._headless||null===i;if(null!==n){var a=e._editorState,o=a._selection,l=n._selection,c=0!==e._dirtyType,u=rF,d=rB,p=r$,h=e._updating,f=e._observer,m=null;if(e._pendingEditorState=null,e._editorState=n,!s&&c&&null!==f){r$=e,rF=n,rB=!1,e._updating=!0;try{let g=e._dirtyType,y=e._dirtyElements,v=e._dirtyLeaves;f.disconnect(),te=tt=e7="",ts=2===g,tl=null,tn=e,tr=e._config,ti=e._nodes,to=tn._listeners.mutation,tc=y,tu=v,td=a._nodeMap,tp=n._nodeMap,ta=n._readOnly,th=new Map(e._keyToDOMMap);let b=new Map;tf=b,function e(t,r){var n=td.get(t),i=tp.get(t);void 0!==n&&void 0!==i||j(61);var s=ts||tu.has(t)||tc.has(t);let a=eG(tn,t);if(n===i&&!s)return r3(n)?(void 0!==(i=a.__lexicalTextContent)&&(e7+=i,tt+=i),void 0!==(i=a.__lexicalDirTextContent)&&(te+=i)):(i=n.getTextContent(),ra(n)&&!n.isDirectionless()&&(te+=i),tt+=i,e7+=i),a;if(n!==i&&s&&eV(tf,ti,to,i,"updated"),i.updateDOM(n,a,tr))return i=tw(t,null,null),null===r&&j(62),r.replaceChild(i,a),tm(t,null),i;if(r3(n)&&r3(i)){if((t=i.__indent)!==n.__indent&&tv(a,t),(t=i.__format)!==n.__format&&tb(a,t),s){t=i,s=te,te="",r=e7;var o=n.__size,l=t.__size;if(e7="",1===o&&1===l){var c=n.__first,u=t.__first;if(c===u)e(c,a);else{var d=tR(c);u=tw(u,null,null),a.replaceChild(u,d),tm(c,null)}}else{u=tE(n,td);var p=tE(t,tp);if(0===o)0!==l&&t_(p,t,0,l-1,a,null);else if(0===l)0!==o&&(tg(u,0,o-1,(c=null==a.__lexicalLineBreak)?null:a),c&&(a.textContent=""));else{var h=u;u=p,p=o-1,o=l-1;let f=a.firstChild,m=0;for(l=0;m<=p&&l<=o;){var g=h[m];let y=u[l];if(g===y)f=tk(e(y,a)),m++,l++;else{void 0===c&&(c=new Set(h)),void 0===d&&(d=new Set(u));let v=d.has(g),b=c.has(y);v?(b?((g=eG(tn,y))===f?f=tk(e(y,a)):(null!=f?a.insertBefore(g,f):a.appendChild(g),e(y,a)),m++):tw(y,a,f),l++):(f=tk(tR(g)),tm(g,a),m++)}}c=m>p,d=l>o,c&&!d?(c=void 0===(c=u[o+1])?null:tn.getElementByKey(c),t_(u,t,l,o,a,c)):d&&!c&&tg(h,m,p,a)}}eK(t)&&(e7+="\n\n"),a.__lexicalTextContent=e7,e7=r+e7,tT(t,a),te=s,r7(i)||i.isInline()||tS(n,i,a)}eK(i)&&(e7+="\n\n",tt+="\n\n")}else n=i.getTextContent(),r4(i)?null!==(s=i.decorate(tn,tr))&&tC(t,s):ra(i)&&!i.isDirectionless()&&(te+=n),e7+=n,tt+=n;return!ta&&r7(i)&&i.__cachedText!==tt&&((i=i.getWritable()).__cachedText=tt),a}("root",null),tf=th=tr=tp=td=tu=tc=ti=tn=void 0,m=b}catch(w){if(w instanceof Error&&e._onError(w),rU)throw w;ns(e,null,i,n),ec(e),e._dirtyType=2,rU=!0,rJ(e,a),rU=!1;return}finally{f.observe(i,rz),e._updating=h,rF=u,rB=d,r$=p}}n._readOnly||(n._readOnly=!0);var _=e._dirtyLeaves,x=e._dirtyElements,S=e._normalizedNodes,T=e._updateTags,E=e._deferred;c&&(e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set);var C,k=e._decorators,R=e._pendingDecorators||k,P=n._nodeMap;for(C in R)P.has(C)||(R===k&&(R=eN(e)),delete R[C]);var D=s?null:e3(e._window);if(e._editable&&null!==D&&(c||null===l||l.dirty)){r$=e,rF=n;try{if(null!==f&&f.disconnect(),c||null===l||l.dirty){let A=e._blockCursorElement;null!==A&&e6(A,e,i);e:{let N=D.anchorNode,L=D.focusNode,O=D.anchorOffset,I=D.focusOffset,M=document.activeElement;if(!(T.has("collaboration")&&M!==i||null!==M&&ey(M))){if(rm(l)){var F=l.anchor,$=l.focus,B=F.key,U=$.key,q=eG(e,B),z=eG(e,U),V=F.offset,H=$.offset,W=l.format,Z=l.style,K=l.isCollapsed(),G=q,Y=z,J=!1;if("text"===F.type){G=e_(q);let Q=F.getNode();J=Q.getFormat()!==W||Q.getStyle()!==Z}else rm(o)&&"text"===o.anchor.type&&(J=!0);if("text"===$.type&&(Y=e_(z)),null!==G&&null!==Y){if(K&&(null===o||J||rm(o)&&(o.format!==W||o.style!==Z))){var X=performance.now();tB=[W,Z,V,B,X]}if(O===V&&I===H&&N===G&&L===Y&&("Range"!==D.type||!K)&&(null!==M&&i.contains(M)||i.focus({preventScroll:!0}),"element"!==F.type))break e;try{D.setBaseAndExtent(G,V,Y,H)}catch(ee){}if(!T.has("skip-scroll-into-view")&&l.isCollapsed()&&null!==i&&i===document.activeElement){let et=l instanceof rv&&"element"===l.anchor.type?G.childNodes[V]||null:0<D.rangeCount?D.getRangeAt(0):null;if(null!==et){let er;if(et instanceof Text){let en=document.createRange();en.selectNode(et),er=en.getBoundingClientRect()}else er=et.getBoundingClientRect();let ei=i.ownerDocument,es=ei.defaultView;if(null!==es)for(var ea,eo,{top:el,bottom:eu}=er,ed=i;null!==ed;){let ep=ed===ei.body;if(ep)ea=0,eo=eQ(e).innerHeight;else{let eh=ed.getBoundingClientRect();ea=eh.top,eo=eh.bottom}let ef=0;if(el<ea?ef=-(ea-el):eu>eo&&(ef=eu-eo),0!==ef){if(ep)es.scrollBy(0,ef);else{let em=ed.scrollTop;ed.scrollTop+=ef;let eg=ed.scrollTop-em;el-=eg,eu-=eg}}if(ep)break;ed=eY(ed)}}}tM=!0}}else null!==o&&ev(e,N,L)&&D.removeAllRanges()}}}e:{let eb=e._blockCursorElement;if(rm(l)&&l.isCollapsed()&&"element"===l.anchor.type&&i.contains(document.activeElement)){let ew=l.anchor,ex=ew.getNode(),eS=ew.offset,eT=ex.getChildrenSize(),eE=!1,eC=null;if(eS===eT){let ek=ex.getChildAtIndex(eS-1);e4(ek)&&(eE=!0)}else{let eR=ex.getChildAtIndex(eS);if(e4(eR)){let eP=eR.getPreviousSibling();(null===eP||e4(eP))&&(eE=!0,eC=e.getElementByKey(eR.__key))}}if(eE){let eD=e.getElementByKey(ex.__key);if(null===eb){let eA=e._config.theme,eO=document.createElement("div");eO.contentEditable="false",eO.setAttribute("data-lexical-cursor","true");let eI=eA.blockCursor;if(void 0!==eI){if("string"==typeof eI){let eM=eI.split(" ");eI=eA.blockCursor=eM}void 0!==eI&&eO.classList.add(...eI)}e._blockCursorElement=eb=eO}i.style.caretColor="transparent",null===eC?eD.appendChild(eb):eD.insertBefore(eb,eC);break e}}null!==eb&&e6(eb,e,i)}null!==f&&f.observe(i,rz)}finally{r$=p,rF=u}}if(null!==m){var ej=m;let eF=Array.from(e._listeners.mutation),e$=eF.length;for(let eB=0;eB<e$;eB++){let[eU,eq]=eF[eB],ez=ej.get(eq);void 0!==ez&&eU(ez,{dirtyLeaves:_,updateTags:T})}}rm(l)||null===l||null!==o&&o.is(l)||e.dispatchCommand(r,void 0);var eH=e._pendingDecorators;null!==eH&&(e._decorators=eH,e._pendingDecorators=null,rQ("decorator",e,!0,eH));var eW=eL(t||a),eZ=eL(n);if(eW!==eZ&&rQ("textcontent",e,!0,eZ),rQ("update",e,!0,{dirtyElements:x,dirtyLeaves:_,editorState:n,normalizedNodes:S,prevEditorState:t||a,tags:T}),e._deferred=[],0!==E.length){let eJ=e._updating;e._updating=!0;try{for(let eX=0;eX<E.length;eX++)E[eX]()}finally{e._updating=eJ}}var e0=e._updates;if(0!==e0.length){let e1=e0.shift();if(e1){let[e2,e5]=e1;r1(e,e2,e5)}}}}function rQ(e,t,r,...n){let i=t._updating;t._updating=r;try{let s=Array.from(t._listeners[e]);for(e=0;e<s.length;e++)s[e].apply(null,n)}finally{t._updating=i}}function rX(e,t,r){if(!1===e._updating||r$!==e){let n=!1;return e.update(()=>{n=rX(e,t,r)}),n}let i=eF(e);for(let s=4;0<=s;s--)for(let a=0;a<i.length;a++){var o=i[a]._commands.get(t);if(void 0!==o&&void 0!==(o=o[s])){let l=(o=Array.from(o)).length;for(let c=0;c<l;c++)if(!0===o[c](r,e))return!0}}return!1}function r0(e,t){let r=e._updates;for(t=t||!1;0!==r.length;){var n=r.shift();if(n){let[i,s]=n,a;void 0!==s&&(n=s.onUpdate,a=s.tag,s.skipTransforms&&(t=!0),n&&e._deferred.push(n),a&&e._updateTags.add(a)),i()}}return t}function r1(e,t,r){let n=e._updateTags;var i,s=i=!1;if(void 0!==r){var a=r.onUpdate;null!=(i=r.tag)&&n.add(i),i=r.skipTransforms||!1,s=r.discrete||!1}a&&e._deferred.push(a),r=e._editorState;let o=!1;(null===(a=e._pendingEditorState)||a._readOnly)&&(a=e._pendingEditorState=new nt(new Map((a||r)._nodeMap)),o=!0),a._flushSync=s,s=rF;let l=rB,c=r$,u=e._updating;rF=a,rB=!1,e._updating=!0,r$=e;try{let d,p;o&&(e._headless?null!=r._selection&&(a._selection=r._selection.clone()):a._selection=(d=e.getEditorState()._selection,p=e3(e._window),rb(d)||ry(d)?d.clone():rD(d,p,e)));let h=e._compositionKey;t(),i=r0(e,i),function(e,t){if(t=t.getEditorState()._selection,rm(e=e._selection)){var r=e.anchor;let n=e.focus,i;"text"===r.type&&(i=r.getNode()).selectionTransform(t,e),"text"===n.type&&i!==(r=n.getNode())&&r.selectionTransform(t,e)}}(a,e),0!==e._dirtyType&&(i?function(e,t){for(let r of(t=t._dirtyLeaves,e=e._nodeMap,t))ra(t=e.get(r))&&t.isAttached()&&t.isSimpleText()&&!t.isUnmergeable()&&ep(t)}(a,e):function(e,t){let r=t._dirtyLeaves,n=t._dirtyElements;e=e._nodeMap;let i=eR(),s=new Map;var a=r;let o=a.size;for(var l=n,c=l.size;0<o||0<c;){if(0<o){for(let u of(t._dirtyLeaves=new Set,a))ra(a=e.get(u))&&a.isAttached()&&a.isSimpleText()&&!a.isUnmergeable()&&ep(a),void 0!==a&&void 0!==a&&a.__key!==i&&a.isAttached()&&rK(t,a,s),r.add(u);if(0<(o=(a=t._dirtyLeaves).size)){rq++;continue}}for(let d of(t._dirtyLeaves=new Set,t._dirtyElements=new Map,l))l=d[0],c=d[1],("root"===l||c)&&(void 0!==(a=e.get(l))&&void 0!==a&&a.__key!==i&&a.isAttached()&&rK(t,a,s),n.set(l,c));o=(a=t._dirtyLeaves).size,c=(l=t._dirtyElements).size,rq++}t._dirtyLeaves=r,t._dirtyElements=n}(a,e),r0(e),function(e,t,r,n){e=e._nodeMap,t=t._nodeMap;let i=[];for(let[s]of n){let a=t.get(s);void 0===a||a.isAttached()||(r3(a)&&function e(t,r,n,i,s,a){for(t=t.getFirstChild();null!==t;){let o=t.__key;t.__parent===r&&(r3(t)&&e(t,o,n,i,s,a),n.has(o)||a.delete(o),s.push(o)),t=t.getNextSibling()}}(a,s,e,t,i,n),e.has(s)||n.delete(s),i.push(s))}for(let o of i)t.delete(o);for(let l of r)void 0===(n=t.get(l))||n.isAttached()||(e.has(l)||r.delete(l),t.delete(l))}(r,a,e._dirtyLeaves,e._dirtyElements)),h!==e._compositionKey&&(a._flushSync=!0);let f=a._selection;if(rm(f)){let m=a._nodeMap,g=f.focus.key;void 0!==m.get(f.anchor.key)&&void 0!==m.get(g)||j(19)}else rb(f)&&0===f._nodes.size&&(a._selection=null)}catch(y){y instanceof Error&&e._onError(y),e._pendingEditorState=r,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),rJ(e);return}finally{rF=s,rB=l,r$=c,e._updating=u,rq=0}0!==e._dirtyType||function(e,t){if(t=t.getEditorState()._selection,null!==(e=e._selection)){if(e.dirty||!e.is(t))return!0}else if(null!==t)return!0;return!1}(a,e)?a._flushSync?(a._flushSync=!1,rJ(e)):o&&eg(()=>{rJ(e)}):(a._flushSync=!1,o&&(n.clear(),e._deferred=[],e._pendingEditorState=null))}function r2(e,t,r){e._updating?e._updates.push([t,r]):r1(e,t,r)}class r5 extends tY{constructor(e){super(e)}decorate(){j(47)}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function r4(e){return e instanceof r5}class r6 extends tY{constructor(e){super(e),this.__last=this.__first=null,this.__indent=this.__format=this.__size=0,this.__dir=null}getFormat(){return this.getLatest().__format}getFormatType(){return ee[this.getFormat()]||""}getIndent(){return this.getLatest().__indent}getChildren(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t),t=t.getNextSibling();return e}getChildrenKeys(){let e=[],t=this.getFirstChild();for(;null!==t;)e.push(t.__key),t=t.getNextSibling();return e}getChildrenSize(){return this.getLatest().__size}isEmpty(){return 0===this.getChildrenSize()}isDirty(){let e=rZ()._dirtyElements;return null!==e&&e.has(this.__key)}isLastChild(){let e=this.getLatest(),t=this.getParentOrThrow().getLastChild();return null!==t&&t.is(e)}getAllTextNodes(){let e=[],t=this.getFirstChild();for(;null!==t;){if(ra(t)&&e.push(t),r3(t)){let r=t.getAllTextNodes();e.push(...r)}t=t.getNextSibling()}return e}getFirstDescendant(){let e=this.getFirstChild();for(;null!==e;){if(r3(e)){let t=e.getFirstChild();if(null!==t){e=t;continue}}break}return e}getLastDescendant(){let e=this.getLastChild();for(;null!==e;){if(r3(e)){let t=e.getLastChild();if(null!==t){e=t;continue}}break}return e}getDescendantByIndex(e){let t=this.getChildren(),r=t.length;return e>=r?r3(e=t[r-1])&&e.getLastDescendant()||e||null:r3(e=t[e])&&e.getFirstDescendant()||e||null}getFirstChild(){let e=this.getLatest().__first;return null===e?null:eP(e)}getFirstChildOrThrow(){let e=this.getFirstChild();return null===e&&j(45,this.__key),e}getLastChild(){let e=this.getLatest().__last;return null===e?null:eP(e)}getLastChildOrThrow(){let e=this.getLastChild();return null===e&&j(96,this.__key),e}getChildAtIndex(e){let t;var r=this.getChildrenSize();if(e<r/2){for(r=0,t=this.getFirstChild();null!==t&&r<=e;){if(r===e)return t;t=t.getNextSibling(),r++}return null}for(t=this.getLastChild(),--r;null!==t&&r>=e;){if(r===e)return t;t=t.getPreviousSibling(),r--}return null}getTextContent(){let e="",t=this.getChildren(),r=t.length;for(let n=0;n<r;n++){let i=t[n];e+=i.getTextContent(),r3(i)&&n!==r-1&&!i.isInline()&&(e+="\n\n")}return e}getTextContentSize(){let e=0,t=this.getChildren(),r=t.length;for(let n=0;n<r;n++){let i=t[n];e+=i.getTextContentSize(),r3(i)&&n!==r-1&&!i.isInline()&&(e+=2)}return e}getDirection(){return this.getLatest().__dir}hasFormat(e){return""!==e&&(e=X[e],0!=(this.getFormat()&e))}select(e,t){rH();let r=rA(),n=e,i=t;var s=this.getChildrenSize();if(!this.canBeEmpty()){if(0===e&&0===t){if(ra(e=this.getFirstChild())||r3(e))return e.select(0,0)}else if(!(void 0!==e&&e!==s||void 0!==t&&t!==s)&&(ra(e=this.getLastChild())||r3(e)))return e.select()}return(void 0===n&&(n=s),void 0===i&&(i=s),s=this.__key,rm(r))?(r.anchor.set(s,n,"element"),r.focus.set(s,i,"element"),r.dirty=!0,r):rR(s,n,s,i,"element","element")}selectStart(){let e=this.getFirstDescendant();return r3(e)||ra(e)?e.select(0,0):null!==e?e.selectPrevious():this.select(0,0)}selectEnd(){let e=this.getLastDescendant();return r3(e)||ra(e)?e.select():null!==e?e.selectNext():this.select()}clear(){let e=this.getWritable();return this.getChildren().forEach(e=>e.remove()),e}append(...e){return this.splice(this.getChildrenSize(),0,e)}setDirection(e){let t=this.getWritable();return t.__dir=e,t}setFormat(e){return this.getWritable().__format=""!==e?X[e]:0,this}setIndent(e){return this.getWritable().__indent=e,this}splice(e,t,r){let n=r.length,i=this.getChildrenSize(),s=this.getWritable(),a=s.__key;var o=[],l=[];let c=this.getChildAtIndex(e+t),u=null,d=i-t+n;if(0!==e){if(e===i)u=this.getLastChild();else{var p=this.getChildAtIndex(e);null!==p&&(u=p.getPreviousSibling())}}if(0<t){var h=null===u?this.getFirstChild():u.getNextSibling();for(p=0;p<t;p++){null===h&&j(100);var f=h.getNextSibling(),m=h.__key;eE(h=h.getWritable()),l.push(m),h=f}}for(f=0,p=u;f<n;f++){m=r[f],null!==p&&m.is(p)&&(u=p=p.getPreviousSibling()),(h=m.getWritable()).__parent===a&&d--,eE(h);let g=m.__key;null===p?(s.__first=g,h.__prev=null):((p=p.getWritable()).__next=g,h.__prev=p.__key),m.__key===a&&j(76),h.__parent=a,o.push(g),p=m}if(e+t===i?null!==p&&(p.getWritable().__next=null,s.__last=p.__key):null!==c&&(e=c.getWritable(),null!==p?(t=p.getWritable(),e.__prev=p.__key,t.__next=c.__key):e.__prev=null),s.__size=d,l.length&&rm(e=rA())){l=new Set(l);let{anchor:y,focus:v}=e;r8(y,l,o=new Set(o))&&rI(y,y.getNode(),this,u,c),r8(v,l,o)&&rI(v,v.getNode(),this,u,c),0!==d||this.canBeEmpty()||e0(this)||this.remove()}return s}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"element",version:1}}insertNewAfter(){return null}canIndent(){return!0}collapseAtStart(){return!1}excludeFromCopy(){return!1}canExtractContents(){return!0}canReplaceWith(){return!0}canInsertAfter(){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(){return!1}extractWithChild(){return!1}}function r3(e){return e instanceof r6}function r8(e,t,r){for(e=e.getNode();e;){let n=e.__key;if(t.has(n)&&!r.has(n))return!0;e=e.getParent()}return!1}class r9 extends r6{static getType(){return"root"}static clone(){return new r9}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){j(51)}getTextContent(){let e=this.__cachedText;return(rV()||0===rZ()._dirtyType)&&null!==e?e:super.getTextContent()}remove(){j(52)}replace(){j(53)}insertBefore(){j(54)}insertAfter(){j(55)}updateDOM(){return!1}append(...e){for(let t=0;t<e.length;t++){let r=e[t];r3(r)||r4(r)||j(56)}return super.append(...e)}static importJSON(e){let t=eO();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),type:"root",version:1}}collapseAtStart(){return!0}}function r7(e){return e instanceof r9}function ne(){return new nt(new Map([["root",new r9]]))}class nt{constructor(e,t){this._nodeMap=e,this._selection=t||null,this._readOnly=this._flushSync=!1}isEmpty(){return 1===this._nodeMap.size&&null===this._selection}read(e){return rY(this,e)}clone(e){return(e=new nt(this._nodeMap,void 0===e?this._selection:e))._readOnly=!0,e}toJSON(){return rY(this,()=>({root:function e(t){let r=t.exportJSON();var n=t.constructor;r.type!==n.getType()&&j(130,n.name);let i=r.children;if(r3(t))for(Array.isArray(i)||j(59,n.name),t=t.getChildren(),n=0;n<t.length;n++){let s=e(t[n]);i.push(s)}return r}(eO())}))}}class nr extends r6{static getType(){return"paragraph"}static clone(e){return new nr(e.__key)}createDOM(e){let t=document.createElement("p");return void 0!==(e=ez(e.theme,"paragraph"))&&t.classList.add(...e),t}updateDOM(){return!1}static importDOM(){return{p:()=>({conversion:nn,priority:0})}}exportDOM(e){if({element:e}=super.exportDOM(e),e&&this.isEmpty()&&e.append(document.createElement("br")),e){var t=this.getFormatType();e.style.textAlign=t,(t=this.getDirection())&&(e.dir=t),0<(t=this.getIndent())&&(e.style.textIndent=`${20*t}px`)}return{element:e}}static importJSON(e){let t=ni();return t.setFormat(e.format),t.setIndent(e.indent),t.setDirection(e.direction),t}exportJSON(){return{...super.exportJSON(),type:"paragraph",version:1}}insertNewAfter(e,t){e=ni();let r=this.getDirection();return e.setDirection(r),this.insertAfter(e,t),e}collapseAtStart(){let e=this.getChildren();if(0===e.length||ra(e[0])&&""===e[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0}return!1}}function nn(e){let t=ni();return e.style&&(t.setFormat(e.style.textAlign),0<(e=parseInt(e.style.textIndent,10)/20)&&t.setIndent(e)),{node:t}}function ni(){return e2(new nr)}function ns(e,t,r,n){let i=e._keyToDOMMap;i.clear(),e._editorState=ne(),e._pendingEditorState=n,e._compositionKey=null,e._dirtyType=0,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null,null!==(n=e._observer)&&(n.disconnect(),e._observer=null),null!==t&&(t.textContent=""),null!==r&&(r.textContent="",i.set("root",r))}class na{constructor(e,t,r,n,i,s,a){this._parentEditor=t,this._rootElement=null,this._editorState=e,this._compositionKey=this._pendingEditorState=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=n,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=e$(),this._onError=i,this._htmlConversions=s,this._editable=a,this._headless=null!==t&&t._headless,this._blockCursorElement=this._window=null}isComposing(){return null!=this._compositionKey}registerUpdateListener(e){let t=this._listeners.update;return t.add(e),()=>{t.delete(e)}}registerEditableListener(e){let t=this._listeners.editable;return t.add(e),()=>{t.delete(e)}}registerDecoratorListener(e){let t=this._listeners.decorator;return t.add(e),()=>{t.delete(e)}}registerTextContentListener(e){let t=this._listeners.textcontent;return t.add(e),()=>{t.delete(e)}}registerRootListener(e){let t=this._listeners.root;return e(this._rootElement,null),t.add(e),()=>{e(null,this._rootElement),t.delete(e)}}registerCommand(e,t,r){void 0===r&&j(35);let n=this._commands;n.has(e)||n.set(e,[new Set,new Set,new Set,new Set,new Set]);let i=n.get(e);void 0===i&&j(36,String(e));let s=i[r];return s.add(t),()=>{s.delete(t),i.every(e=>0===e.size)&&n.delete(e)}}registerMutationListener(e,t){void 0===this._nodes.get(e.getType())&&j(37,e.name);let r=this._listeners.mutation;return r.set(t,e),()=>{r.delete(t)}}registerNodeTransformToKlass(e,t){var r=e.getType();return void 0===(r=this._nodes.get(r))&&j(37,e.name),r.transforms.add(t),r}registerNodeTransform(e,t){var r,n=this.registerNodeTransformToKlass(e,t);let i=[n];return null!=(n=n.replaceWithKlass)&&(n=this.registerNodeTransformToKlass(n,t),i.push(n)),r=e.getType(),r2(this,()=>{var e=rW();if(!e.isEmpty()){if("root"===r)eO().markDirty();else for(let[,t]of e=e._nodeMap)t.markDirty()}},null===this._pendingEditorState?{tag:"history-merge"}:void 0),()=>{i.forEach(e=>e.transforms.delete(t))}}hasNode(e){return this._nodes.has(e.getType())}hasNodes(e){return e.every(this.hasNode.bind(this))}dispatchCommand(e,t){return rX(this,e,t)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(e){let t=this._rootElement;if(e!==t){let r=ez(this._config.theme,"root");var n=this._pendingEditorState||this._editorState;if(this._rootElement=e,ns(this,t,e,n),null!==t){if(!this._config.disableEvents){0!==tI&&0==--tI&&t.ownerDocument.removeEventListener("selectionchange",tK);var i=t.__lexicalEditor;if(null!=i){if(null!==i._parentEditor){var s=eF(i);s=s[s.length-1]._key,tZ.get(s)===i&&tZ.delete(s)}else tZ.delete(i._key);t.__lexicalEditor=null}for(s=0,i=tW(t);s<i.length;s++)i[s]();t.__lexicalEventHandles=[]}null!=r&&t.classList.remove(...r)}null!==e?(n=(n=e.ownerDocument)&&n.defaultView||null,(i=e.style).userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",e.setAttribute("data-lexical-editor","true"),this._window=n,this._dirtyType=2,ec(this),this._updateTags.add("history-merge"),rJ(this),this._config.disableEvents||function(e,t){0===tI&&e.ownerDocument.addEventListener("selectionchange",tK),tI++,e.__lexicalEditor=t;let r=tW(e);for(let n=0;n<tD.length;n++){let[i,s]=tD[n],a="function"==typeof s?e=>{!0!==e._lexicalHandled&&(e._lexicalHandled=!0,t.isEditable()&&s(e,t))}:e=>{if(!0!==e._lexicalHandled&&(e._lexicalHandled=!0,t.isEditable()))switch(i){case"cut":return rX(t,L,e);case"copy":return rX(t,N,e);case"paste":return rX(t,l,e);case"dragstart":return rX(t,P,e);case"dragover":return rX(t,D,e);case"dragend":return rX(t,A,e);case"focus":return rX(t,O,e);case"blur":return rX(t,I,e);case"drop":return rX(t,R,e)}};e.addEventListener(i,a),r.push(()=>{e.removeEventListener(i,a)})}}(e,this),null!=r&&e.classList.add(...r)):(this._editorState=n,this._window=this._pendingEditorState=null),rQ("root",this,!1,e,t)}}getElementByKey(e){return this._keyToDOMMap.get(e)||null}getEditorState(){return this._editorState}setEditorState(e,t){e.isEmpty()&&j(38),el(this);let r=this._pendingEditorState,n=this._updateTags;t=void 0!==t?t.tag:null,null===r||r.isEmpty()||(null!=t&&n.add(t),rJ(this)),this._pendingEditorState=e,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=t&&n.add(t),rJ(this)}parseEditorState(e,t){e="string"==typeof e?JSON.parse(e):e;let r=ne(),n=rF,i=rB,s=r$,a=this._dirtyElements,o=this._dirtyLeaves,l=this._cloneNotNeeded,c=this._dirtyType;this._dirtyElements=new Map,this._dirtyLeaves=new Set,this._cloneNotNeeded=new Set,this._dirtyType=0,rF=r,rB=!1,r$=this;try{rG(e.root,this._nodes),t&&t(),r._readOnly=!0}catch(u){u instanceof Error&&this._onError(u)}finally{this._dirtyElements=a,this._dirtyLeaves=o,this._cloneNotNeeded=l,this._dirtyType=c,rF=n,rB=i,r$=s}return r}update(e,t){r2(this,e,t)}focus(e,t={}){let r=this._rootElement;null!==r&&(r.setAttribute("autocapitalize","off"),r2(this,()=>{let e=rA(),r=eO();null!==e?e.dirty=!0:0!==r.getChildrenSize()&&("rootStart"===t.defaultSelection?r.selectStart():r.selectEnd())},{onUpdate:()=>{r.removeAttribute("autocapitalize"),e&&e()},tag:"focus"}),null===this._pendingEditorState&&r.removeAttribute("autocapitalize"))}blur(){var e=this._rootElement;null!==e&&e.blur(),null!==(e=e3(this._window))&&e.removeAllRanges()}isEditable(){return this._editable}setEditable(e){this._editable!==e&&(this._editable=e,rQ("editable",this,!0,e))}toJSON(){return{editorState:this._editorState.toJSON()}}}class no extends r6{constructor(e,t){super(t),this.__colSpan=e,this.__rowSpan=1}exportJSON(){return{...super.exportJSON(),colSpan:this.__colSpan,rowSpan:this.__rowSpan}}getColSpan(){return this.__colSpan}setColSpan(e){return this.getWritable().__colSpan=e,this}getRowSpan(){return this.__rowSpan}setRowSpan(e){return this.getWritable().__rowSpan=e,this}}function nl(e){return e instanceof no}class nc extends r6{}function nu(e){return e instanceof nc}class nd extends r6{}function np(e){return e instanceof nd}t.$addUpdateTag=function(e){rH(),rZ()._updateTags.add(e)},t.$applyNodeReplacement=e2,t.$copyNode=e1,t.$createLineBreakNode=tX,t.$createNodeSelection=rP,t.$createParagraphNode=ni,t.$createRangeSelection=function(){let e=new rc("root",0,"element"),t=new rc("root",0,"element");return new rv(e,t,0,"")},t.$createTabNode=rl,t.$createTextNode=rs,t.$getAdjacentNode=eW,t.$getNearestNodeFromDOMNode=eA,t.$getNearestRootOrShadowRoot=eX,t.$getNodeByKey=eP,t.$getPreviousSelection=rN,t.$getRoot=eO,t.$getSelection=rA,t.$getTextContent=function(){let e=rA();return null===e?"":e.getTextContent()},t.$hasAncestor=eJ,t.$hasUpdateTag=function(e){return rZ()._updateTags.has(e)},t.$insertNodes=function(e,t){let r=rA()||rN();return null===r&&(r=eO().selectEnd()),r.insertNodes(e,t)},t.$isBlockElementNode=rk,t.$isDecoratorNode=r4,t.$isElementNode=r3,t.$isInlineElementOrDecoratorNode=function(e){return r3(e)&&e.isInline()||r4(e)&&e.isInline()},t.$isLeafNode=eS,t.$isLineBreakNode=t0,t.$isNodeSelection=rb,t.$isParagraphNode=function(e){return e instanceof nr},t.$isRangeSelection=rm,t.$isRootNode=r7,t.$isRootOrShadowRoot=e0,t.$isTabNode=function(e){return e instanceof ro},t.$isTextNode=ra,t.$nodesOfType=function(e){var t=rW();let r=t._readOnly,n=e.getType();t=t._nodeMap;let i=[];for(let[,s]of t)s instanceof e&&s.__type===n&&(r||s.isAttached())&&i.push(s);return i},t.$normalizeSelection__EXPERIMENTAL=eh,t.$parseSerializedNode=function(e){return rG(e,rZ()._nodes)},t.$setCompositionKey=ek,t.$setSelection=eI,t.$splitNode=e8,t.BLUR_COMMAND=I,t.CAN_REDO_COMMAND={},t.CAN_UNDO_COMMAND={},t.CLEAR_EDITOR_COMMAND={},t.CLEAR_HISTORY_COMMAND={},t.CLICK_COMMAND=n,t.COMMAND_PRIORITY_CRITICAL=4,t.COMMAND_PRIORITY_EDITOR=0,t.COMMAND_PRIORITY_HIGH=3,t.COMMAND_PRIORITY_LOW=1,t.COMMAND_PRIORITY_NORMAL=2,t.CONTROLLED_TEXT_INSERTION_COMMAND=o,t.COPY_COMMAND=N,t.CUT_COMMAND=L,t.DELETE_CHARACTER_COMMAND=i,t.DELETE_LINE_COMMAND=d,t.DELETE_WORD_COMMAND=u,t.DEPRECATED_$computeGridMap=rj,t.DEPRECATED_$createGridSelection=function(){let e=new rc("root",0,"element"),t=new rc("root",0,"element");return new rg("root",e,t)},t.DEPRECATED_$getNodeTriplet=function(e){e instanceof no||(e instanceof tY?(e=e9(e,nl),nl(e)||j(114)):(e=e9(e.getNode(),nl),nl(e)||j(114)));let t=e.getParent();np(t)||j(115);let r=t.getParent();return nu(r)||j(116),[e,t,r]},t.DEPRECATED_$isGridCellNode=nl,t.DEPRECATED_$isGridNode=nu,t.DEPRECATED_$isGridRowNode=np,t.DEPRECATED_$isGridSelection=ry,t.DEPRECATED_GridCellNode=no,t.DEPRECATED_GridNode=nc,t.DEPRECATED_GridRowNode=nd,t.DRAGEND_COMMAND=A,t.DRAGOVER_COMMAND=D,t.DRAGSTART_COMMAND=P,t.DROP_COMMAND=R,t.DecoratorNode=r5,t.ElementNode=r6,t.FOCUS_COMMAND=O,t.FORMAT_ELEMENT_COMMAND={},t.FORMAT_TEXT_COMMAND=p,t.INDENT_CONTENT_COMMAND={},t.INSERT_LINE_BREAK_COMMAND=s,t.INSERT_PARAGRAPH_COMMAND=a,t.INSERT_TAB_COMMAND={},t.KEY_ARROW_DOWN_COMMAND=_,t.KEY_ARROW_LEFT_COMMAND=v,t.KEY_ARROW_RIGHT_COMMAND=g,t.KEY_ARROW_UP_COMMAND=w,t.KEY_BACKSPACE_COMMAND=T,t.KEY_DELETE_COMMAND=C,t.KEY_DOWN_COMMAND=m,t.KEY_ENTER_COMMAND=x,t.KEY_ESCAPE_COMMAND=E,t.KEY_MODIFIER_COMMAND=M,t.KEY_SPACE_COMMAND=S,t.KEY_TAB_COMMAND=k,t.LineBreakNode=tJ,t.MOVE_TO_END=y,t.MOVE_TO_START=b,t.OUTDENT_CONTENT_COMMAND={},t.PASTE_COMMAND=l,t.ParagraphNode=nr,t.REDO_COMMAND=f,t.REMOVE_TEXT_COMMAND=c,t.RootNode=r9,t.SELECTION_CHANGE_COMMAND=r,t.TabNode=ro,t.TextNode=t3,t.UNDO_COMMAND=h,t.createCommand=function(){return{}},t.createEditor=function(e){let t,r;var n,i=e||{},s=r$,a=i.theme||{};let o=void 0===e?s:i.parentEditor||null,l=i.disableEvents||!1,c=ne(),u=i.namespace||(null!==o?o._config.namespace:e$()),d=i.editorState,p=[r9,t3,tJ,ro,nr,...i.nodes||[]],h=i.onError;if(i=void 0===i.editable||i.editable,void 0===e&&null!==s)e=s._nodes;else for(e=new Map,s=0;s<p.length;s++){let f=p[s],m=null;var g=null;"function"!=typeof f&&(f=(g=f).replace,m=g.with,g=g.withKlass?g.withKlass:null);let y=f.getType(),v=f.transform(),b=new Set;null!==v&&b.add(v),e.set(y,{klass:f,replace:m,replaceWithKlass:g,transforms:b})}return a=new na(c,o,e,{disableEvents:l,namespace:u,theme:a},h||console.error,(n=e,t=new Map,r=new Set,n.forEach(e=>{if(null!=(e=null!=e.klass.importDOM?e.klass.importDOM.bind(e.klass):null)&&!r.has(e)){r.add(e);var n=e();null!==n&&Object.keys(n).forEach(e=>{let r=t.get(e);void 0===r&&(r=[],t.set(e,r)),r.push(n[e])})}}),t),i),void 0!==d&&(a._pendingEditorState=d,a._dirtyType=2),a},t.getNearestEditorFromDOMNode=eb,t.isSelectionCapturedInDecoratorInput=ey,t.isSelectionWithinEditor=ev},59514:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Consumer=void 0;let n=r(38562),i=r(54493),s=r(99992),a=new n.Logger("Consumer");class o extends i.EnhancedEventEmitter{constructor({id:e,localId:t,producerId:r,rtpReceiver:n,track:s,rtpParameters:o,appData:l}){super(),this._closed=!1,this._observer=new i.EnhancedEventEmitter,a.debug("constructor()"),this._id=e,this._localId=t,this._producerId=r,this._rtpReceiver=n,this._track=s,this._rtpParameters=o,this._paused=!s.enabled,this._appData=l||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(a.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(a.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new s.InvalidStateError("closed");return new Promise((e,t)=>{this.safeEmit("@getstats",e,t)})}pause(){if(a.debug("pause()"),this._closed){a.error("pause() | Consumer closed");return}if(this._paused){a.debug("pause() | Consumer is already paused");return}this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause")}resume(){if(a.debug("resume()"),this._closed){a.error("resume() | Consumer closed");return}if(!this._paused){a.debug("resume() | Consumer is already resumed");return}this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")}onTrackEnded(){a.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch(e){}}}t.Consumer=o},31623:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataConsumer=void 0;let n=r(38562),i=r(54493),s=new n.Logger("DataConsumer");class a extends i.EnhancedEventEmitter{constructor({id:e,dataProducerId:t,dataChannel:r,sctpStreamParameters:n,appData:a}){super(),this._closed=!1,this._observer=new i.EnhancedEventEmitter,s.debug("constructor()"),this._id=e,this._dataProducerId=t,this._dataChannel=r,this._sctpStreamParameters=n,this._appData=a||{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(e){this._dataChannel.binaryType=e}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(s.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(s.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(s.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",e=>{if(this._closed)return;let{error:t}=e;t||(t=Error("unknown DataChannel error")),"sctp-failure"===t.errorDetail?s.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",t.sctpCauseCode,t.message):s.error('DataChannel "error" event: %o',t),this.safeEmit("error",t)}),this._dataChannel.addEventListener("close",()=>{this._closed||(s.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",e=>{this._closed||this.safeEmit("message",e.data)})}}t.DataConsumer=a},25504:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataProducer=void 0;let n=r(38562),i=r(54493),s=r(99992),a=new n.Logger("DataProducer");class o extends i.EnhancedEventEmitter{constructor({id:e,dataChannel:t,sctpStreamParameters:r,appData:n}){super(),this._closed=!1,this._observer=new i.EnhancedEventEmitter,a.debug("constructor()"),this._id=e,this._dataChannel=t,this._sctpStreamParameters=r,this._appData=n||{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(e){this._dataChannel.bufferedAmountLowThreshold=e}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(a.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(a.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(e){if(a.debug("send()"),this._closed)throw new s.InvalidStateError("closed");this._dataChannel.send(e)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(a.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",e=>{if(this._closed)return;let{error:t}=e;t||(t=Error("unknown DataChannel error")),"sctp-failure"===t.errorDetail?a.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",t.sctpCauseCode,t.message):a.error('DataChannel "error" event: %o',t),this.safeEmit("error",t)}),this._dataChannel.addEventListener("close",()=>{this._closed||(a.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||a.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}t.DataProducer=o},43120:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Device=t.detectDevice=void 0;let a=r(42238),o=r(38562),l=r(54493),c=r(99992),u=s(r(13347)),d=s(r(45280)),p=r(35202),h=r(32960),f=r(66656),m=r(75372),g=r(5697),y=r(20564),v=r(61419),b=r(29862),w=r(32205),_=r(37392),x=r(23433),S=r(44770),T=new o.Logger("Device");function E(){if("object"==typeof navigator&&"ReactNative"===navigator.product){if(T.debug("detectDevice() | React-Native detected"),"undefined"==typeof RTCPeerConnection){T.warn("detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?");return}return"undefined"!=typeof RTCRtpTransceiver?(T.debug("detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(T.debug("detectDevice() | ReactNative PlanB handler chosen"),"ReactNative")}if("object"==typeof navigator&&"string"==typeof navigator.userAgent){let e=navigator.userAgent,t=new a.UAParser(e);T.debug("detectDevice() | browser detected [ua:%s, parsed:%o]",e,t.getResult());let r=t.getBrowser(),n=r.name?.toLowerCase()??"",i=parseInt(r.major??"0"),s=t.getEngine(),o=s.name?.toLowerCase()??"",l=t.getOS(),c=l.name?.toLowerCase()??"",u=parseFloat(l.version??"0"),d="ios"===c,p=["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(n),h=["firefox","mobile firefox","mobile focus"].includes(n),f=["safari","mobile safari"].includes(n),m=["edge"].includes(n);if((p||m)&&!d&&i>=111)return"Chrome111";if(p&&!d&&i>=74||m&&!d&&i>=88)return"Chrome74";if(p&&!d&&i>=70)return"Chrome70";if(p&&!d&&i>=67)return"Chrome67";else if(p&&!d&&i>=55)return"Chrome55";else if(h&&!d&&i>=60)return"Firefox60";else if(h&&d&&u>=14.3)return"Safari12";else if(f&&i>=12&&"undefined"!=typeof RTCRtpTransceiver&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";else if(f&&i>=11)return"Safari11";else if(m&&!d&&i>=11&&i<=18)return"Edge11";else if("webkit"===o&&d&&u>=14.3&&"undefined"!=typeof RTCRtpTransceiver&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";else if("blink"===o){let g=e.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(!g)return"Chrome111";{let y=Number(g[1]);return y>=111?"Chrome111":y>=74?"Chrome74":y>=70?"Chrome70":y>=67?"Chrome67":"Chrome55"}}else{T.warn("detectDevice() | browser not supported [name:%s, version:%s]",n,i);return}}T.warn("detectDevice() | unknown device")}t.detectDevice=E,t.Device=class{constructor({handlerName:e,handlerFactory:t,Handler:r}={}){if(this._loaded=!1,this._observer=new l.EnhancedEventEmitter,T.debug("constructor()"),r){if(T.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),"string"==typeof r)e=r;else throw TypeError("non string Handler option no longer supported, use handlerFactory instead")}if(e&&t)throw TypeError("just one of handlerName or handlerInterface can be given");if(t)this._handlerFactory=t;else{if(e)T.debug("constructor() | handler given: %s",e);else if(e=E())T.debug("constructor() | detected handler: %s",e);else throw new c.UnsupportedError("device not supported");switch(e){case"Chrome111":this._handlerFactory=h.Chrome111.createFactory();break;case"Chrome74":this._handlerFactory=f.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=m.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=g.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=y.Chrome55.createFactory();break;case"Firefox60":this._handlerFactory=v.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=b.Safari12.createFactory();break;case"Safari11":this._handlerFactory=w.Safari11.createFactory();break;case"Edge11":this._handlerFactory=_.Edge11.createFactory();break;case"ReactNativeUnifiedPlan":this._handlerFactory=x.ReactNativeUnifiedPlan.createFactory();break;case"ReactNative":this._handlerFactory=S.ReactNative.createFactory();break;default:throw TypeError(`unknown handlerName "${e}"`)}}let n=this._handlerFactory();this._handlerName=n.name,n.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new c.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new c.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:e}){let t;T.debug("load() [routerRtpCapabilities:%o]",e),e=u.clone(e,void 0);try{if(this._loaded)throw new c.InvalidStateError("already loaded");d.validateRtpCapabilities(e),t=this._handlerFactory();let r=await t.getNativeRtpCapabilities();T.debug("load() | got native RTP capabilities:%o",r),d.validateRtpCapabilities(r),this._extendedRtpCapabilities=d.getExtendedRtpCapabilities(r,e),T.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=d.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=d.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=d.getRecvRtpCapabilities(this._extendedRtpCapabilities),d.validateRtpCapabilities(this._recvRtpCapabilities),T.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await t.getNativeSctpCapabilities(),T.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),d.validateSctpCapabilities(this._sctpCapabilities),T.debug("load() succeeded"),this._loaded=!0,t.close()}catch(n){throw t&&t.close(),n}}canProduce(e){if(this._loaded){if("audio"!==e&&"video"!==e)throw TypeError(`invalid kind "${e}"`)}else throw new c.InvalidStateError("not loaded");return this._canProduceByKind[e]}createSendTransport({id:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:a,additionalSettings:o,proprietaryConstraints:l,appData:c}){return T.debug("createSendTransport()"),this.createTransport({direction:"send",id:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:a,additionalSettings:o,proprietaryConstraints:l,appData:c})}createRecvTransport({id:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:a,additionalSettings:o,proprietaryConstraints:l,appData:c}){return T.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:a,additionalSettings:o,proprietaryConstraints:l,appData:c})}createTransport({direction:e,id:t,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:l,proprietaryConstraints:u,appData:d}){if(this._loaded){if("string"!=typeof t)throw TypeError("missing id");if("object"!=typeof r)throw TypeError("missing iceParameters");if(Array.isArray(n)){if("object"!=typeof i)throw TypeError("missing dtlsParameters");if(s&&"object"!=typeof s)throw TypeError("wrong sctpParameters");if(d&&"object"!=typeof d)throw TypeError("if given, appData must be an object")}else throw TypeError("missing iceCandidates")}else throw new c.InvalidStateError("not loaded");let h=new p.Transport({direction:e,id:t,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:a,iceTransportPolicy:o,additionalSettings:l,proprietaryConstraints:u,appData:d,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",h),h}}},54493:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EnhancedEventEmitter=void 0;let n=r(17187),i=r(38562),s=new i.Logger("EnhancedEventEmitter");class a extends n.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(e,...t){return super.emit(e,...t)}safeEmit(e,...t){let r=super.listenerCount(e);try{return super.emit(e,...t)}catch(n){return s.error("safeEmit() | event listener threw an error [eventName:%s]:%o",e,n),Boolean(r)}}on(e,t){return super.on(e,t),this}off(e,t){return super.off(e,t),this}addListener(e,t){return super.on(e,t),this}prependListener(e,t){return super.prependListener(e,t),this}once(e,t){return super.once(e,t),this}prependOnceListener(e,t){return super.prependOnceListener(e,t),this}removeListener(e,t){return super.off(e,t),this}removeAllListeners(e){return super.removeAllListeners(e),this}listenerCount(e){return super.listenerCount(e)}listeners(e){return super.listeners(e)}rawListeners(e){return super.rawListeners(e)}}t.EnhancedEventEmitter=a},38562:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;let i=n(r(11227)),s="mediasoup-client";t.Logger=class{constructor(e){e?(this._debug=(0,i.default)(`${s}:${e}`),this._warn=(0,i.default)(`${s}:WARN:${e}`),this._error=(0,i.default)(`${s}:ERROR:${e}`)):(this._debug=(0,i.default)(s),this._warn=(0,i.default)(`${s}:WARN`),this._error=(0,i.default)(`${s}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},26569:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Producer=void 0;let n=r(38562),i=r(54493),s=r(99992),a=new n.Logger("Producer");class o extends i.EnhancedEventEmitter{constructor({id:e,localId:t,rtpSender:r,track:n,rtpParameters:s,stopTracks:o,disableTrackOnPause:l,zeroRtpOnPause:c,appData:u}){super(),this._closed=!1,this._observer=new i.EnhancedEventEmitter,a.debug("constructor()"),this._id=e,this._localId=t,this._rtpSender=r,this._track=n,this._kind=n.kind,this._rtpParameters=s,this._paused=!!l&&!n.enabled,this._maxSpatialLayer=void 0,this._stopTracks=o,this._disableTrackOnPause=l,this._zeroRtpOnPause=c,this._appData=u||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){this._closed||(a.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(a.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new s.InvalidStateError("closed");return new Promise((e,t)=>{this.safeEmit("@getstats",e,t)})}pause(){if(a.debug("pause()"),this._closed){a.error("pause() | Producer closed");return}this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((e,t)=>{this.safeEmit("@pause",e,t)}).catch(()=>{}),this._observer.safeEmit("pause")}resume(){if(a.debug("resume()"),this._closed){a.error("resume() | Producer closed");return}this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((e,t)=>{this.safeEmit("@resume",e,t)}).catch(()=>{}),this._observer.safeEmit("resume")}async replaceTrack({track:e}){if(a.debug("replaceTrack() [track:%o]",e),this._closed){if(e&&this._stopTracks)try{e.stop()}catch(t){}throw new s.InvalidStateError("closed")}if(e&&"ended"===e.readyState)throw new s.InvalidStateError("track ended");if(e===this._track){a.debug("replaceTrack() | same track, ignored");return}await new Promise((t,r)=>{this.safeEmit("@replacetrack",e,t,r)}),this.destroyTrack(),this._track=e,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()}async setMaxSpatialLayer(e){if(this._closed)throw new s.InvalidStateError("closed");if("video"!==this._kind)throw new s.UnsupportedError("not a video Producer");if("number"!=typeof e)throw TypeError("invalid spatialLayer");e!==this._maxSpatialLayer&&(await new Promise((t,r)=>{this.safeEmit("@setmaxspatiallayer",e,t,r)}).catch(()=>{}),this._maxSpatialLayer=e)}async setRtpEncodingParameters(e){if(this._closed)throw new s.InvalidStateError("closed");if("object"!=typeof e)throw TypeError("invalid params");await new Promise((t,r)=>{this.safeEmit("@setrtpencodingparameters",e,t,r)})}onTrackEnded(){a.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch(e){}}}t.Producer=o},94879:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},37669:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},35202:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Transport=void 0;let o=r(32186),l=a(r(54375)),c=r(38562),u=r(54493),d=r(99992),p=s(r(13347)),h=s(r(45280)),f=r(26569),m=r(59514),g=r(25504),y=r(31623),v=new c.Logger("Transport");class b{constructor(e){this.consumerOptions=e,this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class w extends u.EnhancedEventEmitter{constructor({direction:e,id:t,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:a,iceTransportPolicy:l,additionalSettings:c,proprietaryConstraints:d,appData:h,handlerFactory:f,extendedRtpCapabilities:m,canProduceByKind:g}){super(),this._closed=!1,this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new o.AwaitQueue,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new u.EnhancedEventEmitter,v.debug("constructor() [id:%s, direction:%s]",t,e),this._id=t,this._direction=e,this._extendedRtpCapabilities=m,this._canProduceByKind=g,this._maxSctpMessageSize=s?s.maxMessageSize:null,delete(c=p.clone(c,{})).iceServers,delete c.iceTransportPolicy,delete c.bundlePolicy,delete c.rtcpMuxPolicy,delete c.sdpSemantics,this._handler=f(),this._handler.run({direction:e,iceParameters:r,iceCandidates:n,dtlsParameters:i,sctpParameters:s,iceServers:a,iceTransportPolicy:l,additionalSettings:c,proprietaryConstraints:d,extendedRtpCapabilities:m}),this._appData=h||{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(e){this._appData=e}get observer(){return this._observer}close(){if(!this._closed){for(let e of(v.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._producers.values()))e.transportClosed();for(let t of(this._producers.clear(),this._consumers.values()))t.transportClosed();for(let r of(this._consumers.clear(),this._dataProducers.values()))r.transportClosed();for(let n of(this._dataProducers.clear(),this._dataConsumers.values()))n.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new d.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:e}){if(v.debug("restartIce()"),this._closed)throw new d.InvalidStateError("closed");if(!e)throw TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(e),"transport.restartIce()")}async updateIceServers({iceServers:e}={}){if(v.debug("updateIceServers()"),this._closed)throw new d.InvalidStateError("closed");if(!Array.isArray(e))throw TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(e),"transport.updateIceServers()")}async produce({track:e,encodings:t,codecOptions:r,codec:n,stopTracks:i=!0,disableTrackOnPause:s=!0,zeroRtpOnPause:a=!1,appData:o={}}={}){if(v.debug("produce() [track:%o]",e),this._closed)throw new d.InvalidStateError("closed");if(e){if("send"!==this._direction)throw new d.UnsupportedError("not a sending Transport");if(this._canProduceByKind[e.kind]){if("ended"===e.readyState)throw new d.InvalidStateError("track ended");if(0===this.listenerCount("connect")&&"new"===this._connectionState)throw TypeError('no "connect" listener set into this transport');if(0===this.listenerCount("produce"))throw TypeError('no "produce" listener set into this transport');else if(o&&"object"!=typeof o)throw TypeError("if given, appData must be an object")}else throw new d.UnsupportedError(`cannot produce ${e.kind}`)}else throw TypeError("missing track");return this._awaitQueue.push(async()=>{let l;if(t&&!Array.isArray(t))throw TypeError("encodings must be an array");t&&0===t.length?l=void 0:t&&(l=t.map(e=>{let t={active:!0};return!1===e.active&&(t.active=!1),"boolean"==typeof e.dtx&&(t.dtx=e.dtx),"string"==typeof e.scalabilityMode&&(t.scalabilityMode=e.scalabilityMode),"number"==typeof e.scaleResolutionDownBy&&(t.scaleResolutionDownBy=e.scaleResolutionDownBy),"number"==typeof e.maxBitrate&&(t.maxBitrate=e.maxBitrate),"number"==typeof e.maxFramerate&&(t.maxFramerate=e.maxFramerate),"boolean"==typeof e.adaptivePtime&&(t.adaptivePtime=e.adaptivePtime),"string"==typeof e.priority&&(t.priority=e.priority),"string"==typeof e.networkPriority&&(t.networkPriority=e.networkPriority),t}));let{localId:c,rtpParameters:u,rtpSender:d}=await this._handler.send({track:e,encodings:l,codecOptions:r,codec:n});try{h.validateRtpParameters(u);let{id:p}=await new Promise((t,r)=>{this.safeEmit("produce",{kind:e.kind,rtpParameters:u,appData:o},t,r)}),m=new f.Producer({id:p,localId:c,rtpSender:d,track:e,rtpParameters:u,stopTracks:i,disableTrackOnPause:s,zeroRtpOnPause:a,appData:o});return this._producers.set(m.id,m),this.handleProducer(m),this._observer.safeEmit("newproducer",m),m}catch(g){throw this._handler.stopSending(c).catch(()=>{}),g}},"transport.produce()").catch(t=>{if(i)try{e.stop()}catch(r){}throw t})}async consume({id:e,producerId:t,kind:r,rtpParameters:n,streamId:i,appData:s={}}){if(v.debug("consume()"),n=p.clone(n,void 0),this._closed)throw new d.InvalidStateError("closed");if("recv"!==this._direction)throw new d.UnsupportedError("not a receiving Transport");if("string"!=typeof e)throw TypeError("missing id");if("string"!=typeof t)throw TypeError("missing producerId");if("audio"!==r&&"video"!==r)throw TypeError(`invalid kind '${r}'`);if(0===this.listenerCount("connect")&&"new"===this._connectionState)throw TypeError('no "connect" listener set into this transport');if(s&&"object"!=typeof s)throw TypeError("if given, appData must be an object");let a=h.canReceive(n,this._extendedRtpCapabilities);if(!a)throw new d.UnsupportedError("cannot consume this Producer");let o=new b({id:e,producerId:t,kind:r,rtpParameters:n,streamId:i,appData:s});return this._pendingConsumerTasks.push(o),(0,l.default)(()=>{this._closed||!1!==this._consumerCreationInProgress||this.createPendingConsumers()}),o.promise}async produceData({ordered:e=!0,maxPacketLifeTime:t,maxRetransmits:r,label:n="",protocol:i="",appData:s={}}={}){if(v.debug("produceData()"),this._closed)throw new d.InvalidStateError("closed");if("send"!==this._direction)throw new d.UnsupportedError("not a sending Transport");if(this._maxSctpMessageSize){if(0===this.listenerCount("connect")&&"new"===this._connectionState)throw TypeError('no "connect" listener set into this transport');if(0===this.listenerCount("producedata"))throw TypeError('no "producedata" listener set into this transport');if(s&&"object"!=typeof s)throw TypeError("if given, appData must be an object")}else throw new d.UnsupportedError("SCTP not enabled by remote Transport");return(t||r)&&(e=!1),this._awaitQueue.push(async()=>{let{dataChannel:a,sctpStreamParameters:o}=await this._handler.sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i});h.validateSctpStreamParameters(o);let{id:l}=await new Promise((e,t)=>{this.safeEmit("producedata",{sctpStreamParameters:o,label:n,protocol:i,appData:s},e,t)}),c=new g.DataProducer({id:l,dataChannel:a,sctpStreamParameters:o,appData:s});return this._dataProducers.set(c.id,c),this.handleDataProducer(c),this._observer.safeEmit("newdataproducer",c),c},"transport.produceData()")}async consumeData({id:e,dataProducerId:t,sctpStreamParameters:r,label:n="",protocol:i="",appData:s={}}){if(v.debug("consumeData()"),r=p.clone(r,void 0),this._closed)throw new d.InvalidStateError("closed");if("recv"!==this._direction)throw new d.UnsupportedError("not a receiving Transport");if(this._maxSctpMessageSize){if("string"!=typeof e)throw TypeError("missing id");if("string"!=typeof t)throw TypeError("missing dataProducerId");if(0===this.listenerCount("connect")&&"new"===this._connectionState)throw TypeError('no "connect" listener set into this transport');else if(s&&"object"!=typeof s)throw TypeError("if given, appData must be an object")}else throw new d.UnsupportedError("SCTP not enabled by remote Transport");return h.validateSctpStreamParameters(r),this._awaitQueue.push(async()=>{let{dataChannel:a}=await this._handler.receiveDataChannel({sctpStreamParameters:r,label:n,protocol:i}),o=new y.DataConsumer({id:e,dataProducerId:t,dataChannel:a,sctpStreamParameters:r,appData:s});return this._dataConsumers.set(o.id,o),this.handleDataConsumer(o),this._observer.safeEmit("newdataconsumer",o),o},"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{let e;if(0===this._pendingConsumerTasks.length){v.debug("createPendingConsumers() | there is no Consumer to be created");return}let t=[...this._pendingConsumerTasks];this._pendingConsumerTasks=[];let r=[];for(let n of t){let{id:i,kind:s,rtpParameters:a,streamId:o}=n.consumerOptions;r.push({trackId:i,kind:s,rtpParameters:a,streamId:o})}try{let l=await this._handler.receive(r);for(let c=0;c<l.length;++c){let u=t[c],d=l[c],{id:p,producerId:f,kind:g,rtpParameters:y,appData:b}=u.consumerOptions,{localId:w,rtpReceiver:_,track:x}=d,S=new m.Consumer({id:p,localId:w,producerId:f,rtpReceiver:_,track:x,rtpParameters:y,appData:b});this._consumers.set(S.id,S),this.handleConsumer(S),this._probatorConsumerCreated||e||"video"!==g||(e=S),this._observer.safeEmit("newconsumer",S),u.resolve(S)}}catch(E){for(let T of t)T.reject(E)}if(e)try{let C=h.generateProbatorRtpParameters(e.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:C}]),v.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(k){v.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",k)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(0===this._pendingPauseConsumers.size){v.debug("pausePendingConsumers() | there is no Consumer to be paused");return}let e=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{let t=e.map(e=>e.localId);await this._handler.pauseReceiving(t)}catch(r){v.error("pausePendingConsumers() | failed to pause Consumers:",r)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(0===this._pendingResumeConsumers.size){v.debug("resumePendingConsumers() | there is no Consumer to be resumed");return}let e=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{let t=e.map(e=>e.localId);await this._handler.resumeReceiving(t)}catch(r){v.error("resumePendingConsumers() | failed to resume Consumers:",r)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(0===this._pendingCloseConsumers.size){v.debug("closePendingConsumers() | there is no Consumer to be closed");return}let e=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(e.map(e=>e.localId))}catch(t){v.error("closePendingConsumers() | failed to close Consumers:",t)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){let e=this._handler;e.on("@connect",({dtlsParameters:e},t,r)=>{if(this._closed){r(new d.InvalidStateError("closed"));return}this.safeEmit("connect",{dtlsParameters:e},t,r)}),e.on("@connectionstatechange",e=>{e!==this._connectionState&&(v.debug("connection state changed to %s",e),this._connectionState=e,this._closed||this.safeEmit("connectionstatechange",e))})}handleProducer(e){e.on("@close",()=>{this._producers.delete(e.id),this._closed||this._awaitQueue.push(async()=>await this._handler.stopSending(e.localId),"producer @close event").catch(e=>v.warn("producer.close() failed:%o",e))}),e.on("@pause",(t,r)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(e.localId),"producer @pause event").then(t).catch(r)}),e.on("@resume",(t,r)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(e.localId),"producer @resume event").then(t).catch(r)}),e.on("@replacetrack",(t,r,n)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(e.localId,t),"producer @replacetrack event").then(r).catch(n)}),e.on("@setmaxspatiallayer",(t,r,n)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(e.localId,t),"producer @setmaxspatiallayer event").then(r).catch(n)}),e.on("@setrtpencodingparameters",(t,r,n)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(e.localId,t),"producer @setrtpencodingparameters event").then(r).catch(n)}),e.on("@getstats",(t,r)=>{if(this._closed)return r(new d.InvalidStateError("closed"));this._handler.getSenderStats(e.localId).then(t).catch(r)})}handleConsumer(e){e.on("@close",()=>{this._consumers.delete(e.id),this._pendingPauseConsumers.delete(e.id),this._pendingResumeConsumers.delete(e.id),this._closed||(this._pendingCloseConsumers.set(e.id,e),!1===this._consumerCloseInProgress&&this.closePendingConsumers())}),e.on("@pause",()=>{this._pendingResumeConsumers.has(e.id)&&this._pendingResumeConsumers.delete(e.id),this._pendingPauseConsumers.set(e.id,e),(0,l.default)(()=>{this._closed||!1!==this._consumerPauseInProgress||this.pausePendingConsumers()})}),e.on("@resume",()=>{this._pendingPauseConsumers.has(e.id)&&this._pendingPauseConsumers.delete(e.id),this._pendingResumeConsumers.set(e.id,e),(0,l.default)(()=>{this._closed||!1!==this._consumerResumeInProgress||this.resumePendingConsumers()})}),e.on("@getstats",(t,r)=>{if(this._closed)return r(new d.InvalidStateError("closed"));this._handler.getReceiverStats(e.localId).then(t).catch(r)})}handleDataProducer(e){e.on("@close",()=>{this._dataProducers.delete(e.id)})}handleDataConsumer(e){e.on("@close",()=>{this._dataConsumers.delete(e.id)})}}t.Transport=w},99992:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidStateError=t.UnsupportedError=void 0;class r extends Error{constructor(e){super(e),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,r):this.stack=Error(e).stack}}t.UnsupportedError=r;class n extends Error{constructor(e){super(e),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,n):this.stack=Error(e).stack}}t.InvalidStateError=n},32960:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome111=void 0;let a=s(r(70766)),o=r(38562),l=s(r(13347)),c=s(r(45280)),u=s(r(82267)),d=s(r(29072)),p=s(r(58954)),h=r(99992),f=r(89316),m=r(37910),g=r(82770),y=new o.Logger("Chrome111"),v={OS:1024,MIS:1024};class b extends f.HandlerInterface{static createFactory(){return()=>new b}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome111"}close(){if(y.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}}async getNativeRtpCapabilities(){y.debug("getNativeRtpCapabilities()");let e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");let t=await e.createOffer();try{e.close()}catch(r){}let n=a.parse(t.sdp),i=u.extractRtpCapabilities({sdpObject:n});return p.addNackSuppportForOpus(i),i}catch(o){try{e.close()}catch(s){}throw o}}async getNativeSctpCapabilities(){return y.debug("getNativeSctpCapabilities()"),{numStreams:v}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:a,additionalSettings:o,proprietaryConstraints:l,extendedRtpCapabilities:u}){this.assertNotClosed(),y.debug("run()"),this._direction=e,this._remoteSdp=new m.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i}),this._sendingRtpParametersByKind={audio:c.getSendingRtpParameters("audio",u),video:c.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:c.getSendingRemoteRtpParameters("audio",u),video:c.getSendingRemoteRtpParameters("video",u)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...o},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(e){this.assertNotClosed(),y.debug("updateIceServers()");let t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(this.assertNotClosed(),y.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady){if("send"===this._direction){let t=await this._pc.createOffer({iceRestart:!0});y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),await this._pc.setLocalDescription(t);let r={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{let n={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){if(this.assertNotClosed(),this.assertSendDirection(),y.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),t&&t.length>1){t.forEach((e,t)=>{e.rid=`r${t}`});let i=1,s=1;for(let o of t){let p=o.scalabilityMode?(0,g.parse)(o.scalabilityMode).temporalLayers:3;p>s&&(s=p)}for(let h of t)h.rid=`r${i++}`,h.scalabilityMode=`L1T${s}`}let f=l.clone(this._sendingRtpParametersByKind[e.kind],{});f.codecs=c.reduceCodecs(f.codecs,n);let m=l.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});m.codecs=c.reduceCodecs(m.codecs,n);let v=this._remoteSdp.getNextMediaSectionIdx(),b=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:t}),w=await this._pc.createOffer(),_=a.parse(w.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:_}),y.debug("send() | calling pc.setLocalDescription() [offer:%o]",w),await this._pc.setLocalDescription(w);let x=b.mid;f.mid=x,_=a.parse(this._pc.localDescription.sdp);let S=_.media[v.idx];if(f.rtcp.cname=u.getCname({offerMediaObject:S}),t){if(1===t.length){let T=d.getRtpEncodings({offerMediaObject:S});Object.assign(T[0],t[0]),f.encodings=T}else f.encodings=t}else f.encodings=d.getRtpEncodings({offerMediaObject:S});this._remoteSdp.send({offerMediaObject:S,reuseMid:v.reuseMid,offerRtpParameters:f,answerRtpParameters:m,codecOptions:r,extmapAllowMixed:!0});let E={type:"answer",sdp:this._remoteSdp.getSdp()};return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]",E),await this._pc.setRemoteDescription(E),this._mapMidTransceiver.set(x,b),{localId:x,rtpParameters:f,rtpSender:b.sender}}async stopSending(e){if(this.assertSendDirection(),y.debug("stopSending() [localId:%s]",e),this._closed)return;let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");t.sender.replaceTrack(null),this._pc.removeTrack(t.sender);let r=this._remoteSdp.closeMediaSection(t.mid);if(r)try{t.stop()}catch(n){}let i=await this._pc.createOffer();y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);let s={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),y.debug("pauseSending() [localId:%s]",e);let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");t.direction="inactive",this._remoteSdp.pauseMediaSection(e);let r=await this._pc.createOffer();y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);let n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),y.debug("resumeSending() [localId:%s]",e);let t=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!t)throw Error("associated RTCRtpTransceiver not found");t.direction="sendonly";let r=await this._pc.createOffer();y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);let n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){this.assertNotClosed(),this.assertSendDirection(),t?y.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):y.debug("replaceTrack() [localId:%s, no track]",e);let r=this._mapMidTransceiver.get(e);if(!r)throw Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this.assertNotClosed(),this.assertSendDirection(),y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);let r=this._mapMidTransceiver.get(e);if(!r)throw Error("associated RTCRtpTransceiver not found");let n=r.sender.getParameters();n.encodings.forEach((e,r)=>{r<=t?e.active=!0:e.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);let i=await this._pc.createOffer();y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);let s={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async setRtpEncodingParameters(e,t){this.assertNotClosed(),this.assertSendDirection(),y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);let r=this._mapMidTransceiver.get(e);if(!r)throw Error("associated RTCRtpTransceiver not found");let n=r.sender.getParameters();n.encodings.forEach((e,r)=>{n.encodings[r]={...e,...t}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);let i=await this._pc.createOffer();y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);let s={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i}){this.assertNotClosed(),this.assertSendDirection();let s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:i};y.debug("sendDataChannel() [options:%o]",s);let o=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,!this._hasDataChannelMediaSection){let l=await this._pc.createOffer(),c=a.parse(l.sdp),u=c.media.find(e=>"application"===e.type);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});let d={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d),this._hasDataChannelMediaSection=!0}let p={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:o,sctpStreamParameters:p}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();let t=[],r=new Map;for(let n of e){let{trackId:i,kind:s,rtpParameters:o,streamId:l}=n;y.debug("receive() [trackId:%s, kind:%s]",i,s);let c=o.mid||String(this._mapMidTransceiver.size);r.set(i,c),this._remoteSdp.receive({mid:c,kind:s,offerRtpParameters:o,streamId:l||o.rtcp.cname,trackId:i})}let d={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);let p=await this._pc.createAnswer(),h=a.parse(p.sdp);for(let f of e){let{trackId:m,rtpParameters:g}=f,v=r.get(m),b=h.media.find(e=>String(e.mid)===v);u.applyCodecParameters({offerRtpParameters:g,answerMediaObject:b})}for(let w of(p={type:"answer",sdp:a.write(h)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:h}),y.debug("receive() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p),e)){let{trackId:_}=w,x=r.get(_),S=this._pc.getTransceivers().find(e=>e.mid===x);if(S)this._mapMidTransceiver.set(x,S),t.push({localId:x,track:S.receiver.track,rtpReceiver:S.receiver});else throw Error("new RTCRtpTransceiver not found")}return t}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(let t of e){y.debug("stopReceiving() [localId:%s]",t);let r=this._mapMidTransceiver.get(t);if(!r)throw Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(r.mid)}let n={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();for(let s of(y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i),e))this._mapMidTransceiver.delete(s)}async pauseReceiving(e){for(let t of(this.assertNotClosed(),this.assertRecvDirection(),e)){y.debug("pauseReceiving() [localId:%s]",t);let r=this._mapMidTransceiver.get(t);if(!r)throw Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(t)}let n={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}async resumeReceiving(e){for(let t of(this.assertNotClosed(),this.assertRecvDirection(),e)){y.debug("resumeReceiving() [localId:%s]",t);let r=this._mapMidTransceiver.get(t);if(!r)throw Error("associated RTCRtpTransceiver not found");r.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(t)}let n={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}async getReceiverStats(e){this.assertNotClosed(),this.assertRecvDirection();let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertNotClosed(),this.assertRecvDirection();let{streamId:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:o}=e,l={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:o,protocol:r};y.debug("receiveDataChannel() [options:%o]",l);let c=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();let u={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let d=await this._pc.createAnswer();if(!this._transportReady){let p=a.parse(d.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:c}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=a.parse(this._pc.localDescription.sdp));let r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new h.InvalidStateError("method called in a closed handler")}assertSendDirection(){if("send"!==this._direction)throw Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw Error('method can just be called for handlers with "recv" direction')}}t.Chrome111=b},20564:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome55=void 0;let a=s(r(70766)),o=r(38562),l=r(99992),c=s(r(13347)),u=s(r(45280)),d=s(r(82267)),p=s(r(89875)),h=r(89316),f=r(37910),m=new o.Logger("Chrome55"),g={OS:1024,MIS:1024};class y extends h.HandlerInterface{static createFactory(){return()=>new y}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome55"}close(){if(m.debug("close()"),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");let e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{let t=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch(r){}let n=a.parse(t.sdp),i=d.extractRtpCapabilities({sdpObject:n});return i}catch(o){try{e.close()}catch(s){}throw o}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:g}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:a,additionalSettings:o,proprietaryConstraints:l,extendedRtpCapabilities:c}){m.debug("run()"),this._direction=e,this._remoteSdp=new f.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,planB:!0}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",c),video:u.getSendingRtpParameters("video",c)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",c),video:u.getSendingRemoteRtpParameters("video",c)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...o},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(m.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(e){m.debug("updateIceServers()");let t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady){if("send"===this._direction){let t=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),await this._pc.setLocalDescription(t);let r={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{let n={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){let i;this.assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),n&&m.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addStream(this._sendStream);let s=await this._pc.createOffer(),o=a.parse(s.sdp),l=c.clone(this._sendingRtpParametersByKind[e.kind],{});l.codecs=u.reduceCodecs(l.codecs);let h=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(h.codecs=u.reduceCodecs(h.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),"video"===e.kind&&t&&t.length>1&&(m.debug("send() | enabling simulcast"),i=(o=a.parse(s.sdp)).media.find(e=>"video"===e.type),p.addLegacySimulcast({offerMediaObject:i,track:e,numStreams:t.length}),s={type:"offer",sdp:a.write(o)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),i=(o=a.parse(this._pc.localDescription.sdp)).media.find(t=>t.type===e.kind),l.rtcp.cname=d.getCname({offerMediaObject:i}),l.encodings=p.getRtpEncodings({offerMediaObject:i,track:e}),t)for(let f=0;f<l.encodings.length;++f)t[f]&&Object.assign(l.encodings[f],t[f]);if(l.encodings.length>1&&"video/vp8"===l.codecs[0].mimeType.toLowerCase())for(let g of l.encodings)g.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:i,offerRtpParameters:l,answerRtpParameters:h,codecOptions:r});let y={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y);let v=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(v,e),{localId:v,rtpParameters:l}}async stopSending(e){this.assertSendDirection(),m.debug("stopSending() [localId:%s]",e);let t=this._mapSendLocalIdTrack.get(e);if(!t)throw Error("track not found");this._mapSendLocalIdTrack.delete(e),this._sendStream.removeTrack(t),this._pc.addStream(this._sendStream);let r=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r);try{await this._pc.setLocalDescription(r)}catch(n){if(0===this._sendStream.getTracks().length){m.warn("stopSending() | ignoring expected error due no sending tracks: %s",n.toString());return}throw n}if("stable"===this._pc.signalingState)return;let i={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,t){throw new l.UnsupportedError("not implemented")}async setMaxSpatialLayer(e,t){throw new l.UnsupportedError(" not implemented")}async setRtpEncodingParameters(e,t){throw new l.UnsupportedError("not supported")}async getSenderStats(e){throw new l.UnsupportedError("not implemented")}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i}){this.assertSendDirection();let s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmitTime:t,maxRetransmits:r,protocol:i};m.debug("sendDataChannel() [options:%o]",s);let o=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%g.MIS,!this._hasDataChannelMediaSection){let l=await this._pc.createOffer(),c=a.parse(l.sdp),u=c.media.find(e=>"application"===e.type);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});let d={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d),this._hasDataChannelMediaSection=!0}let p={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:o,sctpStreamParameters:p}}async receive(e){this.assertRecvDirection();let t=[];for(let r of e){let{trackId:n,kind:i,rtpParameters:s,streamId:o}=r;m.debug("receive() [trackId:%s, kind:%s]",n,i),this._remoteSdp.receive({mid:i,kind:i,offerRtpParameters:s,streamId:o||s.rtcp.cname,trackId:n})}let l={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);let c=await this._pc.createAnswer(),u=a.parse(c.sdp);for(let p of e){let{kind:h,rtpParameters:f}=p,g=u.media.find(e=>String(e.mid)===h);d.applyCodecParameters({offerRtpParameters:f,answerMediaObject:g})}for(let y of(c={type:"answer",sdp:a.write(u)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c),e)){let{kind:v,trackId:b,rtpParameters:w}=y,_=y.streamId||w.rtcp.cname,x=this._pc.getRemoteStreams().find(e=>e.id===_),S=x.getTrackById(b);if(!S)throw Error("remote track not found");this._mapRecvLocalIdInfo.set(b,{mid:v,rtpParameters:w}),t.push({localId:b,track:S})}return t}async stopReceiving(e){for(let t of(this.assertRecvDirection(),e)){m.debug("stopReceiving() [localId:%s]",t);let{mid:r,rtpParameters:n}=this._mapRecvLocalIdInfo.get(t)||{};this._mapRecvLocalIdInfo.delete(t),this._remoteSdp.planBStopReceiving({mid:r,offerRtpParameters:n})}let i={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){throw new l.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertRecvDirection();let{streamId:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:o}=e,l={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:s,maxRetransmitTime:s,maxRetransmits:o,protocol:r};m.debug("receiveDataChannel() [options:%o]",l);let c=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});let u={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let d=await this._pc.createAnswer();if(!this._transportReady){let p=a.parse(d.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:c}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=a.parse(this._pc.localDescription.sdp));let r=d.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)}),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw Error('method can just be called for handlers with "recv" direction')}}t.Chrome55=y},5697:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome67=void 0;let a=s(r(70766)),o=r(38562),l=s(r(13347)),c=s(r(45280)),u=s(r(82267)),d=s(r(89875)),p=r(89316),h=r(37910),f=new o.Logger("Chrome67"),m={OS:1024,MIS:1024};class g extends p.HandlerInterface{static createFactory(){return()=>new g}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome67"}close(){if(f.debug("close()"),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){f.debug("getNativeRtpCapabilities()");let e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{let t=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch(r){}let n=a.parse(t.sdp),i=u.extractRtpCapabilities({sdpObject:n});return i}catch(o){try{e.close()}catch(s){}throw o}}async getNativeSctpCapabilities(){return f.debug("getNativeSctpCapabilities()"),{numStreams:m}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:a,additionalSettings:o,proprietaryConstraints:l,extendedRtpCapabilities:u}){f.debug("run()"),this._direction=e,this._remoteSdp=new h.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,planB:!0}),this._sendingRtpParametersByKind={audio:c.getSendingRtpParameters("audio",u),video:c.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:c.getSendingRemoteRtpParameters("audio",u),video:c.getSendingRemoteRtpParameters("video",u)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...o},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(f.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(e){f.debug("updateIceServers()");let t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(f.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady){if("send"===this._direction){let t=await this._pc.createOffer({iceRestart:!0});f.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),await this._pc.setLocalDescription(t);let r={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{let n={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();f.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){let i;this.assertSendDirection(),f.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),n&&f.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addTrack(e,this._sendStream);let s=await this._pc.createOffer(),o=a.parse(s.sdp),p=l.clone(this._sendingRtpParametersByKind[e.kind],{});p.codecs=c.reduceCodecs(p.codecs);let h=l.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(h.codecs=c.reduceCodecs(h.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),"video"===e.kind&&t&&t.length>1&&(f.debug("send() | enabling simulcast"),i=(o=a.parse(s.sdp)).media.find(e=>"video"===e.type),d.addLegacySimulcast({offerMediaObject:i,track:e,numStreams:t.length}),s={type:"offer",sdp:a.write(o)}),f.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),i=(o=a.parse(this._pc.localDescription.sdp)).media.find(t=>t.type===e.kind),p.rtcp.cname=u.getCname({offerMediaObject:i}),p.encodings=d.getRtpEncodings({offerMediaObject:i,track:e}),t)for(let m=0;m<p.encodings.length;++m)t[m]&&Object.assign(p.encodings[m],t[m]);if(p.encodings.length>1&&"video/vp8"===p.codecs[0].mimeType.toLowerCase())for(let g of p.encodings)g.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:i,offerRtpParameters:p,answerRtpParameters:h,codecOptions:r});let y={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("send() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y);let v=String(this._nextSendLocalId);this._nextSendLocalId++;let b=this._pc.getSenders().find(t=>t.track===e);return this._mapSendLocalIdRtpSender.set(v,b),{localId:v,rtpParameters:p,rtpSender:b}}async stopSending(e){this.assertSendDirection(),f.debug("stopSending() [localId:%s]",e);let t=this._mapSendLocalIdRtpSender.get(e);if(!t)throw Error("associated RTCRtpSender not found");this._pc.removeTrack(t),t.track&&this._sendStream.removeTrack(t.track),this._mapSendLocalIdRtpSender.delete(e);let r=await this._pc.createOffer();f.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r);try{await this._pc.setLocalDescription(r)}catch(n){if(0===this._sendStream.getTracks().length){f.warn("stopSending() | ignoring expected error due no sending tracks: %s",n.toString());return}throw n}if("stable"===this._pc.signalingState)return;let i={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,t){this.assertSendDirection(),t?f.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):f.debug("replaceTrack() [localId:%s, no track]",e);let r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw Error("associated RTCRtpSender not found");let n=r.track;await r.replaceTrack(t),n&&this._sendStream.removeTrack(n),t&&this._sendStream.addTrack(t)}async setMaxSpatialLayer(e,t){this.assertSendDirection(),f.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);let r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw Error("associated RTCRtpSender not found");let n=r.getParameters();n.encodings.forEach((e,r)=>{r<=t?e.active=!0:e.active=!1}),await r.setParameters(n)}async setRtpEncodingParameters(e,t){this.assertSendDirection(),f.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);let r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw Error("associated RTCRtpSender not found");let n=r.getParameters();n.encodings.forEach((e,r)=>{n.encodings[r]={...e,...t}}),await r.setParameters(n)}async getSenderStats(e){this.assertSendDirection();let t=this._mapSendLocalIdRtpSender.get(e);if(!t)throw Error("associated RTCRtpSender not found");return t.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i}){this.assertSendDirection();let s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmitTime:t,maxRetransmits:r,protocol:i};f.debug("sendDataChannel() [options:%o]",s);let o=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%m.MIS,!this._hasDataChannelMediaSection){let l=await this._pc.createOffer(),c=a.parse(l.sdp),u=c.media.find(e=>"application"===e.type);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),f.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});let d={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d),this._hasDataChannelMediaSection=!0}let p={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:o,sctpStreamParameters:p}}async receive(e){this.assertRecvDirection();let t=[];for(let r of e){let{trackId:n,kind:i,rtpParameters:s,streamId:o}=r;f.debug("receive() [trackId:%s, kind:%s]",n,i),this._remoteSdp.receive({mid:i,kind:i,offerRtpParameters:s,streamId:o||s.rtcp.cname,trackId:n})}let l={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);let c=await this._pc.createAnswer(),d=a.parse(c.sdp);for(let p of e){let{kind:h,rtpParameters:m}=p,g=d.media.find(e=>String(e.mid)===h);u.applyCodecParameters({offerRtpParameters:m,answerMediaObject:g})}for(let y of(c={type:"answer",sdp:a.write(d)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:d}),f.debug("receive() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c),e)){let{kind:v,trackId:b,rtpParameters:w}=y,_=this._pc.getReceivers().find(e=>e.track&&e.track.id===b);if(!_)throw Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(b,{mid:v,rtpParameters:w,rtpReceiver:_}),t.push({localId:b,track:_.track,rtpReceiver:_})}return t}async stopReceiving(e){for(let t of(this.assertRecvDirection(),e)){f.debug("stopReceiving() [localId:%s]",t);let{mid:r,rtpParameters:n}=this._mapRecvLocalIdInfo.get(t)||{};this._mapRecvLocalIdInfo.delete(t),this._remoteSdp.planBStopReceiving({mid:r,offerRtpParameters:n})}let i={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();f.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){this.assertRecvDirection();let{rtpReceiver:t}=this._mapRecvLocalIdInfo.get(e)||{};if(!t)throw Error("associated RTCRtpReceiver not found");return t.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertRecvDirection();let{streamId:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:o}=e,l={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:s,maxRetransmitTime:s,maxRetransmits:o,protocol:r};f.debug("receiveDataChannel() [options:%o]",l);let c=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});let u={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let d=await this._pc.createAnswer();if(!this._transportReady){let p=a.parse(d.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}f.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:c}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=a.parse(this._pc.localDescription.sdp));let r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)}),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw Error('method can just be called for handlers with "recv" direction')}}t.Chrome67=g},75372:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome70=void 0;let a=s(r(70766)),o=r(38562),l=s(r(13347)),c=s(r(45280)),u=s(r(82267)),d=s(r(29072)),p=r(89316),h=r(37910),f=r(82770),m=new o.Logger("Chrome70"),g={OS:1024,MIS:1024};class y extends p.HandlerInterface{static createFactory(){return()=>new y}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome70"}close(){if(m.debug("close()"),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");let e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");let t=await e.createOffer();try{e.close()}catch(r){}let n=a.parse(t.sdp),i=u.extractRtpCapabilities({sdpObject:n});return i}catch(o){try{e.close()}catch(s){}throw o}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:g}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:a,additionalSettings:o,proprietaryConstraints:l,extendedRtpCapabilities:u}){m.debug("run()"),this._direction=e,this._remoteSdp=new h.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i}),this._sendingRtpParametersByKind={audio:c.getSendingRtpParameters("audio",u),video:c.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:c.getSendingRemoteRtpParameters("audio",u),video:c.getSendingRemoteRtpParameters("video",u)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...o},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(m.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(e){m.debug("updateIceServers()");let t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady){if("send"===this._direction){let t=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),await this._pc.setLocalDescription(t);let r={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{let n={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){let i;this.assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);let s=l.clone(this._sendingRtpParametersByKind[e.kind],{});s.codecs=c.reduceCodecs(s.codecs,n);let o=l.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=c.reduceCodecs(o.codecs,n);let p=this._remoteSdp.getNextMediaSectionIdx(),h=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]}),g=await this._pc.createOffer(),y=a.parse(g.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:y}),t&&t.length>1&&(m.debug("send() | enabling legacy simulcast"),i=(y=a.parse(g.sdp)).media[p.idx],d.addLegacySimulcast({offerMediaObject:i,numStreams:t.length}),g={type:"offer",sdp:a.write(y)});let v=!1,b=(0,f.parse)((t||[{}])[0].scalabilityMode);if(t&&1===t.length&&b.spatialLayers>1&&"video/vp9"===s.codecs[0].mimeType.toLowerCase()&&(m.debug("send() | enabling legacy simulcast for VP9 SVC"),v=!0,i=(y=a.parse(g.sdp)).media[p.idx],d.addLegacySimulcast({offerMediaObject:i,numStreams:b.spatialLayers}),g={type:"offer",sdp:a.write(y)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",g),await this._pc.setLocalDescription(g),t){m.debug("send() | applying given encodings");let w=h.sender.getParameters();for(let _=0;_<(w.encodings||[]).length;++_){let x=w.encodings[_],S=t[_];if(!S)break;w.encodings[_]=Object.assign(x,S)}await h.sender.setParameters(w)}let T=h.mid;if(s.mid=T,i=(y=a.parse(this._pc.localDescription.sdp)).media[p.idx],s.rtcp.cname=u.getCname({offerMediaObject:i}),s.encodings=d.getRtpEncodings({offerMediaObject:i}),t)for(let E=0;E<s.encodings.length;++E)t[E]&&Object.assign(s.encodings[E],t[E]);if(v&&(s.encodings=[s.encodings[0]]),s.encodings.length>1&&("video/vp8"===s.codecs[0].mimeType.toLowerCase()||"video/h264"===s.codecs[0].mimeType.toLowerCase()))for(let C of s.encodings)C.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:i,reuseMid:p.reuseMid,offerRtpParameters:s,answerRtpParameters:o,codecOptions:r});let k={type:"answer",sdp:this._remoteSdp.getSdp()};return m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",k),await this._pc.setRemoteDescription(k),this._mapMidTransceiver.set(T,h),{localId:T,rtpParameters:s,rtpSender:h.sender}}async stopSending(e){this.assertSendDirection(),m.debug("stopSending() [localId:%s]",e);let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");t.sender.replaceTrack(null),this._pc.removeTrack(t.sender);let r=this._remoteSdp.closeMediaSection(t.mid);if(r)try{t.stop()}catch(n){}let i=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);let s={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,t){this.assertSendDirection(),t?m.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):m.debug("replaceTrack() [localId:%s, no track]",e);let r=this._mapMidTransceiver.get(e);if(!r)throw Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this.assertSendDirection(),m.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);let r=this._mapMidTransceiver.get(e);if(!r)throw Error("associated RTCRtpTransceiver not found");let n=r.sender.getParameters();n.encodings.forEach((e,r)=>{r<=t?e.active=!0:e.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);let i=await this._pc.createOffer();m.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);let s={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async setRtpEncodingParameters(e,t){this.assertSendDirection(),m.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);let r=this._mapMidTransceiver.get(e);if(!r)throw Error("associated RTCRtpTransceiver not found");let n=r.sender.getParameters();n.encodings.forEach((e,r)=>{n.encodings[r]={...e,...t}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);let i=await this._pc.createOffer();m.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);let s={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async getSenderStats(e){this.assertSendDirection();let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i}){this.assertSendDirection();let s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmitTime:t,maxRetransmits:r,protocol:i};m.debug("sendDataChannel() [options:%o]",s);let o=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%g.MIS,!this._hasDataChannelMediaSection){let l=await this._pc.createOffer(),c=a.parse(l.sdp),u=c.media.find(e=>"application"===e.type);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});let d={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d),this._hasDataChannelMediaSection=!0}let p={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:o,sctpStreamParameters:p}}async receive(e){this.assertRecvDirection();let t=[],r=new Map;for(let n of e){let{trackId:i,kind:s,rtpParameters:o,streamId:l}=n;m.debug("receive() [trackId:%s, kind:%s]",i,s);let c=o.mid||String(this._mapMidTransceiver.size);r.set(i,c),this._remoteSdp.receive({mid:c,kind:s,offerRtpParameters:o,streamId:l||o.rtcp.cname,trackId:i})}let d={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);let p=await this._pc.createAnswer(),h=a.parse(p.sdp);for(let f of e){let{trackId:g,rtpParameters:y}=f,v=r.get(g),b=h.media.find(e=>String(e.mid)===v);u.applyCodecParameters({offerRtpParameters:y,answerMediaObject:b})}for(let w of(p={type:"answer",sdp:a.write(h)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:h}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p),e)){let{trackId:_}=w,x=r.get(_),S=this._pc.getTransceivers().find(e=>e.mid===x);if(!S)throw Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(x,S),t.push({localId:x,track:S.receiver.track,rtpReceiver:S.receiver})}return t}async stopReceiving(e){for(let t of(this.assertRecvDirection(),e)){m.debug("stopReceiving() [localId:%s]",t);let r=this._mapMidTransceiver.get(t);if(!r)throw Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(r.mid)}let n={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();for(let s of(m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i),e))this._mapMidTransceiver.delete(s)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){this.assertRecvDirection();let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertRecvDirection();let{streamId:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:o}=e,l={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:s,maxRetransmitTime:s,maxRetransmits:o,protocol:r};m.debug("receiveDataChannel() [options:%o]",l);let c=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();let u={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let d=await this._pc.createAnswer();if(!this._transportReady){let p=a.parse(d.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:c}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=a.parse(this._pc.localDescription.sdp));let r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)}),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw Error('method can just be called for handlers with "recv" direction')}}t.Chrome70=y},66656:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chrome74=void 0;let a=s(r(70766)),o=r(38562),l=s(r(13347)),c=s(r(45280)),u=s(r(82267)),d=s(r(29072)),p=s(r(58954)),h=r(99992),f=r(89316),m=r(37910),g=r(82770),y=new o.Logger("Chrome74"),v={OS:1024,MIS:1024};class b extends f.HandlerInterface{static createFactory(){return()=>new b}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome74"}close(){if(y.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}}async getNativeRtpCapabilities(){y.debug("getNativeRtpCapabilities()");let e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");let t=await e.createOffer();try{e.close()}catch(r){}let n=a.parse(t.sdp),i=u.extractRtpCapabilities({sdpObject:n});return p.addNackSuppportForOpus(i),i}catch(o){try{e.close()}catch(s){}throw o}}async getNativeSctpCapabilities(){return y.debug("getNativeSctpCapabilities()"),{numStreams:v}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:a,additionalSettings:o,proprietaryConstraints:l,extendedRtpCapabilities:u}){y.debug("run()"),this._direction=e,this._remoteSdp=new m.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i}),this._sendingRtpParametersByKind={audio:c.getSendingRtpParameters("audio",u),video:c.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:c.getSendingRemoteRtpParameters("audio",u),video:c.getSendingRemoteRtpParameters("video",u)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...o},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(e){this.assertNotClosed(),y.debug("updateIceServers()");let t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(this.assertNotClosed(),y.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady){if("send"===this._direction){let t=await this._pc.createOffer({iceRestart:!0});y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),await this._pc.setLocalDescription(t);let r={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{let n={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){let i;this.assertNotClosed(),this.assertSendDirection(),y.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),t&&t.length>1&&t.forEach((e,t)=>{e.rid=`r${t}`});let s=l.clone(this._sendingRtpParametersByKind[e.kind],{});s.codecs=c.reduceCodecs(s.codecs,n);let o=l.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=c.reduceCodecs(o.codecs,n);let p=this._remoteSdp.getNextMediaSectionIdx(),h=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:t}),f=await this._pc.createOffer(),m=a.parse(f.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:m});let v=!1,b=(0,g.parse)((t||[{}])[0].scalabilityMode);t&&1===t.length&&b.spatialLayers>1&&"video/vp9"===s.codecs[0].mimeType.toLowerCase()&&(y.debug("send() | enabling legacy simulcast for VP9 SVC"),v=!0,i=(m=a.parse(f.sdp)).media[p.idx],d.addLegacySimulcast({offerMediaObject:i,numStreams:b.spatialLayers}),f={type:"offer",sdp:a.write(m)}),y.debug("send() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);let w=h.mid;if(s.mid=w,i=(m=a.parse(this._pc.localDescription.sdp)).media[p.idx],s.rtcp.cname=u.getCname({offerMediaObject:i}),t){if(1===t.length){let _=d.getRtpEncodings({offerMediaObject:i});Object.assign(_[0],t[0]),v&&(_=[_[0]]),s.encodings=_}else s.encodings=t}else s.encodings=d.getRtpEncodings({offerMediaObject:i});if(s.encodings.length>1&&("video/vp8"===s.codecs[0].mimeType.toLowerCase()||"video/h264"===s.codecs[0].mimeType.toLowerCase()))for(let x of s.encodings)x.scalabilityMode?x.scalabilityMode=`L1T${b.temporalLayers}`:x.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:i,reuseMid:p.reuseMid,offerRtpParameters:s,answerRtpParameters:o,codecOptions:r,extmapAllowMixed:!0});let S={type:"answer",sdp:this._remoteSdp.getSdp()};return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S),this._mapMidTransceiver.set(w,h),{localId:w,rtpParameters:s,rtpSender:h.sender}}async stopSending(e){if(this.assertSendDirection(),y.debug("stopSending() [localId:%s]",e),this._closed)return;let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");t.sender.replaceTrack(null),this._pc.removeTrack(t.sender);let r=this._remoteSdp.closeMediaSection(t.mid);if(r)try{t.stop()}catch(n){}let i=await this._pc.createOffer();y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);let s={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),y.debug("pauseSending() [localId:%s]",e);let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");t.direction="inactive",this._remoteSdp.pauseMediaSection(e);let r=await this._pc.createOffer();y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);let n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),y.debug("resumeSending() [localId:%s]",e);let t=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!t)throw Error("associated RTCRtpTransceiver not found");t.direction="sendonly";let r=await this._pc.createOffer();y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);let n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){this.assertNotClosed(),this.assertSendDirection(),t?y.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):y.debug("replaceTrack() [localId:%s, no track]",e);let r=this._mapMidTransceiver.get(e);if(!r)throw Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this.assertNotClosed(),this.assertSendDirection(),y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);let r=this._mapMidTransceiver.get(e);if(!r)throw Error("associated RTCRtpTransceiver not found");let n=r.sender.getParameters();n.encodings.forEach((e,r)=>{r<=t?e.active=!0:e.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);let i=await this._pc.createOffer();y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);let s={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async setRtpEncodingParameters(e,t){this.assertNotClosed(),this.assertSendDirection(),y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);let r=this._mapMidTransceiver.get(e);if(!r)throw Error("associated RTCRtpTransceiver not found");let n=r.sender.getParameters();n.encodings.forEach((e,r)=>{n.encodings[r]={...e,...t}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);let i=await this._pc.createOffer();y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);let s={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i}){this.assertNotClosed(),this.assertSendDirection();let s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:i};y.debug("sendDataChannel() [options:%o]",s);let o=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,!this._hasDataChannelMediaSection){let l=await this._pc.createOffer(),c=a.parse(l.sdp),u=c.media.find(e=>"application"===e.type);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});let d={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d),this._hasDataChannelMediaSection=!0}let p={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:o,sctpStreamParameters:p}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();let t=[],r=new Map;for(let n of e){let{trackId:i,kind:s,rtpParameters:o,streamId:l}=n;y.debug("receive() [trackId:%s, kind:%s]",i,s);let c=o.mid||String(this._mapMidTransceiver.size);r.set(i,c),this._remoteSdp.receive({mid:c,kind:s,offerRtpParameters:o,streamId:l||o.rtcp.cname,trackId:i})}let d={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);let p=await this._pc.createAnswer(),h=a.parse(p.sdp);for(let f of e){let{trackId:m,rtpParameters:g}=f,v=r.get(m),b=h.media.find(e=>String(e.mid)===v);u.applyCodecParameters({offerRtpParameters:g,answerMediaObject:b})}for(let w of(p={type:"answer",sdp:a.write(h)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:h}),y.debug("receive() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p),e)){let{trackId:_}=w,x=r.get(_),S=this._pc.getTransceivers().find(e=>e.mid===x);if(S)this._mapMidTransceiver.set(x,S),t.push({localId:x,track:S.receiver.track,rtpReceiver:S.receiver});else throw Error("new RTCRtpTransceiver not found")}return t}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(let t of e){y.debug("stopReceiving() [localId:%s]",t);let r=this._mapMidTransceiver.get(t);if(!r)throw Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(r.mid)}let n={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();for(let s of(y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i),e))this._mapMidTransceiver.delete(s)}async pauseReceiving(e){for(let t of(this.assertNotClosed(),this.assertRecvDirection(),e)){y.debug("pauseReceiving() [localId:%s]",t);let r=this._mapMidTransceiver.get(t);if(!r)throw Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(t)}let n={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}async resumeReceiving(e){for(let t of(this.assertNotClosed(),this.assertRecvDirection(),e)){y.debug("resumeReceiving() [localId:%s]",t);let r=this._mapMidTransceiver.get(t);if(!r)throw Error("associated RTCRtpTransceiver not found");r.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(t)}let n={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}async getReceiverStats(e){this.assertNotClosed(),this.assertRecvDirection();let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertNotClosed(),this.assertRecvDirection();let{streamId:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:o}=e,l={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:o,protocol:r};y.debug("receiveDataChannel() [options:%o]",l);let c=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();let u={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let d=await this._pc.createAnswer();if(!this._transportReady){let p=a.parse(d.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:c}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=a.parse(this._pc.localDescription.sdp));let r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new h.InvalidStateError("method called in a closed handler")}assertSendDirection(){if("send"!==this._direction)throw Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw Error('method can just be called for handlers with "recv" direction')}}t.Chrome74=b},37392:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Edge11=void 0;let a=r(38562),o=r(99992),l=s(r(13347)),c=s(r(45280)),u=s(r(63635)),d=r(89316),p=new a.Logger("Edge11");class h extends d.HandlerInterface{static createFactory(){return()=>new h}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return"Edge11"}close(){p.debug("close()");try{this._iceGatherer.close()}catch(e){}try{this._iceTransport.stop()}catch(t){}try{this._dtlsTransport.stop()}catch(r){}for(let n of this._rtpSenders.values())try{n.stop()}catch(i){}for(let s of this._rtpReceivers.values())try{s.stop()}catch(a){}this.emit("@close")}async getNativeRtpCapabilities(){return p.debug("getNativeRtpCapabilities()"),u.getCapabilities()}async getNativeSctpCapabilities(){return p.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:a,additionalSettings:o,proprietaryConstraints:u,extendedRtpCapabilities:d}){p.debug("run()"),this._sendingRtpParametersByKind={audio:c.getSendingRtpParameters("audio",d),video:c.getSendingRtpParameters("video",d)},this._remoteIceParameters=t,this._remoteIceCandidates=r,this._remoteDtlsParameters=n,this._cname=`CNAME-${l.generateRandomNumber()}`,this.setIceGatherer({iceServers:s,iceTransportPolicy:a}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(e){throw new o.UnsupportedError("not supported")}async restartIce(e){if(p.debug("restartIce()"),this._remoteIceParameters=e,this._transportReady){for(let t of(p.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,e,"controlling"),this._remoteIceCandidates))this._iceTransport.addRemoteCandidate(t);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){p.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),p.debug("send() | calling new RTCRtpSender()");let i=new RTCRtpSender(e,this._dtlsTransport),s=l.clone(this._sendingRtpParametersByKind[e.kind],{});s.codecs=c.reduceCodecs(s.codecs,n);let a=s.codecs.some(e=>/.+\/rtx$/i.test(e.mimeType));for(let o of(t||(t=[{}]),t))o.ssrc=l.generateRandomNumber(),a&&(o.rtx={ssrc:l.generateRandomNumber()});s.encodings=t,s.rtcp={cname:this._cname,reducedSize:!0,mux:!0};let d=u.mangleRtpParameters(s);p.debug("send() | calling rtpSender.send() [params:%o]",d),await i.send(d);let h=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(h,i),{localId:h,rtpParameters:s,rtpSender:i}}async stopSending(e){p.debug("stopSending() [localId:%s]",e);let t=this._rtpSenders.get(e);if(!t)throw Error("RTCRtpSender not found");this._rtpSenders.delete(e);try{p.debug("stopSending() | calling rtpSender.stop()"),t.stop()}catch(r){throw p.warn("stopSending() | rtpSender.stop() failed:%o",r),r}}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,t){t?p.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):p.debug("replaceTrack() [localId:%s, no track]",e);let r=this._rtpSenders.get(e);if(!r)throw Error("RTCRtpSender not found");r.setTrack(t)}async setMaxSpatialLayer(e,t){p.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);let r=this._rtpSenders.get(e);if(!r)throw Error("RTCRtpSender not found");let n=r.getParameters();n.encodings.forEach((e,r)=>{r<=t?e.active=!0:e.active=!1}),await r.setParameters(n)}async setRtpEncodingParameters(e,t){p.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);let r=this._rtpSenders.get(e);if(!r)throw Error("RTCRtpSender not found");let n=r.getParameters();n.encodings.forEach((e,r)=>{n.encodings[r]={...e,...t}}),await r.setParameters(n)}async getSenderStats(e){let t=this._rtpSenders.get(e);if(!t)throw Error("RTCRtpSender not found");return t.getStats()}async sendDataChannel(e){throw new o.UnsupportedError("not implemented")}async receive(e){let t=[];for(let r of e){let{trackId:n,kind:i}=r;p.debug("receive() [trackId:%s, kind:%s]",n,i)}for(let s of(this._transportReady||await this.setupTransport({localDtlsRole:"server"}),e)){let{trackId:a,kind:o,rtpParameters:l}=s;p.debug("receive() | calling new RTCRtpReceiver()");let c=new RTCRtpReceiver(this._dtlsTransport,o);c.addEventListener("error",e=>{p.error('rtpReceiver "error" event [event:%o]',e)});let d=u.mangleRtpParameters(l);p.debug("receive() | calling rtpReceiver.receive() [params:%o]",d),await c.receive(d),this._rtpReceivers.set(a,c),t.push({localId:a,track:c.track,rtpReceiver:c})}return t}async stopReceiving(e){for(let t of e){p.debug("stopReceiving() [localId:%s]",t);let r=this._rtpReceivers.get(t);if(!r)throw Error("RTCRtpReceiver not found");this._rtpReceivers.delete(t);try{p.debug("stopReceiving() | calling rtpReceiver.stop()"),r.stop()}catch(n){p.warn("stopReceiving() | rtpReceiver.stop() failed:%o",n)}}}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){let t=this._rtpReceivers.get(e);if(!t)throw Error("RTCRtpReceiver not found");return t.getStats()}async receiveDataChannel(e){throw new o.UnsupportedError("not implemented")}setIceGatherer({iceServers:e,iceTransportPolicy:t}){let r=new RTCIceGatherer({iceServers:e||[],gatherPolicy:t||"all"});r.addEventListener("error",e=>{p.error('iceGatherer "error" event [event:%o]',e)});try{r.gather()}catch(n){p.debug("setIceGatherer() | iceGatherer.gather() failed: %s",n.toString())}this._iceGatherer=r}setIceTransport(){let e=new RTCIceTransport(this._iceGatherer);e.addEventListener("statechange",()=>{switch(e.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),e.addEventListener("icestatechange",()=>{switch(e.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),e.addEventListener("candidatepairchange",e=>{p.debug('iceTransport "candidatepairchange" event [pair:%o]',e.pair)}),this._iceTransport=e}setDtlsTransport(){let e=new RTCDtlsTransport(this._iceTransport);e.addEventListener("statechange",()=>{p.debug('dtlsTransport "statechange" event [state:%s]',e.state)}),e.addEventListener("dtlsstatechange",()=>{p.debug('dtlsTransport "dtlsstatechange" event [state:%s]',e.state),"closed"===e.state&&this.emit("@connectionstatechange","closed")}),e.addEventListener("error",e=>{p.error('dtlsTransport "error" event [event:%o]',e)}),this._dtlsTransport=e}async setupTransport({localDtlsRole:e}){p.debug("setupTransport()");let t=this._dtlsTransport.getLocalParameters();for(let r of(t.role=e,await new Promise((e,r)=>{this.safeEmit("@connect",{dtlsParameters:t},e,r)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling"),this._remoteIceCandidates))this._iceTransport.addRemoteCandidate(r);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(e=>"sha-256"===e.algorithm||"sha-384"===e.algorithm||"sha-512"===e.algorithm),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}t.Edge11=h},61419:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Firefox60=void 0;let a=s(r(70766)),o=r(38562),l=r(99992),c=s(r(13347)),u=s(r(45280)),d=s(r(82267)),p=s(r(29072)),h=r(89316),f=r(37910),m=r(82770),g=new o.Logger("Firefox60"),y={OS:16,MIS:2048};class v extends h.HandlerInterface{static createFactory(){return()=>new v}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox60"}close(){if(g.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}}async getNativeRtpCapabilities(){g.debug("getNativeRtpCapabilities()");let e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),t=document.createElement("canvas");t.getContext("2d");let r=t.captureStream(),n=r.getVideoTracks()[0];try{e.addTransceiver("audio",{direction:"sendrecv"});let i=e.addTransceiver(n,{direction:"sendrecv"}),s=i.sender.getParameters();s.encodings=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}],await i.sender.setParameters(s);let o=await e.createOffer();try{t.remove()}catch(l){}try{n.stop()}catch(c){}try{e.close()}catch(u){}let p=a.parse(o.sdp),h=d.extractRtpCapabilities({sdpObject:p});return h}catch(v){try{t.remove()}catch(f){}try{n.stop()}catch(m){}try{e.close()}catch(y){}throw v}}async getNativeSctpCapabilities(){return g.debug("getNativeSctpCapabilities()"),{numStreams:y}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:a,additionalSettings:o,proprietaryConstraints:l,extendedRtpCapabilities:c}){this.assertNotClosed(),g.debug("run()"),this._direction=e,this._remoteSdp=new f.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",c),video:u.getSendingRtpParameters("video",c)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",c),video:u.getSendingRemoteRtpParameters("video",c)},this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...o},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(g.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(e){throw this.assertNotClosed(),new l.UnsupportedError("not supported")}async restartIce(e){if(this.assertNotClosed(),g.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady){if("send"===this._direction){let t=await this._pc.createOffer({iceRestart:!0});g.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),await this._pc.setLocalDescription(t);let r={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{let n={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();g.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){this.assertNotClosed(),this.assertSendDirection(),g.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),t&&(t=c.clone(t,[])).length>1&&(t.forEach((e,t)=>{e.rid=`r${t}`}),t.reverse());let i=c.clone(this._sendingRtpParametersByKind[e.kind],{});i.codecs=u.reduceCodecs(i.codecs,n);let s=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});s.codecs=u.reduceCodecs(s.codecs,n);let o=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]});if(t){let l=o.sender.getParameters();l.encodings=t,await o.sender.setParameters(l)}let h=await this._pc.createOffer(),f=a.parse(h.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:f});let y=(0,m.parse)((t||[{}])[0].scalabilityMode);g.debug("send() | calling pc.setLocalDescription() [offer:%o]",h),await this._pc.setLocalDescription(h);let v=o.mid;i.mid=v,f=a.parse(this._pc.localDescription.sdp);let b=f.media[f.media.length-1];if(i.rtcp.cname=d.getCname({offerMediaObject:b}),t){if(1===t.length){let w=p.getRtpEncodings({offerMediaObject:b});Object.assign(w[0],t[0]),i.encodings=w}else i.encodings=t.reverse()}else i.encodings=p.getRtpEncodings({offerMediaObject:b});if(i.encodings.length>1&&("video/vp8"===i.codecs[0].mimeType.toLowerCase()||"video/h264"===i.codecs[0].mimeType.toLowerCase()))for(let _ of i.encodings)_.scalabilityMode?_.scalabilityMode=`L1T${y.temporalLayers}`:_.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:b,offerRtpParameters:i,answerRtpParameters:s,codecOptions:r,extmapAllowMixed:!0});let x={type:"answer",sdp:this._remoteSdp.getSdp()};return g.debug("send() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x),this._mapMidTransceiver.set(v,o),{localId:v,rtpParameters:i,rtpSender:o.sender}}async stopSending(e){if(this.assertSendDirection(),g.debug("stopSending() [localId:%s]",e),this._closed)return;let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated transceiver not found");t.sender.replaceTrack(null),this._pc.removeTrack(t.sender),this._remoteSdp.disableMediaSection(t.mid);let r=await this._pc.createOffer();g.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);let n={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),g.debug("pauseSending() [localId:%s]",e);let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");t.direction="inactive",this._remoteSdp.pauseMediaSection(e);let r=await this._pc.createOffer();g.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);let n={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),g.debug("resumeSending() [localId:%s]",e);let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");t.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);let r=await this._pc.createOffer();g.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);let n={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){this.assertNotClosed(),this.assertSendDirection(),t?g.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):g.debug("replaceTrack() [localId:%s, no track]",e);let r=this._mapMidTransceiver.get(e);if(!r)throw Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this.assertNotClosed(),this.assertSendDirection(),g.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);let r=this._mapMidTransceiver.get(e);if(!r)throw Error("associated transceiver not found");let n=r.sender.getParameters();t=n.encodings.length-1-t,n.encodings.forEach((e,r)=>{r>=t?e.active=!0:e.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);let i=await this._pc.createOffer();g.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);let s={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async setRtpEncodingParameters(e,t){this.assertNotClosed(),this.assertSendDirection(),g.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);let r=this._mapMidTransceiver.get(e);if(!r)throw Error("associated RTCRtpTransceiver not found");let n=r.sender.getParameters();n.encodings.forEach((e,r)=>{n.encodings[r]={...e,...t}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);let i=await this._pc.createOffer();g.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);let s={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i}){this.assertNotClosed(),this.assertSendDirection();let s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:i};g.debug("sendDataChannel() [options:%o]",s);let o=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%y.MIS,!this._hasDataChannelMediaSection){let l=await this._pc.createOffer(),c=a.parse(l.sdp),u=c.media.find(e=>"application"===e.type);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:c}),g.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});let d={type:"answer",sdp:this._remoteSdp.getSdp()};g.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d),this._hasDataChannelMediaSection=!0}let p={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:o,sctpStreamParameters:p}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();let t=[],r=new Map;for(let n of e){let{trackId:i,kind:s,rtpParameters:o,streamId:l}=n;g.debug("receive() [trackId:%s, kind:%s]",i,s);let c=o.mid||String(this._mapMidTransceiver.size);r.set(i,c),this._remoteSdp.receive({mid:c,kind:s,offerRtpParameters:o,streamId:l||o.rtcp.cname,trackId:i})}let u={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let p=await this._pc.createAnswer(),h=a.parse(p.sdp);for(let f of e){let{trackId:m,rtpParameters:y}=f,v=r.get(m),b=h.media.find(e=>String(e.mid)===v);d.applyCodecParameters({offerRtpParameters:y,answerMediaObject:b}),p={type:"answer",sdp:a.write(h)}}for(let w of(this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:h}),g.debug("receive() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p),e)){let{trackId:_}=w,x=r.get(_),S=this._pc.getTransceivers().find(e=>e.mid===x);if(!S)throw Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(x,S),t.push({localId:x,track:S.receiver.track,rtpReceiver:S.receiver})}return t}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(let t of e){g.debug("stopReceiving() [localId:%s]",t);let r=this._mapMidTransceiver.get(t);if(!r)throw Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(r.mid)}let n={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();for(let s of(g.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i),e))this._mapMidTransceiver.delete(s)}async pauseReceiving(e){for(let t of(this.assertNotClosed(),this.assertRecvDirection(),e)){g.debug("pauseReceiving() [localId:%s]",t);let r=this._mapMidTransceiver.get(t);if(!r)throw Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(t)}let n={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();g.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}async resumeReceiving(e){for(let t of(this.assertNotClosed(),this.assertRecvDirection(),e)){g.debug("resumeReceiving() [localId:%s]",t);let r=this._mapMidTransceiver.get(t);if(!r)throw Error("associated RTCRtpTransceiver not found");r.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(t)}let n={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();g.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}async getReceiverStats(e){this.assertRecvDirection();let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertNotClosed(),this.assertRecvDirection();let{streamId:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:o}=e,l={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:o,protocol:r};g.debug("receiveDataChannel() [options:%o]",l);let c=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();let u={type:"offer",sdp:this._remoteSdp.getSdp()};g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let d=await this._pc.createAnswer();if(!this._transportReady){let p=a.parse(d.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:p})}g.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:c}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=a.parse(this._pc.localDescription.sdp));let r=d.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new l.InvalidStateError("method called in a closed handler")}assertSendDirection(){if("send"!==this._direction)throw Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw Error('method can just be called for handlers with "recv" direction')}}t.Firefox60=v},89316:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HandlerInterface=void 0;let n=r(54493);class i extends n.EnhancedEventEmitter{constructor(){super()}}t.HandlerInterface=i},44770:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNative=void 0;let a=s(r(70766)),o=r(38562),l=r(99992),c=s(r(13347)),u=s(r(45280)),d=s(r(82267)),p=s(r(89875)),h=r(89316),f=r(37910),m=new o.Logger("ReactNative"),g={OS:1024,MIS:1024};class y extends h.HandlerInterface{static createFactory(){return()=>new y}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNative"}close(){if(m.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){m.debug("getNativeRtpCapabilities()");let e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{let t=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch(r){}let n=a.parse(t.sdp),i=d.extractRtpCapabilities({sdpObject:n});return i}catch(o){try{e.close()}catch(s){}throw o}}async getNativeSctpCapabilities(){return m.debug("getNativeSctpCapabilities()"),{numStreams:g}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:a,additionalSettings:o,proprietaryConstraints:l,extendedRtpCapabilities:c}){m.debug("run()"),this._direction=e,this._remoteSdp=new f.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,planB:!0}),this._sendingRtpParametersByKind={audio:u.getSendingRtpParameters("audio",c),video:u.getSendingRtpParameters("video",c)},this._sendingRemoteRtpParametersByKind={audio:u.getSendingRemoteRtpParameters("audio",c),video:u.getSendingRemoteRtpParameters("video",c)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...o},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(m.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(e){m.debug("updateIceServers()");let t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(m.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady){if("send"===this._direction){let t=await this._pc.createOffer({iceRestart:!0});m.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),await this._pc.setLocalDescription(t);let r={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{let n={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();m.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){let i;this.assertSendDirection(),m.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),n&&m.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addStream(this._sendStream);let s=await this._pc.createOffer(),o=a.parse(s.sdp),l=c.clone(this._sendingRtpParametersByKind[e.kind],{});l.codecs=u.reduceCodecs(l.codecs);let h=c.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(h.codecs=u.reduceCodecs(h.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),"video"===e.kind&&t&&t.length>1&&(m.debug("send() | enabling simulcast"),i=(o=a.parse(s.sdp)).media.find(e=>"video"===e.type),p.addLegacySimulcast({offerMediaObject:i,track:e,numStreams:t.length}),s={type:"offer",sdp:a.write(o)}),m.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),i=(o=a.parse(this._pc.localDescription.sdp)).media.find(t=>t.type===e.kind),l.rtcp.cname=d.getCname({offerMediaObject:i}),l.encodings=p.getRtpEncodings({offerMediaObject:i,track:e}),t)for(let f=0;f<l.encodings.length;++f)t[f]&&Object.assign(l.encodings[f],t[f]);if(l.encodings.length>1&&("video/vp8"===l.codecs[0].mimeType.toLowerCase()||"video/h264"===l.codecs[0].mimeType.toLowerCase()))for(let g of l.encodings)g.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:i,offerRtpParameters:l,answerRtpParameters:h,codecOptions:r});let y={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("send() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y);let v=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(v,e),{localId:v,rtpParameters:l}}async stopSending(e){this.assertSendDirection(),m.debug("stopSending() [localId:%s]",e);let t=this._mapSendLocalIdTrack.get(e);if(!t)throw Error("track not found");this._mapSendLocalIdTrack.delete(e),this._sendStream.removeTrack(t),this._pc.addStream(this._sendStream);let r=await this._pc.createOffer();m.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r);try{await this._pc.setLocalDescription(r)}catch(n){if(0===this._sendStream.getTracks().length){m.warn("stopSending() | ignoring expected error due no sending tracks: %s",n.toString());return}throw n}if("stable"===this._pc.signalingState)return;let i={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,t){throw new l.UnsupportedError("not implemented")}async setMaxSpatialLayer(e,t){throw new l.UnsupportedError("not implemented")}async setRtpEncodingParameters(e,t){throw new l.UnsupportedError("not implemented")}async getSenderStats(e){throw new l.UnsupportedError("not implemented")}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i}){this.assertSendDirection();let s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmitTime:t,maxRetransmits:r,protocol:i};m.debug("sendDataChannel() [options:%o]",s);let o=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%g.MIS,!this._hasDataChannelMediaSection){let l=await this._pc.createOffer(),c=a.parse(l.sdp),u=c.media.find(e=>"application"===e.type);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),m.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});let d={type:"answer",sdp:this._remoteSdp.getSdp()};m.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d),this._hasDataChannelMediaSection=!0}let p={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:o,sctpStreamParameters:p}}async receive(e){this.assertRecvDirection();let t=[],r=new Map;for(let n of e){let{trackId:i,kind:s,rtpParameters:o}=n;m.debug("receive() [trackId:%s, kind:%s]",i,s);let l=n.streamId||o.rtcp.cname;m.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),l+=`-hack-${c.generateRandomNumber()}`,r.set(i,l),this._remoteSdp.receive({mid:s,kind:s,offerRtpParameters:o,streamId:l,trackId:i})}let u={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let p=await this._pc.createAnswer(),h=a.parse(p.sdp);for(let f of e){let{kind:g,rtpParameters:y}=f,v=h.media.find(e=>String(e.mid)===g);d.applyCodecParameters({offerRtpParameters:y,answerMediaObject:v})}for(let b of(p={type:"answer",sdp:a.write(h)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:h}),m.debug("receive() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p),e)){let{kind:w,trackId:_,rtpParameters:x}=b,S=r.get(_),T=this._pc.getRemoteStreams().find(e=>e.id===S),E=T.getTrackById(_);if(!E)throw Error("remote track not found");this._mapRecvLocalIdInfo.set(_,{mid:w,rtpParameters:x}),t.push({localId:_,track:E})}return t}async stopReceiving(e){for(let t of(this.assertRecvDirection(),e)){m.debug("stopReceiving() [localId:%s]",t);let{mid:r,rtpParameters:n}=this._mapRecvLocalIdInfo.get(t)||{};this._mapRecvLocalIdInfo.delete(t),this._remoteSdp.planBStopReceiving({mid:r,offerRtpParameters:n})}let i={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();m.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}async pauseReceiving(e){}async resumeReceiving(e){}async getReceiverStats(e){throw new l.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertRecvDirection();let{streamId:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:o}=e,l={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:s,maxRetransmitTime:s,maxRetransmits:o,protocol:r};m.debug("receiveDataChannel() [options:%o]",l);let c=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});let u={type:"offer",sdp:this._remoteSdp.getSdp()};m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let d=await this._pc.createAnswer();if(!this._transportReady){let p=a.parse(d.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}m.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:c}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=a.parse(this._pc.localDescription.sdp));let r=d.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)}),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw Error('method can just be called for handlers with "recv" direction')}}t.ReactNative=y},23433:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ReactNativeUnifiedPlan=void 0;let a=s(r(70766)),o=r(38562),l=s(r(13347)),c=s(r(45280)),u=s(r(82267)),d=s(r(29072)),p=s(r(58954)),h=r(99992),f=r(89316),m=r(37910),g=r(82770),y=new o.Logger("ReactNativeUnifiedPlan"),v={OS:1024,MIS:1024};class b extends f.HandlerInterface{static createFactory(){return()=>new b}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNativeUnifiedPlan"}close(){if(y.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}}async getNativeRtpCapabilities(){y.debug("getNativeRtpCapabilities()");let e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{e.addTransceiver("audio"),e.addTransceiver("video");let t=await e.createOffer();try{e.close()}catch(r){}let n=a.parse(t.sdp),i=u.extractRtpCapabilities({sdpObject:n});return p.addNackSuppportForOpus(i),i}catch(o){try{e.close()}catch(s){}throw o}}async getNativeSctpCapabilities(){return y.debug("getNativeSctpCapabilities()"),{numStreams:v}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:a,additionalSettings:o,proprietaryConstraints:l,extendedRtpCapabilities:u}){this.assertNotClosed(),y.debug("run()"),this._direction=e,this._remoteSdp=new m.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i}),this._sendingRtpParametersByKind={audio:c.getSendingRtpParameters("audio",u),video:c.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:c.getSendingRemoteRtpParameters("audio",u),video:c.getSendingRemoteRtpParameters("video",u)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...o},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(e){this.assertNotClosed(),y.debug("updateIceServers()");let t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(this.assertNotClosed(),y.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady){if("send"===this._direction){let t=await this._pc.createOffer({iceRestart:!0});y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),await this._pc.setLocalDescription(t);let r={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{let n={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){let i;this.assertNotClosed(),this.assertSendDirection(),y.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),t&&t.length>1&&t.forEach((e,t)=>{e.rid=`r${t}`});let s=l.clone(this._sendingRtpParametersByKind[e.kind],{});s.codecs=c.reduceCodecs(s.codecs,n);let o=l.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=c.reduceCodecs(o.codecs,n);let p=this._remoteSdp.getNextMediaSectionIdx(),h=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream],sendEncodings:t}),f=await this._pc.createOffer(),m=a.parse(f.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:m});let v=!1,b=(0,g.parse)((t||[{}])[0].scalabilityMode);t&&1===t.length&&b.spatialLayers>1&&"video/vp9"===s.codecs[0].mimeType.toLowerCase()&&(y.debug("send() | enabling legacy simulcast for VP9 SVC"),v=!0,i=(m=a.parse(f.sdp)).media[p.idx],d.addLegacySimulcast({offerMediaObject:i,numStreams:b.spatialLayers}),f={type:"offer",sdp:a.write(m)}),y.debug("send() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);let w=h.mid??void 0;if(w||y.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),s.mid=w,i=(m=a.parse(this._pc.localDescription.sdp)).media[p.idx],s.rtcp.cname=u.getCname({offerMediaObject:i}),t){if(1===t.length){let _=d.getRtpEncodings({offerMediaObject:i});Object.assign(_[0],t[0]),v&&(_=[_[0]]),s.encodings=_}else s.encodings=t}else s.encodings=d.getRtpEncodings({offerMediaObject:i});if(s.encodings.length>1&&("video/vp8"===s.codecs[0].mimeType.toLowerCase()||"video/h264"===s.codecs[0].mimeType.toLowerCase()))for(let x of s.encodings)x.scalabilityMode?x.scalabilityMode=`L1T${b.temporalLayers}`:x.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:i,reuseMid:p.reuseMid,offerRtpParameters:s,answerRtpParameters:o,codecOptions:r,extmapAllowMixed:!0});let S={type:"answer",sdp:this._remoteSdp.getSdp()};return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]",S),await this._pc.setRemoteDescription(S),w||(w=h.mid,s.mid=w),this._mapMidTransceiver.set(w,h),{localId:w,rtpParameters:s,rtpSender:h.sender}}async stopSending(e){if(this.assertSendDirection(),this._closed)return;y.debug("stopSending() [localId:%s]",e);let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");t.sender.replaceTrack(null),this._pc.removeTrack(t.sender);let r=this._remoteSdp.closeMediaSection(t.mid);if(r)try{t.stop()}catch(n){}let i=await this._pc.createOffer();y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);let s={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),y.debug("pauseSending() [localId:%s]",e);let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");t.direction="inactive",this._remoteSdp.pauseMediaSection(e);let r=await this._pc.createOffer();y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);let n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),y.debug("resumeSending() [localId:%s]",e);let t=this._mapMidTransceiver.get(e);if(this._remoteSdp.resumeSendingMediaSection(e),!t)throw Error("associated RTCRtpTransceiver not found");t.direction="sendonly";let r=await this._pc.createOffer();y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);let n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){this.assertNotClosed(),this.assertSendDirection(),t?y.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):y.debug("replaceTrack() [localId:%s, no track]",e);let r=this._mapMidTransceiver.get(e);if(!r)throw Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this.assertNotClosed(),this.assertSendDirection(),y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);let r=this._mapMidTransceiver.get(e);if(!r)throw Error("associated RTCRtpTransceiver not found");let n=r.sender.getParameters();n.encodings.forEach((e,r)=>{r<=t?e.active=!0:e.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);let i=await this._pc.createOffer();y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);let s={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async setRtpEncodingParameters(e,t){this.assertNotClosed(),this.assertSendDirection(),y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);let r=this._mapMidTransceiver.get(e);if(!r)throw Error("associated RTCRtpTransceiver not found");let n=r.sender.getParameters();n.encodings.forEach((e,r)=>{n.encodings[r]={...e,...t}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);let i=await this._pc.createOffer();y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);let s={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i}){this.assertNotClosed(),this.assertSendDirection();let s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:i};y.debug("sendDataChannel() [options:%o]",s);let o=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,!this._hasDataChannelMediaSection){let l=await this._pc.createOffer(),c=a.parse(l.sdp),u=c.media.find(e=>"application"===e.type);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});let d={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d),this._hasDataChannelMediaSection=!0}let p={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:o,sctpStreamParameters:p}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();let t=[],r=new Map;for(let n of e){let{trackId:i,kind:s,rtpParameters:o,streamId:l}=n;y.debug("receive() [trackId:%s, kind:%s]",i,s);let c=o.mid||String(this._mapMidTransceiver.size);r.set(i,c),this._remoteSdp.receive({mid:c,kind:s,offerRtpParameters:o,streamId:l||o.rtcp.cname,trackId:i})}let d={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);let p=await this._pc.createAnswer(),h=a.parse(p.sdp);for(let f of e){let{trackId:m,rtpParameters:g}=f,v=r.get(m),b=h.media.find(e=>String(e.mid)===v);u.applyCodecParameters({offerRtpParameters:g,answerMediaObject:b})}for(let w of(p={type:"answer",sdp:a.write(h)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:h}),y.debug("receive() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p),e)){let{trackId:_}=w,x=r.get(_),S=this._pc.getTransceivers().find(e=>e.mid===x);if(S)this._mapMidTransceiver.set(x,S),t.push({localId:x,track:S.receiver.track,rtpReceiver:S.receiver});else throw Error("new RTCRtpTransceiver not found")}return t}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(let t of e){y.debug("stopReceiving() [localId:%s]",t);let r=this._mapMidTransceiver.get(t);if(!r)throw Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(r.mid)}let n={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();for(let s of(y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i),e))this._mapMidTransceiver.delete(s)}async pauseReceiving(e){for(let t of(this.assertNotClosed(),this.assertRecvDirection(),e)){y.debug("pauseReceiving() [localId:%s]",t);let r=this._mapMidTransceiver.get(t);if(!r)throw Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(t)}let n={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}async resumeReceiving(e){for(let t of(this.assertNotClosed(),this.assertRecvDirection(),e)){y.debug("resumeReceiving() [localId:%s]",t);let r=this._mapMidTransceiver.get(t);if(!r)throw Error("associated RTCRtpTransceiver not found");r.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(t)}let n={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}async getReceiverStats(e){this.assertNotClosed(),this.assertRecvDirection();let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertNotClosed(),this.assertRecvDirection();let{streamId:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:o}=e,l={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:o,protocol:r};y.debug("receiveDataChannel() [options:%o]",l);let c=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();let u={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let d=await this._pc.createAnswer();if(!this._transportReady){let p=a.parse(d.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:c}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=a.parse(this._pc.localDescription.sdp));let r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new h.InvalidStateError("method called in a closed handler")}assertSendDirection(){if("send"!==this._direction)throw Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw Error('method can just be called for handlers with "recv" direction')}}t.ReactNativeUnifiedPlan=b},32205:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Safari11=void 0;let a=s(r(70766)),o=r(38562),l=s(r(13347)),c=s(r(45280)),u=s(r(82267)),d=s(r(89875)),p=r(89316),h=r(37910),f=new o.Logger("Safari11"),m={OS:1024,MIS:1024};class g extends p.HandlerInterface{static createFactory(){return()=>new g}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari11"}close(){if(f.debug("close()"),this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}async getNativeRtpCapabilities(){f.debug("getNativeRtpCapabilities()");let e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{let t=await e.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{e.close()}catch(r){}let n=a.parse(t.sdp),i=u.extractRtpCapabilities({sdpObject:n});return i}catch(o){try{e.close()}catch(s){}throw o}}async getNativeSctpCapabilities(){return f.debug("getNativeSctpCapabilities()"),{numStreams:m}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:a,additionalSettings:o,proprietaryConstraints:l,extendedRtpCapabilities:u}){f.debug("run()"),this._direction=e,this._remoteSdp=new h.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,planB:!0}),this._sendingRtpParametersByKind={audio:c.getSendingRtpParameters("audio",u),video:c.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:c.getSendingRemoteRtpParameters("audio",u),video:c.getSendingRemoteRtpParameters("video",u)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...o},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(f.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(e){f.debug("updateIceServers()");let t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(f.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady){if("send"===this._direction){let t=await this._pc.createOffer({iceRestart:!0});f.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),await this._pc.setLocalDescription(t);let r={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{let n={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();f.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}}}async getTransportStats(){return this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){let i;this.assertSendDirection(),f.debug("send() [kind:%s, track.id:%s]",e.kind,e.id),n&&f.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(e),this._pc.addTrack(e,this._sendStream);let s=await this._pc.createOffer(),o=a.parse(s.sdp),p=l.clone(this._sendingRtpParametersByKind[e.kind],{});p.codecs=c.reduceCodecs(p.codecs);let h=l.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});if(h.codecs=c.reduceCodecs(h.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:o}),"video"===e.kind&&t&&t.length>1&&(f.debug("send() | enabling simulcast"),i=(o=a.parse(s.sdp)).media.find(e=>"video"===e.type),d.addLegacySimulcast({offerMediaObject:i,track:e,numStreams:t.length}),s={type:"offer",sdp:a.write(o)}),f.debug("send() | calling pc.setLocalDescription() [offer:%o]",s),await this._pc.setLocalDescription(s),i=(o=a.parse(this._pc.localDescription.sdp)).media.find(t=>t.type===e.kind),p.rtcp.cname=u.getCname({offerMediaObject:i}),p.encodings=d.getRtpEncodings({offerMediaObject:i,track:e}),t)for(let m=0;m<p.encodings.length;++m)t[m]&&Object.assign(p.encodings[m],t[m]);if(p.encodings.length>1&&"video/vp8"===p.codecs[0].mimeType.toLowerCase())for(let g of p.encodings)g.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:i,offerRtpParameters:p,answerRtpParameters:h,codecOptions:r});let y={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("send() | calling pc.setRemoteDescription() [answer:%o]",y),await this._pc.setRemoteDescription(y);let v=String(this._nextSendLocalId);this._nextSendLocalId++;let b=this._pc.getSenders().find(t=>t.track===e);return this._mapSendLocalIdRtpSender.set(v,b),{localId:v,rtpParameters:p,rtpSender:b}}async stopSending(e){this.assertSendDirection();let t=this._mapSendLocalIdRtpSender.get(e);if(!t)throw Error("associated RTCRtpSender not found");t.track&&this._sendStream.removeTrack(t.track),this._mapSendLocalIdRtpSender.delete(e);let r=await this._pc.createOffer();f.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",r);try{await this._pc.setLocalDescription(r)}catch(n){if(0===this._sendStream.getTracks().length){f.warn("stopSending() | ignoring expected error due no sending tracks: %s",n.toString());return}throw n}if("stable"===this._pc.signalingState)return;let i={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",i),await this._pc.setRemoteDescription(i)}async pauseSending(e){}async resumeSending(e){}async replaceTrack(e,t){this.assertSendDirection(),t?f.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):f.debug("replaceTrack() [localId:%s, no track]",e);let r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw Error("associated RTCRtpSender not found");let n=r.track;await r.replaceTrack(t),n&&this._sendStream.removeTrack(n),t&&this._sendStream.addTrack(t)}async setMaxSpatialLayer(e,t){this.assertSendDirection(),f.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);let r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw Error("associated RTCRtpSender not found");let n=r.getParameters();n.encodings.forEach((e,r)=>{r<=t?e.active=!0:e.active=!1}),await r.setParameters(n)}async setRtpEncodingParameters(e,t){this.assertSendDirection(),f.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);let r=this._mapSendLocalIdRtpSender.get(e);if(!r)throw Error("associated RTCRtpSender not found");let n=r.getParameters();n.encodings.forEach((e,r)=>{n.encodings[r]={...e,...t}}),await r.setParameters(n)}async getSenderStats(e){this.assertSendDirection();let t=this._mapSendLocalIdRtpSender.get(e);if(!t)throw Error("associated RTCRtpSender not found");return t.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i}){this.assertSendDirection();let s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:i};f.debug("sendDataChannel() [options:%o]",s);let o=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%m.MIS,!this._hasDataChannelMediaSection){let l=await this._pc.createOffer(),c=a.parse(l.sdp),u=c.media.find(e=>"application"===e.type);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),f.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});let d={type:"answer",sdp:this._remoteSdp.getSdp()};f.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d),this._hasDataChannelMediaSection=!0}let p={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:o,sctpStreamParameters:p}}async receive(e){this.assertRecvDirection();let t=[];for(let r of e){let{trackId:n,kind:i,rtpParameters:s,streamId:o}=r;f.debug("receive() [trackId:%s, kind:%s]",n,i),this._remoteSdp.receive({mid:i,kind:i,offerRtpParameters:s,streamId:o||s.rtcp.cname,trackId:n})}let l={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);let c=await this._pc.createAnswer(),d=a.parse(c.sdp);for(let p of e){let{kind:h,rtpParameters:m}=p,g=d.media.find(e=>String(e.mid)===h);u.applyCodecParameters({offerRtpParameters:m,answerMediaObject:g})}for(let y of(c={type:"answer",sdp:a.write(d)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:d}),f.debug("receive() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c),e)){let{kind:v,trackId:b,rtpParameters:w}=y,_=this._pc.getReceivers().find(e=>e.track&&e.track.id===b);if(!_)throw Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(b,{mid:v,rtpParameters:w,rtpReceiver:_}),t.push({localId:b,track:_.track,rtpReceiver:_})}return t}async stopReceiving(e){for(let t of(this.assertRecvDirection(),e)){f.debug("stopReceiving() [localId:%s]",t);let{mid:r,rtpParameters:n}=this._mapRecvLocalIdInfo.get(t)||{};this._mapRecvLocalIdInfo.delete(t),this._remoteSdp.planBStopReceiving({mid:r,offerRtpParameters:n})}let i={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",i),await this._pc.setRemoteDescription(i);let s=await this._pc.createAnswer();f.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",s),await this._pc.setLocalDescription(s)}async getReceiverStats(e){this.assertRecvDirection();let{rtpReceiver:t}=this._mapRecvLocalIdInfo.get(e)||{};if(!t)throw Error("associated RTCRtpReceiver not found");return t.getStats()}async pauseReceiving(e){}async resumeReceiving(e){}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertRecvDirection();let{streamId:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:o}=e,l={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:o,protocol:r};f.debug("receiveDataChannel() [options:%o]",l);let c=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});let u={type:"offer",sdp:this._remoteSdp.getSdp()};f.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let d=await this._pc.createAnswer();if(!this._transportReady){let p=a.parse(d.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}f.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:c}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=a.parse(this._pc.localDescription.sdp));let r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)}),this._transportReady=!0}assertSendDirection(){if("send"!==this._direction)throw Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw Error('method can just be called for handlers with "recv" direction')}}t.Safari11=g},29862:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Safari12=void 0;let a=s(r(70766)),o=r(38562),l=s(r(13347)),c=s(r(45280)),u=s(r(82267)),d=s(r(29072)),p=s(r(58954)),h=r(99992),f=r(89316),m=r(37910),g=r(82770),y=new o.Logger("Safari12"),v={OS:1024,MIS:1024};class b extends f.HandlerInterface{static createFactory(){return()=>new b}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari12"}close(){if(y.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch(e){}this.emit("@close")}}async getNativeRtpCapabilities(){y.debug("getNativeRtpCapabilities()");let e=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{e.addTransceiver("audio"),e.addTransceiver("video");let t=await e.createOffer();try{e.close()}catch(r){}let n=a.parse(t.sdp),i=u.extractRtpCapabilities({sdpObject:n});return p.addNackSuppportForOpus(i),i}catch(o){try{e.close()}catch(s){}throw o}}async getNativeSctpCapabilities(){return y.debug("getNativeSctpCapabilities()"),{numStreams:v}}run({direction:e,iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i,iceServers:s,iceTransportPolicy:a,additionalSettings:o,proprietaryConstraints:l,extendedRtpCapabilities:u}){this.assertNotClosed(),y.debug("run()"),this._direction=e,this._remoteSdp=new m.RemoteSdp({iceParameters:t,iceCandidates:r,dtlsParameters:n,sctpParameters:i}),this._sendingRtpParametersByKind={audio:c.getSendingRtpParameters("audio",u),video:c.getSendingRtpParameters("video",u)},this._sendingRemoteRtpParametersByKind={audio:c.getSendingRemoteRtpParameters("audio",u),video:c.getSendingRemoteRtpParameters("video",u)},n.role&&"auto"!==n.role&&(this._forcedLocalDtlsRole="server"===n.role?"client":"server"),this._pc=new RTCPeerConnection({iceServers:s||[],iceTransportPolicy:a||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...o},l),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(y.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(e){this.assertNotClosed(),y.debug("updateIceServers()");let t=this._pc.getConfiguration();t.iceServers=e,this._pc.setConfiguration(t)}async restartIce(e){if(this.assertNotClosed(),y.debug("restartIce()"),this._remoteSdp.updateIceParameters(e),this._transportReady){if("send"===this._direction){let t=await this._pc.createOffer({iceRestart:!0});y.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",t),await this._pc.setLocalDescription(t);let r={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",r),await this._pc.setRemoteDescription(r)}else{let n={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();y.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:e,encodings:t,codecOptions:r,codec:n}){let i;this.assertNotClosed(),this.assertSendDirection(),y.debug("send() [kind:%s, track.id:%s]",e.kind,e.id);let s=l.clone(this._sendingRtpParametersByKind[e.kind],{});s.codecs=c.reduceCodecs(s.codecs,n);let o=l.clone(this._sendingRemoteRtpParametersByKind[e.kind],{});o.codecs=c.reduceCodecs(o.codecs,n);let p=this._remoteSdp.getNextMediaSectionIdx(),h=this._pc.addTransceiver(e,{direction:"sendonly",streams:[this._sendStream]}),f=await this._pc.createOffer(),m=a.parse(f.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:m});let v=(0,g.parse)((t||[{}])[0].scalabilityMode);t&&t.length>1&&(y.debug("send() | enabling legacy simulcast"),i=(m=a.parse(f.sdp)).media[p.idx],d.addLegacySimulcast({offerMediaObject:i,numStreams:t.length}),f={type:"offer",sdp:a.write(m)}),y.debug("send() | calling pc.setLocalDescription() [offer:%o]",f),await this._pc.setLocalDescription(f);let b=h.mid;if(s.mid=b,i=(m=a.parse(this._pc.localDescription.sdp)).media[p.idx],s.rtcp.cname=u.getCname({offerMediaObject:i}),s.encodings=d.getRtpEncodings({offerMediaObject:i}),t)for(let w=0;w<s.encodings.length;++w)t[w]&&Object.assign(s.encodings[w],t[w]);if(s.encodings.length>1&&("video/vp8"===s.codecs[0].mimeType.toLowerCase()||"video/h264"===s.codecs[0].mimeType.toLowerCase()))for(let _ of s.encodings)_.scalabilityMode?_.scalabilityMode=`L1T${v.temporalLayers}`:_.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:i,reuseMid:p.reuseMid,offerRtpParameters:s,answerRtpParameters:o,codecOptions:r});let x={type:"answer",sdp:this._remoteSdp.getSdp()};return y.debug("send() | calling pc.setRemoteDescription() [answer:%o]",x),await this._pc.setRemoteDescription(x),this._mapMidTransceiver.set(b,h),{localId:b,rtpParameters:s,rtpSender:h.sender}}async stopSending(e){if(this.assertSendDirection(),this._closed)return;y.debug("stopSending() [localId:%s]",e);let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");t.sender.replaceTrack(null),this._pc.removeTrack(t.sender);let r=this._remoteSdp.closeMediaSection(t.mid);if(r)try{t.stop()}catch(n){}let i=await this._pc.createOffer();y.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);let s={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s),this._mapMidTransceiver.delete(e)}async pauseSending(e){this.assertNotClosed(),this.assertSendDirection(),y.debug("pauseSending() [localId:%s]",e);let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");t.direction="inactive",this._remoteSdp.pauseMediaSection(e);let r=await this._pc.createOffer();y.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);let n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async resumeSending(e){this.assertNotClosed(),this.assertSendDirection(),y.debug("resumeSending() [localId:%s]",e);let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");t.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(e);let r=await this._pc.createOffer();y.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",r),await this._pc.setLocalDescription(r);let n={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",n),await this._pc.setRemoteDescription(n)}async replaceTrack(e,t){this.assertNotClosed(),this.assertSendDirection(),t?y.debug("replaceTrack() [localId:%s, track.id:%s]",e,t.id):y.debug("replaceTrack() [localId:%s, no track]",e);let r=this._mapMidTransceiver.get(e);if(!r)throw Error("associated RTCRtpTransceiver not found");await r.sender.replaceTrack(t)}async setMaxSpatialLayer(e,t){this.assertNotClosed(),this.assertSendDirection(),y.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",e,t);let r=this._mapMidTransceiver.get(e);if(!r)throw Error("associated RTCRtpTransceiver not found");let n=r.sender.getParameters();n.encodings.forEach((e,r)=>{r<=t?e.active=!0:e.active=!1}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);let i=await this._pc.createOffer();y.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);let s={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async setRtpEncodingParameters(e,t){this.assertNotClosed(),this.assertSendDirection(),y.debug("setRtpEncodingParameters() [localId:%s, params:%o]",e,t);let r=this._mapMidTransceiver.get(e);if(!r)throw Error("associated RTCRtpTransceiver not found");let n=r.sender.getParameters();n.encodings.forEach((e,r)=>{n.encodings[r]={...e,...t}}),await r.sender.setParameters(n),this._remoteSdp.muxMediaSectionSimulcast(e,n.encodings);let i=await this._pc.createOffer();y.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",i),await this._pc.setLocalDescription(i);let s={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",s),await this._pc.setRemoteDescription(s)}async getSenderStats(e){this.assertNotClosed(),this.assertSendDirection();let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");return t.sender.getStats()}async sendDataChannel({ordered:e,maxPacketLifeTime:t,maxRetransmits:r,label:n,protocol:i}){this.assertNotClosed(),this.assertSendDirection();let s={negotiated:!0,id:this._nextSendSctpStreamId,ordered:e,maxPacketLifeTime:t,maxRetransmits:r,protocol:i};y.debug("sendDataChannel() [options:%o]",s);let o=this._pc.createDataChannel(n,s);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%v.MIS,!this._hasDataChannelMediaSection){let l=await this._pc.createOffer(),c=a.parse(l.sdp),u=c.media.find(e=>"application"===e.type);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:c}),y.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),this._remoteSdp.sendSctpAssociation({offerMediaObject:u});let d={type:"answer",sdp:this._remoteSdp.getSdp()};y.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setRemoteDescription(d),this._hasDataChannelMediaSection=!0}let p={streamId:s.id,ordered:s.ordered,maxPacketLifeTime:s.maxPacketLifeTime,maxRetransmits:s.maxRetransmits};return{dataChannel:o,sctpStreamParameters:p}}async receive(e){this.assertNotClosed(),this.assertRecvDirection();let t=[],r=new Map;for(let n of e){let{trackId:i,kind:s,rtpParameters:o,streamId:l}=n;y.debug("receive() [trackId:%s, kind:%s]",i,s);let c=o.mid||String(this._mapMidTransceiver.size);r.set(i,c),this._remoteSdp.receive({mid:c,kind:s,offerRtpParameters:o,streamId:l||o.rtcp.cname,trackId:i})}let d={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);let p=await this._pc.createAnswer(),h=a.parse(p.sdp);for(let f of e){let{trackId:m,rtpParameters:g}=f,v=r.get(m),b=h.media.find(e=>String(e.mid)===v);u.applyCodecParameters({offerRtpParameters:g,answerMediaObject:b})}for(let w of(p={type:"answer",sdp:a.write(h)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:h}),y.debug("receive() | calling pc.setLocalDescription() [answer:%o]",p),await this._pc.setLocalDescription(p),e)){let{trackId:_}=w,x=r.get(_),S=this._pc.getTransceivers().find(e=>e.mid===x);if(!S)throw Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(x,S),t.push({localId:x,track:S.receiver.track,rtpReceiver:S.receiver})}return t}async stopReceiving(e){if(this.assertRecvDirection(),this._closed)return;for(let t of e){y.debug("stopReceiving() [localId:%s]",t);let r=this._mapMidTransceiver.get(t);if(!r)throw Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(r.mid)}let n={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();for(let s of(y.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i),e))this._mapMidTransceiver.delete(s)}async pauseReceiving(e){for(let t of(this.assertNotClosed(),this.assertRecvDirection(),e)){y.debug("pauseReceiving() [localId:%s]",t);let r=this._mapMidTransceiver.get(t);if(!r)throw Error("associated RTCRtpTransceiver not found");r.direction="inactive",this._remoteSdp.pauseMediaSection(t)}let n={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();y.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}async resumeReceiving(e){for(let t of(this.assertNotClosed(),this.assertRecvDirection(),e)){y.debug("resumeReceiving() [localId:%s]",t);let r=this._mapMidTransceiver.get(t);if(!r)throw Error("associated RTCRtpTransceiver not found");r.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(t)}let n={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",n),await this._pc.setRemoteDescription(n);let i=await this._pc.createAnswer();y.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",i),await this._pc.setLocalDescription(i)}async getReceiverStats(e){this.assertNotClosed(),this.assertRecvDirection();let t=this._mapMidTransceiver.get(e);if(!t)throw Error("associated RTCRtpTransceiver not found");return t.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:e,label:t,protocol:r}){this.assertNotClosed(),this.assertRecvDirection();let{streamId:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:o}=e,l={negotiated:!0,id:n,ordered:i,maxPacketLifeTime:s,maxRetransmits:o,protocol:r};y.debug("receiveDataChannel() [options:%o]",l);let c=this._pc.createDataChannel(t,l);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();let u={type:"offer",sdp:this._remoteSdp.getSdp()};y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let d=await this._pc.createAnswer();if(!this._transportReady){let p=a.parse(d.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:p})}y.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",d),await this._pc.setLocalDescription(d),this._hasDataChannelMediaSection=!0}return{dataChannel:c}}async setupTransport({localDtlsRole:e,localSdpObject:t}){t||(t=a.parse(this._pc.localDescription.sdp));let r=u.extractDtlsParameters({sdpObject:t});r.role=e,this._remoteSdp.updateDtlsRole("client"===e?"server":"client"),await new Promise((e,t)=>{this.safeEmit("@connect",{dtlsParameters:r},e,t)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new h.InvalidStateError("method called in a closed handler")}assertSendDirection(){if("send"!==this._direction)throw Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if("recv"!==this._direction)throw Error('method can just be called for handlers with "recv" direction')}}t.Safari12=b},63635:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.mangleRtpParameters=t.getCapabilities=void 0;let a=s(r(13347));t.getCapabilities=function(){let e=RTCRtpReceiver.getCapabilities(),t=a.clone(e,{});for(let r of t.codecs){if(r.channels=r.numChannels,delete r.numChannels,r.mimeType=r.mimeType||`${r.kind}/${r.name}`,r.parameters){let n=r.parameters;n.apt&&(n.apt=Number(n.apt)),n["packetization-mode"]&&(n["packetization-mode"]=Number(n["packetization-mode"]))}for(let i of r.rtcpFeedback||[])i.parameter||(i.parameter="")}return t},t.mangleRtpParameters=function(e){let t=a.clone(e,{});for(let r of(t.mid&&(t.muxId=t.mid,delete t.mid),t.codecs))r.channels&&(r.numChannels=r.channels,delete r.channels),r.mimeType&&!r.name&&(r.name=r.mimeType.split("/")[1]),delete r.mimeType;return t}},58954:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addNackSuppportForOpus=void 0,t.addNackSuppportForOpus=function(e){for(let t of e.codecs||[])"audio/opus"!==t.mimeType.toLowerCase()&&"audio/multiopus"!==t.mimeType.toLowerCase()||t.rtcpFeedback?.some(e=>"nack"===e.type&&!e.parameter)||(t.rtcpFeedback||(t.rtcpFeedback=[]),t.rtcpFeedback.push({type:"nack"}))}},76698:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.OfferMediaSection=t.AnswerMediaSection=t.MediaSection=void 0;let a=s(r(70766)),o=s(r(13347));class l{constructor({iceParameters:e,iceCandidates:t,dtlsParameters:r,planB:n=!1}){if(this._mediaObject={},this._planB=n,e&&this.setIceParameters(e),t){for(let i of(this._mediaObject.candidates=[],t)){let s={};s.component=1,s.foundation=i.foundation,s.ip=i.ip,s.port=i.port,s.priority=i.priority,s.transport=i.protocol,s.type=i.type,i.tcpType&&(s.tcptype=i.tcpType),this._mediaObject.candidates.push(s)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}r&&this.setDtlsRole(r.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return 0===this._mediaObject.port}getObject(){return this._mediaObject}setIceParameters(e){this._mediaObject.iceUfrag=e.usernameFragment,this._mediaObject.icePwd=e.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}function c(e){let t=RegExp("^(audio|video)/(.+)","i"),r=t.exec(e.mimeType);if(!r)throw TypeError("invalid codec.mimeType");return r[2]}t.MediaSection=l,t.AnswerMediaSection=class extends l{constructor({iceParameters:e,iceCandidates:t,dtlsParameters:r,sctpParameters:n,plainRtpParameters:i,planB:s=!1,offerMediaObject:a,offerRtpParameters:l,answerRtpParameters:u,codecOptions:d,extmapAllowMixed:p=!1}){switch(super({iceParameters:e,iceCandidates:t,dtlsParameters:r,planB:s}),this._mediaObject.mid=String(a.mid),this._mediaObject.type=a.type,this._mediaObject.protocol=a.protocol,i?(this._mediaObject.connection={ip:i.ip,version:i.ipVersion},this._mediaObject.port=i.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),a.type){case"audio":case"video":for(let h of(this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],u.codecs)){let f={payload:h.payloadType,codec:c(h),rate:h.clockRate};h.channels>1&&(f.encoding=h.channels),this._mediaObject.rtp.push(f);let m=o.clone(h.parameters,{}),g=o.clone(h.rtcpFeedback,[]);if(d){let{opusStereo:y,opusFec:v,opusDtx:b,opusMaxPlaybackRate:w,opusMaxAverageBitrate:_,opusPtime:x,opusNack:S,videoGoogleStartBitrate:T,videoGoogleMaxBitrate:E,videoGoogleMinBitrate:C}=d,k=l.codecs.find(e=>e.payloadType===h.payloadType);switch(h.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":void 0!==y&&(k.parameters["sprop-stereo"]=y?1:0,m.stereo=y?1:0),void 0!==v&&(k.parameters.useinbandfec=v?1:0,m.useinbandfec=v?1:0),void 0!==b&&(k.parameters.usedtx=b?1:0,m.usedtx=b?1:0),void 0!==w&&(m.maxplaybackrate=w),void 0!==_&&(m.maxaveragebitrate=_),void 0!==x&&(k.parameters.ptime=x,m.ptime=x),S||(k.rtcpFeedback=k.rtcpFeedback.filter(e=>"nack"!==e.type||e.parameter),g=g.filter(e=>"nack"!==e.type||e.parameter));break;case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":void 0!==T&&(m["x-google-start-bitrate"]=T),void 0!==E&&(m["x-google-max-bitrate"]=E),void 0!==C&&(m["x-google-min-bitrate"]=C)}}let R={payload:h.payloadType,config:""};for(let P of Object.keys(m))R.config&&(R.config+=";"),R.config+=`${P}=${m[P]}`;for(let D of(R.config&&this._mediaObject.fmtp.push(R),g))this._mediaObject.rtcpFb.push({payload:h.payloadType,type:D.type,subtype:D.parameter})}for(let A of(this._mediaObject.payloads=u.codecs.map(e=>e.payloadType).join(" "),this._mediaObject.ext=[],u.headerExtensions)){let N=(a.ext||[]).some(e=>e.uri===A.uri);N&&this._mediaObject.ext.push({uri:A.uri,value:A.id})}if(p&&"extmap-allow-mixed"===a.extmapAllowMixed&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),a.simulcast)for(let L of(this._mediaObject.simulcast={dir1:"recv",list1:a.simulcast.list1},this._mediaObject.rids=[],a.rids||[]))"send"===L.direction&&this._mediaObject.rids.push({id:L.id,direction:"recv"});else if(a.simulcast_03)for(let O of(this._mediaObject.simulcast_03={value:a.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[],a.rids||[]))"send"===O.direction&&this._mediaObject.rids.push({id:O.id,direction:"recv"});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&"video"===this._mediaObject.type&&(this._mediaObject.xGoogleFlag="conference");break;case"application":"number"==typeof a.sctpPort?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=n.port,this._mediaObject.maxMessageSize=n.maxMessageSize):a.sctpmap&&(this._mediaObject.payloads=n.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:n.port,maxMessageSize:n.maxMessageSize})}}setDtlsRole(e){switch(e){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass"}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(e){if(!this._mediaObject.simulcast||!this._mediaObject.simulcast.list1)return;let t={};for(let r of e)r.rid&&(t[r.rid]=r);let n=this._mediaObject.simulcast.list1,i=a.parseSimulcastStreamList(n);for(let s of i)for(let o of s)o.paused=!t[o.scid]?.active;this._mediaObject.simulcast.list1=i.map(e=>e.map(e=>`${e.paused?"~":""}${e.scid}`).join(",")).join(";")}},t.OfferMediaSection=class extends l{constructor({iceParameters:e,iceCandidates:t,dtlsParameters:r,sctpParameters:n,plainRtpParameters:i,planB:s=!1,mid:a,kind:o,offerRtpParameters:l,streamId:u,trackId:d,oldDataChannelSpec:p=!1}){switch(super({iceParameters:e,iceCandidates:t,dtlsParameters:r,planB:s}),this._mediaObject.mid=String(a),this._mediaObject.type=o,i?(this._mediaObject.connection={ip:i.ip,version:i.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=i.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},n?this._mediaObject.protocol="UDP/DTLS/SCTP":this._mediaObject.protocol="UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),o){case"audio":case"video":{for(let h of(this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${u||"-"} ${d}`),l.codecs)){let f={payload:h.payloadType,codec:c(h),rate:h.clockRate};h.channels>1&&(f.encoding=h.channels),this._mediaObject.rtp.push(f);let m={payload:h.payloadType,config:""};for(let g of Object.keys(h.parameters))m.config&&(m.config+=";"),m.config+=`${g}=${h.parameters[g]}`;for(let y of(m.config&&this._mediaObject.fmtp.push(m),h.rtcpFeedback))this._mediaObject.rtcpFb.push({payload:h.payloadType,type:y.type,subtype:y.parameter})}for(let v of(this._mediaObject.payloads=l.codecs.map(e=>e.payloadType).join(" "),this._mediaObject.ext=[],l.headerExtensions))this._mediaObject.ext.push({uri:v.uri,value:v.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";let b=l.encodings[0],w=b.ssrc,_=b.rtx&&b.rtx.ssrc?b.rtx.ssrc:void 0;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],l.rtcp.cname&&this._mediaObject.ssrcs.push({id:w,attribute:"cname",value:l.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:w,attribute:"msid",value:`${u||"-"} ${d}`}),_&&(l.rtcp.cname&&this._mediaObject.ssrcs.push({id:_,attribute:"cname",value:l.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:_,attribute:"msid",value:`${u||"-"} ${d}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${w} ${_}`}));break}case"application":p?(this._mediaObject.payloads=n.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:n.port,maxMessageSize:n.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=n.port,this._mediaObject.maxMessageSize=n.maxMessageSize)}}setDtlsRole(e){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:e,streamId:t,trackId:r}){let n=e.encodings[0],i=n.ssrc,s=n.rtx&&n.rtx.ssrc?n.rtx.ssrc:void 0,a=this._mediaObject.payloads.split(" ");for(let o of e.codecs){if(a.includes(String(o.payloadType)))continue;let l={payload:o.payloadType,codec:c(o),rate:o.clockRate};o.channels>1&&(l.encoding=o.channels),this._mediaObject.rtp.push(l);let u={payload:o.payloadType,config:""};for(let d of Object.keys(o.parameters))u.config&&(u.config+=";"),u.config+=`${d}=${o.parameters[d]}`;for(let p of(u.config&&this._mediaObject.fmtp.push(u),o.rtcpFeedback))this._mediaObject.rtcpFb.push({payload:o.payloadType,type:p.type,subtype:p.parameter})}this._mediaObject.payloads+=` ${e.codecs.filter(e=>!this._mediaObject.payloads.includes(e.payloadType)).map(e=>e.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),e.rtcp.cname&&this._mediaObject.ssrcs.push({id:i,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:i,attribute:"msid",value:`${t||"-"} ${r}`}),s&&(e.rtcp.cname&&this._mediaObject.ssrcs.push({id:s,attribute:"cname",value:e.rtcp.cname}),this._mediaObject.ssrcs.push({id:s,attribute:"msid",value:`${t||"-"} ${r}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${i} ${s}`}))}planBStopReceiving({offerRtpParameters:e}){let t=e.encodings[0],r=t.ssrc,n=t.rtx&&t.rtx.ssrc?t.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(e=>e.id!==r&&e.id!==n),n&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(e=>e.ssrcs!==`${r} ${n}`))}}},37910:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteSdp=void 0;let a=s(r(70766)),o=r(38562),l=r(76698),c=new o.Logger("RemoteSdp");t.RemoteSdp=class{constructor({iceParameters:e,iceCandidates:t,dtlsParameters:r,sctpParameters:n,plainRtpParameters:i,planB:s=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=e,this._iceCandidates=t,this._dtlsParameters=r,this._sctpParameters=n,this._plainRtpParameters=i,this._planB=s,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},e&&e.iceLite&&(this._sdpObject.icelite="ice-lite"),r){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};let a=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:r.fingerprints[a-1].algorithm,hash:r.fingerprints[a-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}i&&(this._sdpObject.origin.address=i.ip,this._sdpObject.origin.ipVer=i.ipVersion)}updateIceParameters(e){for(let t of(c.debug("updateIceParameters() [iceParameters:%o]",e),this._iceParameters=e,this._sdpObject.icelite=e.iceLite?"ice-lite":void 0,this._mediaSections))t.setIceParameters(e)}updateDtlsRole(e){for(let t of(c.debug("updateDtlsRole() [role:%s]",e),this._dtlsParameters.role=e,this._mediaSections))t.setDtlsRole(e)}getNextMediaSectionIdx(){for(let e=0;e<this._mediaSections.length;++e){let t=this._mediaSections[e];if(t.closed)return{idx:e,reuseMid:t.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:e,reuseMid:t,offerRtpParameters:r,answerRtpParameters:n,codecOptions:i,extmapAllowMixed:s=!1}){let a=new l.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:e,offerRtpParameters:r,answerRtpParameters:n,codecOptions:i,extmapAllowMixed:s});t?this._replaceMediaSection(a,t):this._midToIndex.has(a.mid)?this._replaceMediaSection(a):this._addMediaSection(a)}receive({mid:e,kind:t,offerRtpParameters:r,streamId:n,trackId:i}){let s;let a=this._midToIndex.get(e);if(void 0!==a&&(s=this._mediaSections[a]),s)s.planBReceive({offerRtpParameters:r,streamId:n,trackId:i}),this._replaceMediaSection(s);else{s=new l.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:e,kind:t,offerRtpParameters:r,streamId:n,trackId:i});let o=this._mediaSections.find(e=>e.closed);o?this._replaceMediaSection(s,o.mid):this._addMediaSection(s)}}pauseMediaSection(e){let t=this._findMediaSection(e);t.pause()}resumeSendingMediaSection(e){let t=this._findMediaSection(e);t.resume()}resumeReceivingMediaSection(e){let t=this._findMediaSection(e);t.resume()}disableMediaSection(e){let t=this._findMediaSection(e);t.disable()}closeMediaSection(e){let t=this._findMediaSection(e);return e===this._firstMid?(c.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",e),this.disableMediaSection(e),!1):(t.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(e,t){let r=this._findMediaSection(e);r.muxSimulcastStreams(t),this._replaceMediaSection(r)}planBStopReceiving({mid:e,offerRtpParameters:t}){let r=this._findMediaSection(e);r.planBStopReceiving({offerRtpParameters:t}),this._replaceMediaSection(r)}sendSctpAssociation({offerMediaObject:e}){let t=new l.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:e});this._addMediaSection(t)}receiveSctpAssociation({oldDataChannelSpec:e=!1}={}){let t=new l.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:e});this._addMediaSection(t)}getSdp(){return this._sdpObject.origin.sessionVersion++,a.write(this._sdpObject)}_addMediaSection(e){this._firstMid||(this._firstMid=e.mid),this._mediaSections.push(e),this._midToIndex.set(e.mid,this._mediaSections.length-1),this._sdpObject.media.push(e.getObject()),this._regenerateBundleMids()}_replaceMediaSection(e,t){if("string"==typeof t){let r=this._midToIndex.get(t);if(void 0===r)throw Error(`no media section found for reuseMid '${t}'`);let n=this._mediaSections[r];this._mediaSections[r]=e,this._midToIndex.delete(n.mid),this._midToIndex.set(e.mid,r),this._sdpObject.media[r]=e.getObject(),this._regenerateBundleMids()}else{let i=this._midToIndex.get(e.mid);if(void 0===i)throw Error(`no media section found with mid '${e.mid}'`);this._mediaSections[i]=e,this._sdpObject.media[i]=e.getObject()}}_findMediaSection(e){let t=this._midToIndex.get(e);if(void 0===t)throw Error(`no media section found with mid '${e}'`);return this._mediaSections[t]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(e=>!e.closed).map(e=>e.mid).join(" "))}}},82267:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.applyCodecParameters=t.getCname=t.extractDtlsParameters=t.extractRtpCapabilities=void 0;let a=s(r(70766));t.extractRtpCapabilities=function({sdpObject:e}){let t=new Map,r=[],n=!1,i=!1;for(let s of e.media){let o=s.type;switch(o){case"audio":if(n)continue;n=!0;break;case"video":if(i)continue;i=!0;break;default:continue}for(let l of s.rtp){let c={kind:o,mimeType:`${o}/${l.codec}`,preferredPayloadType:l.payload,clockRate:l.rate,channels:l.encoding,parameters:{},rtcpFeedback:[]};t.set(c.preferredPayloadType,c)}for(let u of s.fmtp||[]){let d=a.parseParams(u.config),p=t.get(u.payload);p&&(d&&d.hasOwnProperty("profile-level-id")&&(d["profile-level-id"]=String(d["profile-level-id"])),p.parameters=d)}for(let h of s.rtcpFb||[]){let f={type:h.type,parameter:h.subtype};if(f.parameter||delete f.parameter,"*"!==h.payload){let m=t.get(h.payload);if(!m)continue;m.rtcpFeedback.push(f)}else for(let g of t.values())g.kind!==o||/.+\/rtx$/i.test(g.mimeType)||g.rtcpFeedback.push(f)}for(let y of s.ext||[]){if(y["encrypt-uri"])continue;let v={kind:o,uri:y.uri,preferredId:y.value};r.push(v)}}let b={codecs:Array.from(t.values()),headerExtensions:r};return b},t.extractDtlsParameters=function({sdpObject:e}){let t;let r=(e.media||[]).find(e=>e.iceUfrag&&0!==e.port);if(!r)throw Error("no active media section found");let n=r.fingerprint||e.fingerprint;switch(r.setup){case"active":t="client";break;case"passive":t="server";break;case"actpass":t="auto"}let i={role:t,fingerprints:[{algorithm:n.type,value:n.hash}]};return i},t.getCname=function({offerMediaObject:e}){let t=(e.ssrcs||[]).find(e=>"cname"===e.attribute);return t?t.value:""},t.applyCodecParameters=function({offerRtpParameters:e,answerMediaObject:t}){for(let r of e.codecs){let n=r.mimeType.toLowerCase();if("audio/opus"!==n)continue;let i=(t.rtp||[]).find(e=>e.payload===r.payloadType);if(!i)continue;t.fmtp=t.fmtp||[];let s=t.fmtp.find(e=>e.payload===r.payloadType);s||(s={payload:r.payloadType,config:""},t.fmtp.push(s));let o=a.parseParams(s.config);if("audio/opus"===n){let l=r.parameters["sprop-stereo"];void 0!==l&&(o.stereo=l?1:0)}for(let c of(s.config="",Object.keys(o)))s.config&&(s.config+=";"),s.config+=`${c}=${o[c]}`}}},89875:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLegacySimulcast=t.getRtpEncodings=void 0,t.getRtpEncodings=function({offerMediaObject:e,track:t}){let r;let n=new Set;for(let i of e.ssrcs||[]){if("msid"!==i.attribute)continue;let s=i.value.split(" ")[1];if(s===t.id){let a=i.id;n.add(a),r||(r=a)}}if(0===n.size)throw Error(`a=ssrc line with msid information not found [track.id:${t.id}]`);let o=new Map;for(let l of e.ssrcGroups||[]){if("FID"!==l.semantics)continue;let[c,u]=l.ssrcs.split(/\s+/);c=Number(c),u=Number(u),n.has(c)&&(n.delete(c),n.delete(u),o.set(c,u))}for(let d of n)o.set(d,null);let p=[];for(let[h,f]of o){let m={ssrc:h};f&&(m.rtx={ssrc:f}),p.push(m)}return p},t.addLegacySimulcast=function({offerMediaObject:e,track:t,numStreams:r}){let n,i,s;if(r<=1)throw TypeError("numStreams must be greater than 1");let a=(e.ssrcs||[]).find(e=>{if("msid"!==e.attribute)return!1;let r=e.value.split(" ")[1];return r===t.id&&(n=e.id,s=e.value.split(" ")[0],!0)});if(!a)throw Error(`a=ssrc line with msid information not found [track.id:${t.id}]`);(e.ssrcGroups||[]).some(e=>{if("FID"!==e.semantics)return!1;let t=e.ssrcs.split(/\s+/);return Number(t[0])===n&&(i=Number(t[1]),!0)});let o=e.ssrcs.find(e=>"cname"===e.attribute&&e.id===n);if(!o)throw Error(`a=ssrc line with cname information not found [track.id:${t.id}]`);let l=o.value,c=[],u=[];for(let d=0;d<r;++d)c.push(n+d),i&&u.push(i+d);e.ssrcGroups=e.ssrcGroups||[],e.ssrcs=e.ssrcs||[],e.ssrcGroups.push({semantics:"SIM",ssrcs:c.join(" ")});for(let p=0;p<c.length;++p){let h=c[p];e.ssrcs.push({id:h,attribute:"cname",value:l}),e.ssrcs.push({id:h,attribute:"msid",value:`${s} ${t.id}`})}for(let f=0;f<u.length;++f){let m=c[f],g=u[f];e.ssrcs.push({id:g,attribute:"cname",value:l}),e.ssrcs.push({id:g,attribute:"msid",value:`${s} ${t.id}`}),e.ssrcGroups.push({semantics:"FID",ssrcs:`${m} ${g}`})}}},29072:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addLegacySimulcast=t.getRtpEncodings=void 0,t.getRtpEncodings=function({offerMediaObject:e}){let t=new Set;for(let r of e.ssrcs||[]){let n=r.id;t.add(n)}if(0===t.size)throw Error("no a=ssrc lines found");let i=new Map;for(let s of e.ssrcGroups||[]){if("FID"!==s.semantics)continue;let[a,o]=s.ssrcs.split(/\s+/);a=Number(a),o=Number(o),t.has(a)&&(t.delete(a),t.delete(o),i.set(a,o))}for(let l of t)i.set(l,null);let c=[];for(let[u,d]of i){let p={ssrc:u};d&&(p.rtx={ssrc:d}),c.push(p)}return c},t.addLegacySimulcast=function({offerMediaObject:e,numStreams:t}){let r;if(t<=1)throw TypeError("numStreams must be greater than 1");let n=(e.ssrcs||[]).find(e=>"msid"===e.attribute);if(!n)throw Error("a=ssrc line with msid information not found");let[i,s]=n.value.split(" "),a=n.id;(e.ssrcGroups||[]).some(e=>{if("FID"!==e.semantics)return!1;let t=e.ssrcs.split(/\s+/);return Number(t[0])===a&&(r=Number(t[1]),!0)});let o=e.ssrcs.find(e=>"cname"===e.attribute);if(!o)throw Error("a=ssrc line with cname information not found");let l=o.value,c=[],u=[];for(let d=0;d<t;++d)c.push(a+d),r&&u.push(r+d);e.ssrcGroups=[],e.ssrcs=[],e.ssrcGroups.push({semantics:"SIM",ssrcs:c.join(" ")});for(let p=0;p<c.length;++p){let h=c[p];e.ssrcs.push({id:h,attribute:"cname",value:l}),e.ssrcs.push({id:h,attribute:"msid",value:`${i} ${s}`})}for(let f=0;f<u.length;++f){let m=c[f],g=u[f];e.ssrcs.push({id:g,attribute:"cname",value:l}),e.ssrcs.push({id:g,attribute:"msid",value:`${i} ${s}`}),e.ssrcGroups.push({semantics:"FID",ssrcs:`${m} ${g}`})}}},50960:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.debug=t.parseScalabilityMode=t.detectDevice=t.Device=t.version=t.types=void 0;let o=a(r(11227));t.debug=o.default;let l=r(43120);Object.defineProperty(t,"Device",{enumerable:!0,get:function(){return l.Device}}),Object.defineProperty(t,"detectDevice",{enumerable:!0,get:function(){return l.detectDevice}});let c=s(r(10053));t.types=c,t.version="3.6.97";var u=r(82770);Object.defineProperty(t,"parseScalabilityMode",{enumerable:!0,get:function(){return u.parse}})},45280:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.canReceive=t.canSend=t.generateProbatorRtpParameters=t.reduceCodecs=t.getSendingRemoteRtpParameters=t.getSendingRtpParameters=t.getRecvRtpCapabilities=t.getExtendedRtpCapabilities=t.validateSctpStreamParameters=t.validateSctpParameters=t.validateNumSctpStreams=t.validateSctpCapabilities=t.validateRtcpParameters=t.validateRtpEncodingParameters=t.validateRtpHeaderExtensionParameters=t.validateRtpCodecParameters=t.validateRtpParameters=t.validateRtpHeaderExtension=t.validateRtcpFeedback=t.validateRtpCodecCapability=t.validateRtpCapabilities=void 0;let a=s(r(57855)),o=s(r(13347));function l(e){let t=RegExp("^(audio|video)/(.+)","i");if("object"!=typeof e)throw TypeError("codec is not an object");if(!e.mimeType||"string"!=typeof e.mimeType)throw TypeError("missing codec.mimeType");let r=t.exec(e.mimeType);if(!r)throw TypeError("invalid codec.mimeType");if(e.kind=r[1].toLowerCase(),e.preferredPayloadType&&"number"!=typeof e.preferredPayloadType)throw TypeError("invalid codec.preferredPayloadType");if("number"!=typeof e.clockRate)throw TypeError("missing codec.clockRate");for(let n of("audio"===e.kind?"number"!=typeof e.channels&&(e.channels=1):delete e.channels,e.parameters&&"object"==typeof e.parameters||(e.parameters={}),Object.keys(e.parameters))){let i=e.parameters[n];if(void 0===i&&(e.parameters[n]="",i=""),"string"!=typeof i&&"number"!=typeof i)throw TypeError(`invalid codec parameter [key:${n}s, value:${i}]`);if("apt"===n&&"number"!=typeof i)throw TypeError("invalid codec apt parameter")}for(let s of(e.rtcpFeedback&&Array.isArray(e.rtcpFeedback)||(e.rtcpFeedback=[]),e.rtcpFeedback))c(s)}function c(e){if("object"!=typeof e)throw TypeError("fb is not an object");if(!e.type||"string"!=typeof e.type)throw TypeError("missing fb.type");e.parameter&&"string"==typeof e.parameter||(e.parameter="")}function u(e){if("object"!=typeof e)throw TypeError("ext is not an object");if("audio"!==e.kind&&"video"!==e.kind)throw TypeError("invalid ext.kind");if(!e.uri||"string"!=typeof e.uri)throw TypeError("missing ext.uri");if("number"!=typeof e.preferredId)throw TypeError("missing ext.preferredId");if(e.preferredEncrypt&&"boolean"!=typeof e.preferredEncrypt)throw TypeError("invalid ext.preferredEncrypt");if(e.preferredEncrypt||(e.preferredEncrypt=!1),e.direction&&"string"!=typeof e.direction)throw TypeError("invalid ext.direction");e.direction||(e.direction="sendrecv")}function d(e){if("object"!=typeof e)throw TypeError("params is not an object");if(e.mid&&"string"!=typeof e.mid)throw TypeError("params.mid is not a string");if(!Array.isArray(e.codecs))throw TypeError("missing params.codecs");for(let t of e.codecs)p(t);if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw TypeError("params.headerExtensions is not an array");for(let r of(e.headerExtensions||(e.headerExtensions=[]),e.headerExtensions))h(r);if(e.encodings&&!Array.isArray(e.encodings))throw TypeError("params.encodings is not an array");for(let n of(e.encodings||(e.encodings=[]),e.encodings))f(n);if(e.rtcp&&"object"!=typeof e.rtcp)throw TypeError("params.rtcp is not an object");e.rtcp||(e.rtcp={}),m(e.rtcp)}function p(e){let t=RegExp("^(audio|video)/(.+)","i");if("object"!=typeof e)throw TypeError("codec is not an object");if(!e.mimeType||"string"!=typeof e.mimeType)throw TypeError("missing codec.mimeType");let r=t.exec(e.mimeType);if(!r)throw TypeError("invalid codec.mimeType");if("number"!=typeof e.payloadType)throw TypeError("missing codec.payloadType");if("number"!=typeof e.clockRate)throw TypeError("missing codec.clockRate");let n=r[1].toLowerCase();for(let i of("audio"===n?"number"!=typeof e.channels&&(e.channels=1):delete e.channels,e.parameters&&"object"==typeof e.parameters||(e.parameters={}),Object.keys(e.parameters))){let s=e.parameters[i];if(void 0===s&&(e.parameters[i]="",s=""),"string"!=typeof s&&"number"!=typeof s)throw TypeError(`invalid codec parameter [key:${i}s, value:${s}]`);if("apt"===i&&"number"!=typeof s)throw TypeError("invalid codec apt parameter")}for(let a of(e.rtcpFeedback&&Array.isArray(e.rtcpFeedback)||(e.rtcpFeedback=[]),e.rtcpFeedback))c(a)}function h(e){if("object"!=typeof e)throw TypeError("ext is not an object");if(!e.uri||"string"!=typeof e.uri)throw TypeError("missing ext.uri");if("number"!=typeof e.id)throw TypeError("missing ext.id");if(e.encrypt&&"boolean"!=typeof e.encrypt)throw TypeError("invalid ext.encrypt");for(let t of(e.encrypt||(e.encrypt=!1),e.parameters&&"object"==typeof e.parameters||(e.parameters={}),Object.keys(e.parameters))){let r=e.parameters[t];if(void 0===r&&(e.parameters[t]="",r=""),"string"!=typeof r&&"number"!=typeof r)throw TypeError("invalid header extension parameter")}}function f(e){if("object"!=typeof e)throw TypeError("encoding is not an object");if(e.ssrc&&"number"!=typeof e.ssrc)throw TypeError("invalid encoding.ssrc");if(e.rid&&"string"!=typeof e.rid)throw TypeError("invalid encoding.rid");if(e.rtx&&"object"!=typeof e.rtx)throw TypeError("invalid encoding.rtx");if(e.rtx&&"number"!=typeof e.rtx.ssrc)throw TypeError("missing encoding.rtx.ssrc");if(e.dtx&&"boolean"==typeof e.dtx||(e.dtx=!1),e.scalabilityMode&&"string"!=typeof e.scalabilityMode)throw TypeError("invalid encoding.scalabilityMode")}function m(e){if("object"!=typeof e)throw TypeError("rtcp is not an object");if(e.cname&&"string"!=typeof e.cname)throw TypeError("invalid rtcp.cname");e.reducedSize&&"boolean"==typeof e.reducedSize||(e.reducedSize=!0)}function g(e){if("object"!=typeof e)throw TypeError("numStreams is not an object");if("number"!=typeof e.OS)throw TypeError("missing numStreams.OS");if("number"!=typeof e.MIS)throw TypeError("missing numStreams.MIS")}function y(e){return!!e&&/.+\/rtx$/i.test(e.mimeType)}function v(e,t,{strict:r=!1,modify:n=!1}={}){let i=e.mimeType.toLowerCase(),s=t.mimeType.toLowerCase();if(i!==s||e.clockRate!==t.clockRate||e.channels!==t.channels)return!1;switch(i){case"video/h264":if(r){let o;let l=e.parameters["packetization-mode"]||0,c=t.parameters["packetization-mode"]||0;if(l!==c||!a.isSameProfile(e.parameters,t.parameters))return!1;try{o=a.generateProfileLevelIdForAnswer(e.parameters,t.parameters)}catch(u){return!1}n&&(o?(e.parameters["profile-level-id"]=o,t.parameters["profile-level-id"]=o):(delete e.parameters["profile-level-id"],delete t.parameters["profile-level-id"]))}break;case"video/vp9":if(r){let d=e.parameters["profile-id"]||0,p=t.parameters["profile-id"]||0;if(d!==p)return!1}}return!0}t.validateRtpCapabilities=function(e){if("object"!=typeof e)throw TypeError("caps is not an object");if(e.codecs&&!Array.isArray(e.codecs))throw TypeError("caps.codecs is not an array");for(let t of(e.codecs||(e.codecs=[]),e.codecs))l(t);if(e.headerExtensions&&!Array.isArray(e.headerExtensions))throw TypeError("caps.headerExtensions is not an array");for(let r of(e.headerExtensions||(e.headerExtensions=[]),e.headerExtensions))u(r)},t.validateRtpCodecCapability=l,t.validateRtcpFeedback=c,t.validateRtpHeaderExtension=u,t.validateRtpParameters=d,t.validateRtpCodecParameters=p,t.validateRtpHeaderExtensionParameters=h,t.validateRtpEncodingParameters=f,t.validateRtcpParameters=m,t.validateSctpCapabilities=function(e){if("object"!=typeof e)throw TypeError("caps is not an object");if(!e.numStreams||"object"!=typeof e.numStreams)throw TypeError("missing caps.numStreams");g(e.numStreams)},t.validateNumSctpStreams=g,t.validateSctpParameters=function(e){if("object"!=typeof e)throw TypeError("params is not an object");if("number"!=typeof e.port)throw TypeError("missing params.port");if("number"!=typeof e.OS)throw TypeError("missing params.OS");if("number"!=typeof e.MIS)throw TypeError("missing params.MIS");if("number"!=typeof e.maxMessageSize)throw TypeError("missing params.maxMessageSize")},t.validateSctpStreamParameters=function(e){if("object"!=typeof e)throw TypeError("params is not an object");if("number"!=typeof e.streamId)throw TypeError("missing params.streamId");let t=!1;if("boolean"==typeof e.ordered?t=!0:e.ordered=!0,e.maxPacketLifeTime&&"number"!=typeof e.maxPacketLifeTime)throw TypeError("invalid params.maxPacketLifeTime");if(e.maxRetransmits&&"number"!=typeof e.maxRetransmits)throw TypeError("invalid params.maxRetransmits");if(e.maxPacketLifeTime&&e.maxRetransmits)throw TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(t&&e.ordered&&(e.maxPacketLifeTime||e.maxRetransmits))throw TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(!t&&(e.maxPacketLifeTime||e.maxRetransmits)&&(e.ordered=!1),e.label&&"string"!=typeof e.label)throw TypeError("invalid params.label");if(e.protocol&&"string"!=typeof e.protocol)throw TypeError("invalid params.protocol")},t.getExtendedRtpCapabilities=function(e,t){let r={codecs:[],headerExtensions:[]};for(let n of t.codecs||[]){if(y(n))continue;let i=(e.codecs||[]).find(e=>v(e,n,{strict:!0,modify:!0}));if(!i)continue;let s={mimeType:i.mimeType,kind:i.kind,clockRate:i.clockRate,channels:i.channels,localPayloadType:i.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:n.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:i.parameters,remoteParameters:n.parameters,rtcpFeedback:function(e,t){let r=[];for(let n of e.rtcpFeedback||[]){let i=(t.rtcpFeedback||[]).find(e=>e.type===n.type&&(e.parameter===n.parameter||!e.parameter&&!n.parameter));i&&r.push(i)}return r}(i,n)};r.codecs.push(s)}for(let a of r.codecs){let o=e.codecs.find(e=>y(e)&&e.parameters.apt===a.localPayloadType),l=t.codecs.find(e=>y(e)&&e.parameters.apt===a.remotePayloadType);o&&l&&(a.localRtxPayloadType=o.preferredPayloadType,a.remoteRtxPayloadType=l.preferredPayloadType)}for(let c of t.headerExtensions){let u=e.headerExtensions.find(e=>{var t;return t=c,(!e.kind||!t.kind||e.kind===t.kind)&&e.uri===t.uri});if(!u)continue;let d={kind:c.kind,uri:c.uri,sendId:u.preferredId,recvId:c.preferredId,encrypt:u.preferredEncrypt,direction:"sendrecv"};switch(c.direction){case"sendrecv":d.direction="sendrecv";break;case"recvonly":d.direction="sendonly";break;case"sendonly":d.direction="recvonly";break;case"inactive":d.direction="inactive"}r.headerExtensions.push(d)}return r},t.getRecvRtpCapabilities=function(e){let t={codecs:[],headerExtensions:[]};for(let r of e.codecs){let n={mimeType:r.mimeType,kind:r.kind,preferredPayloadType:r.remotePayloadType,clockRate:r.clockRate,channels:r.channels,parameters:r.localParameters,rtcpFeedback:r.rtcpFeedback};if(t.codecs.push(n),!r.remoteRtxPayloadType)continue;let i={mimeType:`${r.kind}/rtx`,kind:r.kind,preferredPayloadType:r.remoteRtxPayloadType,clockRate:r.clockRate,parameters:{apt:r.remotePayloadType},rtcpFeedback:[]};t.codecs.push(i)}for(let s of e.headerExtensions){if("sendrecv"!==s.direction&&"recvonly"!==s.direction)continue;let a={kind:s.kind,uri:s.uri,preferredId:s.recvId,preferredEncrypt:s.encrypt,direction:s.direction};t.headerExtensions.push(a)}return t},t.getSendingRtpParameters=function(e,t){let r={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(let n of t.codecs){if(n.kind!==e)continue;let i={mimeType:n.mimeType,payloadType:n.localPayloadType,clockRate:n.clockRate,channels:n.channels,parameters:n.localParameters,rtcpFeedback:n.rtcpFeedback};if(r.codecs.push(i),n.localRtxPayloadType){let s={mimeType:`${n.kind}/rtx`,payloadType:n.localRtxPayloadType,clockRate:n.clockRate,parameters:{apt:n.localPayloadType},rtcpFeedback:[]};r.codecs.push(s)}}for(let a of t.headerExtensions){if(a.kind&&a.kind!==e||"sendrecv"!==a.direction&&"sendonly"!==a.direction)continue;let o={uri:a.uri,id:a.sendId,encrypt:a.encrypt,parameters:{}};r.headerExtensions.push(o)}return r},t.getSendingRemoteRtpParameters=function(e,t){let r={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(let n of t.codecs){if(n.kind!==e)continue;let i={mimeType:n.mimeType,payloadType:n.localPayloadType,clockRate:n.clockRate,channels:n.channels,parameters:n.remoteParameters,rtcpFeedback:n.rtcpFeedback};if(r.codecs.push(i),n.localRtxPayloadType){let s={mimeType:`${n.kind}/rtx`,payloadType:n.localRtxPayloadType,clockRate:n.clockRate,parameters:{apt:n.localPayloadType},rtcpFeedback:[]};r.codecs.push(s)}}for(let a of t.headerExtensions){if(a.kind&&a.kind!==e||"sendrecv"!==a.direction&&"sendonly"!==a.direction)continue;let o={uri:a.uri,id:a.sendId,encrypt:a.encrypt,parameters:{}};r.headerExtensions.push(o)}if(r.headerExtensions.some(e=>"http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"===e.uri))for(let l of r.codecs)l.rtcpFeedback=(l.rtcpFeedback||[]).filter(e=>"goog-remb"!==e.type);else if(r.headerExtensions.some(e=>"http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"===e.uri))for(let c of r.codecs)c.rtcpFeedback=(c.rtcpFeedback||[]).filter(e=>"transport-cc"!==e.type);else for(let u of r.codecs)u.rtcpFeedback=(u.rtcpFeedback||[]).filter(e=>"transport-cc"!==e.type&&"goog-remb"!==e.type);return r},t.reduceCodecs=function(e,t){let r=[];if(t){for(let n=0;n<e.length;++n)if(v(e[n],t)){r.push(e[n]),y(e[n+1])&&r.push(e[n+1]);break}if(0===r.length)throw TypeError("no matching codec found")}else r.push(e[0]),y(e[1])&&r.push(e[1]);return r},t.generateProbatorRtpParameters=function(e){d(e=o.clone(e,{}));let t={mid:"probator",codecs:[],headerExtensions:[],encodings:[{ssrc:1234}],rtcp:{cname:"probator"}};return t.codecs.push(e.codecs[0]),t.codecs[0].payloadType=127,t.headerExtensions=e.headerExtensions,t},t.canSend=function(e,t){return t.codecs.some(t=>t.kind===e)},t.canReceive=function(e,t){if(d(e),0===e.codecs.length)return!1;let r=e.codecs[0];return t.codecs.some(e=>e.remotePayloadType===r.payloadType)}},82770:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=void 0;let r=RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");t.parse=function(e){let t=r.exec(e||"");return t?{spatialLayers:Number(t[1]),temporalLayers:Number(t[2])}:{spatialLayers:1,temporalLayers:1}}},10053:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(43120),t),i(r(35202),t),i(r(26569),t),i(r(59514),t),i(r(25504),t),i(r(31623),t),i(r(94879),t),i(r(37669),t),i(r(89316),t),i(r(99992),t)},13347:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateRandomNumber=t.clone=void 0,t.clone=function(e,t){return void 0===e?t:JSON.parse(JSON.stringify(e))},t.generateRandomNumber=function(){return Math.round(1e7*Math.random())}},70942:function(e,t,r){"use strict";let n=r(33310),{hasOwnProperty:i}=Object.prototype,{propertyIsEnumerable:s}=Object,a=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,enumerable:!0,configurable:!0}),o=this,l={concatArrays:!1,ignoreUndefined:!1},c=e=>{let t=[];for(let r in e)i.call(e,r)&&t.push(r);if(Object.getOwnPropertySymbols){let n=Object.getOwnPropertySymbols(e);for(let a of n)s.call(e,a)&&t.push(a)}return t};function u(e){return Array.isArray(e)?function(e){let t=e.slice(0,0);return c(e).forEach(r=>{a(t,r,u(e[r]))}),t}(e):n(e)?function(e){let t=null===Object.getPrototypeOf(e)?Object.create(null):{};return c(e).forEach(r=>{a(t,r,u(e[r]))}),t}(e):e}let d=(e,t,r,n)=>(r.forEach(r=>{void 0===t[r]&&n.ignoreUndefined||(r in e&&e[r]!==Object.getPrototypeOf(e)?a(e,r,h(e[r],t[r],n)):a(e,r,u(t[r])))}),e),p=(e,t,r)=>{let n=e.slice(0,0),s=0;return[e,t].forEach(t=>{let o=[];for(let l=0;l<t.length;l++)i.call(t,l)&&(o.push(String(l)),t===e?a(n,s++,t[l]):a(n,s++,u(t[l])));n=d(n,t,c(t).filter(e=>!o.includes(e)),r)}),n};function h(e,t,r){return r.concatArrays&&Array.isArray(e)&&Array.isArray(t)?p(e,t,r):n(t)&&n(e)?d(e,t,c(t),r):u(t)}e.exports=function(...e){let t=h(u(l),this!==o&&this||{},l),r={_:{}};for(let i of e)if(void 0!==i){if(!n(i))throw TypeError("`"+i+"` is not an Option Object");r=h(r,{_:i},t)}return r._}},54125:function(e){e.exports=function(){var e={80:function(e,t,r){e.exports=r(728).default},728:function(e,t,r){"use strict";r.d(t,{default:function(){return tO}});var n=r(48),i=r.n(n),s=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},a=function(){return("000000"+(2176782336*Math.random()<<0).toString(36)).slice(-6)},o=function(e){return e&&void 0!==e.nodeName?(e.muxId||(e.muxId=e.id||a()),e.muxId):e},l=function(e){e&&void 0!==e.nodeName?e=o(t=e):t=document.querySelector(e);var t,r=t&&t.nodeName?t.nodeName.toLowerCase():"";return[t,e,r]},c=r(640),u=r.n(c),d=u().methodFactory;u().methodFactory=function(e,t,r){var n=d(e,t,r);return function(){for(var e=["[mux]"],t=0;t<arguments.length;t++)e.push(arguments[t]);n.apply(void 0,e)}},u().setLevel(u().getLevel());var p=u();function h(){return"1"===(i().doNotTrack||i().navigator&&i().navigator.doNotTrack)}var f={now:function(){var e=i().performance,t=e&&e.timing,r=t&&t.navigationStart;return Math.round("number"==typeof r&&"function"==typeof e.now?r+e.now():Date.now())}},m=function(e){return g(e)[0]},g=function(e){if("string"!=typeof e||""===e)return["localhost"];var t,r=(e.match(/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/)||[])[4];return r&&(t=(r.match(/[^\.]+\.[^\.]+$/)||[])[0]),[r,t]},y={exists:function(){var e=i().performance;return void 0!==(e&&e.timing)},domContentLoadedEventEnd:function(){var e=i().performance,t=e&&e.timing;return t&&t.domContentLoadedEventEnd},navigationStart:function(){var e=i().performance,t=e&&e.timing;return t&&t.navigationStart}};function v(e,t,r){r=void 0===r?1:r,e[t]=e[t]||0,e[t]+=r}var b=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],w=["x-cdn","content-type"].concat(b);function _(e){var t={};return(e=e||"").trim().split(/[\r\n]+/).forEach(function(e){if(e){var r=e.split(": "),n=r.shift();n&&(w.indexOf(n.toLowerCase())>=0||0===n.toLowerCase().indexOf("x-litix-"))&&(t[n]=r.join(": "))}}),t}function x(e){if(e){var t=b.find(function(t){return void 0!==e[t]});return t?e[t]:void 0}}var S=function(e){var t={};for(var r in e){var n=e[r];-1!==n["DATA-ID"].search("io.litix.data.")&&(t[n["DATA-ID"].replace("io.litix.data.","")]=n.VALUE)}return t};function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(Object(r),!0).forEach(function(t){var n,i;n=e,i=r[t],t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var C=function(e){if(!e)return{};var t=y.navigationStart(),r=e.loading,n=r?r.start:e.trequest,i=r?r.first:e.tfirst,s=r?r.end:e.tload;return{bytesLoaded:e.total,requestStart:Math.round(t+n),responseStart:Math.round(t+i),responseEnd:Math.round(t+s)}},k=function(e){if(e&&"function"==typeof e.getAllResponseHeaders)return _(e.getAllResponseHeaders())};function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach(function(t){var n,i;n=e,i=r[t],t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var D=function(e,t){if(!e||"function"!=typeof e.getRequests)return{};var r=e.getRequests({state:"executed"});if(0===r.length)return{};var n,i=r[r.length-1],s=m(i.url),a=i.url,o=i.bytesLoaded,l=new Date(i.requestStartDate).getTime(),c=new Date(i.firstByteDate).getTime(),u=new Date(i.requestEndDate).getTime(),d=isNaN(i.duration)?0:i.duration,p="function"==typeof t.getMetricsFor?t.getMetricsFor(i.mediaType).HttpList:t.getDashMetrics().getHttpRequests(i.mediaType);return p.length>0&&(n=_(p[p.length-1]._responseHeaders||"")),{requestStart:l,requestResponseStart:c,requestResponseEnd:u,requestBytesLoaded:o,requestResponseHeaders:n,requestMediaDuration:d,requestHostname:s,requestUrl:a,requestId:n?x(n):void 0}},A=function(e,t){var r=t.getQualityFor(e),n=t.getCurrentTrackFor(e).bitrateList;return n?{currentLevel:r,renditionWidth:n[r].width||null,renditionHeight:n[r].height||null,renditionBitrate:n[r].bandwidth}:{}},N=function(e){var t;return null===(t=e.match(/.*codecs\*?="(.*)"/))||void 0===t?void 0:t[1]};function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var O=0,I=function(){var e,t;function r(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r)}return e=[{key:"on",value:function(e,t,r){return t._eventEmitterGuid=t._eventEmitterGuid||++O,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],r&&(t=t.bind(r)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var r=this._listeners&&this._listeners[e];r&&r.forEach(function(e,n){e._eventEmitterGuid===t._eventEmitterGuid&&r.splice(n,1)})}},{key:"one",value:function(e,t,r){var n=this;t._eventEmitterGuid=t._eventEmitterGuid||++O;var i=function i(){n.off(e,i),t.apply(r||this,arguments)};i._eventEmitterGuid=t._eventEmitterGuid,this.on(e,i)}},{key:"emit",value:function(e,t){var r=this;if(this._listeners){t=t||{};var n=this._listeners["before*"]||[],i=this._listeners[e]||[],s=this._listeners["after"+e]||[],a=function(t,n){(t=t.slice()).forEach(function(t){t.call(r,{type:e},n)})};a(n,t),a(i,t),a(s,t)}}}],L(r.prototype,e),t&&L(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();function M(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var j=function(){var e;function t(e){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.pm=e,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,e.on("playing",function(){r._playheadShouldBeProgressing=!0}),e.on("play",this._startPlaybackHeartbeatInterval.bind(this)),e.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),e.on("seeking",this._startPlaybackHeartbeatInterval.bind(this)),e.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),e.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("seeked",function(){e.data.player_is_paused?r._stopPlaybackHeartbeatInterval():r._startPlaybackHeartbeatInterval()}),e.on("timeupdate",function(){null!==r._playbackHeartbeatInterval&&e.emit("playbackheartbeat")}),e.on("devicesleep",function(t,n){null!==r._playbackHeartbeatInterval&&(i().clearInterval(r._playbackHeartbeatInterval),e.emit("playbackheartbeatend",{viewer_time:n.viewer_time}),r._playbackHeartbeatInterval=null)})}return M(t.prototype,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;null===this._playbackHeartbeatInterval&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=i().setInterval(function(){e.pm.emit("playbackheartbeat")},this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,null!==this._playbackHeartbeatInterval&&(i().clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),e&&M(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var $=(e5=function e(t){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),t.on("viewinit",function(){r.viewErrored=!1}),t.on("error",function(e,n){try{var i=t.errorTranslator({player_error_code:n.player_error_code,player_error_message:n.player_error_message,player_error_context:n.player_error_context});i?(t.data.player_error_code=i.player_error_code||n.player_error_code,t.data.player_error_message=i.player_error_message||n.player_error_message,t.data.player_error_context=i.player_error_context||n.player_error_context,r.viewErrored=!0):(delete t.data.player_error_code,delete t.data.player_error_message,delete t.data.player_error_context)}catch(s){t.mux.log.warn("Exception in error translator callback.",s),r.viewErrored=!0}})},e4&&F(e5.prototype,e4),e6&&F(e5,e6),Object.defineProperty(e5,"prototype",{writable:!1}),e5);function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var U=function(){var e;function t(e){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.pm=e,this._watchTimeTrackerLastCheckedTime=null,e.on("playbackheartbeat",this._updateWatchTime.bind(this)),e.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return B(t.prototype,[{key:"_updateWatchTime",value:function(e,t){var r=t.viewer_time;null===this._watchTimeTrackerLastCheckedTime&&(this._watchTimeTrackerLastCheckedTime=r),v(this.pm.data,"view_watch_time",r-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=r}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}]),e&&B(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var z=function(){var e,t;function r(e){var t=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,r),this.pm=e,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=f.now(),this._isAdPlaying=!1,e.on("playbackheartbeat",this._updatePlaybackTime.bind(this)),e.on("playbackheartbeatend",this._clearPlaybackTimeState.bind(this)),e.on("seeking",this._clearPlaybackTimeState.bind(this)),e.on("adplaying",function(){t._isAdPlaying=!0}),e.on("adended",function(){t._isAdPlaying=!1}),e.on("adpause",function(){t._isAdPlaying=!1}),e.on("adbreakstart",function(){t._isAdPlaying=!1}),e.on("adbreakend",function(){t._isAdPlaying=!1}),e.on("adplay",function(){t._isAdPlaying=!1})}return e=[{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time,t=f.now(),r=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?r=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(r=t-this._lastTime),r>0&&r<=1e3&&v(this.pm.data,"view_content_playback_time",r),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=t}},{key:"_clearPlaybackTimeState",value:function(){this._updatePlaybackTime(),this._playbackTimeTrackerLastPlayheadPosition=-1}}],q(r.prototype,e),t&&q(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var H=function(){var e,t;function r(e){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,r),this.pm=e;var t=this._updatePlayheadTime.bind(this);e.on("playbackheartbeat",t),e.on("playbackheartbeatend",t),e.on("timeupdate",t),e.on("destroy",function(){e.off("timeupdate",t)})}return e=[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=void 0===this.pm.data.view_max_playhead_position?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var r=this,n=function(){r.pm.currentFragmentPDT&&r.pm.currentFragmentStart&&(r.pm.data.player_program_time=r.pm.currentFragmentPDT+r.pm.data.player_playhead_time-r.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,n(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var i=this.pm.getPlayheadTime();void 0!==i&&(this.pm.data.player_playhead_time=i,n(),this._updateMaxPlayheadPosition())}}}],V(r.prototype,e),t&&V(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();function W(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Z=(e3=function e(t){if(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e),!t.disableRebufferTracking){var r,n=function(e,t){i(t),r=void 0},i=function(e){if(r){var n=e.viewer_time-r;v(t.data,"view_rebuffer_duration",n),r=e.viewer_time,t.data.view_rebuffer_duration>3e5&&(t.emit("viewend"),t.send("viewend"),t.mux.log.warn("Ending view after rebuffering for longer than ".concat(3e5,"ms, future events will be ignored unless a programchange or videochange occurs.")))}t.data.view_watch_time>=0&&t.data.view_rebuffer_count>0&&(t.data.view_rebuffer_frequency=t.data.view_rebuffer_count/t.data.view_watch_time,t.data.view_rebuffer_percentage=t.data.view_rebuffer_duration/t.data.view_watch_time)};t.on("playbackheartbeat",function(e,t){return i(t)}),t.on("rebufferstart",function(e,i){r||(v(t.data,"view_rebuffer_count",1),r=i.viewer_time,t.one("rebufferend",n))}),t.on("viewinit",function(){r=void 0,t.off("rebufferend",n)})}},e8&&W(e3.prototype,e8),e9&&W(e3,e9),Object.defineProperty(e3,"prototype",{writable:!1}),e3);function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var G=function(){var e;function t(e){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.pm=e,e.disableRebufferTracking||e.disablePlayheadRebufferTracking||(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,e.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),e.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),e.on("seeking",function(){r._cleanupRebufferTracker(null,{viewer_time:f.now()})}))}return K(t.prototype,[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing)this._cleanupRebufferTracker(e,t);else if(null!==this._lastCheckedTime){if(this._lastPlayheadTime===this.pm.data.player_playhead_time){var r=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.sustainedRebufferThreshold&&r>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}else this._cleanupRebufferTracker(e,t,!0)}else this._prepareRebufferTrackerState(t.viewer_time)}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(null===this._lastCheckedTime)return;var n=this.pm.data.player_playhead_time-this._lastPlayheadTime,i=t.viewer_time-this._lastPlayheadTimeUpdatedTime;"number"==typeof this.pm.minimumRebufferDuration&&n>0&&i-n>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+i-n}))}r?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}]),e&&K(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function Y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var J=function(){var e;function t(e){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,t),this.pm=e,e.on("viewinit",function(){var t=e.data,n=t.view_id;if(!t.view_program_changed){var i=function(t,i){var s=i.viewer_time;"playing"===t.type&&void 0===e.data.view_time_to_first_frame?r.calculateTimeToFirstFrame(s||f.now(),n):"adplaying"===t.type&&(void 0===e.data.view_time_to_first_frame||r._inPrerollPosition())&&r.calculateTimeToFirstFrame(s||f.now(),n)};e.one("playing",i),e.one("adplaying",i),e.one("viewend",function(){e.off("playing",i),e.off("adplaying",i)})}})}return Y(t.prototype,[{key:"_inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}]),e&&Y(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function Q(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var X=(e7=function e(t){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),t.on("viewinit",function(){r._lastPlayheadPosition=-1}),["pause","rebufferstart","seeking","error","adbreakstart","hb"].forEach(function(e){t.on(e,function(){if(r._lastPlayheadPosition>=0&&t.data.player_playhead_time>=0&&r._lastPlayerWidth>=0&&r._lastSourceWidth>0&&r._lastPlayerHeight>=0&&r._lastSourceHeight>0){var e=t.data.player_playhead_time-r._lastPlayheadPosition;if(e<0)return void(r._lastPlayheadPosition=-1);var n=Math.min(r._lastPlayerWidth/r._lastSourceWidth,r._lastPlayerHeight/r._lastSourceHeight),i=Math.max(0,n-1),s=Math.max(0,1-n);t.data.view_max_upscale_percentage=Math.max(t.data.view_max_upscale_percentage||0,i),t.data.view_max_downscale_percentage=Math.max(t.data.view_max_downscale_percentage||0,s),v(t.data,"view_total_content_playback_time",e),v(t.data,"view_total_upscaling",i*e),v(t.data,"view_total_downscaling",s*e)}r._lastPlayheadPosition=-1})}),["playing","hb"].forEach(function(e){t.on(e,function(){r._lastPlayheadPosition=t.data.player_playhead_time,r._lastPlayerWidth=t.data.player_width,r._lastPlayerHeight=t.data.player_height,r._lastSourceWidth=t.data.video_source_width,r._lastSourceHeight=t.data.video_source_height})})},te&&Q(e7.prototype,te),tt&&Q(e7,tt),Object.defineProperty(e7,"prototype",{writable:!1}),e7);function ee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var et=(tr=function e(t){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),this.isSeeking=!1,t.on("seeking",function(e,n){Object.assign(t.data,n),r._lastSeekingTime=f.now(),!1===r.isSeeking&&(r.isSeeking=!0,t.send("seeking"))}),t.on("seeked",function(){r.isSeeking=!1;var e=r._lastSeekingTime||f.now(),n=f.now()-e;v(t.data,"view_seek_count",1),v(t.data,"view_seek_duration",n);var i=t.data.view_max_seek_time||0;t.data.view_max_seek_time=Math.max(i,n)}),t.on("viewend",function(){r.isSeeking=!1})},tn&&ee(tr.prototype,tn),ti&&ee(tr,ti),Object.defineProperty(tr,"prototype",{writable:!1}),tr);function er(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s=[],a=!0,o=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);a=!0);}catch(l){o=!0,i=l}finally{try{a||null==r.return||r.return()}finally{if(o)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return en(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?en(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ei(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var es=function(e,t){e.push(t),e.sort(function(e,t){return e.viewer_time-t.viewer_time})},ea=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror"],eo=function(){var e,t;function r(e){var t=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,r),this.pm=e,e.on("viewinit",function(){t.isAdBreak=!1,t._currentAdRequestNumber=0,t._currentAdResponseNumber=0,t._adRequests=[],t._adResponses=[],t._adHasPlayed=!1,t._wouldBeNewAdPlay=!0,t._prerollPlayTime=void 0}),ea.forEach(function(r){return e.on(r,t._updateAdData.bind(t))});var n=function(){t.isAdBreak=!1};e.on("adbreakstart",function(){t.isAdBreak=!0}),e.on("play",n),e.on("playing",n),e.on("viewend",n),e.on("adrequest",function(r,n){n=Object.assign({ad_request_id:"generatedAdRequestId"+t._currentAdRequestNumber++},n),es(t._adRequests,n),v(e.data,"view_ad_request_count"),t.inPrerollPosition()&&(e.data.view_preroll_requested=!0,t._adHasPlayed||v(e.data,"view_preroll_request_count"))}),e.on("adresponse",function(r,n){n=Object.assign({ad_request_id:"generatedAdRequestId"+t._currentAdResponseNumber++},n),es(t._adResponses,n);var i=t.findAdRequest(n.ad_request_id);i&&v(e.data,"view_ad_request_time",Math.max(0,n.viewer_time-i.viewer_time))}),e.on("adplay",function(r,n){t._adHasPlayed=!0,t._wouldBeNewAdPlay&&(t._wouldBeNewAdPlay=!1,v(e.data,"view_ad_played_count")),t.inPrerollPosition()&&!e.data.view_preroll_played&&(e.data.view_preroll_played=!0,t._adRequests.length>0&&(e.data.view_preroll_request_time=Math.max(0,n.viewer_time-t._adRequests[0].viewer_time)),e.data.view_start&&(e.data.view_startup_preroll_request_time=Math.max(0,n.viewer_time-e.data.view_start)),t._prerollPlayTime=n.viewer_time)}),e.on("adplaying",function(r,n){t.inPrerollPosition()&&void 0===e.data.view_preroll_load_time&&void 0!==t._prerollPlayTime&&(e.data.view_preroll_load_time=n.viewer_time-t._prerollPlayTime,e.data.view_startup_preroll_load_time=n.viewer_time-t._prerollPlayTime)}),e.on("adended",function(){t._wouldBeNewAdPlay=!0}),e.on("aderror",function(){t._wouldBeNewAdPlay=!0})}return e=[{key:"inPrerollPosition",value:function(){return void 0===this.pm.data.view_content_playback_time||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var r=er(g(t.ad_tag_url),2),n=r[0],i=r[1];this.pm.data.view_preroll_ad_tag_domain=i,this.pm.data.view_preroll_ad_tag_hostname=n}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var s=er(g(t.ad_asset_url),2),a=s[0],o=s[1];this.pm.data.view_preroll_ad_asset_domain=o,this.pm.data.view_preroll_ad_asset_hostname=a}}this.pm.data.ad_asset_url=null==t?void 0:t.ad_asset_url,this.pm.data.ad_tag_url=null==t?void 0:t.ad_tag_url,this.pm.data.ad_creative_id=null==t?void 0:t.ad_creative_id,this.pm.data.ad_id=null==t?void 0:t.ad_id,this.pm.data.ad_universal_id=null==t?void 0:t.ad_universal_id}}],ei(r.prototype,e),t&&ei(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();function el(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ec=(ts=function e(t){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e);var r,n,s=function(){t.disableRebufferTracking||r&&(v(t.data,"view_waiting_rebuffer_duration",f.now()-r),r=!1,i().clearInterval(n))},a=!1,o=function(){a=!1,s()};t.on("waiting",function(){a&&(t.disableRebufferTracking||(v(t.data,"view_waiting_rebuffer_count",1),r=f.now(),n=i().setInterval(function(){if(r){var e=f.now();v(t.data,"view_waiting_rebuffer_duration",e-r),r=e}},250)))}),t.on("playing",function(){s(),a=!0}),t.on("pause",o),t.on("seeking",o)},ta&&el(ts.prototype,ta),to&&el(ts,to),Object.defineProperty(ts,"prototype",{writable:!1}),ts);function eu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ed=(tl=function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e);var n=function(){r.lastWallClockTime=f.now(),t.on("before*",i)},i=function(e){var n=f.now(),i=r.lastWallClockTime;r.lastWallClockTime=n,n-i>3e4&&(t.emit("devicesleep",{viewer_time:i}),Object.assign(t.data,{viewer_time:i}),t.send("devicesleep"),t.emit("devicewake",{viewer_time:n}),Object.assign(t.data,{viewer_time:n}),t.send("devicewake"))};t.one("playbackheartbeat",n),t.on("playbackheartbeatend",function(){t.off("before*",i),t.one("playbackheartbeat",n)})},tc&&eu(tl.prototype,tc),tu&&eu(tl,tu),Object.defineProperty(tl,"prototype",{writable:!1}),tl),ep=r(375),eh=r(655),ef=r.n(eh),em="muxData",eg=function(){var e;try{e=ep.parse(ef().get(em)||"")}catch(t){e={}}return e},ey=function(e){try{ef().set(em,ep.stringify(e),{expires:365})}catch(t){}},ev=function(){var e=eg();return e.mux_viewer_id=e.mux_viewer_id||s(),e.msn=e.msn||Math.random(),ey(e),{mux_viewer_id:e.mux_viewer_id,mux_sample_number:e.msn}},eb=function(){var e;switch(ew()){case"cellular":e="cellular";break;case"ethernet":e="wired";break;case"wifi":e="wifi";break;case void 0:break;default:e="other"}return e},ew=function(){var e=i().navigator,t=e&&(e.connection||e.mozConnection||e.webkitConnection);return t&&t.type};eb.getConnectionFromAPI=ew;var e_=eS({a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"}),ex=eS({ad:"ad",ag:"aggregate",ap:"api",al:"application",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",br:"break",bw:"browser",by:"bytes",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cr:"creative",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ep:"experiments",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pr:"preload",ps:"position",pt:"part",py:"property",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",se:"session",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",st:"start",su:"startup",sv:"server",sw:"software",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"});function eS(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[e[r]]=r);return t}function eT(e){var t={},r={};return Object.keys(e).forEach(function(n){var i=!1;if(e.hasOwnProperty(n)&&void 0!==e[n]){var s=n.split("_"),a=s[0],o=e_[a];o||(p.info("Data key word `"+s[0]+"` not expected in "+n),o=a+"_"),s.splice(1).forEach(function(e){"url"===e&&(i=!0),ex[e]?o+=ex[e]:Number(e)&&Math.floor(Number(e))===Number(e)?o+=e:(p.info("Data key word `"+e+"` not expected in "+n),o+="_"+e+"_")}),i?r[o]=e[n]:t[o]=e[n]}}),Object.assign(t,r)}var eE={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},eC=["hb","requestcompleted","requestfailed","requestcanceled"],ek=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._beaconUrl=e||"https://img.litix.io",this._eventQueue=[],this._postInFlight=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},eE,t)};ek.prototype.queueEvent=function(e,t){var r=Object.assign({},t);return(this._eventQueue.length<=this._options.maxQueueLength||"eventrateexceeded"===e)&&(this._eventQueue.push(r),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength)},ek.prototype.flushEvents=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&1===this._eventQueue.length?this._eventQueue.pop():(this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending())},ek.prototype.destroy=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.destroyed=!0,e?this._clearBeaconQueue():this.flushEvents(),i().clearTimeout(this._sendTimeout)},ek.prototype._clearBeaconQueue=function(){var e=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,t=this._eventQueue.slice(e);e>0&&Object.assign(t[t.length-1],eT({mux_view_message:"event queue truncated"}));var r=this._createPayload(t);eR(this._beaconUrl,r,!0,function(){})},ek.prototype._sendBeaconQueue=function(){var e=this;if(!this._postInFlight){var t=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var r=this._createPayload(t),n=f.now();eR(this._beaconUrl,r,!1,function(r,i){i?(e._eventQueue=t.concat(e._eventQueue),e._failureCount+=1,p.info("Error sending beacon: "+i)):e._failureCount=0,e._roundTripTime=f.now()-n,e._postInFlight=!1})}},ek.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var e=Math.pow(2,this._failureCount-1);return(1+(e*=Math.random()))*this._options.baseTimeBetweenBeacons},ek.prototype._startBeaconSending=function(){var e=this;i().clearTimeout(this._sendTimeout),this.destroyed||(this._sendTimeout=i().setTimeout(function(){e._eventQueue.length&&e._sendBeaconQueue(),e._startBeaconSending()},this._getNextBeaconTime()))},ek.prototype._createPayload=function(e){var t,r,n,i=this,s={transmission_timestamp:Math.round(f.now())};this._roundTripTime&&(s.rtt_ms=Math.round(this._roundTripTime));var a=function(){n=(t=JSON.stringify({metadata:s,events:r||e})).length/1024},o=function(){return n<=i._options.maxPayloadKBSize};return a(),o()||(p.info("Payload size is too big ("+n+" kb). Removing unnecessary events."),r=e.filter(function(e){return -1===eC.indexOf(e.e)}),a()),o()||(p.info("Payload size still too big ("+n+" kb). Cropping fields.."),r.forEach(function(e){for(var t in e){var r=e[t];"string"==typeof r&&r.length>51200&&(e[t]=r.substring(0,51200))}}),a()),t};var eR=function(e,t,r,n){if(r&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(e,t))n();else if(i().fetch)i().fetch(e,{method:"POST",body:t,headers:{"Content-Type":"text/plain"},keepalive:t.length<=57344}).then(function(e){return n(null,e.ok?null:"Error")}).catch(function(e){return n(null,e)});else{if(i().XMLHttpRequest){var s=new(i()).XMLHttpRequest;return s.onreadystatechange=function(){if(4===s.readyState)return n(null,200!==s.status?"error":void 0)},s.open("POST",e),s.setRequestHeader("Content-Type","text/plain"),void s.send(t)}n()}};function eP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eD(Object(r),!0).forEach(function(t){eO(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eN(e){return(eN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eI=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id"],eM=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],ej=["ad_id","ad_creative_id","ad_universal_id"],eF=["viewstart","error","ended","viewend"],e$=function(){var e,t;function r(e,t){var n,s,a,o,l,c,u,d,p,h,f,m,g,y,v,b,w,_,x,S=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,r),eO(this,"previousBeaconData",null),eO(this,"lastEventTime",0),eO(this,"rateLimited",!1),this.mux=e,this.envKey=t,this.options=S,this.eventQueue=new ek((n=this.envKey,a=(s=this.options).beaconCollectionDomain,o=s.beaconDomain,a?"https://"+a:(n=n||"inferred").match(/^[a-z0-9]+$/)?"https://"+n+"."+(o||"litix.io"):"https://img.litix.io/a.gif")),this.sampleRate=null!==(l=this.options.sampleRate)&&void 0!==l?l:1,this.disableCookies=null!==(c=this.options.disableCookies)&&void 0!==c&&c,this.respectDoNotTrack=null!==(u=this.options.respectDoNotTrack)&&void 0!==u&&u,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:null===(d=this.options.platform)||void 0===d?void 0:d.name,viewer_application_version:null===(p=this.options.platform)||void 0===p?void 0:p.version,viewer_application_engine:null===(h=this.options.platform)||void 0===h?void 0:h.layout,viewer_device_name:null===(f=this.options.platform)||void 0===f?void 0:f.product,viewer_device_category:"",viewer_device_manufacturer:null===(m=this.options.platform)||void 0===m?void 0:m.manufacturer,viewer_os_family:null===(g=this.options.platform)||void 0===g||null===(y=g.os)||void 0===y?void 0:y.family,viewer_os_architecture:null===(v=this.options.platform)||void 0===v||null===(b=v.os)||void 0===b?void 0:b.architecture,viewer_os_version:null===(w=this.options.platform)||void 0===w||null===(_=w.os)||void 0===_?void 0:_.version,viewer_connection_type:eb(),page_url:null===i()||void 0===i()||null===(x=i().location)||void 0===x?void 0:x.href},this.viewerData=this.disableCookies?{}:ev()}return e=[{key:"send",value:function(e,t){var r;if(e&&null!=t&&t.view_id){if(this.respectDoNotTrack&&h())return p.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||"object"!==eN(t))return p.error("A data object was expected in send() but was not provided");var n,i,a=this.disableCookies?{}:(n=eg(),i=f.now(),n.session_start&&(n.sst=n.session_start,delete n.session_start),n.session_id&&(n.sid=n.session_id,delete n.session_id),n.session_expires&&(n.sex=n.session_expires,delete n.session_expires),(!n.sex||n.sex<i)&&(n.sid=s(),n.sst=i),n.sex=i+15e5,ey(n),{session_id:n.sid,session_start:n.sst,session_expires:n.sex}),o=eA(eA(eA(eA(eA({},this.pageLevelData),t),a),this.viewerData),{},{event:e,env_key:this.envKey});o.user_id&&(o.viewer_user_id=o.user_id,delete o.user_id);var l=(null!==(r=o.mux_sample_number)&&void 0!==r?r:0)>=this.sampleRate,c=eT(this._deduplicateBeaconData(e,o));if(this.lastEventTime=this.mux.utils.now(),l)return p.info("Not sending event due to sample rate restriction",e,o,c);if(this.envKey||p.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,o,c),!this.rateLimited){if(p.info("Sending event",e,o,c),this.rateLimited=!this.eventQueue.queueEvent(e,c),this.mux.WINDOW_UNLOADING&&"viewend"===e)this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&"hb"===e?this.eventQueue.flushEvents(!0):eF.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return o.event="eventrateexceeded",c=eT(o),this.eventQueue.queueEvent(o.event,c),p.error("Beaconing disabled due to rate limit.")}}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var r=this,n={},i=t.view_id;if("-1"===i||"viewstart"===e||"viewend"===e||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=6e5)n=eA({},t),i&&(this.previousBeaconData=n),i&&"viewend"===e&&(this.previousBeaconData=null);else{var s=0===e.indexOf("request");Object.entries(t).forEach(function(t){var i=function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s=[],a=!0,o=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);a=!0);}catch(l){o=!0,i=l}finally{try{a||null==r.return||r.return()}finally{if(o)throw i}}return s}}(t,2)||function(e,t){if(e){if("string"==typeof e)return eP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eP(e,t):void 0}}(t,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a=i[0],o=i[1];r.previousBeaconData&&(o!==r.previousBeaconData[a]||eI.indexOf(a)>-1||r.objectHasChanged(s,a,o,r.previousBeaconData[a])||r.eventRequiresKey(e,a))&&(n[a]=o,r.previousBeaconData[a]=o)})}return n}},{key:"objectHasChanged",value:function(e,t,r,n){return!(!e||0!==t.indexOf("request_")||"request_response_headers"!==t&&"object"===eN(r)&&"object"===eN(n)&&Object.keys(r||{}).length===Object.keys(n||{}).length)}},{key:"eventRequiresKey",value:function(e,t){return"renditionchange"===e&&0===t.indexOf("video_source_")||!(!ej.includes(t)||!eM.includes(e))}}],eL(r.prototype,e),t&&eL(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}();function eB(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var eU=(td=function e(t){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e);var r=0,n=0,i=0,s=0,a=0,o=0,l=0;t.on("requestcompleted",function(e,o){var l,c,u=o.request_start,d=o.request_response_start,p=o.request_response_end,h=o.request_bytes_loaded;if(s++,d?(l=d-(null!=u?u:0),c=(null!=p?p:0)-d):c=(null!=p?p:0)-(null!=u?u:0),c>0&&h&&h>0){var f=h/c*8e3;a++,n+=h,i+=c,t.data.view_min_request_throughput=Math.min(t.data.view_min_request_throughput||1/0,f),t.data.view_average_request_throughput=n/i*8e3,t.data.view_request_count=s,l>0&&(r+=l,t.data.view_max_request_latency=Math.max(t.data.view_max_request_latency||0,l),t.data.view_average_request_latency=r/a)}}),t.on("requestfailed",function(e,r){s++,o++,t.data.view_request_count=s,t.data.view_request_failed_count=o}),t.on("requestcanceled",function(e,r){s++,l++,t.data.view_request_count=s,t.data.view_request_canceled_count=l})},tp&&eB(td.prototype,tp),th&&eB(td,th),Object.defineProperty(td,"prototype",{writable:!1}),td);function eq(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var ez=(tf=function e(t){var r=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,e),t.on("before*",function(e,n){var i=n.viewer_time,s=f.now(),a=r._lastEventTime;if(r._lastEventTime=s,a&&s-a>36e5){var o=Object.keys(t.data).reduce(function(e,r){var n,i;return 0===r.indexOf("video_")?Object.assign(e,(n={},i=t.data[r],r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n)):e},{});t.mux.log.info("Received event after at least an hour inactivity, creating a new view"),t.emit("viewinit",Object.assign({viewer_time:i},o)),t.playbackHeartbeat._playheadShouldBeProgressing&&"play"!==e.type&&"adbreakstart"!==e.type&&(t.emit("play",{viewer_time:i}),"playing"!==e.type&&t.emit("playing",{viewer_time:i}))}})},tm&&eq(tf.prototype,tm),tg&&eq(tf,tg),Object.defineProperty(tf,"prototype",{writable:!1}),tf);function eV(e){return(eV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function eH(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function eW(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function eZ(e,t){return(eZ=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function eK(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eG(e){return(eG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var eY=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],eJ=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eZ(e,t)}(a,e);var t,r,n,i=(t=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}(),function(){var e,r=eG(a);if(t){var n=eG(this).constructor;e=Reflect.construct(r,arguments,n)}else e=r.apply(this,arguments);return function(e,t){if(t&&("object"===eV(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return eK(e)}(this,e)});function a(e,t,r){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,a),(n=i.call(this)).DOM_CONTENT_LOADED_EVENT_END=y.domContentLoadedEventEnd(),n.NAVIGATION_START=y.navigationStart(),n.mux=e,n.id=t,(r=Object.assign({debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(e){return e}},r)).data=r.data||{},r.data.property_key&&(r.data.env_key=r.data.property_key,delete r.data.property_key),p.setLevel(r.debug?"debug":"warn"),n.getPlayheadTime=r.getPlayheadTime,n.getStateData=r.getStateData||function(){return{}},n.getAdData=r.getAdData||function(){},n.minimumRebufferDuration=r.minimumRebufferDuration,n.sustainedRebufferThreshold=r.sustainedRebufferThreshold,n.playbackHeartbeatTime=r.playbackHeartbeatTime,n.disableRebufferTracking=r.disableRebufferTracking,n.disableRebufferTracking&&n.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),n.disablePlayheadRebufferTracking=r.disablePlayheadRebufferTracking,n.errorTranslator=r.errorTranslator,n.playbackEventDispatcher=new e$(e,r.data.env_key,r),n.data={player_instance_id:s(),mux_sample_rate:r.sampleRate,beacon_domain:r.beaconCollectionDomain?r.beaconCollectionDomain:r.beaconDomain},n.data.view_sequence_number=1,n.data.player_sequence_number=1,n.oldEmit=n.emit,n.emit=function(e,t){t=Object.assign({viewer_time:this.mux.utils.now()},t),this.oldEmit(e,t)};var n,o=(function(){void 0===this.data.view_start&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}).bind(eK(n));n.on("viewinit",function(e,t){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,t),this._initializeViewData(),this.one("play",o),this.one("adbreakstart",o)});var l=(function(e){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",e)}).bind(eK(n));if(n.on("videochange",function(e,t){l(t)}),n.on("programchange",function(e,t){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),l(Object.assign(t,{view_program_changed:!0})),o(),this.emit("play"),this.emit("playing")}),n.on("fragmentchange",function(e,t){this.currentFragmentPDT=t.currentFragmentPDT,this.currentFragmentStart=t.currentFragmentStart}),n.on("destroy",n.destroy),"undefined"!=typeof window&&"function"==typeof window.addEventListener&&"function"==typeof window.removeEventListener){var c=function(){var e=void 0!==n.data.view_start;n.mux.WINDOW_HIDDEN="hidden"===document.visibilityState,e&&n.mux.WINDOW_HIDDEN&&(n.data.player_is_paused||n.emit("hb"))};window.addEventListener("visibilitychange",c,!1);var u=function(e){e.persisted||n.destroy()};window.addEventListener("pagehide",u,!1),n.on("destroy",function(){window.removeEventListener("visibilitychange",c),window.removeEventListener("pagehide",u)})}return n.on("playerready",function(e,t){Object.assign(this.data,t)}),eY.forEach(function(e){n.on(e,function(t,r){0!==e.indexOf("ad")&&this._updateStateData(),Object.assign(this.data,r),this._sanitizeData()}),n.on("after"+e,function(){("error"!==e||this.errorTracker.viewErrored)&&this.send(e)})}),n.on("viewend",function(e,t){Object.assign(n.data,t)}),n.one("playerready",function(e){var t=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=t-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time}),n.longResumeTracker=new ez(eK(n)),n.errorTracker=new $(eK(n)),new ed(eK(n)),n.seekingTracker=new et(eK(n)),n.playheadTime=new H(eK(n)),n.playbackHeartbeat=new j(eK(n)),new X(eK(n)),n.watchTimeTracker=new U(eK(n)),new z(eK(n)),n.adTracker=new eo(eK(n)),new G(eK(n)),new Z(eK(n)),new J(eK(n)),new ec(eK(n)),new eU(eK(n)),r.hlsjs&&n.addHLSJS(r),r.dashjs&&n.addDashJS(r),n.emit("viewinit",r.data),n}return r=[{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,void 0!==this.data.view_start&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(e){if(this.data.view_id){var t=Object.assign({},this.data);if(void 0===t.video_source_is_live&&(t.player_source_duration===1/0||t.video_source_duration===1/0?t.video_source_is_live=!0:(t.player_source_duration>0||t.video_source_duration>0)&&(t.video_source_is_live=!1)),t.video_source_is_live||["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"].forEach(function(e){t[e]=void 0}),t.video_source_url=t.video_source_url||t.player_source_url,t.video_source_url){var r,n=function(e){if(Array.isArray(e))return e}(r=g(t.video_source_url))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s=[],a=!0,o=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);a=!0);}catch(l){o=!0,i=l}finally{try{a||null==r.return||r.return()}finally{if(o)throw i}}return s}}(r,2)||function(e,t){if(e){if("string"==typeof e)return eH(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eH(e,t):void 0}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),i=n[0],s=n[1];t.video_source_domain=s,t.video_source_hostname=i}delete t.ad_request_id,this.playbackEventDispatcher.send(e,t),this.data.view_sequence_number++,this.data.player_sequence_number++,this._restartHeartBeat(),"viewend"===e&&delete this.data.view_id}}},{key:"_updateStateData",value:function(){Object.assign(this.data,this.getStateData()),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var e=this;["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"].forEach(function(t){var r=parseInt(e.data[t],10);e.data[t]=isNaN(r)?void 0:r}),["player_source_url","video_source_url"].forEach(function(t){if(e.data[t]){var r=e.data[t].toLowerCase();0!==r.indexOf("data:")&&0!==r.indexOf("blob:")||(e.data[t]="MSE style URL")}})}},{key:"_resetVideoData",value:function(e,t){var r=this;Object.keys(this.data).forEach(function(e){0===e.indexOf("video_")&&delete r.data[e]})}},{key:"_resetViewData",value:function(){var e=this;Object.keys(this.data).forEach(function(t){0===t.indexOf("view_")&&delete e.data[t]}),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(e,t){delete this.data.player_error_code,delete this.data.player_error_message}},{key:"_initializeViewData",value:function(){var e=this,t=this.data.view_id=s(),r=function(){t===e.data.view_id&&v(e.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",r):r()}},{key:"_restartHeartBeat",value:function(){var e=this;window.clearTimeout(this._heartBeatTimeout),this.errorTracker.viewErrored||(this._heartBeatTimeout=window.setTimeout(function(){e.data.player_is_paused||e.emit("hb")},1e4))}},{key:"addHLSJS",value:function(e){e.hlsjs?this.hlsjs?this.mux.log.warn("An instance of HLS.js is already being monitored for this player."):(this.hlsjs=e.hlsjs,function(e,t,r){var n=arguments.length>4?arguments[4]:void 0,i=e.log,s=e.utils.secondsToMs,a=function(e){var t,r=parseInt(n.version);return 1===r&&null!==e.programDateTime&&(t=e.programDateTime),0===r&&null!==e.pdt&&(t=e.pdt),t};if(y.exists()){var o=function(r,n){return e.emit(t,r,n)},l=function(e,t){var r=t.levels,n=t.audioTracks,i=t.url,s=t.stats,a=t.networkDetails,l=t.sessionData,c={},u={};r.forEach(function(e,t){c[t]={width:e.width,height:e.height,bitrate:e.bitrate,attrs:e.attrs}}),n.forEach(function(e,t){u[t]={name:e.name,language:e.lang,bitrate:e.bitrate}});var d=C(s),p=d.bytesLoaded,h=d.requestStart,f=d.responseStart,g=d.responseEnd;o("requestcompleted",E(E({},S(l)),{},{request_event_type:e,request_bytes_loaded:p,request_start:h,request_response_start:f,request_response_end:g,request_type:"manifest",request_hostname:m(i),request_response_headers:k(a),request_rendition_lists:{media:c,audio:u,video:{}}}))};r.on(n.Events.MANIFEST_LOADED,l);var c=function(e,t){var r=t.details,n=t.level,i=t.networkDetails,l=C(t.stats),c=l.bytesLoaded,u=l.requestStart,d=l.responseStart,p=l.responseEnd,h=r.fragments[r.fragments.length-1],f=a(h)+s(h.duration);o("requestcompleted",{request_event_type:e,request_bytes_loaded:c,request_start:u,request_response_start:d,request_response_end:p,request_current_level:n,request_type:"manifest",request_hostname:m(r.url),request_response_headers:k(i),video_holdback:r.holdBack&&s(r.holdBack),video_part_holdback:r.partHoldBack&&s(r.partHoldBack),video_part_target_duration:r.partTarget&&s(r.partTarget),video_target_duration:r.targetduration&&s(r.targetduration),video_source_is_live:r.live,player_manifest_newest_program_time:isNaN(f)?void 0:f})};r.on(n.Events.LEVEL_LOADED,c);var u=function(e,t){var r=t.details,n=t.networkDetails,i=C(t.stats);o("requestcompleted",{request_event_type:e,request_bytes_loaded:i.bytesLoaded,request_start:i.requestStart,request_response_start:i.responseStart,request_response_end:i.responseEnd,request_type:"manifest",request_hostname:m(r.url),request_response_headers:k(n)})};r.on(n.Events.AUDIO_TRACK_LOADED,u);var d=function(e,t){var n=t.stats,i=t.networkDetails,s=t.frag,a=C(n=n||s.stats),l=a.bytesLoaded,c=a.requestStart,u=a.responseStart,d=a.responseEnd,p=i?k(i):void 0,h={request_event_type:e,request_bytes_loaded:l,request_start:c,request_response_start:u,request_response_end:d,request_hostname:i?m(i.responseURL):void 0,request_id:p?x(p):void 0,request_response_headers:p,request_media_duration:s.duration,request_url:null==i?void 0:i.responseURL};"main"===s.type?(h.request_type="media",h.request_current_level=s.level,h.request_video_width=(r.levels[s.level]||{}).width,h.request_video_height=(r.levels[s.level]||{}).height,h.request_labeled_bitrate=(r.levels[s.level]||{}).bitrate):h.request_type=s.type,o("requestcompleted",h)};r.on(n.Events.FRAG_LOADED,d);var p=function(e,t){var r=t.frag,n=r.start;o("fragmentchange",{currentFragmentPDT:a(r),currentFragmentStart:s(n)})};r.on(n.Events.FRAG_CHANGED,p);var h=function(e,t){var r,i=t.type,s=t.details,a=t.response,l=t.fatal,c=t.frag,u=t.networkDetails,d=(null==c?void 0:c.url)||t.url||"",p=u?k(u):void 0;s!==n.ErrorDetails.MANIFEST_LOAD_ERROR&&s!==n.ErrorDetails.MANIFEST_LOAD_TIMEOUT&&s!==n.ErrorDetails.FRAG_LOAD_ERROR&&s!==n.ErrorDetails.FRAG_LOAD_TIMEOUT&&s!==n.ErrorDetails.LEVEL_LOAD_ERROR&&s!==n.ErrorDetails.LEVEL_LOAD_TIMEOUT&&s!==n.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&s!==n.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT&&s!==n.ErrorDetails.SUBTITLE_LOAD_ERROR&&s!==n.ErrorDetails.SUBTITLE_LOAD_TIMEOUT&&s!==n.ErrorDetails.KEY_LOAD_ERROR&&s!==n.ErrorDetails.KEY_LOAD_TIMEOUT||o("requestfailed",{request_error:s,request_url:d,request_hostname:m(d),request_id:p?x(p):void 0,request_type:s===n.ErrorDetails.FRAG_LOAD_ERROR||s===n.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":s===n.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||s===n.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":s===n.ErrorDetails.SUBTITLE_LOAD_ERROR||s===n.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":s===n.ErrorDetails.KEY_LOAD_ERROR||s===n.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:null==a?void 0:a.code,request_error_text:null==a?void 0:a.text}),l&&o("error",{player_error_code:i,player_error_message:s,player_error_context:"".concat(d?"url: ".concat(d,"\n"):"")+"".concat(a&&(a.code||a.text)?"response: ".concat(a.code,", ").concat(a.text,"\n"):"")+"".concat(t.reason?"failure reason: ".concat(t.reason,"\n"):"")+"".concat(t.level?"level: ".concat(t.level,"\n"):"")+"".concat(t.parent?"parent stream controller: ".concat(t.parent,"\n"):"")+"".concat(t.buffer?"buffer length: ".concat(t.buffer,"\n"):"")+"".concat(t.error?"error: ".concat(t.error,"\n"):"")+"".concat(t.event?"event: ".concat(t.event,"\n"):"")+"".concat(t.err?"error message: ".concat(null===(r=t.err)||void 0===r?void 0:r.message,"\n"):"")})};r.on(n.Events.ERROR,h);var f=function(e,t){var r=t.frag,n=r&&r._url||"";o("requestcanceled",{request_event_type:e,request_url:n,request_type:"media",request_hostname:m(n)})};r.on(n.Events.FRAG_LOAD_EMERGENCY_ABORTED,f);var g=function(e,t){var n=t.level,s=r.levels[n];if(s&&s.attrs&&s.attrs.BANDWIDTH){var a,l=s.attrs.BANDWIDTH,c=parseFloat(s.attrs["FRAME-RATE"]);isNaN(c)||(a=c),l?o("renditionchange",{video_source_fps:a,video_source_bitrate:l,video_source_width:s.width,video_source_height:s.height,video_source_rendition_name:s.name,video_source_codec:null==s?void 0:s.videoCodec}):i.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};r.on(n.Events.LEVEL_SWITCHED,g),r._stopMuxMonitor=function(){r.off(n.Events.MANIFEST_LOADED,l),r.off(n.Events.LEVEL_LOADED,c),r.off(n.Events.AUDIO_TRACK_LOADED,u),r.off(n.Events.FRAG_LOADED,d),r.off(n.Events.FRAG_CHANGED,p),r.off(n.Events.ERROR,h),r.off(n.Events.FRAG_LOAD_EMERGENCY_ABORTED,f),r.off(n.Events.LEVEL_SWITCHED,g),r.off(n.Events.DESTROYING,r._stopMuxMonitor),delete r._stopMuxMonitor},r.on(n.Events.DESTROYING,r._stopMuxMonitor)}else i.warn("performance timing not supported. Not tracking HLS.js.")}(this.mux,this.id,e.hlsjs,{},e.Hls||window.Hls)):this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.")}},{key:"removeHLSJS",value:function(){var e;this.hlsjs&&((e=this.hlsjs)&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor(),this.hlsjs=void 0)}},{key:"addDashJS",value:function(e){e.dashjs?this.dashjs?this.mux.log.warn("An instance of Dash.js is already being monitored for this player."):(this.dashjs=e.dashjs,function(e,t,r){var n=e.log;if(r&&r.on){var i=function(r,n){return e.emit(t,r,n)},s=function(e){var t=e.type,r=(e.data||{}).url;i("requestcompleted",{request_event_type:t,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:m(r),request_url:r})};r.on("manifestLoaded",s);var a={},o=function(e){var t=e.type,n=e.fragmentModel,s=(e.chunk||{}).mediaInfo||{},o=s.type,l=s.bitrateList,c={};(l=l||[]).forEach(function(e,t){c[t]={},c[t].width=e.width,c[t].height=e.height,c[t].bitrate=e.bandwidth,c[t].attrs={}}),"video"===o?a.video=c:"audio"===o?a.audio=c:a.media=c;var u=D(n,r),d=u.requestStart,p=u.requestResponseStart,h=u.requestResponseEnd,f=u.requestResponseHeaders,m=u.requestMediaDuration,g=u.requestHostname,y=u.requestUrl;i("requestcompleted",{request_event_type:t,request_start:d,request_response_start:p,request_response_end:h,request_bytes_loaded:-1,request_type:o+"_init",request_response_headers:f,request_hostname:g,request_id:u.requestId,request_url:y,request_media_duration:m,request_rendition_lists:a})};r.on("initFragmentLoaded",o);var l=function(e){var t=e.type,n=e.fragmentModel,s=e.chunk||{},a=s.mediaInfo,o=s.start,l=(a||{}).type,c=D(n,r),u=c.requestStart,d=c.requestResponseStart,p=c.requestResponseEnd,h=c.requestBytesLoaded,f=c.requestResponseHeaders,m=c.requestMediaDuration,g=c.requestHostname,y=c.requestUrl,v=c.requestId,b=A(l,r),w=b.currentLevel,_=b.renditionWidth,x=b.renditionHeight,S=b.renditionBitrate;i("requestcompleted",{request_event_type:t,request_start:u,request_response_start:d,request_response_end:p,request_bytes_loaded:h,request_type:l,request_response_headers:f,request_hostname:g,request_id:v,request_url:y,request_media_start_time:o,request_media_duration:m,request_current_level:w,request_labeled_bitrate:S,request_video_width:_,request_video_height:x})};r.on("mediaFragmentLoaded",l);var c={video:void 0,audio:void 0,totalBitrate:void 0},u=function(){if(c.video&&"number"==typeof c.video.bitrate){if(c.video.width&&c.video.height){var e=c.video.bitrate;return c.audio&&"number"==typeof c.audio.bitrate&&(e+=c.audio.bitrate),e!==c.totalBitrate?(c.totalBitrate=e,{video_source_bitrate:e,video_source_height:c.video.height,video_source_width:c.video.width,video_source_codec:N(c.video.codec)}):void 0}n.warn("have bitrate info for video but missing width/height")}},d=function(e,t,s){if("number"==typeof e.newQuality){var a=e.mediaType;if("audio"===a||"video"===a){var o=r.getBitrateInfoListFor(a).find(function(t){return t.qualityIndex===e.newQuality});if(o&&"number"==typeof o.bitrate){c[a]=P(P({},o),{},{codec:r.getCurrentTrackFor(a).codec});var l=u();l&&i("renditionchange",l)}else n.warn("missing bitrate info for ".concat(a))}}else n.warn("missing evt.newQuality in qualityChangeRendered event",e)};r.on("qualityChangeRendered",d);var p=function(e){var t=e.request,r=e.mediaType;i("requestcanceled",{request_event_type:(t=t||{}).type+"_"+t.action,request_url:t.url,request_type:r,request_hostname:m(t.url)})};r.on("fragmentLoadingAbandoned",p);var h=function(e){var t,r,n=e.error,s=(null==n||null===(t=n.data)||void 0===t?void 0:t.request)||{},a=(null==n||null===(r=n.data)||void 0===r?void 0:r.response)||{};27===(null==n?void 0:n.code)&&i("requestfailed",{request_error:s.type+"_"+s.action,request_url:s.url,request_hostname:m(s.url),request_type:s.mediaType,request_error_code:a.status,request_error_text:a.statusText});var o="".concat(null!=s&&s.url?"url: ".concat(s.url,"\n"):"")+"".concat(null!=a&&a.status||null!=a&&a.statusText?"response: ".concat(null==a?void 0:a.status,", ").concat(null==a?void 0:a.statusText,"\n"):"");i("error",{player_error_code:null==n?void 0:n.code,player_error_message:null==n?void 0:n.message,player_error_context:o})};r.on("error",h),r._stopMuxMonitor=function(){r.off("manifestLoaded",s),r.off("initFragmentLoaded",o),r.off("mediaFragmentLoaded",l),r.off("qualityChangeRendered",d),r.off("error",h),r.off("fragmentLoadingAbandoned",p),delete r._stopMuxMonitor}}else n.warn("Invalid dash.js player reference. Monitoring blocked.")}(this.mux,this.id,e.dashjs)):this.mux.log.warn("You must pass a valid dashjs instance in order to track it.")}},{key:"removeDashJS",value:function(){var e;this.dashjs&&((e=this.dashjs)&&"function"==typeof e._stopMuxMonitor&&e._stopMuxMonitor(),this.dashjs=void 0)}}],eW(a.prototype,r),n&&eW(a,n),Object.defineProperty(a,"prototype",{writable:!1}),a}(I),eQ=r(153),eX=r.n(eQ);function e0(e){return(e0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e1(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s=[],a=!0,o=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);a=!0);}catch(l){o=!0,i=l}finally{try{a||null==r.return||r.return()}finally{if(o)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return e2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e2(e,t):void 0}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var e5,e4,e6,e3,e8,e9,e7,te,tt,tr,tn,ti,ts,ta,to,tl,tc,tu,td,tp,th,tf,tm,tg,ty,tv=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],tb={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};i()&&i().WeakMap&&(ty=new WeakMap);var tw=function(e){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(e),this.manifest};tw.prototype.process=function(e){var t;for(this.buffer+=e,t=this.buffer.indexOf("\n");t>-1;t=this.buffer.indexOf("\n"))this.processLine(this.buffer.substring(0,t)),this.buffer=this.buffer.substring(t+1)},tw.prototype.processLine=function(e){var t=e.indexOf(":"),r=tk(e,t),n=r[0],i=2===r.length?tS(r[1]):void 0;if("#"!==n[0])this.currentUri.uri=n,this.manifest.segments.push(this.currentUri),!this.manifest.targetDuration||"duration"in this.currentUri||(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(n){case"#EXT-X-TARGETDURATION":if(!isFinite(i)||i<0)return;this.manifest.targetDuration=i,this.setHoldBack();break;case"#EXT-X-PART-INF":t_(this.manifest,r),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break;case"#EXT-X-SERVER-CONTROL":t_(this.manifest,r),this.setHoldBack();break;case"#EXTINF":0===i?this.currentUri.duration=.01:i>0&&(this.currentUri.duration=i);break;case"#EXT-X-PROGRAM-DATE-TIME":var s=new Date(i);this.manifest.dateTimeString||(this.manifest.dateTimeString=i,this.manifest.dateTimeObject=s),this.currentUri.dateTimeString=i,this.currentUri.dateTimeObject=s;break;case"#EXT-X-VERSION":t_(this.manifest,r);break;case"#EXT-X-SESSION-DATA":var a=S(tR(r[1]));Object.assign(this.manifest.sessionData,a)}},tw.prototype.setHoldBack=function(){var e=this.manifest,t=e.serverControl,r=e.targetDuration,n=e.partTargetDuration;if(t){var i="holdBack",s="partHoldBack",a=r&&3*r,o=n&&2*n;r&&!t.hasOwnProperty(i)&&(t[i]=a),a&&t[i]<a&&(t[i]=a),n&&!t.hasOwnProperty(s)&&(t[s]=3*n),n&&t[s]<o&&(t[s]=o)}};var t_=function(e,t){var r,n=tx(t[0].replace("#EXT-X-",""));tC(t[1])?(r={},r=Object.assign(tE(t[1]),r)):r=tS(t[1]),e[n]=r},tx=function(e){return e.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})},tS=function(e){if("yes"===e.toLowerCase()||"no"===e.toLowerCase())return"yes"===e.toLowerCase();var t=-1!==e.indexOf(":")?e:parseFloat(e);return isNaN(t)?e:t},tT=function(e){var t={},r=e.split("=");return r.length>1&&(t[tx(r[0])]=tS(r[1])),t},tE=function(e){for(var t=e.split(","),r={},n=0;t.length>n;n++)r=Object.assign(tT(t[n]),r);return r},tC=function(e){return e.indexOf("=")>-1},tk=function(e,t){return -1===t?[e]:[e.substring(0,t),e.substring(t+1)]},tR=function(e){var t={};if(e){var r=e.search(",");return[e.slice(0,r),e.slice(r+1)].forEach(function(e,r){for(var n=e.replace(/['"]+/g,"").split("="),i=0;i<n.length;i++)"DATA-ID"===n[i]&&(t["DATA-ID"]=n[1-i]),"VALUE"===n[i]&&(t.VALUE=n[1-i])}),{data:t}}},tP={safeCall:function(e,t,r,n){var i=n;if(e&&"function"==typeof e[t])try{i=e[t].apply(e,r)}catch(s){p.info("safeCall error",s)}return i},safeIncrement:v,getComputedStyle:function(e,t){var r;if(e&&t&&i()&&"function"==typeof i().getComputedStyle)return ty&&ty.has(e)&&(r=ty.get(e)),r||(r=i().getComputedStyle(e,null),ty&&ty.set(e,r)),r.getPropertyValue(t)},secondsToMs:function(e){return Math.floor(1e3*e)},assign:Object.assign,headersStringToObject:_,cdnHeadersToRequestId:x,extractHostnameAndDomain:g,extractHostname:m,manifestParser:tw,generateShortID:a,generateUUID:s,now:f.now};function tD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tA={},tN=function e(t){var r=arguments;"string"==typeof t?e.hasOwnProperty(t)?i().setTimeout(function(){r=Array.prototype.splice.call(r,1),e[t].apply(null,r)},0):p.warn("`"+t+"` is an unknown task"):"function"==typeof t?i().setTimeout(function(){t(e)},0):p.warn("`"+t+"` is invalid.")},tL={loaded:f.now(),NAME:"mux-embed",VERSION:"4.26.0",API_VERSION:"2.1",PLAYER_TRACKED:!1,monitor:function(e,t){return function(e,t,r){var n=e1(l(t),3),i=n[0],s=n[1],a=n[2],o=e.log,c=e.utils.getComputedStyle,u=e.utils.secondsToMs;if(!i)return o.error("No element was found with the `"+s+"` query selector.");if("video"!==a&&"audio"!==a)return o.error("The element of `"+s+"` was not a media element.");i.mux&&(i.mux.destroy(),delete i.mux,o.warn("Already monitoring this video element, replacing existing event listeners")),(r=Object.assign({automaticErrorTracking:!0},r)).data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:e.VERSION},r.data),r.getPlayheadTime=function(){return u(i.currentTime)},r.getStateData=function(){var e,t,n=this.hlsjs&&this.hlsjs.url,s=this.dashjs&&e0("function"===this.dashjs.getSource)&&this.dashjs.getSource(),a={player_is_paused:i.paused,player_playhead_time:u(i.currentTime),player_width:parseInt(c(i,"width")),player_height:parseInt(c(i,"height")),player_autoplay_on:i.autoplay,player_preload_on:i.preload,player_language_code:i.lang,player_is_fullscreen:eX()&&!!(eX().fullscreenElement||eX().webkitFullscreenElement||eX().mozFullScreenElement||eX().msFullscreenElement),video_poster_url:i.poster,video_source_url:n||s||i.currentSrc,video_source_duration:u(i.duration),video_source_height:i.videoHeight,video_source_width:i.videoWidth,view_dropped_frame_count:null===(e=i)||void 0===e||null===(t=e.getVideoPlaybackQuality)||void 0===t?void 0:t.call(e).droppedVideoFrames},o=r.getPlayheadTime();if(i.getStartDate&&o>0){var l=i.getStartDate();if(l&&"function"==typeof l.getTime&&l.getTime()){var d=l.getTime();if(a.player_program_time=d+o,i.seekable.length>0){var p=d+i.seekable.end(i.seekable.length-1);a.player_live_edge_program_time=p}}}return a},i.mux=i.mux||{},i.mux.deleted=!1,i.mux.emit=function(t,r){e.emit(s,t,r)};var d=function(){o.error("The monitor for this video element has already been destroyed.")};i.mux.destroy=function(){Object.keys(i.mux.listeners).forEach(function(e){i.removeEventListener(e,i.mux.listeners[e],!1)}),delete i.mux.listeners,i.mux.destroy=d,i.mux.swapElement=d,i.mux.emit=d,i.mux.addHLSJS=d,i.mux.addDashJS=d,i.mux.removeHLSJS=d,i.mux.removeDashJS=d,i.mux.deleted=!0,e.emit(s,"destroy")},i.mux.swapElement=function(t){var r=e1(l(t),3),n=r[0],s=r[1],a=r[2];return n?"video"!==a&&"audio"!==a?e.log.error("The element of `"+s+"` was not a media element."):(n.muxId=i.muxId,delete i.muxId,n.mux=n.mux||{},n.mux.listeners=Object.assign({},i.mux.listeners),delete i.mux.listeners,Object.keys(n.mux.listeners).forEach(function(e){i.removeEventListener(e,n.mux.listeners[e],!1),n.addEventListener(e,n.mux.listeners[e],!1)}),n.mux.swapElement=i.mux.swapElement,n.mux.destroy=i.mux.destroy,delete i.mux,void(i=n)):e.log.error("No element was found with the `"+s+"` query selector.")},i.mux.addHLSJS=function(t){e.addHLSJS(s,t)},i.mux.addDashJS=function(t){e.addDashJS(s,t)},i.mux.removeHLSJS=function(){e.removeHLSJS(s)},i.mux.removeDashJS=function(){e.removeDashJS(s)},e.init(s,r),e.emit(s,"playerready"),i.paused||(e.emit(s,"play"),i.readyState>2&&e.emit(s,"playing")),i.mux.listeners={},tv.forEach(function(t){("error"!==t||r.automaticErrorTracking)&&(i.mux.listeners[t]=function(){var r={};if("error"===t){if(!i.error||1===i.error.code)return;r.player_error_code=i.error.code,r.player_error_message=tb[i.error.code]||i.error.message}e.emit(s,t,r)},i.addEventListener(t,i.mux.listeners[t],!1))})}(tN,e,t)},destroyMonitor:function(e){var t,r=(function(e){if(Array.isArray(e))return e}(t=l(e))||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,s=[],a=!0,o=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(s.push(n.value),!t||s.length!==t);a=!0);}catch(l){o=!0,i=l}finally{try{a||null==r.return||r.return()}finally{if(o)throw i}}return s}}(t,1)||function(e,t){if(e){if("string"==typeof e)return tD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tD(e,t):void 0}}(t,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];r&&r.mux&&"function"==typeof r.mux.destroy?r.mux.destroy():p.error("A video element monitor for `"+e+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(e,t){var r=o(e);tA[r]?tA[r].addHLSJS(t):p.error("A monitor for `"+r+"` has not been initialized.")},addDashJS:function(e,t){var r=o(e);tA[r]?tA[r].addDashJS(t):p.error("A monitor for `"+r+"` has not been initialized.")},removeHLSJS:function(e){var t=o(e);tA[t]?tA[t].removeHLSJS():p.error("A monitor for `"+t+"` has not been initialized.")},removeDashJS:function(e){var t=o(e);tA[t]?tA[t].removeDashJS():p.error("A monitor for `"+t+"` has not been initialized.")},init:function(e,t){h()&&t&&t.respectDoNotTrack&&p.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var r=o(e);tA[r]=new eJ(tN,r,t)},emit:function(e,t,r){var n=o(e);tA[n]?(tA[n].emit(t,r),"destroy"===t&&delete tA[n]):p.error("A monitor for `"+n+"` has not been initialized.")},checkDoNotTrack:h,log:p,utils:tP,events:{PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled"},WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(tN,tL),void 0!==i()&&"function"==typeof i().addEventListener&&i().addEventListener("pagehide",function(e){e.persisted||(tN.WINDOW_UNLOADING=!0)},!1);var tO=tN},655:function(e,t,r){var n;function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e);/*!
 * JavaScript Cookie v2.1.3
 * https://github.com/js-cookie/js-cookie
 *
 * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
 * Released under the MIT license
 */}!function(s){var a=!1;if(void 0===(n="function"==typeof s?s.call(t,r,t,e):s)||(e.exports=n),a=!0,"object"===i(t)&&(e.exports=s(),a=!0),!a){var o=window.Cookies,l=window.Cookies=s();l.noConflict=function(){return window.Cookies=o,l}}}(function(){var e=function(){for(var e=0,t={};e<arguments.length;e++){var r=arguments[e];for(var n in r)t[n]=r[n]}return t};return function t(r){function n(t,i,s){var a;if("undefined"!=typeof document){if(arguments.length>1){if("number"==typeof(s=e({path:"/"},n.defaults,s)).expires){var o=new Date;o.setMilliseconds(o.getMilliseconds()+864e5*s.expires),s.expires=o}try{a=JSON.stringify(i),/^[\{\[]/.test(a)&&(i=a)}catch(l){}return i=r.write?r.write(i,t):encodeURIComponent(String(i)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape),document.cookie=[t,"=",i,s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}t||(a={});for(var c=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,d=0;d<c.length;d++){var p=c[d].split("="),h=p.slice(1).join("=");'"'===h.charAt(0)&&(h=h.slice(1,-1));try{var f=p[0].replace(u,decodeURIComponent);if(h=r.read?r.read(h,f):r(h,f)||h.replace(u,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(m){}if(t===f){a=h;break}t||(a[f]=h)}catch(g){}}return a}}return n.set=n,n.get=function(e){return n.call(n,e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(t,r){n(t,"",e(r,{expires:-1}))},n.withConverter=t,n}(function(){})})},153:function(e,t,r){var n,i=void 0!==r.g?r.g:"undefined"!=typeof window?window:{},s=r(558);"undefined"!=typeof document?n=document:(n=i["__GLOBAL_DOCUMENT_CACHE@4"])||(n=i["__GLOBAL_DOCUMENT_CACHE@4"]=s),e.exports=n},48:function(e,t,r){var n;n="undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{},e.exports=n},640:function(e,t,r){var n,i;void 0===(i="function"==typeof(n=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function i(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(n){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(t,r){for(var i=0;i<n.length;i++){var s=n[i];this[s]=i<t?e:this.methodFactory(s,t,r)}this.log=this.debug}function o(e,r,n){return function(){typeof console!==t&&(a.call(this,r,n),this[e].apply(this,arguments))}}function l(n,a,l){var c;return"debug"===(c=n)&&(c="log"),typeof console!==t&&("trace"===c&&r?s:void 0!==console[c]?i(console,c):void 0!==console.log?i(console,"log"):e)||o.apply(this,arguments)}function c(e,r,i){var s,o=this;r=null==r?"WARN":r;var c="loglevel";function u(){var e;if(typeof window!==t&&c){try{e=window.localStorage[c]}catch(r){}if(typeof e===t)try{var n=window.document.cookie,i=n.indexOf(encodeURIComponent(c)+"=");-1!==i&&(e=/^([^;]+)/.exec(n.slice(i))[1])}catch(s){}return void 0===o.levels[e]&&(e=void 0),e}}"string"==typeof e?c+=":"+e:"symbol"==typeof e&&(c=void 0),o.name=e,o.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},o.methodFactory=i||l,o.getLevel=function(){return s},o.setLevel=function(r,i){if("string"==typeof r&&void 0!==o.levels[r.toUpperCase()]&&(r=o.levels[r.toUpperCase()]),!("number"==typeof r&&r>=0&&r<=o.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(s=r,!1!==i&&function(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&c){try{return void(window.localStorage[c]=r)}catch(i){}try{window.document.cookie=encodeURIComponent(c)+"="+r+";"}catch(s){}}}(r),a.call(o,r,e),typeof console===t&&r<o.levels.SILENT)return"No console available for logging"},o.setDefaultLevel=function(e){r=e,u()||o.setLevel(e,!1)},o.resetLevel=function(){o.setLevel(r,!1),function(){if(typeof window!==t&&c){try{return void window.localStorage.removeItem(c)}catch(e){}try{window.document.cookie=encodeURIComponent(c)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(r){}}}()},o.enableAll=function(e){o.setLevel(o.levels.TRACE,e)},o.disableAll=function(e){o.setLevel(o.levels.SILENT,e)};var d=u();null==d&&(d=r),o.setLevel(d,!1)}var u=new c,d={};u.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw TypeError("You must supply a name when creating a logger.");var t=d[e];return t||(t=d[e]=new c(e,u.getLevel(),u.methodFactory)),t};var p=typeof window!==t?window.log:void 0;return u.noConflict=function(){return typeof window!==t&&window.log===u&&(window.log=p),u},u.getLoggers=function(){return d},u.default=u,u})?n.call(t,r,t,e):n)||(e.exports=i)},375:function(e,t){"use strict";var r=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function i(e){try{return encodeURIComponent(e)}catch(t){return null}}t.stringify=function(e,t){var n,s,a=[];for(s in"string"!=typeof(t=t||"")&&(t="?"),e)if(r.call(e,s)){if((n=e[s])||null!=n&&!isNaN(n)||(n=""),s=i(s),n=i(n),null===s||null===n)continue;a.push(s+"="+n)}return a.length?t+a.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,i={};t=r.exec(e);){var s=n(t[1]),a=n(t[2]);null===s||null===a||s in i||(i[s]=a)}return i}},558:function(){}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}return r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r(80)}()},30700:function(e,t,r){"use strict";globalThis.fetch&&globalThis.Headers&&globalThis.Request&&globalThis.Response?e.exports={default:globalThis.fetch,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response}:e.exports={default:r(83300).default,Headers:r(83300).Headers,Request:r(83300).Request,Response:r(83300).Response}},28033:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/bytes/[id]",function(){return r(80183)}])},81288:function(e,t,r){"use strict";r.d(t,{M:function(){return n}});let n=[{inputs:[{internalType:"address",name:"hub",type:"address"},{internalType:"address",name:"moduleGlobals",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"FollowInvalid",type:"error"},{inputs:[],name:"InitParamsInvalid",type:"error"},{inputs:[],name:"InvalidParameters",type:"error"},{inputs:[],name:"ModuleDataMismatch",type:"error"},{inputs:[],name:"NotHub",type:"error"},{inputs:[],name:"NotOwnerOrApproved",type:"error"},{inputs:[],name:"OnlyOwner",type:"error"},{inputs:[],name:"SignatureExpired",type:"error"},{inputs:[],name:"SignatureInvalid",type:"error"},{inputs:[],name:"ZeroSpender",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"profileId",type:"uint256"},{indexed:!0,internalType:"uint256",name:"pubId",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"},{indexed:!1,internalType:"address",name:"currency",type:"address"},{indexed:!1,internalType:"address",name:"recipient",type:"address"},{indexed:!1,internalType:"uint16",name:"referralFee",type:"uint16"},{indexed:!1,internalType:"bool",name:"followerOnly",type:"bool"}],name:"ModuleParametersUpdated",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"HUB",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"MODULE_GLOBALS",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct DataTypes.EIP712Signature",name:"sig",type:"tuple"}],name:"burnWithSig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"exists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeparator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"profileId",type:"uint256"},{internalType:"uint256",name:"pubId",type:"uint256"}],name:"getPublicationData",outputs:[{components:[{internalType:"uint256",name:"ownershipTokenId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint16",name:"referralFee",type:"uint16"},{internalType:"bool",name:"followerOnly",type:"bool"}],internalType:"struct ProfilePublicationData",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"profileId",type:"uint256"},{internalType:"uint256",name:"pubId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"initializePublicationCollectModule",outputs:[{internalType:"bytes",name:"",type:"bytes"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"mintTimestampOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct DataTypes.EIP712Signature",name:"sig",type:"tuple"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct DataTypes.EIP712Signature",name:"sig",type:"tuple"}],name:"permitForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"referrerProfileId",type:"uint256"},{internalType:"address",name:"collector",type:"address"},{internalType:"uint256",name:"profileId",type:"uint256"},{internalType:"uint256",name:"pubId",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],name:"processCollect",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"sigNonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenDataOf",outputs:[{components:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint96",name:"mintTimestamp",type:"uint96"}],internalType:"struct IERC721Time.TokenData",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"profileId",type:"uint256"},{internalType:"uint256",name:"pubId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint16",name:"referralFee",type:"uint16"},{internalType:"bool",name:"followerOnly",type:"bool"}],name:"updateModuleParameters",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"profileId",type:"uint256"},{internalType:"uint256",name:"pubId",type:"uint256"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"address",name:"currency",type:"address"},{internalType:"address",name:"recipient",type:"address"},{internalType:"uint16",name:"referralFee",type:"uint16"},{internalType:"bool",name:"followerOnly",type:"bool"},{internalType:"address",name:"operator",type:"address"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct DataTypes.EIP712Signature",name:"sig",type:"tuple"}],name:"updateModuleParametersWithSig",outputs:[],stateMutability:"nonpayable",type:"function"}]},62083:function(e,t,r){"use strict";var n=r(85893),i=r(29780),s=r(33962),a=r(17295),o=r(9187),l=r(21273),c=r(14348),u=r(88005),d=r(67294),p=r(86501),h=r(31618);let f=e=>{let{module:t,title:r}=e,[f,m]=(0,d.useState)((null==t?void 0:t.allowance)!=="0x00"),[g,{loading:y}]=(0,l.Dw)(),{data:v,isLoading:b,sendTransaction:w}=(0,h.pQ)({onError:o.Z}),{isLoading:_}=(0,h.BX)({hash:null==v?void 0:v.hash,onSuccess:()=>{p.Am.success("Modude ".concat(f?"disabled":"enabled"," successfully!")),m(!f)},onError:o.Z}),x=(e,r,n)=>{g({variables:{request:{currency:e,value:r,[(0,a.rT)(t.module).field]:n}}}).then(e=>{var t;let r=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.generateModuleCurrencyApprovalData;null==w||w({to:null==r?void 0:r.to,data:null==r?void 0:r.data})})};return f?(0,n.jsx)(i.z,{variant:"warning",icon:y||b||_?(0,n.jsx)(s.$,{variant:"warning",size:"xs"}):(0,n.jsx)(c.Z,{className:"h-4 w-4"}),onClick:()=>x(t.currency,"0",t.module),children:"Revoke"}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(i.z,{variant:"success",icon:y||b||_?(0,n.jsx)(s.$,{variant:"success",size:"xs"}):(0,n.jsx)(u.Z,{className:"h-4 w-4"}),onClick:()=>x(t.currency,Number.MAX_SAFE_INTEGER.toString(),t.module),children:r})})};t.Z=f},88942:function(e,t,r){"use strict";r.d(t,{Z:function(){return K}});var n=r(85893),i=r(67294),s=r(68980),a=r(37331),o=r(81288),l=r(58806),c=r(29780),u=r(64208),d=r(34625),p=r(10588),h=r(2176),f=r(64911),m=r(9187),g=r(92882),y=r(21273),v=r(13250),b=r(7543),w=r(48987),_=r(85837),x=r(20445),S=r(97535),T=r(10050),E=r(56371),C=r(86501),k=r(31618),R=r(52040),P=r(9747),D=r(25675),A=r.n(D),N=r(62083),L=r(27484),O=r.n(L),I=r(33962),M=r(40819),j=r(3689);let F=e=>{var t,r,D,L,F,$,B,U,q,z,V,H,W,Z,K,G,Y,J,Q,X,ee,et,er,en,ei,es,ea,eo,el,ec,eu,ed,ep,eh,ef,em;let{publication:eg,setCount:ey,count:ev}=e,eb=(0,g.qr)(e=>e.userSigNonce),ew=(0,g.qr)(e=>e.setUserSigNonce),e_=(0,g.qr)(e=>e.currentProfile),[ex,eS]=(0,i.useState)(0),[eT,eE]=(0,i.useState)(null==eg?void 0:eg.hasCollectedByMe),[eC,ek]=(0,i.useState)(!1),[eR,eP]=(0,i.useState)(!0),[eD,eA]=(0,i.useState)(0),{address:eN}=(0,k.mA)(),{isLoading:eL,signTypedDataAsync:eO}=(0,k.yw)({onError:m.Z}),{data:eI,loading:eM}=(0,y.EE)({variables:{request:{publicationId:null==eg?void 0:eg.id}}}),ej=null==eI?void 0:null===(t=eI.publication)||void 0===t?void 0:t.collectModule,eF=()=>{var e;eS(ex+parseFloat(null==ej?void 0:null===(e=ej.amount)||void 0===e?void 0:e.value)),ey(ev+1),eE(!0),C.ZP.success("Collect Successfully")},{isFetching:e$,refetch:eB}=(0,k.do)({address:d.cX,abi:o.M,functionName:"getPublicationData",args:[parseInt(null===(r=eg.profile)||void 0===r?void 0:r.id),parseInt(null==eg?void 0:eg.id.split("-")[1])],enabled:!1}),{data:eU,isLoading:eq,write:ez}=(0,k.GG)({address:d.Nm,abi:a.g,functionName:"collectWithSig",onSuccess:eF,onError:m.Z}),eV=ev/parseInt(null==ej?void 0:ej.collectLimit)*100,{data:eH,loading:eW}=(0,y.Or)({variables:{request:{currencies:null==ej?void 0:null===(D=ej.amount)||void 0===D?void 0:null===(L=D.asset)||void 0===L?void 0:L.address,followModules:[],collectModules:null==ej?void 0:ej.type,referenceModules:[]}},skip:!(null==ej?void 0:null===(F=ej.amount)||void 0===F?void 0:null===($=F.asset)||void 0===$?void 0:$.address)||!e_,onCompleted:e=>{var t;eP((null===(t=null==e?void 0:e.approvedModuleAllowanceAmount[0])||void 0===t?void 0:t.allowance)!=="0x00")}}),{data:eZ,loading:eK}=(0,y.kV)({variables:{request:{publicationId:null==eg?void 0:eg.id}},pollInterval:5e3,skip:!(null==eg?void 0:eg.id)});(0,i.useEffect)(()=>{var e,t,r,n,i,s;eS(parseFloat(null!==(n=null==eZ?void 0:null===(e=eZ.publicationRevenue)||void 0===e?void 0:null===(t=e.revenue)||void 0===t?void 0:null===(r=t.total)||void 0===r?void 0:r.value)&&void 0!==n?n:0)),(null==ej?void 0:ej.amount)&&(0,h.Z)((0,p.Z)(null==ej?void 0:null===(i=ej.amount)||void 0===i?void 0:null===(s=i.asset)||void 0===s?void 0:s.symbol)).then(e=>{eA(e)})},[null==ej?void 0:ej.amount,eZ]);let{data:eG,isLoading:eY}=(0,k.KQ)({address:eN,token:null==ej?void 0:null===(B=ej.amount)||void 0===B?void 0:null===(U=B.asset)||void 0===U?void 0:U.address,formatUnits:null==ej?void 0:null===(q=ej.amount)||void 0===q?void 0:null===(z=q.asset)||void 0===z?void 0:z.decimals,watch:!0}),eJ=!1;eJ=!(eG&&parseFloat(null==eG?void 0:eG.formatted)<parseFloat(null==ej?void 0:null===(V=ej.amount)||void 0===V?void 0:V.value));let{broadcast:eQ,data:eX,loading:e0}=(0,v.Z)({onCompleted:eF}),[e1,{loading:e2}]=(0,y.Dt)({onCompleted:async e=>{let{createCollectTypedData:t}=e;try{let{id:r,typedData:n}=t,{profileId:i,pubId:s,data:a,deadline:o}=n.value,l=await eO((0,f.Z)(n)),{v:c,r:u,s:p}=(0,E.splitSignature)(l),h={collector:eN,profileId:i,pubId:s,data:a,sig:{v:c,r:u,s:p,deadline:o}};if(ew(eb+1),!d.fx)return null==ez?void 0:ez({args:[h]});let{data:{broadcast:m}}=await eQ({request:{id:r,signature:l}});"reason"in m&&(null==ez||ez({args:[h]}))}catch(g){}},onError:m.Z}),[e5,{loading:e4}]=(0,y.RI)({onCompleted:eF,onError:m.Z}),e6=async e=>{let{data:t}=await e5({variables:e});(null==t?void 0:t.proxyAction)||e1({variables:{request:{publicationId:null==eg?void 0:eg.id},options:{overrideSigNonce:eb}}})},e3=()=>{if(!e_)return C.ZP.error("Please connect your Wallet");(null==ej?void 0:ej.type)===s.pYo.FeeCollectModule?e6({request:{collect:{freeCollect:{publicationId:null==eg?void 0:eg.id}}}}):(null==ej?void 0:ej.__typename)==="UnknownCollectModuleSettings"?eB().then(e=>{let{data:t}=e;t&&(E.defaultAbiCoder.encode(["address","uint256"],[null==t?void 0:t[2],null==t?void 0:t[1]]),e1({variables:{options:{overrideSigNonce:eb},request:{publicationId:null==eg?void 0:eg.id,unknownModuleData:j.cv}}}))}):e1({variables:{options:{overrideSigNonce:eb},request:{publicationId:null==eg?void 0:eg.id}}})};if(eM||eK)return(0,n.jsx)(P.Z,{message:"Loading collect"});let e8=e2||e4||eL||e$||eq||e0;return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(n.Fragment,{children:[((null==ej?void 0:ej.type)===s.pYo.LimitedFeeCollectModule||(null==ej?void 0:ej.type)===s.pYo.LimitedTimedFeeCollectModule)&&(0,n.jsx)("div",{className:"h-2.5 w-full bg-gray-200",children:(0,n.jsx)("div",{className:"h-2.5 bg-blue-500",style:{width:"".concat(eV,"%")}})}),(0,n.jsxs)("div",{className:"p-5",children:[(null==ej?void 0:ej.followerOnly)&&(0,n.jsx)("div",{className:"pb-5",children:"Follower Only Collect Module"}),(0,n.jsxs)("div",{className:"space-y-1.5 pb-2",children:[(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(null==eg?void 0:null===(H=eg.metadata)||void 0===H?void 0:H.name)&&(0,n.jsx)("div",{className:"text-xl font-bold",children:null==eg?void 0:null===(W=eg.metadata)||void 0===W?void 0:W.name})}),(null==eg?void 0:null===(Z=eg.metadata)||void 0===Z?void 0:Z.description)&&(0,n.jsx)("span",{className:"line-clamp-2 text-gray-500",children:null==eg?void 0:null===(K=eg.metadata)||void 0===K?void 0:K.description})]}),(null==ej?void 0:ej.amount)&&(0,n.jsxs)("div",{className:"flex items-center space-x-1.5 py-2",children:[(0,n.jsx)(A(),{className:"h-7 w-7",height:28,width:28,src:(0,R.Z)(null==ej?void 0:null===(G=ej.amount)||void 0===G?void 0:null===(Y=G.asset)||void 0===Y?void 0:Y.symbol),alt:null==ej?void 0:null===(J=ej.amount)||void 0===J?void 0:null===(Q=J.asset)||void 0===Q?void 0:Q.symbol,title:null==ej?void 0:null===(X=ej.amount)||void 0===X?void 0:null===(ee=X.asset)||void 0===ee?void 0:ee.symbol}),(0,n.jsxs)("span",{className:"space-x-1",children:[(0,n.jsx)("span",{className:"text-2x1 font-bold",children:ej.amount.value}),(0,n.jsx)("span",{className:"text-xs",children:null==ej?void 0:null===(et=ej.amount)||void 0===et?void 0:null===(er=et.asset)||void 0===er?void 0:er.symbol}),eD?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"px-0.5 text-gray-500",children:"."}),(0,n.jsxs)("span",{children:["$",(ej.amount.value*eD).toFixed(2)]})]}):null]})]}),(0,n.jsxs)("div",{className:"space-y-1.5",children:[(0,n.jsxs)("div",{className:"item-center block space-y-1 sm:flex sm:space-x-5",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2 overflow-auto",children:[(0,n.jsx)(b.Z,{className:"h-4 w-4 text-gray-500"}),(0,n.jsxs)("span",{className:"cursor-pointer text-xs font-bold",onClick:()=>{ek(!eC)},children:[ev," Collectors"]}),(0,n.jsx)(u.u,{title:"Collected by",show:eC,onClose:()=>ek(!1),children:(0,n.jsx)(l.Z,{publicationId:null==eg?void 0:eg.id})})]}),(null==ej?void 0:ej.collectLimit)&&(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(w.Z,{className:"h-4 w-4 text-gray-500"}),(0,n.jsxs)("div",{className:"font-bold",children:[parseInt(null==ej?void 0:ej.collectLimit)-ev," Avaliable"]})]}),(null==ej?void 0:ej.referralFee)?(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(_.Z,{className:"h-4 w-4 text-gray-500"}),(0,n.jsxs)("div",{className:"font-bold",children:[ej.referralFee,"% Referral fee"]})]}):null]}),(null==eZ?void 0:eZ.publicationRevenue)&&(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(_.Z,{className:"h-4 w-4 text-gray-500"}),(0,n.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,n.jsx)("span",{children:"Revenue:"}),(0,n.jsxs)("span",{className:"flex items-center space-x-1",children:[(0,n.jsx)(A(),{src:(0,R.Z)(null==ej?void 0:null===(en=ej.amount)||void 0===en?void 0:null===(ei=en.asset)||void 0===ei?void 0:ei.symbol),className:"h-5 w-5",height:20,width:20,alt:null==ej?void 0:null===(es=ej.amount)||void 0===es?void 0:null===(ea=es.asset)||void 0===ea?void 0:ea.symbol,title:null==ej?void 0:null===(eo=ej.amount)||void 0===eo?void 0:null===(el=eo.asset)||void 0===el?void 0:el.symbol}),(0,n.jsxs)("div",{className:"flex items-baseline space-x-1.5",children:[(0,n.jsx)("div",{className:"font-bold",children:ex}),(0,n.jsx)("div",{className:"text-[10px]",children:null==ej?void 0:null===(ec=ej.amount)||void 0===ec?void 0:null===(eu=ec.asset)||void 0===eu?void 0:eu.symbol}),eD?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"text-gray-500",children:"."}),(0,n.jsxs)("span",{className:"text-xs font-bold text-gray-500",children:["$",(ex*eD).toFixed(2)]})]}):null]})]})]})]}),(null==ej?void 0:ej.endTimestamp)&&(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)(x.Z,{className:"h-4 w-4 text-gray-500"}),(0,n.jsxs)("div",{className:"space-x-1.5",children:[(0,n.jsx)("span",{children:"Sale Ends:"}),(0,n.jsxs)("span",{className:"font-bold text-gray-600",children:[O()(ej.endTimestamp).format("MMMM DD, YYYY")," ","at ",O()(ej.endTimestamp).format("hh:mm a")]})]})]}),(null==eI?void 0:null===(ed=eI.publication)||void 0===ed?void 0:ed.collectNftAddress)&&(0,n.jsx)("div",{})]}),(null!==(ef=null==eU?void 0:eU.hash)&&void 0!==ef?ef:null==eX?void 0:null===(ep=eX.broadcast)||void 0===ep?void 0:ep.txHash)?(0,n.jsx)("div",{children:(0,n.jsx)(M.Z,{txHash:null!==(em=null==eU?void 0:eU.hash)&&void 0!==em?em:null==eX?void 0:null===(eh=eX.broadcast)||void 0===eh?void 0:eh.txHash})}):null,(0,n.jsx)("div",{className:"mt-5 flex items-center space-x-2",children:e_&&!eT?eW||eY?(0,n.jsx)("div",{className:"round-lg shimmer h-[34px] w-28"}):eR?eJ?(0,n.jsx)(c.z,{className:"text-xs font-bold",onClick:e3,disabled:e8,icon:e8?(0,n.jsx)(I.$,{size:"xs"}):(0,n.jsx)(S.Z,{className:"h-4 w-4"}),children:"Collect now"}):"Not enough money":(0,n.jsx)(N.Z,{title:"Allow collect module",module:null==eH?void 0:eH.approvedModuleAllowanceAmount[0],allowed:eR,setAllowed:eP}):null}),(null==eg?void 0:eg.hasCollectedByMe)&&(0,n.jsxs)("div",{className:"mt-3 flex items-center space-x-1.5 font-bold text-green-500",children:[(0,n.jsx)(T.Z,{className:"h-5 w-5"}),(0,n.jsx)("div",{children:"You already collected this"})]})]})]})})};var $=r(17295),B=r(53901);let U=i.forwardRef(function({title:e,titleId:t,...r},n){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 9.75h4.875a2.625 2.625 0 010 5.25H12M8.25 9.75L10.5 7.5M8.25 9.75L10.5 12m9-7.243V21.75l-3.75-1.5-3.75 1.5-3.75-1.5-3.75 1.5V4.757c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0c1.1.128 1.907 1.077 1.907 2.185z"}))}),q=i.forwardRef(function({title:e,titleId:t,...r},n){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))});var z=r(61452),V=r(28771);let H=e=>{let{module:t,size:r}=e;switch(t){case s.pYo.FeeCollectModule:return(0,n.jsx)(_.Z,{className:"h-".concat(r)});case s.pYo.LimitedFeeCollectModule:return(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(B.Z,{className:"h-".concat(r)}),(0,n.jsx)(_.Z,{className:"h-".concat(r)})]});case s.pYo.LimitedTimedFeeCollectModule:return(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(B.Z,{className:"h-".concat(r)}),(0,n.jsx)(x.Z,{className:"h-".concat(r)}),(0,n.jsx)(_.Z,{className:"h-".concat(r)})]});case s.pYo.TimedFeeCollectModule:return(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(x.Z,{className:"h-".concat(r)}),(0,n.jsx)(_.Z,{className:"h-".concat(r)})]});case s.pYo.RevertCollectModule:return(0,n.jsx)(U,{className:"h-".concat(r)});case s.pYo.FreeCollectModule:return(0,n.jsx)(q,{className:"h-".concat(r)});case s.wKL.FeeFollowModule:return(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(_.Z,{className:"h-".concat(r)}),(0,n.jsx)(z.Z,{className:"h-".concat(r)})]});case s._9N.FollowerOnlyReferenceModule:return(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)(z.Z,{className:"h-".concat(r)}),(0,n.jsx)(V.Z,{className:"h-".concat(r)})]});default:return(0,n.jsx)(_.Z,{className:"h-".concat(r)})}},W=e=>(0,n.jsxs)("svg",{...e,viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.448 0.750001C4.54954 0.749973 3.8003 0.749949 3.20552 0.829914C2.57773 0.914319 2.01093 1.09999 1.55546 1.55546C1.09999 2.01093 0.914319 2.57773 0.829914 3.20552C0.749949 3.8003 0.749973 4.54951 0.750001 5.44798V5.552C0.749973 6.45047 0.749949 7.19971 0.829914 7.79448C0.914319 8.42228 1.09999 8.98908 1.55546 9.44455C2.01093 9.90002 2.57773 10.0857 3.20552 10.1701C3.8003 10.2501 4.54951 10.25 5.44798 10.25H5.552C6.45047 10.25 7.19971 10.2501 7.79448 10.1701C8.42228 10.0857 8.98908 9.90002 9.44455 9.44455C9.90002 8.98908 10.0857 8.42228 10.1701 7.79448C10.2501 7.19971 10.25 6.4505 10.25 5.55203V5.44801C10.25 4.54954 10.2501 3.8003 10.1701 3.20552C10.0857 2.57773 9.90002 2.01093 9.44455 1.55546C8.98908 1.09999 8.42228 0.914319 7.79448 0.829914C7.19971 0.749949 6.4505 0.749973 5.55203 0.750001H5.448ZM2.61612 2.61612C2.74644 2.4858 2.94393 2.37858 3.4054 2.31654C3.88843 2.2516 4.53599 2.25 5.5 2.25C6.46401 2.25 7.11157 2.2516 7.59461 2.31654C8.05607 2.37858 8.25357 2.4858 8.38389 2.61612C8.5142 2.74644 8.62143 2.94393 8.68347 3.4054C8.74841 3.88843 8.75 4.53599 8.75 5.5C8.75 6.46401 8.74841 7.11157 8.68347 7.59461C8.62143 8.05607 8.5142 8.25357 8.38389 8.38389C8.25357 8.5142 8.05607 8.62143 7.59461 8.68347C7.11157 8.74841 6.46401 8.75 5.5 8.75C4.53599 8.75 3.88843 8.74841 3.4054 8.68347C2.94393 8.62143 2.74644 8.5142 2.61612 8.38389C2.4858 8.25357 2.37858 8.05607 2.31654 7.59461C2.2516 7.11157 2.25 6.46401 2.25 5.5C2.25 4.53599 2.2516 3.88843 2.31654 3.4054C2.37858 2.94393 2.4858 2.74644 2.61612 2.61612Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M17.25 2.5C17.25 2.08579 16.9142 1.75 16.5 1.75C16.0858 1.75 15.75 2.08579 15.75 2.5V4.75H13.5C13.0858 4.75 12.75 5.08579 12.75 5.5C12.75 5.91422 13.0858 6.25 13.5 6.25H15.75V8.5C15.75 8.91422 16.0858 9.25 16.5 9.25C16.9142 9.25 17.25 8.91422 17.25 8.5V6.25H19.5C19.9142 6.25 20.25 5.91422 20.25 5.5C20.25 5.08579 19.9142 4.75 19.5 4.75H17.25V2.5Z",fill:"currentColor"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.448 11.75H16.552C17.4505 11.75 18.1997 11.7499 18.7945 11.8299C19.4223 11.9143 19.9891 12.1 20.4445 12.5555C20.9 13.0109 21.0857 13.5777 21.1701 14.2055C21.2501 14.8003 21.25 15.5495 21.25 16.4479V16.552C21.25 17.4505 21.2501 18.1997 21.1701 18.7945C21.0857 19.4223 20.9 19.9891 20.4445 20.4445C19.9891 20.9 19.4223 21.0857 18.7945 21.1701C18.1997 21.2501 17.4505 21.25 16.5521 21.25H16.448C15.5496 21.25 14.8003 21.2501 14.2055 21.1701C13.5777 21.0857 13.0109 20.9 12.5555 20.4445C12.1 19.9891 11.9143 19.4223 11.8299 18.7945C11.7499 18.1997 11.75 17.4505 11.75 16.552V16.448C11.75 15.5495 11.7499 14.8003 11.8299 14.2055C11.9143 13.5777 12.1 13.0109 12.5555 12.5555C13.0109 12.1 13.5777 11.9143 14.2055 11.8299C14.8003 11.7499 15.5495 11.75 16.448 11.75ZM14.4054 13.3165C13.9439 13.3786 13.7464 13.4858 13.6161 13.6161C13.4858 13.7464 13.3786 13.9439 13.3165 14.4054C13.2516 14.8884 13.25 15.536 13.25 16.5C13.25 17.464 13.2516 18.1116 13.3165 18.5946C13.3786 19.0561 13.4858 19.2536 13.6161 19.3839C13.7464 19.5142 13.9439 19.6214 14.4054 19.6835C14.8884 19.7484 15.536 19.75 16.5 19.75C17.464 19.75 18.1116 19.7484 18.5946 19.6835C19.0561 19.6214 19.2536 19.5142 19.3839 19.3839C19.5142 19.2536 19.6214 19.0561 19.6835 18.5946C19.7484 18.1116 19.75 17.464 19.75 16.5C19.75 15.536 19.7484 14.8884 19.6835 14.4054C19.6214 13.9439 19.5142 13.7464 19.3839 13.6161C19.2536 13.4858 19.0561 13.3786 18.5946 13.3165C18.1116 13.2516 17.464 13.25 16.5 13.25C15.536 13.25 14.8884 13.2516 14.4054 13.3165Z",fill:"currentColor"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.448 11.75C4.54952 11.75 3.8003 11.7499 3.20552 11.8299C2.57773 11.9143 2.01093 12.1 1.55546 12.5555C1.09999 13.0109 0.914319 13.5777 0.829914 14.2055C0.749949 14.8003 0.749973 15.5495 0.750001 16.448V16.552C0.749973 17.4505 0.749949 18.1997 0.829914 18.7945C0.914319 19.4223 1.09999 19.9891 1.55546 20.4445C2.01093 20.9 2.57773 21.0857 3.20552 21.1701C3.8003 21.2501 4.54951 21.25 5.44798 21.25H5.552C6.45047 21.25 7.19971 21.2501 7.79448 21.1701C8.42228 21.0857 8.98908 20.9 9.44455 20.4445C9.90002 19.9891 10.0857 19.4223 10.1701 18.7945C10.2501 18.1997 10.25 17.4505 10.25 16.552V16.448C10.25 15.5495 10.2501 14.8003 10.1701 14.2055C10.0857 13.5777 9.90002 13.0109 9.44455 12.5555C8.98908 12.1 8.42228 11.9143 7.79448 11.8299C7.1997 11.7499 6.45048 11.75 5.552 11.75H5.448ZM2.61612 13.6161C2.74644 13.4858 2.94393 13.3786 3.4054 13.3165C3.88843 13.2516 4.53599 13.25 5.5 13.25C6.46401 13.25 7.11157 13.2516 7.59461 13.3165C8.05607 13.3786 8.25357 13.4858 8.38389 13.6161C8.5142 13.7464 8.62143 13.9439 8.68347 14.4054C8.74841 14.8884 8.75 15.536 8.75 16.5C8.75 17.464 8.74841 18.1116 8.68347 18.5946C8.62143 19.0561 8.5142 19.2536 8.38389 19.3839C8.25357 19.5142 8.05607 19.6214 7.59461 19.6835C7.11157 19.7484 6.46401 19.75 5.5 19.75C4.53599 19.75 3.88843 19.7484 3.4054 19.6835C2.94393 19.6214 2.74644 19.5142 2.61612 19.3839C2.4858 19.2536 2.37858 19.0561 2.31654 18.5946C2.2516 18.1116 2.25 17.464 2.25 16.5C2.25 15.536 2.2516 14.8884 2.31654 14.4054C2.37858 13.9439 2.4858 13.7464 2.61612 13.6161Z",fill:"currentColor"})]}),Z=e=>{var t,r,a;let{publication:o}=e,[l,c]=(0,i.useState)(!1),[d,p]=(0,i.useState)(null==o?void 0:null===(t=o.stats)||void 0===t?void 0:t.totalAmountOfCollects),[h,f]=(0,i.useState)(!1),m=(null==o?void 0:o.collectModule.__typename)==="FreeCollectModuleSettings",y=(null==o?void 0:o.collectModule.__typename)==="UnknownCollectModuleSettings",v=(0,g.qr)(e=>e.currentProfile);return(0,i.useEffect)(()=>{(null==o?void 0:o.hasCollectedByMe)===!0?c(!0):c(!1),v||c(!1)},[null==o?void 0:o.hasCollectedByMe]),(0,n.jsx)("div",{className:"block flex gap-6",children:(0,n.jsxs)("div",{className:"flex cursor-pointer flex-col items-center justify-center md:mt-4",children:[l?(0,n.jsx)("div",{onClick:()=>{f(!0)},className:"flex cursor-pointer items-center rounded-full bg-gray-600/50 p-2 drop-shadow-lg dark:bg-gray-600/50 md:bg-gray-200 ",children:(0,n.jsx)(W,{className:"w-3 font-bold text-blue-700 md:h-3"})}):(0,n.jsxs)("div",{onClick:()=>{f(!0)},className:"flex cursor-pointer items-center rounded-full bg-gray-600/50 p-2 drop-shadow-lg dark:bg-gray-600/50 md:bg-gray-200 ",children:[(0,n.jsx)(W,{className:"h-3 w-3 cursor-pointer font-bold"}),(0,n.jsxs)("span",{className:"pointer-events-none absolute -bottom-7 left-7 hidden w-max px-2 py-1 text-xs text-blue-700 opacity-0 shadow group-hover:opacity-100 md:block",children:[" ","Collect"," "]})]}),(0,n.jsx)(u.u,{title:m?"Free Collect":y?"Unknown Collect":(0,$.rT)(null==o?void 0:null===(r=o.collectModule)||void 0===r?void 0:r.type).name,icon:(0,n.jsx)("div",{className:"text-[#57B8FF]",children:(0,n.jsx)(H,{module:m?s.pYo.FreeCollectModule:null==o?void 0:null===(a=o.collectModule)||void 0===a?void 0:a.type,size:5})}),show:h,onClose:()=>f(!1),children:(0,n.jsx)(F,{publication:o,setCount:p,count:d})}),(0,n.jsx)("p",{className:"lg:[pb-2] hidden text-xs font-semibold text-gray-400"})]})})};var K=Z},92864:function(e,t,r){"use strict";var n=r(85893),i=r(37331),s=r(34625),a=r(9187),o=r(13250),l=r(86501),c=r(92882),u=r(31618),d=r(64911),p=r(4242),h=r(21273);let f=e=>{let{setFollowing:t,profile:r}=e,f=(0,c.qr)(e=>e.userSigNonce),m=(0,c.qr)(e=>e.setUserSigNonce),g=(0,c.qr)(e=>e.currentProfile),{address:y}=(0,u.mA)(),{isLoading:v,signTypedDataAsync:b}=(0,u.yw)({onError:a.Z}),w=()=>{t(!0),l.Am.success("Followed successfully!")},_=e=>{e.modify({id:"Profile:".concat(null==r?void 0:r.id),fields:{isFollowedByMe:()=>!0}})},{isLoading:x,write:S}=(0,u.GG)({address:s.Nm,abi:i.g,functionName:"followWithSig",onSuccess:w,onError:a.Z}),{broadcast:T,loading:E}=(0,o.Z)({onCompleted:w}),[C,{loading:k}]=(0,h.Rs)({onCompleted:async e=>{let{createFollowTypedData:t}=e,{id:r,typedData:n}=t,{deadline:i}=n.value;try{let s=await b((0,d.Z)(JSON.parse(JSON.stringify(n))));m(f+1);let{profileIds:a,datas:o}=n.value,{v:l,r:c,s:u}=(0,p.Z)(s),h={follower:y,profileIds:a,datas:o,sig:{v:l,r:c,s:u,deadline:i}};null==S||S({args:[h]});let{data:{broadcast:g}}=await T({request:{id:r,signature:s}});"reason"in g&&(null==S||S({args:[h]}))}catch(v){}},onError:a.Z,update:_}),[R,{loading:P}]=(0,h.RI)({onCompleted:w,onError:a.Z,update:_}),D=async e=>{let{data:t}=await R({variables:e});(null==t?void 0:t.proxyAction)||C({variables:{request:{follow:[{profile:null==r?void 0:r.id}]},options:{overrideSigNonce:f}}})},A=()=>{if(!g)return l.Am.error("Please Connect Your Wallet");if(null==r?void 0:r.followModule){var e;C({variables:{options:{overrideSigNonce:f},request:{follow:[{profile:null==r?void 0:r.id,followModule:(null==r?void 0:null===(e=r.followModule)||void 0===e?void 0:e.__typename)==="ProfileFollowModuleSettings"?{profileFollowModule:{profileId:null==g?void 0:g.id}}:null}]}}})}else D({request:{follow:{freeFollow:{profileId:null==r?void 0:r.id}}}})};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{children:(0,n.jsx)("button",{onClick:A,disabled:k||P||v||x||E,className:"lg:text-md xl:text-md font-helvetica mt-2 cursor-pointer rounded-full border-2 border-black bg-blue-500 px-1 py-1 text-xs font-semibold text-[#000000] drop-shadow-xl transition hover:bg-[#57B8FF] hover:text-[#fff]",children:"Follow"})})})};t.Z=f},87184:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var n=r(85893),i=r(67294),s=r(9187),a=r(92882),o=r(21273),l=r(68980),c=r(86501),u=r(8193);let d=e=>{let{setCount:t,setLiked:r,count:i,liked:d,publication:p}=e,h=(0,a.qr)(e=>e.currentProfile),[f]=(0,o.Os)({onCompleted:()=>{c.Am.success("Like successfully!")},onError:e=>{r(!d),t(i-1),(0,s.Z)(e)}}),[m]=(0,o.d6)({onCompleted:()=>{c.Am.success("Like removed successfully!")},onError:e=>{r(!d),t(i-1),(0,s.Z)(e)}}),g=()=>{if(!h)return c.Am.error("Please connect your wallet!");let e={variables:{request:{profileId:null==h?void 0:h.id,reaction:l.Oiw.Upvote,publicationId:null==p?void 0:p.id}}};d?(r(!1),t(i-1),m(e)):(r(!0),t(i+1),f(e))};return(0,n.jsx)(n.Fragment,{children:d?(0,n.jsx)("div",{onClick:g,className:" rounded-full bg-gray-600/50 p-2 dark:bg-gray-600/50 md:bg-gray-200",children:(0,n.jsx)(u.M_L,{className:"h-3 w-3 font-bold text-blue-500"})}):(0,n.jsx)("div",{onClick:g,className:" rounded-full bg-gray-600/50 p-2 dark:bg-gray-600/50 md:bg-gray-200",children:(0,n.jsx)(u.M_L,{className:"h-3 w-3 font-bold "})})})},p=e=>{let{publication:t}=e,[r,s]=(0,i.useState)(!1),o="Mirror"===t.__typename,[l,c]=(0,i.useState)(o?t.mirrorOf.stats.totalUpvotes:t.stats.totalUpvotes),u=(0,a.qr)(e=>e.currentProfile);return(0,i.useEffect)(()=>{(null==t?void 0:t.reaction)==="UPVOTE"?s(!0):s(!1),u||s(!1)},[null==t?void 0:t.reaction]),(0,n.jsx)("div",{className:"block flex gap-6",children:(0,n.jsxs)("div",{className:" flex cursor-pointer flex-col items-center justify-center md:mt-4",children:[(0,n.jsx)(d,{setCount:c,count:l,setLiked:s,liked:r,publication:t}),(0,n.jsxs)("p",{className:"hidden text-xs font-semibold text-gray-400 lg:block",children:[" ",l," "]})]})})};var h=p},8685:function(e,t,r){"use strict";r.d(t,{Z:function(){return E}});var n=r(85893),i=r(67294),s=r(92882),a=r(41664),o=r.n(a),l=r(86501),c=r(34625),u=r(6528),d=function(){let[e,t]=(0,i.useState)(null),r=async e=>{if(!(null==navigator?void 0:navigator.clipboard))return!1;try{return await navigator.clipboard.writeText(e),t(e),!0}catch(r){return t(null),!1}};return[r,e]},p=r(93300),h=r(21321),f=r(29350),m=r(5434);let g=e=>{let{videoId:t,onClose:r}=e,[s,a]=(0,i.useState)(!1),[o]=d(),u='<iframe width="560" height="315" src="'.concat(c.Qy,"/").concat(t,'?autoplay=1&t=0&loop=0" title="LensShare video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write;" allowfullscreen></iframe>'),g=()=>{o(u),l.ZP.success("Copied to clipboard")},y=()=>{a(!1),r()},v=()=>{a(!0)};return(0,n.jsxs)("div",{children:[(0,n.jsx)(f.Z,{title:"Embed Video",onClose:y,show:s,children:(0,n.jsxs)("div",{className:"display:absolute mt-40 rounded-xl bg-white ",children:[(0,n.jsx)("div",{className:"z-10 max-md:absolute",children:(0,n.jsx)("button",{type:"button",className:"right-1 m-4 rounded-full bg-slate-600 p-1 focus:outline-none",onClick:()=>a(!1),children:(0,n.jsx)(m.lTq,{className:"h-4 w-4 text-white"})})}),(0,n.jsxs)("div",{className:"flex flex-col space-y-3",children:[(0,n.jsx)("div",{className:"w-full break-words",children:(0,n.jsx)("iframe",{sandbox:"allow-scripts allow-same-origin",className:"mt-24 aspect-[16/9] w-full break-words",src:"".concat(c.Qy,"/").concat(t),title:"LensShare video player",allow:"accelerometer; autoplay; clipboard-write; gyroscope;",allowFullScreen:!0})}),(0,n.jsx)("div",{className:"col-span-2 mt-80",children:(0,n.jsx)("button",{type:"button",onClick:()=>g(),className:"select-all rounded-xl border p-4 text-left",children:(0,n.jsx)("code",{className:"select-all break-words text-xs opacity-60",children:u})})})]})]})}),(0,n.jsx)(p.u,{placement:"top",content:"Embed Video",children:(0,n.jsx)("button",{type:"button",onClick:()=>v(),className:"rounded-full bg-blue-500 p-2.5",children:(0,n.jsx)(h.Z,{className:"h-5 w-5 text-black"})})})]})};var y=r(47516),v=r(97454);let b=e=>"".concat(c.Tq,"/post/").concat(e.id),w=(e,t)=>{var r,n,i,s,a,o,l,u,d;return"lenster"===e?"".concat(c.ZT,"/?url=").concat(b(t),"&text=").concat(null===(r=t.metadata)||void 0===r?void 0:r.name," by @").concat((0,v.Z)(null===(n=t.profile)||void 0===n?void 0:n.handle),"&hashtags=Lensshare&preview=true"):"twitter"===e?encodeURI("https://twitter.com/intent/tweet?url=".concat(b(t),"&text=").concat(null===(i=t.metadata)||void 0===i?void 0:i.name," by @").concat((0,v.Z)(null===(s=t.profile)||void 0===s?void 0:s.handle),"&via=").concat(c.nG,"&related=Lensshare&hashtags=Lensshare")):"reddit"===e?"https://www.reddit.com/submit?url=".concat(b(t),"&title=").concat(null===(a=t.metadata)||void 0===a?void 0:a.name," by @").concat((0,v.Z)(null===(o=t.profile)||void 0===o?void 0:o.handle)):"linkedin"===e?"https://www.linkedin.com/shareArticle/?url=".concat(b(t)," by @").concat((0,v.Z)(null===(l=t.profile)||void 0===l?void 0:l.handle),"&title=").concat(null===(u=t.metadata)||void 0===u?void 0:u.name,"&summary=").concat(null===(d=t.metadata)||void 0===d?void 0:d.description,"&source=").concat(c.iC):""};var _=r(11761);let x=e=>{let{setShowShare:t,publication:r,show:i}=e,[s]=d(),a=async()=>{await s("".concat(c.Tq,"/post/").concat(r.id)),l.ZP.success("Permalink copied to clipboard")};return(0,n.jsxs)(f.Z,{title:"Share",onClose:()=>t(!1),show:i,children:[(0,n.jsx)("div",{className:"z-10 max-md:absolute",children:(0,n.jsx)("button",{type:"button",className:"right-1 m-4 rounded-full bg-slate-600 p-1 focus:outline-none",onClick:()=>t(!1),children:(0,n.jsx)(m.lTq,{className:"h-4 w-4 text-white"})})}),(0,n.jsx)("div",{className:"mt-20 rounded-xl bg-white",children:(0,n.jsxs)(_.Z,{className:"rounded-xl border-0 object-contain object-center p-2 ",children:[(0,n.jsxs)("div",{className:"no-scrollbar mb-4 flex flex-nowrap items-center space-x-3 overflow-x-auto",children:[(0,n.jsx)(g,{videoId:r.id,onClose:()=>t(!1)}),(0,n.jsx)(o(),{className:"rounded-full",target:"_blank",rel:"noreferrer",href:w("lenster",r),children:(0,n.jsx)("img",{src:(0,u.Z)("".concat(c.Fv,"/images/social/lenster.png"),"avatar_lg"),className:"h-10 w-10 max-w-none rounded-full",alt:"lenster",draggable:!1})}),(0,n.jsx)(o(),{className:"rounded-full",target:"_blank",rel:"noreferrer",href:w("twitter",r),children:(0,n.jsx)("img",{src:(0,u.Z)("".concat(c.Fv,"/images/social/twitter.png"),"avatar_lg"),className:"h-10 w-10 max-w-none rounded-full",alt:"twitter",draggable:!1})}),(0,n.jsx)(o(),{href:w("reddit",r),target:"_blank",rel:"noreferrer",children:(0,n.jsx)("img",{src:(0,u.Z)("".concat(c.Fv,"/images/social/reddit-logo.png"),"avatar_lg"),className:"h-10 w-10 max-w-none rounded-full",alt:"reddit",draggable:!1})}),(0,n.jsx)(o(),{href:w("linkedin",r),target:"_blank",rel:"noreferrer",children:(0,n.jsx)("img",{src:(0,u.Z)("".concat(c.Fv,"/images/social/linkedin.png"),"avatar_lg"),alt:"linkedin",className:"h-10 w-10 max-w-none rounded-full",draggable:!1})})]}),(0,n.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-gray-200 p-2 dark:border-gray-800",children:[(0,n.jsxs)("div",{className:"select-all truncate text-sm",children:[c.Tq,"/post/",r.id]}),(0,n.jsx)("button",{className:"ml-2 hover:opacity-60 focus:outline-none",onClick:()=>a(),type:"button",children:(0,n.jsx)(y.LhG,{className:"h-4 w-4"})})]})]})})]})},S=e=>(0,n.jsxs)("svg",{...e,viewBox:"0 0 22 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.75 4C14.75 1.92893 13.0711 0.25 11 0.25C8.92893 0.25 7.25 1.92893 7.25 4C7.25 6.07107 8.92893 7.75 11 7.75C13.0711 7.75 14.75 6.07107 14.75 4ZM11 1.75C12.2426 1.75 13.25 2.75736 13.25 4C13.25 5.24264 12.2426 6.25 11 6.25C9.75736 6.25 8.75 5.24264 8.75 4C8.75 2.75736 9.75736 1.75 11 1.75Z",fill:"currentColor"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.25 16C8.25 13.9289 6.57107 12.25 4.5 12.25C2.42893 12.25 0.75 13.9289 0.75 16C0.75 18.0711 2.42893 19.75 4.5 19.75C6.57107 19.75 8.25 18.0711 8.25 16ZM4.5 13.75C5.74264 13.75 6.75 14.7574 6.75 16C6.75 17.2426 5.74264 18.25 4.5 18.25C3.25736 18.25 2.25 17.2426 2.25 16C2.25 14.7574 3.25736 13.75 4.5 13.75Z",fill:"currentColor"}),(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5 12.25C19.5711 12.25 21.25 13.9289 21.25 16C21.25 18.0711 19.5711 19.75 17.5 19.75C15.4289 19.75 13.75 18.0711 13.75 16C13.75 13.9289 15.4289 12.25 17.5 12.25ZM19.75 16C19.75 14.7574 18.7426 13.75 17.5 13.75C16.2574 13.75 15.25 14.7574 15.25 16C15.25 17.2426 16.2574 18.25 17.5 18.25C18.7426 18.25 19.75 17.2426 19.75 16Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M6.20468 5.56231C6.51523 5.28821 6.54478 4.81426 6.27069 4.5037C5.99659 4.19315 5.52264 4.1636 5.21208 4.43769C3.39676 6.03991 2.25 8.38652 2.25 11C2.25 11.4142 2.58579 11.75 3 11.75C3.41421 11.75 3.75 11.4142 3.75 11C3.75 8.83474 4.69828 6.89187 6.20468 5.56231Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M16.7879 4.43769C16.4774 4.1636 16.0034 4.19315 15.7293 4.5037C15.4552 4.81426 15.4848 5.28821 15.7953 5.56231C17.3017 6.89187 18.25 8.83474 18.25 11C18.25 11.4142 18.5858 11.75 19 11.75C19.4142 11.75 19.75 11.4142 19.75 11C19.75 8.38652 18.6032 6.03991 16.7879 4.43769Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M9.18694 18.0217C8.7858 17.9184 8.37692 18.1599 8.27367 18.561C8.17043 18.9622 8.41192 19.3711 8.81306 19.4743C9.51285 19.6544 10.2458 19.75 11 19.75C11.7542 19.75 12.4871 19.6544 13.1869 19.4743C13.5881 19.3711 13.8296 18.9622 13.7263 18.561C13.6231 18.1599 13.2142 17.9184 12.8131 18.0217C12.2344 18.1706 11.627 18.25 11 18.25C10.373 18.25 9.76562 18.1706 9.18694 18.0217Z",fill:"currentColor"})]}),T=e=>{let{publication:t}=e,[r,a]=(0,i.useState)(!1),o="Mirror"===t.__typename,[l,c]=(0,i.useState)(o?t.mirrorOf.stats.totalUpvotes:t.stats.totalUpvotes);(0,s.qr)(e=>e.currentProfile);let[u,d]=(0,i.useState)(!1);return(0,n.jsx)("div",{className:"flex gap-6",children:(0,n.jsxs)("div",{className:" flex cursor-pointer flex-col items-center justify-center rounded-full bg-gray-600/50 p-2 dark:bg-gray-600/50 md:mt-2 md:bg-gray-200 md:text-black",onClick:()=>d(!0),children:[(0,n.jsx)(x,{show:u,setShowShare:d,publication:t}),(0,n.jsxs)("p",{children:[(0,n.jsx)(S,{onClick:()=>d(!0),className:"h-3 w-3 cursor-pointer rounded-full"})," "]})]})})};var E=T},7960:function(e,t,r){"use strict";r.d(t,{Z:function(){return y}});var n=r(85893);let i=[{inputs:[{internalType:"address",name:"hub",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[],name:"BlockNumberInvalid",type:"error"},{inputs:[],name:"InitParamsInvalid",type:"error"},{inputs:[],name:"Initialized",type:"error"},{inputs:[],name:"NotHub",type:"error"},{inputs:[],name:"NotOwnerOrApproved",type:"error"},{inputs:[],name:"SignatureExpired",type:"error"},{inputs:[],name:"SignatureInvalid",type:"error"},{inputs:[],name:"TokenDoesNotExist",type:"error"},{inputs:[],name:"ZeroSpender",type:"error"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"HUB",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"burn",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct DataTypes.EIP712Signature",name:"sig",type:"tuple"}],name:"burnWithSig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"delegatee",type:"address"}],name:"delegate",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"delegator",type:"address"},{internalType:"address",name:"delegatee",type:"address"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct DataTypes.EIP712Signature",name:"sig",type:"tuple"}],name:"delegateBySig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"exists",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"getDelegatedSupplyByBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getDomainSeparator",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"user",type:"address"},{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"getPowerByBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"profileId",type:"uint256"}],name:"initialize",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"}],name:"mint",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"mintTimestampOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct DataTypes.EIP712Signature",name:"sig",type:"tuple"}],name:"permit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"},{components:[{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"},{internalType:"uint256",name:"deadline",type:"uint256"}],internalType:"struct DataTypes.EIP712Signature",name:"sig",type:"tuple"}],name:"permitForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"sigNonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenDataOf",outputs:[{components:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint96",name:"mintTimestamp",type:"uint96"}],internalType:"struct IERC721Time.TokenData",name:"",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}];var s=r(9187),a=r(4242),o=r(92882),l=r(13250),c=r(66214),u=r(67294),d=r(31618),p=r(64911),h=r(86501),f=r(21273),m=r(52942);let g=e=>{let{setFollowing:t,profile:r}=e,g=(0,o.qr)(e=>e.currentProfile),[y,v]=(0,u.useState)(!1),{isLoading:b,signTypedDataAsync:w}=(0,d.yw)({onError:s.Z}),{data:_}=(0,m.Z)(),x=async(e,t)=>{let{tokenId:r,deadline:n}=t.value,{v:s,r:o,s:l}=(0,a.Z)(e),u=new c.CH(t.domain.verifyingContract,i,_);await u.burnWithSig(r,{v:s,r:o,s:l,deadline:n})},{broadcast:S}=(0,l.Z)({onCompleted:()=>{t(!1)}}),[T,{loading:E}]=(0,f.i0)({onCompleted:async e=>{let{createUnfollowTypedData:t}=e;try{let{typedData:r,id:n}=t,i=await w((0,p.Z)(r));v(!0);try{var s;let{data:a}=await S({request:{id:n,signature:i}});(null==a?void 0:null===(s=a.broadcast)||void 0===s?void 0:s.reason)&&await x(i,r),h.Am.success("Unfollowed succesfully")}catch(o){h.Am.error("User rejected request")}finally{v(!1)}}catch(l){}},onError:s.Z}),C=()=>{if(!g)return h.Am.error("Please connect your wallet");T({variables:{request:{profile:null==r?void 0:r.id}}})};return(0,n.jsx)("div",{children:(0,n.jsx)("button",{onClick:C,className:"lg:text-md xl:text-md font-helvetica mt-2 cursor-pointer rounded-full border-2 border-black bg-blue-500 p-3 px-1 py-1 text-xs font-semibold text-[#000000] drop-shadow-xl transition hover:bg-[#57B8FF] hover:text-white active:bg-violet-600",children:"Unfollow"})})};var y=g},819:function(e,t,r){"use strict";var n=r(85893),i=r(67294),s=r(29291),a=r(88942),o=r(87184),l=r(8685),c=r(92882),u=r(11163),d=r(24358);let p=e=>{let{video:t,showDetail:r,inDetail:p,trigger:h}=e,[f,m]=(0,i.useState)(!1),[g,y]=(0,i.useState)(!1),[v,b]=(0,i.useState)(!1),w=(0,c.qr)(e=>e.currentProfile),_=(0,u.useRouter)(),{id:x}=_.query,[S,T]=(0,i.useState)(!1),E="Mirror"===t.__typename,C=E?t.mirrorOf.stats.totalAmountOfComments:t.stats.totalAmountOfComments;return x||null==t||t.profile,(0,n.jsx)("div",{className:"mb-14 ml-4 w-14 flex-col items-center justify-between md:flex md:w-14 md:max-xl:mb-16",children:(0,n.jsxs)("div",{className:"items-center space-y-1.5 pt-2.5 md:flex md:flex-col",children:[(0,n.jsx)("div",{className:"w-full text-center text-white md:text-inherit",children:(0,n.jsx)(o.Z,{publication:t})}),(0,n.jsxs)("div",{className:"w-full pr-7 text-center text-white md:text-inherit",onClick:()=>b(!0),children:[(0,n.jsx)("button",{children:(0,n.jsx)(s.Z,{publication:t,trigger:h,setFollowing:T,following:S,profile:w})}),(0,n.jsx)("p",{className:"hidden text-xs font-semibold text-gray-400 lg:block",children:C})]}),(0,n.jsx)("div",{className:"w-full text-center text-white md:text-inherit",children:(0,n.jsx)(d.Z,{publication:t,showCount:!0})}),(0,n.jsx)("div",{className:"w-full text-center text-white md:text-inherit",children:(0,n.jsx)(a.Z,{publication:t})}),(0,n.jsx)("div",{className:"w-full text-center text-white md:text-inherit",onClick:()=>m(!0),children:(0,n.jsx)(l.Z,{publication:t})})]})})};t.Z=p},30579:function(e,t,r){"use strict";var n=r(85893),i=r(67294),s=r(40377),a=r(38624),o=r(6528),l=r(23286),c=r(21192),u=r(819),d=r(86010),p=r(92882),h=r(38385);let f=e=>{let{video:t,onDetail:r,isShow:f,index:m}=e,g=(0,i.useRef)(),[y,v]=(0,i.useState)(!1),[b,w]=(0,i.useState)(window.innerWidth),_=(0,i.useRef)(null),[x,S]=(0,i.useState)(!1),T=(0,o.Z)((0,l.A)((0,a.Z)(t.metadata)),"thumbnail_v"),E=()=>{w(window.innerWidth)};(0,i.useEffect)(()=>(window.addEventListener("resize",E),()=>{window.removeEventListener("resize",E)}),[]);let C=b<=768,k=(0,p.qr)(e=>e.setCurrentviewingId),R=(0,p.qr)(e=>e.currentviewingId),P=()=>{var e;g.current&&!f&&(g.current.currentTime=0,g.current.volume=1,g.current.autoplay=!0,null===(e=g.current)||void 0===e||e.play().catch(()=>{}),S(!0))},D=new IntersectionObserver((e,t)=>{if(e[0].target.id&&e[0].isIntersecting){let r=e[0].target.id;r!=R&&k(r)}},{rootMargin:"0px 0px -50% 0px"});(0,i.useEffect)(()=>{_.current&&D.observe(_.current)},[]);let A=()=>{var e;g.current&&(null===(e=g.current)||void 0===e||e.pause(),g.current.autoplay=!1,S(!1))},N=e=>{e&&(g.current=e,P())};(0,i.useEffect)(()=>{R==t.id&&(f?A():P())},[f]);let L=t.profile;return(0,n.jsx)("div",{className:(0,d.Z)(0!=m&&" ",!C&&"mt-8 flex md:ml-2"),children:(0,n.jsxs)("div",{className:"flex snap-center border-0 object-contain","data-testid":"byte-video",children:[(0,n.jsxs)("div",{className:"relative bottom-0 border-0",children:[(0,n.jsxs)("div",{className:(0,d.Z)(C?"flex h-screen w-screen":"ultrawide:w-[400px] flex h-screen max-h-[600px] min-h-[500px] w-screen min-w-[380px] max-w-[400px] items-center  overflow-hidden border-0 bg-black md:h-[65vh] md:w-[19.5vw] md:rounded-xl md:max-xl:h-[30vh]"),id:R===t.id?"currentVideo":t.id+"1",style:{backgroundColor:"transparent"},children:[(0,n.jsx)("div",{className:"absolute top-[50%] border-0",ref:_,id:t.id}),R===t.id?(0,n.jsx)(c.Z,{refCallback:N,permanentUrl:(0,s.cI)(t),posterUrl:T,ratio:"9to16",publicationId:t.id,showControls:!0,options:{autoPlay:!1,loop:!0,loadingSpinner:!1,muted:!0,isCurrentlyShown:!0}}):(0,n.jsx)("img",{className:"w-full rounded-[10px] border-0 object-contain",src:T,alt:"thumbnail",draggable:!1})]}),C&&(0,n.jsx)(h.Z,{video:t,setFollowing:v,profile:L,following:y}),(0,n.jsx)("div",{className:"absolute bottom-[15%] right-3 z-[1] inline-block md:hidden",children:(0,n.jsx)(u.Z,{publication:t,trigger:!0,publicationId:t,video:t,showDetail:()=>r(t)},R)})]}),(0,n.jsx)("div",{className:"hidden md:flex",children:(0,n.jsx)(u.Z,{publication:t,publicationId:t,trigger:!0,video:t,showDetail:()=>r(t)})})]})})};t.Z=i.memo(f)},29291:function(e,t,r){"use strict";var n=r(85893),i=r(67294),s=r(89583),a=r(5434),o=r(29350),l=r(92882),c=r(89454),u=r(40703),d=r(52363);let p=e=>{let{trigger:t,publication:r,profile:p,setFollowing:h,following:f}=e,[m,g]=(0,i.useState)(!1);return(0,l.qr)(e=>e.setCurrentviewingId),(0,l.qr)(e=>e.currentviewingId),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{type:"button",className:"focus:outline-none",onClick:()=>g(!0),children:[(0,n.jsx)("div",{className:"flex items-center overflow-y-auto rounded-full bg-gray-600/50 p-2 drop-shadow-lg dark:bg-gray-600/50 md:bg-gray-200",children:(0,n.jsx)(s.QRJ,{className:"h-3 w-3 font-bold"})}),t]}),(0,n.jsxs)(o.Z,{panelClassName:"max-w-lg bg-[#F2F6F9] overflow-y-hidden overflow-y-auto rounded-xl lg:ml-9",show:m,autoClose:!0,children:[(0,n.jsx)("div",{className:"z-10 max-md:absolute",children:(0,n.jsx)("button",{type:"button",className:"m-4 rounded-full bg-slate-600 p-1 focus:outline-none",onClick:()=>g(!1),children:(0,n.jsx)(a.lTq,{className:"h-4 w-4 text-white"})})}),(0,n.jsx)("div",{className:"ml-12 mt-5 items-center justify-center p-5 text-center",children:(0,n.jsx)(c.Z,{publication:r})}),(0,n.jsx)("div",{className:"scrollbar-text-blue flex max-h-[75%] overflow-y-auto bg-white pt-3",children:(0,n.jsx)(u.Z,{publication:r})}),(0,n.jsx)(d.Z,{publication:r})]})]})};t.Z=p},2146:function(e,t,r){"use strict";r.d(t,{Z:function(){return em}});var n=r(85893),i=r(86010),s=r(67294),a=r(86501),o=r(5434),l=r(68980),c=r(5152),u=r.n(c),d=r(41664),p=r.n(d),h=r(8193),f=r(48900);let m=(e,t)=>{var r;return null===(r=null==e?void 0:e.find(e=>e.traitType===t))||void 0===r?void 0:r.value},g=(e,t)=>{var r;return null===(r=null==e?void 0:e.find(e=>e.value===t))||void 0===r?void 0:r.value};var y=r(3525),v=r(4595),b=r(93300),w=r(34625);let _=e=>{let{hash:t,children:r}=e;return(0,n.jsx)(p(),{href:"".concat(w.Bq,"/tx/").concat(t),rel:"noreferer noreferrer",target:"_blank",children:r})},x=s.forwardRef(function({title:e,titleId:t,...r},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm.53 5.47a.75.75 0 00-1.06 0l-3 3a.75.75 0 101.06 1.06l1.72-1.72v5.69a.75.75 0 001.5 0v-5.69l1.72 1.72a.75.75 0 101.06-1.06l-3-3z",clipRule:"evenodd"}))}),S=s.forwardRef(function({title:e,titleId:t,...r},n){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm-.53 14.03a.75.75 0 001.06 0l3-3a.75.75 0 10-1.06-1.06l-1.72 1.72V8.25a.75.75 0 00-1.5 0v5.69l-1.72-1.72a.75.75 0 00-1.06 1.06l3 3z",clipRule:"evenodd"}))});var T=r(11281),E=r(29780),C=r(5996);let k=e=>{let{publication:t,onSuccess:r}=e,[i,o]=(0,s.useState)("ILLEGAL"),[c,{loading:u}]=(0,l.jHU)({onError:e=>{var t,r,n;a.ZP.error(null!==(n=null!==(r=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message)&&void 0!==r?r:null==e?void 0:e.message)&&void 0!==n?n:w.c9)},onCompleted:()=>{a.ZP.success("Publication reported successfully."),r()}}),d=e=>"ILLEGAL"===e?"illegalReason":"FRAUD"===e?"fraudReason":"SENSITIVE"===e?"sensitiveReason":"SPAM"===e?"spamReason":"illegalReason",p=()=>{let e=i.split("-")[0],r=i.split("-")[1];c({variables:{request:{publicationId:t.id,reason:{[d(e)]:{reason:e,subreason:r}},additionalComments:"".concat(e," - ").concat(r)}}})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(T.Z,{title:"Report Publication  ".concat(w.iC)}),(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:"p-2 opacity-60",children:[(0,n.jsx)("h1",{children:t.metadata.name}),(0,n.jsxs)("span",{className:"pl-2 text-sm",children:["by ",t.profile.id]})]}),(0,n.jsxs)("div",{className:"mt-4",children:[(0,n.jsx)("label",{className:"block text-xs font-semibold uppercase opacity-70",htmlFor:"report",children:"Reason"}),(0,n.jsx)("div",{className:"mt-1",children:(0,n.jsxs)("select",{className:"text-md cursor-pointer rounded border-2 border-gray-200 p-2 capitalize outline-none lg:p-4",children:[C.F5.map(e=>(0,n.jsx)("option",{className:"text-md bg-white p-2 capitalize text-gray-700 outline-none hover:bg-slate-300",value:e.name,children:e.name},e.name)),";"]})}),(0,n.jsx)("div",{className:"mb-1 mt-4 flex justify-end",children:(0,n.jsx)(E.z,{loading:u,onClick:()=>p(),children:"Report"})})]})]})})]})};var R=r(64208),P=r(11761);let D=e=>{let{showReport:t,setShowReport:r,publication:i}=e;return(0,n.jsx)(R.u,{title:"Report Publication",onClose:()=>r(!1),show:t,children:(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)(P.Z,{children:(0,n.jsx)("div",{className:"mt-2 block ",children:(0,n.jsx)(k,{publication:i,onSuccess:()=>r(!t)})})})})})},A=u()(()=>Promise.resolve().then(r.bind(r,44061)),{loadableGenerated:{webpack:()=>[44061]}}),N=u()(()=>r.e(4746).then(r.bind(r,64746)),{loadableGenerated:{webpack:()=>[64746]}}),L=e=>{var t,r,a,o,c,u;let{comment:d}=e,[w,T]=(0,s.useState)(!1),[E,C]=(0,s.useState)(!1),[k,R]=(0,s.useState)(!1),[P,L]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{var e;(null==d?void 0:null===(e=d.metadata)||void 0===e?void 0:e.content.trim().length)>500&&(T(!0),C(!0))},[null==d?void 0:null===(t=d.metadata)||void 0===t?void 0:t.content]),(0,n.jsxs)("div",{className:"mb-5 flex items-start justify-between",onMouseEnter:()=>L(!0),onMouseLeave:()=>L(!1),children:[(0,n.jsxs)("div",{className:"flex items-start justify-between",children:[(0,n.jsx)(p(),{href:"/u/".concat(null===(r=d.profile)||void 0===r?void 0:r.id),className:"mr-3 mt-0.5 flex-none",children:(0,n.jsx)("img",{src:(0,y.Z)(d.profile,"avatar"),className:"h-10 w-10 rounded-full",draggable:!1,alt:null===(a=d.profile)||void 0===a?void 0:a.handle})}),(0,n.jsxs)("div",{className:"mr-2 flex flex-col items-start",children:[(0,n.jsxs)("span",{className:"mb-1 flex items-center space-x-1",children:[(0,n.jsx)(p(),{href:"/u/".concat(null===(o=d.profile)||void 0===o?void 0:o.id),className:"flex items-center space-x-1 text-base font-bold",children:(0,n.jsx)("span",{children:null==d?void 0:null===(c=d.profile)||void 0===c?void 0:c.name})}),g(null==d?void 0:d.metadata.attributes,"tip")&&(0,n.jsx)(b.u,{placement:"top",content:"Tipper",children:(0,n.jsx)("span",{children:(0,n.jsx)(_,{hash:m(null==d?void 0:d.metadata.attributes,"hash")||"",children:(0,n.jsx)(h.M_L,{className:"text-sm text-pink-500"})})})})]}),(0,n.jsx)("div",{className:(0,i.Z)("text-base opacity-80",w?"line-clamp-2":""),children:(null==d?void 0:d.hidden)?(0,n.jsx)("span",{className:"text-xs italic opacity-80",children:"Comment deleted by user!"}):d.metadata.mainContentFocus===l.D2x.Video?(0,n.jsx)(I,{comment:d}):(0,n.jsx)(v.Z,{content:null==d?void 0:null===(u=d.metadata)||void 0===u?void 0:u.content})}),E&&(0,n.jsx)("div",{className:"mt-3 inline-flex",children:(0,n.jsx)("button",{type:"button",onClick:()=>T(!w),className:"mt-2 flex items-center text-xs opacity-80 outline-none hover:opacity-100",children:w?(0,n.jsxs)(n.Fragment,{children:["Show more ",(0,n.jsx)(x,{className:"ml-1 h-3 w-3"})]}):(0,n.jsxs)(n.Fragment,{children:["Show less ",(0,n.jsx)(S,{className:"ml-1 h-3 w-3"})]})})}),(0,n.jsx)("span",{className:"text-xs opacity-50",children:(0,f.Z)(d.createdAt)})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(D,{publication:d,showReport:k,setShowReport:R}),(0,n.jsx)(A,{video:d,setShowReport:R}),!d.hidden&&(0,n.jsx)("div",{className:"",children:(0,n.jsx)(N,{publication:d,isVertical:!0})})]})]})},O=e=>{let{comment:t}=e,[r,i]=(0,s.useState)(!1);return(0,n.jsx)(L,{comment:t},"".concat(null==t?void 0:t.id,"_").concat(t.createdAt))};var I=O,M=r(819),j=r(11163),F=r.n(j),$=r(23286),B=r(92882),U=r(55225),q=r(40377),z=r(21192),V=r(29350);/*! Fast Average Color |  2022 Denis Seleznev | MIT License | https://github.com/fast-average-color/fast-average-color */function H(e){var t=e.toString(16);return 1===t.length?"0"+t:t}function W(e){return"#"+e.map(H).join("")}function Z(e,t,r){for(var n=0;n<r.length;n++)if(function(e,t,r){switch(r.length){case 3:if(255!==e[t+3]||e[t]===r[0]&&e[t+1]===r[1]&&e[t+2]===r[2])return!0;break;case 4:if(e[t+3]&&r[3]?e[t]===r[0]&&e[t+1]===r[1]&&e[t+2]===r[2]&&e[t+3]===r[3]:e[t+3]===r[3])return!0;break;case 5:if(function(e,t,r){var n=r[0],i=r[1],s=r[2],a=r[3],o=r[4],l=e[t+3],c=K(l,a,o);return a?!!(!l&&c||K(e[t],n,o)&&K(e[t+1],i,o)&&K(e[t+2],s,o)&&c):c}(e,t,r))return!0;break;default:return!1}}(e,t,r[n]))return!0;return!1}function K(e,t,r){return e>=t-r&&e<=t+r}function G(e,t,r){for(var n={},i=r.ignoredColor,s=r.step,a=[0,0,0,0,0],o=0;o<t;o+=s){var l=e[o],c=e[o+1],u=e[o+2],d=e[o+3];if(!(i&&Z(e,o,i))){var p=Math.round(l/24)+","+Math.round(c/24)+","+Math.round(u/24);n[p]?n[p]=[n[p][0]+l*d,n[p][1]+c*d,n[p][2]+u*d,n[p][3]+d,n[p][4]+1]:n[p]=[l*d,c*d,u*d,d,1],a[4]<n[p][4]&&(a=n[p])}}var h=a[0],f=a[1],m=a[2],g=a[3],y=a[4];return g?[Math.round(h/g),Math.round(f/g),Math.round(m/g),Math.round(g/y)]:r.defaultColor}function Y(e,t,r){for(var n=0,i=0,s=0,a=0,o=0,l=r.ignoredColor,c=r.step,u=0;u<t;u+=c){var d=e[u+3],p=e[u]*d,h=e[u+1]*d,f=e[u+2]*d;!(l&&Z(e,u,l))&&(n+=p,i+=h,s+=f,a+=d,o++)}return a?[Math.round(n/a),Math.round(i/a),Math.round(s/a),Math.round(a/o)]:r.defaultColor}function J(e,t,r){for(var n=0,i=0,s=0,a=0,o=0,l=r.ignoredColor,c=r.step,u=0;u<t;u+=c){var d=e[u],p=e[u+1],h=e[u+2],f=e[u+3];!(l&&Z(e,u,l))&&(n+=d*d*f,i+=p*p*f,s+=h*h*f,a+=f,o++)}return a?[Math.round(Math.sqrt(n/a)),Math.round(Math.sqrt(i/a)),Math.round(Math.sqrt(s/a)),Math.round(a/o)]:r.defaultColor}function Q(e){return X(e,"defaultColor",[0,0,0,0])}function X(e,t,r){return void 0===e[t]?r:e[t]}function ee(e){return"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement?"canvas":er&&e instanceof OffscreenCanvas?"offscreencanvas":"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?"imagebitmap":e.src}function et(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement}var er="undefined"!=typeof OffscreenCanvas,en="undefined"==typeof window;function ei(e){return Error("FastAverageColor: "+e)}function es(e,t){t||console.error(e)}var ea=function(){function e(){this.canvas=null,this.ctx=null}return e.prototype.getColorAsync=function(e,t){if(!e)return Promise.reject(ei("call .getColorAsync() without resource."));if("string"==typeof e){if("undefined"==typeof Image)return Promise.reject(ei("resource as string is not supported in this environment"));var r=new Image;return r.crossOrigin=t&&t.crossOrigin||"",r.src=e,this.bindImageEvents(r,t)}if(et(e)&&!e.complete)return this.bindImageEvents(e,t);var n=this.getColor(e,t);return n.error?Promise.reject(n.error):Promise.resolve(n)},e.prototype.getColor=function(e,t){var r,n,i,s,a,o,l,c,u=Q(t=t||{});if(!e){var d=ei("call .getColor(null) without resource");return es(d,t.silent),this.prepareResult(u,d)}var p=(r=function(e){if(et(e)){var t=e.naturalWidth,r=e.naturalHeight;return e.naturalWidth||-1===e.src.search(/\.svg(\?|$)/i)||(t=r=100),{width:t,height:r}}return"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:{width:e.width,height:e.height}}(e),i=X(n=t,"left",0),s=X(n,"top",0),a=X(n,"width",r.width),o=X(n,"height",r.height),l=a,c=o,"precision"===n.mode||(a>o?c=Math.round((l=100)/(a/o)):l=Math.round((c=100)/(o/a)),(l>a||c>o||l<10||c<10)&&(l=a,c=o)),{srcLeft:i,srcTop:s,srcWidth:a,srcHeight:o,destWidth:l,destHeight:c});if(!p.srcWidth||!p.srcHeight||!p.destWidth||!p.destHeight){var d=ei('incorrect sizes for resource "'.concat(ee(e),'"'));return es(d,t.silent),this.prepareResult(u,d)}if(!this.canvas&&(this.canvas=en?er?new OffscreenCanvas(1,1):null:document.createElement("canvas"),!this.canvas)){var d=ei("OffscreenCanvas is not supported in this browser");return es(d,t.silent),this.prepareResult(u,d)}if(!this.ctx){if(this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),!this.ctx){var d=ei("Canvas Context 2D is not supported in this browser");return es(d,t.silent),this.prepareResult(u)}this.ctx.imageSmoothingEnabled=!1}this.canvas.width=p.destWidth,this.canvas.height=p.destHeight;try{this.ctx.clearRect(0,0,p.destWidth,p.destHeight),this.ctx.drawImage(e,p.srcLeft,p.srcTop,p.srcWidth,p.srcHeight,0,0,p.destWidth,p.destHeight);var h=this.ctx.getImageData(0,0,p.destWidth,p.destHeight).data;return this.prepareResult(this.getColorFromArray4(h,t))}catch(f){var d=ei("security error (CORS) for resource ".concat(ee(e),".\nDetails: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image"));return es(d,t.silent),t.silent||console.error(f),this.prepareResult(u,d)}},e.prototype.getColorFromArray4=function(e,t){t=t||{};var r,n,i=e.length,s=Q(t);if(i<4)return s;var a=4*(t.step||1);switch(t.algorithm||"sqrt"){case"simple":r=Y;break;case"sqrt":r=J;break;case"dominant":r=G;break;default:throw ei("".concat(t.algorithm," is unknown algorithm"))}return r(e,i-i%4,{defaultColor:s,ignoredColor:(n=t.ignoredColor)?Array.isArray(n[0])?n:[n]:[],step:a})},e.prototype.prepareResult=function(e,t){var r=e.slice(0,3),n=[e[0],e[1],e[2],e[3]/255],i=(299*e[0]+587*e[1]+114*e[2])/1e3<128;return{value:[e[0],e[1],e[2],e[3]],rgb:"rgb("+r.join(",")+")",rgba:"rgba("+n.join(",")+")",hex:W(r),hexa:W(e),isDark:i,isLight:!i,error:t}},e.prototype.destroy=function(){this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.ctx=null},e.prototype.bindImageEvents=function(e,t){var r=this;return new Promise(function(n,i){var s=function(){l();var s=r.getColor(e,t);s.error?i(s.error):n(s)},a=function(){l(),i(ei('Error loading image "'.concat(e.src,'".')))},o=function(){l(),i(ei('Image "'.concat(e.src,'" loading aborted')))},l=function(){e.removeEventListener("load",s),e.removeEventListener("error",a),e.removeEventListener("abort",o)};e.addEventListener("load",s),e.addEventListener("error",a),e.addEventListener("abort",o)})},e}();let eo=new ea,el=(e,t)=>{let[r,n]=(0,s.useState)(""),i=(0,s.useCallback)(async()=>{if(t)return eo.getColorAsync(e).then(e=>{n(e.hex)})},[e,t]);return(0,s.useEffect)(()=>{i()},[i]),{color:r}};var ec=r(38385);let eu=e=>(0,n.jsx)("svg",{...e,viewBox:"0 0 16 8",fill:"white",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.51192 0.430558C7.79279 0.189814 8.20724 0.189814 8.48811 0.430558L15.4881 6.43056C15.8026 6.70012 15.839 7.1736 15.5695 7.48809C15.2999 7.80259 14.8264 7.83901 14.5119 7.56944L8.00001 1.98781L1.48811 7.56944C1.17361 7.83901 0.700138 7.80259 0.430571 7.48809C0.161005 7.1736 0.197426 6.70012 0.51192 6.43056L7.51192 0.430558Z",fill:"white"})}),ed=e=>(0,n.jsx)("svg",{...e,viewBox:"0 0 16 8",fill:"white",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.430571 0.51192C0.700138 0.197426 1.17361 0.161005 1.48811 0.430571L8.00001 6.01221L14.5119 0.430572C14.8264 0.161005 15.2999 0.197426 15.5695 0.511921C15.839 0.826415 15.8026 1.29989 15.4881 1.56946L8.48811 7.56946C8.20724 7.8102 7.79279 7.8102 7.51192 7.56946L0.51192 1.56946C0.197426 1.29989 0.161005 0.826414 0.430571 0.51192Z",fill:"white"})});var ep=r(44061),eh=r(38624);let ef=e=>{var t;let{byte:r,close:a,bytes:l,isShow:c,index:u=0,profile:d}=e,{pathname:p,replace:h,asPath:f}=(0,j.useRouter)(),m=(0,B.qr)(e=>e.setCurrentviewingId),g=(0,B.qr)(e=>e.currentviewingId),y=(0,s.useRef)(),v=(0,s.useRef)(null),[b,w]=(0,s.useState)(!1),[_,x]=(0,s.useState)(r),[S,T]=(0,s.useState)(!1),[E,C]=(0,s.useState)(!1),[k,R]=(0,s.useState)(!1),[P,D]=(0,s.useState)(null==r?void 0:null===(t=r.stats)||void 0===t?void 0:t.totalAmountOfCollects),[A,N]=(0,s.useState)(!1),[L,O]=(0,s.useState)(!1),H=(0,U.Z)((0,$.A)((0,eh.Z)(_.metadata)),"thumbnail_v"),{color:W}=el(H,!0),Z=()=>{var e;if(!y.current){console.log("return xxx");return}y.current.currentTime=0,y.current.volume=1,y.current.autoplay=!0,null===(e=y.current)||void 0===e||e.play().catch(()=>{}),w(!0)};(0,s.useEffect)(()=>Z(),[]),(0,s.useLayoutEffect)(()=>x(r),[r]);let K=e=>{e&&(y.current=e,Z())};(0,B.qr)(e=>e.currentProfile),(0,B.qr)(e=>e.isMute);let G=(0,n.jsx)(z.Z,{refCallback:K,permanentUrl:(0,q.cI)(_),posterUrl:H,ratio:"9to16",publicationId:_.id,options:{isCurrentlyShown:!0,autoPlay:!0,loop:!0,loadingSpinner:!1,muted:!0}}),Y=e=>{let t=document.querySelector("#videoFull"),r=t&&t.querySelectorAll("#videoFull .c-hmIsCl")[0];r&&(r.style.visibility="visible")},J=e=>{let t=l.findIndex(e=>e.id===g);console.log(g,t,e);let r=t>=0?l[t+e]:l[0];if(!r)return;let n=r.id;m(n);let i="/".concat(n);history.pushState({path:i},"",i),x(r),Z()};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(V.Z,{panelClassName:"max-w-full rounded-xl border-0 max-h-full",show:c,autoClose:!0,children:(0,n.jsxs)("div",{className:"flex snap-center border-0 bg-[#F2F6F9] ","data-testid":"byte-video",id:"videoFull",children:[(0,n.jsx)("div",{className:"relative grow border-0 bg-black",children:(0,n.jsxs)("div",{className:"relative mt-0.5 items-center bg-black bg-cover bg-center object-contain",style:{backgroundImage:"url(".concat(H,")")},children:[(0,n.jsx)("div",{className:"absolute z-10 m-3",children:(0,n.jsx)("button",{type:"button",className:" rounded-full bg-slate-600 p-1 focus:outline-none",onClick:()=>F().back(),children:(0,n.jsx)(o.lTq,{className:"h-4 w-4 text-white"})})}),(0,n.jsxs)("div",{className:(0,i.Z)("relative backdrop-brightness-[0.2] "),onMouseEnter:()=>Y(!0),onMouseLeave:()=>Y(!1),children:[(0,n.jsxs)("div",{className:"m-auto flex min-w-[50vh] max-w-[1px] items-center border-0 md:rounded-sm",style:{backgroundColor:W||void 0},children:[(0,n.jsx)("div",{className:"absolute border-0",ref:v,id:_.id}),g===_.id?G:(0,n.jsx)("img",{className:"w-full border-0 object-contain",src:H,alt:"thumbnail",draggable:!1})]}),(0,n.jsx)("div",{className:"absolute bottom-40 right-3 z-40 ",children:(0,n.jsx)(M.Z,{publication:_,publicationId:_,trigger:!0,video:_,inDetail:!0})})]}),(0,n.jsx)("div",{className:"assolute bottom-0.5 left-0 right-0 mt-4 block rounded-b-xl pt-20 ",children:(0,n.jsx)(ec.Z,{video:_,setFollowing:C,profile:d,following:!1})}),(0,n.jsx)("button",{type:"button",className:" bg-gray-300/2 absolute right-5 top-6 inline-flex items-center space-x-2 rounded-full px-2 py-1.5 hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-800",children:(0,n.jsx)(ep.default,{video:_,setShowReport:O})}),(0,n.jsxs)("div",{className:"absolute left-0 top-[calc(50vh-5rem)] z-10 mr-5 flex flex-col justify-center gap-2",children:[(0,n.jsx)("div",{className:"h-[44px] pl-3",children:u>0&&(0,n.jsx)("button",{className:"rounded-full bg-gray-300/20 hover:bg-gray-800 focus:outline-none dark:bg-gray-700 dark:hover:bg-gray-800",onClick:()=>J(-1),children:(0,n.jsx)(eu,{className:"h-5 w-5 p-2"})})}),(0,n.jsx)("div",{className:"h-25 w-25 pl-3",children:(0,n.jsx)("button",{className:"rounded-full bg-gray-300/20 hover:bg-gray-800 focus:outline-none dark:bg-gray-700 dark:hover:bg-gray-800",onClick:()=>J(1),children:(0,n.jsx)(ed,{className:"h-5 w-5 p-2"})})})]})]})}),(0,n.jsx)("div",{className:"flex h-screen w-[30vw] max-w-[544px] flex-shrink-0 flex-col items-stretch p-5",children:(0,n.jsx)(I,{comment:_},_.profile.id)})]})})})};var em=ef},38385:function(e,t,r){"use strict";var n=r(85893),i=r(35740),s=r(3525),a=r(41664),o=r.n(a),l=r(67294),c=r(7960),u=r(92864),d=r(29451),p=r(92882);let h=e=>{let{video:t}=e,r=(0,p.qr)(e=>e.currentProfile),[a,h]=(0,l.useState)(!1),f="Mirror"===t.__typename,m=t.profile;return(0,l.useEffect)(()=>{(null==m?void 0:m.isFollowedByMe)===!0?h(!0):h(!1),r||h(!1)},[null==m?void 0:m.isFollowedByMe]),(0,n.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 z-[10] overflow-auto rounded-b-2xl border-b-2 border-blue-700 bg-blue-500 bg-gradient-to-b from-gray-900 to-transparent px-3 pb-6 pt-3 md:rounded-b-xl",children:[(0,n.jsx)(o(),{href:"/bytes/".concat(null==t?void 0:t.id),children:(0,n.jsx)("div",{className:"pb-2",children:f?(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsxs)("span",{className:"text-xs text-blue-700",children:["Mirror by ",null==t?void 0:t.profile.name]}),(0,n.jsx)("h1",{className:"text-xs text-blue-700",children:t.metadata.name})]}):(0,n.jsx)("h1",{className:"line-clamp-2 font-bold text-white",children:t.metadata.name})})},t.id),(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("div",{className:"min-w-0",children:(0,n.jsxs)(o(),{href:"/u/".concat(null==m?void 0:m.id),className:"flex flex-none cursor-pointer items-center space-x-2",children:[(0,n.jsx)("img",{src:(0,s.Z)(m,"avatar"),className:"h-9 w-9 rounded-full",draggable:!1,alt:null==m?void 0:m.handle}),(0,n.jsxs)("div",{className:"flex min-w-0 flex-col items-start font-bold text-white",children:[(0,n.jsx)("h6",{className:"flex max-w-full items-center space-x-1",children:(0,n.jsx)("span",{className:"truncate",children:(0,d.Z)(null==m?void 0:m.handle)})}),(0,n.jsxs)("span",{className:"inline-flex items-center space-x-1 text-xs",children:[(0,i.u)(null==m?void 0:m.stats.totalFollowers)," Followers"]})]})]})}),(0,n.jsx)("div",{className:"flex items-center space-x-2",children:(0,n.jsx)("div",{className:"flex-shrink-0 pr-3",children:a?(0,n.jsx)(c.Z,{setFollowing:h,profile:m}):(0,n.jsx)(u.Z,{setFollowing:h,profile:m})})})]})]})};t.Z=h},44061:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var n=r(85893),i=r(3166),s=r(34625),a=r(92882),o=r(68980),l=r(67294);let c=l.forwardRef(function({title:e,titleId:t,...r},n){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:n,"aria-labelledby":t},r),e?l.createElement("title",{id:t},e):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v1.5M3 21v-6m0 0l2.77-.693a9 9 0 016.208.682l.108.054a9 9 0 006.086.71l3.114-.732a48.524 48.524 0 01-.005-10.499l-3.11.732a9 9 0 01-6.085-.711l-.108-.054a9 9 0 00-6.208-.682L3 4.5M3 15V4.5"}))});var u=r(86501),d=r(8193),p=r(63750);let h=e=>{var t;let{video:r,setShowReport:h}=e,f=(0,a.qr)(e=>e.currentProfile),[m,g]=(0,l.useState)("ILLEGAL"),[y]=(0,o.Rvf)({update(e){let t=e.identify({id:null==r?void 0:r.id,__typename:"Post"});e.evict({id:t}),e.gc()},onCompleted:()=>{u.ZP.success("Post deleted")}}),v=()=>{confirm("This will hide your post from lens, are you sure want to continue?\n\nNote: This cannot be reverted.")&&y({variables:{request:{publicationId:null==r?void 0:r.id}}})},[b,{loading:w}]=(0,o.jHU)({onError:e=>{var t,r,n;u.ZP.error(null!==(n=null!==(r=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message)&&void 0!==r?r:null==e?void 0:e.message)&&void 0!==n?n:s.c9)},onCompleted:()=>{u.ZP.success("Publication reported successfully."),h(!1)}}),_=e=>"ILLEGAL"===e?"illegalReason":"FRAUD"===e?"fraudReason":"SENSITIVE"===e?"sensitiveReason":"SPAM"===e?"spamReason":"illegalReason",x=()=>{let e=m.split("-")[0],t=m.split("-")[1];b({variables:{request:{publicationId:r.id,reason:{[_(e)]:{reason:e,subreason:t}},additionalComments:"".concat(e," - ").concat(t)}}})};return(0,n.jsx)(i.Z,{trigger:(0,n.jsx)("div",{className:"m-auto p-1",children:(0,n.jsx)(p.evw,{className:"h-3.5 w-3.5"})}),children:(0,n.jsx)("div",{className:"bg-secondary display:absolute mt-0.5 w-36 rounded-lg border border-gray-200 p-1 shadow dark:border-gray-800",children:(0,n.jsxs)("div",{className:"flex flex-col rounded-lg text-sm transition duration-150 ease-in-out",children:[(null==f?void 0:f.id)===(null==r?void 0:null===(t=r.profile)||void 0===t?void 0:t.id)&&(0,n.jsxs)("button",{type:"button",onClick:()=>v(),className:"inline-flex items-center space-x-2 rounded-lg px-3 py-1.5 text-red-500 hover:bg-red-100 dark:hover:bg-red-900",children:[(0,n.jsx)(d.VPh,{className:"text-base"}),(0,n.jsx)("span",{className:"whitespace-nowrap",children:"Delete"})]}),(0,n.jsxs)("button",{type:"button",onClick:()=>x(),className:"inline-flex items-center space-x-2 rounded-lg px-3 py-1.5 text-white hover:bg-gray-100 dark:hover:bg-gray-800",children:[(0,n.jsx)(c,{className:"h-3.5 w-3.5 text-white"}),(0,n.jsx)("span",{className:"whitespace-nowrap text-white",children:"Report"})]})]})})})};var f=h},3166:function(e,t,r){"use strict";var n=r(85893),i=r(24604),s=r(44080),a=r(86010);r(41664),r(67294);let o=e=>{let{trigger:t,children:r,positionClassName:o,position:l="right"}=e;return(0,n.jsxs)(i.v,{as:"div",className:"relative focus:outline-none focus:ring-0 focus-visible:outline-none",children:[(0,n.jsx)(i.v.Button,{as:"div",className:"flex cursor-pointer focus:outline-none focus:ring-0 focus-visible:outline-none",children:t}),(0,n.jsx)(s.u,{enter:"transition duration-200 ease-out",enterFrom:"transform scale-95 opacity-0",enterTo:"transform scale-100 opacity-100",leave:"transition duration-75 ease-out",leaveFrom:"transform scale-100 opacity-100",leaveTo:"transform scale-95 opacity-0",className:(0,a.Z)("absolute z-30 focus:outline-none focus:ring-0 focus-visible:outline-none",{"right-0":"right"===l,"left-0":"left"===l,"bottom-0":"bottom"===l},o),children:(0,n.jsx)(i.v.Items,{static:!0,children:r})})]})};t.Z=o},52576:function(e,t,r){"use strict";r.d(t,{u:function(){return s}});var n=r(85893),i=r(11761);let s=e=>{let{message:t,icon:r,hideCard:s=!1}=e;return(0,n.jsx)(i.Z,{className:s?"border-0 !bg-transparent !shadow-none":"",children:(0,n.jsxs)("div",{className:"grid justify-items-center space-y-2 p-5",children:[(0,n.jsx)("div",{children:r}),(0,n.jsx)("div",{children:t})]})})}},29350:function(e,t,r){"use strict";var n=r(85893),i=r(44080),s=r(92485),a=r(86010),o=r(67294);let l=e=>{let{show:t,onClose:r,children:l,title:c,panelClassName:u,autoClose:d=!0}=e;return(0,n.jsx)(i.u,{appear:!0,show:t,as:o.Fragment,children:(0,n.jsx)(s.V,{as:"div",className:"relative z-20",onClose:()=>r&&!d?null==r?void 0:r():null,children:(0,n.jsx)("div",{className:"fixed inset-0 ",children:(0,n.jsx)("div",{className:"flex h-full min-h-full items-center justify-center text-center",children:(0,n.jsx)(i.u.Child,{as:o.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:(0,n.jsx)(s.V.Panel,{className:(0,a.Z)("bg-secondary h-full w-full transform text-left align-middle shadow-xl transition-all",u),children:l})})})})})})};t.Z=l},40819:function(e,t,r){"use strict";var n=r(85893),i=r(21273),s=r(67294),a=r(86010),o=r(33962),l=r(75012),c=r(34625),u=r(41664),d=r.n(u);let p=e=>{let{type:t="Transaction",txHash:r,reload:u=!1}=e,[p,h]=(0,s.useState)(!1),[f,m]=(0,s.useState)(500),{data:g,loading:y}=(0,i.BS)({variables:{request:{txHash:r}},pollInterval:f,onCompleted:e=>{var t;"TransactionIndexedResult"===e.hasTxHashBeenIndexed.__typename&&(null==e?void 0:null===(t=e.hasTxHashBeenIndexed)||void 0===t?void 0:t.indexed)&&(m(0),u&&location.reload(),setTimeout(()=>{h(!0)},5e3))}});return(0,n.jsx)(d(),{className:(0,a.Z)({hidden:p},"ml-auto text-sm font-medium"),href:"".concat(c.Bq,"/tx/").concat(r),target:"_blank",rel:"noreferrer noopener",children:!y&&((null==g?void 0:g.hasTxHashBeenIndexed.__typename)!=="TransactionIndexedResult"||(null==g?void 0:g.hasTxHashBeenIndexed.indexed))?(0,n.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,n.jsx)(l.Z,{className:"h-5 w-5 text-green-500"}),(0,n.jsx)("div",{className:"text-black dark:text-white",children:"Index Successful"})]}):(0,n.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,n.jsx)(o.$,{size:"xs"}),(0,n.jsxs)("div",{children:[t," Indexing"]})]})})};t.Z=p},10588:function(e,t,r){"use strict";var n=r(34625);let i=e=>{switch(e){case"WMATIC":default:return n.hb;case"WETH":return"0x7ceb23fd6bc0add59e62ac25578270cff1b9f619";case"USDC":return"0x2791bca1f2de4661ed88a30c99a7a9449aa84174";case"DAI":return"0x8f3Cf7ad23Cd3CaDbD9735AFf958023239c6A063";case"NCT":return"0xD838290e877E0188a4A44700463419ED96c16107"}};t.Z=i},2176:function(e,t,r){"use strict";var n=r(6154);let i=async e=>{try{let t=await (0,n.Z)("https://api.coingecko.com/api/v3/simple/token_price/polygon-pos",{method:"GET",params:{contract_addresses:e,vs_currencies:"usd"}});return t.data[e].usd}catch(r){return 0}};t.Z=i},17295:function(e,t,r){"use strict";r.d(t,{rT:function(){return s}});var n=r(34625),i=r(68980);let s=e=>{switch(e){case i.pYo.UnknownCollectModule:return{name:"Unknown Collect",field:"collectModule",helper:"The Unknown Collect Module is unknown and not type supported in the API."};case i.pYo.FeeCollectModule:return{name:"Fee Collect",field:"collectModule",helper:"The Fee Collect Module allows for any follower to collect the associated publication provided they pay a fee set by the poster."};case i.pYo.LimitedFeeCollectModule:return{name:"Limited Fee Collect",field:"collectModule",helper:"The Limited Fee Collect Module allows for any follower to collect the associated publication, provided they pay a fee, up to a specific limit of mints."};case i.pYo.TimedFeeCollectModule:return{name:"Timed Fee Collect",field:"collectModule",helper:"The Timed Fee Collect Module allows for any follower to collect the associated publication, provided they pay a fee, up to a specific time limit. The present whitelisted Timed Fee Collect module only has a 24-hour time limit to reduce gas usage and optimize efficiency."};case i.pYo.LimitedTimedFeeCollectModule:return{name:"Limited Time Fee Collect",field:"collectModule",helper:"The Limited Timed Fee Collect Module allows for any follower to collect the associate publication, provided they pay a fee, up to a specific time limit and mint cap. It is essentially a combination of the Timed Fee Collect Module and the Limited Fee Collect Module."};case i.pYo.FreeCollectModule:return{name:"Free Collect",field:"collectModule",helper:"The Free Collect Module allows any profile to collect the publication this module is attached to."};case i.pYo.RevertCollectModule:return{name:"Revert Collect",field:"collectModule",helper:"The Revert Collect Module causes all collect actions on a given publication to fail, thus making the publication uncollectable."};case i.wKL.FeeFollowModule:return{name:"Fee Follow",field:"followModule",helper:"The Fee Follow Module only allows addresses to follow a given profile, so long as they pay a fee specified by the profile owner. Users can set the currency and amount required to be paid."};case i._9N.FollowerOnlyReferenceModule:return{name:"Follower Only Reference",field:"referenceModule",helper:"The Follower Only Reference Module ensures that only a profile is only allowed to mirror or comment on content."};default:return{name:e,field:"collectModule",helper:"Others"}}};n.Op},52040:function(e,t){"use strict";let r=e=>"".concat("https://asset.lenshareapp.xyz/images","/tokens/").concat(null==e?void 0:e.toLowerCase(),".svg");t.Z=r},9187:function(e,t,r){"use strict";var n=r(86501),i=r(34625);let s=e=>{var t,r,s;n.ZP.error(null!==(s=null!==(r=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message)&&void 0!==r?r:null==e?void 0:e.message)&&void 0!==s?s:i.c9)};t.Z=s},4242:function(e,t,r){"use strict";var n=r(93445);let i=e=>n.splitSignature(e);t.Z=i},80183:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return b}});var n=r(85893),i=r(68980),s=r(9008),a=r.n(s),o=r(11163),l=r(67294),c=r(5276),u=r(30579),d=r(11281),p=r(92882),h=r(34625),f=r(9747),m=r(52576),g=r(2146),y=r(38439);let v=()=>{var e,t,r;let s=(0,o.useRouter)(),v=(0,l.useRef)(null),b=(0,p.qr)(e=>e.currentProfile),w=(0,p.qr)(e=>e.currentviewingId);(0,p.qr)(e=>e.setCurrentviewingId);let[_,x]=(0,l.useState)(),[S,T]=(0,l.useState)(!1),E=(0,p.qr)(e=>e.activeTagFilter),C={sortCriteria:i.CGB.CuratedProfiles,limit:10,noRandomize:!1,sources:[h.AF,h.Ve],publicationTypes:[i.mnY.Post],customFilters:h.ts,metadata:{tags:"all"!==E?{oneOf:[E]}:void 0,mainContentFocus:[i.D2x.Video,i.D2x.Image]}},[k,R]=(0,l.useState)(!1),[P,{data:D,loading:A}]=(0,y.LdB)(),[N,{data:L,loading:O,error:I,fetchMore:M}]=(0,y.h8i)({nextFetchPolicy:"standby",variables:{request:C,reactionRequest:b?{profileId:null==b?void 0:b.id}:null,profileId:null!==(r=null==b?void 0:b.id)&&void 0!==r?r:null},onCompleted:e=>{let{explorePublications:t}=e}});console.log(L);let j=null==L?void 0:null===(e=L.explorePublications)||void 0===e?void 0:e.items,F=null==L?void 0:null===(t=L.explorePublications)||void 0===t?void 0:t.pageInfo,$=null==D?void 0:D.publication,B=async()=>{var e;let t=s.query.id;if(!t)return N();await P({variables:{request:{publicationId:t},reactionRequest:b?{profileId:null==b?void 0:b.id}:null,profileId:null!==(e=null==b?void 0:b.id)&&void 0!==e?e:null},onCompleted:()=>N()})},U=e=>{let t="/".concat(e.id);x(e),history.pushState({path:t},"",t),R(!k)},q=()=>{history.pushState({path:"/"},"","/"),R(!1)},z=(0,l.useCallback)(()=>w&&_&&s.pathname?(0,n.jsx)(g.Z,{byte:_,close:q,isShow:k,bytes:j,index:null==j?void 0:j.findIndex(e=>e.id===w),profile:b}):null,[_,k,w]);(0,l.useEffect)(()=>{s.query.id&&$&&U($)},[D]),(0,l.useEffect)(()=>{s.isReady&&B()},[s.isReady]);let{observe:V}=(0,c.Y)({onEnter:async()=>{await M({variables:{request:{...C,cursor:null==F?void 0:F.next}}})}});return O||A?(0,n.jsx)("div",{className:"grid h-[80vh] place-items-center",children:(0,n.jsx)(f.Z,{})}):I?(0,n.jsx)("div",{className:"grid h-[80vh] place-items-center",children:(0,n.jsx)(m.u,{message:"No bytes found",icon:!0})}):(0,n.jsxs)("div",{className:"border-0",children:[(0,n.jsx)(a(),{children:(0,n.jsx)("meta",{name:"theme-color",content:"#000000"})}),(0,n.jsx)(d.Z,{title:"LensShare"}),z(),(0,n.jsxs)("div",{ref:v,className:"h-screen border-0 md:h-[calc(100vh-70px)]",children:[D&&(0,n.jsx)(u.Z,{setFollowing:T,video:$,onDetail:U,isShow:k},"".concat(null==$?void 0:$.id,"_").concat($.createdAt,"0")),null==j?void 0:j.map((e,t)=>(0,n.jsx)(u.Z,{video:e,onDetail:U,isShow:k,setFollowing:T},"".concat(null==e?void 0:e.id,"_").concat(e.createdAt,"1"))),(null==F?void 0:F.next)&&(0,n.jsx)("span",{ref:V,className:"flex justify-center border-0 p-10",children:(0,n.jsx)(f.Z,{})})]})]})};var b=v},40377:function(e,t,r){"use strict";r.d(t,{cI:function(){return s}});var n=r(34625),i=r(23286);let s=e=>{var t,r;let s=null===(t=null==e?void 0:null===(r=e.metadata)||void 0===r?void 0:r.media[0])||void 0===t?void 0:t.original.url;return s?(0,i.A)(s):"".concat(n.Fv,"/images/fallbackThumbnail.png")}},6528:function(e,t,r){"use strict";var n=r(34625),i=r(23286);let s=(e,t)=>e&&n.XE?t?"".concat(n.XE,"/tr:n-").concat(t,",tr:di-placeholder.webp/").concat((0,i.A)(e)):"".concat(n.XE,"/tr:di-placeholder.webp/").concat((0,i.A)(e)):e;t.Z=s},13250:function(e,t,r){"use strict";var n=r(86501),i=r(50319),s=r(68980);let a=e=>{let{onCompleted:t,update:r}=e,a={notMined:"A previous transaction may not been mined yet or you have passed in a invalid nonce. You must wait for that to be mined before doing another action, please try again in a few moments. Nonce out of sync."},[o,{data:l,loading:c}]=function(e){let t={...e};return i.D(s.VPH,t)}({onCompleted:t,update:r,onError:e=>{e.message===a.notMined&&n.ZP.error(e.message)}});return{broadcast:e=>{let{request:t}=e;return o({variables:{request:t}})},data:l,loading:c}};t.Z=a},44753:function(){},85470:function(){},83300:function(e,t,r){"use strict";var n=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw Error("unable to locate global object")}();e.exports=t=n.fetch,n.fetch&&(t.default=n.fetch.bind(n)),t.Headers=n.Headers,t.Request=n.Request,t.Response=n.Response},23106:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var n=r(85893),i=r(67294),s=r(21443),a=r.n(s),o=r(45697),l=r.n(o);let c=(e,t)=>{let r=new(a())(".plyr-react",t.options||{});return t.source&&(r.source=t.source),r},u=e=>{e&&e.destroy()},d=()=>{},p=e=>e?()=>({plyr:e}):()=>new Proxy({plyr:{source:null}},{get:(e,t)=>"plyr"===t?e[t]:d}),h=i.forwardRef((e,t)=>{let{source:r,options:s=null,...a}=e,o=function(e,t,r=null){return function(e,t,r=[]){let[n,s]=(0,i.useState)(null),a=(0,i.useRef)(null),{instantiate:o,destroy:l,getAPI:c,params:u}=t;(0,i.useEffect)(()=>{let e=o(a.current,u);return s(e),()=>{l&&l(e,u)}},r);let d=(0,i.useMemo)(()=>c(n,u),[n]);return(0,i.useImperativeHandle)(e,d,[d]),a}(e,{instantiate:c,getAPI:p,destroy:u,params:t},r||[t.options,t.source])}(t,{source:r,options:s});return(0,n.jsx)("video",{ref:o,className:"plyr-react plyr",...a})});h.displayName="Plyr",h.defaultProps={options:{controls:["rewind","play","fast-forward","progress","current-time","duration","mute","volume","settings","fullscreen"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop"}},source:{type:"video",sources:[{src:"https://cdn.plyr.io/static/blank.mp4",type:"video/mp4",size:720},{src:"https://cdn.plyr.io/static/blank.mp4",type:"video/mp4",size:1080}]}},h.propTypes={options:l().object,source:l().any}},21443:function(e,t,r){"object"==typeof navigator&&(e.exports=function(){"use strict";function e(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:String(n))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach(function(t){var n,i;n=e,i=r[t],t in n?Object.defineProperty(n,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[t]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var s,a,o,l={addCSS:!0,thumbWidth:15,watch:!0},c=function(e){return null!=e?e.constructor:null},u=function(e,t){return!!(e&&t&&e instanceof t)},d=function(e){return null==e},p=function(e){return c(e)===Object},h=function(e){return c(e)===String},f=function(e){return Array.isArray(e)},m=function(e){return u(e,NodeList)},g={nullOrUndefined:d,object:p,number:function(e){return c(e)===Number&&!Number.isNaN(e)},string:h,boolean:function(e){return c(e)===Boolean},function:function(e){return c(e)===Function},array:f,nodeList:m,element:function(e){return u(e,Element)},event:function(e){return u(e,Event)},empty:function(e){return d(e)||(h(e)||f(e)||m(e))&&!e.length||p(e)&&!Object.keys(e).length}},y=function(){var e,r;function n(e,t){(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,n),g.element(e)?this.element=e:g.string(e)&&(this.element=document.querySelector(e)),g.element(this.element)&&g.empty(this.element.rangeTouch)&&(this.config=i({},l,{},t),this.init())}return e=[{key:"init",value:function(){n.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){n.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,r=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(e){t.element[r](e,function(e){return t.set(e)},!1)})}},{key:"get",value:function(e){if(!n.enabled||!g.event(e))return null;var t,r=e.target,i=e.changedTouches[0],s=parseFloat(r.getAttribute("min"))||0,a=parseFloat(r.getAttribute("max"))||100,o=parseFloat(r.getAttribute("step"))||1,l=r.getBoundingClientRect(),c=100/l.width*(this.config.thumbWidth/2)/100;return 0>(t=100/l.width*(i.clientX-l.left))?t=0:100<t&&(t=100),50>t?t-=(100-2*t)*c:50<t&&(t+=2*(t-50)*c),s+function(e,t){if(1>t){var r,n=(r="".concat(t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(r[1]?r[1].length:0)-(r[2]?+r[2]:0)):0;return parseFloat(e.toFixed(n))}return Math.round(e/t)*t}(t/100*(a-s),o)}},{key:"set",value:function(e){n.enabled&&g.event(e)&&!e.target.disabled&&(e.preventDefault(),e.target.value=this.get(e),function(e,t){if(e&&t){var r=new Event(t,{bubbles:!0});e.dispatchEvent(r)}}(e.target,"touchend"===e.type?"change":"input"))}}],r=[{key:"setup",value:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=null;if(g.empty(e)||g.string(e)?r=Array.from(document.querySelectorAll(g.string(e)?e:'input[type="range"]')):g.element(e)?r=[e]:g.nodeList(e)?r=Array.from(e):g.array(e)&&(r=e.filter(g.element)),g.empty(r))return null;var s=i({},l,{},t);return g.string(e)&&s.watch&&new MutationObserver(function(t){Array.from(t).forEach(function(t){Array.from(t.addedNodes).forEach(function(t){var r;g.element(t)&&(function(){return Array.from(document.querySelectorAll(r)).includes(this)}).call(t,r=e)&&new n(t,s)})})}).observe(document.body,{childList:!0,subtree:!0}),r.map(function(e){return new n(e,t)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}],e&&t(n.prototype,e),r&&t(n,r),n}();let v=e=>null!=e?e.constructor:null,b=(e,t)=>Boolean(e&&t&&e instanceof t),w=e=>null==e,_=e=>v(e)===Object,x=e=>v(e)===String,S=e=>"function"==typeof e,T=e=>Array.isArray(e),E=e=>b(e,NodeList),C=e=>w(e)||(x(e)||T(e)||E(e))&&!e.length||_(e)&&!Object.keys(e).length;var k={nullOrUndefined:w,object:_,number:e=>v(e)===Number&&!Number.isNaN(e),string:x,boolean:e=>v(e)===Boolean,function:S,array:T,weakMap:e=>b(e,WeakMap),nodeList:E,element:e=>null!==e&&"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument,textNode:e=>v(e)===Text,event:e=>b(e,Event),keyboardEvent:e=>b(e,KeyboardEvent),cue:e=>b(e,window.TextTrackCue)||b(e,window.VTTCue),track:e=>b(e,TextTrack)||!w(e)&&x(e.kind),promise:e=>b(e,Promise)&&S(e.then),url:e=>{if(b(e,window.URL))return!0;if(!x(e))return!1;let t=e;e.startsWith("http://")&&e.startsWith("https://")||(t=`http://${e}`);try{return!C(new URL(t).hostname)}catch(r){return!1}},empty:C};let R=(()=>{let e=document.createElement("span"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},r=Object.keys(t).find(t=>void 0!==e.style[t]);return!!k.string(r)&&t[r]})();function P(e,t){setTimeout(()=>{try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(t){}},t)}var D={isIE:Boolean(window.document.documentMode),isEdge:/Edge/g.test(navigator.userAgent),isWebKit:"WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),isIPhone:/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,isIPadOS:"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,isIos:/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1};function A(e,t){return t.split(".").reduce((e,t)=>e&&e[t],e)}function N(e={},...t){if(!t.length)return e;let r=t.shift();return k.object(r)?(Object.keys(r).forEach(t=>{k.object(r[t])?(Object.keys(e).includes(t)||Object.assign(e,{[t]:{}}),N(e[t],r[t])):Object.assign(e,{[t]:r[t]})}),N(e,...t)):e}function L(e,t){let r=e.length?e:[e];Array.from(r).reverse().forEach((e,r)=>{let n=r>0?t.cloneNode(!0):t,i=e.parentNode,s=e.nextSibling;n.appendChild(e),s?i.insertBefore(n,s):i.appendChild(n)})}function O(e,t){k.element(e)&&!k.empty(t)&&Object.entries(t).filter(([,e])=>!k.nullOrUndefined(e)).forEach(([t,r])=>e.setAttribute(t,r))}function I(e,t,r){let n=document.createElement(e);return k.object(t)&&O(n,t),k.string(r)&&(n.innerText=r),n}function M(e,t,r,n){k.element(t)&&t.appendChild(I(e,r,n))}function j(e){k.nodeList(e)||k.array(e)?Array.from(e).forEach(j):k.element(e)&&k.element(e.parentNode)&&e.parentNode.removeChild(e)}function F(e){if(!k.element(e))return;let{length:t}=e.childNodes;for(;t>0;)e.removeChild(e.lastChild),t-=1}function $(e,t){return k.element(t)&&k.element(t.parentNode)&&k.element(e)?(t.parentNode.replaceChild(e,t),e):null}function B(e,t){if(!k.string(e)||k.empty(e))return{};let r={},n=N({},t);return e.split(",").forEach(e=>{let t=e.trim(),i=t.replace(".",""),s=t.replace(/[[\]]/g,"").split("="),[a]=s,o=s.length>1?s[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":k.string(n.class)?r.class=`${n.class} ${i}`:r.class=i;break;case"#":r.id=t.replace("#","");break;case"[":r[a]=o}}),N(n,r)}function U(e,t){if(!k.element(e))return;let r=t;k.boolean(r)||(r=!e.hidden),e.hidden=r}function q(e,t,r){if(k.nodeList(e))return Array.from(e).map(e=>q(e,t,r));if(k.element(e)){let n="toggle";return void 0!==r&&(n=r?"add":"remove"),e.classList[n](t),e.classList.contains(t)}return!1}function z(e,t){return k.element(e)&&e.classList.contains(t)}function V(e,t){let{prototype:r}=Element;return(r.matches||r.webkitMatchesSelector||r.mozMatchesSelector||r.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function H(e){return this.elements.container.querySelectorAll(e)}function W(e){return this.elements.container.querySelector(e)}function Z(e=null,t=!1){k.element(e)&&e.focus({preventScroll:!0,focusVisible:t})}let K={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},G={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(e,t){let r=G[e]||"html5"!==t;return{api:r,ui:r&&G.rangeInput}},pip:!(D.isIPhone||!k.function(I("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||I("video").disablePictureInPicture)),airplay:k.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(e){if(k.empty(e))return!1;let[t]=e.split("/"),r=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(K).includes(r)&&(r+=`; codecs="${K[e]}"`);try{return Boolean(r&&this.media.canPlayType(r).replace(/no/,""))}catch(n){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{let e=document.createElement("input");return e.type="range","range"===e.type})(),touch:"ontouchstart"in document.documentElement,transitions:!1!==R,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},Y=(()=>{let e=!1;try{let t=Object.defineProperty({},"passive",{get:()=>(e=!0,null)});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(r){}return e})();function J(e,t,r,n=!1,i=!0,s=!1){if(!e||!("addEventListener"in e)||k.empty(t)||!k.function(r))return;let a=t.split(" "),o=s;Y&&(o={passive:i,capture:s}),a.forEach(t=>{this&&this.eventListeners&&n&&this.eventListeners.push({element:e,type:t,callback:r,options:o}),e[n?"addEventListener":"removeEventListener"](t,r,o)})}function Q(e,t="",r,n=!0,i=!1){J.call(this,e,t,r,!0,n,i)}function X(e,t="",r,n=!0,i=!1){J.call(this,e,t,r,!1,n,i)}function ee(e,t="",r,n=!0,i=!1){let s=(...a)=>{X(e,t,s,n,i),r.apply(this,a)};J.call(this,e,t,s,!0,n,i)}function et(e,t="",r=!1,n={}){if(!k.element(e)||k.empty(t))return;let i=new CustomEvent(t,{bubbles:r,detail:{...n,plyr:this}});e.dispatchEvent(i)}function er(){this&&this.eventListeners&&(this.eventListeners.forEach(e=>{let{element:t,type:r,callback:n,options:i}=e;t.removeEventListener(r,n,i)}),this.eventListeners=[])}function en(){return new Promise(e=>this.ready?setTimeout(e,0):Q.call(this,this.elements.container,"ready",e)).then(()=>{})}function ei(e){k.promise(e)&&e.then(null,()=>{})}function es(e){return k.array(e)?e.filter((t,r)=>e.indexOf(t)===r):e}function ea(e,t){return k.array(e)&&e.length?e.reduce((e,r)=>Math.abs(r-t)<Math.abs(e-t)?r:e):null}function eo(e){return!(!window||!window.CSS)&&window.CSS.supports(e)}let el=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((e,[t,r])=>({...e,[t/r]:[t,r]}),{});function ec(e){return!!(k.array(e)||k.string(e)&&e.includes(":"))&&(k.array(e)?e:e.split(":")).map(Number).every(k.number)}function eu(e){if(!k.array(e)||!e.every(k.number))return null;let[t,r]=e,n=(e,t)=>0===t?e:n(t,e%t),i=n(t,r);return[t/i,r/i]}function ed(e){let t=e=>ec(e)?e.split(":").map(Number):null,r=t(e);if(null===r&&(r=t(this.config.ratio)),null===r&&!k.empty(this.embed)&&k.array(this.embed.ratio)&&({ratio:r}=this.embed),null===r&&this.isHTML5){let{videoWidth:n,videoHeight:i}=this.media;r=[n,i]}return eu(r)}function ep(e){if(!this.isVideo)return{};let{wrapper:t}=this.elements,r=ed.call(this,e);if(!k.array(r))return{};let[n,i]=eu(r),s=100/n*i;if(eo(`aspect-ratio: ${n}/${i}`)?t.style.aspectRatio=`${n}/${i}`:t.style.paddingBottom=`${s}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){let a=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10);this.fullscreen.active?t.style.paddingBottom=null:this.media.style.transform=`translateY(-${(a-s)/(a/50)}%)`}else this.isHTML5&&t.classList.add(this.config.classNames.videoFixedRatio);return{padding:s,ratio:r}}function eh(e,t,r=.05){let n=e/t,i=ea(Object.keys(el),n);return Math.abs(i-n)<=r?el[i]:[e,t]}let ef={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(e=>{let t=e.getAttribute("type");return!!k.empty(t)||G.mime.call(this,t)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:ef.getSources.call(this).map(e=>Number(e.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;let e=this;e.options.speed=e.config.speed.options,k.empty(this.config.ratio)||ep.call(e),Object.defineProperty(e.media,"quality",{get(){let t=ef.getSources.call(e).find(t=>t.getAttribute("src")===e.source);return t&&Number(t.getAttribute("size"))},set(t){if(e.quality!==t){if(e.config.quality.forced&&k.function(e.config.quality.onChange))e.config.quality.onChange(t);else{let r=ef.getSources.call(e).find(e=>Number(e.getAttribute("size"))===t);if(!r)return;let{currentTime:n,paused:i,preload:s,readyState:a,playbackRate:o}=e.media;e.media.src=r.getAttribute("src"),("none"!==s||a)&&(e.once("loadedmetadata",()=>{e.speed=o,e.currentTime=n,i||ei(e.play())}),e.media.load())}et.call(e,e.media,"qualitychange",!1,{quality:t})}}})},cancelRequests(){this.isHTML5&&(j(ef.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function em(e,...t){return k.empty(e)?e:e.toString().replace(/{(\d+)}/g,(e,r)=>t[r].toString())}let eg=(e="",t="",r="")=>e.replace(RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),r.toString()),ey=(e="")=>e.toString().replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());function ev(e){let t=document.createElement("div");return t.appendChild(e),t.innerHTML}let eb={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},ew={get(e="",t={}){if(k.empty(e)||k.empty(t))return"";let r=A(t.i18n,e);if(k.empty(r))return Object.keys(eb).includes(e)?eb[e]:"";let n={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(n).forEach(([e,t])=>{r=eg(r,e,t)}),r}};class e_{constructor(t){e(this,"get",e=>{if(!e_.supported||!this.enabled)return null;let t=window.localStorage.getItem(this.key);if(k.empty(t))return null;let r=JSON.parse(t);return k.string(e)&&e.length?r[e]:r}),e(this,"set",e=>{if(!e_.supported||!this.enabled||!k.object(e))return;let t=this.get();k.empty(t)&&(t={}),N(t,e);try{window.localStorage.setItem(this.key,JSON.stringify(t))}catch(r){}}),this.enabled=t.config.storage.enabled,this.key=t.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;let e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(t){return!1}}}function ex(e,t="text"){return new Promise((r,n)=>{try{let i=new XMLHttpRequest;if(!("withCredentials"in i))return;i.addEventListener("load",()=>{if("text"===t)try{r(JSON.parse(i.responseText))}catch(e){r(i.responseText)}else r(i.response)}),i.addEventListener("error",()=>{throw Error(i.status)}),i.open("GET",e,!0),i.responseType=t,i.send()}catch(s){n(s)}})}function eS(e,t){if(!k.string(e))return;let r="cache",n=k.string(t),i=()=>null!==document.getElementById(t),s=(e,t)=>{e.innerHTML=t,n&&i()||document.body.insertAdjacentElement("afterbegin",e)};if(!n||!i()){let a=e_.supported,o=document.createElement("div");if(o.setAttribute("hidden",""),n&&o.setAttribute("id",t),a){let l=window.localStorage.getItem(`${r}-${t}`);if(null!==l){let c=JSON.parse(l);s(o,c.content)}}ex(e).then(e=>{if(!k.empty(e)){if(a)try{window.localStorage.setItem(`${r}-${t}`,JSON.stringify({content:e}))}catch(n){}s(o,e)}}).catch(()=>{})}}let eT=e=>Math.trunc(e/60/60%60,10),eE=e=>Math.trunc(e/60%60,10),eC=e=>Math.trunc(e%60,10);function ek(e=0,t=!1,r=!1){if(!k.number(e))return ek(void 0,t,r);let n=e=>`0${e}`.slice(-2),i=eT(e),s=eE(e),a=eC(e);return`${r&&e>0?"-":""}${i=t||i>0?`${i}:`:""}${n(s)}:${n(a)}`}let eR={getIconUrl(){let e=new URL(this.config.iconUrl,window.location),t=window.location.host?window.location.host:window.top.location.host,r=e.host!==t||D.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:r}},findElements(){try{return this.elements.controls=W.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:H.call(this,this.config.selectors.buttons.play),pause:W.call(this,this.config.selectors.buttons.pause),restart:W.call(this,this.config.selectors.buttons.restart),rewind:W.call(this,this.config.selectors.buttons.rewind),fastForward:W.call(this,this.config.selectors.buttons.fastForward),mute:W.call(this,this.config.selectors.buttons.mute),pip:W.call(this,this.config.selectors.buttons.pip),airplay:W.call(this,this.config.selectors.buttons.airplay),settings:W.call(this,this.config.selectors.buttons.settings),captions:W.call(this,this.config.selectors.buttons.captions),fullscreen:W.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=W.call(this,this.config.selectors.progress),this.elements.inputs={seek:W.call(this,this.config.selectors.inputs.seek),volume:W.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:W.call(this,this.config.selectors.display.buffer),currentTime:W.call(this,this.config.selectors.display.currentTime),duration:W.call(this,this.config.selectors.display.duration)},k.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon(e,t){let r="http://www.w3.org/2000/svg",n=eR.getIconUrl.call(this),i=`${n.cors?"":n.url}#${this.config.iconPrefix}`,s=document.createElementNS(r,"svg");O(s,N(t,{"aria-hidden":"true",focusable:"false"}));let a=document.createElementNS(r,"use"),o=`${i}-${e}`;return"href"in a&&a.setAttributeNS("http://www.w3.org/1999/xlink","href",o),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),s.appendChild(a),s},createLabel(e,t={}){let r=ew.get(e,this.config);return I("span",{...t,class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")},r)},createBadge(e){if(k.empty(e))return null;let t=I("span",{class:this.config.classNames.menu.value});return t.appendChild(I("span",{class:this.config.classNames.menu.badge},e)),t},createButton(e,t){let r=N({},t),n=function(e=""){let t=e.toString();return(t=function(e=""){let t=e.toString();return t=eg(t,"-"," "),t=ey(t=eg(t,"_"," ")),eg(t," ","")}(t)).charAt(0).toLowerCase()+t.slice(1)}(e),i={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(e=>{Object.keys(r).includes(e)&&(i[e]=r[e],delete r[e])}),"button"!==i.element||Object.keys(r).includes("type")||(r.type="button"),Object.keys(r).includes("class")?r.class.split(" ").some(e=>e===this.config.classNames.control)||N(r,{class:`${r.class} ${this.config.classNames.control}`}):r.class=this.config.classNames.control,e){case"play":i.toggle=!0,i.label="play",i.labelPressed="pause",i.icon="play",i.iconPressed="pause";break;case"mute":i.toggle=!0,i.label="mute",i.labelPressed="unmute",i.icon="volume",i.iconPressed="muted";break;case"captions":i.toggle=!0,i.label="enableCaptions",i.labelPressed="disableCaptions",i.icon="captions-off",i.iconPressed="captions-on";break;case"fullscreen":i.toggle=!0,i.label="enterFullscreen",i.labelPressed="exitFullscreen",i.icon="enter-fullscreen",i.iconPressed="exit-fullscreen";break;case"play-large":r.class+=` ${this.config.classNames.control}--overlaid`,n="play",i.label="play",i.icon="play";break;default:k.empty(i.label)&&(i.label=n),k.empty(i.icon)&&(i.icon=e)}let s=I(i.element);return i.toggle?(s.appendChild(eR.createIcon.call(this,i.iconPressed,{class:"icon--pressed"})),s.appendChild(eR.createIcon.call(this,i.icon,{class:"icon--not-pressed"})),s.appendChild(eR.createLabel.call(this,i.labelPressed,{class:"label--pressed"})),s.appendChild(eR.createLabel.call(this,i.label,{class:"label--not-pressed"}))):(s.appendChild(eR.createIcon.call(this,i.icon)),s.appendChild(eR.createLabel.call(this,i.label))),N(r,B(this.config.selectors.buttons[n],r)),O(s,r),"play"===n?(k.array(this.elements.buttons[n])||(this.elements.buttons[n]=[]),this.elements.buttons[n].push(s)):this.elements.buttons[n]=s,s},createRange(e,t){let r=I("input",N(B(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":ew.get(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=r,eR.updateRangeFill.call(this,r),y.setup(r),r},createProgress(e,t){let r=I("progress",N(B(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if("volume"!==e){r.appendChild(I("span",null,"0"));let n={played:"played",buffer:"buffered"}[e],i=n?ew.get(n,this.config):"";r.innerText=`% ${i.toLowerCase()}`}return this.elements.display[e]=r,r},createTime(e,t){let r=B(this.config.selectors.display[e],t),n=I("div",N(r,{class:`${r.class?r.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":ew.get(e,this.config),role:"timer"}),"00:00");return this.elements.display[e]=n,n},bindMenuItemShortcuts(e,t){Q.call(this,e,"keydown keyup",r=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(r.key)||(r.preventDefault(),r.stopPropagation(),"keydown"===r.type))return;let n=V(e,'[role="menuitemradio"]');if(!n&&[" ","ArrowRight"].includes(r.key))eR.showMenuPanel.call(this,t,!0);else{let i;" "!==r.key&&("ArrowDown"===r.key||n&&"ArrowRight"===r.key?(i=e.nextElementSibling,k.element(i)||(i=e.parentNode.firstElementChild)):(i=e.previousElementSibling,k.element(i)||(i=e.parentNode.lastElementChild)),Z.call(this,i,!0))}},!1),Q.call(this,e,"keyup",e=>{"Return"===e.key&&eR.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:e,list:t,type:r,title:n,badge:i=null,checked:s=!1}){let a=B(this.config.selectors.inputs[r]),o=I("button",N(a,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${a.class?a.class:""}`.trim(),"aria-checked":s,value:e})),l=I("span");l.innerHTML=n,k.element(i)&&l.appendChild(i),o.appendChild(l),Object.defineProperty(o,"checked",{enumerable:!0,get:()=>"true"===o.getAttribute("aria-checked"),set(e){e&&Array.from(o.parentNode.children).filter(e=>V(e,'[role="menuitemradio"]')).forEach(e=>e.setAttribute("aria-checked","false")),o.setAttribute("aria-checked",e?"true":"false")}}),this.listeners.bind(o,"click keyup",t=>{if(!k.keyboardEvent(t)||" "===t.key){switch(t.preventDefault(),t.stopPropagation(),o.checked=!0,r){case"language":this.currentTrack=Number(e);break;case"quality":this.quality=e;break;case"speed":this.speed=parseFloat(e)}eR.showMenuPanel.call(this,"home",k.keyboardEvent(t))}},r,!1),eR.bindMenuItemShortcuts.call(this,o,r),t.appendChild(o)},formatTime(e=0,t=!1){return k.number(e)?ek(e,eT(this.duration)>0,t):e},updateTimeDisplay(e=null,t=0,r=!1){k.element(e)&&k.number(t)&&(e.innerText=eR.formatTime(t,r))},updateVolume(){this.supported.ui&&(k.element(this.elements.inputs.volume)&&eR.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),k.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange(e,t=0){k.element(e)&&(e.value=t,eR.updateRangeFill.call(this,e))},updateProgress(e){var t,r;if(!this.supported.ui||!k.event(e))return;let n=0;if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":t=this.currentTime,r=this.duration,n=0===t||0===r||Number.isNaN(t)||Number.isNaN(r)?0:(t/r*100).toFixed(2),"timeupdate"===e.type&&eR.setRange.call(this,this.elements.inputs.seek,n);break;case"playing":case"progress":((e,t)=>{let r=k.number(t)?t:0,n=k.element(e)?e:this.elements.display.buffer;if(k.element(n)){n.value=r;let i=n.getElementsByTagName("span")[0];k.element(i)&&(i.childNodes[0].nodeValue=r)}})(this.elements.display.buffer,100*this.buffered)}},updateRangeFill(e){let t=k.event(e)?e.target:e;if(k.element(t)&&"range"===t.getAttribute("type")){if(V(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);let r=eR.formatTime(this.currentTime),n=eR.formatTime(this.duration),i=ew.get("seekLabel",this.config);t.setAttribute("aria-valuetext",i.replace("{currentTime}",r).replace("{duration}",n))}else if(V(t,this.config.selectors.inputs.volume)){let s=100*t.value;t.setAttribute("aria-valuenow",s),t.setAttribute("aria-valuetext",`${s.toFixed(1)}%`)}else t.setAttribute("aria-valuenow",t.value);(D.isWebKit||D.isIPadOS)&&t.style.setProperty("--value",t.value/t.max*100+"%")}},updateSeekTooltip(e){var t,r;if(!this.config.tooltips.seek||!k.element(this.elements.inputs.seek)||!k.element(this.elements.display.seekTooltip)||0===this.duration)return;let n=this.elements.display.seekTooltip,i=`${this.config.classNames.tooltip}--visible`,s=e=>q(n,i,e);if(this.touch)return void s(!1);let a=0,o=this.elements.progress.getBoundingClientRect();if(k.event(e))a=100/o.width*(e.pageX-o.left);else{if(!z(n,i))return;a=parseFloat(n.style.left,10)}a<0?a=0:a>100&&(a=100);let l=this.duration/100*a;n.innerText=eR.formatTime(l);let c=null===(t=this.config.markers)||void 0===t||null===(r=t.points)||void 0===r?void 0:r.find(({time:e})=>e===Math.round(l));c&&n.insertAdjacentHTML("afterbegin",`${c.label}<br>`),n.style.left=`${a}%`,k.event(e)&&["mouseenter","mouseleave"].includes(e.type)&&s("mouseenter"===e.type)},timeUpdate(e){let t=!k.element(this.elements.display.duration)&&this.config.invertTime;eR.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||eR.updateProgress.call(this,e)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=4294967296)return U(this.elements.display.currentTime,!0),void U(this.elements.progress,!0);k.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);let e=k.element(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&eR.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&eR.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&eR.setMarkers.call(this),eR.updateSeekTooltip.call(this)},toggleMenuButton(e,t){U(this.elements.settings.buttons[e],!t)},updateSetting(e,t,r){let n=this.elements.settings.panels[e],i=null,s=t;if("captions"===e)i=this.currentTrack;else{if(i=k.empty(r)?this[e]:r,k.empty(i)&&(i=this.config[e].default),!k.empty(this.options[e])&&!this.options[e].includes(i))return void this.debug.warn(`Unsupported value of '${i}' for ${e}`);if(!this.config[e].options.includes(i))return void this.debug.warn(`Disabled value of '${i}' for ${e}`)}if(k.element(s)||(s=n&&n.querySelector('[role="menu"]')),!k.element(s))return;this.elements.settings.buttons[e].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=eR.getLabel.call(this,e,i);let a=s&&s.querySelector(`[value="${i}"]`);k.element(a)&&(a.checked=!0)},getLabel(e,t){switch(e){case"speed":return 1===t?ew.get("normal",this.config):`${t}&times;`;case"quality":if(k.number(t)){let r=ew.get(`qualityLabel.${t}`,this.config);return r.length?r:`${t}p`}return ey(t);case"captions":return eA.getLabel.call(this);default:return null}},setQualityMenu(e){if(!k.element(this.elements.settings.panels.quality))return;let t="quality",r=this.elements.settings.panels.quality.querySelector('[role="menu"]');k.array(e)&&(this.options.quality=es(e).filter(e=>this.config.quality.options.includes(e)));let n=!k.empty(this.options.quality)&&this.options.quality.length>1;if(eR.toggleMenuButton.call(this,t,n),F(r),eR.checkMenu.call(this),!n)return;let i=e=>{let t=ew.get(`qualityBadge.${e}`,this.config);return t.length?eR.createBadge.call(this,t):null};this.options.quality.sort((e,t)=>{let r=this.config.quality.options;return r.indexOf(e)>r.indexOf(t)?1:-1}).forEach(e=>{eR.createMenuItem.call(this,{value:e,list:r,type:t,title:eR.getLabel.call(this,"quality",e),badge:i(e)})}),eR.updateSetting.call(this,t,r)},setCaptionsMenu(){if(!k.element(this.elements.settings.panels.captions))return;let e="captions",t=this.elements.settings.panels.captions.querySelector('[role="menu"]'),r=eA.getTracks.call(this),n=Boolean(r.length);if(eR.toggleMenuButton.call(this,e,n),F(t),eR.checkMenu.call(this),!n)return;let i=r.map((e,r)=>({value:r,checked:this.captions.toggled&&this.currentTrack===r,title:eA.getLabel.call(this,e),badge:e.language&&eR.createBadge.call(this,e.language.toUpperCase()),list:t,type:"language"}));i.unshift({value:-1,checked:!this.captions.toggled,title:ew.get("disabled",this.config),list:t,type:"language"}),i.forEach(eR.createMenuItem.bind(this)),eR.updateSetting.call(this,e,t)},setSpeedMenu(){if(!k.element(this.elements.settings.panels.speed))return;let e="speed",t=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(e=>e>=this.minimumSpeed&&e<=this.maximumSpeed);let r=!k.empty(this.options.speed)&&this.options.speed.length>1;eR.toggleMenuButton.call(this,e,r),F(t),eR.checkMenu.call(this),r&&(this.options.speed.forEach(r=>{eR.createMenuItem.call(this,{value:r,list:t,type:e,title:eR.getLabel.call(this,"speed",r)})}),eR.updateSetting.call(this,e,t))},checkMenu(){let{buttons:e}=this.elements.settings,t=!k.empty(e)&&Object.values(e).some(e=>!e.hidden);U(this.elements.settings.menu,!t)},focusFirstMenuItem(e,t=!1){if(this.elements.settings.popup.hidden)return;let r=e;k.element(r)||(r=Object.values(this.elements.settings.panels).find(e=>!e.hidden));let n=r.querySelector('[role^="menuitem"]');Z.call(this,n,t)},toggleMenu(e){let{popup:t}=this.elements.settings,r=this.elements.buttons.settings;if(!k.element(t)||!k.element(r))return;let{hidden:n}=t,i=n;if(k.boolean(e))i=e;else if(k.keyboardEvent(e)&&"Escape"===e.key)i=!1;else if(k.event(e)){let s=k.function(e.composedPath)?e.composedPath()[0]:e.target,a=t.contains(s);if(a||!a&&e.target!==r&&i)return}r.setAttribute("aria-expanded",i),U(t,!i),q(this.elements.container,this.config.classNames.menu.open,i),i&&k.keyboardEvent(e)?eR.focusFirstMenuItem.call(this,null,!0):i||n||Z.call(this,r,k.keyboardEvent(e))},getMenuSize(e){let t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);let r=t.scrollWidth,n=t.scrollHeight;return j(t),{width:r,height:n}},showMenuPanel(e="",t=!1){let r=this.elements.container.querySelector(`#plyr-settings-${this.id}-${e}`);if(!k.element(r))return;let n=r.parentNode,i=Array.from(n.children).find(e=>!e.hidden);if(G.transitions&&!G.reducedMotion){n.style.width=`${i.scrollWidth}px`,n.style.height=`${i.scrollHeight}px`;let s=eR.getMenuSize.call(this,r),a=e=>{e.target===n&&["width","height"].includes(e.propertyName)&&(n.style.width="",n.style.height="",X.call(this,n,R,a))};Q.call(this,n,R,a),n.style.width=`${s.width}px`,n.style.height=`${s.height}px`}U(i,!0),U(r,!1),eR.focusFirstMenuItem.call(this,r,t)},setDownloadUrl(){let e=this.elements.buttons.download;k.element(e)&&e.setAttribute("href",this.download)},create(e){let{bindMenuItemShortcuts:t,createButton:r,createProgress:n,createRange:i,createTime:s,setQualityMenu:a,setSpeedMenu:o,showMenuPanel:l}=eR;this.elements.controls=null,k.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(r.call(this,"play-large"));let c=I("div",B(this.config.selectors.controls.wrapper));this.elements.controls=c;let u={class:"plyr__controls__item"};return es(k.array(this.config.controls)?this.config.controls:[]).forEach(a=>{if("restart"===a&&c.appendChild(r.call(this,"restart",u)),"rewind"===a&&c.appendChild(r.call(this,"rewind",u)),"play"===a&&c.appendChild(r.call(this,"play",u)),"fast-forward"===a&&c.appendChild(r.call(this,"fast-forward",u)),"progress"===a){let o=I("div",{class:`${u.class} plyr__progress__container`}),d=I("div",B(this.config.selectors.progress));if(d.appendChild(i.call(this,"seek",{id:`plyr-seek-${e.id}`})),d.appendChild(n.call(this,"buffer")),this.config.tooltips.seek){let p=I("span",{class:this.config.classNames.tooltip},"00:00");d.appendChild(p),this.elements.display.seekTooltip=p}this.elements.progress=d,o.appendChild(this.elements.progress),c.appendChild(o)}if("current-time"===a&&c.appendChild(s.call(this,"currentTime",u)),"duration"===a&&c.appendChild(s.call(this,"duration",u)),"mute"===a||"volume"===a){let{volume:h}=this.elements;if(k.element(h)&&c.contains(h)||(h=I("div",N({},u,{class:`${u.class} plyr__volume`.trim()})),this.elements.volume=h,c.appendChild(h)),"mute"===a&&h.appendChild(r.call(this,"mute")),"volume"===a&&!D.isIos&&!D.isIPadOS){let f={max:1,step:.05,value:this.config.volume};h.appendChild(i.call(this,"volume",N(f,{id:`plyr-volume-${e.id}`})))}}if("captions"===a&&c.appendChild(r.call(this,"captions",u)),"settings"===a&&!k.empty(this.config.settings)){let m=I("div",N({},u,{class:`${u.class} plyr__menu`.trim(),hidden:""}));m.appendChild(r.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${e.id}`,"aria-expanded":!1}));let g=I("div",{class:"plyr__menu__container",id:`plyr-settings-${e.id}`,hidden:""}),y=I("div"),v=I("div",{id:`plyr-settings-${e.id}-home`}),b=I("div",{role:"menu"});v.appendChild(b),y.appendChild(v),this.elements.settings.panels.home=v,this.config.settings.forEach(r=>{let n=I("button",N(B(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));t.call(this,n,r),Q.call(this,n,"click",()=>{l.call(this,r,!1)});let i=I("span",null,ew.get(r,this.config)),s=I("span",{class:this.config.classNames.menu.value});s.innerHTML=e[r],i.appendChild(s),n.appendChild(i),b.appendChild(n);let a=I("div",{id:`plyr-settings-${e.id}-${r}`,hidden:""}),o=I("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});o.appendChild(I("span",{"aria-hidden":!0},ew.get(r,this.config))),o.appendChild(I("span",{class:this.config.classNames.hidden},ew.get("menuBack",this.config))),Q.call(this,a,"keydown",e=>{"ArrowLeft"===e.key&&(e.preventDefault(),e.stopPropagation(),l.call(this,"home",!0))},!1),Q.call(this,o,"click",()=>{l.call(this,"home",!1)}),a.appendChild(o),a.appendChild(I("div",{role:"menu"})),y.appendChild(a),this.elements.settings.buttons[r]=n,this.elements.settings.panels[r]=a}),g.appendChild(y),m.appendChild(g),c.appendChild(m),this.elements.settings.popup=g,this.elements.settings.menu=m}if("pip"===a&&G.pip&&c.appendChild(r.call(this,"pip",u)),"airplay"===a&&G.airplay&&c.appendChild(r.call(this,"airplay",u)),"download"===a){let w=N({},u,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(w.download="");let{download:_}=this.config.urls;!k.url(_)&&this.isEmbed&&N(w,{icon:`logo-${this.provider}`,label:this.provider}),c.appendChild(r.call(this,"download",w))}"fullscreen"===a&&c.appendChild(r.call(this,"fullscreen",u))}),this.isHTML5&&a.call(this,ef.getQualityOptions.call(this)),o.call(this),c},inject(){let e,t;if(this.config.loadSprite){let r=eR.getIconUrl.call(this);r.cors&&eS(r.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let n=null;this.elements.controls=null;let i={id:this.id,seektime:this.config.seekTime,title:this.config.title},s=!0;if(k.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,i)),this.config.controls||(this.config.controls=[]),k.element(this.config.controls)||k.string(this.config.controls)?n=this.config.controls:(n=eR.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:eA.getLabel.call(this)}),s=!1),s&&k.string(this.config.controls)&&(t=n,Object.entries(i).forEach(([e,r])=>{t=eg(t,`{${e}}`,r)}),n=t),k.string(this.config.selectors.controls.container)&&(e=document.querySelector(this.config.selectors.controls.container)),k.element(e)||(e=this.elements.container),e[k.element(n)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",n),k.element(this.elements.controls)||eR.findElements.call(this),!k.empty(this.elements.buttons)){let a=e=>{let t=this.config.classNames.controlPressed;e.setAttribute("aria-pressed","false"),Object.defineProperty(e,"pressed",{configurable:!0,enumerable:!0,get:()=>z(e,t),set(r=!1){q(e,t,r),e.setAttribute("aria-pressed",r?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(e=>{k.array(e)||k.nodeList(e)?Array.from(e).filter(Boolean).forEach(a):a(e)})}if(D.isEdge&&P(e),this.config.tooltips.controls){let{classNames:o,selectors:l}=this.config,c=`${l.controls.wrapper} ${l.labels} .${o.hidden}`,u=H.call(this,c);Array.from(u).forEach(e=>{q(e,this.config.classNames.hidden,!1),q(e,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch(e){}},setMarkers(){var e,t;if(!this.duration||this.elements.markers)return;let r=null===(e=this.config.markers)||void 0===e||null===(t=e.points)||void 0===t?void 0:t.filter(({time:e})=>e>0&&e<this.duration);if(null==r||!r.length)return;let n=document.createDocumentFragment(),i=document.createDocumentFragment(),s=null,a=`${this.config.classNames.tooltip}--visible`,o=e=>q(s,a,e);r.forEach(e=>{let t=I("span",{class:this.config.classNames.marker},""),r=e.time/this.duration*100+"%";s&&(t.addEventListener("mouseenter",()=>{e.label||(s.style.left=r,s.innerHTML=e.label,o(!0))}),t.addEventListener("mouseleave",()=>{o(!1)})),t.addEventListener("click",()=>{this.currentTime=e.time}),t.style.left=r,i.appendChild(t)}),n.appendChild(i),this.config.tooltips.seek||(s=I("span",{class:this.config.classNames.tooltip},""),n.appendChild(s)),this.elements.markers={points:i,tip:s},this.elements.progress.appendChild(n)}};function eP(e,t=!0){let r=e;if(t){let n=document.createElement("a");n.href=r,r=n.href}try{return new URL(r)}catch(i){return null}}function eD(e){let t=new URLSearchParams;return k.object(e)&&Object.entries(e).forEach(([e,r])=>{t.set(e,r)}),t}let eA={setup(){var e,t;if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!G.textTracks)return void(k.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&eR.setCaptionsMenu.call(this));if(k.element(this.elements.captions)||(this.elements.captions=I("div",B(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),e=this.elements.captions,t=this.elements.wrapper,k.element(e)&&k.element(t)&&t.parentNode.insertBefore(e,t.nextSibling)),D.isIE&&window.URL){let r=this.media.querySelectorAll("track");Array.from(r).forEach(e=>{let t=e.getAttribute("src"),r=eP(t);null!==r&&r.hostname!==window.location.href.hostname&&["http:","https:"].includes(r.protocol)&&ex(t,"blob").then(t=>{e.setAttribute("src",window.URL.createObjectURL(t))}).catch(()=>{j(e)})})}let n=es((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(e=>e.split("-")[0])),i=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===i&&([i]=n);let s=this.storage.get("captions");if(k.boolean(s)||({active:s}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:s,language:i,languages:n}),this.isHTML5){let a=this.config.captions.update?"addtrack removetrack":"removetrack";Q.call(this,this.media.textTracks,a,eA.update.bind(this))}setTimeout(eA.update.bind(this),0)},update(){let e=eA.getTracks.call(this,!0),{active:t,language:r,meta:n,currentTrackNode:i}=this.captions,s=Boolean(e.find(e=>e.language===r));this.isHTML5&&this.isVideo&&e.filter(e=>!n.get(e)).forEach(e=>{this.debug.log("Track added",e),n.set(e,{default:"showing"===e.mode}),"showing"===e.mode&&(e.mode="hidden"),Q.call(this,e,"cuechange",()=>eA.updateCues.call(this))}),(s&&this.language!==r||!e.includes(i))&&(eA.setLanguage.call(this,r),eA.toggle.call(this,t&&s)),this.elements&&q(this.elements.container,this.config.classNames.captions.enabled,!k.empty(e)),k.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&eR.setCaptionsMenu.call(this)},toggle(e,t=!0){if(!this.supported.ui)return;let{toggled:r}=this.captions,n=this.config.classNames.captions.active,i=k.nullOrUndefined(e)?!r:e;if(i!==r){if(t||(this.captions.active=i,this.storage.set({captions:i})),!this.language&&i&&!t){let s=eA.getTracks.call(this),a=eA.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=a.language,void eA.set.call(this,s.indexOf(a))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=i),q(this.elements.container,n,i),this.captions.toggled=i,eR.updateSetting.call(this,"captions"),et.call(this,this.media,i?"captionsenabled":"captionsdisabled")}setTimeout(()=>{i&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(e,t=!0){let r=eA.getTracks.call(this);if(-1!==e){if(k.number(e)){if(e in r){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;let n=r[e],{language:i}=n||{};this.captions.currentTrackNode=n,eR.updateSetting.call(this,"captions"),t||(this.captions.language=i,this.storage.set({language:i})),this.isVimeo&&this.embed.enableTextTrack(i),et.call(this,this.media,"languagechange")}eA.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&eA.updateCues.call(this)}else this.debug.warn("Track not found",e)}else this.debug.warn("Invalid caption argument",e)}else eA.toggle.call(this,!1,t)},setLanguage(e,t=!0){if(!k.string(e))return void this.debug.warn("Invalid language argument",e);let r=e.toLowerCase();this.captions.language=r;let n=eA.getTracks.call(this),i=eA.findTrack.call(this,[r]);eA.set.call(this,n.indexOf(i),t)},getTracks(e=!1){return Array.from((this.media||{}).textTracks||[]).filter(t=>!this.isHTML5||e||this.captions.meta.has(t)).filter(e=>["captions","subtitles"].includes(e.kind))},findTrack(e,t=!1){let r;let n=eA.getTracks.call(this),i=e=>Number((this.captions.meta.get(e)||{}).default),s=Array.from(n).sort((e,t)=>i(t)-i(e));return e.every(e=>!(r=s.find(t=>t.language===e))),r||(t?s[0]:void 0)},getCurrentTrack(){return eA.getTracks.call(this)[this.currentTrack]},getLabel(e){let t=e;return!k.track(t)&&G.textTracks&&this.captions.toggled&&(t=eA.getCurrentTrack.call(this)),k.track(t)?k.empty(t.label)?k.empty(t.language)?ew.get("enabled",this.config):e.language.toUpperCase():t.label:ew.get("disabled",this.config)},updateCues(e){if(!this.supported.ui)return;if(!k.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!k.nullOrUndefined(e)&&!Array.isArray(e))return void this.debug.warn("updateCues: Invalid input",e);let t=e;if(!t){let r=eA.getCurrentTrack.call(this);t=Array.from((r||{}).activeCues||[]).map(e=>e.getCueAsHTML()).map(ev)}let n=t.map(e=>e.trim()).join("\n");if(n!==this.elements.captions.innerHTML){F(this.elements.captions);let i=I("span",B(this.config.selectors.caption));i.innerHTML=n,this.elements.captions.appendChild(i),et.call(this,this.media,"cuechange")}}},eN={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},eL="picture-in-picture",eO={html5:"html5",youtube:"youtube",vimeo:"vimeo"},eI="video",eM=()=>{};class ej{constructor(e=!1){this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):eM}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):eM}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):eM}}class eF{constructor(t){e(this,"onChange",()=>{if(!this.supported)return;let e=this.player.elements.buttons.fullscreen;k.element(e)&&(e.pressed=this.active);let t=this.target===this.player.media?this.target:this.player.elements.container;et.call(this.player,t,this.active?"enterfullscreen":"exitfullscreen",!0)}),e(this,"toggleFallback",(e=!1)=>{if(e?this.scrollPosition={x:window.scrollX??0,y:window.scrollY??0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=e?"hidden":"",q(this.target,this.player.config.classNames.fullscreen.fallback,e),D.isIos){let t=document.head.querySelector('meta[name="viewport"]'),r="viewport-fit=cover";t||(t=document.createElement("meta")).setAttribute("name","viewport");let n=k.string(t.content)&&t.content.includes(r);e?(this.cleanupViewport=!n,n||(t.content+=`,${r}`)):this.cleanupViewport&&(t.content=t.content.split(",").filter(e=>e.trim()!==r).join(","))}this.onChange()}),e(this,"trapFocus",e=>{if(D.isIos||D.isIPadOS||!this.active||"Tab"!==e.key)return;let t=document.activeElement,r=H.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[n]=r,i=r[r.length-1];t!==i||e.shiftKey?t===n&&e.shiftKey&&(i.focus(),e.preventDefault()):(n.focus(),e.preventDefault())}),e(this,"update",()=>{if(this.supported){let e;e=this.forceFallback?"Fallback (forced)":eF.nativeSupported?"Native":"Fallback",this.player.debug.log(`${e} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");q(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),e(this,"enter",()=>{this.supported&&(D.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!eF.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?k.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),e(this,"exit",()=>{if(this.supported){if(D.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),ei(this.player.play());else if(!eF.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!k.empty(this.prefix)){let e="moz"===this.prefix?"Cancel":"Exit";document[`${this.prefix}${e}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}}),e(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=t,this.prefix=eF.prefix,this.property=eF.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===t.config.fullscreen.fallback,this.player.elements.fullscreen=t.config.fullscreen.container&&function(e,t){let{prototype:r}=Element;return(r.closest||function(){let e=this;do{if(V.matches(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}).call(e,t)}(this.player.elements.container,t.config.fullscreen.container),Q.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),Q.call(this.player,this.player.elements.container,"dblclick",e=>{k.element(this.player.elements.controls)&&this.player.elements.controls.contains(e.target)||this.player.listeners.proxy(e,this.toggle,"fullscreen")}),Q.call(this,this.player.elements.container,"keydown",e=>this.trapFocus(e)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return eF.nativeSupported&&!this.forceFallback}static get prefix(){if(k.function(document.exitFullscreen))return"";let e="";return["webkit","moz","ms"].some(t=>!(!k.function(document[`${t}ExitFullscreen`])&&!k.function(document[`${t}CancelFullScreen`]))&&(e=t,!0)),e}static get property(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,eF.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||eF.nativeSupported||!D.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!eF.nativeSupported||this.forceFallback)return z(this.target,this.player.config.classNames.fullscreen.fallback);let e=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}get target(){return D.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen??this.player.elements.container}}function e$(e,t=1){return new Promise((r,n)=>{let i=new Image,s=()=>{delete i.onload,delete i.onerror,(i.naturalWidth>=t?r:n)(i)};Object.assign(i,{onload:s,onerror:s,src:e})})}let eB={addStyleHook(){q(this.elements.container,this.config.selectors.container.replace(".",""),!0),q(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(e=!1){e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void eB.toggleNativeControls.call(this,!0);k.element(this.elements.controls)||(eR.inject.call(this),this.listeners.controls()),eB.toggleNativeControls.call(this),this.isHTML5&&eA.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,eR.updateVolume.call(this),eR.timeUpdate.call(this),eR.durationUpdate.call(this),eB.checkPlaying.call(this),q(this.elements.container,this.config.classNames.pip.supported,G.pip&&this.isHTML5&&this.isVideo),q(this.elements.container,this.config.classNames.airplay.supported,G.airplay&&this.isHTML5),q(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{et.call(this,this.media,"ready")},0),eB.setTitle.call(this),this.poster&&eB.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&eR.durationUpdate.call(this),this.config.mediaMetadata&&eR.setMediaMetadata.call(this)},setTitle(){let e=ew.get("play",this.config);if(k.string(this.config.title)&&!k.empty(this.config.title)&&(e+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(t=>{t.setAttribute("aria-label",e)}),this.isEmbed){let t=W.call(this,"iframe");if(!k.element(t))return;let r=k.empty(this.config.title)?"video":this.config.title,n=ew.get("frameTitle",this.config);t.setAttribute("title",n.replace("{title}",r))}},togglePoster(e){q(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster(e,t=!0){return t&&this.poster?Promise.reject(Error("Poster already set")):(this.media.setAttribute("data-poster",e),this.elements.poster.removeAttribute("hidden"),en.call(this).then(()=>e$(e)).catch(t=>{throw e===this.poster&&eB.togglePoster.call(this,!1),t}).then(()=>{if(e!==this.poster)throw Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${e}')`,backgroundSize:""}),eB.togglePoster.call(this,!0),e)))},checkPlaying(e){q(this.elements.container,this.config.classNames.playing,this.playing),q(this.elements.container,this.config.classNames.paused,this.paused),q(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(e=>{Object.assign(e,{pressed:this.playing}),e.setAttribute("aria-label",ew.get(this.playing?"pause":"play",this.config))}),k.event(e)&&"timeupdate"===e.type||eB.toggleControls.call(this)},checkLoading(e){this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{q(this.elements.container,this.config.classNames.loading,this.loading),eB.toggleControls.call(this)},this.loading?250:0)},toggleControls(e){let{controls:t}=this.elements;if(t&&this.config.hideControls){let r=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||r))}},migrateStyles(){Object.values({...this.media.style}).filter(e=>!k.empty(e)&&k.string(e)&&e.startsWith("--plyr")).forEach(e=>{this.elements.container.style.setProperty(e,this.media.style.getPropertyValue(e)),this.media.style.removeProperty(e)}),k.empty(this.media.style)&&this.media.removeAttribute("style")}};class eU{constructor(t){e(this,"firstTouch",()=>{let{player:e}=this,{elements:t}=e;e.touch=!0,q(t.container,e.config.classNames.isTouch,!0)}),e(this,"global",(e=!0)=>{let{player:t}=this;t.config.keyboard.global&&J.call(t,window,"keydown keyup",this.handleKey,e,!1),J.call(t,document.body,"click",this.toggleMenu,e),ee.call(t,document.body,"touchstart",this.firstTouch)}),e(this,"container",()=>{let{player:e}=this,{config:t,elements:r,timers:n}=e;!t.keyboard.global&&t.keyboard.focused&&Q.call(e,r.container,"keydown keyup",this.handleKey,!1),Q.call(e,r.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",t=>{let{controls:i}=r;i&&"enterfullscreen"===t.type&&(i.pressed=!1,i.hover=!1);let s=0;["touchstart","touchmove","mousemove"].includes(t.type)&&(eB.toggleControls.call(e,!0),s=e.touch?3e3:2e3),clearTimeout(n.controls),n.controls=setTimeout(()=>eB.toggleControls.call(e,!1),s)});let i=()=>{if(!e.isVimeo||e.config.vimeo.premium)return;let t=r.wrapper,{active:n}=e.fullscreen,[i,s]=ed.call(e),a=eo(`aspect-ratio: ${i} / ${s}`);if(!n)return void(a?(t.style.width=null,t.style.height=null):(t.style.maxWidth=null,t.style.margin=null));let[o,l]=[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)],c=o/l>i/s;a?(t.style.width=c?"auto":"100%",t.style.height=c?"100%":"auto"):(t.style.maxWidth=c?l/s*i+"px":null,t.style.margin=c?"0 auto":null)},s=()=>{clearTimeout(n.resized),n.resized=setTimeout(i,50)};Q.call(e,r.container,"enterfullscreen exitfullscreen",t=>{let{target:n}=e.fullscreen;n===r.container&&(!e.isEmbed&&k.empty(e.config.ratio)||(i(),("enterfullscreen"===t.type?Q:X).call(e,window,"resize",s)))})}),e(this,"media",()=>{let{player:e}=this,{elements:t}=e;if(Q.call(e,e.media,"timeupdate seeking seeked",t=>eR.timeUpdate.call(e,t)),Q.call(e,e.media,"durationchange loadeddata loadedmetadata",t=>eR.durationUpdate.call(e,t)),Q.call(e,e.media,"ended",()=>{e.isHTML5&&e.isVideo&&e.config.resetOnEnd&&(e.restart(),e.pause())}),Q.call(e,e.media,"progress playing seeking seeked",t=>eR.updateProgress.call(e,t)),Q.call(e,e.media,"volumechange",t=>eR.updateVolume.call(e,t)),Q.call(e,e.media,"playing play pause ended emptied timeupdate",t=>eB.checkPlaying.call(e,t)),Q.call(e,e.media,"waiting canplay seeked playing",t=>eB.checkLoading.call(e,t)),e.supported.ui&&e.config.clickToPlay&&!e.isAudio){let r=W.call(e,`.${e.config.classNames.video}`);if(!k.element(r))return;Q.call(e,t.container,"click",n=>{([t.container,r].includes(n.target)||r.contains(n.target))&&(e.touch&&e.config.hideControls||(e.ended?(this.proxy(n,e.restart,"restart"),this.proxy(n,()=>{ei(e.play())},"play")):this.proxy(n,()=>{ei(e.togglePlay())},"play")))})}e.supported.ui&&e.config.disableContextMenu&&Q.call(e,t.wrapper,"contextmenu",e=>{e.preventDefault()},!1),Q.call(e,e.media,"volumechange",()=>{e.storage.set({volume:e.volume,muted:e.muted})}),Q.call(e,e.media,"ratechange",()=>{eR.updateSetting.call(e,"speed"),e.storage.set({speed:e.speed})}),Q.call(e,e.media,"qualitychange",t=>{eR.updateSetting.call(e,"quality",null,t.detail.quality)}),Q.call(e,e.media,"ready qualitychange",()=>{eR.setDownloadUrl.call(e)});let n=e.config.events.concat(["keyup","keydown"]).join(" ");Q.call(e,e.media,n,r=>{let{detail:n={}}=r;"error"===r.type&&(n=e.media.error),et.call(e,t.container,r.type,!0,n)})}),e(this,"proxy",(e,t,r)=>{let{player:n}=this,i=n.config.listeners[r],s=!0;k.function(i)&&(s=i.call(n,e)),!1!==s&&k.function(t)&&t.call(n,e)}),e(this,"bind",(e,t,r,n,i=!0)=>{let{player:s}=this,a=s.config.listeners[n],o=k.function(a);Q.call(s,e,t,e=>this.proxy(e,r,n),i&&!o)}),e(this,"controls",()=>{let{player:e}=this,{elements:t}=e,r=D.isIE?"change":"input";if(t.buttons.play&&Array.from(t.buttons.play).forEach(t=>{this.bind(t,"click",()=>{ei(e.togglePlay())},"play")}),this.bind(t.buttons.restart,"click",e.restart,"restart"),this.bind(t.buttons.rewind,"click",()=>{e.lastSeekTime=Date.now(),e.rewind()},"rewind"),this.bind(t.buttons.fastForward,"click",()=>{e.lastSeekTime=Date.now(),e.forward()},"fastForward"),this.bind(t.buttons.mute,"click",()=>{e.muted=!e.muted},"mute"),this.bind(t.buttons.captions,"click",()=>e.toggleCaptions()),this.bind(t.buttons.download,"click",()=>{et.call(e,e.media,"download")},"download"),this.bind(t.buttons.fullscreen,"click",()=>{e.fullscreen.toggle()},"fullscreen"),this.bind(t.buttons.pip,"click",()=>{e.pip="toggle"},"pip"),this.bind(t.buttons.airplay,"click",e.airplay,"airplay"),this.bind(t.buttons.settings,"click",t=>{t.stopPropagation(),t.preventDefault(),eR.toggleMenu.call(e,t)},null,!1),this.bind(t.buttons.settings,"keyup",t=>{[" ","Enter"].includes(t.key)&&("Enter"!==t.key?(t.preventDefault(),t.stopPropagation(),eR.toggleMenu.call(e,t)):eR.focusFirstMenuItem.call(e,null,!0))},null,!1),this.bind(t.settings.menu,"keydown",t=>{"Escape"===t.key&&eR.toggleMenu.call(e,t)}),this.bind(t.inputs.seek,"mousedown mousemove",e=>{let r=t.progress.getBoundingClientRect(),n=100/r.width*(e.pageX-r.left);e.currentTarget.setAttribute("seek-value",n)}),this.bind(t.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",t=>{let r=t.currentTarget,n="play-on-seeked";if(k.keyboardEvent(t)&&!["ArrowLeft","ArrowRight"].includes(t.key))return;e.lastSeekTime=Date.now();let i=r.hasAttribute(n),s=["mouseup","touchend","keyup"].includes(t.type);i&&s?(r.removeAttribute(n),ei(e.play())):!s&&e.playing&&(r.setAttribute(n,""),e.pause())}),D.isIos){let n=H.call(e,'input[type="range"]');Array.from(n).forEach(e=>this.bind(e,r,e=>P(e.target)))}this.bind(t.inputs.seek,r,t=>{let r=t.currentTarget,n=r.getAttribute("seek-value");k.empty(n)&&(n=r.value),r.removeAttribute("seek-value"),e.currentTime=n/r.max*e.duration},"seek"),this.bind(t.progress,"mouseenter mouseleave mousemove",t=>eR.updateSeekTooltip.call(e,t)),this.bind(t.progress,"mousemove touchmove",t=>{let{previewThumbnails:r}=e;r&&r.loaded&&r.startMove(t)}),this.bind(t.progress,"mouseleave touchend click",()=>{let{previewThumbnails:t}=e;t&&t.loaded&&t.endMove(!1,!0)}),this.bind(t.progress,"mousedown touchstart",t=>{let{previewThumbnails:r}=e;r&&r.loaded&&r.startScrubbing(t)}),this.bind(t.progress,"mouseup touchend",t=>{let{previewThumbnails:r}=e;r&&r.loaded&&r.endScrubbing(t)}),D.isWebKit&&Array.from(H.call(e,'input[type="range"]')).forEach(t=>{this.bind(t,"input",t=>eR.updateRangeFill.call(e,t.target))}),e.config.toggleInvert&&!k.element(t.display.duration)&&this.bind(t.display.currentTime,"click",()=>{0!==e.currentTime&&(e.config.invertTime=!e.config.invertTime,eR.timeUpdate.call(e))}),this.bind(t.inputs.volume,r,t=>{e.volume=t.target.value},"volume"),this.bind(t.controls,"mouseenter mouseleave",r=>{t.controls.hover=!e.touch&&"mouseenter"===r.type}),t.fullscreen&&Array.from(t.fullscreen.children).filter(e=>!e.contains(t.container)).forEach(r=>{this.bind(r,"mouseenter mouseleave",r=>{t.controls&&(t.controls.hover=!e.touch&&"mouseenter"===r.type)})}),this.bind(t.controls,"mousedown mouseup touchstart touchend touchcancel",e=>{t.controls.pressed=["mousedown","touchstart"].includes(e.type)}),this.bind(t.controls,"focusin",()=>{let{config:r,timers:n}=e;q(t.controls,r.classNames.noTransition,!0),eB.toggleControls.call(e,!0),setTimeout(()=>{q(t.controls,r.classNames.noTransition,!1)},0);let i=this.touch?3e3:4e3;clearTimeout(n.controls),n.controls=setTimeout(()=>eB.toggleControls.call(e,!1),i)}),this.bind(t.inputs.volume,"wheel",t=>{let r=t.webkitDirectionInvertedFromDevice,[n,i]=[t.deltaX,-t.deltaY].map(e=>r?-e:e),s=Math.sign(Math.abs(n)>Math.abs(i)?n:i);e.increaseVolume(s/50);let{volume:a}=e.media;(1===s&&a<1||-1===s&&a>0)&&t.preventDefault()},"volume",!1)}),this.player=t,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(e){var t;let{player:r}=this,{elements:n}=r,{key:i,type:s,altKey:a,ctrlKey:o,metaKey:l,shiftKey:c}=e,u="keydown"===s,d=u&&i===this.lastKey;if(!a&&!o&&!l&&!c&&i){if(u){let p=document.activeElement;if(k.element(p)){let{editable:h}=r.config.selectors,{seek:f}=n.inputs;if(p!==f&&V(p,h)||" "===e.key&&V(p,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(i)&&(e.preventDefault(),e.stopPropagation()),i){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":d||(t=parseInt(i,10),r.currentTime=r.duration/10*t);break;case" ":case"k":d||ei(r.togglePlay());break;case"ArrowUp":r.increaseVolume(.1);break;case"ArrowDown":r.decreaseVolume(.1);break;case"m":d||(r.muted=!r.muted);break;case"ArrowRight":r.forward();break;case"ArrowLeft":r.rewind();break;case"f":r.fullscreen.toggle();break;case"c":d||r.toggleCaptions();break;case"l":r.loop=!r.loop}"Escape"===i&&!r.fullscreen.usingNative&&r.fullscreen.active&&r.fullscreen.toggle(),this.lastKey=i}else this.lastKey=null}}toggleMenu(e){eR.toggleMenu.call(this.player,e)}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self&&self;var eq=(s=o={exports:{}},o.exports,s.exports=function(){var e=function(){},t={},r={},n={};function i(e,t){if(e){var i=n[e];if(r[e]=t,i)for(;i.length;)i[0](e,t),i.splice(0,1)}}function s(t,r){t.call&&(t={success:t}),r.length?(t.error||e)(r):(t.success||e)(t)}function a(r,n,a){var o,l;if(n&&n.trim&&(o=n),l=(o?a:n)||{},o){if(o in t)throw"LoadJS";t[o]=!0}function c(t,n){!function(t,r,n){var i,s,a=(t=t.push?t:[t]).length,o=a,l=[];for(i=function(e,t,n){if("e"==t&&l.push(e),"b"==t){if(!n)return;l.push(e)}--a||r(l)},s=0;s<o;s++)!function t(r,n,i,s){var a,o,l=document,c=i.async,u=(i.numRetries||0)+1,d=i.before||e,p=r.replace(/[\?|#].*$/,""),h=r.replace(/^(css|img)!/,"");s=s||0,/(^css!|\.css$)/.test(p)?((o=l.createElement("link")).rel="stylesheet",o.href=h,(a="hideFocus"in o)&&o.relList&&(a=0,o.rel="preload",o.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(p)?(o=l.createElement("img")).src=h:((o=l.createElement("script")).src=r,o.async=void 0===c||c),o.onload=o.onerror=o.onbeforeload=function(e){var l=e.type[0];if(a)try{o.sheet.cssText.length||(l="e")}catch(c){18!=c.code&&(l="e")}if("e"==l){if((s+=1)<u)return t(r,n,i,s)}else if("preload"==o.rel&&"style"==o.as)return o.rel="stylesheet";n(r,l,e.defaultPrevented)},!1!==d(r,o)&&l.head.appendChild(o)}(t[s],i,n)}(r,function(e){s(l,e),t&&s({success:t,error:n},e),i(o,e)},l)}if(l.returnPromise)return new Promise(c);c()}return a.ready=function(e,t){return function(e,t){e=e.push?e:[e];var i,s,a,o=[],l=e.length,c=l;for(i=function(e,r){r.length&&o.push(e),--c||t(o)};l--;)(a=r[s=e[l]])?i(s,a):(n[s]=n[s]||[]).push(i)}(e,function(e){s(t,e)}),a},a.done=function(e){i(e,[])},a.reset=function(){t={},r={},n={}},a.isDefined=function(e){return e in t},a}(),o.exports);function ez(e){return new Promise((t,r)=>{eq(e,{success:t,error:r})})}function eV(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,et.call(this,this.media,e?"play":"pause"))}let eH={setup(){let e=this;q(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,ep.call(e),k.object(window.Vimeo)?eH.ready.call(e):ez(e.config.urls.vimeo.sdk).then(()=>{eH.ready.call(e)}).catch(t=>{e.debug.warn("Vimeo SDK (player.js) failed to load",t)})},ready(){var e;let t=this,r=t.config.vimeo,{premium:n,referrerPolicy:i,...s}=r,a=t.media.getAttribute("src"),o="";k.empty(a)?(a=t.media.getAttribute(t.config.attributes.embed.id),o=t.media.getAttribute(t.config.attributes.embed.hash)):o=function(e){let t=e.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return t&&5===t.length?t[4]:null}(a);let l=o?{h:o}:{};n&&Object.assign(s,{controls:!1,sidedock:!1});let c=eD({loop:t.config.loop.active,autoplay:t.autoplay,muted:t.muted,gesture:"media",playsinline:t.config.playsinline,...l,...s}),u=(e=a,k.empty(e)?null:k.number(Number(e))?e:e.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:e),d=I("iframe"),p=em(t.config.urls.vimeo.iframe,u,c);if(d.setAttribute("src",p),d.setAttribute("allowfullscreen",""),d.setAttribute("allow","autoplay; fullscreen; picture-in-picture; encrypted-media; accelerometer; gyroscope"),k.empty(i)||d.setAttribute("referrerPolicy",i),n||!r.customControls)d.setAttribute("data-poster",t.poster),t.media=$(d,t.media);else{let h=I("div",{class:t.config.classNames.embedContainer,"data-poster":t.poster});h.appendChild(d),t.media=$(h,t.media)}r.customControls||ex(em(t.config.urls.vimeo.api,p)).then(e=>{!k.empty(e)&&e.thumbnail_url&&eB.setPoster.call(t,e.thumbnail_url).catch(()=>{})}),t.embed=new window.Vimeo.Player(d,{autopause:t.config.autopause,muted:t.muted}),t.media.paused=!0,t.media.currentTime=0,t.supported.ui&&t.embed.disableTextTrack(),t.media.play=()=>(eV.call(t,!0),t.embed.play()),t.media.pause=()=>(eV.call(t,!1),t.embed.pause()),t.media.stop=()=>{t.pause(),t.currentTime=0};let{currentTime:f}=t.media;Object.defineProperty(t.media,"currentTime",{get:()=>f,set(e){let{embed:r,media:n,paused:i,volume:s}=t,a=i&&!r.hasPlayed;n.seeking=!0,et.call(t,n,"seeking"),Promise.resolve(a&&r.setVolume(0)).then(()=>r.setCurrentTime(e)).then(()=>a&&r.pause()).then(()=>a&&r.setVolume(s)).catch(()=>{})}});let m=t.config.speed.selected;Object.defineProperty(t.media,"playbackRate",{get:()=>m,set(e){t.embed.setPlaybackRate(e).then(()=>{m=e,et.call(t,t.media,"ratechange")}).catch(()=>{t.options.speed=[1]})}});let{volume:g}=t.config;Object.defineProperty(t.media,"volume",{get:()=>g,set(e){t.embed.setVolume(e).then(()=>{g=e,et.call(t,t.media,"volumechange")})}});let{muted:y}=t.config;Object.defineProperty(t.media,"muted",{get:()=>y,set(e){let r=!!k.boolean(e)&&e;t.embed.setMuted(!!r||t.config.muted).then(()=>{y=r,et.call(t,t.media,"volumechange")})}});let v,{loop:b}=t.config;Object.defineProperty(t.media,"loop",{get:()=>b,set(e){let r=k.boolean(e)?e:t.config.loop.active;t.embed.setLoop(r).then(()=>{b=r})}}),t.embed.getVideoUrl().then(e=>{v=e,eR.setDownloadUrl.call(t)}).catch(e=>{this.debug.warn(e)}),Object.defineProperty(t.media,"currentSrc",{get:()=>v}),Object.defineProperty(t.media,"ended",{get:()=>t.currentTime===t.duration}),Promise.all([t.embed.getVideoWidth(),t.embed.getVideoHeight()]).then(e=>{let[r,n]=e;t.embed.ratio=eh(r,n),ep.call(this)}),t.embed.setAutopause(t.config.autopause).then(e=>{t.config.autopause=e}),t.embed.getVideoTitle().then(e=>{t.config.title=e,eB.setTitle.call(this)}),t.embed.getCurrentTime().then(e=>{f=e,et.call(t,t.media,"timeupdate")}),t.embed.getDuration().then(e=>{t.media.duration=e,et.call(t,t.media,"durationchange")}),t.embed.getTextTracks().then(e=>{t.media.textTracks=e,eA.setup.call(t)}),t.embed.on("cuechange",({cues:e=[]})=>{let r=e.map(e=>(function(e){let t=document.createDocumentFragment(),r=document.createElement("div");return t.appendChild(r),r.innerHTML=e,t.firstChild.innerText})(e.text));eA.updateCues.call(t,r)}),t.embed.on("loaded",()=>{t.embed.getPaused().then(e=>{eV.call(t,!e),e||et.call(t,t.media,"playing")}),k.element(t.embed.element)&&t.supported.ui&&t.embed.element.setAttribute("tabindex",-1)}),t.embed.on("bufferstart",()=>{et.call(t,t.media,"waiting")}),t.embed.on("bufferend",()=>{et.call(t,t.media,"playing")}),t.embed.on("play",()=>{eV.call(t,!0),et.call(t,t.media,"playing")}),t.embed.on("pause",()=>{eV.call(t,!1)}),t.embed.on("timeupdate",e=>{t.media.seeking=!1,f=e.seconds,et.call(t,t.media,"timeupdate")}),t.embed.on("progress",e=>{t.media.buffered=e.percent,et.call(t,t.media,"progress"),1===parseInt(e.percent,10)&&et.call(t,t.media,"canplaythrough"),t.embed.getDuration().then(e=>{e!==t.media.duration&&(t.media.duration=e,et.call(t,t.media,"durationchange"))})}),t.embed.on("seeked",()=>{t.media.seeking=!1,et.call(t,t.media,"seeked")}),t.embed.on("ended",()=>{t.media.paused=!0,et.call(t,t.media,"ended")}),t.embed.on("error",e=>{t.media.error=e,et.call(t,t.media,"error")}),r.customControls&&setTimeout(()=>eB.build.call(t),0)}};function eW(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,et.call(this,this.media,e?"play":"pause"))}let eZ={setup(){if(q(this.elements.wrapper,this.config.classNames.embed,!0),k.object(window.YT)&&k.function(window.YT.Player))eZ.ready.call(this);else{let e=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{k.function(e)&&e(),eZ.ready.call(this)},ez(this.config.urls.youtube.sdk).catch(e=>{this.debug.warn("YouTube API failed to load",e)})}},getTitle(e){ex(em(this.config.urls.youtube.api,e)).then(e=>{if(k.object(e)){let{title:t,height:r,width:n}=e;this.config.title=t,eB.setTitle.call(this),this.embed.ratio=eh(n,r)}ep.call(this)}).catch(()=>{ep.call(this)})},ready(){var e;let t=this,r=t.config.youtube,n=t.media&&t.media.getAttribute("id");if(!k.empty(n)&&n.startsWith("youtube-"))return;let i=t.media.getAttribute("src");k.empty(i)&&(i=t.media.getAttribute(this.config.attributes.embed.id));let s=(e=i,k.empty(e)?null:e.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:e),a=I("div",{id:`${t.provider}-${Math.floor(1e4*Math.random())}`,"data-poster":r.customControls?t.poster:void 0});if(t.media=$(a,t.media),r.customControls){let o=e=>`https://i.ytimg.com/vi/${s}/${e}default.jpg`;e$(o("maxres"),121).catch(()=>e$(o("sd"),121)).catch(()=>e$(o("hq"))).then(e=>eB.setPoster.call(t,e.src)).then(e=>{e.includes("maxres")||(t.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}t.embed=new window.YT.Player(t.media,{videoId:s,host:r.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0,playerVars:N({},{autoplay:t.config.autoplay?1:0,hl:t.config.hl,controls:t.supported.ui&&r.customControls?0:1,disablekb:1,playsinline:t.config.playsinline&&!t.config.fullscreen.iosNative?1:0,cc_load_policy:t.captions.active?1:0,cc_lang_pref:t.config.captions.language,widget_referrer:window?window.location.href:null},r),events:{onError(e){if(!t.media.error){let r=e.data;t.media.error={code:r,message:({2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."})[r]||"An unknown error occurred"},et.call(t,t.media,"error")}},onPlaybackRateChange(e){let r=e.target;t.media.playbackRate=r.getPlaybackRate(),et.call(t,t.media,"ratechange")},onReady(e){if(k.function(t.media.play))return;let n=e.target;eZ.getTitle.call(t,s),t.media.play=()=>{eW.call(t,!0),n.playVideo()},t.media.pause=()=>{eW.call(t,!1),n.pauseVideo()},t.media.stop=()=>{n.stopVideo()},t.media.duration=n.getDuration(),t.media.paused=!0,t.media.currentTime=0,Object.defineProperty(t.media,"currentTime",{get:()=>Number(n.getCurrentTime()),set(e){t.paused&&!t.embed.hasPlayed&&t.embed.mute(),t.media.seeking=!0,et.call(t,t.media,"seeking"),n.seekTo(e)}}),Object.defineProperty(t.media,"playbackRate",{get:()=>n.getPlaybackRate(),set(e){n.setPlaybackRate(e)}});let{volume:i}=t.config;Object.defineProperty(t.media,"volume",{get:()=>i,set(e){i=e,n.setVolume(100*i),et.call(t,t.media,"volumechange")}});let{muted:a}=t.config;Object.defineProperty(t.media,"muted",{get:()=>a,set(e){let r=k.boolean(e)?e:a;a=r,n[r?"mute":"unMute"](),n.setVolume(100*i),et.call(t,t.media,"volumechange")}}),Object.defineProperty(t.media,"currentSrc",{get:()=>n.getVideoUrl()}),Object.defineProperty(t.media,"ended",{get:()=>t.currentTime===t.duration});let o=n.getAvailablePlaybackRates();t.options.speed=o.filter(e=>t.config.speed.options.includes(e)),t.supported.ui&&r.customControls&&t.media.setAttribute("tabindex",-1),et.call(t,t.media,"timeupdate"),et.call(t,t.media,"durationchange"),clearInterval(t.timers.buffering),t.timers.buffering=setInterval(()=>{t.media.buffered=n.getVideoLoadedFraction(),(null===t.media.lastBuffered||t.media.lastBuffered<t.media.buffered)&&et.call(t,t.media,"progress"),t.media.lastBuffered=t.media.buffered,1===t.media.buffered&&(clearInterval(t.timers.buffering),et.call(t,t.media,"canplaythrough"))},200),r.customControls&&setTimeout(()=>eB.build.call(t),50)},onStateChange(e){let n=e.target;switch(clearInterval(t.timers.playing),t.media.seeking&&[1,2].includes(e.data)&&(t.media.seeking=!1,et.call(t,t.media,"seeked")),e.data){case -1:et.call(t,t.media,"timeupdate"),t.media.buffered=n.getVideoLoadedFraction(),et.call(t,t.media,"progress");break;case 0:eW.call(t,!1),t.media.loop?(n.stopVideo(),n.playVideo()):et.call(t,t.media,"ended");break;case 1:r.customControls&&!t.config.autoplay&&t.media.paused&&!t.embed.hasPlayed?t.media.pause():(eW.call(t,!0),et.call(t,t.media,"playing"),t.timers.playing=setInterval(()=>{et.call(t,t.media,"timeupdate")},50),t.media.duration!==n.getDuration()&&(t.media.duration=n.getDuration(),et.call(t,t.media,"durationchange")));break;case 2:t.muted||t.embed.unMute(),eW.call(t,!1);break;case 3:et.call(t,t.media,"waiting")}et.call(t,t.elements.container,"statechange",!1,{code:e.data})}}})}},eK={setup(){this.media?(q(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),q(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&q(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=I("div",{class:this.config.classNames.video}),L(this.media,this.elements.wrapper),this.elements.poster=I("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?ef.setup.call(this):this.isYouTube?eZ.setup.call(this):this.isVimeo&&eH.setup.call(this)):this.debug.warn("No media element found!")}};class eG{constructor(t){e(this,"load",()=>{this.enabled&&(k.object(window.google)&&k.object(window.google.ima)?this.ready():ez(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",Error("Google IMA SDK failed to load"))}))}),e(this,"ready",()=>{this.enabled||(this.manager&&this.manager.destroy(),this.elements.displayContainer&&this.elements.displayContainer.destroy(),this.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),e(this,"setupIMA",()=>{this.elements.container=I("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,e=>this.onAdsManagerLoaded(e),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,e=>this.onAdError(e),!1),this.requestAds()}),e(this,"requestAds",()=>{let{container:e}=this.player.elements;try{let t=new google.ima.AdsRequest;t.adTagUrl=this.tagUrl,t.linearAdSlotWidth=e.offsetWidth,t.linearAdSlotHeight=e.offsetHeight,t.nonLinearAdSlotWidth=e.offsetWidth,t.nonLinearAdSlotHeight=e.offsetHeight,t.forceNonLinearFullSlot=!1,t.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(t)}catch(r){this.onAdError(r)}}),e(this,"pollCountdown",(e=!1)=>{if(!e)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{let e=ek(Math.max(this.manager.getRemainingTime(),0)),t=`${ew.get("advertisement",this.player.config)} - ${e}`;this.elements.container.setAttribute("data-badge-text",t)},100)}),e(this,"onAdsManagerLoaded",e=>{if(!this.enabled)return;let t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,t.enablePreloading=!0,this.manager=e.getAdsManager(this.player,t),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,e=>this.onAdError(e)),Object.keys(google.ima.AdEvent.Type).forEach(e=>{this.manager.addEventListener(google.ima.AdEvent.Type[e],e=>this.onAdEvent(e))}),this.trigger("loaded")}),e(this,"addCuePoints",()=>{k.empty(this.cuePoints)||this.cuePoints.forEach(e=>{if(0!==e&&-1!==e&&e<this.player.duration){let t=this.player.elements.progress;if(k.element(t)){let r=100/this.player.duration*e,n=I("span",{class:this.player.config.classNames.cues});n.style.left=`${r.toString()}%`,t.appendChild(n)}}})}),e(this,"onAdEvent",e=>{let{container:t}=this.player.elements,r=e.getAd(),n=e.getAdData();switch((e=>{et.call(this.player,this.player.media,`ads${e.replace(/_/g,"").toLowerCase()}`)})(e.type),e.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),r.isLinear()||(r.width=t.offsetWidth,r.height=t.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:n.adError&&this.player.debug.warn(`Non-fatal ad error: ${n.adError.getMessage()}`)}}),e(this,"onAdError",e=>{this.cancel(),this.player.debug.warn("Ads error",e)}),e(this,"listeners",()=>{let e;let{container:t}=this.player.elements;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{e=this.player.currentTime}),this.player.on("seeked",()=>{let t=this.player.currentTime;k.empty(this.cuePoints)||this.cuePoints.forEach((r,n)=>{e<r&&r<t&&(this.manager.discardAdBreak(),this.cuePoints.splice(n,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(t.offsetWidth,t.offsetHeight,google.ima.ViewMode.NORMAL)})}),e(this,"play",()=>{let{container:e}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(t){this.onAdError(t)}}).catch(()=>{})}),e(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,ei(this.player.media.play())}),e(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),e(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),e(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(e=>{this.on("loaded",e),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),e(this,"trigger",(e,...t)=>{let r=this.events[e];k.array(r)&&r.forEach(e=>{k.function(e)&&e.apply(this,t)})}),e(this,"on",(e,t)=>(k.array(this.events[e])||(this.events[e]=[]),this.events[e].push(t),this)),e(this,"startSafetyTimer",(e,t)=>{this.player.debug.log(`Safety timer invoked from: ${t}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},e)}),e(this,"clearSafetyTimer",e=>{k.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${e}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=t,this.config=t.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((e,t)=>{this.on("loaded",e),this.on("error",t)}),this.load()}get enabled(){let{config:e}=this;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!k.empty(e.publisherId)||k.url(e.tagUrl))}get tagUrl(){let{config:e}=this;return k.url(e.tagUrl)?e.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${eD({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId})}`}}function eY(e=0,t=0,r=255){return Math.min(Math.max(e,t),r)}let eJ=e=>{let t=[];return e.split(/\r\n\r\n|\n\n|\r\r/).forEach(e=>{let r={};e.split(/\r\n|\n|\r/).forEach(e=>{if(k.number(r.startTime)){if(!k.empty(e.trim())&&k.empty(r.text)){let t=e.trim().split("#xywh=");[r.text]=t,t[1]&&([r.x,r.y,r.w,r.h]=t[1].split(","))}}else{let n=e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);n&&(r.startTime=60*Number(n[1]||0)*60+60*Number(n[2])+Number(n[3])+Number(`0.${n[4]}`),r.endTime=60*Number(n[6]||0)*60+60*Number(n[7])+Number(n[8])+Number(`0.${n[9]}`))}}),r.text&&t.push(r)}),t},eQ=(e,t)=>{let r={};return e>t.width/t.height?(r.width=t.width,r.height=1/e*t.width):(r.height=t.height,r.width=e*t.height),r};class eX{constructor(t){e(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),e(this,"getThumbnails",()=>new Promise(e=>{let{src:t}=this.player.config.previewThumbnails;if(k.empty(t))throw Error("Missing previewThumbnails.src config attribute");let r=()=>{this.thumbnails.sort((e,t)=>e.height-t.height),this.player.debug.log("Preview thumbnails",this.thumbnails),e()};if(k.function(t))t(e=>{this.thumbnails=e,r()});else{let n=(k.string(t)?[t]:t).map(e=>this.getThumbnail(e));Promise.all(n).then(r)}})),e(this,"getThumbnail",e=>new Promise(t=>{ex(e).then(r=>{let n={frames:eJ(r),height:null,urlPrefix:""};n.frames[0].text.startsWith("/")||n.frames[0].text.startsWith("http://")||n.frames[0].text.startsWith("https://")||(n.urlPrefix=e.substring(0,e.lastIndexOf("/")+1));let i=new Image;i.onload=()=>{n.height=i.naturalHeight,n.width=i.naturalWidth,this.thumbnails.push(n),t()},i.src=n.urlPrefix+n.frames[0].text})})),e(this,"startMove",e=>{if(this.loaded&&k.event(e)&&["touchmove","mousemove"].includes(e.type)&&this.player.media.duration){if("touchmove"===e.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var t,r;let n=this.player.elements.progress.getBoundingClientRect(),i=100/n.width*(e.pageX-n.left);this.seekTime=this.player.media.duration*(i/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=e.pageX,this.elements.thumb.time.innerText=ek(this.seekTime);let s=null===(t=this.player.config.markers)||void 0===t||null===(r=t.points)||void 0===r?void 0:r.find(({time:e})=>e===Math.round(this.seekTime));s&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${s.label}<br>`)}this.showImageAtCurrentTime()}}),e(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),e(this,"startScrubbing",e=>{(k.nullOrUndefined(e.button)||!1===e.button||0===e.button)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),e(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):ee.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),e(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),e(this,"render",()=>{this.elements.thumb.container=I("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=I("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);let e=I("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=I("span",{},"00:00"),e.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(e),k.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=I("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),e(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),e(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();let e=this.thumbnails[0].frames.findIndex(e=>this.seekTime>=e.startTime&&this.seekTime<=e.endTime),t=e>=0,r=0;this.mouseDown||this.toggleThumbContainer(t),t&&(this.thumbnails.forEach((t,n)=>{this.loadedImages.includes(t.frames[e].text)&&(r=n)}),e!==this.showingThumb&&(this.showingThumb=e,this.loadImage(r)))}),e(this,"loadImage",(e=0)=>{let t=this.showingThumb,r=this.thumbnails[e],{urlPrefix:n}=r,i=r.frames[t],s=r.frames[t].text,a=n+s;if(this.currentImageElement&&this.currentImageElement.dataset.filename===s)this.showImage(this.currentImageElement,i,e,t,s,!1),this.currentImageElement.dataset.index=t,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);let o=new Image;o.src=a,o.dataset.index=t,o.dataset.filename=s,this.showingThumbFilename=s,this.player.debug.log(`Loading image: ${a}`),o.onload=()=>this.showImage(o,i,e,t,s,!0),this.loadingImage=o,this.removeOldImages(o)}}),e(this,"showImage",(e,t,r,n,i,s=!0)=>{this.player.debug.log(`Showing thumb: ${i}. num: ${n}. qual: ${r}. newimg: ${s}`),this.setImageSizeAndOffset(e,t),s&&(this.currentImageContainer.appendChild(e),this.currentImageElement=e,this.loadedImages.includes(i)||this.loadedImages.push(i)),this.preloadNearby(n,!0).then(this.preloadNearby(n,!1)).then(this.getHigherQuality(r,e,t,i))}),e(this,"removeOldImages",e=>{Array.from(this.currentImageContainer.children).forEach(t=>{if("img"!==t.tagName.toLowerCase())return;let r=this.usingSprites?500:1e3;if(t.dataset.index!==e.dataset.index&&!t.dataset.deleting){t.dataset.deleting=!0;let{currentImageContainer:n}=this;setTimeout(()=>{n.removeChild(t),this.player.debug.log(`Removing thumb: ${t.dataset.filename}`)},r)}})}),e(this,"preloadNearby",(e,t=!0)=>new Promise(r=>{setTimeout(()=>{let n=this.thumbnails[0].frames[e].text;if(this.showingThumbFilename===n){let i;i=t?this.thumbnails[0].frames.slice(e):this.thumbnails[0].frames.slice(0,e).reverse();let s=!1;i.forEach(e=>{let t=e.text;if(t!==n&&!this.loadedImages.includes(t)){s=!0,this.player.debug.log(`Preloading thumb filename: ${t}`);let{urlPrefix:i}=this.thumbnails[0],a=new Image;a.src=i+t,a.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${t}`),this.loadedImages.includes(t)||this.loadedImages.push(t),r()}}}),s||r()}},300)})),e(this,"getHigherQuality",(e,t,r,n)=>{if(e<this.thumbnails.length-1){let i=t.naturalHeight;this.usingSprites&&(i=r.h),i<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===n&&(this.player.debug.log(`Showing higher quality thumb for: ${n}`),this.loadImage(e+1))},300)}}),e(this,"toggleThumbContainer",(e=!1,t=!1)=>{let r=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(r,e),!e&&t&&(this.showingThumb=null,this.showingThumbFilename=null)}),e(this,"toggleScrubbingContainer",(e=!1)=>{let t=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(t,e),e||(this.showingThumb=null,this.showingThumbFilename=null)}),e(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),e(this,"setThumbContainerSizeAndPos",()=>{let{imageContainer:e}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(e.clientHeight>20&&e.clientWidth<20){let t=Math.floor(e.clientHeight*this.thumbAspectRatio);e.style.width=`${t}px`}else if(e.clientHeight<20&&e.clientWidth>20){let r=Math.floor(e.clientWidth/this.thumbAspectRatio);e.style.height=`${r}px`}}else{let n=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);e.style.height=`${this.thumbContainerHeight}px`,e.style.width=`${n}px`}this.setThumbContainerPos()}),e(this,"setThumbContainerPos",()=>{let e=this.player.elements.progress.getBoundingClientRect(),t=this.player.elements.container.getBoundingClientRect(),{container:r}=this.elements.thumb,n=t.left-e.left+10,i=t.right-e.left-r.clientWidth-10,s=this.mousePosX-e.left-r.clientWidth/2,a=eY(s,n,i);r.style.left=`${a}px`,r.style.setProperty("--preview-arrow-offset",s-a+"px")}),e(this,"setScrubbingContainerSize",()=>{let{width:e,height:t}=eQ(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${e}px`,this.elements.scrubbing.container.style.height=`${t}px`}),e(this,"setImageSizeAndOffset",(e,t)=>{if(!this.usingSprites)return;let r=this.thumbContainerHeight/t.h;e.style.height=e.naturalHeight*r+"px",e.style.width=e.naturalWidth*r+"px",e.style.left=`-${t.x*r}px`,e.style.top=`-${t.y*r}px`}),this.player=t,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){let{height:e}=eQ(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return e}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}let e0={insertElements(e,t){k.string(t)?M(e,this.media,{src:t}):k.array(t)&&t.forEach(t=>{M(e,this.media,t)})},change(e){A(e,"sources.length")?(ef.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],j(this.media),this.media=null,k.element(this.elements.container)&&this.elements.container.removeAttribute("class");let{sources:t,type:r}=e,[{provider:n=eO.html5,src:i}]=t;Object.assign(this,{provider:n,type:r,supported:G.check(r,n,this.config.playsinline),media:I("html5"===n?r:"div","html5"===n?{}:{src:i})}),this.elements.container.appendChild(this.media),k.boolean(e.autoplay)&&(this.config.autoplay=e.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),k.empty(e.poster)||(this.poster=e.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),eB.addStyleHook.call(this),this.isHTML5&&e0.insertElements.call(this,"source",t),this.config.title=e.title,eK.setup.call(this),this.isHTML5&&Object.keys(e).includes("tracks")&&e0.insertElements.call(this,"track",e.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&eB.build.call(this),this.isHTML5&&this.media.load(),k.empty(e.previewThumbnails)||(Object.assign(this.config.previewThumbnails,e.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new eX(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class e1{constructor(t,r){if(e(this,"play",()=>k.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>ei(this.media.play())),this.media.play()):null),e(this,"pause",()=>this.playing&&k.function(this.media.pause)?this.media.pause():null),e(this,"togglePlay",e=>(k.boolean(e)?e:!this.playing)?this.play():this.pause()),e(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):k.function(this.media.stop)&&this.media.stop()}),e(this,"restart",()=>{this.currentTime=0}),e(this,"rewind",e=>{this.currentTime-=k.number(e)?e:this.config.seekTime}),e(this,"forward",e=>{this.currentTime+=k.number(e)?e:this.config.seekTime}),e(this,"increaseVolume",e=>{let t=this.media.muted?0:this.volume;this.volume=t+(k.number(e)?e:0)}),e(this,"decreaseVolume",e=>{this.increaseVolume(-e)}),e(this,"airplay",()=>{G.airplay&&this.media.webkitShowPlaybackTargetPicker()}),e(this,"toggleControls",e=>{if(this.supported.ui&&!this.isAudio){let t=z(this.elements.container,this.config.classNames.hideControls),r=q(this.elements.container,this.config.classNames.hideControls,void 0===e?void 0:!e);return r&&k.array(this.config.controls)&&this.config.controls.includes("settings")&&!k.empty(this.config.settings)&&eR.toggleMenu.call(this,!1),r!==t&&et.call(this,this.media,r?"controlshidden":"controlsshown"),!r}return!1}),e(this,"on",(e,t)=>{Q.call(this,this.elements.container,e,t)}),e(this,"once",(e,t)=>{ee.call(this,this.elements.container,e,t)}),e(this,"off",(e,t)=>{X(this.elements.container,e,t)}),e(this,"destroy",(e,t=!1)=>{if(!this.ready)return;let r=()=>{document.body.style.overflow="",this.embed=null,t?(Object.keys(this.elements).length&&(j(this.elements.buttons.play),j(this.elements.captions),j(this.elements.controls),j(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),k.function(e)&&e()):(er.call(this),ef.cancelRequests.call(this),$(this.elements.original,this.elements.container),et.call(this,this.elements.original,"destroyed",!0),k.function(e)&&e.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(eB.toggleNativeControls.call(this,!0),r()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&k.function(this.embed.destroy)&&this.embed.destroy(),r()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(r),setTimeout(r,200))}),e(this,"supports",e=>G.mime.call(this,e)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=G.touch,this.media=t,k.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||k.nodeList(this.media)||k.array(this.media))&&(this.media=this.media[0]),this.config=N({},eN,e1.defaults,r||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch(e){return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new ej(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",G),k.nullOrUndefined(this.media)||!k.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!G.check().api)return void this.debug.error("Setup failed: no support");let n=this.media.cloneNode(!0);n.autoplay=!1,this.elements.original=n;let i=this.media.tagName.toLowerCase(),s=null,a=null;switch(i){case"div":if(s=this.media.querySelector("iframe"),k.element(s)){var o;if(a=eP(s.getAttribute("src")),this.provider=(o=a.toString(),/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(o)?eO.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(o)?eO.vimeo:null),this.elements.container=this.media,this.media=s,this.elements.container.className="",a.search.length){let l=["1","true"];l.includes(a.searchParams.get("autoplay"))&&(this.config.autoplay=!0),l.includes(a.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=l.includes(a.searchParams.get("playsinline")),this.config.youtube.hl=a.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(k.empty(this.provider)||!Object.values(eO).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=eI;break;case"video":case"audio":this.type=i,this.provider=eO.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=G.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new eU(this),this.storage=new e_(this),this.media.plyr=this,k.element(this.elements.container)||(this.elements.container=I("div"),L(this.media,this.elements.container)),eB.migrateStyles.call(this),eB.addStyleHook.call(this),eK.setup.call(this),this.config.debug&&Q.call(this,this.elements.container,this.config.events.join(" "),e=>{this.debug.log(`event: ${e.type}`)}),this.fullscreen=new eF(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&eB.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new eG(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>ei(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new eX(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===eO.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===eO.youtube}get isVimeo(){return this.provider===eO.vimeo}get isVideo(){return this.type===eI}get isAudio(){return"audio"===this.type}get playing(){return Boolean(this.ready&&!this.paused&&!this.ended)}get paused(){return Boolean(this.media.paused)}get stopped(){return Boolean(this.paused&&0===this.currentTime)}get ended(){return Boolean(this.media.ended)}set currentTime(e){if(!this.duration)return;let t=k.number(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){let{buffered:e}=this.media;return k.number(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}get seeking(){return Boolean(this.media.seeking)}get duration(){let e=parseFloat(this.config.duration),t=(this.media||{}).duration,r=k.number(t)&&t!==1/0?t:0;return e||r}set volume(e){let t=e;k.string(t)&&(t=Number(t)),k.number(t)||(t=this.storage.get("volume")),k.number(t)||({volume:t}=this.config),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!k.empty(e)&&this.muted&&t>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(e){let t=e;k.boolean(t)||(t=this.storage.get("muted")),k.boolean(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t}get muted(){return Boolean(this.media.muted)}get hasAudio(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}set speed(e){let t=null;k.number(e)&&(t=e),k.number(t)||(t=this.storage.get("speed")),k.number(t)||(t=this.config.speed.selected);let{minimumSpeed:r,maximumSpeed:n}=this;t=eY(t,r,n),this.config.speed.selected=t,setTimeout(()=>{this.media&&(this.media.playbackRate=t)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(e){let t=this.config.quality,r=this.options.quality;if(!r.length)return;let n=[!k.empty(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(k.number),i=!0;if(!r.includes(n)){let s=ea(r,n);this.debug.warn(`Unsupported quality option: ${n}, using ${s} instead`),n=s,i=!1}t.selected=n,this.media.quality=n,i&&this.storage.set({quality:n})}get quality(){return this.media.quality}set loop(e){let t=k.boolean(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t}get loop(){return Boolean(this.media.loop)}set source(e){e0.change.call(this,e)}get source(){return this.media.currentSrc}get download(){let{download:e}=this.config.urls;return k.url(e)?e:this.source}set download(e){k.url(e)&&(this.config.urls.download=e,eR.setDownloadUrl.call(this))}set poster(e){this.isVideo?eB.setPoster.call(this,e,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;let e=eu(ed.call(this));return k.array(e)?e.join(":"):e}set ratio(e){this.isVideo?k.string(e)&&ec(e)?(this.config.ratio=eu(e),ep.call(this)):this.debug.error(`Invalid aspect ratio specified (${e})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(e){this.config.autoplay=k.boolean(e)?e:this.config.autoplay}get autoplay(){return Boolean(this.config.autoplay)}toggleCaptions(e){eA.toggle.call(this,e,!1)}set currentTrack(e){eA.set.call(this,e,!1),eA.setup.call(this)}get currentTrack(){let{toggled:e,currentTrack:t}=this.captions;return e?t:-1}set language(e){eA.setLanguage.call(this,e,!1)}get language(){return(eA.getCurrentTrack.call(this)||{}).language}set pip(e){if(!G.pip)return;let t=k.boolean(e)?e:!this.pip;k.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?eL:"inline"),k.function(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}get pip(){return G.pip?k.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===eL:null}setPreviewThumbnails(e){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,e),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new eX(this))}static supported(e,t){return G.check(e,t)}static loadSprite(e,t){return eS(e,t)}static setup(e,t={}){let r=null;return k.string(e)?r=Array.from(document.querySelectorAll(e)):k.nodeList(e)?r=Array.from(e):k.array(e)&&(r=e.filter(k.element)),k.empty(r)?null:r.map(e=>new e1(e,t))}}return e1.defaults=JSON.parse(JSON.stringify(eN)),e1}())},4279:function(){Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}}),Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete Prism.languages.c.boolean},35433:function(){Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/}},2731:function(){var e,t,r;e=Prism,t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,r=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return t.source}),e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return r})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])},15251:function(){var e,t,r;e=Prism,t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/,e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css,(r=e.languages.markup)&&(r.tag.addInlined("style","css"),r.tag.addAttribute("style","css"))},52503:function(){var e,t,r,n;e=Prism,t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,r=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,n={pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}},e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[n,{pattern:RegExp(/(^|[^\w.])/.source+r+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:n.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+r+/[A-Z]\w*\b/.source),lookbehind:!0,inside:n.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":n,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+r+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:n.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+r+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:n.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0,inside:{punctuation:/\./}}})},39980:function(){Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|")+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Prism.languages.js=Prism.languages.javascript},24064:function(){!function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function r(e){return e=e.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+e+")")}var n=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,i=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return n}),s=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+i+s+"(?:"+i+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+i+s+")(?:"+i+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(n),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+i+")"+s+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+i+"$"),inside:{"table-header":{pattern:RegExp(n),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:r(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:r(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:r(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:r(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(t){["url","bold","italic","strike","code-snippet"].forEach(function(r){t!==r&&(e.languages.markdown[t].inside.content.inside[r]=e.languages.markdown[r])})}),e.hooks.add("after-tokenize",function(e){("markdown"===e.language||"md"===e.language)&&function e(t){if(t&&"string"!=typeof t)for(var r=0,n=t.length;r<n;r++){var i=t[r];if("code"!==i.type){e(i.content);continue}var s=i.content[1],a=i.content[3];if(s&&a&&"code-language"===s.type&&"code-block"===a.type&&"string"==typeof s.content){var o=s.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp"),l="language-"+(o=(/[a-z][\w-]*/i.exec(o)||[""])[0].toLowerCase());a.alias?"string"==typeof a.alias?a.alias=[a.alias,l]:a.alias.push(l):a.alias=[l]}}}(e.tokens)}),e.hooks.add("wrap",function(t){if("code-block"===t.type){for(var r,n="",i=0,s=t.classes.length;i<s;i++){var c=t.classes[i],u=/language-(.+)/.exec(c);if(u){n=u[1];break}}var d=e.languages[n];if(d)t.content=e.highlight(t.content.replace(a,"").replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(e,t){return"#"===(t=t.toLowerCase())[0]?l("x"===t[1]?parseInt(t.slice(2),16):Number(t.slice(1))):o[t]||e}),d,n);else if(n&&"none"!==n&&e.plugins.autoloader){var p="md-"+new Date().valueOf()+"-"+Math.floor(1e16*Math.random());t.attributes.id=p,e.plugins.autoloader.loadLanguages(n,function(){var t=document.getElementById(p);t&&(t.innerHTML=e.highlight(t.textContent,e.languages[n],n))})}}});var a=RegExp(e.languages.markup.tag.pattern.source,"gi"),o={amp:"&",lt:"<",gt:">",quot:'"'},l=String.fromCodePoint||String.fromCharCode;e.languages.md=e.languages.markdown}(Prism)},24335:function(){Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(e,t){var r={};r["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[t]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var n={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};n["language-"+t]={pattern:/[\s\S]+/,inside:Prism.languages[t]};var i={};i[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return e}),"i"),lookbehind:!0,greedy:!0,inside:n},Prism.languages.insertBefore("markup","cdata",i)}}),Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,t){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:Prism.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml},11426:function(){Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/}),delete Prism.languages.objectivec["class-name"],Prism.languages.objc=Prism.languages.objectivec},80366:function(){Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python},70767:function(){!function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,r=0;r<2;r++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)},35266:function(){Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/}},90874:function(){Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/},Prism.languages.swift["string-literal"].forEach(function(e){e.inside.interpolation.inside=Prism.languages.swift})},96836:function(){var e,t;(e=Prism).languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"],delete(t=e.languages.extend("typescript",{}))["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript},15660:function(e,t,r){/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n,i,s,a=function(e){var t=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,r=0,n={},i={manual:e.Prism&&e.Prism.manual,disableWorkerMessageHandler:e.Prism&&e.Prism.disableWorkerMessageHandler,util:{encode:function e(t){return t instanceof s?new s(t.type,e(t.content),t.alias):Array.isArray(t)?t.map(e):t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).slice(8,-1)},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++r}),e.__id},clone:function e(t,r){var n,s;switch(r=r||{},i.util.type(t)){case"Object":if(r[s=i.util.objId(t)])return r[s];for(var a in n={},r[s]=n,t)t.hasOwnProperty(a)&&(n[a]=e(t[a],r));return n;case"Array":if(r[s=i.util.objId(t)])return r[s];return n=[],r[s]=n,t.forEach(function(t,i){n[i]=e(t,r)}),n;default:return t}},getLanguage:function(e){for(;e;){var r=t.exec(e.className);if(r)return r[1].toLowerCase();e=e.parentElement}return"none"},setLanguage:function(e,r){e.className=e.className.replace(RegExp(t,"gi"),""),e.classList.add("language-"+r)},currentScript:function(){if("undefined"==typeof document)return null;if("currentScript"in document)return document.currentScript;try{throw Error()}catch(n){var e=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(n.stack)||[])[1];if(e){var t=document.getElementsByTagName("script");for(var r in t)if(t[r].src==e)return t[r]}return null}},isActive:function(e,t,r){for(var n="no-"+t;e;){var i=e.classList;if(i.contains(t))return!0;if(i.contains(n))return!1;e=e.parentElement}return!!r}},languages:{plain:n,plaintext:n,text:n,txt:n,extend:function(e,t){var r=i.util.clone(i.languages[e]);for(var n in t)r[n]=t[n];return r},insertBefore:function(e,t,r,n){var s=(n=n||i.languages)[e],a={};for(var o in s)if(s.hasOwnProperty(o)){if(o==t)for(var l in r)r.hasOwnProperty(l)&&(a[l]=r[l]);r.hasOwnProperty(o)||(a[o]=s[o])}var c=n[e];return n[e]=a,i.languages.DFS(i.languages,function(t,r){r===c&&t!=e&&(this[t]=a)}),a},DFS:function e(t,r,n,s){s=s||{};var a=i.util.objId;for(var o in t)if(t.hasOwnProperty(o)){r.call(t,o,t[o],n||o);var l=t[o],c=i.util.type(l);"Object"!==c||s[a(l)]?"Array"!==c||s[a(l)]||(s[a(l)]=!0,e(l,r,o,s)):(s[a(l)]=!0,e(l,r,null,s))}}},plugins:{},highlightAll:function(e,t){i.highlightAllUnder(document,e,t)},highlightAllUnder:function(e,t,r){var n={callback:r,container:e,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",n),n.elements=Array.prototype.slice.apply(n.container.querySelectorAll(n.selector)),i.hooks.run("before-all-elements-highlight",n);for(var s,a=0;s=n.elements[a++];)i.highlightElement(s,!0===t,n.callback)},highlightElement:function(t,r,n){var s=i.util.getLanguage(t),a=i.languages[s];i.util.setLanguage(t,s);var o=t.parentElement;o&&"pre"===o.nodeName.toLowerCase()&&i.util.setLanguage(o,s);var l=t.textContent,c={element:t,language:s,grammar:a,code:l};function u(e){c.highlightedCode=e,i.hooks.run("before-insert",c),c.element.innerHTML=c.highlightedCode,i.hooks.run("after-highlight",c),i.hooks.run("complete",c),n&&n.call(c.element)}if(i.hooks.run("before-sanity-check",c),(o=c.element.parentElement)&&"pre"===o.nodeName.toLowerCase()&&!o.hasAttribute("tabindex")&&o.setAttribute("tabindex","0"),!c.code){i.hooks.run("complete",c),n&&n.call(c.element);return}if(i.hooks.run("before-highlight",c),!c.grammar){u(i.util.encode(c.code));return}if(r&&e.Worker){var d=new Worker(i.filename);d.onmessage=function(e){u(e.data)},d.postMessage(JSON.stringify({language:c.language,code:c.code,immediateClose:!0}))}else u(i.highlight(c.code,c.grammar,c.language))},highlight:function(e,t,r){var n={code:e,grammar:t,language:r};if(i.hooks.run("before-tokenize",n),!n.grammar)throw Error('The language "'+n.language+'" has no grammar.');return n.tokens=i.tokenize(n.code,n.grammar),i.hooks.run("after-tokenize",n),s.stringify(i.util.encode(n.tokens),n.language)},tokenize:function(e,t){var r=t.rest;if(r){for(var n in r)t[n]=r[n];delete t.rest}var c=new o;return l(c,c.head,e),function e(t,r,n,o,c,u){for(var d in n)if(n.hasOwnProperty(d)&&n[d]){var p=n[d];p=Array.isArray(p)?p:[p];for(var h=0;h<p.length;++h){if(u&&u.cause==d+","+h)return;var f=p[h],m=f.inside,g=!!f.lookbehind,y=!!f.greedy,v=f.alias;if(y&&!f.pattern.global){var b=f.pattern.toString().match(/[imsuy]*$/)[0];f.pattern=RegExp(f.pattern.source,b+"g")}for(var w=f.pattern||f,_=o.next,x=c;_!==r.tail&&(!u||!(x>=u.reach));x+=_.value.length,_=_.next){var S,T=_.value;if(r.length>t.length)return;if(!(T instanceof s)){var E=1;if(y){if(!(S=a(w,x,t,g))||S.index>=t.length)break;var C=S.index,k=S.index+S[0].length,R=x;for(R+=_.value.length;C>=R;)R+=(_=_.next).value.length;if(R-=_.value.length,x=R,_.value instanceof s)continue;for(var P=_;P!==r.tail&&(R<k||"string"==typeof P.value);P=P.next)E++,R+=P.value.length;E--,T=t.slice(x,R),S.index-=x}else if(!(S=a(w,0,T,g)))continue;var C=S.index,D=S[0],A=T.slice(0,C),N=T.slice(C+D.length),L=x+T.length;u&&L>u.reach&&(u.reach=L);var O=_.prev;A&&(O=l(r,O,A),x+=A.length),function(e,t,r){for(var n=t.next,i=0;i<r&&n!==e.tail;i++)n=n.next;t.next=n,n.prev=t,e.length-=i}(r,O,E);var I=new s(d,m?i.tokenize(D,m):D,v,D);if(_=l(r,O,I),N&&l(r,_,N),E>1){var M={cause:d+","+h,reach:L};e(t,r,n,_.prev,x,M),u&&M.reach>u.reach&&(u.reach=M.reach)}}}}}}(e,c,t,c.head,0),function(e){for(var t=[],r=e.head.next;r!==e.tail;)t.push(r.value),r=r.next;return t}(c)},hooks:{all:{},add:function(e,t){var r=i.hooks.all;r[e]=r[e]||[],r[e].push(t)},run:function(e,t){var r=i.hooks.all[e];if(r&&r.length)for(var n,s=0;n=r[s++];)n(t)}},Token:s};function s(e,t,r,n){this.type=e,this.content=t,this.alias=r,this.length=0|(n||"").length}function a(e,t,r,n){e.lastIndex=t;var i=e.exec(r);if(i&&n&&i[1]){var s=i[1].length;i.index+=s,i[0]=i[0].slice(s)}return i}function o(){var e={value:null,prev:null,next:null},t={value:null,prev:e,next:null};e.next=t,this.head=e,this.tail=t,this.length=0}function l(e,t,r){var n=t.next,i={value:r,prev:t,next:n};return t.next=i,n.prev=i,e.length++,i}if(e.Prism=i,s.stringify=function e(t,r){if("string"==typeof t)return t;if(Array.isArray(t)){var n="";return t.forEach(function(t){n+=e(t,r)}),n}var s={type:t.type,content:e(t.content,r),tag:"span",classes:["token",t.type],attributes:{},language:r},a=t.alias;a&&(Array.isArray(a)?Array.prototype.push.apply(s.classes,a):s.classes.push(a)),i.hooks.run("wrap",s);var o="";for(var l in s.attributes)o+=" "+l+'="'+(s.attributes[l]||"").replace(/"/g,"&quot;")+'"';return"<"+s.tag+' class="'+s.classes.join(" ")+'"'+o+">"+s.content+"</"+s.tag+">"},!e.document)return e.addEventListener&&(i.disableWorkerMessageHandler||e.addEventListener("message",function(t){var r=JSON.parse(t.data),n=r.language,s=r.code,a=r.immediateClose;e.postMessage(i.highlight(s,i.languages[n],n)),a&&e.close()},!1)),i;var c=i.util.currentScript();function u(){i.manual||i.highlightAll()}if(c&&(i.filename=c.src,c.hasAttribute("data-manual")&&(i.manual=!0)),!i.manual){var d=document.readyState;"loading"===d||"interactive"===d&&c&&c.defer?document.addEventListener("DOMContentLoaded",u):window.requestAnimationFrame?window.requestAnimationFrame(u):window.setTimeout(u,16)}return i}("undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{});e.exports&&(e.exports=a),void 0!==r.g&&(r.g.Prism=a),a.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},a.languages.markup.tag.inside["attr-value"].inside.entity=a.languages.markup.entity,a.languages.markup.doctype.inside["internal-subset"].inside=a.languages.markup,a.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),Object.defineProperty(a.languages.markup.tag,"addInlined",{value:function(e,t){var r={};r["language-"+t]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:a.languages[t]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var n={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};n["language-"+t]={pattern:/[\s\S]+/,inside:a.languages[t]};var i={};i[e]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return e}),"i"),lookbehind:!0,greedy:!0,inside:n},a.languages.insertBefore("markup","cdata",i)}}),Object.defineProperty(a.languages.markup.tag,"addAttribute",{value:function(e,t){a.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:a.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),a.languages.html=a.languages.markup,a.languages.mathml=a.languages.markup,a.languages.svg=a.languages.markup,a.languages.xml=a.languages.extend("markup",{}),a.languages.ssml=a.languages.xml,a.languages.atom=a.languages.xml,a.languages.rss=a.languages.xml,i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/,(n=a).languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp("(^|[{}\\s])[^{}\\s](?:[^{};\"'\\s]|\\s+(?![\\s{])|"+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css,(s=n.languages.markup)&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css")),a.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},a.languages.javascript=a.languages.extend("clike",{"class-name":[a.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|")+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),a.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,a.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:a.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:a.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:a.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:a.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:a.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),a.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:a.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),a.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),a.languages.markup&&(a.languages.markup.tag.addInlined("script","javascript"),a.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),a.languages.js=a.languages.javascript,function(){if(void 0!==a&&"undefined"!=typeof document){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},t="data-src-status",r="loading",n="loaded",i="pre[data-src]:not(["+t+'="'+n+'"]):not(['+t+'="'+r+'"])';a.hooks.add("before-highlightall",function(e){e.selector+=", "+i}),a.hooks.add("before-sanity-check",function(s){var o=s.element;if(o.matches(i)){s.code="",o.setAttribute(t,r);var l,c,u,d=o.appendChild(document.createElement("CODE"));d.textContent="Loading";var p=o.getAttribute("data-src"),h=s.language;if("none"===h){var f=(/\.(\w+)$/.exec(p)||[,"none"])[1];h=e[f]||f}a.util.setLanguage(d,h),a.util.setLanguage(o,h);var m=a.plugins.autoloader;m&&m.loadLanguages(h),l=function(e){o.setAttribute(t,n);var r=function(e){var t=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(e||"");if(t){var r=Number(t[1]),n=t[2],i=t[3];return n?i?[r,Number(i)]:[r,void 0]:[r,r]}}(o.getAttribute("data-range"));if(r){var i=e.split(/\r\n?|\n/g),s=r[0],l=null==r[1]?i.length:r[1];s<0&&(s+=i.length),s=Math.max(0,Math.min(s-1,i.length)),l<0&&(l+=i.length),l=Math.max(0,Math.min(l,i.length)),e=i.slice(s,l).join("\n"),o.hasAttribute("data-start")||o.setAttribute("data-start",String(s+1))}d.textContent=e,a.highlightElement(d)},c=function(e){o.setAttribute(t,"failed"),d.textContent=e},(u=new XMLHttpRequest).open("GET",p,!0),u.onreadystatechange=function(){4==u.readyState&&(u.status<400&&u.responseText?l(u.responseText):u.status>=400?c(" Error "+u.status+" while fetching file: "+u.statusText):c(" Error: File does not exist or is empty"))},u.send(null)}}),a.plugins.fileHighlight={highlight:function(e){for(var t,r=(e||document).querySelectorAll(i),n=0;t=r[n++];)a.highlightElement(t)}};var s=!1;a.fileHighlight=function(){s||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),s=!0),a.plugins.fileHighlight.highlight.apply(this,arguments)}}}()},92703:function(e,t,r){"use strict";var n=r(50414);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,r,i,s,a){if(a!==n){var o=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return r.PropTypes=r,r}},45697:function(e,t,r){e.exports=r(92703)()},50414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},54375:function(e,t,r){/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let n;e.exports="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:r.g):e=>(n||(n=Promise.resolve())).then(e).catch(e=>setTimeout(()=>{throw e},0))},96692:function(e){var t=e.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return null!=e.address?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return null!=e.subtype?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return null!=e.sessionConfig?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=(null!=e.raddr?" raddr %s rport %d":"%v%v")+(null!=e.tcptype?" tcptype %s":"%v"),null!=e.generation&&(t+=" generation %d"),t+=(null!=e["network-id"]?" network-id %d":"%v")+(null!=e["network-cost"]?" network-cost %d":"%v")}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return null!=e.attribute&&(t+=" %s",null!=e.value&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return null!=e.maxMessageSize?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(null!=e.clksrcExt?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){return"mediaclk:"+((null!=e.id?"id=%s %s":"%v%s")+(null!=e.mediaClockValue?"=%s":"")+(null!=e.rateNumerator?" rate=%s":""))+(null!=e.rateDenominator?"/%s":"")}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(t).forEach(function(e){t[e].forEach(function(e){e.reg||(e.reg=/(.*)/),e.format||(e.format="%s")})})},70766:function(e,t,r){var n=r(70962),i=r(95776);t.write=i,t.parse=n.parse,t.parseParams=n.parseParams,t.parseFmtpConfig=n.parseFmtpConfig,t.parsePayloads=n.parsePayloads,t.parseRemoteCandidates=n.parseRemoteCandidates,t.parseImageAttributes=n.parseImageAttributes,t.parseSimulcastStreamList=n.parseSimulcastStreamList},70962:function(e,t,r){var n=function(e){return String(Number(e))===e?Number(e):e},i=function(e,t,r,i){if(i&&!r)t[i]=n(e[1]);else for(var s=0;s<r.length;s+=1)null!=e[s+1]&&(t[r[s]]=n(e[s+1]))},s=function(e,t,r){var n=e.name&&e.names;e.push&&!t[e.push]?t[e.push]=[]:n&&!t[e.name]&&(t[e.name]={});var s=e.push?{}:n?t[e.name]:t;i(r.match(e.reg),s,e.names,e.name),e.push&&t[e.push].push(s)},a=r(96692),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(e){var t={},r=[],n=t;return e.split(/(\r\n|\r|\n)/).filter(o).forEach(function(e){var t=e[0],i=e.slice(2);"m"===t&&(r.push({rtp:[],fmtp:[]}),n=r[r.length-1]);for(var o=0;o<(a[t]||[]).length;o+=1){var l=a[t][o];if(l.reg.test(i))return s(l,n,i)}}),t.media=r,t};var l=function(e,t){var r=t.split(/=(.+)/,2);return 2===r.length?e[r[0]]=n(r[1]):1===r.length&&t.length>1&&(e[r[0]]=void 0),e};t.parseParams=function(e){return e.split(/;\s?/).reduce(l,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(e){return e.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(e){for(var t=[],r=e.split(" ").map(n),i=0;i<r.length;i+=3)t.push({component:r[i],ip:r[i+1],port:r[i+2]});return t},t.parseImageAttributes=function(e){return e.split(" ").map(function(e){return e.substring(1,e.length-1).split(",").reduce(l,{})})},t.parseSimulcastStreamList=function(e){return e.split(";").map(function(e){return e.split(",").map(function(e){var t,r=!1;return"~"!==e[0]?t=n(e):(t=n(e.substring(1,e.length)),r=!0),{scid:t,paused:r}})})}},95776:function(e,t,r){var n=r(96692),i=/%[sdv%]/g,s=function(e){var t=1,r=arguments,n=r.length;return e.replace(i,function(e){if(t>=n)return e;var i=r[t];switch(t+=1,e){case"%%":return"%";case"%s":return String(i);case"%d":return Number(i);case"%v":return""}})},a=function(e,t,r){var n=[e+"="+(t.format instanceof Function?t.format(t.push?r:r[t.name]):t.format)];if(t.names)for(var i=0;i<t.names.length;i+=1){var a=t.names[i];t.name?n.push(r[t.name][a]):n.push(r[t.names[i]])}else n.push(r[t.name]);return s.apply(null,n)},o=["v","o","s","i","u","e","p","c","b","t","r","z","a"],l=["i","c","b","a"];e.exports=function(e,t){t=t||{},null==e.version&&(e.version=0),null==e.name&&(e.name=" "),e.media.forEach(function(e){null==e.payloads&&(e.payloads="")});var r=t.outerOrder||o,i=t.innerOrder||l,s=[];return r.forEach(function(t){n[t].forEach(function(r){r.name in e&&null!=e[r.name]?s.push(a(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach(function(e){s.push(a(t,r,e))})})}),e.media.forEach(function(e){s.push(a("m",n.m[0],e)),i.forEach(function(t){n[t].forEach(function(r){r.name in e&&null!=e[r.name]?s.push(a(t,r,e)):r.push in e&&null!=e[r.push]&&e[r.push].forEach(function(e){s.push(a(t,r,e))})})})}),s.join("\r\n")+"\r\n"}},50590:function(e){e.exports=e=>{if(e[Symbol.asyncIterator])return e;if(e.getReader)return async function*(){let t=e.getReader();try{for(;;){let{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}();throw Error("unknown stream")}},42238:function(e,t,r){var n;!function(i,s){"use strict";var a="function",o="undefined",l="object",c="string",u="major",d="model",p="name",h="type",f="vendor",m="version",g="architecture",y="console",v="mobile",b="tablet",w="smarttv",_="wearable",x="embedded",S="Amazon",T="Apple",E="ASUS",C="BlackBerry",k="Browser",R="Chrome",P="Firefox",D="Google",A="Huawei",N="Microsoft",L="Motorola",O="Opera",I="Samsung",M="Sharp",j="Sony",F="Xiaomi",$="Zebra",B="Facebook",U="Chromium OS",q="Mac OS",z=function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},V=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},H=function(e,t){return typeof e===c&&-1!==W(t).indexOf(W(e))},W=function(e){return e.toLowerCase()},Z=function(e,t){if(typeof e===c)return e=e.replace(/^\s\s*/,""),typeof t===o?e:e.substring(0,350)},K=function(e,t){for(var r,n,i,o,c,u,d=0;d<t.length&&!c;){var p=t[d],h=t[d+1];for(r=n=0;r<p.length&&!c&&p[r];)if(c=p[r++].exec(e))for(i=0;i<h.length;i++)u=c[++n],typeof(o=h[i])===l&&o.length>0?2===o.length?typeof o[1]==a?this[o[0]]=o[1].call(this,u):this[o[0]]=o[1]:3===o.length?typeof o[1]!==a||o[1].exec&&o[1].test?this[o[0]]=u?u.replace(o[1],o[2]):s:this[o[0]]=u?o[1].call(this,u,o[2]):s:4===o.length&&(this[o[0]]=u?o[3].call(this,u.replace(o[1],o[2])):s):this[o]=u||s;d+=2}},G=function(e,t){for(var r in t)if(typeof t[r]===l&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(H(t[r][n],e))return"?"===r?s:r}else if(H(t[r],e))return"?"===r?s:r;return e},Y={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},J={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[m,[p,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[m,[p,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[p,m],[/opios[\/ ]+([\w\.]+)/i],[m,[p,O+" Mini"]],[/\bopr\/([\w\.]+)/i],[m,[p,O]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[p,m],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[m,[p,"UC"+k]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[m,[p,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[m,[p,"WeChat"]],[/konqueror\/([\w\.]+)/i],[m,[p,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[m,[p,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[m,[p,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[p,/(.+)/,"$1 Secure "+k],m],[/\bfocus\/([\w\.]+)/i],[m,[p,P+" Focus"]],[/\bopt\/([\w\.]+)/i],[m,[p,O+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[m,[p,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[m,[p,"Dolphin"]],[/coast\/([\w\.]+)/i],[m,[p,O+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[m,[p,"MIUI "+k]],[/fxios\/([-\w\.]+)/i],[m,[p,P]],[/\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+k]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[p,/(.+)/,"$1 "+k],m],[/(comodo_dragon)\/([\w\.]+)/i],[[p,/_/g," "],m],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[p,m],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[p],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[p,B],m],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[p,m],[/\bgsa\/([\w\.]+) .*safari\//i],[m,[p,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[m,[p,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[m,[p,R+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[p,R+" WebView"],m],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[m,[p,"Android "+k]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[p,m],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[m,[p,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[m,p],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[p,[m,G,{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[p,m],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[p,"Netscape"],m],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[m,[p,P+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[p,m],[/(cobalt)\/([\w\.]+)/i],[p,[m,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,W]],[/((?:i[346]|x)86)[;\)]/i],[[g,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[g,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[g,/ower/,"",W]],[/(sun4\w)[;\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[g,W]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[f,I],[h,b]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[d,[f,I],[h,v]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[d,[f,T],[h,v]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[d,[f,T],[h,b]],[/(macintosh);/i],[d,[f,T]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[d,[f,M],[h,v]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[d,[f,A],[h,b]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[d,[f,A],[h,v]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[d,/_/g," "],[f,F],[h,v]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[d,/_/g," "],[f,F],[h,b]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[d,[f,"OPPO"],[h,v]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[d,[f,"Vivo"],[h,v]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[d,[f,"Realme"],[h,v]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[d,[f,L],[h,v]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[d,[f,L],[h,b]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[f,"LG"],[h,b]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[d,[f,"LG"],[h,v]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[d,[f,"Lenovo"],[h,b]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[d,/_/g," "],[f,"Nokia"],[h,v]],[/(pixel c)\b/i],[d,[f,D],[h,b]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[d,[f,D],[h,v]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[d,[f,j],[h,v]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[d,"Xperia Tablet"],[f,j],[h,b]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[d,[f,"OnePlus"],[h,v]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[d,[f,S],[h,b]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[d,/(.+)/g,"Fire Phone $1"],[f,S],[h,v]],[/(playbook);[-\w\),; ]+(rim)/i],[d,f,[h,b]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[d,[f,C],[h,v]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[d,[f,E],[h,b]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[d,[f,E],[h,v]],[/(nexus 9)/i],[d,[f,"HTC"],[h,b]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[f,[d,/_/g," "],[h,v]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[d,[f,"Acer"],[h,b]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[d,[f,"Meizu"],[h,v]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[f,d,[h,v]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[f,d,[h,b]],[/(surface duo)/i],[d,[f,N],[h,b]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[d,[f,"Fairphone"],[h,v]],[/(u304aa)/i],[d,[f,"AT&T"],[h,v]],[/\bsie-(\w*)/i],[d,[f,"Siemens"],[h,v]],[/\b(rct\w+) b/i],[d,[f,"RCA"],[h,b]],[/\b(venue[\d ]{2,7}) b/i],[d,[f,"Dell"],[h,b]],[/\b(q(?:mv|ta)\w+) b/i],[d,[f,"Verizon"],[h,b]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[d,[f,"Barnes & Noble"],[h,b]],[/\b(tm\d{3}\w+) b/i],[d,[f,"NuVision"],[h,b]],[/\b(k88) b/i],[d,[f,"ZTE"],[h,b]],[/\b(nx\d{3}j) b/i],[d,[f,"ZTE"],[h,v]],[/\b(gen\d{3}) b.+49h/i],[d,[f,"Swiss"],[h,v]],[/\b(zur\d{3}) b/i],[d,[f,"Swiss"],[h,b]],[/\b((zeki)?tb.*\b) b/i],[d,[f,"Zeki"],[h,b]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[f,"Dragon Touch"],d,[h,b]],[/\b(ns-?\w{0,9}) b/i],[d,[f,"Insignia"],[h,b]],[/\b((nxa|next)-?\w{0,9}) b/i],[d,[f,"NextBook"],[h,b]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],d,[h,v]],[/\b(lvtel\-)?(v1[12]) b/i],[[f,"LvTel"],d,[h,v]],[/\b(ph-1) /i],[d,[f,"Essential"],[h,v]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[d,[f,"Envizen"],[h,b]],[/\b(trio[-\w\. ]+) b/i],[d,[f,"MachSpeed"],[h,b]],[/\btu_(1491) b/i],[d,[f,"Rotor"],[h,b]],[/(shield[\w ]+) b/i],[d,[f,"Nvidia"],[h,b]],[/(sprint) (\w+)/i],[f,d,[h,v]],[/(kin\.[onetw]{3})/i],[[d,/\./g," "],[f,N],[h,v]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[d,[f,$],[h,b]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[d,[f,$],[h,v]],[/smart-tv.+(samsung)/i],[f,[h,w]],[/hbbtv.+maple;(\d+)/i],[[d,/^/,"SmartTV"],[f,I],[h,w]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[f,"LG"],[h,w]],[/(apple) ?tv/i],[f,[d,T+" TV"],[h,w]],[/crkey/i],[[d,R+"cast"],[f,D],[h,w]],[/droid.+aft(\w)( bui|\))/i],[d,[f,S],[h,w]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[d,[f,M],[h,w]],[/(bravia[\w ]+)( bui|\))/i],[d,[f,j],[h,w]],[/(mitv-\w{5}) bui/i],[d,[f,F],[h,w]],[/Hbbtv.*(technisat) (.*);/i],[f,d,[h,w]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[f,Z],[d,Z],[h,w]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,w]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,d,[h,y]],[/droid.+; (shield) bui/i],[d,[f,"Nvidia"],[h,y]],[/(playstation [345portablevi]+)/i],[d,[f,j],[h,y]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[d,[f,N],[h,y]],[/((pebble))app/i],[f,d,[h,_]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[d,[f,T],[h,_]],[/droid.+; (glass) \d/i],[d,[f,D],[h,_]],[/droid.+; (wt63?0{2,3})\)/i],[d,[f,$],[h,_]],[/(quest( 2| pro)?)/i],[d,[f,B],[h,_]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[f,[h,x]],[/(aeobc)\b/i],[d,[f,S],[h,x]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[d,[h,v]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[d,[h,b]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,b]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,v]],[/(android[-\w\. ]{0,9});.+buil/i],[d,[f,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[m,[p,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[m,[p,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[p,m],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[m,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,m],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[p,[m,G,Y]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[p,"Windows"],[m,G,Y]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[m,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[p,q],[m,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[m,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[p,m],[/\(bb(10);/i],[m,[p,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[m,[p,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[m,[p,P+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[m,[p,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[m,[p,"watchOS"]],[/crkey\/([\d\.]+)/i],[m,[p,R+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[p,U],m],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[p,m],[/(sunos) ?([\w\.\d]*)/i],[[p,"Solaris"],m],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[p,m]]},Q=function(e,t){if(typeof e===l&&(t=e,e=s),!(this instanceof Q))return new Q(e,t).getResult();var r=typeof i!==o&&i.navigator?i.navigator:s,n=e||(r&&r.userAgent?r.userAgent:""),y=r&&r.userAgentData?r.userAgentData:s,w=t?z(J,t):J,_=r&&r.userAgent==n;return this.getBrowser=function(){var e,t={};return t[p]=s,t[m]=s,K.call(t,n,w.browser),t[u]=typeof(e=t[m])===c?e.replace(/[^\d\.]/g,"").split(".")[0]:s,_&&r&&r.brave&&typeof r.brave.isBrave==a&&(t[p]="Brave"),t},this.getCPU=function(){var e={};return e[g]=s,K.call(e,n,w.cpu),e},this.getDevice=function(){var e={};return e[f]=s,e[d]=s,e[h]=s,K.call(e,n,w.device),_&&!e[h]&&y&&y.mobile&&(e[h]=v),_&&"Macintosh"==e[d]&&r&&typeof r.standalone!==o&&r.maxTouchPoints&&r.maxTouchPoints>2&&(e[d]="iPad",e[h]=b),e},this.getEngine=function(){var e={};return e[p]=s,e[m]=s,K.call(e,n,w.engine),e},this.getOS=function(){var e={};return e[p]=s,e[m]=s,K.call(e,n,w.os),_&&!e[p]&&y&&"Unknown"!=y.platform&&(e[p]=y.platform.replace(/chrome os/i,U).replace(/macos/i,q)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(e){return n=typeof e===c&&e.length>350?Z(e,350):e,this},this.setUA(n),this};Q.VERSION="1.0.35",Q.BROWSER=V([p,m,u]),Q.CPU=V([g]),Q.DEVICE=V([d,f,h,y,v,w,b,_,x]),Q.ENGINE=Q.OS=V([p,m]),typeof t!==o?(e.exports&&(t=e.exports=Q),t.UAParser=Q):r.amdO?(n=(function(){return Q}).call(t,r,t,e),s!==n&&(e.exports=n)):typeof i!==o&&(i.UAParser=Q);var X=typeof i!==o&&(i.jQuery||i.Zepto);if(X&&!X.ua){var ee=new Q;X.ua=ee.getResult(),X.ua.get=function(){return ee.getUA()},X.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var r in t)X.ua[r]=t[r]}}}("object"==typeof window?window:this)},26988:function(e){e.exports=t;function t(e,r){var n,i=0,r=r||0,s=0,a=r,o=e.length;do{if(a>=o||s>49)throw t.bytes=0,RangeError("Could not decode varint");n=e[a++],i+=s<28?(127&n)<<s:(127&n)*Math.pow(2,s),s+=7}while(n>=128);return t.bytes=a-r,i}},1312:function(e){e.exports=t;function t(e,r,n){if(Number.MAX_SAFE_INTEGER&&e>Number.MAX_SAFE_INTEGER)throw t.bytes=0,RangeError("Could not encode varint");r=r||[];for(var i=n=n||0;e>=2147483648;)r[n++]=255&e|128,e/=128;for(;-128&e;)r[n++]=255&e|128,e>>>=7;return r[n]=0|e,t.bytes=n-i+1,r}},94676:function(e,t,r){e.exports={encode:r(1312),decode:r(26988),encodingLength:r(10082)}},10082:function(e){e.exports=function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}},69649:function(){},7801:function(){},86243:function(){},6042:function(){},74801:function(){},18067:function(){},30991:function(){},95286:function(){},40402:function(){},51142:function(e,t,r){"use strict";r.d(t,{W:function(){return o}});var n=r(97582),i=r(86909),s=r(48216),a=function(){function e(e,t,r,i){var s=this;this.operation=e,this.nextLink=t,this.delayFor=r,this.retryIf=i,this.retryCount=0,this.values=[],this.complete=!1,this.canceled=!1,this.observers=[],this.currentSubscription=null,this.onNext=function(e){s.values.push(e);for(var t=0,r=s.observers;t<r.length;t++){var n=r[t];n&&n.next(e)}},this.onComplete=function(){s.complete=!0;for(var e=0,t=s.observers;e<t.length;e++){var r=t[e];r&&r.complete()}},this.onError=function(e){return(0,n.mG)(s,void 0,void 0,function(){var t,r,i;return(0,n.Jh)(this,function(n){switch(n.label){case 0:return this.retryCount+=1,[4,this.retryIf(this.retryCount,this.operation,e)];case 1:if(n.sent())return this.scheduleRetry(this.delayFor(this.retryCount,this.operation,e)),[2];for(t=0,this.error=e,r=this.observers;t<r.length;t++)(i=r[t])&&i.error(e);return[2]}})})}}return e.prototype.subscribe=function(e){if(this.canceled)throw Error("Subscribing to a retryable link that was canceled is not supported");this.observers.push(e);for(var t=0,r=this.values;t<r.length;t++){var n=r[t];e.next(n)}this.complete?e.complete():this.error&&e.error(this.error)},e.prototype.unsubscribe=function(e){var t=this.observers.indexOf(e);if(t<0)throw Error("RetryLink BUG! Attempting to unsubscribe unknown observer!");this.observers[t]=null,this.observers.every(function(e){return null===e})&&this.cancel()},e.prototype.start=function(){this.currentSubscription||this.try()},e.prototype.cancel=function(){this.currentSubscription&&this.currentSubscription.unsubscribe(),clearTimeout(this.timerId),this.timerId=void 0,this.currentSubscription=null,this.canceled=!0},e.prototype.try=function(){this.currentSubscription=this.nextLink(this.operation).subscribe({next:this.onNext,error:this.onError,complete:this.onComplete})},e.prototype.scheduleRetry=function(e){var t=this;if(this.timerId)throw Error("RetryLink BUG! Encountered overlapping retries");this.timerId=setTimeout(function(){t.timerId=void 0,t.try()},e)},e}(),o=function(e){function t(t){var r,n,i,s,a,o,l,c,u,d,p,h,f=e.call(this)||this,m=t||{},g=m.attempts,y=m.delay;return f.delayFor="function"==typeof y?y:(i=void 0===(n=(r=y||{}).initial)?300:n,a=void 0===(s=r.jitter)||s,l=void 0===(o=r.max)?1/0:o,c=a?i:i/2,function(e){var t=Math.min(l,c*Math.pow(2,e));return a&&(t=Math.random()*t),t}),f.retryIf="function"==typeof g?g:(d=(u=g||{}).retryIf,h=void 0===(p=u.max)?5:p,function(e,t,r){return!(e>=h)&&(d?d(r,t):!!r)}),f}return(0,n.ZT)(t,e),t.prototype.request=function(e,t){var r=new a(e,t,this.delayFor,this.retryIf);return r.start(),new s.y(function(e){return r.subscribe(e),function(){r.unsubscribe(e)}})},t}(i.i)},2824:function(e,t,r){"use strict";r.d(t,{p:function(){return i}});var n=r(48216);function i(e){return new n.y(function(t){e.then(function(e){t.next(e),t.complete()}).catch(t.error.bind(t))})}},45933:function(e,t,r){"use strict";r.d(t,{V:function(){return i}});var n=r(13917);function i(e){var t=!1;return new Promise(function(r,i){e.subscribe({next:function(e){t?__DEV__&&n.kG.warn("Promise Wrapper does not support multiple results from Observable"):(t=!0,r(e))},error:i})})}},87462:function(e,t,r){"use strict";function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}r.d(t,{Z:function(){return n}})},10050:function(e,t,r){"use strict";var n=r(67294);let i=n.forwardRef(function({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z"}))});t.Z=i},62940:function(e,t,r){"use strict";var n=r(67294);let i=n.forwardRef(function({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))});t.Z=i},23:function(e,t,r){"use strict";var n=r(67294);let i=n.forwardRef(function({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 011.242 7.244l-4.5 4.5a4.5 4.5 0 01-6.364-6.364l1.757-1.757m13.35-.622l1.757-1.757a4.5 4.5 0 00-6.364-6.364l-4.5 4.5a4.5 4.5 0 001.242 7.244"}))});t.Z=i},56186:function(e,t,r){"use strict";var n=r(67294);let i=n.forwardRef(function({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"}))});t.Z=i},89814:function(e,t,r){"use strict";var n=r(67294);let i=n.forwardRef(function({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 006-6v-1.5m-6 7.5a6 6 0 01-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 01-3-3V4.5a3 3 0 116 0v8.25a3 3 0 01-3 3z"}))});t.Z=i},83436:function(e,t,r){"use strict";var n=r(67294);let i=n.forwardRef(function({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 5.25v13.5m-7.5-13.5v13.5"}))});t.Z=i},21321:function(e,t,r){"use strict";var n=r(67294);let i=n.forwardRef(function({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.348a1.125 1.125 0 010 1.971l-11.54 6.347a1.125 1.125 0 01-1.667-.985V5.653z"}))});t.Z=i},78680:function(e,t,r){"use strict";var n=r(67294);let i=n.forwardRef(function({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});t.Z=i},28771:function(e,t,r){"use strict";var n=r(67294);let i=n.forwardRef(function({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.217 10.907a2.25 2.25 0 100 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186l9.566-5.314m-9.566 7.5l9.566 5.314m0 0a2.25 2.25 0 103.935 2.186 2.25 2.25 0 00-3.935-2.186zm0-12.814a2.25 2.25 0 103.933-2.185 2.25 2.25 0 00-3.933 2.185z"}))});t.Z=i},53901:function(e,t,r){"use strict";var n=r(67294);let i=n.forwardRef(function({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z"}))});t.Z=i},7543:function(e,t,r){"use strict";var n=r(67294);let i=n.forwardRef(function({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"}))});t.Z=i},89169:function(e,t,r){"use strict";var n=r(67294);let i=n.forwardRef(function({title:e,titleId:t,...r},i){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:i,"aria-labelledby":t},r),e?n.createElement("title",{id:t},e):null,n.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-2.429 0-4.817.178-7.152.521C2.87 3.061 1.5 4.795 1.5 6.741v6.018c0 1.946 1.37 3.68 3.348 3.97.877.129 1.761.234 2.652.316V21a.75.75 0 001.28.53l4.184-4.183a.39.39 0 01.266-.112c2.006-.05 3.982-.22 5.922-.506 1.978-.29 3.348-2.023 3.348-3.97V6.741c0-1.947-1.37-3.68-3.348-3.97A49.145 49.145 0 0012 2.25zM8.25 8.625a1.125 1.125 0 100 2.25 1.125 1.125 0 000-2.25zm2.625 1.125a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zm4.875-1.125a1.125 1.125 0 100 2.25 1.125 1.125 0 000-2.25z",clipRule:"evenodd"}))});t.Z=i},56312:function(e,t,r){"use strict";r.d(t,{F:function(){return l}});var n=r(87536),i=function(e,t,r){if(e&&"reportValidity"in e){var i=(0,n.U2)(r,t);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},s=function(e,t){var r=function(r){var n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?i(n.ref,r,e):n.refs&&n.refs.forEach(function(t){return i(t,r,e)})};for(var n in t.fields)r(n)},a=function(e,t){t.shouldUseNativeValidation&&s(e,t);var r={};for(var i in e){var a=(0,n.U2)(t.fields,i);(0,n.t8)(r,i,Object.assign(e[i],{ref:a&&a.ref}))}return r},o=function(e,t){for(var r={};e.length;){var i=e[0],s=i.code,a=i.message,o=i.path.join(".");if(!r[o]){if("unionErrors"in i){var l=i.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:a,type:s}}if("unionErrors"in i&&i.unionErrors.forEach(function(t){return t.errors.forEach(function(t){return e.push(t)})}),t){var c=r[o].types,u=c&&c[i.code];r[o]=(0,n.KN)(o,t,r,s,u?[].concat(u,i.message):i.message)}e.shift()}return r},l=function(e,t,r){return void 0===r&&(r={}),function(n,i,l){try{return Promise.resolve(function(i,a){try{var o=Promise.resolve(e["sync"===r.mode?"parse":"parseAsync"](n,t)).then(function(e){return l.shouldUseNativeValidation&&s({},l),{errors:{},values:r.rawValues?n:e}})}catch(c){return a(c)}return o&&o.then?o.then(void 0,a):o}(0,function(e){return{values:{},errors:e.isEmpty?{}:a(o(e.errors,!l.shouldUseNativeValidation&&"all"===l.criteriaMode),l)}}))}catch(c){return Promise.reject(c)}}}},94464:function(e,t,r){"use strict";let n,i;r.d(t,{m:function(){return ej}});var s,a,o={};r.r(o),r.d(o,{Decoder:function(){return eg},Encoder:function(){return ef},PacketType:function(){return a},protocol:function(){return eh}});var l=r(50960);let c=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((e,t)=>((t&=63)<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),""),u=Object.create(null);u.open="0",u.close="1",u.ping="2",u.pong="3",u.message="4",u.upgrade="5",u.noop="6";let d=Object.create(null);Object.keys(u).forEach(e=>{d[u[e]]=e});let p={type:"error",data:"parser error"},h="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),f="function"==typeof ArrayBuffer,m=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,g=({type:e,data:t},r,n)=>h&&t instanceof Blob?r?n(t):y(t,n):f&&(t instanceof ArrayBuffer||m(t))?r?n(t):y(new Blob([t]),n):n(u[e]+(t||"")),y=(e,t)=>{let r=new FileReader;return r.onload=function(){let e=r.result.split(",")[1];t("b"+(e||""))},r.readAsDataURL(e)};function v(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",w="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let _=0;_<b.length;_++)w[b.charCodeAt(_)]=_;let x=e=>{let t=.75*e.length,r=e.length,n,i=0,s,a,o,l;"="===e[e.length-1]&&(t--,"="===e[e.length-2]&&t--);let c=new ArrayBuffer(t),u=new Uint8Array(c);for(n=0;n<r;n+=4)s=w[e.charCodeAt(n)],a=w[e.charCodeAt(n+1)],o=w[e.charCodeAt(n+2)],l=w[e.charCodeAt(n+3)],u[i++]=s<<2|a>>4,u[i++]=(15&a)<<4|o>>2,u[i++]=(3&o)<<6|63&l;return c},S="function"==typeof ArrayBuffer,T=(e,t)=>{if("string"!=typeof e)return{type:"message",data:C(e,t)};let r=e.charAt(0);if("b"===r)return{type:"message",data:E(e.substring(1),t)};let n=d[r];return n?e.length>1?{type:d[r],data:e.substring(1)}:{type:d[r]}:p},E=(e,t)=>{if(!S)return{base64:!0,data:e};{let r=x(e);return C(r,t)}},C=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,k=(e,t)=>{let r=e.length,n=Array(r),i=0;e.forEach((e,s)=>{g(e,!1,e=>{n[s]=e,++i===r&&t(n.join("\x1e"))})})},R=(e,t)=>{let r=e.split("\x1e"),n=[];for(let i=0;i<r.length;i++){let s=T(r[i],t);if(n.push(s),"error"===s.type)break}return n};function P(e){if(e)return function(e){for(var t in P.prototype)e[t]=P.prototype[t];return e}(e)}P.prototype.on=P.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},P.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this},P.prototype.off=P.prototype.removeListener=P.prototype.removeAllListeners=P.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,n=this._callbacks["$"+e];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<n.length;i++)if((r=n[i])===t||r.fn===t){n.splice(i,1);break}return 0===n.length&&delete this._callbacks["$"+e],this},P.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,t)}return this},P.prototype.emitReserved=P.prototype.emit,P.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},P.prototype.hasListeners=function(e){return!!this.listeners(e).length};let D="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function A(e,...t){return t.reduce((t,r)=>(e.hasOwnProperty(r)&&(t[r]=e[r]),t),{})}let N=D.setTimeout,L=D.clearTimeout;function O(e,t){t.useNativeTimers?(e.setTimeoutFn=N.bind(D),e.clearTimeoutFn=L.bind(D)):(e.setTimeoutFn=D.setTimeout.bind(D),e.clearTimeoutFn=D.clearTimeout.bind(D))}class I extends Error{constructor(e,t,r){super(e),this.description=t,this.context=r,this.type="TransportError"}}class M extends P{constructor(e){super(),this.writable=!1,O(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,t,r){return super.emitReserved("error",new I(e,t,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return("opening"===this.readyState||"open"===this.readyState)&&(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){let t=T(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){let e=this.opts.hostname;return -1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){let t=function(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}(e);return t.length?"?"+t:""}}let j="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),F={},$=0,B=0,U;function q(e){let t="";do t=j[e%64]+t,e=Math.floor(e/64);while(e>0);return t}function z(){let e=q(+new Date);return e!==U?($=0,U=e):e+"."+q($++)}for(;B<64;B++)F[j[B]]=B;let V=!1;try{V="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(H){}let W=V;function Z(e){let t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||W))return new XMLHttpRequest}catch(r){}if(!t)try{return new D[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch(n){}}function K(){}let G=function(){let e=new Z({xdomain:!1});return null!=e.responseType}();class Y extends P{constructor(e,t){super(),O(this,t),this.opts=t,this.method=t.method||"GET",this.uri=e,this.data=void 0!==t.data?t.data:null,this.create()}create(){var e;let t=A(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd;let r=this.xhr=new Z(t);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders)for(let n in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(n)&&r.setRequestHeader(n,this.opts.extraHeaders[n])}catch(i){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(s){}try{r.setRequestHeader("Accept","*/*")}catch(a){}null===(e=this.opts.cookieJar)||void 0===e||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var e;3===r.readyState&&(null===(e=this.opts.cookieJar)||void 0===e||e.parseCookies(r)),4===r.readyState&&(200===r.status||1223===r.status?this.onLoad():this.setTimeoutFn(()=>{this.onError("number"==typeof r.status?r.status:0)},0))},r.send(this.data)}catch(o){this.setTimeoutFn(()=>{this.onError(o)},0);return}"undefined"!=typeof document&&(this.index=Y.requestsCount++,Y.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=K,e)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete Y.requests[this.index],this.xhr=null}}onLoad(){let e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}}function J(){for(let e in Y.requests)Y.requests.hasOwnProperty(e)&&Y.requests[e].abort()}Y.requestsCount=0,Y.requests={},"undefined"!=typeof document&&("function"==typeof attachEvent?attachEvent("onunload",J):"function"==typeof addEventListener&&addEventListener("onpagehide"in D?"pagehide":"unload",J,!1));let Q=(()=>{let e="function"==typeof Promise&&"function"==typeof Promise.resolve;return e?e=>Promise.resolve().then(e):(e,t)=>t(e,0)})(),X=D.WebSocket||D.MozWebSocket;r(48764).Buffer;let ee="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),et={websocket:class extends M{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;let e=this.uri(),t=this.opts.protocols,r=ee?{}:A(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=ee?new X(e,t,r):t?new X(e,t):new X(e)}catch(n){return this.emitReserved("error",n)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],n=t===e.length-1;g(r,this.supportsBinary,e=>{try{this.ws.send(e)}catch(t){}n&&Q(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=z()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}check(){return!!X}},webtransport:class extends M{get name(){return"webtransport"}doOpen(){"function"==typeof WebTransport&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{let t;let r=e.readable.getReader();this.writer=e.writable.getWriter();let n=()=>{r.read().then(({done:e,value:r})=>{e||(t||1!==r.byteLength||54!==r[0]?(this.onPacket(function(e,t,r){i||(i=new TextDecoder);let n=t||e[0]<48||e[0]>54;return T(n?e:i.decode(e),r)}(r,t,"arraybuffer")),t=!1):t=!0,n())}).catch(e=>{})};n();let s=this.query.sid?`0{"sid":"${this.query.sid}"}`:"0";this.writer.write(new TextEncoder().encode(s)).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let t=0;t<e.length;t++){let r=e[t],i=t===e.length-1;!function(e,t){h&&e.data instanceof Blob?e.data.arrayBuffer().then(v).then(t):f&&(e.data instanceof ArrayBuffer||m(e.data))?t(v(e.data)):g(e,!1,e=>{n||(n=new TextEncoder),t(n.encode(e))})}(r,e=>{"message"===r.type&&"string"!=typeof r.data&&e[0]>=48&&e[0]<=54&&this.writer.write(Uint8Array.of(54)),this.writer.write(e).then(()=>{i&&Q(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})})}}doClose(){var e;null===(e=this.transport)||void 0===e||e.close()}},polling:class extends M{constructor(e){if(super(e),this.polling=!1,"undefined"!=typeof location){let t="https:"===location.protocol,r=location.port;r||(r=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||r!==e.port}let n=e&&e.forceBase64;this.supportsBinary=G&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";let t=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||t()})),this.writable||(r++,this.once("drain",function(){--r||t()}))}else t()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){let t=e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)};R(e,this.socket.binaryType).forEach(t),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}doClose(){let e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,k(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){let e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=z()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new Y(this.uri(),e)}doWrite(e,t){let r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){let e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}},er=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,en=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ei(e){let t=e,r=e.indexOf("["),n=e.indexOf("]");-1!=r&&-1!=n&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let i=er.exec(e||""),s={},a=14;for(;a--;)s[en[a]]=i[a]||"";return -1!=r&&-1!=n&&(s.source=t,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=function(e,t){let r=t.replace(/\/{2,9}/g,"/").split("/");return("/"==t.slice(0,1)||0===t.length)&&r.splice(0,1),"/"==t.slice(-1)&&r.splice(r.length-1,1),r}(0,s.path),s.queryKey=function(e,t){let r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,n){t&&(r[t]=n)}),r}(0,s.query),s}class es extends P{constructor(e,t={}){super(),this.writeBuffer=[],e&&"object"==typeof e&&(t=e,e=null),e?(e=ei(e),t.hostname=e.host,t.secure="https"===e.protocol||"wss"===e.protocol,t.port=e.port,e.query&&(t.query=e.query)):t.host&&(t.hostname=ei(t.host).host),O(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=t.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},r=e.split("&");for(let n=0,i=r.length;n<i;n++){let s=r[n].split("=");t[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return t}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){let t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);let r=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new et[e](r)}open(){let e;if(this.opts.rememberUpgrade&&es.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else if(0===this.transports.length){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch(t){this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",e=>this.onClose("transport close",e))}probe(e){let t=this.createTransport(e),r=!1;es.priorWebsocketSuccess=!1;let n=()=>{r||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!r){if("pong"===e.type&&"probe"===e.data)this.upgrading=!0,this.emitReserved("upgrading",t),t&&(es.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{r||"closed"===this.readyState||(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())}));else{let n=Error("probe error");n.transport=t.name,this.emitReserved("upgradeError",n)}}}))};function i(){r||(r=!0,c(),t.close(),t=null)}let s=e=>{let r=Error("probe error: "+e);r.transport=t.name,i(),this.emitReserved("upgradeError",r)};function a(){s("transport closed")}function o(){s("socket closed")}function l(e){t&&e.name!==t.name&&i()}let c=()=>{t.removeListener("open",n),t.removeListener("error",s),t.removeListener("close",a),this.off("close",o),this.off("upgrading",l)};t.once("open",n),t.once("error",s),t.once("close",a),this.once("close",o),this.once("upgrading",l),-1!==this.upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{r||t.open()},200):t.open()}onOpen(){if(this.readyState="open",es.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade){let e=0,t=this.upgrades.length;for(;e<t;e++)this.probe(this.upgrades[e])}}onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":let t=Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){let e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){let e=this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1;if(!e)return this.writeBuffer;let t=1;for(let r=0;r<this.writeBuffer.length;r++){let n=this.writeBuffer[r].data;if(n&&(t+="string"==typeof n?function(e){let t=0,r=0;for(let n=0,i=e.length;n<i;n++)(t=e.charCodeAt(n))<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}(n):Math.ceil(1.33*(n.byteLength||n.size))),r>0&&t>this.maxPayload)return this.writeBuffer.slice(0,r);t+=2}return this.writeBuffer}write(e,t,r){return this.sendPacket("message",e,t,r),this}send(e,t,r){return this.sendPacket("message",e,t,r),this}sendPacket(e,t,r,n){if("function"==typeof t&&(n=t,t=void 0),"function"==typeof r&&(n=r,r=null),"closing"===this.readyState||"closed"===this.readyState)return;(r=r||{}).compress=!1!==r.compress;let i={type:e,data:t,options:r};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),n&&this.once("flush",n),this.flush()}close(){let e=()=>{this.onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},r=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return("opening"===this.readyState||"open"===this.readyState)&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){es.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,t){("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){let t=[],r=0,n=e.length;for(;r<n;r++)~this.transports.indexOf(e[r])&&t.push(e[r]);return t}}es.protocol=4,es.protocol;let ea="function"==typeof ArrayBuffer,eo=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,el=Object.prototype.toString,ec="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===el.call(Blob),eu="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===el.call(File);function ed(e){return ea&&(e instanceof ArrayBuffer||eo(e))||ec&&e instanceof Blob||eu&&e instanceof File}let ep=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],eh=5;(s=a||(a={}))[s.CONNECT=0]="CONNECT",s[s.DISCONNECT=1]="DISCONNECT",s[s.EVENT=2]="EVENT",s[s.ACK=3]="ACK",s[s.CONNECT_ERROR=4]="CONNECT_ERROR",s[s.BINARY_EVENT=5]="BINARY_EVENT",s[s.BINARY_ACK=6]="BINARY_ACK";class ef{constructor(e){this.replacer=e}encode(e){return(e.type===a.EVENT||e.type===a.ACK)&&function e(t,r){if(!t||"object"!=typeof t)return!1;if(Array.isArray(t)){for(let n=0,i=t.length;n<i;n++)if(e(t[n]))return!0;return!1}if(ed(t))return!0;if(t.toJSON&&"function"==typeof t.toJSON&&1==arguments.length)return e(t.toJSON(),!0);for(let s in t)if(Object.prototype.hasOwnProperty.call(t,s)&&e(t[s]))return!0;return!1}(e)?this.encodeAsBinary({type:e.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===a.BINARY_EVENT||e.type===a.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){let t=function(e){let t=[],r=e.data,n=e;return n.data=function e(t,r){if(!t)return t;if(ed(t)){let n={_placeholder:!0,num:r.length};return r.push(t),n}if(Array.isArray(t)){let i=Array(t.length);for(let s=0;s<t.length;s++)i[s]=e(t[s],r);return i}if("object"==typeof t&&!(t instanceof Date)){let a={};for(let o in t)Object.prototype.hasOwnProperty.call(t,o)&&(a[o]=e(t[o],r));return a}return t}(r,t),n.attachments=t.length,{packet:n,buffers:t}}(e),r=this.encodeAsString(t.packet),n=t.buffers;return n.unshift(r),n}}function em(e){return"[object Object]"===Object.prototype.toString.call(e)}class eg extends P{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);let r=t.type===a.BINARY_EVENT;r||t.type===a.BINARY_ACK?(t.type=r?a.EVENT:a.ACK,this.reconstructor=new ey(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(ed(e)||e.base64){if(this.reconstructor)(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw Error("got binary data when not reconstructing a packet")}else throw Error("Unknown type: "+e)}decodeString(e){let t=0,r={type:Number(e.charAt(0))};if(void 0===a[r.type])throw Error("unknown packet type "+r.type);if(r.type===a.BINARY_EVENT||r.type===a.BINARY_ACK){let n=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);let i=e.substring(n,t);if(i!=Number(i)||"-"!==e.charAt(t))throw Error("Illegal attachments");r.attachments=Number(i)}if("/"===e.charAt(t+1)){let s=t+1;for(;++t;){let o=e.charAt(t);if(","===o||t===e.length)break}r.nsp=e.substring(s,t)}else r.nsp="/";let l=e.charAt(t+1);if(""!==l&&Number(l)==l){let c=t+1;for(;++t;){let u=e.charAt(t);if(null==u||Number(u)!=u){--t;break}if(t===e.length)break}r.id=Number(e.substring(c,t+1))}if(e.charAt(++t)){let d=this.tryParse(e.substr(t));if(eg.isPayloadValid(r.type,d))r.data=d;else throw Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(t){return!1}}static isPayloadValid(e,t){switch(e){case a.CONNECT:return em(t);case a.DISCONNECT:return void 0===t;case a.CONNECT_ERROR:return"string"==typeof t||em(t);case a.EVENT:case a.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===ep.indexOf(t[0]));case a.ACK:case a.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class ey{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t,r;let n=(t=this.reconPack,r=this.buffers,t.data=function e(t,r){if(!t)return t;if(t&&!0===t._placeholder){let n="number"==typeof t.num&&t.num>=0&&t.num<r.length;if(n)return r[t.num];throw Error("illegal attachments")}if(Array.isArray(t))for(let i=0;i<t.length;i++)t[i]=e(t[i],r);else if("object"==typeof t)for(let s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=e(t[s],r));return t}(t.data,r),delete t.attachments,t);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function ev(e,t,r){return e.on(t,r),function(){e.off(t,r)}}let eb=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class ew extends P{constructor(e,t,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;let e=this.io;this.subs=[ev(e,"open",this.onopen.bind(this)),ev(e,"packet",this.onpacket.bind(this)),ev(e,"error",this.onerror.bind(this)),ev(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){if(eb.hasOwnProperty(e))throw Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;let r={type:a.EVENT,data:t};if(r.options={},r.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){let n=this.ids++,i=t.pop();this._registerAckCallback(n,i),r.id=n}let s=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,o=this.flags.volatile&&(!s||!this.connected);return o||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,t){var r;let n=null!==(r=this.flags.timeout)&&void 0!==r?r:this._opts.ackTimeout;if(void 0===n){this.acks[e]=t;return}let i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let r=0;r<this.sendBuffer.length;r++)this.sendBuffer[r].id===e&&this.sendBuffer.splice(r,1);t.call(this,Error("operation has timed out"))},n);this.acks[e]=(...e)=>{this.io.clearTimeoutFn(i),t.apply(this,[null,...e])}}emitWithAck(e,...t){let r=void 0!==this.flags.timeout||void 0!==this._opts.ackTimeout;return new Promise((n,i)=>{t.push((e,t)=>r?e?i(e):n(t):n(e)),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());let r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...n)=>{if(r===this._queue[0])return null!==e?r.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...n)),r.pending=!1,this._drainQueue()}),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;let t=this._queue[0];(!t.pending||e)&&(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:a.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}onpacket(e){let t=e.nsp===this.nsp;if(t)switch(e.type){case a.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case a.EVENT:case a.BINARY_EVENT:this.onevent(e);break;case a.ACK:case a.BINARY_ACK:this.onack(e);break;case a.DISCONNECT:this.ondisconnect();break;case a.CONNECT_ERROR:this.destroy();let r=Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r)}}onevent(e){let t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){let t=this._anyListeners.slice();for(let r of t)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){let t=this,r=!1;return function(...n){r||(r=!0,t.packet({type:a.ACK,id:e,data:n}))}}onack(e){let t=this.acks[e.id];"function"==typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:a.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){let t=this._anyListeners;for(let r=0;r<t.length;r++)if(e===t[r]){t.splice(r,1);break}}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){let t=this._anyOutgoingListeners;for(let r=0;r<t.length;r++)if(e===t[r]){t.splice(r,1);break}}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){let t=this._anyOutgoingListeners.slice();for(let r of t)r.apply(this,e.data)}}}function e_(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}e_.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=(1&Math.floor(10*t))==0?e-r:e+r}return 0|Math.min(e,this.max)},e_.prototype.reset=function(){this.attempts=0},e_.prototype.setMin=function(e){this.ms=e},e_.prototype.setMax=function(e){this.max=e},e_.prototype.setJitter=function(e){this.jitter=e};class ex extends P{constructor(e,t){var r;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,O(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(r=t.randomizationFactor)&&void 0!==r?r:.5),this.backoff=new e_({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;let n=t.parser||o;this.encoder=new n.Encoder,this.decoder=new n.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new es(this.uri,this.opts);let t=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;let n=ev(t,"open",function(){r.onopen(),e&&e()}),i=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},s=ev(t,"error",i);if(!1!==this._timeout){let a=this._timeout,o=this.setTimeoutFn(()=>{n(),i(Error("timeout")),t.close()},a);this.opts.autoUnref&&o.unref(),this.subs.push(()=>{this.clearTimeoutFn(o)})}return this.subs.push(n),this.subs.push(s),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");let e=this.engine;this.subs.push(ev(e,"ping",this.onping.bind(this)),ev(e,"data",this.ondata.bind(this)),ev(e,"error",this.onerror.bind(this)),ev(e,"close",this.onclose.bind(this)),ev(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){Q(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new ew(this,e,t),this.nsps[e]=r),r}_destroy(e){let t=Object.keys(this.nsps);for(let r of t){let n=this.nsps[r];if(n.active)return}this._close()}_packet(e){let t=this.encoder.encode(e);for(let r=0;r<t.length;r++)this.engine.write(t[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;let e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{let t=this.backoff.duration();this._reconnecting=!0;let r=this.setTimeoutFn(()=>{!e.skipReconnect&&(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){let e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}let eS={};function eT(e,t){let r;"object"==typeof e&&(t=e,e=void 0),t=t||{};let n=function(e,t="",r){let n=e;r=r||"undefined"!=typeof location&&location,null==e&&(e=r.protocol+"//"+r.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?r.protocol+e:r.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==r?r.protocol+"//"+e:"https://"+e),n=ei(e)),!n.port&&(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";let i=-1!==n.host.indexOf(":"),s=i?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+s+":"+n.port+t,n.href=n.protocol+"://"+s+(r&&r.port===n.port?"":":"+n.port),n}(e,t.path||"/socket.io"),i=n.source,s=n.id,a=n.path,o=eS[s]&&a in eS[s].nsps,l=t.forceNew||t["force new connection"]||!1===t.multiplex||o;return l?r=new ex(i,t):(eS[s]||(eS[s]=new ex(i,t)),r=eS[s]),n.query&&!t.query&&(t.query=n.queryKey),r.socket(n.path,t)}Object.assign(eT,{Manager:ex,Socket:ew,io:eT,connect:eT});var eE=r(6154),eC=r(17187),ek=r(1604),eR=async()=>{try{let{data:{result:{data:{json:{accessToken:e}}}}}=await eE.Z.post("https://testing.sdk-iriko.huddle01.com/trpc/auth.guest");return e}catch(t){console.log({error:t})}},eP={cam:[{scaleResolutionDownBy:4,maxBitrate:3e5,rid:"r0",scalabilityMode:"S1T3",maxFramerate:15},{scaleResolutionDownBy:2,maxBitrate:6e5,rid:"r1",scalabilityMode:"S1T3",maxFramerate:30},{scaleResolutionDownBy:1,maxBitrate:9e6,rid:"r2",scalabilityMode:"S1T3",maxFramerate:30}],"share-video":[{maxBitrate:1e6,networkPriority:"high",maxFramerate:30,dtx:!0}],mic:void 0,"share-audio":void 0},eD={audio:{opusStereo:!0,opusFec:!0,opusDtx:!0},video:{videoGoogleStartBitrate:1e3}},eA=class{emitter;constructor(){this.emitter=new eC.EventEmitter}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}listenerCount(e){return this.emitter.listenerCount(e)}listeners(e){return this.emitter.listeners(e)}emit(e,...t){return this.emitter.emit(e,...t)}safeEmit(e,...t){return this.emitter.emit(e,...t)}once(e,t){return this.emitter.once(e,t),this}removeAllListeners(e){return e?this.emitter.removeAllListeners(e):this.emitter.removeAllListeners(),this}},eN=class{logging=!0;info=(...e)=>{this.logging&&console.info(...e)};warn=(...e)=>{this.logging&&console.warn(...e)};error=(...e)=>{this.logging&&console.error(...e)};disable=()=>this.logging=!1;enable=()=>this.logging=!0};ek.z.object({videoProducer:ek.z.boolean(),audioProducer:ek.z.boolean(),screenShareProducer:ek.z.boolean(),mainChatProducer:ek.z.boolean(),recordingAdmin:ek.z.boolean(),liveStreamingAdmin:ek.z.boolean(),kickUser:ek.z.boolean(),changeRole:ek.z.boolean(),changePermission:ek.z.boolean(),admitPermission:ek.z.boolean(),editName:ek.z.boolean(),editAvatar:ek.z.boolean()});var eL=class{__acl;__logger=new eN;constructor(){this.__acl={videoProducer:!1,audioProducer:!1,screenShareProducer:!1,mainChatProducer:!1,recordingAdmin:!1,liveStreamingAdmin:!1,kickUser:!1,changeRole:!1,changePermission:!1,admitPermission:!1,editName:!1,editAvatar:!1}}setACL=e=>{this.__acl=e,this.__logger.info({this__acl:this.__acl})};updateACL=e=>{this.__acl={...this.__acl,...e}};changePermissionACL=()=>this.__acl.changePermission;getAcl=()=>this.__acl},eO=class extends eA{_me={peerId:"",role:"",displayName:"",avatarUrl:""};_roomId;_socket;_isRecorder=!1;logger=new eN;_acl=new eL;_hostControls={lobbyPreview:!0,audio:!1,roomLock:!0,screenshare:!1,video:!1,chat:!1};constructor(){super()}_handleConnect(){this.emit("lobby:joined",this._roomId),this.logger.info("lobby:joined",this._roomId)}_handleDisconnect(){this.logger.warn("client disconnected")}_handleConnectError=e=>{this.emit("lobby:failed",e),this.logger.error("lobby:failed",e)}},eI=class extends eO{_videoStream;_audioStream;_device;_sendTransport;_recvTransport;_audioProducer;_videoProducer;_shareVideoProducer;_shareAudioProducer;_consumers=new Map;_createConsumersOnJoin=!0;_peers;_peersConsumers=new Map;_turn=[{username:"test-turn",urls:"turn:turn.huddle01.com:443?transport=udp",credential:"test-turn"},{username:"test-turn",urls:"turn:turn.huddle01.com:443?transport=tcp",credential:"test-turn"}];constructor(){super()}_produce=async(e,t,r="*")=>{if(!this._sendTransport){this.logger.warn("produce() | sendTransport is undefined");return}if(!(this._device&&this._device.rtpCapabilities.codecs))return;let n={cam:this._device.rtpCapabilities.codecs.find(e=>"video/h264"===e.mimeType.toLowerCase()&&"42e034"===e.parameters["profile-level-id"]),"share-video":this._device.rtpCapabilities.codecs.find(e=>"video/h264"===e.mimeType.toLowerCase()&&"42e034"===e.parameters["profile-level-id"]),mic:void 0,"share-audio":void 0},i=await this._sendTransport.produce({track:e,encodings:eP[t],codecOptions:eD[e.kind],codec:n[t],stopTracks:!1,zeroRtpOnPause:!0,disableTrackOnPause:!0,appData:{type:t,share:"share-audio"===t||"share-video"===t,targetPeerIds:r}});return i};_produceAudioStream=async(e,t="*")=>{try{if(!e){this.logger.warn("produceAudioStream() | stream is undefined");return}if(this._audioStream||(this._audioStream=e),this._audioProducer){this.logger.warn("handleCreateWebRTC() | Audio Producer already exists");return}let r=e.getAudioTracks()[0];if(!r){this.logger.warn("enableMic() | Track is undefined");return}let n=await this._produce(r,"mic",t);if(!n){this.logger.warn("enableMic() | Producer create error");return}if(!n.track){this.logger.warn("enableMic() | Producer track is undefined");return}this._audioProducer=n,this._audioProducer.on("trackended",()=>{this.logger.warn("produceAudioStream() | trackended for mic"),this._stopAudioProducer().catch(this.logger.error)}),this._audioProducer.on("transportclose",()=>{this.logger.warn("produceAudioStream() | transportclose for mic"),this._stopAudioProducer().catch(this.logger.error)}),this._audioProducer.on("@replacetrack",()=>{this.logger.warn("produceAudioStream() | @replacetrack for mic")}),this._audioProducer.on("@close",()=>{this.logger.warn("produceAudioStream() | @close for mic"),this._stopAudioProducer().catch(this.logger.error)})}catch(i){throw this.logger.error("Error enabling mic",{error:i}),Error("Error enabling mic")}};_produceVideoStream=async(e,t="*")=>{try{if(!e)return this.logger.warn("produceVideoStream() | stream is undefined"),Promise.reject();if(this._videoStream||(this._videoStream=e),this._videoProducer){this.logger.warn("handleCreateWebRTC() | Video Producer already exists");return}let r=e.getVideoTracks()[0];if(!r){this.logger.warn("produceVideoStream() | Track is undefined");return}let n=await this._produce(r,"cam",t);if(!n){this.logger.warn("produceVideoStream() | Producer create error");return}if(!n.track){this.logger.warn("produceVideoStream() | Producer track is undefined");return}this._videoProducer=n,this._videoProducer.on("trackended",()=>{this.logger.warn("enabelCam() | trackended for cam"),this._stopVideoProducer().catch(this.logger.error)}),this._videoProducer.on("transportclose",()=>{this.logger.warn("produceVideoStream() | transportclose for cam"),this._stopVideoProducer().catch(this.logger.error)}),this._videoProducer.on("@replacetrack",(e,t,r)=>{this.logger.warn("produceVideoStream() | @replacetrack for cam")}),this._videoProducer.on("@close",()=>{this.logger.warn("produceVideoStream() | @close for cam"),this._stopVideoProducer().catch(this.logger.error)})}catch(i){this.logger.error("Error enabling cam",{error:i})}};_requestStopAudioProducer=async()=>{try{if(!this._audioProducer){this.logger.error("requestStopAudioProducer() | audioProducer is undefined");return}this._socket.emit("close-producer",{peerId:this._me.peerId,producerId:this._audioProducer.appData.momoProducerId,roomId:this._roomId,appData:{type:"mic"}}),this._audioProducer.close()}catch(e){}};_stopAudioProducer=async()=>{try{if(!this._audioProducer){this.logger.warn("stopAudioProducer() | audioProducer is undefined");return}if(this._audioProducer=void 0,this.emit("room:mic-produce-stop"),!this._audioProducer.appData.momoProducerId){this.logger.warn("stopAudioProducer() | momoProducerId is undefined");return}}catch(e){this.logger.error({error:e})}};_requestStopVideoProducer=async()=>{try{if(!this._videoProducer){this.logger.warn("requestStopVideoProducer() | videoProducer is undefined");return}this._socket.emit("close-producer",{peerId:this._me.peerId,producerId:this._videoProducer.appData.momoProducerId,roomId:this._roomId,appData:{type:"cam"}}),this._videoProducer.close()}catch(e){}};_stopVideoProducer=async()=>{try{if(!this._videoProducer){this.logger.warn("stopVideoProducer() | videoProducer is undefined");return}if(this._videoProducer=void 0,this.emit("room:cam-produce-stop"),this.logger.info("room:cam-produce-stop"),!this._videoProducer.appData.momoProducerId){this.logger.warn("stopVideoProducer() | momoProducerId is undefined");return}}catch(e){}};_handleJoinSuccess=async e=>{this.logger.info("handleJoinSuccess()");try{this._device=new l.Device,await this._device.load({routerRtpCapabilities:e.routerRTPCapabilities}),this._socket.emit("create-webrtc-transport",{peerId:e.peerId,roomId:e.roomId,sctpCapabilities:this._device.sctpCapabilities});let{activeSpeakers:t,roomMetadata:{peerIds:r,peerMetaData:n,roomMetaData:{roomLocked:i,lobbyPreview:s,audioLocked:a,videoLocked:o,chatLocked:c,shareLocked:u,lobbyPeers:d}},permissions:p,role:h}=e;this._me={...this._me,peerId:e.peerId,role:h},this.emit("room:me-role-update",h),this.logger.info("acl() | setACL",p),this._acl.setACL(p),this._hostControls={roomLock:i,audio:a,video:o,chat:c,screenshare:u,lobbyPreview:s};let f={},m={};r.forEach(e=>{let t=n[e];t||this.logger.error("handleJoinSuccess() | No Peer Data Found");let r={peerId:e,role:t.role,displayName:(null==t?void 0:t.displayName)||"No Name Found",avatarUrl:(null==t?void 0:t.avatarUrl)||"/avatars/0.png",joinStatus:"joined:webrtc-creating",isHandRaised:(null==t?void 0:t.isHandRaised)||!1};this._peers.set(r.peerId,r),f={...f,[e]:r},m={...m,[e]:{mic:null,cam:null,"share-audio":null,"share-video":null}}}),this.emit("room:joined",this._peers),this.logger.info("room:joined",this._peers)}catch(g){this.logger.error({err:g})}};_handleProduceSuccess=e=>{let{peerId:t,producerId:r,roomId:n,appData:i}=e;"cam"===i.type?(this._videoProducer.appData.momoProducerId=r,this.emit("room:cam-produce-start"),this.logger.info("room:cam-produce-start")):(this._audioProducer.appData.momoProducerId=r,this.emit("room:mic-produce-start"),this.logger.info("room:mic-produce-start"))};_handleClientConsumer=async e=>{try{if(!this._recvTransport)throw Error("No Recv Transport");let t=e.appData.type,r=`${e.producerId}-${"cam"===e.appData.type||"mic"===e.appData.type?"audio-video":"screenAudio-screenVideo"}`,n=await this._recvTransport.consume({id:e.id,producerId:e.producerId,kind:e.kind,rtpParameters:e.rtpParameters,appData:{...e.appData,peerId:e.producerPeerId},streamId:r});this._consumers.set(n.id,n);let i=this._peersConsumers.get(e.producerPeerId);this._peersConsumers.set(e.producerPeerId,{...i,[e.appData.type]:n.id}),n.id,n.track,e.producerPeerId,e.producerPeerId,e.producerId,n.paused,"cam"===t&&(this.emit("room:peer-produce-start",{peerId:e.producerPeerId,mediaType:"cam",track:n.track}),this.logger.info("room:peer-produce-start",{peerId:e.producerPeerId,mediaType:"cam",track:n.track})),"mic"===t&&(this.emit("room:peer-produce-start",{peerId:e.producerPeerId,mediaType:"mic",track:n.track}),this.logger.info("room:peer-produce-start",{peerId:e.producerPeerId,mediaType:"mic",track:n.track})),this._socket.emit("resume-consumer",{consumerId:n.id,producerPeerId:e.producerPeerId,peerId:this._me.peerId,roomId:this._roomId,mediaType:t}),n.on("transportclose",()=>{this._consumers.delete(n.id),this.logger.warn("client-consumer() | Transport Close"),n.close()}),n.on("trackended",()=>{this.logger.warn("client-consumer() | Tracked Ended")}),n.on("@pause",()=>{this.logger.warn("client-consumer() | @pause")}),n.on("@resume",()=>{this.logger.warn("client-consumer() | @resume")}),n.on("@close",()=>{this.logger.warn("client-consumer() | @close"),this._consumers.delete(n.id)})}catch(s){this.logger.error("Error creating client consumer: ",{error:s,data:e})}};_handleConsumerPaused=e=>{var t;let{appData:r,producerPeerId:n}=e,i=null==(t=this._peersConsumers.get(n))?void 0:t[r.type],s=this._consumers.get(i);if(console.log("handleConsumerPaused",e,{consumer:s}),!s){console.error(`handleConsumerPaused() | No consumer data of type ${r.type} for peer ${n}`);return}s&&s.pause()};_handleConsumerResumed=e=>{var t;let{appData:r,producerPeerId:n}=e,i=null==(t=this._peersConsumers.get(n))?void 0:t[r.type],s=this._consumers.get(i);if(console.log("handleConsumerResumed",e,{consumer:s}),!s){console.error(`handleConsumerResumed() | No consumer data of type ${r.type} for peer ${n}`);return}s&&s.resume()};_handleConsumerClosed=e=>{var t;this.emit("room:peer-produce-stop",{peerId:e.producerPeerId,mediaType:e.appData.type});let{producerPeerId:r,appData:n}=e;if(!e.appData||!e.appData.type){this.logger.error("Need appData and appData.type to close consumer");return}let i=null==(t=this._peersConsumers.get(r))?void 0:t[n.type],s=this._consumers.get(i);if(console.log("_handleConsumerClosed",e,{consumer:s}),s)s.close();else{this.logger.error(`handleConsumerClosed() | No consumer data of type ${n.type} for peer ${r}`);return}};_handleCreateWebRTC=async e=>{if(!this._device){this.logger.error("Device not initialized");return}try{this._sendTransport=this._createDeviceTransport(e,"send"),this._recvTransport=this._createDeviceTransport(e,"recv"),this._videoStream&&this._produceVideoStream(this._videoStream),this._audioStream&&this._produceAudioStream(this._audioStream)}catch(t){console.debug({err:t})}this._createConsumersOnJoin&&this._socket.emit("create-consumers-for-newpeer",{peerId:e.peerId,roomId:e.roomId})};_createDeviceTransport=(e,t)=>{let r;if(void 0===this._device){this.logger.warn("createDeviceTransport() | mediasoup device is undefined");return}if("send"===t?(console.debug("createDeviceTransport() | creating send transport"),r=this._device.createSendTransport({id:e.sendTransportSDPInfo.id,iceParameters:e.sendTransportSDPInfo.iceParameters,iceCandidates:e.sendTransportSDPInfo.iceCandidates,dtlsParameters:e.sendTransportSDPInfo.dtlsParameters,sctpParameters:e.sendTransportSDPInfo.sctpParameters,iceServers:this._turn,proprietaryConstraints:{},appData:{}})):"recv"===t&&(console.debug("createDeviceTransport() | creating recv transport"),r=this._device.createRecvTransport({id:e.recvTransportSDPInfo.id,iceParameters:e.recvTransportSDPInfo.iceParameters,iceCandidates:e.recvTransportSDPInfo.iceCandidates,dtlsParameters:e.recvTransportSDPInfo.dtlsParameters,sctpParameters:e.recvTransportSDPInfo.sctpParameters,iceServers:this._turn,proprietaryConstraints:{},appData:{}})),void 0===r){this.logger.warn("createDeviceTransport() | transport is undefined , transportType is incorrect");return}return r.on("connect",({dtlsParameters:r},n,i)=>{try{this._socket.emit("connect-webrtc-transport",{dtlsParameters:r,transportType:t,peerId:e.peerId,roomId:e.roomId}),n()}catch(s){i(s)}}),r.on("produce",async({kind:t,rtpParameters:n,appData:i},s,a)=>{try{let{id:o}=this._socket.emit("transport-produce",{peerId:e.peerId,roomId:e.roomId,producerData:{kind:t,paused:!1,transportId:null==r?void 0:r.id,rtpParameters:n},appData:{type:i.type,producerPeerId:e.peerId,targetPeerIds:i.targetPeerIds}});s({id:o})}catch(l){console.debug({err:l}),a(l)}}),r.on("producedata",async({sctpStreamParameters:t,label:n,protocol:i,appData:s},a,o)=>{try{let{id:l}=this._socket.emit("transport-produce-data",{peerId:e.peerId,roomId:e.roomId,producerData:{transportId:null==r?void 0:r.id,sctpStreamParameters:{streamId:t.streamId,maxPacketLifeTime:t.maxPacketLifeTime,maxRetransmits:t.maxRetransmits,ordered:t.ordered},label:n,protocol:i,appData:s}});a({id:l})}catch(c){console.debug({error:c}),o(c)}}),r}},eM=class extends eI{constructor(){super(),this._me.peerId=`peerId-${c()}`,this._peers=new Map}async _joinLobby(e,t,r,n="user"){if(this.logger.info("joinLobby() | joining lobby"),!t)throw Error("Error: joinLobby() | No roomId passed");"recorder"===n&&(this._me.peerId=`botId-${c()}`),this._roomId=t;let i=r||await eR();if(!i)throw Error("joinLobby() | HuddleWebClient.ts | No token found");this._socket=eT(`https://testing.sdk-sushi.huddle01.com/${t}`,{reconnectionAttempts:10,auth:t=>t({peerId:this._me.peerId,token:i,projectId:e})}),this._socket.on("connect",()=>this._handleConnect()),this._socket.on("join-success",e=>this._handleJoinSuccess(e)),this._socket.on("disconnect",()=>this._handleDisconnect()),this._socket.on("connect_error",e=>{this._handleConnectError(e)}),this._socket.io.on("reconnect",e=>{this.logger.warn("reconnecting",e)}),this._socket.io.on("reconnect_attempt",e=>{console.log("reconnect_attempt",e)}),this._socket.io.on("reconnect_error",e=>{console.log("reconnect_error",e),this.logger.error({error:e})}),this._socket.io.on("reconnect_failed",()=>{console.log("reconnect_failed")}),this._socket.on("create-webrtc-success",e=>this._handleCreateWebRTC(e)),this._socket.on("transport-produce-success",e=>this._handleProduceSuccess(e)),this._socket.on("create-client-consumer",e=>this._handleClientConsumer(e)),this._socket.on("consumer-closed",e=>this._handleConsumerClosed(e)),this._socket.on("consumer-resumed",e=>this._handleConsumerResumed(e)),this._socket.on("consumer-paused",e=>this._handleConsumerPaused(e)),this._socket.on("new-peer",e=>this._handleNewPeer(e)),this._socket.on("peer-left",e=>this._handlePeerLeft(e)),this._socket.on("meeting-ended",()=>{this._close()}),this._socket.on("kicked",()=>{this._close()}),this._socket.on("recording-started",()=>{console.log("HuddleWebClient | recording-started"),this.emit("room:recording-started")}),this._socket.on("recording-stopped",()=>{console.log("HuddleWebClient | recording-stopped"),console.log("CLIENT_STOPPED_RECORDING"),this.emit("room:recording-stopped")}),this._socket.on("recording-data",e=>{console.log("RECORDING DATA",{data:e}),this.emit("room:recording-data",e)}),this._socket.on("livestream-started",e=>{console.log("LIVESTREAM STARTED",{data:e})}),this._socket.on("livestream-stopped",()=>{}),this._socket.on("peer-updated-displayName",this.__handlePeerUpdatedHandleName),this._socket.on("update-target-peerIds",this._handleUpdateTargetPeerIds)}async _joinRoom(e=!0){return console.info(`roomJoinRequest() | Joining room ${this._roomId}`),this._createConsumersOnJoin=e,await this._setDisplayName(this._me.displayName),new Promise((e,t)=>{this._socket.emit("join-request",r=>{r.success?e(r):(this.logger.error("roomJoinRequest() | Error joining room",r.data),this.emit("room:failed",r.data),t(r))})})}_leaveRoom(){this._socket.emit("endMeeting"),this._close()}_close(){var e,t,r,n,i,s,a,o;this._socket&&(null==(t=null==(e=this._videoProducer)?void 0:e.track)||t.stop(),null==(n=null==(r=this._audioProducer)?void 0:r.track)||n.stop(),this._stopVideoProducer(),this._stopAudioProducer(),null==(i=this._recvTransport)||i.close(),null==(s=this._sendTransport)||s.close(),this._disconnectSocket(),null==(a=this._audioStream)||a.getTracks().forEach(e=>e.stop()),null==(o=this._videoStream)||o.getTracks().forEach(e=>e.stop()),this._audioStream=null,this._videoStream=null)}_disconnectSocket(){this._socket.disconnect()}_handlePeerLeft=({peerId:e})=>{this._peers.delete(e),console.info("_handlePeerLeft() | Peer Left",{peerId:e}),this.emit("room:peer-left",e)};_handleNewPeer=e=>{if(e.peerId===this._me.peerId)return;let t={peerId:e.peerId,displayName:e.displayName,avatarUrl:e.avatarUrl||"",joinStatus:"joined:webrtc-creating",isHandRaised:e.isHandRaised||!1,role:e.role};this.emit("room:peer-joined",t),this._peers.set(e.peerId,t),console.log(e.peerId,{newPeer:t,peers:this._peers})};_handleUpdateTargetPeerIds=e=>{let t;switch(e.mediaType){case"cam":t=this._videoProducer;break;case"mic":t=this._audioProducer}if(t&&Array.isArray(t.appData.targetPeerIds)){if("add"===e.operation)t.appData.targetPeerIds.push(e.consumingPeerId);else if("remove"===e.operation){let r=t.appData.targetPeerIds.indexOf(e.consumingPeerId);r>-1&&t.appData.targetPeerIds.splice(r,1)}}};_startRecording=async e=>{if(!e)throw Error("startRecording() | No sourceUrl provided.");if(e.includes("localhost"))throw Error("startRecording() | Recording cannot be started on localhost.");return console.log("HuddleWebClient | startRecording() | Starting recording",{sourceUrl:e}),new Promise((t,r)=>{this._socket.emit("start-recording",{sourceUrl:e},e=>{e.success?t(e):(this.logger.error("startRecording() | Error starting recording",e.error),r(e))})})};_stopRecording=async(e=!1)=>new Promise((t,r)=>{this._socket.emit("stop-recording",{ipfs:e},e=>{e.success?t(e):(this.logger.error("stopRecording() | Error in stopping recording",e.data),r(e))})});_startStreaming=async e=>{if(!e.sourceUrl)throw Error("startStreaming() | No sourceUrl provided.");if(e.sourceUrl.includes("localhost"))throw Error("startStreaming() | Streaming cannot be started on localhost.");return new Promise((t,r)=>{this._socket.emit("start-livestream",e,e=>{e.success?t(e):(this.logger.error("startStreaming() | Error in starting streaming",e.data),r(e))})})};_stopStreaming=async()=>new Promise((e,t)=>{this._socket.emit("stop-livestream",null,r=>{r.success?e(r):(this.logger.error("stopStreaming() | Error in stopping streaming",r.data),t(r))})});_setDisplayName=e=>{let t={data:{displayName:{name:e}},peerId:this._me.peerId};return new Promise((r,n)=>{this._socket.emit("peer-set-displayName",t,t=>{t.success?r(e):n(t)})})};_createSingleConsumer=e=>{e.producerPeerId!==this._me.peerId&&(console.log("createSingleConsumer() |",e),this._socket.emit("create-single-consumer",e))};_closeSingleConsumer=e=>{let t=this._peersConsumers.get(e.producerPeerId);t&&t[e.mediaType]&&(console.log("HuddleWebCLient | closeSingleConsumer() |",{consumerIdtoCLose:t[e.mediaType]}),this._socket.emit("close-consumer",{peerId:this._me.peerId,roomId:this._roomId,consumerId:t[e.mediaType],mediaType:e.mediaType,producerPeerId:e.producerPeerId}),console.log("closeSingleConsumer() | sent"))};__handlePeerUpdatedHandleName=e=>{this.emit("room:peer-name-update",e.peerId,e.data.displayName.name),this.logger.info("room:peer-name-update",e.peerId,e.data.displayName.name)};handlePeerControls=async e=>{if(!this._acl.getAcl().changePermission){this.logger.error("You do not have the required permissions");return}return await new Promise((t,r)=>{this._socket.emit("peer-controls",e,e=>{e.success?(this.logger.info("Peer Control, Request Success"),t(e)):r(e)})})};handleRoomControls=async e=>{if(!this._acl.getAcl().changePermission){this.logger.error("You do not have permission to change room settings");return}return await new Promise((t,r)=>{this._socket.emit("room-controls",e,n=>{n.success?(this.setIndividualControl(e.type,e.value),t(n)):r(n)})})};setIndividualControl=(e,t)=>{let r={audioLocked:"audio",videoLocked:"video",shareLocked:"screenshare",chatLocked:"chat",roomLocked:"roomLock"};this._hostControls[r[e]]=t}},ej=new class extends eM{_projectId;constructor(){super()}getMeId=()=>this._me.peerId;initialize=e=>{if(!e)throw Error("projectId is missing");this._projectId=e,this.emit("app:initialized"),this.logger.info("app:initialized")};joinLobby=async(e,t)=>{if(!this._projectId)throw Error("projectId is missing, please initialize the SDK first");if(!e)throw Error("roomId is missing");await this._joinLobby(this._projectId,e),this._socket.on("peer-control-success",this.handlePeerControlResponse),this._socket.on("room-control-success",this.handleRoomControlResponse),this._socket.on("role-control-success",this.handleRoleControlResponse),this._socket.on("role-change-success",this.handleRoleChangeResponse)};leaveLobby=()=>{this._disconnectSocket()};joinRoom=(e=!0)=>{if(!this._socket)throw Error("Lobby not joined yet, please join lobby first");this._joinRoom(e)};leaveRoom=()=>{this._leaveRoom()};enumerateMicDevices=async()=>navigator.mediaDevices.enumerateDevices().then(e=>{let t=e.filter(e=>"audioinput"===e.kind);return t});fetchAudioStream=async e=>{if(this._audioStream)return console.info("Audio stream already exists, returning the same"),this._audioStream;try{return this._audioStream=await navigator.mediaDevices.getUserMedia({audio:!e||{deviceId:{ideal:e}}}),this._audioProducer&&(console.log("Replacing video track..."),this._audioProducer.replaceTrack({track:this._audioStream.getAudioTracks()[0]})),this.emit("app:mic-on",this._audioStream),this.logger.info("app:cam-on",this._audioStream),this._audioStream}catch(t){throw console.error("Audio Request Error; Reason:",t),Error("Unable to fetch audio stream")}};stopAudioStream=()=>{if(this._audioProducer&&(console.log("Audio producer found, stopping audio producer first"),this.stopProducingAudio()),this._audioStream){this._audioStream.getTracks().forEach(e=>e.stop()),this._audioStream=null,this.emit("app:mic-off"),this.logger.info("app:mic-off");return}throw Error("Audio stream not found, fetch audio stream first")};produceAudio(e,t){if(!this._acl.getAcl().audioProducer)throw Error("ACL | produceAudio() | Audio producer not allowed");if(!this._socket)throw Error("Room not joined yet, please join room first");this._produceAudioStream(e,t)}stopProducingAudio=()=>{if(!this._audioProducer)throw Error("Audio producer not found, produce audio first");if(!this._socket)throw Error("Room not joined yet, please join room first");this._requestStopAudioProducer()};createMicConsumer=e=>{if(!this._socket)throw Error("Room not joined yet, please join room first");this._createSingleConsumer({mediaType:"mic",producerPeerId:e})};closeMicConsumer=e=>{if(!e)throw Error("peerId is missing");this._closeSingleConsumer({mediaType:"mic",producerPeerId:e})};enumerateCamDevices=()=>navigator.mediaDevices.enumerateDevices().then(e=>{let t=e.filter(e=>"videoinput"===e.kind);return t});fetchVideoStream=async e=>{if(this._videoStream)return console.info("Video stream already exists, returning the same"),this._videoStream;try{return this._videoStream=await navigator.mediaDevices.getUserMedia({video:!e||{deviceId:{ideal:e}}}),this._videoProducer&&(console.log("Replacing video track..."),this._videoProducer.replaceTrack({track:this._videoStream.getVideoTracks()[0]})),this.emit("app:cam-on",this._videoStream),this.logger.info("app:cam-on",this._videoStream),this._videoStream}catch(t){throw console.error("Video Request Error; Reason:",t),Error("Unable to fetch video stream")}};stopVideoStream=()=>{if(this._videoProducer&&(console.log("Video producer found, stopping video producer first"),this.stopProducingVideo()),this._videoStream){this._videoStream.getTracks().forEach(e=>e.stop()),this._videoStream=null,this.emit("app:cam-off"),this.logger.info("app:cam-off");return}throw Error("Video stream not found, fetch video stream first")};produceVideo(e,t){if(!this._acl.getAcl().videoProducer)throw Error("ACL | produceVideo() | Video producer not allowed");if(!this._socket)throw Error("Room not joined yet, please join room first");this._produceVideoStream(e,t)}stopProducingVideo(){if(!this._videoProducer){console.log("Video not producing yet");return}if(!this._socket)throw Error("Room not joined yet, please join room first");this._requestStopVideoProducer()}createCamConsumer(e){if(!e)throw Error("peerId is missing");this._createSingleConsumer({mediaType:"cam",producerPeerId:e})}closeCamConsumer=e=>{if(!e)throw Error("peerId is missing");this._closeSingleConsumer({mediaType:"cam",producerPeerId:e})};getPeers=()=>{let e=Array.from(this._peers,([e,t])=>t);return console.log("thisPeers:",this._peers),e};getPeer=e=>{let t=this._peers.get(e);if(!t)throw Error("Peer not found");return t};getPeerTracks=e=>{var t,r;let n=this._peers.get(e);if(!n)throw Error(` Peer not found with peerId ${e}`);let i=this._peersConsumers.get(e);console.log({peerConsumerIds:i,_peersConsumers:this._peersConsumers,_consumers:this._consumers});let s=null==(t=this._consumers.get(i.mic))?void 0:t.track,a=null==(r=this._consumers.get(i.cam))?void 0:r.track;return{audio:s,video:a}};startRecording=async e=>{if(!e)throw Error("sourceUrl is missing");return await this._startRecording(e)};stopRecording=(e=!1)=>{this._stopRecording(e)};setDisplayName=async e=>{if(!e)throw Error("displayName is missing");await this._setDisplayName(e)};changePeerControls=async e=>{if(!this._acl.getAcl().changePermission){this.logger.error("ACL | changePeerControls() | You do not have the required permissions");return}return await new Promise((t,r)=>{this._socket.emit("peer-controls",e,e=>{e.success?(this.logger.info("Peer Control, Request Success"),t(e)):r(e)})})};changeRoomControls=async e=>{if(!this._acl.getAcl().changePermission){this.logger.error("ACL | changeRoomControls() | You do not have permission to change room settings");return}return await new Promise((t,r)=>{this._socket.emit("room-controls",e,n=>{n.success?(this.setIndividualControl(e.type,e.value),t(n)):r(n)})})};changePeerRole=async e=>{if(console.log("changePeerRole"),!this._acl.getAcl().changeRole){this.logger.error("ACL | changePeerRole() | You do not have permission to change peer role");return}return await new Promise((t,r)=>{this._socket.emit("role-controls",e,e=>{e.success?t(e):(this.logger.error("You do not have permission to change peer role"),r(e))})})};handlePeerControlResponse=async e=>{let{media:t,type:r}=e,n="locked"===r;"video"===t&&(this.stopVideoStream(),n&&this._acl.updateACL({videoProducer:!1})),"audio"===t&&(this.stopAudioStream(),n&&this._acl.updateACL({audioProducer:!1}))};handleRoomControlResponse=async e=>{if(this.setIndividualControl(e.type,e.value),this._acl.getAcl().changePermission)return;if("muteEveryone"===e.type){this.stopAudioStream(),this.logger.info("ACL | Host has Muted Everyone. You Have Been Muted.");return}let{type:t}=e;"audioLocked"===t&&(this._acl.updateACL({audioProducer:!e.value}),e.value&&(this.logger.info("ACL | Host Only Audio Enabled. You Have Been Muted."),this.stopAudioStream())),"videoLocked"===t&&(this._acl.updateACL({videoProducer:!e.value}),e.value&&(this.stopVideoStream(),this.logger.info("ACL | Host Only Video Enabled. Your Video has been Disabled.")))};handleRoleControlResponse=async e=>{this.emit("room:peer-role-update",e.peerId,e.role)};handleRoleChangeResponse=async e=>{console.log("ACL | Me Role Changed Response",e),this._me.role=e.role,this._acl.updateACL(e.acl),this.emit("room:me-role-update",e.role)}}},93189:function(e,t,r){"use strict";r.d(t,{a:function(){return b}});var n=r(30065),i=r(19005),s=r(67294),a=r(14034),o=r(464),l=r(91784),c=r(85945),u=r(37122),d=r(24798);let p=(e,t)=>{(e.suspense||e.useErrorBoundary)&&!t.isReset()&&(e.retryOnMount=!1)},h=e=>{s.useEffect(()=>{e.clearReset()},[e])},f=({result:e,errorResetBoundary:t,useErrorBoundary:r,query:n})=>e.isError&&!t.isReset()&&!e.isFetching&&(0,d.L)(r,[e.error,n]),m=e=>{e.suspense&&"number"!=typeof e.staleTime&&(e.staleTime=1e3)},g=(e,t)=>e.isLoading&&e.isFetching&&!t,y=(e,t,r)=>(null==e?void 0:e.suspense)&&g(t,r),v=(e,t,r)=>t.fetchOptimistic(e).then(({data:t})=>{null==e.onSuccess||e.onSuccess(t),null==e.onSettled||e.onSettled(t,null)}).catch(t=>{r.clearReset(),null==e.onError||e.onError(t),null==e.onSettled||e.onSettled(void 0,t)});function b(e,t,r){let d=(0,n._v)(e,t,r);return function(e,t){let r=(0,c.NL)({context:e.context}),n=(0,u.S)(),i=(0,l._)(),d=r.defaultQueryOptions(e);d._optimisticResults=n?"isRestoring":"optimistic",d.onError&&(d.onError=a.V.batchCalls(d.onError)),d.onSuccess&&(d.onSuccess=a.V.batchCalls(d.onSuccess)),d.onSettled&&(d.onSettled=a.V.batchCalls(d.onSettled)),m(d),p(d,i),h(i);let[g]=s.useState(()=>new t(r,d)),b=g.getOptimisticResult(d);if((0,o.$)(s.useCallback(e=>{let t=n?()=>void 0:g.subscribe(a.V.batchCalls(e));return g.updateResult(),t},[g,n]),()=>g.getCurrentResult(),()=>g.getCurrentResult()),s.useEffect(()=>{g.setOptions(d,{listeners:!1})},[d,g]),y(d,b,n))throw v(d,g,i);if(f({result:b,errorResetBoundary:i,useErrorBoundary:d.useErrorBoundary,query:g.getCurrentQuery()}))throw b.error;return d.notifyOnChangeProps?b:g.trackResult(b)}(d,i.z)}},59090:function(e,t,r){"use strict";r.d(t,{E:function(){return iV}});var n,i=r(67294);let s=(0,i.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),a=(0,i.createContext)({}),o=(0,i.createContext)(null),l="undefined"!=typeof document,c=l?i.useLayoutEffect:i.useEffect,u=(0,i.createContext)({strict:!1});function d(e){return"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function p(e){return"string"==typeof e||Array.isArray(e)}function h(e){return"object"==typeof e&&"function"==typeof e.start}let f=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],m=["initial",...f];function g(e){return h(e.animate)||m.some(t=>p(e[t]))}function y(e){return Boolean(g(e)||e.variants)}function v(e){return Array.isArray(e)?e.join(" "):e}let b={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},w={};for(let _ in b)w[_]={isEnabled:e=>b[_].some(t=>!!e[t])};let x=(0,i.createContext)({}),S=(0,i.createContext)({}),T=Symbol.for("motionComponentSymbol"),E=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function C(e){if("string"!=typeof e||e.includes("-"));else if(E.indexOf(e)>-1||/[A-Z]/.test(e))return!0;return!1}let k={},R=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],P=new Set(R);function D(e,{layout:t,layoutId:r}){return P.has(e)||e.startsWith("origin")||(t||void 0!==r)&&(!!k[e]||"opacity"===e)}let A=e=>Boolean(e&&e.getVelocity),N={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},L=R.length,O=e=>t=>"string"==typeof t&&t.startsWith(e),I=O("--"),M=O("var(--"),j=(e,t)=>t&&"number"==typeof e?t.transform(e):e,F=(e,t,r)=>Math.min(Math.max(r,e),t),$={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},B={...$,transform:e=>F(0,1,e)},U={...$,default:1},q=e=>Math.round(1e5*e)/1e5,z=/(-)?([\d]*\.?[\d])+/g,V=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,H=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function W(e){return"string"==typeof e}let Z=e=>({test:t=>W(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),K=Z("deg"),G=Z("%"),Y=Z("px"),J=Z("vh"),Q=Z("vw"),X={...G,parse:e=>G.parse(e)/100,transform:e=>G.transform(100*e)},ee={...$,transform:Math.round},et={borderWidth:Y,borderTopWidth:Y,borderRightWidth:Y,borderBottomWidth:Y,borderLeftWidth:Y,borderRadius:Y,radius:Y,borderTopLeftRadius:Y,borderTopRightRadius:Y,borderBottomRightRadius:Y,borderBottomLeftRadius:Y,width:Y,maxWidth:Y,height:Y,maxHeight:Y,size:Y,top:Y,right:Y,bottom:Y,left:Y,padding:Y,paddingTop:Y,paddingRight:Y,paddingBottom:Y,paddingLeft:Y,margin:Y,marginTop:Y,marginRight:Y,marginBottom:Y,marginLeft:Y,rotate:K,rotateX:K,rotateY:K,rotateZ:K,scale:U,scaleX:U,scaleY:U,scaleZ:U,skew:K,skewX:K,skewY:K,distance:Y,translateX:Y,translateY:Y,translateZ:Y,x:Y,y:Y,z:Y,perspective:Y,transformPerspective:Y,opacity:B,originX:X,originY:X,originZ:Y,zIndex:ee,fillOpacity:B,strokeOpacity:B,numOctaves:ee};function er(e,t,r,n){let{style:i,vars:s,transform:a,transformOrigin:o}=e,l=!1,c=!1,u=!0;for(let d in t){let p=t[d];if(I(d)){s[d]=p;continue}let h=et[d],f=j(p,h);if(P.has(d)){if(l=!0,a[d]=f,!u)continue;p!==(h.default||0)&&(u=!1)}else d.startsWith("origin")?(c=!0,o[d]=f):i[d]=f}if(!t.transform&&(l||n?i.transform=function(e,{enableHardwareAcceleration:t=!0,allowTransformNone:r=!0},n,i){let s="";for(let a=0;a<L;a++){let o=R[a];if(void 0!==e[o]){let l=N[o]||o;s+=`${l}(${e[o]}) `}}return t&&!e.z&&(s+="translateZ(0)"),s=s.trim(),i?s=i(e,n?"":s):r&&n&&(s="none"),s}(e.transform,r,u,n):i.transform&&(i.transform="none")),c){let{originX:m="50%",originY:g="50%",originZ:y=0}=o;i.transformOrigin=`${m} ${g} ${y}`}}let en=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ei(e,t,r){for(let n in t)A(t[n])||D(n,r)||(e[n]=t[n])}function es(e,t,r){let n={},s=function(e,t,r){let n=e.style||{},s={};return ei(s,n,e),Object.assign(s,function({transformTemplate:e},t,r){return(0,i.useMemo)(()=>{let n=en();return er(n,t,{enableHardwareAcceleration:!r},e),Object.assign({},n.vars,n.style)},[t])}(e,t,r)),e.transformValues?e.transformValues(s):s}(e,t,r);return e.drag&&!1!==e.dragListener&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=!0===e.drag?"none":`pan-${"x"===e.drag?"y":"x"}`),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}let ea=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function eo(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||ea.has(e)}let el=e=>!eo(e);try{(n=require("@emotion/is-prop-valid").default)&&(el=e=>e.startsWith("on")?!eo(e):n(e))}catch(ec){}function eu(e,t,r){return"string"==typeof e?e:Y.transform(t+r*e)}let ed={offset:"stroke-dashoffset",array:"stroke-dasharray"},ep={offset:"strokeDashoffset",array:"strokeDasharray"};function eh(e,{attrX:t,attrY:r,attrScale:n,originX:i,originY:s,pathLength:a,pathSpacing:o=1,pathOffset:l=0,...c},u,d,p){if(er(e,c,u,p),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};let{attrs:h,style:f,dimensions:m}=e;h.transform&&(m&&(f.transform=h.transform),delete h.transform),m&&(void 0!==i||void 0!==s||f.transform)&&(f.transformOrigin=function(e,t,r){let n=eu(t,e.x,e.width),i=eu(r,e.y,e.height);return`${n} ${i}`}(m,void 0!==i?i:.5,void 0!==s?s:.5)),void 0!==t&&(h.x=t),void 0!==r&&(h.y=r),void 0!==n&&(h.scale=n),void 0!==a&&function(e,t,r=1,n=0,i=!0){e.pathLength=1;let s=i?ed:ep;e[s.offset]=Y.transform(-n);let a=Y.transform(t),o=Y.transform(r);e[s.array]=`${a} ${o}`}(h,a,o,l,!1)}let ef=()=>({...en(),attrs:{}}),em=e=>"string"==typeof e&&"svg"===e.toLowerCase();function eg(e,t,r,n){let s=(0,i.useMemo)(()=>{let r=ef();return eh(r,t,{enableHardwareAcceleration:!1},em(n),e.transformTemplate),{...r.attrs,style:{...r.style}}},[t]);if(e.style){let a={};ei(a,e.style,e),s.style={...a,...s.style}}return s}let ey=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();function ev(e,{style:t,vars:r},n,i){for(let s in Object.assign(e.style,t,i&&i.getProjectionStyles(n)),r)e.style.setProperty(s,r[s])}let eb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ew(e,t,r,n){for(let i in ev(e,t,void 0,n),t.attrs)e.setAttribute(eb.has(i)?i:ey(i),t.attrs[i])}function e_(e,t){let{style:r}=e,n={};for(let i in r)(A(r[i])||t.style&&A(t.style[i])||D(i,e))&&(n[i]=r[i]);return n}function ex(e,t){let r=e_(e,t);for(let n in e)if(A(e[n])||A(t[n])){let i=-1!==R.indexOf(n)?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;r[i]=e[n]}return r}function eS(e,t,r,n={},i={}){return"function"==typeof t&&(t=t(void 0!==r?r:e.custom,n,i)),"string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t&&(t=t(void 0!==r?r:e.custom,n,i)),t}let eT=e=>Array.isArray(e),eE=e=>Boolean(e&&"object"==typeof e&&e.mix&&e.toValue),eC=e=>eT(e)?e[e.length-1]||0:e;function ek(e){let t=A(e)?e.get():e;return eE(t)?t.toValue():t}let eR=e=>(t,r)=>{let n=(0,i.useContext)(a),s=(0,i.useContext)(o),l=()=>(function({scrapeMotionValuesFromProps:e,createRenderState:t,onMount:r},n,i,s){let a={latestValues:function(e,t,r,n){let i={},s=n(e,{});for(let a in s)i[a]=ek(s[a]);let{initial:o,animate:l}=e,c=g(e),u=y(e);t&&u&&!c&&!1!==e.inherit&&(void 0===o&&(o=t.initial),void 0===l&&(l=t.animate));let d=!!r&&!1===r.initial;d=d||!1===o;let p=d?l:o;if(p&&"boolean"!=typeof p&&!h(p)){let f=Array.isArray(p)?p:[p];f.forEach(t=>{let r=eS(e,t);if(!r)return;let{transitionEnd:n,transition:s,...a}=r;for(let o in a){let l=a[o];if(Array.isArray(l)){let c=d?l.length-1:0;l=l[c]}null!==l&&(i[o]=l)}for(let u in n)i[u]=n[u]})}return i}(n,i,s,e),renderState:t()};return r&&(a.mount=e=>r(n,e,a)),a})(e,t,n,s);return r?l():function(e){let t=(0,i.useRef)(null);return null===t.current&&(t.current=e()),t.current}(l)},eP={useVisualState:eR({scrapeMotionValuesFromProps:ex,createRenderState:ef,onMount:(e,t,{renderState:r,latestValues:n})=>{try{r.dimensions="function"==typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(i){r.dimensions={x:0,y:0,width:0,height:0}}eh(r,n,{enableHardwareAcceleration:!1},em(t.tagName),e.transformTemplate),ew(t,r)}})},eD={useVisualState:eR({scrapeMotionValuesFromProps:e_,createRenderState:en})};function eA(e,t,r,n={passive:!0}){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r)}let eN=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary;function eL(e,t="page"){return{point:{x:e[t+"X"],y:e[t+"Y"]}}}let eO=e=>t=>eN(t)&&e(t,eL(t));function eI(e,t,r,n){return eA(e,t,eO(r),n)}let eM=(e,t)=>r=>t(e(r)),ej=(...e)=>e.reduce(eM);function eF(e){let t=null;return()=>{let r=()=>{t=null};return null===t&&(t=e,r)}}let e$=eF("dragHorizontal"),eB=eF("dragVertical");function eU(e){let t=!1;if("y"===e)t=eB();else if("x"===e)t=e$();else{let r=e$(),n=eB();r&&n?t=()=>{r(),n()}:(r&&r(),n&&n())}return t}function eq(){let e=eU(!0);return!e||(e(),!1)}class ez{constructor(e){this.isMounted=!1,this.node=e}update(){}}let eV={delta:0,timestamp:0,isProcessing:!1},eH=!0,eW=!1,eZ=["read","update","preRender","render","postRender"],eK=eZ.reduce((e,t)=>(e[t]=function(e){let t=[],r=[],n=0,i=!1,s=!1,a=new WeakSet,o={schedule:(e,s=!1,o=!1)=>{let l=o&&i,c=l?t:r;return s&&a.add(e),-1===c.indexOf(e)&&(c.push(e),l&&i&&(n=t.length)),e},cancel:e=>{let t=r.indexOf(e);-1!==t&&r.splice(t,1),a.delete(e)},process:l=>{if(i){s=!0;return}if(i=!0,[t,r]=[r,t],r.length=0,n=t.length)for(let c=0;c<n;c++){let u=t[c];u(l),a.has(u)&&(o.schedule(u),e())}i=!1,s&&(s=!1,o.process(l))}};return o}(()=>eW=!0),e),{}),eG=e=>eK[e].process(eV),eY=e=>{eW=!1,eV.delta=eH?1e3/60:Math.max(Math.min(e-eV.timestamp,40),1),eV.timestamp=e,eV.isProcessing=!0,eZ.forEach(eG),eV.isProcessing=!1,eW&&(eH=!1,requestAnimationFrame(eY))},eJ=()=>{eW=!0,eH=!0,eV.isProcessing||requestAnimationFrame(eY)},eQ=eZ.reduce((e,t)=>{let r=eK[t];return e[t]=(e,t=!1,n=!1)=>(eW||eJ(),r.schedule(e,t,n)),e},{});function eX(e){eZ.forEach(t=>eK[t].cancel(e))}function e0(e,t){let r="onHover"+(t?"Start":"End"),n=(n,i)=>{if("touch"===n.type||eq())return;let s=e.getProps();e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",t),s[r]&&eQ.update(()=>s[r](n,i))};return eI(e.current,"pointer"+(t?"enter":"leave"),n,{passive:!e.getProps()[r]})}let e1=(e,t)=>!!t&&(e===t||e1(e,t.parentElement)),e2=e=>e;function e5(e,t){if(!t)return;let r=new PointerEvent("pointer"+e);t(r,eL(r))}let e4=new WeakMap,e6=new WeakMap,e3=e=>{let t=e4.get(e.target);t&&t(e)},e8=e=>{e.forEach(e3)},e9={some:0,all:1};function e7(e,t){if(!Array.isArray(t))return!1;let r=t.length;if(r!==e.length)return!1;for(let n=0;n<r;n++)if(t[n]!==e[n])return!1;return!0}function te(e,t,r){let n=e.getProps();return eS(n,t,void 0!==r?r:n.custom,function(e){let t={};return e.values.forEach((e,r)=>t[r]=e.get()),t}(e),function(e){let t={};return e.values.forEach((e,r)=>t[r]=e.getVelocity()),t}(e))}let tt="data-"+ey("framerAppearId"),tr=e=>1e3*e,tn=e=>e/1e3,ti={current:!1},ts=e=>Array.isArray(e)&&"number"==typeof e[0],ta=([e,t,r,n])=>`cubic-bezier(${e}, ${t}, ${r}, ${n})`,to={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ta([0,.65,.55,1]),circOut:ta([.55,0,1,.45]),backIn:ta([.31,.01,.66,-.59]),backOut:ta([.33,1.53,.69,.99])},tl={waapi:()=>Object.hasOwnProperty.call(Element.prototype,"animate")},tc={},tu={};for(let td in tl)tu[td]=()=>(void 0===tc[td]&&(tc[td]=tl[td]()),tc[td]);let tp=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function th(e,t,r,n){if(e===t&&r===n)return e2;let i=t=>(function(e,t,r,n,i){let s,a;let o=0;do(s=tp(a=t+(r-t)/2,n,i)-e)>0?r=a:t=a;while(Math.abs(s)>1e-7&&++o<12);return a})(t,0,1,e,r);return e=>0===e||1===e?e:tp(i(e),t,n)}let tf=th(.42,0,1,1),tm=th(0,0,.58,1),tg=th(.42,0,.58,1),ty=e=>Array.isArray(e)&&"number"!=typeof e[0],tv=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,tb=e=>t=>1-e(1-t),tw=e=>1-Math.sin(Math.acos(e)),t_=tb(tw),tx=tv(t_),tS=th(.33,1.53,.69,.99),tT=tb(tS),tE=tv(tT),tC=e=>(e*=2)<1?.5*tT(e):.5*(2-Math.pow(2,-10*(e-1))),tk={linear:e2,easeIn:tf,easeInOut:tg,easeOut:tm,circIn:tw,circInOut:tx,circOut:t_,backIn:tT,backInOut:tE,backOut:tS,anticipate:tC},tR=e=>{if(Array.isArray(e)){e2(4===e.length,"Cubic bezier arrays must contain four numerical values.");let[t,r,n,i]=e;return th(t,r,n,i)}return"string"==typeof e?(e2(void 0!==tk[e],`Invalid easing type '${e}'`),tk[e]):e},tP=(e,t)=>r=>Boolean(W(r)&&H.test(r)&&r.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(r,t)),tD=(e,t,r)=>n=>{if(!W(n))return n;let[i,s,a,o]=n.match(z);return{[e]:parseFloat(i),[t]:parseFloat(s),[r]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},tA=e=>F(0,255,e),tN={...$,transform:e=>Math.round(tA(e))},tL={test:tP("rgb","red"),parse:tD("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:n=1})=>"rgba("+tN.transform(e)+", "+tN.transform(t)+", "+tN.transform(r)+", "+q(B.transform(n))+")"},tO={test:tP("#"),parse:function(e){let t="",r="",n="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),n=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),n=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,n+=n,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}},transform:tL.transform},tI={test:tP("hsl","hue"),parse:tD("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:n=1})=>"hsla("+Math.round(e)+", "+G.transform(q(t))+", "+G.transform(q(r))+", "+q(B.transform(n))+")"},tM={test:e=>tL.test(e)||tO.test(e)||tI.test(e),parse:e=>tL.test(e)?tL.parse(e):tI.test(e)?tI.parse(e):tO.parse(e),transform:e=>W(e)?e:e.hasOwnProperty("red")?tL.transform(e):tI.transform(e)},tj=(e,t,r)=>-r*e+r*t+e;function tF(e,t,r){return(r<0&&(r+=1),r>1&&(r-=1),r<1/6)?e+(t-e)*6*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}let t$=(e,t,r)=>{let n=e*e;return Math.sqrt(Math.max(0,r*(t*t-n)+n))},tB=[tO,tL,tI],tU=e=>tB.find(t=>t.test(e));function tq(e){let t=tU(e);e2(Boolean(t),`'${e}' is not an animatable color. Use the equivalent color code instead.`);let r=t.parse(e);return t===tI&&(r=function({hue:e,saturation:t,lightness:r,alpha:n}){e/=360,r/=100;let i=0,s=0,a=0;if(t/=100){let o=r<.5?r*(1+t):r+t-r*t,l=2*r-o;i=tF(l,o,e+1/3),s=tF(l,o,e),a=tF(l,o,e-1/3)}else i=s=a=r;return{red:Math.round(255*i),green:Math.round(255*s),blue:Math.round(255*a),alpha:n}}(r)),r}let tz=(e,t)=>{let r=tq(e),n=tq(t),i={...r};return e=>(i.red=t$(r.red,n.red,e),i.green=t$(r.green,n.green,e),i.blue=t$(r.blue,n.blue,e),i.alpha=tj(r.alpha,n.alpha,e),tL.transform(i))},tV={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:e2},tH={regex:V,countKey:"Colors",token:"${c}",parse:tM.parse},tW={regex:z,countKey:"Numbers",token:"${n}",parse:$.parse};function tZ(e,{regex:t,countKey:r,token:n,parse:i}){let s=e.tokenised.match(t);s&&(e["num"+r]=s.length,e.tokenised=e.tokenised.replace(t,n),e.values.push(...s.map(i)))}function tK(e){let t=e.toString(),r={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return r.value.includes("var(--")&&tZ(r,tV),tZ(r,tH),tZ(r,tW),r}function tG(e){return tK(e).values}function tY(e){let{values:t,numColors:r,numVars:n,tokenised:i}=tK(e),s=t.length;return e=>{let t=i;for(let a=0;a<s;a++)t=a<n?t.replace(tV.token,e[a]):a<n+r?t.replace(tH.token,tM.transform(e[a])):t.replace(tW.token,q(e[a]));return t}}let tJ=e=>"number"==typeof e?0:e,tQ={test:function(e){var t,r;return isNaN(e)&&W(e)&&((null===(t=e.match(z))||void 0===t?void 0:t.length)||0)+((null===(r=e.match(V))||void 0===r?void 0:r.length)||0)>0},parse:tG,createTransformer:tY,getAnimatableNone:function(e){let t=tG(e),r=tY(e);return r(t.map(tJ))}},tX=(e,t)=>r=>`${r>0?t:e}`;function t0(e,t){return"number"==typeof e?r=>tj(e,t,r):tM.test(e)?tz(e,t):e.startsWith("var(")?tX(e,t):t5(e,t)}let t1=(e,t)=>{let r=[...e],n=r.length,i=e.map((e,r)=>t0(e,t[r]));return e=>{for(let t=0;t<n;t++)r[t]=i[t](e);return r}},t2=(e,t)=>{let r={...e,...t},n={};for(let i in r)void 0!==e[i]&&void 0!==t[i]&&(n[i]=t0(e[i],t[i]));return e=>{for(let t in n)r[t]=n[t](e);return r}},t5=(e,t)=>{let r=tQ.createTransformer(t),n=tK(e),i=tK(t),s=n.numVars===i.numVars&&n.numColors===i.numColors&&n.numNumbers>=i.numNumbers;return s?ej(t1(n.values,i.values),r):(e2(!0,`Complex values '${e}' and '${t}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`),tX(e,t))},t4=(e,t,r)=>{let n=t-e;return 0===n?1:(r-e)/n},t6=(e,t)=>r=>tj(e,t,r);function t3(e,t,{clamp:r=!0,ease:n,mixer:i}={}){let s=e.length;if(e2(s===t.length,"Both input and output ranges must be the same length"),1===s)return()=>t[0];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());let a=function(e,t,r){let n=[],i=r||function(e){if("number"==typeof e);else if("string"==typeof e)return tM.test(e)?tz:t5;else if(Array.isArray(e))return t1;else if("object"==typeof e)return t2;return t6}(e[0]),s=e.length-1;for(let a=0;a<s;a++){let o=i(e[a],e[a+1]);if(t){let l=Array.isArray(t)?t[a]||e2:t;o=ej(l,o)}n.push(o)}return n}(t,n,i),o=a.length,l=t=>{let r=0;if(o>1)for(;r<e.length-2&&!(t<e[r+1]);r++);let n=t4(e[r],e[r+1],t);return a[r](n)};return r?t=>l(F(e[0],e[s-1],t)):l}function t8({duration:e=300,keyframes:t,times:r,ease:n="easeInOut"}){let i=ty(n)?n.map(tR):tR(n),s={done:!1,value:t[0]},a=(r&&r.length===t.length?r:function(e){let t=[0];return function(e,t){let r=e[e.length-1];for(let n=1;n<=t;n++){let i=t4(0,t,n);e.push(tj(r,1,i))}}(t,e.length-1),t}(t)).map(t=>t*e),o=t3(a,t,{ease:Array.isArray(i)?i:t.map(()=>i||tg).splice(0,t.length-1)});return{calculatedDuration:e,next:t=>(s.value=o(t),s.done=t>=e,s)}}function t9(e,t,r){var n,i;let s=Math.max(t-5,0);return n=r-e(s),(i=t-s)?n*(1e3/i):0}function t7(e,t){return e*Math.sqrt(1-t*t)}let re=["duration","bounce"],rt=["stiffness","damping","mass"];function rr(e,t){return t.some(t=>void 0!==e[t])}function rn({keyframes:e,restDelta:t,restSpeed:r,...n}){let i;let s=e[0],a=e[e.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,velocity:d,duration:p,isResolvedFromDuration:h}=function(e){let t={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...e};if(!rr(e,rt)&&rr(e,re)){let r=function({duration:e=800,bounce:t=.25,velocity:r=0,mass:n=1}){let i,s;e2(e<=tr(10),"Spring duration must be 10 seconds or less");let a=1-t;a=F(.05,1,a),e=F(.01,10,tn(e)),a<1?(i=t=>{let n=t*a,i=n*e,s=t7(t,a);return .001-(n-r)/s*Math.exp(-i)},s=t=>{let n=t*a,s=n*e,o=Math.pow(a,2)*Math.pow(t,2)*e,l=t7(Math.pow(t,2),a),c=-i(t)+.001>0?-1:1;return c*((s*r+r-o)*Math.exp(-s))/l}):(i=t=>{let n=Math.exp(-t*e),i=(t-r)*e+1;return -.001+n*i},s=t=>{let n=Math.exp(-t*e),i=(r-t)*(e*e);return n*i});let o=5/e,l=function(e,t,r){let n=r;for(let i=1;i<12;i++)n-=e(n)/t(n);return n}(i,s,o);if(e=tr(e),isNaN(l))return{stiffness:100,damping:10,duration:e};{let c=Math.pow(l,2)*n;return{stiffness:c,damping:2*a*Math.sqrt(n*c),duration:e}}}(e);(t={...t,...r,velocity:0,mass:1}).isResolvedFromDuration=!0}return t}(n),f=d?-tn(d):0,m=c/(2*Math.sqrt(l*u)),g=a-s,y=tn(Math.sqrt(l/u)),v=5>Math.abs(g);if(r||(r=v?.01:2),t||(t=v?.005:.5),m<1){let b=t7(y,m);i=e=>a-Math.exp(-m*y*e)*((f+m*y*g)/b*Math.sin(b*e)+g*Math.cos(b*e))}else if(1===m)i=e=>a-Math.exp(-y*e)*(g+(f+y*g)*e);else{let w=y*Math.sqrt(m*m-1);i=e=>{let t=Math.min(w*e,300);return a-Math.exp(-m*y*e)*((f+m*y*g)*Math.sinh(t)+w*g*Math.cosh(t))/w}}return{calculatedDuration:h&&p||null,next:e=>{let n=i(e);if(h)o.done=e>=p;else{let s=f;0!==e&&(s=m<1?t9(i,e,n):0);let l=Math.abs(s)<=r,c=Math.abs(a-n)<=t;o.done=l&&c}return o.value=o.done?a:n,o}}}function ri({keyframes:e,velocity:t=0,power:r=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:u}){let d,p;let h=e[0],f={done:!1,value:h},m=e=>void 0!==o&&e<o||void 0!==l&&e>l,g=e=>void 0===o?l:void 0===l?o:Math.abs(o-e)<Math.abs(l-e)?o:l,y=r*t,v=h+y,b=void 0===a?v:a(v);b!==v&&(y=b-h);let w=e=>-y*Math.exp(-e/n),_=e=>b+w(e),x=e=>{let t=w(e),r=_(e);f.done=Math.abs(t)<=c,f.value=f.done?b:r},S=e=>{m(f.value)&&(d=e,p=rn({keyframes:[f.value,g(f.value)],velocity:t9(_,e,f.value),damping:i,stiffness:s,restDelta:c,restSpeed:u}))};return S(0),{calculatedDuration:null,next:e=>{let t=!1;return(p||void 0!==d||(t=!0,x(e),S(e)),void 0!==d&&e>d)?p.next(e-d):(t||x(e),f)}}}let rs=e=>{let t=({timestamp:t})=>e(t);return{start:()=>eQ.update(t,!0),stop:()=>eX(t),now:()=>eV.isProcessing?eV.timestamp:performance.now()}};function ra(e){let t=0,r=e.next(t);for(;!r.done&&t<2e4;)t+=50,r=e.next(t);return t>=2e4?1/0:t}let ro={decay:ri,inertia:ri,tween:t8,keyframes:t8,spring:rn};function rl({autoplay:e=!0,delay:t=0,driver:r=rs,keyframes:n,type:i="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:o="loop",onPlay:l,onStop:c,onComplete:u,onUpdate:d,...p}){let h,f,m,g,y,v=1,b=!1,w=()=>{f=new Promise(e=>{h=e})};w();let _=ro[i]||t8;_!==t8&&"number"!=typeof n[0]&&(g=t3([0,100],n,{clamp:!1}),n=[0,100]);let x=_({...p,keyframes:n});"mirror"===o&&(y=_({...p,keyframes:[...n].reverse(),velocity:-(p.velocity||0)}));let S="idle",T=null,E=null,C=null;null===x.calculatedDuration&&s&&(x.calculatedDuration=ra(x));let{calculatedDuration:k}=x,R=1/0,P=1/0;null!==k&&(P=(R=k+a)*(s+1)-a);let D=0,A=e=>{if(null===E)return;v>0&&(E=Math.min(E,e)),v<0&&(E=Math.min(e-P/v,E)),D=null!==T?T:Math.round(e-E)*v;let r=D-t*(v>=0?1:-1),i=v>=0?r<0:r>P;D=Math.max(r,0),"finished"===S&&null===T&&(D=P);let l=D,c=x;if(s){let u=D/R,p=Math.floor(u),h=u%1;!h&&u>=1&&(h=1),1===h&&p--,p=Math.min(p,s+1);let f=Boolean(p%2);f&&("reverse"===o?(h=1-h,a&&(h-=a/R)):"mirror"===o&&(c=y));let m=F(0,1,h);D>P&&(m="reverse"===o&&f?1:0),l=m*R}let b=i?{done:!1,value:n[0]}:c.next(l);g&&(b.value=g(b.value));let{done:w}=b;i||null===k||(w=v>=0?D>=P:D<=0);let _=null===T&&("finished"===S||"running"===S&&w);return d&&d(b.value),_&&O(),b},N=()=>{m&&m.stop(),m=void 0},L=()=>{S="idle",N(),h(),w(),E=C=null},O=()=>{S="finished",u&&u(),N(),h()},I=()=>{if(b)return;m||(m=r(A));let e=m.now();l&&l(),null!==T?E=e-T:E&&"finished"!==S||(E=e),"finished"===S&&w(),C=E,T=null,S="running",m.start()};e&&I();let M={then:(e,t)=>f.then(e,t),get time(){return tn(D)},set time(newTime){D=newTime=tr(newTime),null===T&&m&&0!==v?E=m.now()-newTime/v:T=newTime},get duration(){let j=null===x.calculatedDuration?ra(x):x.calculatedDuration;return tn(j)},get speed(){return v},set speed(newSpeed){if(newSpeed===v||!m)return;v=newSpeed,M.time=tn(D)},get state(){return S},play:I,pause:()=>{S="paused",T=D},stop:()=>{b=!0,"idle"!==S&&(S="idle",c&&c(),L())},cancel:()=>{null!==C&&A(C),L()},complete:()=>{S="finished"},sample:e=>(E=0,A(e))};return M}let rc=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),ru=(e,t)=>"spring"===t.type||"backgroundColor"===e||!function e(t){return Boolean(!t||"string"==typeof t&&to[t]||ts(t)||Array.isArray(t)&&t.every(e))}(t.ease),rd={type:"spring",stiffness:500,damping:25,restSpeed:10},rp=e=>({type:"spring",stiffness:550,damping:0===e?2*Math.sqrt(550):30,restSpeed:10}),rh={type:"keyframes",duration:.8},rf={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},rm=(e,{keyframes:t})=>t.length>2?rh:P.has(e)?e.startsWith("scale")?rp(t[1]):rd:rf,rg=(e,t)=>"zIndex"!==e&&!!("number"==typeof t||Array.isArray(t)||"string"==typeof t&&(tQ.test(t)||"0"===t)&&!t.startsWith("url(")),ry=new Set(["brightness","contrast","saturate","opacity"]);function rv(e){let[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;let[n]=r.match(z)||[];if(!n)return e;let i=r.replace(n,""),s=ry.has(t)?1:0;return n!==r&&(s*=100),t+"("+s+i+")"}let rb=/([a-z-]*)\(.*?\)/g,rw={...tQ,getAnimatableNone:e=>{let t=e.match(rb);return t?t.map(rv).join(" "):e}},r_={...et,color:tM,backgroundColor:tM,outlineColor:tM,fill:tM,stroke:tM,borderColor:tM,borderTopColor:tM,borderRightColor:tM,borderBottomColor:tM,borderLeftColor:tM,filter:rw,WebkitFilter:rw},rx=e=>r_[e];function rS(e,t){let r=rx(e);return r!==rw&&(r=tQ),r.getAnimatableNone?r.getAnimatableNone(t):void 0}let rT=e=>/^0[^.\s]+$/.test(e);function rE(e,t){return e[t]||e.default||e}let rC=(e,t,r,n={})=>i=>{let s=rE(n,e)||{},a=s.delay||n.delay||0,{elapsed:o=0}=n;o-=tr(a);let l=function(e,t,r,n){let i,s;let a=rg(t,r);i=Array.isArray(r)?[...r]:[null,r];let o=void 0!==n.from?n.from:e.get(),l=[];for(let c=0;c<i.length;c++){var u;null===i[c]&&(i[c]=0===c?o:i[c-1]),("number"==typeof(u=i[c])?0===u:null!==u?"none"===u||"0"===u||rT(u):void 0)&&l.push(c),"string"==typeof i[c]&&"none"!==i[c]&&"0"!==i[c]&&(s=i[c])}if(a&&l.length&&s)for(let d=0;d<l.length;d++){let p=l[d];i[p]=rS(t,s)}return i}(t,e,r,s),c=l[0],u=l[l.length-1],d=rg(e,c),p=rg(e,u);e2(d===p,`You are trying to animate ${e} from "${c}" to "${u}". ${c} is not an animatable value - to enable this animation set ${c} to a value animatable to ${u} via the \`style\` property.`);let h={keyframes:l,velocity:t.getVelocity(),ease:"easeOut",...s,delay:-o,onUpdate:e=>{t.set(e),s.onUpdate&&s.onUpdate(e)},onComplete:()=>{i(),s.onComplete&&s.onComplete()}};if(!function({when:e,delay:t,delayChildren:r,staggerChildren:n,staggerDirection:i,repeat:s,repeatType:a,repeatDelay:o,from:l,elapsed:c,...u}){return!!Object.keys(u).length}(s)&&(h={...h,...rm(e,h)}),h.duration&&(h.duration=tr(h.duration)),h.repeatDelay&&(h.repeatDelay=tr(h.repeatDelay)),!d||!p||ti.current||!1===s.type)return function({keyframes:e,delay:t,onUpdate:r,onComplete:n}){let i=()=>(r&&r(e[e.length-1]),n&&n(),{time:0,speed:1,duration:0,play:e2,pause:e2,stop:e2,then:e=>(e(),Promise.resolve()),cancel:e2,complete:e2});return t?rl({keyframes:[0,1],duration:0,delay:t,onComplete:i}):i()}(ti.current?{...h,delay:0}:h);if(t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){let f=function(e,t,{onUpdate:r,onComplete:n,...i}){let s,a;let o=tu.waapi()&&rc.has(t)&&!i.repeatDelay&&"mirror"!==i.repeatType&&0!==i.damping&&"inertia"!==i.type;if(!o)return!1;let l=!1,c=()=>{a=new Promise(e=>{s=e})};c();let{keyframes:u,duration:d=300,ease:p,times:h}=i;if(ru(t,i)){let f=rl({...i,repeat:0,delay:0}),m={done:!1,value:u[0]},g=[],y=0;for(;!m.done&&y<2e4;)g.push((m=f.sample(y)).value),y+=10;h=void 0,u=g,d=y-10,p="linear"}let v=function(e,t,r,{delay:n=0,duration:i,repeat:s=0,repeatType:a="loop",ease:o,times:l}={}){let c={[t]:r};l&&(c.offset=l);let u=function e(t){if(t)return ts(t)?ta(t):Array.isArray(t)?t.map(e):to[t]}(o);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:n,duration:i,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:"reverse"===a?"alternate":"normal"})}(e.owner.current,t,u,{...i,duration:d,ease:p,times:h}),b=()=>v.cancel(),w=()=>{eQ.update(b),s(),c()};return v.onfinish=()=>{e.set(function(e,{repeat:t,repeatType:r="loop"}){let n=t&&"loop"!==r&&t%2==1?0:e.length-1;return e[n]}(u,i)),n&&n(),w()},{then:(e,t)=>a.then(e,t),get time(){return tn(v.currentTime||0)},set time(newTime){v.currentTime=tr(newTime)},get speed(){return v.playbackRate},set speed(newSpeed){v.playbackRate=newSpeed},get duration(){return tn(d)},play:()=>{l||(v.play(),eX(b))},pause:()=>v.pause(),stop:()=>{if(l=!0,"idle"===v.playState)return;let{currentTime:t}=v;if(t){let r=rl({...i,autoplay:!1});e.setWithVelocity(r.sample(t-10).value,r.sample(t).value,10)}w()},complete:()=>v.finish(),cancel:w}}(t,e,h);if(f)return f}return rl(h)};function rk(e){return Boolean(A(e)&&e.add)}let rR=e=>/^\-?\d*\.?\d+$/.test(e);function rP(e,t){-1===e.indexOf(t)&&e.push(t)}function rD(e,t){let r=e.indexOf(t);r>-1&&e.splice(r,1)}class rA{constructor(){this.subscriptions=[]}add(e){return rP(this.subscriptions,e),()=>rD(this.subscriptions,e)}notify(e,t,r){let n=this.subscriptions.length;if(n){if(1===n)this.subscriptions[0](e,t,r);else for(let i=0;i<n;i++){let s=this.subscriptions[i];s&&s(e,t,r)}}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}let rN=e=>!isNaN(parseFloat(e));class rL{constructor(e,t={}){this.version="10.12.21",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(e,t=!0)=>{this.prev=this.current,this.current=e;let{delta:r,timestamp:n}=eV;this.lastUpdated!==n&&(this.timeDelta=r,this.lastUpdated=n,eQ.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),t&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>eQ.postRender(this.velocityCheck),this.velocityCheck=({timestamp:e})=>{e!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=rN(this.current),this.owner=t.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new rA);let r=this.events[e].add(t);return"change"===e?()=>{r(),eQ.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(let e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,r){this.set(t),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){var e,t;return this.canTrackVelocity?(e=parseFloat(this.current)-parseFloat(this.prev),(t=this.timeDelta)?e*(1e3/t):0):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function rO(e,t){return new rL(e,t)}let rI=e=>t=>t.test(e),rM=[$,Y,G,K,Q,J,{test:e=>"auto"===e,parse:e=>e}],rj=e=>rM.find(rI(e)),rF=[...rM,tM,tQ],r$=e=>rF.find(rI(e));function rB(e,t,{delay:r=0,transitionOverride:n,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:a,...o}=e.makeTargetAnimatable(t),l=e.getValue("willChange");n&&(s=n);let c=[],u=i&&e.animationState&&e.animationState.getState()[i];for(let d in o){let p=e.getValue(d),h=o[d];if(!p||void 0===h||u&&function({protectedKeys:e,needsAnimating:t},r){let n=e.hasOwnProperty(r)&&!0!==t[r];return t[r]=!1,n}(u,d))continue;let f={delay:r,elapsed:0,...s};if(window.HandoffAppearAnimations&&!p.hasAnimated){let m=e.getProps()[tt];m&&(f.elapsed=window.HandoffAppearAnimations(m,d,p,eQ))}p.start(rC(d,p,h,e.shouldReduceMotion&&P.has(d)?{type:!1}:f));let g=p.animation;rk(l)&&(l.add(d),g.then(()=>l.remove(d))),c.push(g)}return a&&Promise.all(c).then(()=>{a&&function(e,t){let r=te(e,t),{transitionEnd:n={},transition:i={},...s}=r?e.makeTargetAnimatable(r,!1):{};for(let a in s={...s,...n}){var o;let l=eC(s[a]);o=a,e.hasValue(o)?e.getValue(o).set(l):e.addValue(o,rO(l))}}(e,a)}),c}function rU(e,t,r={}){let n=te(e,t,r.custom),{transition:i=e.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(i=r.transitionOverride);let s=n?()=>Promise.all(rB(e,n,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(n=0)=>{let{delayChildren:s=0,staggerChildren:a,staggerDirection:o}=i;return function(e,t,r=0,n=0,i=1,s){let a=[],o=(e.variantChildren.size-1)*n,l=1===i?(e=0)=>e*n:(e=0)=>o-e*n;return Array.from(e.variantChildren).sort(rq).forEach((e,n)=>{e.notify("AnimationStart",t),a.push(rU(e,t,{...s,delay:r+l(n)}).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(a)}(e,t,s+n,a,o,r)}:()=>Promise.resolve(),{when:o}=i;if(!o)return Promise.all([s(),a(r.delay)]);{let[l,c]="beforeChildren"===o?[s,a]:[a,s];return l().then(()=>c())}}function rq(e,t){return e.sortNodePosition(t)}let rz=[...f].reverse(),rV=f.length;function rH(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let rW=0,rZ=(e,t)=>Math.abs(e-t);class rK{constructor(e,t,{transformPagePoint:r}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let e=rJ(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,r=function(e,t){let r=rZ(e.x,t.x),n=rZ(e.y,t.y);return Math.sqrt(r**2+n**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!r)return;let{point:n}=e,{timestamp:i}=eV;this.history.push({...n,timestamp:i});let{onStart:s,onMove:a}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=rG(t,this.transformPagePoint),eQ.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{if(this.end(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;let{onEnd:r,onSessionEnd:n}=this.handlers,i=rJ("pointercancel"===e.type?this.lastMoveEventInfo:rG(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,i),n&&n(e,i)},!eN(e))return;this.handlers=t,this.transformPagePoint=r;let n=eL(e),i=rG(n,this.transformPagePoint),{point:s}=i,{timestamp:a}=eV;this.history=[{...s,timestamp:a}];let{onSessionStart:o}=t;o&&o(e,rJ(i,this.history)),this.removeListeners=ej(eI(window,"pointermove",this.handlePointerMove),eI(window,"pointerup",this.handlePointerUp),eI(window,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),eX(this.updatePoint)}}function rG(e,t){return t?{point:t(e.point)}:e}function rY(e,t){return{x:e.x-t.x,y:e.y-t.y}}function rJ({point:e},t){return{point:e,delta:rY(e,rQ(t)),offset:rY(e,t[0]),velocity:function(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,n=null,i=rQ(e);for(;r>=0&&(n=e[r],!(i.timestamp-n.timestamp>tr(.1)));)r--;if(!n)return{x:0,y:0};let s=tn(i.timestamp-n.timestamp);if(0===s)return{x:0,y:0};let a={x:(i.x-n.x)/s,y:(i.y-n.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}(t,0)}}function rQ(e){return e[e.length-1]}function rX(e){return e.max-e.min}function r0(e,t=0,r=.01){return Math.abs(e-t)<=r}function r1(e,t,r,n=.5){e.origin=n,e.originPoint=tj(t.min,t.max,e.origin),e.scale=rX(r)/rX(t),(r0(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=tj(r.min,r.max,e.origin)-e.originPoint,(r0(e.translate)||isNaN(e.translate))&&(e.translate=0)}function r2(e,t,r,n){r1(e.x,t.x,r.x,n?n.originX:void 0),r1(e.y,t.y,r.y,n?n.originY:void 0)}function r5(e,t,r){e.min=r.min+t.min,e.max=e.min+rX(t)}function r4(e,t,r){e.min=t.min-r.min,e.max=e.min+rX(t)}function r6(e,t,r){r4(e.x,t.x,r.x),r4(e.y,t.y,r.y)}function r3(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function r8(e,t){let r=t.min-e.min,n=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,n]=[n,r]),{min:r,max:n}}function r9(e,t,r){return{min:r7(e,t),max:r7(e,r)}}function r7(e,t){return"number"==typeof e?e:e[t]||0}let ne=()=>({translate:0,scale:1,origin:0,originPoint:0}),nt=()=>({x:ne(),y:ne()}),nr=()=>({min:0,max:0}),nn=()=>({x:nr(),y:nr()});function ni(e){return[e("x"),e("y")]}function ns({top:e,left:t,right:r,bottom:n}){return{x:{min:t,max:r},y:{min:e,max:n}}}function na(e){return void 0===e||1===e}function no({scale:e,scaleX:t,scaleY:r}){return!na(e)||!na(t)||!na(r)}function nl(e){return no(e)||nc(e)||e.z||e.rotate||e.rotateX||e.rotateY}function nc(e){var t,r;return(t=e.x)&&"0%"!==t||(r=e.y)&&"0%"!==r}function nu(e,t,r,n,i){return void 0!==i&&(e=n+i*(e-n)),n+r*(e-n)+t}function nd(e,t=0,r=1,n,i){e.min=nu(e.min,t,r,n,i),e.max=nu(e.max,t,r,n,i)}function np(e,{x:t,y:r}){nd(e.x,t.translate,t.scale,t.originPoint),nd(e.y,r.translate,r.scale,r.originPoint)}function nh(e){return Number.isInteger(e)?e:e>1.0000000000001||e<.999999999999?e:1}function nf(e,t){e.min=e.min+t,e.max=e.max+t}function nm(e,t,[r,n,i]){let s=void 0!==t[i]?t[i]:.5,a=tj(e.min,e.max,s);nd(e,t[r],t[n],a,t.scale)}let ng=["x","scaleX","originX"],ny=["y","scaleY","originY"];function nv(e,t){nm(e.x,t,ng),nm(e.y,t,ny)}function nb(e,t){return ns(function(e,t){if(!t)return e;let r=t({x:e.left,y:e.top}),n=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}(e.getBoundingClientRect(),t))}let nw=new WeakMap;class n_{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nn(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){let{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;let n=e=>{this.stopAnimation(),t&&this.snapToCursor(eL(e,"page").point)},i=(e,t)=>{let{drag:r,dragPropagation:n,onDragStart:i}=this.getProps();if(r&&!n&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=eU(r),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ni(e=>{let t=this.getAxisMotionValue(e).get()||0;if(G.test(t)){let{projection:r}=this.visualElement;if(r&&r.layout){let n=r.layout.layoutBox[e];if(n){let i=rX(n);t=i*(parseFloat(t)/100)}}}this.originPoint[e]=t}),i&&eQ.update(()=>i(e,t),!1,!0);let{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},s=(e,t)=>{let{dragPropagation:r,dragDirectionLock:n,onDirectionLock:i,onDrag:s}=this.getProps();if(!r&&!this.openGlobalLock)return;let{offset:a}=t;if(n&&null===this.currentDirection){this.currentDirection=function(e,t=10){let r=null;return Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x"),r}(a),null!==this.currentDirection&&i&&i(this.currentDirection);return}this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),s&&s(e,t)},a=(e,t)=>this.stop(e,t);this.panSession=new rK(e,{onSessionStart:n,onStart:i,onMove:s,onSessionEnd:a},{transformPagePoint:this.visualElement.getTransformPagePoint()})}stop(e,t){let r=this.isDragging;if(this.cancel(),!r)return;let{velocity:n}=t;this.startAnimation(n);let{onDragEnd:i}=this.getProps();i&&eQ.update(()=>i(e,t))}cancel(){this.isDragging=!1;let{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;let{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){let{drag:n}=this.getProps();if(!r||!nx(e,n,this.currentDirection))return;let i=this.getAxisMotionValue(e),s=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(s=function(e,{min:t,max:r},n){return void 0!==t&&e<t?e=n?tj(t,e,n.min):Math.max(e,t):void 0!==r&&e>r&&(e=n?tj(r,e,n.max):Math.min(e,r)),e}(s,this.constraints[e],this.elastic[e])),i.set(s)}resolveConstraints(){let{dragConstraints:e,dragElastic:t}=this.getProps(),{layout:r}=this.visualElement.projection||{},n=this.constraints;e&&d(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&r?this.constraints=function(e,{top:t,left:r,bottom:n,right:i}){return{x:r3(e.x,r,i),y:r3(e.y,t,n)}}(r.layoutBox,e):this.constraints=!1,this.elastic=function(e=.35){return!1===e?e=0:!0===e&&(e=.35),{x:r9(e,"left","right"),y:r9(e,"top","bottom")}}(t),n!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ni(e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){let r={};return void 0!==t.min&&(r.min=t.min-e.min),void 0!==t.max&&(r.max=t.max-e.min),r}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){var e;let{dragConstraints:t,onMeasureDragConstraints:r}=this.getProps();if(!t||!d(t))return!1;let n=t.current;e2(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");let{projection:i}=this.visualElement;if(!i||!i.layout)return!1;let s=function(e,t,r){let n=nb(e,r),{scroll:i}=t;return i&&(nf(n.x,i.offset.x),nf(n.y,i.offset.y)),n}(n,i.root,this.visualElement.getTransformPagePoint()),a={x:r8((e=i.layout.layoutBox).x,s.x),y:r8(e.y,s.y)};if(r){let o=r(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(a));this.hasMutatedConstraints=!!o,o&&(a=ns(o))}return a}startAnimation(e){let{drag:t,dragMomentum:r,dragElastic:n,dragTransition:i,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{},l=ni(a=>{if(!nx(a,t,this.currentDirection))return;let l=o&&o[a]||{};s&&(l={min:0,max:0});let c={type:"inertia",velocity:r?e[a]:0,bounceStiffness:n?200:1e6,bounceDamping:n?40:1e7,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(a,c)});return Promise.all(l).then(a)}startAxisValueAnimation(e,t){let r=this.getAxisMotionValue(e);return r.start(rC(e,r,0,t))}stopAnimation(){ni(e=>this.getAxisMotionValue(e).stop())}getAxisMotionValue(e){let t="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),n=r[t];return n||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){ni(t=>{let{drag:r}=this.getProps();if(!nx(t,r,this.currentDirection))return;let{projection:n}=this.visualElement,i=this.getAxisMotionValue(t);if(n&&n.layout){let{min:s,max:a}=n.layout.layoutBox[t];i.set(e[t]-tj(s,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;let{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!d(t)||!r||!this.constraints)return;this.stopAnimation();let n={x:0,y:0};ni(e=>{let t=this.getAxisMotionValue(e);if(t){let r=t.get();n[e]=function(e,t){let r=.5,n=rX(e),i=rX(t);return i>n?r=t4(t.min,t.max-n,e.min):n>i&&(r=t4(e.min,e.max-i,t.min)),F(0,1,r)}({min:r,max:r},this.constraints[e])}});let{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ni(t=>{if(!nx(t,e,null))return;let r=this.getAxisMotionValue(t),{min:i,max:s}=this.constraints[t];r.set(tj(i,s,n[t]))})}addListeners(){if(!this.visualElement.current)return;nw.set(this.visualElement,this);let e=this.visualElement.current,t=eI(e,"pointerdown",e=>{let{drag:t,dragListener:r=!0}=this.getProps();t&&r&&this.start(e)}),r=()=>{let{dragConstraints:e}=this.getProps();d(e)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",r);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),r();let s=eA(window,"resize",()=>this.scalePositionWithinConstraints()),a=n.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(ni(t=>{let r=this.getAxisMotionValue(t);r&&(this.originPoint[t]+=e[t].translate,r.set(r.get()+e[t].translate))}),this.visualElement.render())});return()=>{s(),t(),i(),a&&a()}}getProps(){let e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:n=!1,dragConstraints:i=!1,dragElastic:s=.35,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:n,dragConstraints:i,dragElastic:s,dragMomentum:a}}}function nx(e,t,r){return(!0===t||t===e)&&(null===r||r===e)}let nS=e=>(t,r)=>{e&&eQ.update(()=>e(t,r))},nT={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function nE(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}let nC={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!Y.test(e))return e;e=parseFloat(e)}let r=nE(e,t.target.x),n=nE(e,t.target.y);return`${r}% ${n}%`}};class nk extends i.Component{componentDidMount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:n}=this.props,{projection:i}=e;Object.assign(k,nP),i&&(t.group&&t.group.add(i),r&&r.register&&n&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),nT.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){let{layoutDependency:t,visualElement:r,drag:n,isPresent:i}=this.props,s=r.projection;return s&&(s.isPresent=i,n||e.layoutDependency!==t||void 0===t?s.willUpdate():this.safeToRemove(),e.isPresent===i||(i?s.promote():s.relegate()||eQ.postRender(()=>{let e=s.getStack();e&&e.members.length||this.safeToRemove()}))),null}componentDidUpdate(){let{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){let{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:n}=e;n&&(n.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(n),r&&r.deregister&&r.deregister(n))}safeToRemove(){let{safeToRemove:e}=this.props;e&&e()}render(){return null}}function nR(e){let[t,r]=function(){let e=(0,i.useContext)(o);if(null===e)return[!0,null];let{isPresent:t,onExitComplete:r,register:n}=e,s=(0,i.useId)();(0,i.useEffect)(()=>n(s),[]);let a=()=>r&&r(s);return!t&&r?[!1,a]:[!0]}(),n=(0,i.useContext)(x);return i.createElement(nk,{...e,layoutGroup:n,switchLayoutGroup:(0,i.useContext)(S),isPresent:t,safeToRemove:r})}let nP={borderRadius:{...nC,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:nC,borderTopRightRadius:nC,borderBottomLeftRadius:nC,borderBottomRightRadius:nC,boxShadow:{correct:(e,{treeScale:t,projectionDelta:r})=>{let n=tQ.parse(e);if(n.length>5)return e;let i=tQ.createTransformer(e),s="number"!=typeof n[0]?1:0,a=r.x.scale*t.x,o=r.y.scale*t.y;n[0+s]/=a,n[1+s]/=o;let l=tj(a,o,.5);return"number"==typeof n[2+s]&&(n[2+s]/=l),"number"==typeof n[3+s]&&(n[3+s]/=l),i(n)}}},nD=["TopLeft","TopRight","BottomLeft","BottomRight"],nA=nD.length,nN=e=>"string"==typeof e?parseFloat(e):e,nL=e=>"number"==typeof e||Y.test(e);function nO(e,t){return void 0!==e[t]?e[t]:e.borderRadius}let nI=nj(0,.5,t_),nM=nj(.5,.95,e2);function nj(e,t,r){return n=>n<e?0:n>t?1:r(t4(e,t,n))}function nF(e,t){e.min=t.min,e.max=t.max}function n$(e,t){nF(e.x,t.x),nF(e.y,t.y)}function nB(e,t,r,n,i){return e-=t,e=n+1/r*(e-n),void 0!==i&&(e=n+1/i*(e-n)),e}function nU(e,t,[r,n,i],s,a){!function(e,t=0,r=1,n=.5,i,s=e,a=e){if(G.test(t)){t=parseFloat(t);let o=tj(a.min,a.max,t/100);t=o-a.min}if("number"!=typeof t)return;let l=tj(s.min,s.max,n);e===s&&(l-=t),e.min=nB(e.min,t,r,l,i),e.max=nB(e.max,t,r,l,i)}(e,t[r],t[n],t[i],t.scale,s,a)}let nq=["x","scaleX","originX"],nz=["y","scaleY","originY"];function nV(e,t,r,n){nU(e.x,t,nq,r?r.x:void 0,n?n.x:void 0),nU(e.y,t,nz,r?r.y:void 0,n?n.y:void 0)}function nH(e){return 0===e.translate&&1===e.scale}function nW(e){return nH(e.x)&&nH(e.y)}function nZ(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function nK(e){return rX(e.x)/rX(e.y)}class nG{constructor(){this.members=[]}add(e){rP(this.members,e),e.scheduleRender()}remove(e){if(rD(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){let t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){let t;let r=this.members.findIndex(t=>e===t);if(0===r)return!1;for(let n=r;n>=0;n--){let i=this.members[n];if(!1!==i.isPresent){t=i;break}}return!!t&&(this.promote(t),!0)}promote(e,t){let r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);let{crossfade:n}=e.options;!1===n&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{let{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function nY(e,t,r){let n="",i=e.x.translate/t.x,s=e.y.translate/t.y;if((i||s)&&(n=`translate3d(${i}px, ${s}px, 0) `),(1!==t.x||1!==t.y)&&(n+=`scale(${1/t.x}, ${1/t.y}) `),r){let{rotate:a,rotateX:o,rotateY:l}=r;a&&(n+=`rotate(${a}deg) `),o&&(n+=`rotateX(${o}deg) `),l&&(n+=`rotateY(${l}deg) `)}let c=e.x.scale*t.x,u=e.y.scale*t.y;return(1!==c||1!==u)&&(n+=`scale(${c}, ${u})`),n||"none"}let nJ=(e,t)=>e.depth-t.depth;class nQ{constructor(){this.children=[],this.isDirty=!1}add(e){rP(this.children,e),this.isDirty=!0}remove(e){rD(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(nJ),this.isDirty=!1,this.children.forEach(e)}}let nX=["","X","Y","Z"],n0=0,n1={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function n2({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(e={},r=null==t?void 0:t()){this.id=n0++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{n1.totalNodes=n1.resolvedTargetDeltas=n1.recalculatedProjection=0,this.nodes.forEach(n6),this.nodes.forEach(ir),this.nodes.forEach(ii),this.nodes.forEach(n3),window.MotionDebug&&window.MotionDebug.record(n1)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new nQ)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new rA),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){let r=this.eventHandlers.get(e);r&&r.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t,r=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=t instanceof SVGElement&&"svg"!==t.tagName,this.instance=t;let{layoutId:n,layout:i,visualElement:s}=this.options;if(s&&!s.current&&s.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),r&&(i||n)&&(this.isLayoutDirty=!0),e){let a;let o=()=>this.root.updateBlockedByResize=!1;e(t,()=>{this.root.updateBlockedByResize=!0,a&&a(),a=function(e,t){let r=performance.now(),n=({timestamp:i})=>{let s=i-r;s>=t&&(eX(n),e(s-t))};return eQ.read(n,!0),()=>eX(n)}(o,250),nT.hasAnimatedSinceResize&&(nT.hasAnimatedSinceResize=!1,this.nodes.forEach(it))})}n&&this.root.registerSharedNode(n,this),!1!==this.options.animate&&s&&(n||i)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeTargetChanged:r,layout:n})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}let i=this.options.transition||s.getDefaultTransition()||iu,{onLayoutAnimationStart:a,onLayoutAnimationComplete:o}=s.getProps(),l=!this.targetLayout||!nZ(this.targetLayout,n)||r,c=!t&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(e,c);let u={...rE(i,"layout"),onPlay:a,onComplete:o};(s.shouldReduceMotion||this.options.layoutRoot)&&(u.delay=0,u.type=!1),this.startAnimation(u)}else t||it(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=n})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);let e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,eX(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){!this.isUpdateBlocked()&&(this.isUpdating=!0,this.nodes&&this.nodes.forEach(is),this.animationId++)}getTransformTemplate(){let{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(this.root.isUpdating||this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let t=0;t<this.path.length;t++){let r=this.path[t];r.shouldResetTransform=!0,r.updateScroll("snapshot"),r.options.layoutRoot&&r.willUpdate(!1)}let{layoutId:n,layout:i}=this.options;if(void 0===n&&!i)return;let s=this.getTransformTemplate();this.prevTransformTemplateValue=s?s(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;let e=this.isUpdateBlocked();if(e){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(n9);return}this.isUpdating||this.nodes.forEach(n7),this.isUpdating=!1,this.nodes.forEach(ie),this.nodes.forEach(n5),this.nodes.forEach(n4),this.clearAllSnapshots();let t=performance.now();eV.delta=F(0,1e3/60,t-eV.timestamp),eV.timestamp=t,eV.isProcessing=!0,eK.update.process(eV),eK.preRender.process(eV),eK.render.process(eV),eV.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(n8),this.sharedNodes.forEach(ia)}scheduleUpdateProjection(){eQ.preRender(this.updateProjection,!1,!0)}scheduleCheckAfterUnmount(){eQ.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let e=0;e<this.path.length;e++){let t=this.path[e];t.updateScroll()}let r=this.layout;this.layout=this.measure(!1),this.layoutCorrected=nn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);let{visualElement:n}=this.options;n&&n.notify("LayoutMeasure",this.layout.layoutBox,r?r.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:n(this.instance),offset:r(this.instance)})}resetTransform(){if(!i)return;let e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!nW(this.projectionDelta),r=this.getTransformTemplate(),n=r?r(this.latestValues,""):void 0,s=n!==this.prevTransformTemplateValue;e&&(t||nl(this.latestValues)||s)&&(i(this.instance,n),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){var t;let r=this.measurePageBox(),n=this.removeElementScroll(r);return e&&(n=this.removeTransform(n)),id((t=n).x),id(t.y),{animationId:this.root.animationId,measuredBox:r,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){let{visualElement:e}=this.options;if(!e)return nn();let t=e.measureViewportBox(),{scroll:r}=this.root;return r&&(nf(t.x,r.offset.x),nf(t.y,r.offset.y)),t}removeElementScroll(e){let t=nn();n$(t,e);for(let r=0;r<this.path.length;r++){let n=this.path[r],{scroll:i,options:s}=n;if(n!==this.root&&i&&s.layoutScroll){if(i.isRoot){n$(t,e);let{scroll:a}=this.root;a&&(nf(t.x,-a.offset.x),nf(t.y,-a.offset.y))}nf(t.x,i.offset.x),nf(t.y,i.offset.y)}}return t}applyTransform(e,t=!1){let r=nn();n$(r,e);for(let n=0;n<this.path.length;n++){let i=this.path[n];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&nv(r,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),nl(i.latestValues)&&nv(r,i.latestValues)}return nl(this.latestValues)&&nv(r,this.latestValues),r}removeTransform(e){let t=nn();n$(t,e);for(let r=0;r<this.path.length;r++){let n=this.path[r];if(!n.instance||!nl(n.latestValues))continue;no(n.latestValues)&&n.updateSnapshot();let i=nn(),s=n.measurePageBox();n$(i,s),nV(t,n.latestValues,n.snapshot?n.snapshot.layoutBox:void 0,i)}return nl(this.latestValues)&&nV(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==eV.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){var t,r,n,i;let s=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=s.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=s.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=s.isSharedProjectionDirty);let a=Boolean(this.resumingFrom)||this!==s,o=!(e||a&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget);if(o)return;let{layout:l,layoutId:c}=this.options;if(this.layout&&(l||c)){if(this.resolvedRelativeTargetAt=eV.timestamp,!this.targetDelta&&!this.relativeTarget){let u=this.getClosestProjectingParent();u&&u.layout&&1!==this.animationProgress?(this.relativeParent=u,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nn(),this.relativeTargetOrigin=nn(),r6(this.relativeTargetOrigin,this.layout.layoutBox,u.layout.layoutBox),n$(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){if((this.target||(this.target=nn(),this.targetWithTransforms=nn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target)?(this.forceRelativeParentToResolveTarget(),r=this.target,n=this.relativeTarget,i=this.relativeParent.target,r5(r.x,n.x,i.x),r5(r.y,n.y,i.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):n$(this.target,this.layout.layoutBox),np(this.target,this.targetDelta)):n$(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;let d=this.getClosestProjectingParent();d&&Boolean(d.resumingFrom)===Boolean(this.resumingFrom)&&!d.options.layoutScroll&&d.target&&1!==this.animationProgress?(this.relativeParent=d,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nn(),this.relativeTargetOrigin=nn(),r6(this.relativeTargetOrigin,this.target,d.target),n$(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}n1.resolvedTargetDeltas++}}}getClosestProjectingParent(){return!this.parent||no(this.parent.latestValues)||nc(this.parent.latestValues)?void 0:this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;let t=this.getLead(),r=Boolean(this.resumingFrom)||this!==t,n=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(n=!1),r&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(n=!1),this.resolvedRelativeTargetAt===eV.timestamp&&(n=!1),n)return;let{layout:i,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(i||s))return;n$(this.layoutCorrected,this.layout.layoutBox);let a=this.treeScale.x,o=this.treeScale.y;!function(e,t,r,n=!1){let i,s;let a=r.length;if(a){t.x=t.y=1;for(let o=0;o<a;o++){s=(i=r[o]).projectionDelta;let l=i.instance;(!l||!l.style||"contents"!==l.style.display)&&(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&nv(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),s&&(t.x*=s.x.scale,t.y*=s.y.scale,np(e,s)),n&&nl(i.latestValues)&&nv(e,i.latestValues))}t.x=nh(t.x),t.y=nh(t.y)}}(this.layoutCorrected,this.treeScale,this.path,r),t.layout&&!t.target&&(1!==this.treeScale.x||1!==this.treeScale.y)&&(t.target=t.layout.layoutBox);let{target:l}=t;if(!l){this.projectionTransform&&(this.projectionDelta=nt(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=nt(),this.projectionDeltaWithTransform=nt());let c=this.projectionTransform;r2(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=nY(this.projectionDelta,this.treeScale),(this.projectionTransform!==c||this.treeScale.x!==a||this.treeScale.y!==o)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),n1.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),e){let t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e,t=!1){let r;let n=this.snapshot,i=n?n.latestValues:{},s={...this.latestValues},a=nt();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;let o=nn(),l=n?n.source:void 0,c=this.layout?this.layout.source:void 0,u=l!==c,d=this.getStack(),p=!d||d.members.length<=1,h=Boolean(u&&!p&&!0===this.options.crossfade&&!this.path.some(ic));this.animationProgress=0,this.mixTargetDelta=t=>{var n,l;let c=t/1e3;io(a.x,e.x,c),io(a.y,e.y,c),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(r6(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),n=this.relativeTarget,l=this.relativeTargetOrigin,il(n.x,l.x,o.x,c),il(n.y,l.y,o.y,c),r&&nZ(this.relativeTarget,r)&&(this.isProjectionDirty=!1),r||(r=nn()),n$(r,this.relativeTarget)),u&&(this.animationValues=s,function(e,t,r,n,i,s){i?(e.opacity=tj(0,void 0!==r.opacity?r.opacity:1,nI(n)),e.opacityExit=tj(void 0!==t.opacity?t.opacity:1,0,nM(n))):s&&(e.opacity=tj(void 0!==t.opacity?t.opacity:1,void 0!==r.opacity?r.opacity:1,n));for(let a=0;a<nA;a++){let o=`border${nD[a]}Radius`,l=nO(t,o),c=nO(r,o);if(void 0===l&&void 0===c)continue;l||(l=0),c||(c=0);let u=0===l||0===c||nL(l)===nL(c);u?(e[o]=Math.max(tj(nN(l),nN(c),n),0),(G.test(c)||G.test(l))&&(e[o]+="%")):e[o]=c}(t.rotate||r.rotate)&&(e.rotate=tj(t.rotate||0,r.rotate||0,n))}(s,i,this.latestValues,c,h,p)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=c},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(eX(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=eQ.update(()=>{nT.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,r){let n=A(e)?e:rO(e);return n.start(rC("",n,1e3,r)),n.animation}(0,0,{...e,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);let e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){let e=this.getLead(),{targetWithTransforms:t,target:r,layout:n,latestValues:i}=e;if(t&&r&&n){if(this!==e&&this.layout&&n&&ip(this.options.animationType,this.layout.layoutBox,n.layoutBox)){r=this.target||nn();let s=rX(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+s;let a=rX(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+a}n$(t,r),nv(t,i),r2(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new nG);let r=this.sharedNodes.get(e);r.add(t);let n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){let e=this.getStack();return!e||e.lead===this}getLead(){var e;let{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;let{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){let{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:r}={}){let n=this.getStack();n&&n.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){let e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){let{visualElement:e}=this.options;if(!e)return;let t=!1,{latestValues:r}=e;if((r.rotate||r.rotateX||r.rotateY||r.rotateZ)&&(t=!0),!t)return;let n={};for(let i=0;i<nX.length;i++){let s="rotate"+nX[i];r[s]&&(n[s]=r[s],e.setStaticValue(s,0))}for(let a in e.render(),n)e.setStaticValue(a,n[a]);e.scheduleRender()}getProjectionStyles(e={}){var t,r;let n={};if(!this.instance||this.isSVG)return n;if(!this.isVisible)return{visibility:"hidden"};n.visibility="";let i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,n.opacity="",n.pointerEvents=ek(e.pointerEvents)||"",n.transform=i?i(this.latestValues,""):"none",n;let s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){let a={};return this.options.layoutId&&(a.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,a.pointerEvents=ek(e.pointerEvents)||""),this.hasProjected&&!nl(this.latestValues)&&(a.transform=i?i({},""):"none",this.hasProjected=!1),a}let o=s.animationValues||s.latestValues;this.applyTransformsToTarget(),n.transform=nY(this.projectionDeltaWithTransform,this.treeScale,o),i&&(n.transform=i(o,n.transform));let{x:l,y:c}=this.projectionDelta;for(let u in n.transformOrigin=`${100*l.origin}% ${100*c.origin}% 0`,s.animationValues?n.opacity=s===this?null!==(r=null!==(t=o.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==r?r:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:n.opacity=s===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0,k){if(void 0===o[u])continue;let{correct:d,applyTo:p}=k[u],h="none"===n.transform?o[u]:d(o[u],s);if(p){let f=p.length;for(let m=0;m<f;m++)n[p[m]]=h}else n[u]=h}return this.options.layoutId&&(n.pointerEvents=s===this?ek(e.pointerEvents)||"":"none"),n}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(n9),this.root.sharedNodes.clear()}}}function n5(e){e.updateLayout()}function n4(e){var t;let r=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&r&&e.hasListeners("didUpdate")){let{layoutBox:n,measuredBox:i}=e.layout,{animationType:s}=e.options,a=r.source!==e.layout.source;"size"===s?ni(e=>{let t=a?r.measuredBox[e]:r.layoutBox[e],i=rX(t);t.min=n[e].min,t.max=t.min+i}):ip(s,r.layoutBox,n)&&ni(t=>{let i=a?r.measuredBox[t]:r.layoutBox[t],s=rX(n[t]);i.max=i.min+s,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[t].max=e.relativeTarget[t].min+s)});let o=nt();r2(o,n,r.layoutBox);let l=nt();a?r2(l,e.applyTransform(i,!0),r.measuredBox):r2(l,n,r.layoutBox);let c=!nW(o),u=!1;if(!e.resumeFrom){let d=e.getClosestProjectingParent();if(d&&!d.resumeFrom){let{snapshot:p,layout:h}=d;if(p&&h){let f=nn();r6(f,r.layoutBox,p.layoutBox);let m=nn();r6(m,n,h.layoutBox),nZ(f,m)||(u=!0),d.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=f,e.relativeParent=d)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:r,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(e.isLead()){let{onExitComplete:g}=e.options;g&&g()}e.options.transition=void 0}function n6(e){n1.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function n3(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function n8(e){e.clearSnapshot()}function n9(e){e.clearMeasurements()}function n7(e){e.isLayoutDirty=!1}function ie(e){let{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function it(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function ir(e){e.resolveTargetDelta()}function ii(e){e.calcProjection()}function is(e){e.resetRotation()}function ia(e){e.removeLeadSnapshot()}function io(e,t,r){e.translate=tj(t.translate,0,r),e.scale=tj(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function il(e,t,r,n){e.min=tj(t.min,r.min,n),e.max=tj(t.max,r.max,n)}function ic(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}let iu={duration:.45,ease:[.4,0,.1,1]};function id(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function ip(e,t,r){return"position"===e||"preserve-aspect"===e&&!r0(nK(t),nK(r),.2)}let ih=n2({attachResizeListener:(e,t)=>eA(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),im={current:void 0},ig=n2({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!im.current){let e=new ih({});e.mount(window),e.setOptions({layoutScroll:!0}),im.current=e}return im.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),iy=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function iv(e,t,r=1){e2(r<=4,`Max CSS variable fallback depth detected in property "${e}". This may indicate a circular fallback dependency.`);let[n,i]=function(e){let t=iy.exec(e);if(!t)return[,];let[,r,n]=t;return[r,n]}(e);if(!n)return;let s=window.getComputedStyle(t).getPropertyValue(n);return s?s.trim():M(i)?iv(i,t,r+1):i}let ib=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),iw=e=>ib.has(e),i_=e=>Object.keys(e).some(iw),ix=e=>e===$||e===Y,iS=(e,t)=>parseFloat(e.split(", ")[t]),iT=(e,t)=>(r,{transform:n})=>{if("none"===n||!n)return 0;let i=n.match(/^matrix3d\((.+)\)$/);if(i)return iS(i[1],t);{let s=n.match(/^matrix\((.+)\)$/);return s?iS(s[1],e):0}},iE=new Set(["x","y","z"]),iC=R.filter(e=>!iE.has(e)),ik={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:iT(4,13),y:iT(5,14)};ik.translateX=ik.x,ik.translateY=ik.y;let iR=(e,t,r)=>{let n=t.measureViewportBox(),i=t.current,s=getComputedStyle(i),{display:a}=s,o={};"none"===a&&t.setStaticValue("display",e.display||"block"),r.forEach(e=>{o[e]=ik[e](n,s)}),t.render();let l=t.measureViewportBox();return r.forEach(r=>{let n=t.getValue(r);n&&n.jump(o[r]),e[r]=ik[r](l,s)}),e},iP=(e,t,r={},n={})=>{t={...t},n={...n};let i=Object.keys(t).filter(iw),s=[],a=!1,o=[];if(i.forEach(i=>{let l;let c=e.getValue(i);if(!e.hasValue(i))return;let u=r[i],d=rj(u),p=t[i];if(eT(p)){let h=p.length,f=null===p[0]?1:0;d=rj(u=p[f]);for(let m=f;m<h&&null!==p[m];m++)l?e2(rj(p[m])===l,"All keyframes must be of the same type"):e2((l=rj(p[m]))===d||ix(d)&&ix(l),"Keyframes must be of the same dimension as the current value")}else l=rj(p);if(d!==l){if(ix(d)&&ix(l)){let g=c.get();"string"==typeof g&&c.set(parseFloat(g)),"string"==typeof p?t[i]=parseFloat(p):Array.isArray(p)&&l===Y&&(t[i]=p.map(parseFloat))}else(null==d?void 0:d.transform)&&(null==l?void 0:l.transform)&&(0===u||0===p)?0===u?c.set(l.transform(u)):t[i]=d.transform(p):(a||(s=function(e){let t=[];return iC.forEach(r=>{let n=e.getValue(r);void 0!==n&&(t.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),t.length&&e.render(),t}(e),a=!0),o.push(i),n[i]=void 0!==n[i]?n[i]:t[i],c.jump(p))}}),!o.length)return{target:t,transitionEnd:n};{let c=o.indexOf("height")>=0?window.pageYOffset:null,u=iR(t,e,o);return s.length&&s.forEach(([t,r])=>{e.getValue(t).set(r)}),e.render(),l&&null!==c&&window.scrollTo({top:c}),{target:u,transitionEnd:n}}},iD=(e,t,r,n)=>{var i,s;let a=function(e,{...t},r){let n=e.current;if(!(n instanceof Element))return{target:t,transitionEnd:r};for(let i in r&&(r={...r}),e.values.forEach(e=>{let t=e.get();if(!M(t))return;let r=iv(t,n);r&&e.set(r)}),t){let s=t[i];if(!M(s))continue;let a=iv(s,n);a&&(t[i]=a,r||(r={}),void 0===r[i]&&(r[i]=s))}return{target:t,transitionEnd:r}}(e,t,n);return t=a.target,n=a.transitionEnd,i=t,s=n,i_(i)?iP(e,i,r,s):{target:i,transitionEnd:s}},iA={current:null},iN={current:!1},iL=new WeakMap,iO=Object.keys(w),iI=iO.length,iM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],ij=m.length;class iF{constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:n,visualState:i},s={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>eQ.render(this.render,!1,!0);let{latestValues:a,renderState:o}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=t.initial?{...a}:{},this.renderState=o,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=n,this.options=s,this.isControllingVariants=g(t),this.isVariantNode=y(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);let{willChange:l,...c}=this.scrapeMotionValuesFromProps(t,{});for(let u in c){let d=c[u];void 0!==a[u]&&A(d)&&(d.set(a[u],!1),rk(l)&&l.add(u))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,iL.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),iN.current||function(){if(iN.current=!0,l){if(window.matchMedia){let e=window.matchMedia("(prefers-reduced-motion)"),t=()=>iA.current=e.matches;e.addListener(t),t()}else iA.current=!1}}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||iA.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){for(let e in iL.delete(this.current),this.projection&&this.projection.unmount(),eX(this.notifyUpdate),eX(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[e].clear();for(let t in this.features)this.features[t].unmount();this.current=null}bindToMotionValue(e,t){let r=P.has(e),n=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&eQ.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{n(),i()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures({children:e,...t},r,n,i){let s,a;for(let o=0;o<iI;o++){let l=iO[o],{isEnabled:c,Feature:u,ProjectionNode:p,MeasureLayout:h}=w[l];p&&(s=p),c(t)&&(!this.features[l]&&u&&(this.features[l]=new u(this)),h&&(a=h))}if(!this.projection&&s){this.projection=new s(this.latestValues,this.parent&&this.parent.projection);let{layoutId:f,layout:m,drag:g,dragConstraints:y,layoutScroll:v,layoutRoot:b}=t;this.projection.setOptions({layoutId:f,layout:m,alwaysMeasureLayout:Boolean(g)||y&&d(y),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"==typeof m?m:"both",initialPromotionConfig:i,layoutScroll:v,layoutRoot:b})}return a}updateFeatures(){for(let e in this.features){let t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e,t=!0){return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<iM.length;r++){let n=iM[r];this.propEventSubscriptions[n]&&(this.propEventSubscriptions[n](),delete this.propEventSubscriptions[n]);let i=e["on"+n];i&&(this.propEventSubscriptions[n]=this.on(n,i))}this.prevMotionValues=function(e,t,r){let{willChange:n}=t;for(let i in t){let s=t[i],a=r[i];if(A(s))e.addValue(i,s),rk(n)&&n.add(i);else if(A(a))e.addValue(i,rO(s,{owner:e})),rk(n)&&n.remove(i);else if(a!==s){if(e.hasValue(i)){let o=e.getValue(i);o.hasAnimated||o.set(s)}else{let l=e.getStaticValue(i);e.addValue(i,rO(void 0!==l?l:s,{owner:e}))}}}for(let c in r)void 0===t[c]&&e.removeValue(c);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){let t=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(t.initial=this.props.initial),t}let r={};for(let n=0;n<ij;n++){let i=m[n],s=this.props[i];(p(s)||!1===s)&&(r[i]=s)}return r}addVariantChild(e){let t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);let t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=rO(t,{owner:this}),this.addValue(e,r)),r}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;let{initial:r}=this.props,n="string"==typeof r||"object"==typeof r?null===(t=eS(this.props,r))||void 0===t?void 0:t[e]:void 0;if(r&&void 0!==n)return n;let i=this.getBaseTargetFromProps(this.props,e);return void 0===i||A(i)?void 0!==this.initialValues[e]&&void 0===n?void 0:this.baseTarget[e]:i}on(e,t){return this.events[e]||(this.events[e]=new rA),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class i$ extends iF{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:t,...r},{transformValues:n},i){let s=function(e,t,r){let n={};for(let i in e){let s=function(e,t){if(!t)return;let r=t[e]||t.default||t;return r.from}(i,t);if(void 0!==s)n[i]=s;else{let a=r.getValue(i);a&&(n[i]=a.get())}}return n}(r,e||{},this);if(n&&(t&&(t=n(t)),r&&(r=n(r)),s&&(s=n(s))),i){let a=function(e,t,r){var n,i;let s=Object.keys(t).filter(t=>!e.hasValue(t)),a=s.length;if(!a)return!1;for(let o=0;o<a;o++){let l=s[o],c=t[l],u=null;Array.isArray(c)&&(u=c[0]),null===u&&(u=null!==(i=null!==(n=r[l])&&void 0!==n?n:e.readValue(l))&&void 0!==i?i:t[l]),null!=u&&("string"==typeof u&&(rR(u)||rT(u))?u=parseFloat(u):!r$(u)&&tQ.test(c)&&(u=rS(l,c)),e.addValue(l,rO(u,{owner:e})),void 0===r[l]&&(r[l]=u),null!==u&&e.setBaseTarget(l,u))}return!0}(this,r,s);n&&a&&(s=n(s));let o=iD(this,r,s,t);t=o.transitionEnd,r=o.target}return{transition:e,transitionEnd:t,...r}}}class iB extends i${readValueFromInstance(e,t){if(P.has(t)){let r=rx(t);return r&&r.default||0}{let n=window.getComputedStyle(e),i=(I(t)?n.getPropertyValue(t):n[t])||0;return"string"==typeof i?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:t}){return nb(e,t)}build(e,t,r,n){er(e,t,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,t){return e_(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);let{children:e}=this.props;A(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}renderInstance(e,t,r,n){ev(e,t,r,n)}}class iU extends i${constructor(){super(...arguments),this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(P.has(t)){let r=rx(t);return r&&r.default||0}return t=eb.has(t)?t:ey(t),e.getAttribute(t)}measureInstanceViewportBox(){return nn()}scrapeMotionValuesFromProps(e,t){return ex(e,t)}build(e,t,r,n){eh(e,t,r,this.isSVGTag,n.transformTemplate)}renderInstance(e,t,r,n){ew(e,t,r,n)}mount(e){this.isSVGTag=em(e.tagName),super.mount(e)}}let iq=(e,t)=>C(e)?new iU(t,{enableHardwareAcceleration:!1}):new iB(t,{enableHardwareAcceleration:!0}),iz={animation:{Feature:class extends ez{constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=t=>Promise.all(t.map(({animation:t,options:r})=>(function(e,t,r={}){let n;if(e.notify("AnimationStart",t),Array.isArray(t)){let i=t.map(t=>rU(e,t,r));n=Promise.all(i)}else if("string"==typeof t)n=rU(e,t,r);else{let s="function"==typeof t?te(e,t,r.custom):t;n=Promise.all(rB(e,s,r))}return n.then(()=>e.notify("AnimationComplete",t))})(e,t,r))),r={animate:rH(!0),whileInView:rH(),whileHover:rH(),whileTap:rH(),whileDrag:rH(),whileFocus:rH(),exit:rH()},n=!0,i=(t,r)=>{let n=te(e,r);if(n){let{transition:i,transitionEnd:s,...a}=n;t={...t,...a,...s}}return t};function s(s,a){let o=e.getProps(),l=e.getVariantContext(!0)||{},c=[],u=new Set,d={},f=1/0;for(let m=0;m<rV;m++){var g;let y=rz[m],v=r[y],b=void 0!==o[y]?o[y]:l[y],w=p(b),_=y===a?v.isActive:null;!1===_&&(f=m);let x=b===l[y]&&b!==o[y]&&w;if(x&&n&&e.manuallyAnimateOnMount&&(x=!1),v.protectedKeys={...d},!v.isActive&&null===_||!b&&!v.prevProp||h(b)||"boolean"==typeof b)continue;let S=(g=v.prevProp,"string"==typeof b?b!==g:!!Array.isArray(b)&&!e7(b,g)),T=S||y===a&&v.isActive&&!x&&w||m>f&&w,E=Array.isArray(b)?b:[b],C=E.reduce(i,{});!1===_&&(C={});let{prevResolvedValues:k={}}=v,R={...k,...C},P=e=>{T=!0,u.delete(e),v.needsAnimating[e]=!0};for(let D in R){let A=C[D],N=k[D];d.hasOwnProperty(D)||(A!==N?eT(A)&&eT(N)?!e7(A,N)||S?P(D):v.protectedKeys[D]=!0:void 0!==A?P(D):u.add(D):void 0!==A&&u.has(D)?P(D):v.protectedKeys[D]=!0)}v.prevProp=b,v.prevResolvedValues=C,v.isActive&&(d={...d,...C}),n&&e.blockInitialAnimation&&(T=!1),T&&!x&&c.push(...E.map(e=>({animation:e,options:{type:y,...s}})))}if(u.size){let L={};u.forEach(t=>{let r=e.getBaseTarget(t);void 0!==r&&(L[t]=r)}),c.push({animation:L})}let O=Boolean(c.length);return n&&!1===o.initial&&!e.manuallyAnimateOnMount&&(O=!1),n=!1,O?t(c):Promise.resolve()}return{animateChanges:s,setActive:function(t,n,i){var a;if(r[t].isActive===n)return Promise.resolve();null===(a=e.variantChildren)||void 0===a||a.forEach(e=>{var r;return null===(r=e.animationState)||void 0===r?void 0:r.setActive(t,n)}),r[t].isActive=n;let o=s(i,t);for(let l in r)r[l].protectedKeys={};return o},setAnimateFunction:function(r){t=r(e)},getState:()=>r}}(e))}updateAnimationControlsSubscription(){let{animate:e}=this.node.getProps();this.unmount(),h(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){let{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends ez{constructor(){super(...arguments),this.id=rW++}update(){if(!this.node.presenceContext)return;let{isPresent:e,onExitComplete:t,custom:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;let i=this.node.animationState.setActive("exit",!e,{custom:null!=r?r:this.node.getProps().custom});t&&!e&&i.then(()=>t(this.id))}mount(){let{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}},inView:{Feature:class extends ez{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();let{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:n="some",once:i}=e,s={root:t?t.current:void 0,rootMargin:r,threshold:"number"==typeof n?n:e9[n]},a=e=>{let{isIntersecting:t}=e;if(this.isInView===t||(this.isInView=t,i&&!t&&this.hasEnteredView))return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);let{onViewportEnter:r,onViewportLeave:n}=this.node.getProps(),s=t?r:n;s&&s(e)};return function(e,t,r){let n=function({root:e,...t}){let r=e||document;e6.has(r)||e6.set(r,{});let n=e6.get(r),i=JSON.stringify(t);return n[i]||(n[i]=new IntersectionObserver(e8,{root:e,...t})),n[i]}(t);return e4.set(e,r),n.observe(e),()=>{e4.delete(e),n.unobserve(e)}}(this.node.current,s,a)}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;let{props:e,prevProps:t}=this.node,r=["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}(e,t));r&&this.startObserver()}unmount(){}}},tap:{Feature:class extends ez{constructor(){super(...arguments),this.removeStartListeners=e2,this.removeEndListeners=e2,this.removeAccessibleListeners=e2,this.startPointerPress=(e,t)=>{if(this.removeEndListeners(),this.isPressing)return;let r=this.node.getProps(),n=(e,t)=>{if(!this.checkPressEnd())return;let{onTap:r,onTapCancel:n}=this.node.getProps();eQ.update(()=>{e1(this.node.current,e.target)?r&&r(e,t):n&&n(e,t)})},i=eI(window,"pointerup",n,{passive:!(r.onTap||r.onPointerUp)}),s=eI(window,"pointercancel",(e,t)=>this.cancelPress(e,t),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=ej(i,s),this.startPress(e,t)},this.startAccessiblePress=()=>{let e=e=>{if("Enter"!==e.key||this.isPressing)return;let t=e=>{"Enter"===e.key&&this.checkPressEnd()&&e5("up",(e,t)=>{let{onTap:r}=this.node.getProps();r&&eQ.update(()=>r(e,t))})};this.removeEndListeners(),this.removeEndListeners=eA(this.node.current,"keyup",t),e5("down",(e,t)=>{this.startPress(e,t)})},t=eA(this.node.current,"keydown",e),r=()=>{this.isPressing&&e5("cancel",(e,t)=>this.cancelPress(e,t))},n=eA(this.node.current,"blur",r);this.removeAccessibleListeners=ej(t,n)}}startPress(e,t){this.isPressing=!0;let{onTapStart:r,whileTap:n}=this.node.getProps();n&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&eQ.update(()=>r(e,t))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;let e=this.node.getProps();return e.whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!eq()}cancelPress(e,t){if(!this.checkPressEnd())return;let{onTapCancel:r}=this.node.getProps();r&&eQ.update(()=>r(e,t))}mount(){let e=this.node.getProps(),t=eI(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=eA(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=ej(t,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends ez{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ej(eA(this.node.current,"focus",()=>this.onFocus()),eA(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends ez{mount(){this.unmount=ej(e0(this.node,!0),e0(this.node,!1))}unmount(){}}},pan:{Feature:class extends ez{constructor(){super(...arguments),this.removePointerDownListener=e2}onPointerDown(e){this.session=new rK(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}createPanHandlers(){let{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:n}=this.node.getProps();return{onSessionStart:nS(e),onStart:nS(t),onMove:r,onEnd:(e,t)=>{delete this.session,n&&eQ.update(()=>n(e,t))}}}mount(){this.removePointerDownListener=eI(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends ez{constructor(e){super(e),this.removeGroupControls=e2,this.removeListeners=e2,this.controls=new n_(e)}mount(){let{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||e2}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:ig,MeasureLayout:nR},layout:{ProjectionNode:ig,MeasureLayout:nR}},iV=function(e){function t(t,r={}){return function({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:n,Component:h}){e&&function(e){for(let t in e)w[t]={...w[t],...e[t]}}(e);let f=(0,i.forwardRef)(function(f,m){var y,b;let w;let _={...(0,i.useContext)(s),...f,layoutId:function({layoutId:e}){let t=(0,i.useContext)(x).id;return t&&void 0!==e?t+"-"+e:e}(f)},{isStatic:T}=_,E=function(e){let{initial:t,animate:r}=function(e,t){if(g(e)){let{initial:r,animate:n}=e;return{initial:!1===r||p(r)?r:void 0,animate:p(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,i.useContext)(a));return(0,i.useMemo)(()=>({initial:t,animate:r}),[v(t),v(r)])}(f),C=n(f,T);if(!T&&l){E.visualElement=function(e,t,r,n){let{visualElement:l}=(0,i.useContext)(a),d=(0,i.useContext)(u),p=(0,i.useContext)(o),h=(0,i.useContext)(s).reducedMotion,f=(0,i.useRef)();n=n||d.renderer,!f.current&&n&&(f.current=n(e,{visualState:t,parent:l,props:r,presenceContext:p,blockInitialAnimation:!!p&&!1===p.initial,reducedMotionConfig:h}));let m=f.current;(0,i.useInsertionEffect)(()=>{m&&m.update(r,p)}),c(()=>{m&&m.render()}),(0,i.useEffect)(()=>{m&&m.updateFeatures()});let g=window.HandoffAppearAnimations?c:i.useEffect;return g(()=>{m&&m.animationState&&m.animationState.animateChanges()}),m}(h,C,_,t);let k=(0,i.useContext)(S),R=(0,i.useContext)(u).strict;E.visualElement&&(w=E.visualElement.loadFeatures(_,R,e,k))}return i.createElement(a.Provider,{value:E},w&&E.visualElement?i.createElement(w,{visualElement:E.visualElement,..._}):null,r(h,f,(y=E.visualElement,b=m,(0,i.useCallback)(e=>{e&&C.mount&&C.mount(e),y&&(e?y.mount(e):y.unmount()),b&&("function"==typeof b?b(e):d(b)&&(b.current=e))},[y])),C,T,E.visualElement))});return f[T]=h,f}(e(t,r))}if("undefined"==typeof Proxy)return t;let r=new Map;return new Proxy(t,{get:(e,n)=>(r.has(n)||r.set(n,t(n)),r.get(n))})}((e,t)=>(function(e,{forwardMotionProps:t=!1},r,n){let s=C(e)?eP:eD;return{...s,preloadedFeatures:r,useRender:function(e=!1){let t=(t,r,n,{latestValues:s},a)=>{let o=C(t)?eg:es,l=o(r,s,a,t),c=function(e,t,r){let n={};for(let i in e)("values"!==i||"object"!=typeof e.values)&&(el(i)||!0===r&&eo(i)||!t&&!eo(i)||e.draggable&&i.startsWith("onDrag"))&&(n[i]=e[i]);return n}(r,"string"==typeof t,e),u={...c,...l,ref:n},{children:d}=r,p=(0,i.useMemo)(()=>A(d)?d.get():d,[d]);return(0,i.createElement)(t,{...u,children:p})};return t}(t),createVisualElement:n,Component:e}})(e,t,iz,iq))},2677:function(e,t,r){"use strict";let n,i,s;r.d(t,{Ue:function(){return f5}});var a,o,l,c,u,d,p,h,f={};r.r(f),r.d(f,{base58btc:function(){return tt},base58flickr:function(){return tr}});var m={};r.r(m),r.d(m,{base32:function(){return tn},base32hex:function(){return to},base32hexpad:function(){return tc},base32hexpadupper:function(){return tu},base32hexupper:function(){return tl},base32pad:function(){return ts},base32padupper:function(){return ta},base32upper:function(){return ti},base32z:function(){return td}});var g={};r.r(g),r.d(g,{code:function(){return tq},createLink:function(){return tB},createNode:function(){return t$},decode:function(){return tV},encode:function(){return tz},name:function(){return tU},prepare:function(){return tj},validate:function(){return tF}});var y={};r.r(y),r.d(y,{code:function(){return ns},decode:function(){return no},encode:function(){return na},name:function(){return ni}});var v={};r.r(v),r.d(v,{base64:function(){return nu},base64pad:function(){return nd},base64url:function(){return np},base64urlpad:function(){return nh}});var b={};r.r(b),r.d(b,{code:function(){return nx},decode:function(){return nT},encode:function(){return nS},format:function(){return nE},name:function(){return n_},parse:function(){return nk},stringify:function(){return nE}});var w={};r.r(w),r.d(w,{code:function(){return iu},decode:function(){return ig},encode:function(){return im},name:function(){return ic},toGeneral:function(){return ih}});var _={};r.r(_),r.d(_,{identity:function(){return iN}});var x={};r.r(x),r.d(x,{identity:function(){return iV}});var S={};r.r(S),r.d(S,{base2:function(){return iH}});var T={};r.r(T),r.d(T,{base8:function(){return iW}});var E={};r.r(E),r.d(E,{base10:function(){return iZ}});var C={};r.r(C),r.d(C,{base16:function(){return iK},base16upper:function(){return iG}});var k={};r.r(k),r.d(k,{base32:function(){return iY},base32hex:function(){return i0},base32hexpad:function(){return i2},base32hexpadupper:function(){return i5},base32hexupper:function(){return i1},base32pad:function(){return iQ},base32padupper:function(){return iX},base32upper:function(){return iJ},base32z:function(){return i4}});var R={};r.r(R),r.d(R,{base36:function(){return i6},base36upper:function(){return i3}});var P={};r.r(P),r.d(P,{base58btc:function(){return i8},base58flickr:function(){return i9}});var D={};r.r(D),r.d(D,{base64:function(){return i7},base64pad:function(){return se},base64url:function(){return st},base64urlpad:function(){return sr}});var A={};r.r(A),r.d(A,{base256emoji:function(){return sa}});var N={};r.r(N),r.d(N,{sha256:function(){return su},sha512:function(){return sd}});var L={};r.r(L),r.d(L,{code:function(){return sh},decode:function(){return sm},encode:function(){return sf},name:function(){return sp}});var O={};r.r(O),r.d(O,{code:function(){return sb},decode:function(){return s_},encode:function(){return sw},name:function(){return sv}});var I={};r.r(I),r.d(I,{identity:function(){return sB}});var M={};r.r(M),r.d(M,{base2:function(){return sU}});var j={};r.r(j),r.d(j,{base8:function(){return sq}});var F={};r.r(F),r.d(F,{base10:function(){return sz}});var $={};r.r($),r.d($,{base16:function(){return sV},base16upper:function(){return sH}});var B={};r.r(B),r.d(B,{base36:function(){return sW},base36upper:function(){return sZ}});var U={};r.r(U),r.d(U,{base256emoji:function(){return sJ}});var q={};r.r(q),r.d(q,{sha256:function(){return sX},sha512:function(){return s0}});var z={};r.r(z),r.d(z,{identity:function(){return s2}});var V={};r.r(V),r.d(V,{code:function(){return s4},decode:function(){return s3},encode:function(){return s6},name:function(){return s5}});var H={};r.r(H),r.d(H,{code:function(){return ae},decode:function(){return ar},encode:function(){return at},name:function(){return s7}});var W={};r.r(W),r.d(W,{base58btc:function(){return aU},base58flickr:function(){return aq}});var Z={};r.r(Z),r.d(Z,{base32:function(){return az},base32hex:function(){return aZ},base32hexpad:function(){return aG},base32hexpadupper:function(){return aY},base32hexupper:function(){return aK},base32pad:function(){return aH},base32padupper:function(){return aW},base32upper:function(){return aV},base32z:function(){return aJ}});var K={};r.r(K),r.d(K,{identity:function(){return a7}});var G={};r.r(G),r.d(G,{base2:function(){return oe}});var Y={};r.r(Y),r.d(Y,{base8:function(){return ot}});var J={};r.r(J),r.d(J,{base10:function(){return or}});var Q={};r.r(Q),r.d(Q,{base16:function(){return on},base16upper:function(){return oi}});var X={};r.r(X),r.d(X,{base36:function(){return os},base36upper:function(){return oa}});var ee={};r.r(ee),r.d(ee,{base64:function(){return oo},base64pad:function(){return ol},base64url:function(){return oc},base64urlpad:function(){return ou}});var et={};r.r(et),r.d(et,{base256emoji:function(){return of}});var er={};r.r(er),r.d(er,{sha256:function(){return ov},sha512:function(){return ob}});var en={};r.r(en),r.d(en,{identity:function(){return o_}});var ei={};r.r(ei),r.d(ei,{code:function(){return oS},decode:function(){return oE},encode:function(){return oT},name:function(){return ox}});var es={};r.r(es),r.d(es,{code:function(){return oP},decode:function(){return oA},encode:function(){return oD},name:function(){return oR}});var ea={};r.r(ea),r.d(ea,{base58btc:function(){return lO},base58flickr:function(){return lI}});var eo={};r.r(eo),r.d(eo,{base32:function(){return lM},base32hex:function(){return lB},base32hexpad:function(){return lq},base32hexpadupper:function(){return lz},base32hexupper:function(){return lU},base32pad:function(){return lF},base32padupper:function(){return l$},base32upper:function(){return lj},base32z:function(){return lV}});var el={};r.r(el),r.d(el,{identity:function(){return l2}});var ec={};r.r(ec),r.d(ec,{base2:function(){return l5}});var eu={};r.r(eu),r.d(eu,{base8:function(){return l4}});var ed={};r.r(ed),r.d(ed,{base10:function(){return l6}});var ep={};r.r(ep),r.d(ep,{base16:function(){return l3},base16upper:function(){return l8}});var eh={};r.r(eh),r.d(eh,{base36:function(){return l9},base36upper:function(){return l7}});var ef={};r.r(ef),r.d(ef,{base64:function(){return ce},base64pad:function(){return ct},base64url:function(){return cr},base64urlpad:function(){return cn}});var em={};r.r(em),r.d(em,{base256emoji:function(){return co}});var eg={};r.r(eg),r.d(eg,{sha256:function(){return cd},sha512:function(){return cp}});var ey={};r.r(ey),r.d(ey,{identity:function(){return cf}});var ev={};r.r(ev),r.d(ev,{code:function(){return cg},decode:function(){return cv},encode:function(){return cy},name:function(){return cm}});var eb={};r.r(eb),r.d(eb,{code:function(){return cx},decode:function(){return cT},encode:function(){return cS},name:function(){return c_}});var ew={};r.r(ew),r.d(ew,{base58btc:function(){return u0},base58flickr:function(){return u1}});var e_={};r.r(e_),r.d(e_,{base32:function(){return u2},base32hex:function(){return u3},base32hexpad:function(){return u9},base32hexpadupper:function(){return u7},base32hexupper:function(){return u8},base32pad:function(){return u4},base32padupper:function(){return u6},base32upper:function(){return u5},base32z:function(){return de}});var ex={};r.r(ex),r.d(ex,{identity:function(){return dh}});var eS={};r.r(eS),r.d(eS,{base2:function(){return df}});var eT={};r.r(eT),r.d(eT,{base8:function(){return dm}});var eE={};r.r(eE),r.d(eE,{base10:function(){return dg}});var eC={};r.r(eC),r.d(eC,{base16:function(){return dy},base16upper:function(){return dv}});var ek={};r.r(ek),r.d(ek,{base36:function(){return db},base36upper:function(){return dw}});var eR={};r.r(eR),r.d(eR,{base64:function(){return d_},base64pad:function(){return dx},base64url:function(){return dS},base64urlpad:function(){return dT}});var eP={};r.r(eP),r.d(eP,{base256emoji:function(){return dR}});var eD={};r.r(eD),r.d(eD,{sha256:function(){return dN},sha512:function(){return dL}});var eA={};r.r(eA),r.d(eA,{identity:function(){return dI}});var eN={};r.r(eN),r.d(eN,{code:function(){return dj},decode:function(){return d$},encode:function(){return dF},name:function(){return dM}});var eL={};r.r(eL),r.d(eL,{code:function(){return dz},decode:function(){return dH},encode:function(){return dV},name:function(){return dq}});let eO=e=>Promise.reject(Error(`No base found for "${e}"`));class eI{constructor(e){for(let t of(this._basesByName={},this._basesByPrefix={},this._loadBase=e.loadBase||eO,e.bases))this.addBase(t)}addBase(e){if(this._basesByName[e.name]||this._basesByPrefix[e.prefix])throw Error(`Codec already exists for codec "${e.name}"`);this._basesByName[e.name]=e,this._basesByPrefix[e.prefix]=e}removeBase(e){delete this._basesByName[e.name],delete this._basesByPrefix[e.prefix]}async getBase(e){if(this._basesByName[e])return this._basesByName[e];if(this._basesByPrefix[e])return this._basesByPrefix[e];let t=await this._loadBase(e);return null==this._basesByName[t.name]&&null==this._basesByPrefix[t.prefix]&&this.addBase(t),t}listBases(){return Object.values(this._basesByName)}}let eM=e=>Promise.reject(Error(`No codec found for "${e}"`));class ej{constructor(e){for(let t of(this._codecsByName={},this._codecsByCode={},this._loadCodec=e.loadCodec||eM,e.codecs))this.addCodec(t)}addCodec(e){if(this._codecsByName[e.name]||this._codecsByCode[e.code])throw Error(`Resolver already exists for codec "${e.name}"`);this._codecsByName[e.name]=e,this._codecsByCode[e.code]=e}removeCodec(e){delete this._codecsByName[e.name],delete this._codecsByCode[e.code]}async getCodec(e){let t="string"==typeof e?this._codecsByName:this._codecsByCode;if(t[e])return t[e];let r=await this._loadCodec(e);return null==t[e]&&this.addCodec(r),r}listCodecs(){return Object.values(this._codecsByName)}}let eF=e=>Promise.reject(Error(`No hasher found for "${e}"`));class e${constructor(e){for(let t of(this._hashersByName={},this._hashersByCode={},this._loadHasher=e.loadHasher||eF,e.hashers))this.addHasher(t)}addHasher(e){if(this._hashersByName[e.name]||this._hashersByCode[e.code])throw Error(`Resolver already exists for codec "${e.name}"`);this._hashersByName[e.name]=e,this._hashersByCode[e.code]=e}removeHasher(e){delete this._hashersByName[e.name],delete this._hashersByCode[e.code]}async getHasher(e){let t="string"==typeof e?this._hashersByName:this._hashersByCode;if(t[e])return t[e];let r=await this._loadHasher(e);return null==t[e]&&this.addHasher(r),r}listHashers(){return Object.values(this._hashersByName)}}function eB(e,t,r){t=t||[];for(var n=r=r||0;e>=2147483648;)t[r++]=255&e|128,e/=128;for(;-128&e;)t[r++]=255&e|128,e>>>=7;return t[r]=0|e,eB.bytes=r-n+1,t}function eU(e,t){var r,n=0,t=t||0,i=0,s=t,a=e.length;do{if(s>=a)throw eU.bytes=0,RangeError("Could not decode varint");r=e[s++],n+=i<28?(127&r)<<i:(127&r)*Math.pow(2,i),i+=7}while(r>=128);return eU.bytes=s-t,n}var eq={encode:eB,decode:eU,encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let ez=(e,t=0)=>{let r=eq.decode(e,t);return[r,eq.decode.bytes]},eV=(e,t,r=0)=>(eq.encode(e,t,r),t),eH=e=>eq.encodingLength(e);new Uint8Array(0);let eW=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},eZ=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},eK=e=>new TextEncoder().encode(e),eG=e=>new TextDecoder().decode(e),eY=(e,t)=>{let r=t.byteLength,n=eH(e),i=n+eH(r),s=new Uint8Array(i+r);return eV(e,s,0),eV(r,s,n),s.set(t,i),new eX(e,r,t,s)},eJ=e=>{let t=eZ(e),[r,n]=ez(t),[i,s]=ez(t.subarray(n)),a=t.subarray(n+s);if(a.byteLength!==i)throw Error("Incorrect length");return new eX(r,i,a,t)},eQ=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&eW(e.bytes,t.bytes);class eX{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}var e0=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),a=s.charCodeAt(0);if(255!==r[a])throw TypeError(s+" is ambiguous");r[a]=i}var o=e.length,l=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var n=0,i=0;e[t]===l;)n++,t++;for(var s=(e.length-t)*c+1>>>0,a=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var d=0,p=s-1;(0!==u||d<i)&&-1!==p;p--,d++)u+=o*a[p]>>>0,a[p]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var h=s-i;h!==s&&0===a[h];)h++;for(var f=new Uint8Array(n+(s-h)),m=n;h!==s;)f[m++]=a[h++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var a=(s-i)*u+1>>>0,c=new Uint8Array(a);i!==s;){for(var d=t[i],p=0,h=a-1;(0!==d||p<n)&&-1!==h;h--,p++)d+=256*c[h]>>>0,c[h]=d%o>>>0,d=d/o>>>0;if(0!==d)throw Error("Non-zero carry");n=p,i++}for(var f=a-n;f!==a&&0===c[f];)f++;for(var m=l.repeat(r);f<a;++f)m+=e.charAt(c[f]);return m},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw Error(`Non-${t} character`)}}};class e1{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class e2{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return e4(this,e)}}class e5{constructor(e){this.decoders=e}or(e){return e4(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let e4=(e,t)=>new e5({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class e6{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new e1(e,t,r),this.decoder=new e2(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let e3=({name:e,prefix:t,encode:r,decode:n})=>new e6(e,t,r,n),e8=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=e0(r,t);return e3({prefix:e,name:t,encode:n,decode:e=>eZ(i(e))})},e9=(e,t,r,n)=>{let i={};for(let s=0;s<t.length;++s)i[t[s]]=s;let a=e.length;for(;"="===e[a-1];)--a;let o=new Uint8Array(a*r/8|0),l=0,c=0,u=0;for(let d=0;d<a;++d){let p=i[e[d]];if(void 0===p)throw SyntaxError(`Non-${n} character`);c=c<<r|p,(l+=r)>=8&&(l-=8,o[u++]=255&c>>l)}if(l>=r||255&c<<8-l)throw SyntaxError("Unexpected end of data");return o},e7=(e,t,r)=>{let n="="===t[t.length-1],i=(1<<r)-1,s="",a=0,o=0;for(let l=0;l<e.length;++l)for(o=o<<8|e[l],a+=8;a>r;)a-=r,s+=t[i&o>>a];if(a&&(s+=t[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s},te=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>e3({prefix:t,name:e,encode:e=>e7(e,n,r),decode:t=>e9(t,n,r,e)}),tt=e8({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),tr=e8({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),tn=te({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),ti=te({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),ts=te({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),ta=te({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),to=te({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),tl=te({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),tc=te({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),tu=te({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),td=te({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),tp=(e,t)=>{let{bytes:r,version:n}=e;return 0===n?ty(r,tf(e),t||tt.encoder):tv(r,tf(e),t||tn.encoder)},th=new WeakMap,tf=e=>{let t=th.get(e);if(null==t){let r=new Map;return th.set(e,r),r}return t};class tm{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==tb)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==tw)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return tm.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=eY(e,t);return tm.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return tm.equals(this,e)}static equals(e,t){return t&&e.code===t.code&&e.version===t.version&&eQ(e.multihash,t.multihash)}toString(e){return tp(this,e)}toJSON(){return{"/":tp(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;if(e instanceof tm)return e;if(null!=e["/"]&&e["/"]===e.bytes||e.asCID===e){let{version:t,code:r,multihash:n,bytes:i}=e;return new tm(t,r,n,i||t_(t,r,n.bytes))}if(!0!==e[tx])return null;{let{version:s,multihash:a,code:o}=e,l=eJ(a);return tm.create(s,o,l)}}static create(e,t,r){if("number"!=typeof t)throw Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw Error("Invalid digest");switch(e){case 0:if(t===tb)return new tm(e,t,r,r.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${tb}) block encoding`);case 1:{let n=t_(e,t,r.bytes);return new tm(e,t,r,n)}default:throw Error("Invalid version")}}static createV0(e){return tm.create(0,tb,e)}static createV1(e,t){return tm.create(1,e,t)}static decode(e){let[t,r]=tm.decodeFirst(e);if(r.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=tm.inspectBytes(e),r=t.size-t.multihashSize,n=eZ(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw Error("Incorrect length");let i=n.subarray(t.multihashSize-t.digestSize),s=new eX(t.multihashCode,t.digestSize,i,n),a=0===t.version?tm.createV0(s):tm.createV1(t.codec,s);return[a,e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[r,n]=ez(e.subarray(t));return t+=n,r},n=r(),i=tb;if(18===n?(n=0,t=0):i=r(),0!==n&&1!==n)throw RangeError(`Invalid CID version ${n}`);let s=t,a=r(),o=r(),l=t+o;return{version:n,codec:i,multihashCode:a,digestSize:o,multihashSize:l-s,size:l}}static parse(e,t){let[r,n]=tg(e,t),i=tm.decode(n);if(0===i.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return tf(i).set(r,e),i}}let tg=(e,t)=>{switch(e[0]){case"Q":return[tt.prefix,(t||tt).decode(`${tt.prefix}${e}`)];case tt.prefix:return[tt.prefix,(t||tt).decode(e)];case tn.prefix:return[tn.prefix,(t||tn).decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},ty=(e,t,r)=>{let{prefix:n}=r;if(n!==tt.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(null!=i)return i;{let s=r.encode(e).slice(1);return t.set(n,s),s}},tv=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(null!=i)return i;{let s=r.encode(e);return t.set(n,s),s}},tb=112,tw=18,t_=(e,t,r)=>{let n=eH(e),i=n+eH(t),s=new Uint8Array(i+r.byteLength);return eV(e,s,0),eV(t,s,n),s.set(r,i),s},tx=Symbol.for("@ipld/js-cid/CID"),tS=new TextDecoder;function tT(e,t){let r=0;for(let n=0;;n+=7){if(n>=64)throw Error("protobuf: varint overflow");if(t>=e.length)throw Error("protobuf: unexpected end of data");let i=e[t++];if(r+=n<28?(127&i)<<n:(127&i)*2**n,i<128)break}return[r,t]}function tE(e,t){let r;[r,t]=tT(e,t);let n=t+r;if(r<0||n<0)throw Error("protobuf: invalid length");if(n>e.length)throw Error("protobuf: unexpected end of data");return[e.subarray(t,n),n]}function tC(e,t){let r;return[r,t]=tT(e,t),[7&r,r>>3,t]}let tk=new TextEncoder;function tR(e,t,r){t-=tP(r);let n=t;for(;r>=2147483648;)e[t++]=127&r|128,r/=128;for(;r>=128;)e[t++]=127&r|128,r>>>=7;return e[t]=r,n}function tP(e){var t;let r;return e%2==0&&e++,Math.floor((r=0,(t=e)>=4294967296&&(t=Math.floor(t/4294967296),r=32),t>=65536&&(t>>>=16,r+=16),t>=256&&(t>>>=8,r+=8),(r+tD[t]+6)/7))}let tD=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8],tA=["Data","Links"],tN=["Hash","Name","Tsize"],tL=new TextEncoder;function tO(e,t){if(e===t)return 0;let r=e.Name?tL.encode(e.Name):[],n=t.Name?tL.encode(t.Name):[],i=r.length,s=n.length;for(let a=0,o=Math.min(i,s);a<o;++a)if(r[a]!==n[a]){i=r[a],s=n[a];break}return i<s?-1:s<i?1:0}function tI(e,t){return!Object.keys(e).some(e=>!t.includes(e))}function tM(e){if("object"==typeof e.asCID){let t=tm.asCID(e);if(!t)throw TypeError("Invalid DAG-PB form");return{Hash:t}}if("object"!=typeof e||Array.isArray(e))throw TypeError("Invalid DAG-PB form");let r={};if(e.Hash){let n=tm.asCID(e.Hash);try{!n&&("string"==typeof e.Hash?n=tm.parse(e.Hash):e.Hash instanceof Uint8Array&&(n=tm.decode(e.Hash)))}catch(i){throw TypeError(`Invalid DAG-PB form: ${i.message}`)}n&&(r.Hash=n)}if(!r.Hash)throw TypeError("Invalid DAG-PB form");return"string"==typeof e.Name&&(r.Name=e.Name),"number"==typeof e.Tsize&&(r.Tsize=e.Tsize),r}function tj(e){if((e instanceof Uint8Array||"string"==typeof e)&&(e={Data:e}),"object"!=typeof e||Array.isArray(e))throw TypeError("Invalid DAG-PB form");let t={};if(void 0!==e.Data){if("string"==typeof e.Data)t.Data=tL.encode(e.Data);else if(e.Data instanceof Uint8Array)t.Data=e.Data;else throw TypeError("Invalid DAG-PB form")}if(void 0!==e.Links){if(Array.isArray(e.Links))t.Links=e.Links.map(tM),t.Links.sort(tO);else throw TypeError("Invalid DAG-PB form")}else t.Links=[];return t}function tF(e){if(!e||"object"!=typeof e||Array.isArray(e))throw TypeError("Invalid DAG-PB form");if(!tI(e,tA))throw TypeError("Invalid DAG-PB form (extraneous properties)");if(void 0!==e.Data&&!(e.Data instanceof Uint8Array))throw TypeError("Invalid DAG-PB form (Data must be a Uint8Array)");if(!Array.isArray(e.Links))throw TypeError("Invalid DAG-PB form (Links must be an array)");for(let t=0;t<e.Links.length;t++){let r=e.Links[t];if(!r||"object"!=typeof r||Array.isArray(r))throw TypeError("Invalid DAG-PB form (bad link object)");if(!tI(r,tN))throw TypeError("Invalid DAG-PB form (extraneous properties on link object)");if(!r.Hash)throw TypeError("Invalid DAG-PB form (link must have a Hash)");if(r.Hash.asCID!==r.Hash)throw TypeError("Invalid DAG-PB form (link Hash must be a CID)");if(void 0!==r.Name&&"string"!=typeof r.Name)throw TypeError("Invalid DAG-PB form (link Name must be a string)");if(void 0!==r.Tsize&&("number"!=typeof r.Tsize||r.Tsize%1!=0))throw TypeError("Invalid DAG-PB form (link Tsize must be an integer)");if(t>0&&-1===tO(r,e.Links[t-1]))throw TypeError("Invalid DAG-PB form (links must be sorted by Name bytes)")}}function t$(e,t=[]){return tj({Data:e,Links:t})}function tB(e,t,r){return tM({Hash:r,Name:e,Tsize:t})}let tU="dag-pb",tq=112;function tz(e){tF(e);let t={};return e.Links&&(t.Links=e.Links.map(e=>{let t={};return e.Hash&&(t.Hash=e.Hash.bytes),void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t})),e.Data&&(t.Data=e.Data),function(e){let t=function(e){let t=0;if(e.Data){let r=e.Data.length;t+=1+r+tP(r)}if(e.Links)for(let n of e.Links){let i=function(e){let t=0;if(e.Hash){let r=e.Hash.length;t+=1+r+tP(r)}if("string"==typeof e.Name){let n=tk.encode(e.Name).length;t+=1+n+tP(n)}return"number"==typeof e.Tsize&&(t+=1+tP(e.Tsize)),t}(n);t+=1+i+tP(i)}return t}(e),r=new Uint8Array(t),n=t;if(e.Data&&(n-=e.Data.length,r.set(e.Data,n),n=tR(r,n,e.Data.length)-1,r[n]=10),e.Links)for(let i=e.Links.length-1;i>=0;i--){let s=function(e,t){let r=t.length;if("number"==typeof e.Tsize){if(e.Tsize<0)throw Error("Tsize cannot be negative");if(!Number.isSafeInteger(e.Tsize))throw Error("Tsize too large for encoding");r=tR(t,r,e.Tsize)-1,t[r]=24}if("string"==typeof e.Name){let n=tk.encode(e.Name);r-=n.length,t.set(n,r),r=tR(t,r,n.length)-1,t[r]=18}return e.Hash&&(r-=e.Hash.length,t.set(e.Hash,r),r=tR(t,r,e.Hash.length)-1,t[r]=10),t.length-r}(e.Links[i],r.subarray(0,n));n-=s,n=tR(r,n,s)-1,r[n]=18}return r}(t)}function tV(e){let t=function(e){let t,r;let n=e.length,i=0,s=!1;for(;i<n;){let a,o;if([a,o,i]=tC(e,i),2!==a)throw Error(`protobuf: (PBNode) invalid wireType, expected 2, got ${a}`);if(1===o){if(r)throw Error("protobuf: (PBNode) duplicate Data section");[r,i]=tE(e,i),t&&(s=!0)}else if(2===o){let l;if(s)throw Error("protobuf: (PBNode) duplicate Links section");t||(t=[]),[l,i]=tE(e,i),t.push(function(e){let t={},r=e.length,n=0;for(;n<r;){let i,s;if([i,s,n]=tC(e,n),1===s){if(t.Hash)throw Error("protobuf: (PBLink) duplicate Hash section");if(2!==i)throw Error(`protobuf: (PBLink) wrong wireType (${i}) for Hash`);if(void 0!==t.Name)throw Error("protobuf: (PBLink) invalid order, found Name before Hash");if(void 0!==t.Tsize)throw Error("protobuf: (PBLink) invalid order, found Tsize before Hash");[t.Hash,n]=tE(e,n)}else if(2===s){let a;if(void 0!==t.Name)throw Error("protobuf: (PBLink) duplicate Name section");if(2!==i)throw Error(`protobuf: (PBLink) wrong wireType (${i}) for Name`);if(void 0!==t.Tsize)throw Error("protobuf: (PBLink) invalid order, found Tsize before Name");[a,n]=tE(e,n),t.Name=tS.decode(a)}else if(3===s){if(void 0!==t.Tsize)throw Error("protobuf: (PBLink) duplicate Tsize section");if(0!==i)throw Error(`protobuf: (PBLink) wrong wireType (${i}) for Tsize`);[t.Tsize,n]=tT(e,n)}else throw Error(`protobuf: (PBLink) invalid fieldNumber, expected 1, 2 or 3, got ${s}`)}if(n>r)throw Error("protobuf: (PBLink) unexpected end of data");return t}(l))}else throw Error(`protobuf: (PBNode) invalid fieldNumber, expected 1 or 2, got ${o}`)}if(i>n)throw Error("protobuf: (PBNode) unexpected end of data");let c={};return r&&(c.Data=r),c.Links=t||[],c}(e),r={};return t.Data&&(r.Data=t.Data),t.Links&&(r.Links=t.Links.map(e=>{let t={};try{t.Hash=tm.decode(e.Hash)}catch(r){}if(!t.Hash)throw Error("Invalid Hash field found in link, expected CID");return void 0!==e.Name&&(t.Name=e.Name),void 0!==e.Tsize&&(t.Tsize=e.Tsize),t})),r}let tH=["string","number","bigint","symbol"],tW=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];class tZ{constructor(e,t,r){this.major=e,this.majorEncoded=e<<5,this.name=t,this.terminal=r}toString(){return`Type[${this.major}].${this.name}`}compare(e){return this.major<e.major?-1:this.major>e.major?1:0}}tZ.uint=new tZ(0,"uint",!0),tZ.negint=new tZ(1,"negint",!0),tZ.bytes=new tZ(2,"bytes",!0),tZ.string=new tZ(3,"string",!0),tZ.array=new tZ(4,"array",!1),tZ.map=new tZ(5,"map",!1),tZ.tag=new tZ(6,"tag",!1),tZ.float=new tZ(7,"float",!0),tZ.false=new tZ(7,"false",!0),tZ.true=new tZ(7,"true",!0),tZ.null=new tZ(7,"null",!0),tZ.undefined=new tZ(7,"undefined",!0),tZ.break=new tZ(7,"break",!0);class tK{constructor(e,t,r){this.type=e,this.value=t,this.encodedLength=r,this.encodedBytes=void 0,this.byteValue=void 0}toString(){return`Token[${this.type}].${this.value}`}}let tG=globalThis.process&&!globalThis.process.browser&&globalThis.Buffer&&"function"==typeof globalThis.Buffer.isBuffer,tY=new TextDecoder,tJ=new TextEncoder;function tQ(e){return tG&&globalThis.Buffer.isBuffer(e)}function tX(e){return e instanceof Uint8Array?tQ(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e:Uint8Array.from(e)}let t0=tG?(e,t,r)=>r-t>64?globalThis.Buffer.from(e.subarray(t,r)).toString("utf8"):t8(e,t,r):(e,t,r)=>r-t>64?tY.decode(e.subarray(t,r)):t8(e,t,r),t1=tG?e=>e.length>64?globalThis.Buffer.from(e):t3(e):e=>e.length>64?tJ.encode(e):t3(e),t2=e=>Uint8Array.from(e),t5=tG?(e,t,r)=>tQ(e)?new Uint8Array(e.subarray(t,r)):e.slice(t,r):(e,t,r)=>e.slice(t,r),t4=tG?(e,t)=>(e=e.map(e=>e instanceof Uint8Array?e:globalThis.Buffer.from(e)),tX(globalThis.Buffer.concat(e,t))):(e,t)=>{let r=new Uint8Array(t),n=0;for(let i of e)n+i.length>r.length&&(i=i.subarray(0,r.length-n)),r.set(i,n),n+=i.length;return r},t6=tG?e=>globalThis.Buffer.allocUnsafe(e):e=>new Uint8Array(e);function t3(e,t=1/0){let r;let n=e.length,i=null,s=[];for(let a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319||a+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return s}function t8(e,t,r){let n=[];for(;t<r;){let i=e[t],s=null,a=i>239?4:i>223?3:i>191?2:1;if(t+a<=r){let o,l,c,u;switch(a){case 1:i<128&&(s=i);break;case 2:(192&(o=e[t+1]))==128&&(u=(31&i)<<6|63&o)>127&&(s=u);break;case 3:o=e[t+1],l=e[t+2],(192&o)==128&&(192&l)==128&&(u=(15&i)<<12|(63&o)<<6|63&l)>2047&&(u<55296||u>57343)&&(s=u);break;case 4:o=e[t+1],l=e[t+2],c=e[t+3],(192&o)==128&&(192&l)==128&&(192&c)==128&&(u=(15&i)<<18|(63&o)<<12|(63&l)<<6|63&c)>65535&&u<1114112&&(s=u)}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),t+=a}return t9(n)}function t9(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}class t7{constructor(e=256){this.chunkSize=e,this.cursor=0,this.maxCursor=-1,this.chunks=[],this._initReuseChunk=null}reset(){this.cursor=0,this.maxCursor=-1,this.chunks.length&&(this.chunks=[]),null!==this._initReuseChunk&&(this.chunks.push(this._initReuseChunk),this.maxCursor=this._initReuseChunk.length-1)}push(e){let t=this.chunks[this.chunks.length-1],r=this.cursor+e.length;if(r<=this.maxCursor+1){let n=t.length-(this.maxCursor-this.cursor)-1;t.set(e,n)}else{if(t){let i=t.length-(this.maxCursor-this.cursor)-1;i<t.length&&(this.chunks[this.chunks.length-1]=t.subarray(0,i),this.maxCursor=this.cursor-1)}e.length<64&&e.length<this.chunkSize?(t=t6(this.chunkSize),this.chunks.push(t),this.maxCursor+=t.length,null===this._initReuseChunk&&(this._initReuseChunk=t),t.set(e,0)):(this.chunks.push(e),this.maxCursor+=e.length)}this.cursor+=e.length}toBytes(e=!1){let t;if(1===this.chunks.length){let r=this.chunks[0];e&&this.cursor>r.length/2?(t=this.cursor===r.length?r:r.subarray(0,this.cursor),this._initReuseChunk=null,this.chunks=[]):t=t5(r,0,this.cursor)}else t=t4(this.chunks,this.cursor);return e&&this.reset(),t}}let re="CBOR decode error:",rt="CBOR encode error:",rr=[];function rn(e,t,r){if(e.length-t<r)throw Error(`${re} not enough data for type`)}rr[23]=1,rr[24]=2,rr[25]=3,rr[26]=5,rr[27]=9;let ri=[24,256,65536,4294967296,BigInt("18446744073709551616")];function rs(e,t,r){rn(e,t,1);let n=e[t];if(!0===r.strict&&n<ri[0])throw Error(`${re} integer encoded in more bytes than necessary (strict decode)`);return n}function ra(e,t,r){rn(e,t,2);let n=e[t]<<8|e[t+1];if(!0===r.strict&&n<ri[1])throw Error(`${re} integer encoded in more bytes than necessary (strict decode)`);return n}function ro(e,t,r){rn(e,t,4);let n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3];if(!0===r.strict&&n<ri[2])throw Error(`${re} integer encoded in more bytes than necessary (strict decode)`);return n}function rl(e,t,r){rn(e,t,8);let n=16777216*e[t]+(e[t+1]<<16)+(e[t+2]<<8)+e[t+3],i=16777216*e[t+4]+(e[t+5]<<16)+(e[t+6]<<8)+e[t+7],s=(BigInt(n)<<BigInt(32))+BigInt(i);if(!0===r.strict&&s<ri[3])throw Error(`${re} integer encoded in more bytes than necessary (strict decode)`);if(s<=Number.MAX_SAFE_INTEGER)return Number(s);if(!0===r.allowBigInt)return s;throw Error(`${re} integers outside of the safe integer range are not supported`)}function rc(e,t){return ru(e,0,t.value)}function ru(e,t,r){if(r<ri[0]){let n=Number(r);e.push([t|n])}else if(r<ri[1]){let i=Number(r);e.push([24|t,i])}else if(r<ri[2]){let s=Number(r);e.push([25|t,s>>>8,255&s])}else if(r<ri[3]){let a=Number(r);e.push([26|t,a>>>24&255,a>>>16&255,a>>>8&255,255&a])}else{let o=BigInt(r);if(o<ri[4]){let l=[27|t,0,0,0,0,0,0,0],c=Number(o&BigInt(4294967295)),u=Number(o>>BigInt(32)&BigInt(4294967295));l[8]=255&c,c>>=8,l[7]=255&c,c>>=8,l[6]=255&c,c>>=8,l[5]=255&c,l[4]=255&u,u>>=8,l[3]=255&u,u>>=8,l[2]=255&u,u>>=8,l[1]=255&u,e.push(l)}else throw Error(`${re} encountered BigInt larger than allowable range`)}}rc.encodedSize=function(e){return ru.encodedSize(e.value)},ru.encodedSize=function(e){return e<ri[0]?1:e<ri[1]?2:e<ri[2]?3:e<ri[3]?5:9},rc.compareTokens=function(e,t){return e.value<t.value?-1:e.value>t.value?1:0};let rd=BigInt(-1),rp=BigInt(1);function rh(e,t){let r=t.value;ru(e,t.type.majorEncoded,"bigint"==typeof r?r*rd-rp:-1*r-1)}function rf(e,t,r,n){rn(e,t,r+n);let i=t5(e,t+r,t+r+n);return new tK(tZ.bytes,i,r+n)}function rm(e,t,r,n){return rf(e,t,1,r)}function rg(e){return void 0===e.encodedBytes&&(e.encodedBytes=e.type===tZ.string?t1(e.value):e.value),e.encodedBytes}function ry(e,t){let r=rg(t);ru(e,t.type.majorEncoded,r.length),e.push(r)}function rv(e,t,r,n,i){let s=r+n;rn(e,t,s);let a=new tK(tZ.string,t0(e,t+r,t+s),s);return!0===i.retainStringBytes&&(a.byteValue=t5(e,t+r,t+s)),a}function rb(e,t,r,n){return rv(e,t,1,r,n)}function rw(e,t,r,n){return new tK(tZ.array,n,r)}function r_(e,t,r,n){return rw(e,t,1,r)}function rx(e,t){ru(e,tZ.array.majorEncoded,t.value)}function rS(e,t,r,n){return new tK(tZ.map,n,r)}function rT(e,t,r,n){return rS(e,t,1,r)}function rE(e,t){ru(e,tZ.map.majorEncoded,t.value)}function rC(e,t,r,n){return new tK(tZ.tag,r,1)}function rk(e,t){ru(e,tZ.tag.majorEncoded,t.value)}function rR(e,t,r){if(r){if(!1===r.allowNaN&&Number.isNaN(e))throw Error(`${re} NaN values are not supported`);if(!1===r.allowInfinity&&(e===1/0||e===-1/0))throw Error(`${re} Infinity values are not supported`)}return new tK(tZ.float,e,t)}function rP(e,t,r){let n=t.value;if(!1===n)e.push([20|tZ.float.majorEncoded]);else if(!0===n)e.push([21|tZ.float.majorEncoded]);else if(null===n)e.push([22|tZ.float.majorEncoded]);else if(void 0===n)e.push([23|tZ.float.majorEncoded]);else{let i=!1;r&&!0===r.float64||(rL(n),n===rO(rN,1)||Number.isNaN(n)?(rN[0]=249,e.push(rN.slice(0,3)),i=!0):(rI(n),n!==rM(rN,1)||(rN[0]=250,e.push(rN.slice(0,5)),i=!0))),i||(rA.setFloat64(0,n,!1),rj(rN,1),rN[0]=251,e.push(rN.slice(0,9)))}}rh.encodedSize=function(e){let t=e.value,r="bigint"==typeof t?t*rd-rp:-1*t-1;return r<ri[0]?1:r<ri[1]?2:r<ri[2]?3:r<ri[3]?5:9},rh.compareTokens=function(e,t){return e.value<t.value?1:e.value>t.value?-1:0},ry.encodedSize=function(e){let t=rg(e);return ru.encodedSize(t.length)+t.length},ry.compareTokens=function(e,t){var r,n;return r=rg(e),n=rg(t),r.length<n.length?-1:r.length>n.length?1:function(e,t){if(tQ(e)&&tQ(t))return e.compare(t);for(let r=0;r<e.length;r++)if(e[r]!==t[r])return e[r]<t[r]?-1:1;return 0}(r,n)},rx.compareTokens=rc.compareTokens,rx.encodedSize=function(e){return ru.encodedSize(e.value)},rE.compareTokens=rc.compareTokens,rE.encodedSize=function(e){return ru.encodedSize(e.value)},rk.compareTokens=rc.compareTokens,rk.encodedSize=function(e){return ru.encodedSize(e.value)},rP.encodedSize=function(e,t){let r=e.value;if(!1===r||!0===r||null==r)return 1;if(!t||!0!==t.float64){rL(r);let n=rO(rN,1);if(r===n||Number.isNaN(r))return 3;if(rI(r),r===(n=rM(rN,1)))return 5}return 9};let rD=new ArrayBuffer(9),rA=new DataView(rD,1),rN=new Uint8Array(rD,0);function rL(e){if(e===1/0)rA.setUint16(0,31744,!1);else if(e===-1/0)rA.setUint16(0,64512,!1);else if(Number.isNaN(e))rA.setUint16(0,32256,!1);else{rA.setFloat32(0,e);let t=rA.getUint32(0),r=(2139095040&t)>>23,n=8388607&t;if(255===r)rA.setUint16(0,31744,!1);else if(0===r)rA.setUint16(0,(2147483648&e)>>16|n>>13,!1);else{let i=r-127;i<-24?rA.setUint16(0,0):i<-14?rA.setUint16(0,(2147483648&t)>>16|1<<24+i,!1):rA.setUint16(0,(2147483648&t)>>16|i+15<<10|n>>13,!1)}}}function rO(e,t){let r;if(e.length-t<2)throw Error(`${re} not enough data for float16`);let n=(e[t]<<8)+e[t+1];if(31744===n)return 1/0;if(64512===n)return-1/0;if(32256===n)return NaN;let i=n>>10&31,s=1023&n;return r=0===i?5960464477539063e-23*s:31!==i?(s+1024)*2**(i-25):0===s?1/0:NaN,32768&n?-r:r}function rI(e){rA.setFloat32(0,e,!1)}function rM(e,t){if(e.length-t<4)throw Error(`${re} not enough data for float32`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,4).getFloat32(0,!1)}function rj(e,t){if(e.length-t<8)throw Error(`${re} not enough data for float64`);let r=(e.byteOffset||0)+t;return new DataView(e.buffer,r,8).getFloat64(0,!1)}function rF(e,t,r){throw Error(`${re} encountered invalid minor (${r}) for major ${e[t]>>>5}`)}function r$(e){return()=>{throw Error(`${re} ${e}`)}}rP.compareTokens=rc.compareTokens;let rB=[];for(let rU=0;rU<=23;rU++)rB[rU]=rF;rB[24]=function(e,t,r,n){return new tK(tZ.uint,rs(e,t+1,n),2)},rB[25]=function(e,t,r,n){return new tK(tZ.uint,ra(e,t+1,n),3)},rB[26]=function(e,t,r,n){return new tK(tZ.uint,ro(e,t+1,n),5)},rB[27]=function(e,t,r,n){return new tK(tZ.uint,rl(e,t+1,n),9)},rB[28]=rF,rB[29]=rF,rB[30]=rF,rB[31]=rF;for(let rq=32;rq<=55;rq++)rB[rq]=rF;rB[56]=function(e,t,r,n){return new tK(tZ.negint,-1-rs(e,t+1,n),2)},rB[57]=function(e,t,r,n){return new tK(tZ.negint,-1-ra(e,t+1,n),3)},rB[58]=function(e,t,r,n){return new tK(tZ.negint,-1-ro(e,t+1,n),5)},rB[59]=function(e,t,r,n){let i=rl(e,t+1,n);if("bigint"!=typeof i){let s=-1-i;if(s>=Number.MIN_SAFE_INTEGER)return new tK(tZ.negint,s,9)}if(!0!==n.allowBigInt)throw Error(`${re} integers outside of the safe integer range are not supported`);return new tK(tZ.negint,rd-BigInt(i),9)},rB[60]=rF,rB[61]=rF,rB[62]=rF,rB[63]=rF;for(let rz=64;rz<=87;rz++)rB[rz]=rm;rB[88]=function(e,t,r,n){return rf(e,t,2,rs(e,t+1,n))},rB[89]=function(e,t,r,n){return rf(e,t,3,ra(e,t+1,n))},rB[90]=function(e,t,r,n){return rf(e,t,5,ro(e,t+1,n))},rB[91]=function(e,t,r,n){let i=rl(e,t+1,n);if("bigint"==typeof i)throw Error(`${re} 64-bit integer bytes lengths not supported`);return rf(e,t,9,i)},rB[92]=rF,rB[93]=rF,rB[94]=rF,rB[95]=r$("indefinite length bytes/strings are not supported");for(let rV=96;rV<=119;rV++)rB[rV]=rb;rB[120]=function(e,t,r,n){return rv(e,t,2,rs(e,t+1,n),n)},rB[121]=function(e,t,r,n){return rv(e,t,3,ra(e,t+1,n),n)},rB[122]=function(e,t,r,n){return rv(e,t,5,ro(e,t+1,n),n)},rB[123]=function(e,t,r,n){let i=rl(e,t+1,n);if("bigint"==typeof i)throw Error(`${re} 64-bit integer string lengths not supported`);return rv(e,t,9,i,n)},rB[124]=rF,rB[125]=rF,rB[126]=rF,rB[127]=r$("indefinite length bytes/strings are not supported");for(let rH=128;rH<=151;rH++)rB[rH]=r_;rB[152]=function(e,t,r,n){return rw(e,t,2,rs(e,t+1,n))},rB[153]=function(e,t,r,n){return rw(e,t,3,ra(e,t+1,n))},rB[154]=function(e,t,r,n){return rw(e,t,5,ro(e,t+1,n))},rB[155]=function(e,t,r,n){let i=rl(e,t+1,n);if("bigint"==typeof i)throw Error(`${re} 64-bit integer array lengths not supported`);return rw(e,t,9,i)},rB[156]=rF,rB[157]=rF,rB[158]=rF,rB[159]=function(e,t,r,n){if(!1===n.allowIndefinite)throw Error(`${re} indefinite length items not allowed`);return rw(e,t,1,1/0)};for(let rW=160;rW<=183;rW++)rB[rW]=rT;rB[184]=function(e,t,r,n){return rS(e,t,2,rs(e,t+1,n))},rB[185]=function(e,t,r,n){return rS(e,t,3,ra(e,t+1,n))},rB[186]=function(e,t,r,n){return rS(e,t,5,ro(e,t+1,n))},rB[187]=function(e,t,r,n){let i=rl(e,t+1,n);if("bigint"==typeof i)throw Error(`${re} 64-bit integer map lengths not supported`);return rS(e,t,9,i)},rB[188]=rF,rB[189]=rF,rB[190]=rF,rB[191]=function(e,t,r,n){if(!1===n.allowIndefinite)throw Error(`${re} indefinite length items not allowed`);return rS(e,t,1,1/0)};for(let rZ=192;rZ<=215;rZ++)rB[rZ]=rC;rB[216]=function(e,t,r,n){return new tK(tZ.tag,rs(e,t+1,n),2)},rB[217]=function(e,t,r,n){return new tK(tZ.tag,ra(e,t+1,n),3)},rB[218]=function(e,t,r,n){return new tK(tZ.tag,ro(e,t+1,n),5)},rB[219]=function(e,t,r,n){return new tK(tZ.tag,rl(e,t+1,n),9)},rB[220]=rF,rB[221]=rF,rB[222]=rF,rB[223]=rF;for(let rK=224;rK<=243;rK++)rB[rK]=r$("simple values are not supported");rB[244]=rF,rB[245]=rF,rB[246]=rF,rB[247]=function(e,t,r,n){if(!1===n.allowUndefined)throw Error(`${re} undefined values are not supported`);return!0===n.coerceUndefinedToNull?new tK(tZ.null,null,1):new tK(tZ.undefined,void 0,1)},rB[248]=r$("simple values are not supported"),rB[249]=function(e,t,r,n){return rR(rO(e,t+1),3,n)},rB[250]=function(e,t,r,n){return rR(rM(e,t+1),5,n)},rB[251]=function(e,t,r,n){return rR(rj(e,t+1),9,n)},rB[252]=rF,rB[253]=rF,rB[254]=rF,rB[255]=function(e,t,r,n){if(!1===n.allowIndefinite)throw Error(`${re} indefinite length items not allowed`);return new tK(tZ.break,void 0,1)};let rG=[];for(let rY=0;rY<24;rY++)rG[rY]=new tK(tZ.uint,rY,1);for(let rJ=-1;rJ>=-24;rJ--)rG[31-rJ]=new tK(tZ.negint,rJ,1);rG[64]=new tK(tZ.bytes,new Uint8Array(0),1),rG[96]=new tK(tZ.string,"",1),rG[128]=new tK(tZ.array,0,1),rG[160]=new tK(tZ.map,0,1),rG[244]=new tK(tZ.false,!1,1),rG[245]=new tK(tZ.true,!0,1),rG[246]=new tK(tZ.null,null,1);let rQ={float64:!1,mapSorter:function(e,t){let r=Array.isArray(e[0])?e[0][0]:e[0],n=Array.isArray(t[0])?t[0][0]:t[0];if(r.type!==n.type)return r.type.compare(n.type);let i=r.type.major,s=rX[i].compareTokens(r,n);return 0===s&&console.warn("WARNING: complex key types used, CBOR key sorting guarantees are gone"),s},quickEncodeToken:function(e){switch(e.type){case tZ.false:return t2([244]);case tZ.true:return t2([245]);case tZ.null:return t2([246]);case tZ.bytes:if(!e.value.length)return t2([64]);return;case tZ.string:if(""===e.value)return t2([96]);return;case tZ.array:if(0===e.value)return t2([128]);return;case tZ.map:if(0===e.value)return t2([160]);return;case tZ.uint:if(e.value<24)return t2([Number(e.value)]);return;case tZ.negint:if(e.value>=-24)return t2([31-Number(e.value)])}}},rX=function(){let e=[];return e[tZ.uint.major]=rc,e[tZ.negint.major]=rh,e[tZ.bytes.major]=ry,e[tZ.string.major]=ry,e[tZ.array.major]=rx,e[tZ.map.major]=rE,e[tZ.tag.major]=rk,e[tZ.float.major]=rP,e}(),r0=new t7;class r1{constructor(e,t){this.obj=e,this.parent=t}includes(e){let t=this;do if(t.obj===e)return!0;while(t=t.parent);return!1}static createCheck(e,t){if(e&&e.includes(t))throw Error(`${rt} object contains circular references`);return new r1(t,e)}}let r2={null:new tK(tZ.null,null),undefined:new tK(tZ.undefined,void 0),true:new tK(tZ.true,!0),false:new tK(tZ.false,!1),emptyArray:new tK(tZ.array,0),emptyMap:new tK(tZ.map,0)},r5={number:(e,t,r,n)=>Number.isInteger(e)&&Number.isSafeInteger(e)?e>=0?new tK(tZ.uint,e):new tK(tZ.negint,e):new tK(tZ.float,e),bigint:(e,t,r,n)=>e>=BigInt(0)?new tK(tZ.uint,e):new tK(tZ.negint,e),Uint8Array:(e,t,r,n)=>new tK(tZ.bytes,e),string:(e,t,r,n)=>new tK(tZ.string,e),boolean:(e,t,r,n)=>e?r2.true:r2.false,null:(e,t,r,n)=>r2.null,undefined:(e,t,r,n)=>r2.undefined,ArrayBuffer:(e,t,r,n)=>new tK(tZ.bytes,new Uint8Array(e)),DataView:(e,t,r,n)=>new tK(tZ.bytes,new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),Array(e,t,r,n){if(!e.length)return!0===r.addBreakTokens?[r2.emptyArray,new tK(tZ.break)]:r2.emptyArray;n=r1.createCheck(n,e);let i=[],s=0;for(let a of e)i[s++]=r6(a,r,n);return r.addBreakTokens?[new tK(tZ.array,e.length),i,new tK(tZ.break)]:[new tK(tZ.array,e.length),i]},Object(e,t,r,n){let i="Object"!==t,s=i?e.keys():Object.keys(e),a=i?e.size:s.length;if(!a)return!0===r.addBreakTokens?[r2.emptyMap,new tK(tZ.break)]:r2.emptyMap;n=r1.createCheck(n,e);let o=[],l=0;for(let c of s)o[l++]=[r6(c,r,n),r6(i?e.get(c):e[c],r,n)];return(r.mapSorter&&o.sort(r.mapSorter),r.addBreakTokens)?[new tK(tZ.map,a),o,new tK(tZ.break)]:[new tK(tZ.map,a),o]}};for(let r4 of(r5.Map=r5.Object,r5.Buffer=r5.Uint8Array,"Uint8Clamped Uint16 Uint32 Int8 Int16 Int32 BigUint64 BigInt64 Float32 Float64".split(" ")))r5[`${r4}Array`]=r5.DataView;function r6(e,t={},r){let n=function(e){if(null===e)return"null";if(void 0===e)return"undefined";if(!0===e||!1===e)return"boolean";let t=typeof e;if(tH.includes(t))return t;if("function"===t)return"Function";if(Array.isArray(e))return"Array";if(e&&e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer.call(null,e))return"Buffer";let r=function(e){let t=Object.prototype.toString.call(e).slice(8,-1);if(tW.includes(t))return t}(e);return r||"Object"}(e),i=t&&t.typeEncoders&&t.typeEncoders[n]||r5[n];if("function"==typeof i){let s=i(e,n,t,r);if(null!=s)return s}let a=r5[n];if(!a)throw Error(`${rt} unsupported type: ${n}`);return a(e,n,t,r)}function r3(e,t,r){let n=r6(e,r);if(!Array.isArray(n)&&r.quickEncodeToken){let i=r.quickEncodeToken(n);if(i)return i;let s=t[n.type.major];if(s.encodedSize){let a=s.encodedSize(n,r),o=new t7(a);if(s(o,n,r),1!==o.chunks.length)throw Error(`Unexpected error: pre-calculated length for ${n} was wrong`);return tX(o.chunks[0])}}return r0.reset(),!function e(t,r,n,i){if(Array.isArray(r))for(let s of r)e(t,s,n,i);else n[r.type.major](t,r,i)}(r0,n,t,r),r0.toBytes(!0)}let r8={strict:!1,allowIndefinite:!0,allowUndefined:!0,allowBigInt:!0};class r9{constructor(e,t={}){this.pos=0,this.data=e,this.options=t}done(){return this.pos>=this.data.length}next(){let e=this.data[this.pos],t=rG[e];if(void 0===t){let r=rB[e];if(!r)throw Error(`${re} no decoder for major type ${e>>>5} (byte 0x${e.toString(16).padStart(2,"0")})`);t=r(this.data,this.pos,31&e,this.options)}return this.pos+=t.encodedLength,t}}let r7=Symbol.for("DONE"),ne=Symbol.for("BREAK");function nt(e,t){if(!(e instanceof Uint8Array))throw Error(`${re} data to decode must be a Uint8Array`);t=Object.assign({},r8,t);let r=t.tokenizer||new r9(e,t),n=function e(t,r){if(t.done())return r7;let n=t.next();if(n.type===tZ.break)return ne;if(n.type.terminal)return n.value;if(n.type===tZ.array)return function(t,r,n){let i=[];for(let s=0;s<t.value;s++){let a=e(r,n);if(a===ne){if(t.value===1/0)break;throw Error(`${re} got unexpected break to lengthed array`)}if(a===r7)throw Error(`${re} found array but not enough entries (got ${s}, expected ${t.value})`);i[s]=a}return i}(n,t,r);if(n.type===tZ.map)return function(t,r,n){let i=!0===n.useMaps,s=i?void 0:{},a=i?new Map:void 0;for(let o=0;o<t.value;o++){let l=e(r,n);if(l===ne){if(t.value===1/0)break;throw Error(`${re} got unexpected break to lengthed map`)}if(l===r7)throw Error(`${re} found map but not enough entries (got ${o} [no key], expected ${t.value})`);if(!0!==i&&"string"!=typeof l)throw Error(`${re} non-string keys not supported (got ${typeof l})`);if(!0===n.rejectDuplicateMapKeys&&(i&&a.has(l)||!i&&l in s))throw Error(`${re} found repeat map key "${l}"`);let c=e(r,n);if(c===r7)throw Error(`${re} found map but not enough entries (got ${o} [no value], expected ${t.value})`);i?a.set(l,c):s[l]=c}return i?a:s}(n,t,r);if(n.type===tZ.tag){if(r.tags&&"function"==typeof r.tags[n.value]){let i=e(t,r);return r.tags[n.value](i)}throw Error(`${re} tag not supported (${n.value})`)}throw Error("unsupported")}(r,t);if(n===r7)throw Error(`${re} did not find any content to decode`);if(n===ne)throw Error(`${re} got unexpected break`);if(!r.done())throw Error(`${re} too many terminals, data makes no sense`);return n}let nr={float64:!0,typeEncoders:{Object:function(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;let t=tm.asCID(e);if(!t)return null;let r=new Uint8Array(t.bytes.byteLength+1);return r.set(t.bytes,1),[new tK(tZ.tag,42),new tK(tZ.bytes,r)]},undefined:function(){throw Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}},nn={allowIndefinite:!1,coerceUndefinedToNull:!0,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};nn.tags[42]=function(e){if(0!==e[0])throw Error("Invalid CID for CBOR tag 42; expected leading 0x00");return tm.decode(e.subarray(1))};let ni="dag-cbor",ns=113,na=e=>r3(e,rX,Object.assign({},rQ,nr)),no=e=>nt(e,nn),nl=({name:e,code:t,encode:r})=>new nc(e,t,r);class nc{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?eY(this.code,t):t.then(e=>eY(this.code,e))}throw Error("Unknown type, must be binary type")}}let nu=te({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),nd=te({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),np=te({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),nh=te({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});class nf extends Array{constructor(){super(),this.inRecursive=[]}prefix(e){let t=this.inRecursive[this.inRecursive.length-1];t&&(t.type===tZ.array&&(t.elements++,1!==t.elements&&e.push([44])),t.type===tZ.map&&(t.elements++,1!==t.elements&&(t.elements%2==1?e.push([44]):e.push([58]))))}[tZ.uint.major](e,t){this.prefix(e);let r=String(t.value),n=[];for(let i=0;i<r.length;i++)n[i]=r.charCodeAt(i);e.push(n)}[tZ.negint.major](e,t){this[tZ.uint.major](e,t)}[tZ.bytes.major](e,t){throw Error(`${rt} unsupported type: Uint8Array`)}[tZ.string.major](e,t){this.prefix(e);let r=t1(JSON.stringify(t.value));e.push(r.length>32?tX(r):r)}[tZ.array.major](e,t){this.prefix(e),this.inRecursive.push({type:tZ.array,elements:0}),e.push([91])}[tZ.map.major](e,t){this.prefix(e),this.inRecursive.push({type:tZ.map,elements:0}),e.push([123])}[tZ.tag.major](e,t){}[tZ.float.major](e,t){if("break"===t.type.name){let r=this.inRecursive.pop();if(r){if(r.type===tZ.array)e.push([93]);else if(r.type===tZ.map)e.push([125]);else throw Error("Unexpected recursive type; this should not happen!");return}throw Error("Unexpected break; this should not happen!")}if(void 0===t.value)throw Error(`${rt} unsupported type: undefined`);if(this.prefix(e),"true"===t.type.name){e.push([116,114,117,101]);return}if("false"===t.type.name){e.push([102,97,108,115,101]);return}if("null"===t.type.name){e.push([110,117,108,108]);return}let n=String(t.value),i=[],s=!1;for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a),s||46!==i[a]&&101!==i[a]&&69!==i[a]||(s=!0);s||(i.push(46),i.push(48)),e.push(i)}}let nm={addBreakTokens:!0,mapSorter:function(e,t){if(Array.isArray(e[0])||Array.isArray(t[0]))throw Error(`${rt} complex map keys are not supported`);let r=e[0],n=t[0];if(r.type!==tZ.string||n.type!==tZ.string)throw Error(`${rt} non-string map keys are not supported`);if(r<n)return -1;if(r>n)return 1;throw Error(`${rt} unexpected duplicate map keys, this is not supported`)}};class ng{constructor(e,t={}){this.pos=0,this.data=e,this.options=t,this.modeStack=["value"],this.lastToken=""}done(){return this.pos>=this.data.length}ch(){return this.data[this.pos]}currentMode(){return this.modeStack[this.modeStack.length-1]}skipWhitespace(){let e=this.ch();for(;32===e||9===e||13===e||10===e;)e=this.data[++this.pos]}expect(e){if(this.data.length-this.pos<e.length)throw Error(`${re} unexpected end of input at position ${this.pos}`);for(let t=0;t<e.length;t++)if(this.data[this.pos++]!==e[t])throw Error(`${re} unexpected token at position ${this.pos}, expected to find '${String.fromCharCode(...e)}'`)}parseNumber(){let e=this.pos,t=!1,r=!1,n=e=>{for(;!this.done();){let t=this.ch();if(e.includes(t))this.pos++;else break}};if(45===this.ch()&&(t=!0,this.pos++),48===this.ch()){if(this.pos++,46!==this.ch())return new tK(tZ.uint,0,this.pos-e);this.pos++,r=!0}if(n([48,49,50,51,52,53,54,55,56,57]),t&&this.pos===e+1)throw Error(`${re} unexpected token at position ${this.pos}`);if(!this.done()&&46===this.ch()){if(r)throw Error(`${re} unexpected token at position ${this.pos}`);r=!0,this.pos++,n([48,49,50,51,52,53,54,55,56,57])}this.done()||101!==this.ch()&&69!==this.ch()||(r=!0,this.pos++,!this.done()&&(43===this.ch()||45===this.ch())&&this.pos++,n([48,49,50,51,52,53,54,55,56,57]));let i=String.fromCharCode.apply(null,this.data.subarray(e,this.pos)),s=parseFloat(i);return r?new tK(tZ.float,s,this.pos-e):!0!==this.options.allowBigInt||Number.isSafeInteger(s)?new tK(s>=0?tZ.uint:tZ.negint,s,this.pos-e):new tK(s>=0?tZ.uint:tZ.negint,BigInt(i),this.pos-e)}parseString(){if(34!==this.ch())throw Error(`${re} unexpected character at position ${this.pos}; this shouldn't happen`);this.pos++;for(let e=this.pos,t=0;e<this.data.length&&t<65536;e++,t++){let r=this.data[e];if(92===r||r<32||r>=128)break;if(34===r){let n=String.fromCharCode.apply(null,this.data.subarray(this.pos,e));return this.pos=e+1,new tK(tZ.string,n,t)}}let i=this.pos,s=[],a=()=>{if(this.pos+4>=this.data.length)throw Error(`${re} unexpected end of unicode escape sequence at position ${this.pos}`);let e=0;for(let t=0;t<4;t++){let r=this.ch();if(r>=48&&r<=57)r-=48;else if(r>=97&&r<=102)r=r-97+10;else if(r>=65&&r<=70)r=r-65+10;else throw Error(`${re} unexpected unicode escape character at position ${this.pos}`);e=16*e+r,this.pos++}return e},o=()=>{let e,t,r,n;let i=this.ch(),a=null,o=i>239?4:i>223?3:i>191?2:1;if(this.pos+o>this.data.length)throw Error(`${re} unexpected unicode sequence at position ${this.pos}`);switch(o){case 1:i<128&&(a=i);break;case 2:(192&(e=this.data[this.pos+1]))==128&&(n=(31&i)<<6|63&e)>127&&(a=n);break;case 3:e=this.data[this.pos+1],t=this.data[this.pos+2],(192&e)==128&&(192&t)==128&&(n=(15&i)<<12|(63&e)<<6|63&t)>2047&&(n<55296||n>57343)&&(a=n);break;case 4:e=this.data[this.pos+1],t=this.data[this.pos+2],r=this.data[this.pos+3],(192&e)==128&&(192&t)==128&&(192&r)==128&&(n=(15&i)<<18|(63&e)<<12|(63&t)<<6|63&r)>65535&&n<1114112&&(a=n)}null===a?(a=65533,o=1):a>65535&&(a-=65536,s.push(a>>>10&1023|55296),a=56320|1023&a),s.push(a),this.pos+=o};for(;!this.done();){let l;let c=this.ch();switch(c){case 92:if(this.pos++,this.done())throw Error(`${re} unexpected string termination at position ${this.pos}`);switch(l=this.ch(),this.pos++,l){case 34:case 39:case 92:case 47:s.push(l);break;case 98:s.push(8);break;case 116:s.push(9);break;case 110:s.push(10);break;case 102:s.push(12);break;case 114:s.push(13);break;case 117:s.push(a());break;default:throw Error(`${re} unexpected string escape character at position ${this.pos}`)}break;case 34:return this.pos++,new tK(tZ.string,t9(s),this.pos-i);default:if(c<32)throw Error(`${re} invalid control character at position ${this.pos}`);c<128?(s.push(c),this.pos++):o()}}throw Error(`${re} unexpected end of string at position ${this.pos}`)}parseValue(){switch(this.ch()){case 123:return this.modeStack.push("obj-start"),this.pos++,new tK(tZ.map,1/0,1);case 91:return this.modeStack.push("array-start"),this.pos++,new tK(tZ.array,1/0,1);case 34:return this.parseString();case 110:return this.expect([110,117,108,108]),new tK(tZ.null,null,4);case 102:return this.expect([102,97,108,115,101]),new tK(tZ.false,!1,5);case 116:return this.expect([116,114,117,101]),new tK(tZ.true,!0,4);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.parseNumber();default:throw Error(`${re} unexpected character at position ${this.pos}`)}}next(){switch(this.skipWhitespace(),this.currentMode()){case"value":return this.modeStack.pop(),this.parseValue();case"array-value":if(this.modeStack.pop(),93===this.ch())return this.pos++,this.skipWhitespace(),new tK(tZ.break,void 0,1);if(44!==this.ch())throw Error(`${re} unexpected character at position ${this.pos}, was expecting array delimiter but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"array-start":if(this.modeStack.pop(),93===this.ch())return this.pos++,this.skipWhitespace(),new tK(tZ.break,void 0,1);return this.modeStack.push("array-value"),this.skipWhitespace(),this.parseValue();case"obj-key":if(125===this.ch())return this.modeStack.pop(),this.pos++,this.skipWhitespace(),new tK(tZ.break,void 0,1);if(44!==this.ch())throw Error(`${re} unexpected character at position ${this.pos}, was expecting object delimiter but found '${String.fromCharCode(this.ch())}'`);this.pos++,this.skipWhitespace();case"obj-start":{if(this.modeStack.pop(),125===this.ch())return this.pos++,this.skipWhitespace(),new tK(tZ.break,void 0,1);let e=this.parseString();if(this.skipWhitespace(),58!==this.ch())throw Error(`${re} unexpected character at position ${this.pos}, was expecting key/value delimiter ':' but found '${String.fromCharCode(this.ch())}'`);return this.pos++,this.modeStack.push("obj-value"),e}case"obj-value":return this.modeStack.pop(),this.modeStack.push("obj-key"),this.skipWhitespace(),this.parseValue();default:throw Error(`${re} unexpected parse state at position ${this.pos}; this shouldn't happen`)}}}function ny(e){let t=nu.encode(e).slice(1);return[new tK(tZ.map,1/0,1),new tK(tZ.string,"/",1),new tK(tZ.map,1/0,1),new tK(tZ.string,"bytes",5),new tK(tZ.string,t,t.length),new tK(tZ.break,void 0,1),new tK(tZ.break,void 0,1)]}let nv={typeEncoders:{Object:function(e){if(e.asCID!==e&&e["/"]!==e.bytes)return null;let t=tm.asCID(e);if(!t)return null;let r=t.toString();return[new tK(tZ.map,1/0,1),new tK(tZ.string,"/",1),new tK(tZ.string,r,r.length),new tK(tZ.break,void 0,1)]},Uint8Array:ny,Buffer:ny,undefined:function(){throw Error("`undefined` is not supported by the IPLD Data Model and cannot be encoded")},number:function(e){if(Number.isNaN(e))throw Error("`NaN` is not supported by the IPLD Data Model and cannot be encoded");if(e===1/0||e===-1/0)throw Error("`Infinity` and `-Infinity` is not supported by the IPLD Data Model and cannot be encoded");return null}}};class nb extends ng{constructor(e,t){super(e,t),this.tokenBuffer=[]}done(){return 0===this.tokenBuffer.length&&super.done()}_next(){return this.tokenBuffer.length>0?this.tokenBuffer.pop():super.next()}next(){let e=this._next();if(e.type===tZ.map){let t=this._next();if(t.type===tZ.string&&"/"===t.value){let r=this._next();if(r.type===tZ.string){let n=this._next();if(n.type!==tZ.break)throw Error("Invalid encoded CID form");return this.tokenBuffer.push(r),new tK(tZ.tag,42,0)}if(r.type===tZ.map){let i=this._next();if(i.type===tZ.string&&"bytes"===i.value){let s=this._next();if(s.type===tZ.string){for(let a=0;a<2;a++){let o=this._next();if(o.type!==tZ.break)throw Error("Invalid encoded Bytes form")}let l=nu.decode(`m${s.value}`);return new tK(tZ.bytes,l,s.value.length)}this.tokenBuffer.push(s)}this.tokenBuffer.push(i)}this.tokenBuffer.push(r)}this.tokenBuffer.push(t)}return e}}let nw={allowIndefinite:!1,allowUndefined:!1,allowNaN:!1,allowInfinity:!1,allowBigInt:!0,strict:!0,useMaps:!1,tags:[]};nw.tags[42]=tm.parse;let n_="dag-json",nx=297,nS=e=>{var t;return t=Object.assign({},nm,t=nv),r3(e,new nf,t)},nT=e=>{var t;let r=Object.assign(nw,{tokenizer:new nb(e,nw)});return t=r,t=Object.assign({tokenizer:new ng(e,t)},t),nt(e,t)},nE=e=>nC.decode(nS(e)),nC=new TextDecoder,nk=e=>nT(nR.encode(e)),nR=new TextEncoder;var nP=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),a=s.charCodeAt(0);if(255!==r[a])throw TypeError(s+" is ambiguous");r[a]=i}var o=e.length,l=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var n=0,i=0;e[t]===l;)n++,t++;for(var s=(e.length-t)*c+1>>>0,a=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var d=0,p=s-1;(0!==u||d<i)&&-1!==p;p--,d++)u+=o*a[p]>>>0,a[p]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var h=s-i;h!==s&&0===a[h];)h++;for(var f=new Uint8Array(n+(s-h)),m=n;h!==s;)f[m++]=a[h++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var a=(s-i)*u+1>>>0,c=new Uint8Array(a);i!==s;){for(var d=t[i],p=0,h=a-1;(0!==d||p<n)&&-1!==h;h--,p++)d+=256*c[h]>>>0,c[h]=d%o>>>0,d=d/o>>>0;if(0!==d)throw Error("Non-zero carry");n=p,i++}for(var f=a-n;f!==a&&0===c[f];)f++;for(var m=l.repeat(r);f<a;++f)m+=e.charAt(c[f]);return m},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw Error(`Non-${t} character`)}}};new Uint8Array(0);let nD=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},nA=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")};class nN{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class nL{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return nI(this,e)}}class nO{constructor(e){this.decoders=e}or(e){return nI(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let nI=(e,t)=>new nO({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class nM{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new nN(e,t,r),this.decoder=new nL(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let nj=({name:e,prefix:t,encode:r,decode:n})=>new nM(e,t,r,n),nF=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=nP(r,t);return nj({prefix:e,name:t,encode:n,decode:e=>nA(i(e))})},n$=(e,t,r,n)=>{let i={};for(let s=0;s<t.length;++s)i[t[s]]=s;let a=e.length;for(;"="===e[a-1];)--a;let o=new Uint8Array(a*r/8|0),l=0,c=0,u=0;for(let d=0;d<a;++d){let p=i[e[d]];if(void 0===p)throw SyntaxError(`Non-${n} character`);c=c<<r|p,(l+=r)>=8&&(l-=8,o[u++]=255&c>>l)}if(l>=r||255&c<<8-l)throw SyntaxError("Unexpected end of data");return o},nB=(e,t,r)=>{let n="="===t[t.length-1],i=(1<<r)-1,s="",a=0,o=0;for(let l=0;l<e.length;++l)for(o=o<<8|e[l],a+=8;a>r;)a-=r,s+=t[i&o>>a];if(a&&(s+=t[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s},nU=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>nj({prefix:t,name:e,encode:e=>nB(e,n,r),decode:t=>n$(t,n,r,e)});nU({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),nU({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6});let nq=nU({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6});function nz(e){return nq.encode(e).slice(1)}function nV(e){return nq.decode(`u${e}`)}function nH(e,t,r){t=t||[];for(var n=r=r||0;e>=2147483648;)t[r++]=255&e|128,e/=128;for(;-128&e;)t[r++]=255&e|128,e>>>=7;return t[r]=0|e,nH.bytes=r-n+1,t}function nW(e,t){var r,n=0,t=t||0,i=0,s=t,a=e.length;do{if(s>=a)throw nW.bytes=0,RangeError("Could not decode varint");r=e[s++],n+=i<28?(127&r)<<i:(127&r)*Math.pow(2,i),i+=7}while(r>=128);return nW.bytes=s-t,n}nU({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var nZ={encode:nH,decode:nW,encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let nK=(e,t=0)=>{let r=nZ.decode(e,t);return[r,nZ.decode.bytes]},nG=(e,t,r=0)=>(nZ.encode(e,t,r),t),nY=e=>nZ.encodingLength(e),nJ=(e,t)=>{let r=t.byteLength,n=nY(e),i=n+nY(r),s=new Uint8Array(i+r);return nG(e,s,0),nG(r,s,n),s.set(t,i),new n0(e,r,t,s)},nQ=e=>{let t=nA(e),[r,n]=nK(t),[i,s]=nK(t.subarray(n)),a=t.subarray(n+s);if(a.byteLength!==i)throw Error("Incorrect length");return new n0(r,i,a,t)},nX=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&nD(e.bytes,t.bytes);class n0{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}let n1=nF({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});nF({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});let n2=nU({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});nU({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),nU({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),nU({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),nU({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),nU({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),nU({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),nU({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),nU({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});let n5=(e,t)=>{let{bytes:r,version:n}=e;return 0===n?n9(r,n6(e),t||n1.encoder):n7(r,n6(e),t||n2.encoder)},n4=new WeakMap,n6=e=>{let t=n4.get(e);if(null==t){let r=new Map;return n4.set(e,r),r}return t};class n3{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==ie)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==it)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return n3.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=nJ(e,t);return n3.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return n3.equals(this,e)}static equals(e,t){return t&&e.code===t.code&&e.version===t.version&&nX(e.multihash,t.multihash)}toString(e){return n5(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;if(e instanceof n3)return e;if(null!=e["/"]&&e["/"]===e.bytes||e.asCID===e){let{version:t,code:r,multihash:n,bytes:i}=e;return new n3(t,r,n,i||ir(t,r,n.bytes))}if(!0!==e[ii])return null;{let{version:s,multihash:a,code:o}=e,l=nQ(a);return n3.create(s,o,l)}}static create(e,t,r){if("number"!=typeof t)throw Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw Error("Invalid digest");switch(e){case 0:if(t===ie)return new n3(e,t,r,r.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${ie}) block encoding`);case 1:{let n=ir(e,t,r.bytes);return new n3(e,t,r,n)}default:throw Error("Invalid version")}}static createV0(e){return n3.create(0,ie,e)}static createV1(e,t){return n3.create(1,e,t)}static decode(e){let[t,r]=n3.decodeFirst(e);if(r.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=n3.inspectBytes(e),r=t.size-t.multihashSize,n=nA(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw Error("Incorrect length");let i=n.subarray(t.multihashSize-t.digestSize),s=new n0(t.multihashCode,t.digestSize,i,n),a=0===t.version?n3.createV0(s):n3.createV1(t.codec,s);return[a,e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[r,n]=nK(e.subarray(t));return t+=n,r},n=r(),i=ie;if(18===n?(n=0,t=0):i=r(),0!==n&&1!==n)throw RangeError(`Invalid CID version ${n}`);let s=t,a=r(),o=r(),l=t+o;return{version:n,codec:i,multihashCode:a,digestSize:o,multihashSize:l-s,size:l}}static parse(e,t){let[r,n]=n8(e,t),i=n3.decode(n);return n6(i).set(r,e),i}}let n8=(e,t)=>{switch(e[0]){case"Q":return[n1.prefix,(t||n1).decode(`${n1.prefix}${e}`)];case n1.prefix:return[n1.prefix,(t||n1).decode(e)];case n2.prefix:return[n2.prefix,(t||n2).decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},n9=(e,t,r)=>{let{prefix:n}=r;if(n!==n1.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(null!=i)return i;{let s=r.encode(e).slice(1);return t.set(n,s),s}},n7=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(null!=i)return i;{let s=r.encode(e);return t.set(n,s),s}},ie=112,it=18,ir=(e,t,r)=>{let n=nY(e),i=n+nY(t),s=new Uint8Array(i+r.byteLength);return nG(e,s,0),nG(t,s,n),s.set(r,i),s},ii=Symbol.for("@ipld/js-cid/CID");function is(e){let t={signature:nV(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=nV(e.protected)),t}function ia(e){let t={signature:nz(e.signature)};return e.header&&(t.header=e.header),e.protected&&(t.protected=nz(e.protected)),t}function io(e){let t={};return e.encrypted_key&&(t.encrypted_key=nV(e.encrypted_key)),e.header&&(t.header=e.header),t}function il(e){let t={};return e.encrypted_key&&(t.encrypted_key=nz(e.encrypted_key)),e.header&&(t.header=e.header),t}let ic="dag-jose",iu=133;function id(e){return"payload"in e&&"string"==typeof e.payload&&"signatures"in e&&Array.isArray(e.signatures)}function ip(e){return"ciphertext"in e&&"string"==typeof e.ciphertext&&"iv"in e&&"string"==typeof e.iv&&"protected"in e&&"string"==typeof e.protected&&"tag"in e&&"string"==typeof e.tag}function ih(e){if("string"==typeof e){let t=e.split(".");if(3===t.length)return function(e){let[t,r,n]=e;return{payload:r,signatures:[{protected:t,signature:n}],link:n3.decode(nV(r))}}(t);if(5===t.length)return function(e){let[t,r,n,i,s]=e,a={ciphertext:i,iv:n,protected:t,tag:s};return r&&(a.recipients=[{encrypted_key:r}]),a}(t);throw Error("Not a valid JOSE string")}if(id(e)||ip(e))return e;throw Error("Not a valid unencoded JOSE object")}function im(e){let t;if("string"==typeof e&&(e=ih(e)),id(e))t=function(e){let t=nV(e.payload);try{n3.decode(t)}catch(r){throw Error("Not a valid DagJWS")}return{payload:t,signatures:e.signatures.map(is)}}(e);else if(ip(e))t=function(e){let t={ciphertext:nV(e.ciphertext),protected:nV(e.protected),iv:nV(e.iv),tag:nV(e.tag)};return e.aad&&(t.aad=nV(e.aad)),e.recipients&&(t.recipients=e.recipients.map(io)),e.unprotected&&(t.unprotected=e.unprotected),t}(e);else throw Error("Not a valid JOSE object");return new Uint8Array(na(t))}function ig(e){var t,r;let n;try{n=no(e)}catch(i){throw Error("Not a valid DAG-JOSE object")}if("payload"in(t=n)&&t.payload instanceof Uint8Array&&"signatures"in t&&Array.isArray(t.signatures))return function(e){let t={payload:nz(e.payload),signatures:e.signatures.map(ia)};return t.link=n3.decode(new Uint8Array(e.payload)),t}(n);if("ciphertext"in(r=n)&&r.ciphertext instanceof Uint8Array&&"iv"in r&&r.iv instanceof Uint8Array&&"protected"in r&&r.protected instanceof Uint8Array&&"tag"in r&&r.tag instanceof Uint8Array)return function(e){let t={ciphertext:nz(e.ciphertext),protected:nz(e.protected),iv:nz(e.iv),tag:nz(e.tag)};return e.aad&&(t.aad=nz(e.aad)),e.recipients&&(t.recipients=e.recipients.map(il)),e.unprotected&&(t.unprotected=e.unprotected),t}(n);throw Error("Not a valid DAG-JOSE object")}new Uint8Array(0);let iy=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},iv=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},ib=e=>new TextEncoder().encode(e),iw=e=>new TextDecoder().decode(e);function i_(e,t,r){t=t||[];for(var n=r=r||0;e>=2147483648;)t[r++]=255&e|128,e/=128;for(;-128&e;)t[r++]=255&e|128,e>>>=7;return t[r]=0|e,i_.bytes=r-n+1,t}function ix(e,t){var r,n=0,t=t||0,i=0,s=t,a=e.length;do{if(s>=a)throw ix.bytes=0,RangeError("Could not decode varint");r=e[s++],n+=i<28?(127&r)<<i:(127&r)*Math.pow(2,i),i+=7}while(r>=128);return ix.bytes=s-t,n}var iS={encode:i_,decode:ix,encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let iT=(e,t=0)=>{let r=iS.decode(e,t);return[r,iS.decode.bytes]},iE=(e,t,r=0)=>(iS.encode(e,t,r),t),iC=e=>iS.encodingLength(e),ik=(e,t)=>{let r=t.byteLength,n=iC(e),i=n+iC(r),s=new Uint8Array(i+r);return iE(e,s,0),iE(r,s,n),s.set(t,i),new iD(e,r,t,s)},iR=e=>{let t=iv(e),[r,n]=iT(t),[i,s]=iT(t.subarray(n)),a=t.subarray(n+s);if(a.byteLength!==i)throw Error("Incorrect length");return new iD(r,i,a,t)},iP=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&iy(e.bytes,t.bytes);class iD{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}let iA=e=>ik(0,iv(e)),iN={code:0,name:"identity",encode:iv,digest:iA};var iL=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),a=s.charCodeAt(0);if(255!==r[a])throw TypeError(s+" is ambiguous");r[a]=i}var o=e.length,l=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var n=0,i=0;e[t]===l;)n++,t++;for(var s=(e.length-t)*c+1>>>0,a=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var d=0,p=s-1;(0!==u||d<i)&&-1!==p;p--,d++)u+=o*a[p]>>>0,a[p]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var h=s-i;h!==s&&0===a[h];)h++;for(var f=new Uint8Array(n+(s-h)),m=n;h!==s;)f[m++]=a[h++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var a=(s-i)*u+1>>>0,c=new Uint8Array(a);i!==s;){for(var d=t[i],p=0,h=a-1;(0!==d||p<n)&&-1!==h;h--,p++)d+=256*c[h]>>>0,c[h]=d%o>>>0,d=d/o>>>0;if(0!==d)throw Error("Non-zero carry");n=p,i++}for(var f=a-n;f!==a&&0===c[f];)f++;for(var m=l.repeat(r);f<a;++f)m+=e.charAt(c[f]);return m},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw Error(`Non-${t} character`)}}};class iO{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class iI{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return ij(this,e)}}class iM{constructor(e){this.decoders=e}or(e){return ij(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let ij=(e,t)=>new iM({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class iF{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new iO(e,t,r),this.decoder=new iI(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let i$=({name:e,prefix:t,encode:r,decode:n})=>new iF(e,t,r,n),iB=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=iL(r,t);return i$({prefix:e,name:t,encode:n,decode:e=>iv(i(e))})},iU=(e,t,r,n)=>{let i={};for(let s=0;s<t.length;++s)i[t[s]]=s;let a=e.length;for(;"="===e[a-1];)--a;let o=new Uint8Array(a*r/8|0),l=0,c=0,u=0;for(let d=0;d<a;++d){let p=i[e[d]];if(void 0===p)throw SyntaxError(`Non-${n} character`);c=c<<r|p,(l+=r)>=8&&(l-=8,o[u++]=255&c>>l)}if(l>=r||255&c<<8-l)throw SyntaxError("Unexpected end of data");return o},iq=(e,t,r)=>{let n="="===t[t.length-1],i=(1<<r)-1,s="",a=0,o=0;for(let l=0;l<e.length;++l)for(o=o<<8|e[l],a+=8;a>r;)a-=r,s+=t[i&o>>a];if(a&&(s+=t[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s},iz=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>i$({prefix:t,name:e,encode:e=>iq(e,n,r),decode:t=>iU(t,n,r,e)}),iV=i$({prefix:"\0",name:"identity",encode:e=>iw(e),decode:e=>ib(e)}),iH=iz({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),iW=iz({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),iZ=iB({prefix:"9",name:"base10",alphabet:"0123456789"}),iK=iz({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),iG=iz({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),iY=iz({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),iJ=iz({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),iQ=iz({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),iX=iz({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),i0=iz({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),i1=iz({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),i2=iz({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),i5=iz({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),i4=iz({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),i6=iB({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),i3=iB({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),i8=iB({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),i9=iB({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),i7=iz({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),se=iz({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),st=iz({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),sr=iz({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),sn=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),si=sn.reduce((e,t,r)=>(e[r]=t,e),[]),ss=sn.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]),sa=i$({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=si[t],"")},decode:function(e){let t=[];for(let r of e){let n=ss[r.codePointAt(0)];if(void 0===n)throw Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}}),so=({name:e,code:t,encode:r})=>new sl(e,t,r);class sl{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?ik(this.code,t):t.then(e=>ik(this.code,e))}throw Error("Unknown type, must be binary type")}}let sc=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),su=so({name:"sha2-256",code:18,encode:sc("SHA-256")}),sd=so({name:"sha2-512",code:19,encode:sc("SHA-512")}),sp="raw",sh=85,sf=e=>iv(e),sm=e=>iv(e),sg=new TextEncoder,sy=new TextDecoder,sv="json",sb=512,sw=e=>sg.encode(JSON.stringify(e)),s_=e=>JSON.parse(sy.decode(e)),sx=(e,t)=>{let{bytes:r,version:n}=e;return 0===n?sk(r,sT(e),t||i8.encoder):sR(r,sT(e),t||iY.encoder)},sS=new WeakMap,sT=e=>{let t=sS.get(e);if(null==t){let r=new Map;return sS.set(e,r),r}return t};class sE{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==sP)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==sD)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return sE.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=ik(e,t);return sE.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return sE.equals(this,e)}static equals(e,t){return t&&e.code===t.code&&e.version===t.version&&iP(e.multihash,t.multihash)}toString(e){return sx(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;if(e instanceof sE)return e;if(null!=e["/"]&&e["/"]===e.bytes||e.asCID===e){let{version:t,code:r,multihash:n,bytes:i}=e;return new sE(t,r,n,i||sA(t,r,n.bytes))}if(!0!==e[sN])return null;{let{version:s,multihash:a,code:o}=e,l=iR(a);return sE.create(s,o,l)}}static create(e,t,r){if("number"!=typeof t)throw Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw Error("Invalid digest");switch(e){case 0:if(t===sP)return new sE(e,t,r,r.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${sP}) block encoding`);case 1:{let n=sA(e,t,r.bytes);return new sE(e,t,r,n)}default:throw Error("Invalid version")}}static createV0(e){return sE.create(0,sP,e)}static createV1(e,t){return sE.create(1,e,t)}static decode(e){let[t,r]=sE.decodeFirst(e);if(r.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=sE.inspectBytes(e),r=t.size-t.multihashSize,n=iv(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw Error("Incorrect length");let i=n.subarray(t.multihashSize-t.digestSize),s=new iD(t.multihashCode,t.digestSize,i,n),a=0===t.version?sE.createV0(s):sE.createV1(t.codec,s);return[a,e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[r,n]=iT(e.subarray(t));return t+=n,r},n=r(),i=sP;if(18===n?(n=0,t=0):i=r(),0!==n&&1!==n)throw RangeError(`Invalid CID version ${n}`);let s=t,a=r(),o=r(),l=t+o;return{version:n,codec:i,multihashCode:a,digestSize:o,multihashSize:l-s,size:l}}static parse(e,t){let[r,n]=sC(e,t),i=sE.decode(n);return sT(i).set(r,e),i}}let sC=(e,t)=>{switch(e[0]){case"Q":return[i8.prefix,(t||i8).decode(`${i8.prefix}${e}`)];case i8.prefix:return[i8.prefix,(t||i8).decode(e)];case iY.prefix:return[iY.prefix,(t||iY).decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},sk=(e,t,r)=>{let{prefix:n}=r;if(n!==i8.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(null!=i)return i;{let s=r.encode(e).slice(1);return t.set(n,s),s}},sR=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(null!=i)return i;{let s=r.encode(e);return t.set(n,s),s}},sP=112,sD=18,sA=(e,t,r)=>{let n=iC(e),i=n+iC(t),s=new Uint8Array(i+r.byteLength);return iE(e,s,0),iE(t,s,n),s.set(r,i),s},sN=Symbol.for("@ipld/js-cid/CID"),sL={...x,...S,...T,...E,...C,...k,...R,...P,...D,...A},sO={...N,..._},sI={raw:L,json:O},sM=new class{index=0;input="";new(e){return this.index=0,this.input=e,this}readAtomically(e){let t=this.index,r=e();return void 0===r&&(this.index=t),r}parseWith(e){let t=e();if(this.index===this.input.length)return t}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{let t=this.readChar();if(t===e)return t})}readSeparator(e,t,r){return this.readAtomically(()=>{if(!(t>0)||void 0!==this.readGivenChar(e))return r()})}readNumber(e,t,r,n){return this.readAtomically(()=>{let i=0,s=0,a=this.peekChar();if(void 0===a)return;let o=2**(8*n)-1;for(;;){let l=this.readAtomically(()=>{let t=this.readChar();if(void 0===t)return;let r=Number.parseInt(t,e);if(!Number.isNaN(r))return r});if(void 0===l)break;if(i*=e,(i+=l)>o||(s+=1,void 0!==t&&s>t))return}return 0===s?void 0:!r&&"0"===a&&s>1?void 0:i})}readIPv4Addr(){return this.readAtomically(()=>{let e=new Uint8Array(4);for(let t=0;t<e.length;t++){let r=this.readSeparator(".",t,()=>this.readNumber(10,3,!1,1));if(void 0===r)return;e[t]=r}return e})}readIPv6Addr(){let e=e=>{for(let t=0;t<e.length/2;t++){let r=2*t;if(t<e.length-3){let n=this.readSeparator(":",t,()=>this.readIPv4Addr());if(void 0!==n)return e[r]=n[0],e[r+1]=n[1],e[r+2]=n[2],e[r+3]=n[3],[r+4,!0]}let i=this.readSeparator(":",t,()=>this.readNumber(16,4,!0,2));if(void 0===i)return[r,!1];e[r]=i>>8,e[r+1]=255&i}return[e.length,!1]};return this.readAtomically(()=>{let t=new Uint8Array(16),[r,n]=e(t);if(16===r)return t;if(n||void 0===this.readGivenChar(":")||void 0===this.readGivenChar(":"))return;let i=new Uint8Array(14),[s]=e(i.subarray(0,16-(r+2)));return t.set(i.subarray(0,s),16-s),t})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}};function sj(e){return Boolean(function(e){if(!(e.length>15))return sM.new(e).parseWith(()=>sM.readIPv4Addr())}(e))}function sF(e){return Boolean(function(e){if(!(e.length>45))return sM.new(e).parseWith(()=>sM.readIPv6Addr())}(e))}function s$(e){return Boolean(function(e){if(!(e.length>45))return sM.new(e).parseWith(()=>sM.readIPAddr())}(e))}let sB=e3({prefix:"\0",name:"identity",encode:e=>eG(e),decode:e=>eK(e)}),sU=te({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),sq=te({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),sz=e8({prefix:"9",name:"base10",alphabet:"0123456789"}),sV=te({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),sH=te({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),sW=e8({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),sZ=e8({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),sK=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),sG=sK.reduce((e,t,r)=>(e[r]=t,e),[]),sY=sK.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]),sJ=e3({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=sG[t],"")},decode:function(e){let t=[];for(let r of e){let n=sY[r.codePointAt(0)];if(void 0===n)throw Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}}),sQ=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),sX=nl({name:"sha2-256",code:18,encode:sQ("SHA-256")}),s0=nl({name:"sha2-512",code:19,encode:sQ("SHA-512")}),s1=e=>eY(0,eZ(e)),s2={code:0,name:"identity",encode:eZ,digest:s1},s5="raw",s4=85,s6=e=>eZ(e),s3=e=>eZ(e),s8=new TextEncoder,s9=new TextDecoder,s7="json",ae=512,at=e=>s8.encode(JSON.stringify(e)),ar=e=>JSON.parse(s9.decode(e)),an={...I,...M,...j,...F,...$,...m,...B,...f,...v,...U};function ai(e){return null!=globalThis.Buffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e}function as(e=0){return globalThis.Buffer?.allocUnsafe!=null?ai(globalThis.Buffer.allocUnsafe(e)):new Uint8Array(e)}function aa(e,t,r,n){return{name:e,prefix:t,encoder:{name:e,prefix:t,encode:r},decoder:{decode:n}}}({...q,...z});let ao=aa("utf8","u",e=>{let t=new TextDecoder("utf8");return"u"+t.decode(e)},e=>{let t=new TextEncoder;return t.encode(e.substring(1))}),al=aa("ascii","a",e=>{let t="a";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e=>{e=e.substring(1);let t=as(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}),ac={utf8:ao,"utf-8":ao,hex:an.base16,latin1:al,ascii:al,binary:al,...an};function au(e,t="utf8"){let r=ac[t];if(null==r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?globalThis.Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("utf8"):r.encoder.encode(e).substring(1)}let ad=function(e){let t=0;if(sj(e=e.toString().trim())){let r=new Uint8Array(t+4);return e.split(/\./g).forEach(e=>{r[t++]=255&parseInt(e,10)}),r}if(sF(e)){let n;let i=e.split(":",8);for(n=0;n<i.length;n++){let s;let a=sj(i[n]);a&&(s=ad(i[n]),i[n]=au(s.slice(0,2),"base16")),null!=s&&++n<8&&i.splice(n,0,au(s.slice(2,4),"base16"))}if(""===i[0])for(;i.length<8;)i.unshift("0");else if(""===i[i.length-1])for(;i.length<8;)i.push("0");else if(i.length<8){for(n=0;n<i.length&&""!==i[n];n++);let o=[n,1];for(n=9-i.length;n>0;n--)o.push("0");i.splice.apply(i,o)}let l=new Uint8Array(t+16);for(n=0;n<i.length;n++){let c=parseInt(i[n],16);l[t++]=c>>8&255,l[t++]=255&c}return l}throw Error("invalid ip address")},ap=function(e,t=0,r){t=~~t,r=r??e.length-t;let n=new DataView(e.buffer);if(4===r){let i=[];for(let s=0;s<r;s++)i.push(e[t+s]);return i.join(".")}if(16===r){let a=[];for(let o=0;o<r;o+=2)a.push(n.getUint16(t+o).toString(16));return a.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},ah={},af={};function am(e){if("number"==typeof e){if(null!=af[e])return af[e];throw Error(`no protocol with code: ${e}`)}if("string"==typeof e){if(null!=ah[e])return ah[e];throw Error(`no protocol with name: ${e}`)}throw Error(`invalid protocol id type: ${typeof e}`)}function ag(e,t,r){t=t||[];for(var n=r=r||0;e>=2147483648;)t[r++]=255&e|128,e/=128;for(;-128&e;)t[r++]=255&e|128,e>>>=7;return t[r]=0|e,ag.bytes=r-n+1,t}function ay(e,t){var r,n=0,t=t||0,i=0,s=t,a=e.length;do{if(s>=a)throw ay.bytes=0,RangeError("Could not decode varint");r=e[s++],n+=i<28?(127&r)<<i:(127&r)*Math.pow(2,i),i+=7}while(r>=128);return ay.bytes=s-t,n}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[43,8,"ipcidr"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[281,0,"webrtc-w3c"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[448,0,"tls"],[449,-1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]].forEach(e=>{let t=function(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(i)}}(...e);af[t.code]=t,ah[t.name]=t});var av={encode:ag,decode:ay,encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let ab=(e,t=0)=>{let r=av.decode(e,t);return[r,av.decode.bytes]},aw=(e,t,r=0)=>(av.encode(e,t,r),t),a_=e=>av.encodingLength(e);new Uint8Array(0);let ax=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},aS=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},aT=e=>new TextEncoder().encode(e),aE=e=>new TextDecoder().decode(e),aC=(e,t)=>{let r=t.byteLength,n=a_(e),i=n+a_(r),s=new Uint8Array(i+r);return aw(e,s,0),aw(r,s,n),s.set(t,i),new aP(e,r,t,s)},ak=e=>{let t=aS(e),[r,n]=ab(t),[i,s]=ab(t.subarray(n)),a=t.subarray(n+s);if(a.byteLength!==i)throw Error("Incorrect length");return new aP(r,i,a,t)},aR=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&ax(e.bytes,t.bytes);class aP{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}var aD=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),a=s.charCodeAt(0);if(255!==r[a])throw TypeError(s+" is ambiguous");r[a]=i}var o=e.length,l=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var n=0,i=0;e[t]===l;)n++,t++;for(var s=(e.length-t)*c+1>>>0,a=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var d=0,p=s-1;(0!==u||d<i)&&-1!==p;p--,d++)u+=o*a[p]>>>0,a[p]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var h=s-i;h!==s&&0===a[h];)h++;for(var f=new Uint8Array(n+(s-h)),m=n;h!==s;)f[m++]=a[h++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var a=(s-i)*u+1>>>0,c=new Uint8Array(a);i!==s;){for(var d=t[i],p=0,h=a-1;(0!==d||p<n)&&-1!==h;h--,p++)d+=256*c[h]>>>0,c[h]=d%o>>>0,d=d/o>>>0;if(0!==d)throw Error("Non-zero carry");n=p,i++}for(var f=a-n;f!==a&&0===c[f];)f++;for(var m=l.repeat(r);f<a;++f)m+=e.charAt(c[f]);return m},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw Error(`Non-${t} character`)}}};class aA{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class aN{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return aO(this,e)}}class aL{constructor(e){this.decoders=e}or(e){return aO(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let aO=(e,t)=>new aL({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class aI{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new aA(e,t,r),this.decoder=new aN(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let aM=({name:e,prefix:t,encode:r,decode:n})=>new aI(e,t,r,n),aj=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=aD(r,t);return aM({prefix:e,name:t,encode:n,decode:e=>aS(i(e))})},aF=(e,t,r,n)=>{let i={};for(let s=0;s<t.length;++s)i[t[s]]=s;let a=e.length;for(;"="===e[a-1];)--a;let o=new Uint8Array(a*r/8|0),l=0,c=0,u=0;for(let d=0;d<a;++d){let p=i[e[d]];if(void 0===p)throw SyntaxError(`Non-${n} character`);c=c<<r|p,(l+=r)>=8&&(l-=8,o[u++]=255&c>>l)}if(l>=r||255&c<<8-l)throw SyntaxError("Unexpected end of data");return o},a$=(e,t,r)=>{let n="="===t[t.length-1],i=(1<<r)-1,s="",a=0,o=0;for(let l=0;l<e.length;++l)for(o=o<<8|e[l],a+=8;a>r;)a-=r,s+=t[i&o>>a];if(a&&(s+=t[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s},aB=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>aM({prefix:t,name:e,encode:e=>a$(e,n,r),decode:t=>aF(t,n,r,e)}),aU=aj({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),aq=aj({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),az=aB({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),aV=aB({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),aH=aB({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),aW=aB({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),aZ=aB({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),aK=aB({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),aG=aB({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),aY=aB({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),aJ=aB({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),aQ=(e,t)=>{let{bytes:r,version:n}=e;return 0===n?a5(r,a0(e),t||aU.encoder):a4(r,a0(e),t||az.encoder)},aX=new WeakMap,a0=e=>{let t=aX.get(e);if(null==t){let r=new Map;return aX.set(e,r),r}return t};class a1{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==a6)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==a3)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return a1.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=aC(e,t);return a1.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return a1.equals(this,e)}static equals(e,t){return t&&e.code===t.code&&e.version===t.version&&aR(e.multihash,t.multihash)}toString(e){return aQ(this,e)}toJSON(){return{"/":aQ(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;if(e instanceof a1)return e;if(null!=e["/"]&&e["/"]===e.bytes||e.asCID===e){let{version:t,code:r,multihash:n,bytes:i}=e;return new a1(t,r,n,i||a8(t,r,n.bytes))}if(!0!==e[a9])return null;{let{version:s,multihash:a,code:o}=e,l=ak(a);return a1.create(s,o,l)}}static create(e,t,r){if("number"!=typeof t)throw Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw Error("Invalid digest");switch(e){case 0:if(t===a6)return new a1(e,t,r,r.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${a6}) block encoding`);case 1:{let n=a8(e,t,r.bytes);return new a1(e,t,r,n)}default:throw Error("Invalid version")}}static createV0(e){return a1.create(0,a6,e)}static createV1(e,t){return a1.create(1,e,t)}static decode(e){let[t,r]=a1.decodeFirst(e);if(r.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=a1.inspectBytes(e),r=t.size-t.multihashSize,n=aS(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw Error("Incorrect length");let i=n.subarray(t.multihashSize-t.digestSize),s=new aP(t.multihashCode,t.digestSize,i,n),a=0===t.version?a1.createV0(s):a1.createV1(t.codec,s);return[a,e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[r,n]=ab(e.subarray(t));return t+=n,r},n=r(),i=a6;if(18===n?(n=0,t=0):i=r(),0!==n&&1!==n)throw RangeError(`Invalid CID version ${n}`);let s=t,a=r(),o=r(),l=t+o;return{version:n,codec:i,multihashCode:a,digestSize:o,multihashSize:l-s,size:l}}static parse(e,t){let[r,n]=a2(e,t),i=a1.decode(n);if(0===i.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return a0(i).set(r,e),i}}let a2=(e,t)=>{switch(e[0]){case"Q":return[aU.prefix,(t||aU).decode(`${aU.prefix}${e}`)];case aU.prefix:return[aU.prefix,(t||aU).decode(e)];case az.prefix:return[az.prefix,(t||az).decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},a5=(e,t,r)=>{let{prefix:n}=r;if(n!==aU.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(null!=i)return i;{let s=r.encode(e).slice(1);return t.set(n,s),s}},a4=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(null!=i)return i;{let s=r.encode(e);return t.set(n,s),s}},a6=112,a3=18,a8=(e,t,r)=>{let n=a_(e),i=n+a_(t),s=new Uint8Array(i+r.byteLength);return aw(e,s,0),aw(t,s,n),s.set(r,i),s},a9=Symbol.for("@ipld/js-cid/CID"),a7=aM({prefix:"\0",name:"identity",encode:e=>aE(e),decode:e=>aT(e)}),oe=aB({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),ot=aB({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),or=aj({prefix:"9",name:"base10",alphabet:"0123456789"}),on=aB({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),oi=aB({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),os=aj({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),oa=aj({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),oo=aB({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ol=aB({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),oc=aB({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),ou=aB({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),od=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),op=od.reduce((e,t,r)=>(e[r]=t,e),[]),oh=od.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]),of=aM({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=op[t],"")},decode:function(e){let t=[];for(let r of e){let n=oh[r.codePointAt(0)];if(void 0===n)throw Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}}),om=({name:e,code:t,encode:r})=>new og(e,t,r);class og{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?aC(this.code,t):t.then(e=>aC(this.code,e))}throw Error("Unknown type, must be binary type")}}let oy=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),ov=om({name:"sha2-256",code:18,encode:oy("SHA-256")}),ob=om({name:"sha2-512",code:19,encode:oy("SHA-512")}),ow=e=>aC(0,aS(e)),o_={code:0,name:"identity",encode:aS,digest:ow},ox="raw",oS=85,oT=e=>aS(e),oE=e=>aS(e),oC=new TextEncoder,ok=new TextDecoder,oR="json",oP=512,oD=e=>oC.encode(JSON.stringify(e)),oA=e=>JSON.parse(ok.decode(e)),oN={...K,...G,...Y,...J,...Q,...Z,...X,...W,...ee,...et};({...er,...en});var oL=r(94676);function oO(e,t="utf8"){let r=ac[t];if(null==r)throw Error(`Unsupported encoding "${t}"`);return("utf8"===t||"utf-8"===t)&&null!=globalThis.Buffer&&null!=globalThis.Buffer.from?ai(globalThis.Buffer.from(e,"utf-8")):r.decoder.decode(`${r.prefix}${e}`)}function oI(e,t){null==t&&(t=e.reduce((e,t)=>e+t.length,0));let r=as(t),n=0;for(let i of e)r.set(i,n),n+=i.length;return ai(r)}let oM=Object.values(oN).map(e=>e.decoder),oj=(n=oM[0].or(oM[1]),oM.slice(2).forEach(e=>n=n.or(e)),n);function oF(e){let t=new ArrayBuffer(2),r=new DataView(t);return r.setUint16(0,e),new Uint8Array(t)}function o$(e){let t=new DataView(e.buffer);return t.getUint16(e.byteOffset)}function oB(e){return e.map(e=>{let t=oK(e);return null!=e[1]?[t.code,function(e,t){let r=am(e);switch(r.code){case 4:case 41:return function(e){let t=ap(e,0,e.length);if(null==t)throw Error("ipBuff is required");if(!s$(t))throw Error("invalid ip address");return t}(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return function(e){let t=oL.decode(e);if((e=e.slice(oL.decode.bytes)).length!==t)throw Error("inconsistent lengths");return au(e)}(t);case 6:case 273:case 33:case 132:return o$(t).toString();case 421:return function(e){let t=oL.decode(e),r=e.slice(oL.decode.bytes);if(r.length!==t)throw Error("inconsistent lengths");return au(r,"base58btc")}(t);case 444:case 445:return function(e){let t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=au(t,"base32"),i=o$(r);return`${n}:${i}`}(t);case 466:return function(e){let t=oL.decode(e),r=e.slice(oL.decode.bytes);if(r.length!==t)throw Error("inconsistent lengths");return"u"+au(r,"base64url")}(t);default:return au(t,"base16")}}(t.code,e[1])]:[t.code]})}function oU(e){return oH(oI(e.map(e=>{let t=oK(e),r=Uint8Array.from(oL.encode(t.code));return e.length>1&&null!=e[1]&&(r=oI([r,e[1]])),r})))}function oq(e,t){if(e.size>0)return e.size/8;if(0===e.size)return 0;{let r=oL.decode(t);return r+(oL.decode.bytes??0)}}function oz(e){let t=[],r=0;for(;r<e.length;){let n=oL.decode(e,r),i=oL.decode.bytes??0,s=am(n),a=oq(s,e.slice(r+i));if(0===a){t.push([n]),r+=i;continue}let o=e.slice(r+i,r+i+a);if((r+=a+i)>e.length)throw oZ("Invalid address Uint8Array: "+au(e,"base16"));t.push([n,o])}return t}function oV(e){let t=oz(e),r=oB(t);return function(e){let t=[];return e.map(e=>{let r=oK(e);return t.push(r.name),e.length>1&&null!=e[1]&&t.push(e[1]),null}),oW(t.join("/"))}(r)}function oH(e){let t=function(e){try{oz(e)}catch(t){return t}}(e);if(null!=t)throw t;return Uint8Array.from(e)}function oW(e){return"/"+e.trim().split("/").filter(e=>e).join("/")}function oZ(e){return Error("Error parsing address: "+e)}function oK(e){let t=am(e[0]);return t}var oG=r(32114);function oY(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}var oJ=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},oQ=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};let oX=Symbol.for("nodejs.util.inspect.custom"),o0=[am("dns").code,am("dns4").code,am("dns6").code,am("dnsaddr").code],o1=new Map,o2=Symbol.for("@multiformats/js-multiaddr/multiaddr");function o5(e){return Boolean(e?.[o2])}class o4{constructor(e){if(a.set(this,void 0),o.set(this,void 0),l.set(this,void 0),this[c]=!0,null==e&&(e=""),e instanceof Uint8Array)this.bytes=oH(e);else if("string"==typeof e){if(e.length>0&&"/"!==e.charAt(0))throw Error(`multiaddr "${e}" must start with a "/"`);this.bytes=function(e){e=oW(e);let t=function(e){let t=[],r=e.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(let n=0;n<r.length;n++){let i=r[n],s=am(i);if(0===s.size){t.push([i]);continue}if(++n>=r.length)throw oZ("invalid address: "+e);if(!0===s.path){t.push([i,oW(r.slice(n).join("/"))]);break}t.push([i,r[n]])}return t}(e),r=t.map(e=>{Array.isArray(e)||(e=[e]);let t=oK(e);return e.length>1?[t.code,function(e,t){let r=am(e);switch(r.code){case 4:case 41:return function(e){if(!s$(e))throw Error("invalid ip address");return ad(e)}(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return function(e){let t=oO(e),r=Uint8Array.from(oL.encode(t.length));return oI([r,t],r.length+t.length)}(t);case 6:case 273:case 33:case 132:return oF(parseInt(t,10));case 421:return function(e){let t;t="Q"===e[0]||"1"===e[0]?ak(aU.decode(`z${e}`)).bytes:a1.parse(e).multihash.bytes;let r=Uint8Array.from(oL.encode(t.length));return oI([r,t],r.length+t.length)}(t);case 444:return function(e){let t=e.split(":");if(2!==t.length)throw Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(16!==t[0].length)throw Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=az.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw Error("Port number is not in range(1, 65536)");let i=oF(n);return oI([r,i],r.length+i.length)}(t);case 445:return function(e){let t=e.split(":");if(2!==t.length)throw Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(56!==t[0].length)throw Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=az.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw Error("Port number is not in range(1, 65536)");let i=oF(n);return oI([r,i],r.length+i.length)}(t);case 466:return function(e){let t=oj.decode(e),r=Uint8Array.from(oL.encode(t.length));return oI([r,t],r.length+t.length)}(t);default:return oO(t,"base16")}}(t.code,e[1])]:[t.code]});return oU(r)}(e)}else if(o5(e))this.bytes=oH(e.bytes);else throw Error("addr must be a string, Buffer, or another Multiaddr")}toString(){return null==oJ(this,a,"f")&&oQ(this,a,oV(this.bytes),"f"),oJ(this,a,"f")}toJSON(){return this.toString()}toOptions(){let e,t,r,n;let i="",s=am("tcp"),a=am("udp"),o=am("ip4"),l=am("ip6"),c=am("dns6"),u=am("ip6zone");for(let[d,p]of this.stringTuples())d===u.code&&(i=`%${p??""}`),o0.includes(d)&&(t=s.name,n=443,r=`${p??""}${i}`,e=d===c.code?6:4),(d===s.code||d===a.code)&&(t=am(d).name,n=parseInt(p??"")),(d===o.code||d===l.code)&&(t=am(d).name,r=`${p??""}${i}`,e=d===l.code?6:4);if(null==e||null==t||null==r||null==n)throw Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');let h={family:e,host:r,transport:t,port:n};return h}protos(){return this.protoCodes().map(e=>Object.assign({},am(e)))}protoCodes(){let e=[],t=this.bytes,r=0;for(;r<t.length;){let n=oL.decode(t,r),i=oL.decode.bytes??0,s=am(n),a=oq(s,t.slice(r+i));r+=a+i,e.push(n)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return null==oJ(this,o,"f")&&oQ(this,o,oz(this.bytes),"f"),oJ(this,o,"f")}stringTuples(){return null==oJ(this,l,"f")&&oQ(this,l,oB(this.tuples()),"f"),oJ(this,l,"f")}encapsulate(e){return e=new o4(e),new o4(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),r=this.toString(),n=r.lastIndexOf(t);if(n<0)throw Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new o4(r.slice(0,n))}decapsulateCode(e){let t=this.tuples();for(let r=t.length-1;r>=0;r--)if(t[r][0]===e)return new o4(oU(t.slice(0,r)));return this}getPeerId(){try{let e=this.stringTuples().filter(e=>e[0]===ah.ipfs.code),t=e.pop();if(t?.[1]!=null){let r=t[1];if("Q"===r[0]||"1"===r[0])return au(aU.decode(`z${r}`),"base58btc");return au(a1.parse(r).multihash.bytes,"base58btc")}return null}catch(n){return null}}getPath(){let e=null;try{e=this.stringTuples().filter(e=>{let t=am(e[0]);return!0===t.path})[0][1],null==e&&(e=null)}catch{e=null}return e}equals(e){return oY(this.bytes,e.bytes)}async resolve(e){let t=this.protos().find(e=>e.resolvable);if(null==t)return[this];let r=o1.get(t.name);if(null==r)throw oG(Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");let n=await r(this,e);return n.map(e=>new o4(e))}nodeAddress(){let e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let t=(e??this).protos();return 2===t.length&&(4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code)}[(a=new WeakMap,o=new WeakMap,l=new WeakMap,c=o2,oX)](){return`Multiaddr(${oV(this.bytes)})`}}function o6(e){return new o4(e)}var o3=r(106);let o8=/(-?(?:\d+\.?\d*|\d*\.?\d+)(?:e[-+]?\d+)?)\s*([\p{L}]*)/uig;function o9(e="",t="ms"){var r=null,n="-"===(e=(e+"").replace(/(\d)[,_](\d)/g,"$1$2"))[0];return e.replace(o8,function(e,t,n){(n=o7(n))&&(r=(r||0)+Math.abs(parseFloat(t,10))*n)}),r&&r/(o7(t)||1)*(n?-1:1)}function o7(e){return o9[e]||o9[e.toLowerCase().replace(/s$/,"")]}o9.nanosecond=o9.ns=1/1e6,o9["\xb5s"]=o9["s"]=o9.us=o9.microsecond=.001,o9.millisecond=o9.ms=o9[""]=1,o9.second=o9.sec=o9.s=1e3*o9.ms,o9.minute=o9.min=o9.m=60*o9.s,o9.hour=o9.hr=o9.h=60*o9.m,o9.day=o9.d=24*o9.h,o9.week=o9.wk=o9.w=7*o9.d,o9.month=o9.b=30.4375*o9.d,o9.year=o9.yr=o9.y=365.25*o9.d;var le=r(11227);function lt(e){let t=function(e){let t=()=>{};return t.enabled=!1,t.color="",t.diff=0,t.log=()=>{},t.namespace=e,t.destroy=()=>!0,t.extend=()=>t,t}(`${e}:trace`);return le.enabled(`${e}:trace`)&&null!=le.names.map(e=>e.toString()).find(e=>e.includes(":trace"))&&(t=le(`${e}:trace`)),Object.assign(le(e),{error:le(`${e}:error`),trace:t})}le.formatters.b=e=>null==e?"undefined":tt.baseEncode(e),le.formatters.t=e=>null==e?"undefined":tn.baseEncode(e),le.formatters.m=e=>null==e?"undefined":nu.baseEncode(e),le.formatters.p=e=>null==e?"undefined":e.toString(),le.formatters.c=e=>null==e?"undefined":e.toString(),le.formatters.k=e=>null==e?"undefined":e.toString(),le.formatters.a=e=>null==e?"undefined":e.toString();var lr=r(67137),ln=r(70942);let li=function(e){let t=0;if(sj(e=e.toString().trim())){let r=new Uint8Array(t+4);return e.split(/\./g).forEach(e=>{r[t++]=255&parseInt(e,10)}),r}if(sF(e)){let n;let i=e.split(":",8);for(n=0;n<i.length;n++){let s;let a=sj(i[n]);a&&(s=li(i[n]),i[n]=au(s.slice(0,2),"base16")),null!=s&&++n<8&&i.splice(n,0,au(s.slice(2,4),"base16"))}if(""===i[0])for(;i.length<8;)i.unshift("0");else if(""===i[i.length-1])for(;i.length<8;)i.push("0");else if(i.length<8){for(n=0;n<i.length&&""!==i[n];n++);let o=[n,1];for(n=9-i.length;n>0;n--)o.push("0");i.splice.apply(i,o)}let l=new Uint8Array(t+16);for(n=0;n<i.length;n++){let c=parseInt(i[n],16);l[t++]=c>>8&255,l[t++]=255&c}return l}throw Error("invalid ip address")},ls=function(e,t=0,r){t=~~t,r=r??e.length-t;let n=new DataView(e.buffer);if(4===r){let i=[];for(let s=0;s<r;s++)i.push(e[t+s]);return i.join(".")}if(16===r){let a=[];for(let o=0;o<r;o+=2)a.push(n.getUint16(t+o).toString(16));return a.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},la={},lo={};function ll(e){if("number"==typeof e){if(null!=lo[e])return lo[e];throw Error(`no protocol with code: ${e}`)}if("string"==typeof e){if(null!=la[e])return la[e];throw Error(`no protocol with name: ${e}`)}throw Error(`invalid protocol id type: ${typeof e}`)}function lc(e,t,r){t=t||[];for(var n=r=r||0;e>=2147483648;)t[r++]=255&e|128,e/=128;for(;-128&e;)t[r++]=255&e|128,e>>>=7;return t[r]=0|e,lc.bytes=r-n+1,t}function lu(e,t){var r,n=0,t=t||0,i=0,s=t,a=e.length;do{if(s>=a)throw lu.bytes=0,RangeError("Could not decode varint");r=e[s++],n+=i<28?(127&r)<<i:(127&r)*Math.pow(2,i),i+=7}while(r>=128);return lu.bytes=s-t,n}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[43,8,"ipcidr"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc"],[281,0,"webrtc-w3c"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[448,0,"tls"],[449,-1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]].forEach(e=>{let t=function(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(i)}}(...e);lo[t.code]=t,la[t.name]=t});var ld={encode:lc,decode:lu,encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let lp=(e,t=0)=>{let r=ld.decode(e,t);return[r,ld.decode.bytes]},lh=(e,t,r=0)=>(ld.encode(e,t,r),t),lf=e=>ld.encodingLength(e);new Uint8Array(0);let lm=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},lg=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},ly=e=>new TextEncoder().encode(e),lv=e=>new TextDecoder().decode(e),lb=(e,t)=>{let r=t.byteLength,n=lf(e),i=n+lf(r),s=new Uint8Array(i+r);return lh(e,s,0),lh(r,s,n),s.set(t,i),new lx(e,r,t,s)},lw=e=>{let t=lg(e),[r,n]=lp(t),[i,s]=lp(t.subarray(n)),a=t.subarray(n+s);if(a.byteLength!==i)throw Error("Incorrect length");return new lx(r,i,a,t)},l_=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&lm(e.bytes,t.bytes);class lx{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}var lS=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),a=s.charCodeAt(0);if(255!==r[a])throw TypeError(s+" is ambiguous");r[a]=i}var o=e.length,l=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var n=0,i=0;e[t]===l;)n++,t++;for(var s=(e.length-t)*c+1>>>0,a=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var d=0,p=s-1;(0!==u||d<i)&&-1!==p;p--,d++)u+=o*a[p]>>>0,a[p]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var h=s-i;h!==s&&0===a[h];)h++;for(var f=new Uint8Array(n+(s-h)),m=n;h!==s;)f[m++]=a[h++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var a=(s-i)*u+1>>>0,c=new Uint8Array(a);i!==s;){for(var d=t[i],p=0,h=a-1;(0!==d||p<n)&&-1!==h;h--,p++)d+=256*c[h]>>>0,c[h]=d%o>>>0,d=d/o>>>0;if(0!==d)throw Error("Non-zero carry");n=p,i++}for(var f=a-n;f!==a&&0===c[f];)f++;for(var m=l.repeat(r);f<a;++f)m+=e.charAt(c[f]);return m},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw Error(`Non-${t} character`)}}};class lT{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class lE{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return lk(this,e)}}class lC{constructor(e){this.decoders=e}or(e){return lk(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let lk=(e,t)=>new lC({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class lR{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new lT(e,t,r),this.decoder=new lE(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let lP=({name:e,prefix:t,encode:r,decode:n})=>new lR(e,t,r,n),lD=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=lS(r,t);return lP({prefix:e,name:t,encode:n,decode:e=>lg(i(e))})},lA=(e,t,r,n)=>{let i={};for(let s=0;s<t.length;++s)i[t[s]]=s;let a=e.length;for(;"="===e[a-1];)--a;let o=new Uint8Array(a*r/8|0),l=0,c=0,u=0;for(let d=0;d<a;++d){let p=i[e[d]];if(void 0===p)throw SyntaxError(`Non-${n} character`);c=c<<r|p,(l+=r)>=8&&(l-=8,o[u++]=255&c>>l)}if(l>=r||255&c<<8-l)throw SyntaxError("Unexpected end of data");return o},lN=(e,t,r)=>{let n="="===t[t.length-1],i=(1<<r)-1,s="",a=0,o=0;for(let l=0;l<e.length;++l)for(o=o<<8|e[l],a+=8;a>r;)a-=r,s+=t[i&o>>a];if(a&&(s+=t[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s},lL=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>lP({prefix:t,name:e,encode:e=>lN(e,n,r),decode:t=>lA(t,n,r,e)}),lO=lD({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),lI=lD({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),lM=lL({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),lj=lL({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),lF=lL({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),l$=lL({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),lB=lL({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),lU=lL({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),lq=lL({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),lz=lL({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),lV=lL({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),lH=(e,t)=>{let{bytes:r,version:n}=e;return 0===n?lY(r,lZ(e),t||lO.encoder):lJ(r,lZ(e),t||lM.encoder)},lW=new WeakMap,lZ=e=>{let t=lW.get(e);if(null==t){let r=new Map;return lW.set(e,r),r}return t};class lK{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==lQ)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==lX)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return lK.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=lb(e,t);return lK.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return lK.equals(this,e)}static equals(e,t){return t&&e.code===t.code&&e.version===t.version&&l_(e.multihash,t.multihash)}toString(e){return lH(this,e)}toJSON(){return{"/":lH(this)}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;if(e instanceof lK)return e;if(null!=e["/"]&&e["/"]===e.bytes||e.asCID===e){let{version:t,code:r,multihash:n,bytes:i}=e;return new lK(t,r,n,i||l0(t,r,n.bytes))}if(!0!==e[l1])return null;{let{version:s,multihash:a,code:o}=e,l=lw(a);return lK.create(s,o,l)}}static create(e,t,r){if("number"!=typeof t)throw Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw Error("Invalid digest");switch(e){case 0:if(t===lQ)return new lK(e,t,r,r.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${lQ}) block encoding`);case 1:{let n=l0(e,t,r.bytes);return new lK(e,t,r,n)}default:throw Error("Invalid version")}}static createV0(e){return lK.create(0,lQ,e)}static createV1(e,t){return lK.create(1,e,t)}static decode(e){let[t,r]=lK.decodeFirst(e);if(r.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=lK.inspectBytes(e),r=t.size-t.multihashSize,n=lg(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw Error("Incorrect length");let i=n.subarray(t.multihashSize-t.digestSize),s=new lx(t.multihashCode,t.digestSize,i,n),a=0===t.version?lK.createV0(s):lK.createV1(t.codec,s);return[a,e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[r,n]=lp(e.subarray(t));return t+=n,r},n=r(),i=lQ;if(18===n?(n=0,t=0):i=r(),0!==n&&1!==n)throw RangeError(`Invalid CID version ${n}`);let s=t,a=r(),o=r(),l=t+o;return{version:n,codec:i,multihashCode:a,digestSize:o,multihashSize:l-s,size:l}}static parse(e,t){let[r,n]=lG(e,t),i=lK.decode(n);if(0===i.version&&"Q"!==e[0])throw Error("Version 0 CID string must not include multibase prefix");return lZ(i).set(r,e),i}}let lG=(e,t)=>{switch(e[0]){case"Q":return[lO.prefix,(t||lO).decode(`${lO.prefix}${e}`)];case lO.prefix:return[lO.prefix,(t||lO).decode(e)];case lM.prefix:return[lM.prefix,(t||lM).decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},lY=(e,t,r)=>{let{prefix:n}=r;if(n!==lO.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(null!=i)return i;{let s=r.encode(e).slice(1);return t.set(n,s),s}},lJ=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(null!=i)return i;{let s=r.encode(e);return t.set(n,s),s}},lQ=112,lX=18,l0=(e,t,r)=>{let n=lf(e),i=n+lf(t),s=new Uint8Array(i+r.byteLength);return lh(e,s,0),lh(t,s,n),s.set(r,i),s},l1=Symbol.for("@ipld/js-cid/CID"),l2=lP({prefix:"\0",name:"identity",encode:e=>lv(e),decode:e=>ly(e)}),l5=lL({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),l4=lL({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),l6=lD({prefix:"9",name:"base10",alphabet:"0123456789"}),l3=lL({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),l8=lL({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),l9=lD({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),l7=lD({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),ce=lL({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),ct=lL({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),cr=lL({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),cn=lL({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),ci=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),cs=ci.reduce((e,t,r)=>(e[r]=t,e),[]),ca=ci.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]),co=lP({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=cs[t],"")},decode:function(e){let t=[];for(let r of e){let n=ca[r.codePointAt(0)];if(void 0===n)throw Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}}),cl=({name:e,code:t,encode:r})=>new cc(e,t,r);class cc{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?lb(this.code,t):t.then(e=>lb(this.code,e))}throw Error("Unknown type, must be binary type")}}let cu=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),cd=cl({name:"sha2-256",code:18,encode:cu("SHA-256")}),cp=cl({name:"sha2-512",code:19,encode:cu("SHA-512")}),ch=e=>lb(0,lg(e)),cf={code:0,name:"identity",encode:lg,digest:ch},cm="raw",cg=85,cy=e=>lg(e),cv=e=>lg(e),cb=new TextEncoder,cw=new TextDecoder,c_="json",cx=512,cS=e=>cb.encode(JSON.stringify(e)),cT=e=>JSON.parse(cw.decode(e)),cE={...el,...ec,...eu,...ed,...ep,...eo,...eh,...ea,...ef,...em};({...eg,...ey});let cC=Object.values(cE).map(e=>e.decoder),ck=(i=cC[0].or(cC[1]),cC.slice(2).forEach(e=>i=i.or(e)),i);function cR(e){let t=new ArrayBuffer(2),r=new DataView(t);return r.setUint16(0,e),new Uint8Array(t)}function cP(e){let t=new DataView(e.buffer);return t.getUint16(e.byteOffset)}function cD(e){return e.map(e=>{let t=cF(e);return null!=e[1]?[t.code,function(e,t){let r=ll(e);switch(r.code){case 4:case 41:return function(e){let t=ls(e,0,e.length);if(null==t)throw Error("ipBuff is required");if(!s$(t))throw Error("invalid ip address");return t}(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return function(e){let t=oL.decode(e);if((e=e.slice(oL.decode.bytes)).length!==t)throw Error("inconsistent lengths");return au(e)}(t);case 6:case 273:case 33:case 132:return cP(t).toString();case 421:return function(e){let t=oL.decode(e),r=e.slice(oL.decode.bytes);if(r.length!==t)throw Error("inconsistent lengths");return au(r,"base58btc")}(t);case 444:case 445:return function(e){let t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=au(t,"base32"),i=cP(r);return`${n}:${i}`}(t);case 466:return function(e){let t=oL.decode(e),r=e.slice(oL.decode.bytes);if(r.length!==t)throw Error("inconsistent lengths");return"u"+au(r,"base64url")}(t);default:return au(t,"base16")}}(t.code,e[1])]:[t.code]})}function cA(e){return cI(oI(e.map(e=>{let t=cF(e),r=Uint8Array.from(oL.encode(t.code));return e.length>1&&null!=e[1]&&(r=oI([r,e[1]])),r})))}function cN(e,t){if(e.size>0)return e.size/8;if(0===e.size)return 0;{let r=oL.decode(t);return r+(oL.decode.bytes??0)}}function cL(e){let t=[],r=0;for(;r<e.length;){let n=oL.decode(e,r),i=oL.decode.bytes??0,s=ll(n),a=cN(s,e.slice(r+i));if(0===a){t.push([n]),r+=i;continue}let o=e.slice(r+i,r+i+a);if((r+=a+i)>e.length)throw cj("Invalid address Uint8Array: "+au(e,"base16"));t.push([n,o])}return t}function cO(e){let t=cL(e),r=cD(t);return function(e){let t=[];return e.map(e=>{let r=cF(e);return t.push(r.name),e.length>1&&null!=e[1]&&t.push(e[1]),null}),cM(t.join("/"))}(r)}function cI(e){let t=function(e){try{cL(e)}catch(t){return t}}(e);if(null!=t)throw t;return Uint8Array.from(e)}function cM(e){return"/"+e.trim().split("/").filter(e=>e).join("/")}function cj(e){return Error("Error parsing address: "+e)}function cF(e){let t=ll(e[0]);return t}var c$=function(e,t,r,n){if("a"===r&&!n)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)},cB=function(e,t,r,n,i){if("m"===n)throw TypeError("Private method is not writable");if("a"===n&&!i)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?i.call(e,r):i?i.value=r:t.set(e,r),r};let cU=Symbol.for("nodejs.util.inspect.custom"),cq=[ll("dns").code,ll("dns4").code,ll("dns6").code,ll("dnsaddr").code],cz=new Map,cV=Symbol.for("@multiformats/js-multiaddr/multiaddr");class cH{constructor(e){if(u.set(this,void 0),d.set(this,void 0),p.set(this,void 0),this[h]=!0,null==e&&(e=""),e instanceof Uint8Array)this.bytes=cI(e);else if("string"==typeof e){if(e.length>0&&"/"!==e.charAt(0))throw Error(`multiaddr "${e}" must start with a "/"`);this.bytes=function(e){e=cM(e);let t=function(e){let t=[],r=e.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(let n=0;n<r.length;n++){let i=r[n],s=ll(i);if(0===s.size){t.push([i]);continue}if(++n>=r.length)throw cj("invalid address: "+e);if(!0===s.path){t.push([i,cM(r.slice(n).join("/"))]);break}t.push([i,r[n]])}return t}(e),r=t.map(e=>{Array.isArray(e)||(e=[e]);let t=cF(e);return e.length>1?[t.code,function(e,t){let r=ll(e);switch(r.code){case 4:case 41:return function(e){if(!s$(e))throw Error("invalid ip address");return li(e)}(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return function(e){let t=oO(e),r=Uint8Array.from(oL.encode(t.length));return oI([r,t],r.length+t.length)}(t);case 6:case 273:case 33:case 132:return cR(parseInt(t,10));case 421:return function(e){let t;t="Q"===e[0]||"1"===e[0]?lw(lO.decode(`z${e}`)).bytes:lK.parse(e).multihash.bytes;let r=Uint8Array.from(oL.encode(t.length));return oI([r,t],r.length+t.length)}(t);case 444:return function(e){let t=e.split(":");if(2!==t.length)throw Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(16!==t[0].length)throw Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=lM.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw Error("Port number is not in range(1, 65536)");let i=cR(n);return oI([r,i],r.length+i.length)}(t);case 445:return function(e){let t=e.split(":");if(2!==t.length)throw Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(56!==t[0].length)throw Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=lM.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw Error("Port number is not in range(1, 65536)");let i=cR(n);return oI([r,i],r.length+i.length)}(t);case 466:return function(e){let t=ck.decode(e),r=Uint8Array.from(oL.encode(t.length));return oI([r,t],r.length+t.length)}(t);default:return oO(t,"base16")}}(t.code,e[1])]:[t.code]});return cA(r)}(e)}else{var t;if(t=e,Boolean(t?.[cV]))this.bytes=cI(e.bytes);else throw Error("addr must be a string, Buffer, or another Multiaddr")}}toString(){return null==c$(this,u,"f")&&cB(this,u,cO(this.bytes),"f"),c$(this,u,"f")}toJSON(){return this.toString()}toOptions(){let e,t,r,n;let i="",s=ll("tcp"),a=ll("udp"),o=ll("ip4"),l=ll("ip6"),c=ll("dns6"),u=ll("ip6zone");for(let[d,p]of this.stringTuples())d===u.code&&(i=`%${p??""}`),cq.includes(d)&&(t=s.name,n=443,r=`${p??""}${i}`,e=d===c.code?6:4),(d===s.code||d===a.code)&&(t=ll(d).name,n=parseInt(p??"")),(d===o.code||d===l.code)&&(t=ll(d).name,r=`${p??""}${i}`,e=d===l.code?6:4);if(null==e||null==t||null==r||null==n)throw Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');let h={family:e,host:r,transport:t,port:n};return h}protos(){return this.protoCodes().map(e=>Object.assign({},ll(e)))}protoCodes(){let e=[],t=this.bytes,r=0;for(;r<t.length;){let n=oL.decode(t,r),i=oL.decode.bytes??0,s=ll(n),a=cN(s,t.slice(r+i));r+=a+i,e.push(n)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return null==c$(this,d,"f")&&cB(this,d,cL(this.bytes),"f"),c$(this,d,"f")}stringTuples(){return null==c$(this,p,"f")&&cB(this,p,cD(this.tuples()),"f"),c$(this,p,"f")}encapsulate(e){return e=new cH(e),new cH(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),r=this.toString(),n=r.lastIndexOf(t);if(n<0)throw Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new cH(r.slice(0,n))}decapsulateCode(e){let t=this.tuples();for(let r=t.length-1;r>=0;r--)if(t[r][0]===e)return new cH(cA(t.slice(0,r)));return this}getPeerId(){try{let e=this.stringTuples().filter(e=>e[0]===la.ipfs.code),t=e.pop();if(t?.[1]!=null){let r=t[1];if("Q"===r[0]||"1"===r[0])return au(lO.decode(`z${r}`),"base58btc");return au(lK.parse(r).multihash.bytes,"base58btc")}return null}catch(n){return null}}getPath(){let e=null;try{e=this.stringTuples().filter(e=>{let t=ll(e[0]);return!0===t.path})[0][1],null==e&&(e=null)}catch{e=null}return e}equals(e){return oY(this.bytes,e.bytes)}async resolve(e){let t=this.protos().find(e=>e.resolvable);if(null==t)return[this];let r=cz.get(t.name);if(null==r)throw oG(Error(`no available resolver for ${t.name}`),"ERR_NO_AVAILABLE_RESOLVER");let n=await r(this,e);return n.map(e=>new cH(e))}nodeAddress(){let e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let t=(e??this).protos();return 2===t.length&&(4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code)}[(u=new WeakMap,d=new WeakMap,p=new WeakMap,h=cV,cU)](){return`Multiaddr(${cO(this.bytes)})`}}class cW extends Error{code;props;constructor(e,t,r){super(e),this.code=t,this.name=r?.name??"CodeError",this.props=r??{}}}parseInt("0xFFFF",16),new Uint8Array([0,0,0,0,0,0,0,0,0,0,255,255]);let cZ=function(e){let t=0;if(sj(e=e.toString().trim())){let r=new Uint8Array(t+4);return e.split(/\./g).forEach(e=>{r[t++]=255&parseInt(e,10)}),r}if(sF(e)){let n;let i=e.split(":",8);for(n=0;n<i.length;n++){let s;let a=sj(i[n]);a&&(s=cZ(i[n]),i[n]=au(s.slice(0,2),"base16")),null!=s&&++n<8&&i.splice(n,0,au(s.slice(2,4),"base16"))}if(""===i[0])for(;i.length<8;)i.unshift("0");else if(""===i[i.length-1])for(;i.length<8;)i.push("0");else if(i.length<8){for(n=0;n<i.length&&""!==i[n];n++);let o=[n,1];for(n=9-i.length;n>0;n--)o.push("0");i.splice.apply(i,o)}let l=new Uint8Array(t+16);for(n=0;n<i.length;n++){let c=parseInt(i[n],16);l[t++]=c>>8&255,l[t++]=255&c}return l}throw Error("invalid ip address")},cK=function(e,t=0,r){t=~~t,r=r??e.length-t;let n=new DataView(e.buffer);if(4===r){let i=[];for(let s=0;s<r;s++)i.push(e[t+s]);return i.join(".")}if(16===r){let a=[];for(let o=0;o<r;o+=2)a.push(n.getUint16(t+o).toString(16));return a.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},cG={},cY={};function cJ(e){if("number"==typeof e){if(null!=cY[e])return cY[e];throw Error(`no protocol with code: ${e}`)}if("string"==typeof e){if(null!=cG[e])return cG[e];throw Error(`no protocol with name: ${e}`)}throw Error(`invalid protocol id type: ${typeof e}`)}[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,-1,"ip6zone"],[43,8,"ipcidr"],[53,-1,"dns",!0],[54,-1,"dns4",!0],[55,-1,"dns6",!0],[56,-1,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,-1,"unix",!1,!0],[421,-1,"ipfs"],[421,-1,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,-1,"garlic64"],[448,0,"tls"],[449,-1,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,-1,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[777,-1,"memory"]].forEach(e=>{let t=function(e,t,r,n,i){return{code:e,size:t,name:r,resolvable:Boolean(n),path:Boolean(i)}}(...e);cY[t.code]=t,cG[t.name]=t}),cJ("ip4"),cJ("ip6"),cJ("ipcidr");let cQ=Object.values(an).map(e=>e.decoder),cX=(s=cQ[0].or(cQ[1]),cQ.slice(2).forEach(e=>s=s.or(e)),s);function c0(e){let t=new ArrayBuffer(2),r=new DataView(t);return r.setUint16(0,e),new Uint8Array(t)}function c1(e){let t=new DataView(e.buffer);return t.getUint16(e.byteOffset)}function c2(e){return e.map(e=>{let t=ue(e);return null!=e[1]?[t.code,function(e,t){let r=cJ(e);switch(r.code){case 4:case 41:return function(e){let t=cK(e,0,e.length);if(null==t)throw Error("ipBuff is required");if(!s$(t))throw Error("invalid ip address");return t}(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return function(e){let t=oL.decode(e);if((e=e.slice(oL.decode.bytes)).length!==t)throw Error("inconsistent lengths");return au(e)}(t);case 6:case 273:case 33:case 132:return c1(t).toString();case 421:return function(e){let t=oL.decode(e),r=e.slice(oL.decode.bytes);if(r.length!==t)throw Error("inconsistent lengths");return au(r,"base58btc")}(t);case 444:case 445:return function(e){let t=e.slice(0,e.length-2),r=e.slice(e.length-2),n=au(t,"base32"),i=c1(r);return`${n}:${i}`}(t);case 466:return function(e){let t=oL.decode(e),r=e.slice(oL.decode.bytes);if(r.length!==t)throw Error("inconsistent lengths");return"u"+au(r,"base64url")}(t);default:return au(t,"base16")}}(t.code,e[1])]:[t.code]})}function c5(e){return c8(oI(e.map(e=>{let t=ue(e),r=Uint8Array.from(oL.encode(t.code));return e.length>1&&null!=e[1]&&(r=oI([r,e[1]])),r})))}function c4(e,t){if(e.size>0)return e.size/8;if(0===e.size)return 0;{let r=oL.decode(t);return r+(oL.decode.bytes??0)}}function c6(e){let t=[],r=0;for(;r<e.length;){let n=oL.decode(e,r),i=oL.decode.bytes??0,s=cJ(n),a=c4(s,e.slice(r+i));if(0===a){t.push([n]),r+=i;continue}let o=e.slice(r+i,r+i+a);if((r+=a+i)>e.length)throw c7("Invalid address Uint8Array: "+au(e,"base16"));t.push([n,o])}return t}function c3(e){let t=c6(e),r=c2(t);return function(e){let t=[];return e.map(e=>{let r=ue(e);return t.push(r.name),e.length>1&&null!=e[1]&&t.push(e[1]),null}),c9(t.join("/"))}(r)}function c8(e){let t=function(e){try{c6(e)}catch(t){return t}}(e);if(null!=t)throw t;return Uint8Array.from(e)}function c9(e){return"/"+e.trim().split("/").filter(e=>e).join("/")}function c7(e){return Error("Error parsing address: "+e)}function ue(e){let t=cJ(e[0]);return t}let ut=Symbol.for("nodejs.util.inspect.custom"),ur=[cJ("dns").code,cJ("dns4").code,cJ("dns6").code,cJ("dnsaddr").code],un=new Map,ui=Symbol.for("@multiformats/js-multiaddr/multiaddr");class us{bytes;#e;#t;#r;#n;[ui]=!0;constructor(e){if(null==e&&(e=""),e instanceof Uint8Array)this.bytes=c8(e);else if("string"==typeof e){if(e.length>0&&"/"!==e.charAt(0))throw Error(`multiaddr "${e}" must start with a "/"`);this.bytes=function(e){e=c9(e);let t=function(e){let t=[],r=e.split("/").slice(1);if(1===r.length&&""===r[0])return[];for(let n=0;n<r.length;n++){let i=r[n],s=cJ(i);if(0===s.size){t.push([i]);continue}if(++n>=r.length)throw c7("invalid address: "+e);if(!0===s.path){t.push([i,c9(r.slice(n).join("/"))]);break}t.push([i,r[n]])}return t}(e),r=t.map(e=>{Array.isArray(e)||(e=[e]);let t=ue(e);return e.length>1?[t.code,function(e,t){let r=cJ(e);switch(r.code){case 4:case 41:return function(e){if(!s$(e))throw Error("invalid ip address");return cZ(e)}(t);case 42:case 53:case 54:case 55:case 56:case 400:case 449:case 777:return function(e){let t=oO(e),r=Uint8Array.from(oL.encode(t.length));return oI([r,t],r.length+t.length)}(t);case 6:case 273:case 33:case 132:return c0(parseInt(t,10));case 421:return function(e){let t;t="Q"===e[0]||"1"===e[0]?eJ(tt.decode(`z${e}`)).bytes:tm.parse(e).multihash.bytes;let r=Uint8Array.from(oL.encode(t.length));return oI([r,t],r.length+t.length)}(t);case 444:return function(e){let t=e.split(":");if(2!==t.length)throw Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(16!==t[0].length)throw Error(`failed to parse onion addr: ${t[0]} not a Tor onion address.`);let r=tn.decode("b"+t[0]),n=parseInt(t[1],10);if(n<1||n>65536)throw Error("Port number is not in range(1, 65536)");let i=c0(n);return oI([r,i],r.length+i.length)}(t);case 445:return function(e){let t=e.split(":");if(2!==t.length)throw Error(`failed to parse onion addr: ["'${t.join('", "')}'"]' does not contain a port number`);if(56!==t[0].length)throw Error(`failed to parse onion addr: ${t[0]} not a Tor onion3 address.`);let r=tn.decode(`b${t[0]}`),n=parseInt(t[1],10);if(n<1||n>65536)throw Error("Port number is not in range(1, 65536)");let i=c0(n);return oI([r,i],r.length+i.length)}(t);case 466:return function(e){let t=cX.decode(e),r=Uint8Array.from(oL.encode(t.length));return oI([r,t],r.length+t.length)}(t);default:return oO(t,"base16")}}(t.code,e[1])]:[t.code]});return c5(r)}(e)}else{var t;if(t=e,Boolean(t?.[ui]))this.bytes=c8(e.bytes);else throw Error("addr must be a string, Buffer, or another Multiaddr")}}toString(){return null==this.#e&&(this.#e=c3(this.bytes)),this.#e}toJSON(){return this.toString()}toOptions(){let e,t,r,n;let i="",s=cJ("tcp"),a=cJ("udp"),o=cJ("ip4"),l=cJ("ip6"),c=cJ("dns6"),u=cJ("ip6zone");for(let[d,p]of this.stringTuples())d===u.code&&(i=`%${p??""}`),ur.includes(d)&&(t=s.name,n=443,r=`${p??""}${i}`,e=d===c.code?6:4),(d===s.code||d===a.code)&&(t=cJ(d).name,n=parseInt(p??"")),(d===o.code||d===l.code)&&(t=cJ(d).name,r=`${p??""}${i}`,e=d===l.code?6:4);if(null==e||null==t||null==r||null==n)throw Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');let h={family:e,host:r,transport:t,port:n};return h}protos(){return this.protoCodes().map(e=>Object.assign({},cJ(e)))}protoCodes(){let e=[],t=this.bytes,r=0;for(;r<t.length;){let n=oL.decode(t,r),i=oL.decode.bytes??0,s=cJ(n),a=c4(s,t.slice(r+i));r+=a+i,e.push(n)}return e}protoNames(){return this.protos().map(e=>e.name)}tuples(){return null==this.#t&&(this.#t=c6(this.bytes)),this.#t}stringTuples(){return null==this.#r&&(this.#r=c2(this.tuples())),this.#r}encapsulate(e){return e=new us(e),new us(this.toString()+e.toString())}decapsulate(e){let t=e.toString(),r=this.toString(),n=r.lastIndexOf(t);if(n<0)throw Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new us(r.slice(0,n))}decapsulateCode(e){let t=this.tuples();for(let r=t.length-1;r>=0;r--)if(t[r][0]===e)return new us(c5(t.slice(0,r)));return this}getPeerId(){try{let e=this.stringTuples().filter(e=>e[0]===cG.ipfs.code),t=e.pop();if(t?.[1]!=null){let r=t[1];if("Q"===r[0]||"1"===r[0])return au(tt.decode(`z${r}`),"base58btc");return au(tm.parse(r).multihash.bytes,"base58btc")}return null}catch(n){return null}}getPath(){if(void 0===this.#n)try{this.#n=this.stringTuples().filter(e=>{let t=cJ(e[0]);return!0===t.path})[0][1],null==this.#n&&(this.#n=null)}catch{this.#n=null}return this.#n}equals(e){return oY(this.bytes,e.bytes)}async resolve(e){let t=this.protos().find(e=>e.resolvable);if(null==t)return[this];let r=un.get(t.name);if(null==r)throw new cW(`no available resolver for ${t.name}`,"ERR_NO_AVAILABLE_RESOLVER");let n=await r(this,e);return n.map(e=>new us(e))}nodeAddress(){let e=this.toOptions();if("tcp"!==e.transport&&"udp"!==e.transport)throw Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){let t=(e??this).protos();return 2===t.length&&(4===t[0].code||41===t[0].code)&&(6===t[1].code||273===t[1].code)}[ut](){return`Multiaddr(${c3(this.bytes)})`}}function ua(e){let t;try{t=cJ("sni").code}catch(r){return null}for(let[n,i]of e)if(n===t&&void 0!==i)return i;return null}function uo(e){return e.some(([e,t])=>e===cJ("tls").code)}function ul(e,t,r){let n=uc[cJ(e).name];if(void 0===n)throw Error(`Can't interpret protocol ${cJ(e).name}`);let i=n(t,r);return e===cJ("ip6").code?`[${i}]`:i}let uc={ip4:(e,t)=>e,ip6:(e,t)=>0===t.length?e:`[${e}]`,tcp:(e,t)=>{let r=t.pop();if(void 0===r)throw Error("Unexpected end of multiaddr");return`tcp://${ul(r[0],r[1]??"",t)}:${e}`},udp:(e,t)=>{let r=t.pop();if(void 0===r)throw Error("Unexpected end of multiaddr");return`udp://${ul(r[0],r[1]??"",t)}:${e}`},dnsaddr:(e,t)=>e,dns4:(e,t)=>e,dns6:(e,t)=>e,dns:(e,t)=>e,ipfs:(e,t)=>{let r=t.pop();if(void 0===r)throw Error("Unexpected end of multiaddr");return`${ul(r[0],r[1]??"",t)}/ipfs/${e}`},p2p:(e,t)=>{let r=t.pop();if(void 0===r)throw Error("Unexpected end of multiaddr");return`${ul(r[0],r[1]??"",t)}/p2p/${e}`},http:(e,t)=>{let r=uo(t),n=ua(t);if(r&&null!==n)return`https://${n}`;let i=t.pop();if(void 0===i)throw Error("Unexpected end of multiaddr");let s=ul(i[0],i[1]??"",t);return`${r?"https://":"http://"}${s=s.replace("tcp://","")}`},tls:(e,t)=>{let r=t.pop();if(void 0===r)throw Error("Unexpected end of multiaddr");return ul(r[0],r[1]??"",t)},sni:(e,t)=>{let r=t.pop();if(void 0===r)throw Error("Unexpected end of multiaddr");return ul(r[0],r[1]??"",t)},https:(e,t)=>{let r=t.pop();if(void 0===r)throw Error("Unexpected end of multiaddr");let n=ul(r[0],r[1]??"",t);return`https://${n=n.replace("tcp://","")}`},ws:(e,t)=>{let r=uo(t),n=ua(t);if(r&&null!==n)return`wss://${n}`;let i=t.pop();if(void 0===i)throw Error("Unexpected end of multiaddr");let s=ul(i[0],i[1]??"",t);return`${r?"wss://":"ws://"}${s=s.replace("tcp://","")}`},wss:(e,t)=>{let r=t.pop();if(void 0===r)throw Error("Unexpected end of multiaddr");let n=ul(r[0],r[1]??"",t);return`wss://${n=n.replace("tcp://","")}`},"p2p-websocket-star":(e,t)=>{let r=t.pop();if(void 0===r)throw Error("Unexpected end of multiaddr");return`${ul(r[0],r[1]??"",t)}/p2p-websocket-star`},"p2p-webrtc-star":(e,t)=>{let r=t.pop();if(void 0===r)throw Error("Unexpected end of multiaddr");return`${ul(r[0],r[1]??"",t)}/p2p-webrtc-star`},"p2p-webrtc-direct":(e,t)=>{let r=t.pop();if(void 0===r)throw Error("Unexpected end of multiaddr");return`${ul(r[0],r[1]??"",t)}/p2p-webrtc-direct`}};function uu(e){try{var t;e=function(e,t){let r=new us(e),n=r.stringTuples(),i=n.pop();if(void 0===i)throw Error("Unexpected end of multiaddr");let s=cJ(i[0]),a=uc[s.name];if(null==a)throw Error(`No interpreter found for ${s.name}`);let o=a(i[1]??"",n);return i[0]===cJ("tcp").code&&(o=o.replace("tcp://","http://"),("443"===i[1]||"80"===i[1])&&("443"===i[1]&&(o=o.replace("http://","https://")),o=o.substring(0,o.lastIndexOf(":")))),o}((t=e,new cH(t)))}catch(r){}return e=e.toString()}var ud=()=>{};let up=lt("ipfs-http-client:lib:error-handler"),uh=ln.bind({ignoreUndefined:!0}),uf=o3.isBrowser||o3.isWebWorker?location.protocol:"http",um=o3.isBrowser||o3.isWebWorker?location.hostname:"localhost",ug=o3.isBrowser||o3.isWebWorker?location.port:"5001",uy=(e={})=>{let t,r;let n={};if("string"==typeof e||o5(e))t=new URL(uu(e));else if(e instanceof URL)t=e;else if("string"==typeof e.url||o5(e.url))t=new URL(uu(e.url)),n=e;else if(e.url instanceof URL)t=e.url,n=e;else{n=e||{};let i=(n.protocol||uf).replace(":",""),s=(n.host||um).split(":")[0],a=n.port||ug;t=new URL(`${i}://${s}:${a}`)}if(n.apiPath?t.pathname=n.apiPath:("/"===t.pathname||void 0===t.pathname)&&(t.pathname="api/v0"),o3.isNode){let o=ud(t);r=n.agent||new o({keepAlive:!0,maxSockets:6})}return{...n,host:t.host,protocol:t.protocol.replace(":",""),port:Number(t.port),apiPath:t.pathname,url:t,agent:r}},uv=async e=>{let t;try{if((e.headers.get("Content-Type")||"").startsWith("application/json")){let r=await e.json();up(r),t=r.Message||r.message}else t=await e.text()}catch(n){up("Failed to parse error response",n),t=n.message}let i=new lr.HTTPError(e);throw t&&(t.includes("deadline has elapsed")&&(i=new lr.TimeoutError),t&&t.includes("context deadline exceeded")&&(i=new lr.TimeoutError)),t&&t.includes("request timed out")&&(i=new lr.TimeoutError),t&&(i.message=t),i},ub=/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,uw=e=>e.replace(ub,function(e){return"-"+e.toLowerCase()}),u_=e=>"string"==typeof e?o9(e):e;class ux extends lr{constructor(e={}){let t=uy(e);super({timeout:u_(t.timeout||0)||void 0,headers:t.headers,base:`${t.url}`,handleError:uv,transformSearchParams:e=>{let t=new URLSearchParams;for(let[r,n]of e)"undefined"!==n&&"null"!==n&&"signal"!==r&&t.append(uw(r),n),"timeout"!==r||isNaN(n)||t.append(uw(r),n);return t},agent:t.agent}),delete this.get,delete this.put,delete this.delete,delete this.options;let r=this.fetch;this.fetch=(e,n={})=>("string"!=typeof e||e.startsWith("/")||(e=`${t.url}/${e}`),r.call(this,e,uh(n,{method:"POST"})))}}lr.HTTPError;let uS=e=>t=>e(new ux(t),t);function uT(e){return null==e?void 0:"string"==typeof e?e:e.toString(8).padStart(4,"0")}function uE(e){let t;if(null!=e){if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){let r=e.getTime(),n=Math.floor(r/1e3);t={secs:n,nsecs:(r-1e3*n)*1e3}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw oG(Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}}function uC({arg:e,searchParams:t,hashAlg:r,mtime:n,mode:i,...s}={}){t&&(s={...s,...t}),r&&(s.hash=r),null!=n&&(n=uE(n),s.mtime=n.secs,s.mtimeNsecs=n.nsecs),null!=i&&(s.mode=uT(i)),s.timeout&&!isNaN(s.timeout)&&(s.timeout=`${s.timeout}ms`),null==e?e=[]:Array.isArray(e)||(e=[e]);let a=new URLSearchParams(s);return e.forEach(e=>a.append("arg",e)),a}let uk=uS(e=>async function(t={}){let r=await (await e.post("bitswap/wantlist",{signal:t.signal,searchParams:uC(t),headers:t.headers})).json();return(r.Keys||[]).map(e=>sE.parse(e["/"]))}),uR=uS(e=>async function(t,r={}){let n=await (await e.post("bitswap/wantlist",{signal:r.signal,searchParams:uC({...r,peer:t.toString()}),headers:r.headers})).json();return(n.Keys||[]).map(e=>sE.parse(e["/"]))});function uP(e,t,r){t=t||[];for(var n=r=r||0;e>=2147483648;)t[r++]=255&e|128,e/=128;for(;-128&e;)t[r++]=255&e|128,e>>>=7;return t[r]=0|e,uP.bytes=r-n+1,t}function uD(e,t){var r,n=0,t=t||0,i=0,s=t,a=e.length;do{if(s>=a)throw uD.bytes=0,RangeError("Could not decode varint");r=e[s++],n+=i<28?(127&r)<<i:(127&r)*Math.pow(2,i),i+=7}while(r>=128);return uD.bytes=s-t,n}var uA={encode:uP,decode:uD,encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let uN=(e,t=0)=>{let r=uA.decode(e,t);return[r,uA.decode.bytes]},uL=(e,t,r=0)=>(uA.encode(e,t,r),t),uO=e=>uA.encodingLength(e);new Uint8Array(0);let uI=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},uM=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},uj=e=>new TextEncoder().encode(e),uF=e=>new TextDecoder().decode(e),u$=(e,t)=>{let r=t.byteLength,n=uO(e),i=n+uO(r),s=new Uint8Array(i+r);return uL(e,s,0),uL(r,s,n),s.set(t,i),new uq(e,r,t,s)},uB=e=>{let t=uM(e),[r,n]=uN(t),[i,s]=uN(t.subarray(n)),a=t.subarray(n+s);if(a.byteLength!==i)throw Error("Incorrect length");return new uq(r,i,a,t)},uU=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&uI(e.bytes,t.bytes);class uq{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}var uz=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),a=s.charCodeAt(0);if(255!==r[a])throw TypeError(s+" is ambiguous");r[a]=i}var o=e.length,l=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var n=0,i=0;e[t]===l;)n++,t++;for(var s=(e.length-t)*c+1>>>0,a=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var d=0,p=s-1;(0!==u||d<i)&&-1!==p;p--,d++)u+=o*a[p]>>>0,a[p]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var h=s-i;h!==s&&0===a[h];)h++;for(var f=new Uint8Array(n+(s-h)),m=n;h!==s;)f[m++]=a[h++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var a=(s-i)*u+1>>>0,c=new Uint8Array(a);i!==s;){for(var d=t[i],p=0,h=a-1;(0!==d||p<n)&&-1!==h;h--,p++)d+=256*c[h]>>>0,c[h]=d%o>>>0,d=d/o>>>0;if(0!==d)throw Error("Non-zero carry");n=p,i++}for(var f=a-n;f!==a&&0===c[f];)f++;for(var m=l.repeat(r);f<a;++f)m+=e.charAt(c[f]);return m},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw Error(`Non-${t} character`)}}};class uV{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class uH{constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return uZ(this,e)}}class uW{constructor(e){this.decoders=e}or(e){return uZ(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let uZ=(e,t)=>new uW({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class uK{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new uV(e,t,r),this.decoder=new uH(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let uG=({name:e,prefix:t,encode:r,decode:n})=>new uK(e,t,r,n),uY=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=uz(r,t);return uG({prefix:e,name:t,encode:n,decode:e=>uM(i(e))})},uJ=(e,t,r,n)=>{let i={};for(let s=0;s<t.length;++s)i[t[s]]=s;let a=e.length;for(;"="===e[a-1];)--a;let o=new Uint8Array(a*r/8|0),l=0,c=0,u=0;for(let d=0;d<a;++d){let p=i[e[d]];if(void 0===p)throw SyntaxError(`Non-${n} character`);c=c<<r|p,(l+=r)>=8&&(l-=8,o[u++]=255&c>>l)}if(l>=r||255&c<<8-l)throw SyntaxError("Unexpected end of data");return o},uQ=(e,t,r)=>{let n="="===t[t.length-1],i=(1<<r)-1,s="",a=0,o=0;for(let l=0;l<e.length;++l)for(o=o<<8|e[l],a+=8;a>r;)a-=r,s+=t[i&o>>a];if(a&&(s+=t[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s},uX=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>uG({prefix:t,name:e,encode:e=>uQ(e,n,r),decode:t=>uJ(t,n,r,e)}),u0=uY({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),u1=uY({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),u2=uX({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),u5=uX({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),u4=uX({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),u6=uX({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),u3=uX({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),u8=uX({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),u9=uX({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),u7=uX({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),de=uX({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),dt=(e,t)=>{let{bytes:r,version:n}=e;return 0===n?da(r,dn(e),t||u0.encoder):dl(r,dn(e),t||u2.encoder)},dr=new WeakMap,dn=e=>{let t=dr.get(e);if(null==t){let r=new Map;return dr.set(e,r),r}return t};class di{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==dc)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==du)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return di.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=u$(e,t);return di.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return di.equals(this,e)}static equals(e,t){return t&&e.code===t.code&&e.version===t.version&&uU(e.multihash,t.multihash)}toString(e){return dt(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;if(e instanceof di)return e;if(null!=e["/"]&&e["/"]===e.bytes||e.asCID===e){let{version:t,code:r,multihash:n,bytes:i}=e;return new di(t,r,n,i||dd(t,r,n.bytes))}if(!0!==e[dp])return null;{let{version:s,multihash:a,code:o}=e,l=uB(a);return di.create(s,o,l)}}static create(e,t,r){if("number"!=typeof t)throw Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw Error("Invalid digest");switch(e){case 0:if(t===dc)return new di(e,t,r,r.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${dc}) block encoding`);case 1:{let n=dd(e,t,r.bytes);return new di(e,t,r,n)}default:throw Error("Invalid version")}}static createV0(e){return di.create(0,dc,e)}static createV1(e,t){return di.create(1,e,t)}static decode(e){let[t,r]=di.decodeFirst(e);if(r.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=di.inspectBytes(e),r=t.size-t.multihashSize,n=uM(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw Error("Incorrect length");let i=n.subarray(t.multihashSize-t.digestSize),s=new uq(t.multihashCode,t.digestSize,i,n),a=0===t.version?di.createV0(s):di.createV1(t.codec,s);return[a,e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[r,n]=uN(e.subarray(t));return t+=n,r},n=r(),i=dc;if(18===n?(n=0,t=0):i=r(),0!==n&&1!==n)throw RangeError(`Invalid CID version ${n}`);let s=t,a=r(),o=r(),l=t+o;return{version:n,codec:i,multihashCode:a,digestSize:o,multihashSize:l-s,size:l}}static parse(e,t){let[r,n]=ds(e,t),i=di.decode(n);return dn(i).set(r,e),i}}let ds=(e,t)=>{switch(e[0]){case"Q":return[u0.prefix,(t||u0).decode(`${u0.prefix}${e}`)];case u0.prefix:return[u0.prefix,(t||u0).decode(e)];case u2.prefix:return[u2.prefix,(t||u2).decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},da=(e,t,r)=>{let{prefix:n}=r;if(n!==u0.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(null!=i)return i;{let s=r.encode(e).slice(1);return t.set(n,s),s}},dl=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(null!=i)return i;{let s=r.encode(e);return t.set(n,s),s}},dc=112,du=18,dd=(e,t,r)=>{let n=uO(e),i=n+uO(t),s=new Uint8Array(i+r.byteLength);return uL(e,s,0),uL(t,s,n),s.set(r,i),s},dp=Symbol.for("@ipld/js-cid/CID"),dh=uG({prefix:"\0",name:"identity",encode:e=>uF(e),decode:e=>uj(e)}),df=uX({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),dm=uX({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),dg=uY({prefix:"9",name:"base10",alphabet:"0123456789"}),dy=uX({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),dv=uX({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),db=uY({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),dw=uY({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),d_=uX({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),dx=uX({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),dS=uX({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),dT=uX({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),dE=Array.from("\uD83D\uDE80\uD83E\uDE90\uD83D\uDEF0\uD83C\uDF0C\uD83C\uDF11\uD83C\uDF12\uD83C\uDF13\uD83C\uDF14\uD83C\uDF15\uD83C\uDF16\uD83C\uDF17\uD83C\uDF18\uD83C\uDF0D\uD83C\uDF0F\uD83C\uDF0E\uD83D\uDC09\uD83D\uDCBB\uD83D\uDDA5\uD83D\uDCBE\uD83D\uDCBF\uD83D\uDE02\uD83D\uDE0D\uD83E\uDD23\uD83D\uDE0A\uD83D\uDE4F\uD83D\uDC95\uD83D\uDE2D\uD83D\uDE18\uD83D\uDC4D\uD83D\uDE05\uD83D\uDC4F\uD83D\uDE01\uD83D\uDD25\uD83E\uDD70\uD83D\uDC94\uD83D\uDC96\uD83D\uDC99\uD83D\uDE22\uD83E\uDD14\uD83D\uDE06\uD83D\uDE44\uD83D\uDCAA\uD83D\uDE09\uD83D\uDC4C\uD83E\uDD17\uD83D\uDC9C\uD83D\uDE14\uD83D\uDE0E\uD83D\uDE07\uD83C\uDF39\uD83E\uDD26\uD83C\uDF89\uD83D\uDC9E\uD83E\uDD37\uD83D\uDE31\uD83D\uDE0C\uD83C\uDF38\uD83D\uDE4C\uD83D\uDE0B\uD83D\uDC97\uD83D\uDC9A\uD83D\uDE0F\uD83D\uDC9B\uD83D\uDE42\uD83D\uDC93\uD83E\uDD29\uD83D\uDE04\uD83D\uDE00\uD83D\uDDA4\uD83D\uDE03\uD83D\uDCAF\uD83D\uDE48\uD83D\uDC47\uD83C\uDFB6\uD83D\uDE12\uD83E\uDD2D\uD83D\uDE1C\uD83D\uDC8B\uD83D\uDC40\uD83D\uDE2A\uD83D\uDE11\uD83D\uDCA5\uD83D\uDE4B\uD83D\uDE1E\uD83D\uDE29\uD83D\uDE21\uD83E\uDD2A\uD83D\uDC4A\uD83E\uDD73\uD83D\uDE25\uD83E\uDD24\uD83D\uDC49\uD83D\uDC83\uD83D\uDE33\uD83D\uDE1A\uD83D\uDE1D\uD83D\uDE34\uD83C\uDF1F\uD83D\uDE2C\uD83D\uDE43\uD83C\uDF40\uD83C\uDF37\uD83D\uDE3B\uD83D\uDE13\uD83E\uDD7A\uD83C\uDF08\uD83D\uDE08\uD83E\uDD18\uD83D\uDCA6\uD83D\uDE23\uD83C\uDFC3\uD83D\uDC90\uD83C\uDF8A\uD83D\uDC98\uD83D\uDE20\uD83D\uDE15\uD83C\uDF3A\uD83C\uDF82\uD83C\uDF3B\uD83D\uDE10\uD83D\uDD95\uD83D\uDC9D\uD83D\uDE4A\uD83D\uDE39\uD83D\uDDE3\uD83D\uDCAB\uD83D\uDC80\uD83D\uDC51\uD83C\uDFB5\uD83E\uDD1E\uD83D\uDE1B\uD83D\uDD34\uD83D\uDE24\uD83C\uDF3C\uD83D\uDE2B\uD83E\uDD19\uD83C\uDFC6\uD83E\uDD2B\uD83D\uDC48\uD83D\uDE2E\uD83D\uDE46\uD83C\uDF7B\uD83C\uDF43\uD83D\uDC36\uD83D\uDC81\uD83D\uDE32\uD83C\uDF3F\uD83E\uDDE1\uD83C\uDF81\uD83C\uDF1E\uD83C\uDF88\uD83D\uDC4B\uD83D\uDE30\uD83E\uDD28\uD83D\uDE36\uD83E\uDD1D\uD83D\uDEB6\uD83D\uDCB0\uD83C\uDF53\uD83D\uDCA2\uD83E\uDD1F\uD83D\uDE41\uD83D\uDEA8\uD83D\uDCA8\uD83E\uDD2C\uD83C\uDF80\uD83C\uDF7A\uD83E\uDD13\uD83D\uDE19\uD83D\uDC9F\uD83C\uDF31\uD83D\uDE16\uD83D\uDC76\uD83E\uDD74\uD83D\uDC8E\uD83D\uDCB8\uD83D\uDE28\uD83C\uDF1A\uD83E\uDD8B\uD83D\uDE37\uD83D\uDD7A\uD83D\uDE45\uD83D\uDE1F\uD83D\uDE35\uD83D\uDC4E\uD83E\uDD32\uD83E\uDD20\uD83E\uDD27\uD83D\uDCCC\uD83D\uDD35\uD83D\uDC85\uD83E\uDDD0\uD83D\uDC3E\uD83C\uDF52\uD83D\uDE17\uD83E\uDD11\uD83C\uDF0A\uD83E\uDD2F\uD83D\uDC37\uD83D\uDCA7\uD83D\uDE2F\uD83D\uDC86\uD83D\uDC46\uD83C\uDFA4\uD83D\uDE47\uD83C\uDF51\uD83C\uDF34\uD83D\uDCA3\uD83D\uDC38\uD83D\uDC8C\uD83D\uDCCD\uD83E\uDD40\uD83E\uDD22\uD83D\uDC45\uD83D\uDCA1\uD83D\uDCA9\uD83D\uDC50\uD83D\uDCF8\uD83D\uDC7B\uD83E\uDD10\uD83E\uDD2E\uD83C\uDFBC\uD83E\uDD75\uD83D\uDEA9\uD83C\uDF4E\uD83C\uDF4A\uD83D\uDC7C\uD83D\uDC8D\uD83D\uDCE3\uD83E\uDD42"),dC=dE.reduce((e,t,r)=>(e[r]=t,e),[]),dk=dE.reduce((e,t,r)=>(e[t.codePointAt(0)]=r,e),[]),dR=uG({prefix:"\uD83D\uDE80",name:"base256emoji",encode:function(e){return e.reduce((e,t)=>e+=dC[t],"")},decode:function(e){let t=[];for(let r of e){let n=dk[r.codePointAt(0)];if(void 0===n)throw Error(`Non-base256emoji character: ${r}`);t.push(n)}return new Uint8Array(t)}}),dP=({name:e,code:t,encode:r})=>new dD(e,t,r);class dD{constructor(e,t,r){this.name=e,this.code=t,this.encode=r}digest(e){if(e instanceof Uint8Array){let t=this.encode(e);return t instanceof Uint8Array?u$(this.code,t):t.then(e=>u$(this.code,e))}throw Error("Unknown type, must be binary type")}}let dA=e=>async t=>new Uint8Array(await crypto.subtle.digest(e,t)),dN=dP({name:"sha2-256",code:18,encode:dA("SHA-256")}),dL=dP({name:"sha2-512",code:19,encode:dA("SHA-512")}),dO=e=>u$(0,uM(e)),dI={code:0,name:"identity",encode:uM,digest:dO},dM="raw",dj=85,dF=e=>uM(e),d$=e=>uM(e),dB=new TextEncoder,dU=new TextDecoder,dq="json",dz=512,dV=e=>dB.encode(JSON.stringify(e)),dH=e=>JSON.parse(dU.decode(e)),dW={...ex,...eS,...eT,...eE,...eC,...e_,...ek,...ew,...eR,...eP};({...eD,...eA});let dZ=Symbol.for("@libp2p/peer-id"),dK=Symbol.for("nodejs.util.inspect.custom"),dG=Object.values(dW).map(e=>e.decoder).reduce((e,t)=>e.or(t),dW.identity.decoder);class dY{constructor(e){this.type=e.type,this.multihash=e.multihash,this.privateKey=e.privateKey,Object.defineProperty(this,"string",{enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return`PeerId(${this.toString()})`}get[dZ](){return!0}toString(){return null==this.string&&(this.string=u0.encode(this.multihash.bytes).slice(1)),this.string}toCID(){return di.createV1(114,this.multihash)}toBytes(){return this.multihash.bytes}toJSON(){return this.toString()}equals(e){if(e instanceof Uint8Array)return oY(this.multihash.bytes,e);if("string"==typeof e)return d0(e).equals(this);if(e?.multihash?.bytes!=null)return oY(this.multihash.bytes,e.multihash.bytes);throw Error("not valid Id")}[dK](){return`PeerId(${this.toString()})`}}class dJ extends dY{constructor(e){super({...e,type:"RSA"}),this.type="RSA",this.publicKey=e.publicKey}}class dQ extends dY{constructor(e){super({...e,type:"Ed25519"}),this.type="Ed25519",this.publicKey=e.multihash.digest}}class dX extends dY{constructor(e){super({...e,type:"secp256k1"}),this.type="secp256k1",this.publicKey=e.multihash.digest}}function d0(e,t){if(t=t??dG,"1"===e.charAt(0)||"Q"===e.charAt(0)){let r=uB(u0.decode(`z${e}`));return e.startsWith("12D")?new dQ({multihash:r}):e.startsWith("16U")?new dX({multihash:r}):new dJ({multihash:r})}return function(e){try{let t=uB(e);if(t.code===dI.code){if(36===t.digest.length)return new dQ({multihash:t});if(37===t.digest.length)return new dX({multihash:t})}if(t.code===dN.code)return new dJ({multihash:t})}catch{return function(e){if(null==e||null==e.multihash||null==e.version||1===e.version&&114!==e.code)throw Error("Supplied PeerID CID is invalid");let t=e.multihash;if(t.code===dN.code)return new dJ({multihash:e.multihash});if(t.code===dI.code){if(36===t.digest.length)return new dQ({multihash:e.multihash});if(37===t.digest.length)return new dX({multihash:e.multihash})}throw Error("Supplied PeerID CID is invalid")}(di.decode(e))}throw Error("Supplied PeerID CID is invalid")}(dG.decode(e))}let d1=uS(e=>async function(t={}){var r;let n=await e.post("bitswap/stat",{searchParams:uC(t),signal:t.signal,headers:t.headers});return{provideBufLen:(r=await n.json()).ProvideBufLen,wantlist:(r.Wantlist||[]).map(e=>sE.parse(e["/"])),peers:(r.Peers||[]).map(e=>d0(e)),blocksReceived:BigInt(r.BlocksReceived),dataReceived:BigInt(r.DataReceived),blocksSent:BigInt(r.BlocksSent),dataSent:BigInt(r.DataSent),dupBlksReceived:BigInt(r.DupBlksReceived),dupDataReceived:BigInt(r.DupDataReceived)}}),d2=uS(e=>async function(t,r={}){let n=await e.post("bitswap/unwant",{signal:r.signal,searchParams:uC({arg:t.toString(),...r}),headers:r.headers});return n.json()}),d5=uS(e=>async function(t,r={}){let n=await e.post("block/get",{signal:r.signal,searchParams:uC({arg:t.toString(),...r}),headers:r.headers});return new Uint8Array(await n.arrayBuffer())});function d4(e){let[t,r]=null!=e[Symbol.asyncIterator]?[e[Symbol.asyncIterator](),Symbol.asyncIterator]:[e[Symbol.iterator](),Symbol.iterator],n=[];return{peek:()=>t.next(),push:e=>{n.push(e)},next:()=>n.length>0?{done:!1,value:n.shift()}:t.next(),[r](){return this}}}async function*d6(e,t={}){let r=e.getReader();try{for(;;){let n=await r.read();if(n.done)return;yield n.value}}finally{!0!==t.preventCancel&&await r.cancel(),r.releaseLock()}}async function d3(e){let t=[];for await(let r of e)t.push(r);return t}function d8(e){return ArrayBuffer.isView(e)||e instanceof ArrayBuffer}function d9(e){return e.constructor&&("Blob"===e.constructor.name||"File"===e.constructor.name)&&"function"==typeof e.stream}function d7(e){return"object"==typeof e&&(e.path||e.content)}let pe=e=>e&&"function"==typeof e.getReader;async function pt(e){if(d8(e))return new Blob([e]);if("string"==typeof e||e instanceof String)return new Blob([e.toString()]);if(d9(e))return e;if(pe(e)&&(e=d6(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let t=d4(e),{value:r,done:n}=await t.peek();if(n)return pr(t);if(t.push(r),Number.isInteger(r))return new Blob([Uint8Array.from(await d3(t))]);if(d8(r)||"string"==typeof r||r instanceof String)return pr(t)}throw oG(Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}async function pr(e){let t=[];for await(let r of e)t.push(r);return new Blob(t)}async function*pn(e,t){for await(let r of e)yield t(r)}var pi=r(62100);let ps=pi.Reader,pa=pi.Writer,po=pi.util,pl=pi.roots["ipfs-unixfs"]||(pi.roots["ipfs-unixfs"]={});function pc(e){return null==e?void 0:"number"==typeof e?4095&e:"0"===(e=e.toString()).substring(0,1)?4095&parseInt(e,8):4095&parseInt(e,10)}function pu(e){let t;if(null!=e){if(null!=e.secs&&(t={secs:e.secs,nsecs:e.nsecs}),null!=e.Seconds&&(t={secs:e.Seconds,nsecs:e.FractionalNanoseconds}),Array.isArray(e)&&(t={secs:e[0],nsecs:e[1]}),e instanceof Date){let r=e.getTime(),n=Math.floor(r/1e3);t={secs:n,nsecs:(r-1e3*n)*1e3}}if(Object.prototype.hasOwnProperty.call(t,"secs")){if(null!=t&&null!=t.nsecs&&(t.nsecs<0||t.nsecs>999999999))throw oG(Error("mtime-nsecs must be within the range [0,999999999]"),"ERR_INVALID_MTIME_NSECS");return t}}}async function*pd(e,t){if("string"==typeof e||e instanceof String||d8(e)||d9(e)||e._readableState)throw oG(Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(pe(e)&&(e=d6(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let r=d4(e),{value:n,done:i}=await r.peek();if(i){yield*[];return}if(r.push(n),Number.isInteger(n))throw oG(Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");if(n._readableState){yield*pn(r,e=>pp({content:e},t));return}if(d8(n)){yield pp({content:r},t);return}if(d7(n)||n[Symbol.iterator]||n[Symbol.asyncIterator]||pe(n)||d9(n)){yield*pn(r,e=>pp(e,t));return}}if(d7(e))throw oG(Error("Unexpected input: single item passed - if you are using ipfs.addAll, please use ipfs.add instead"),"ERR_UNEXPECTED_INPUT");throw oG(Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}async function pp(e,t){let{path:r,mode:n,mtime:i,content:s}=e,a={path:r||"",mode:pc(n),mtime:pu(i)};return s?a.content=await t(s):r||(a.content=await t(e)),a}async function ph(e,t,r={}){let n=[],i=new FormData,s=0,a=0;for await(let{content:o,path:l,mode:c,mtime:u}of pd(e,pt,!0)){let d="",p=o?"file":"dir";s>0&&(d=`-${s}`);let h=p+d,f=[];if(null!=c){var m;f.push(`mode=${null==(m=c)?void 0:"string"==typeof m?m:m.toString(8).padStart(4,"0")}`)}if(null!=u){let{secs:g,nsecs:y}=u;f.push(`mtime=${g}`),null!=y&&f.push(`mtime-nsecs=${y}`)}if(f.length&&(h=`${h}?${f.join("&")}`),o){i.set(h,o,null!=l?encodeURIComponent(l):void 0);let v=a+o.size;n.push({name:l,start:a,end:v}),a=v}else if(null!=l)i.set(h,new File([""],encodeURIComponent(l),{type:"application/x-directory"}));else throw Error("path or content or both must be set");s++}return{total:a,parts:n,headers:r,body:i}}pl.Data=(()=>{function e(e){if(this.blocksizes=[],e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.Type=0,e.prototype.Data=po.newBuffer([]),e.prototype.filesize=po.Long?po.Long.fromBits(0,0,!0):0,e.prototype.blocksizes=po.emptyArray,e.prototype.hashType=po.Long?po.Long.fromBits(0,0,!0):0,e.prototype.fanout=po.Long?po.Long.fromBits(0,0,!0):0,e.prototype.mode=0,e.prototype.mtime=null,e.encode=function(e,t){if(t||(t=pa.create()),t.uint32(8).int32(e.Type),null!=e.Data&&Object.hasOwnProperty.call(e,"Data")&&t.uint32(18).bytes(e.Data),null!=e.filesize&&Object.hasOwnProperty.call(e,"filesize")&&t.uint32(24).uint64(e.filesize),null!=e.blocksizes&&e.blocksizes.length)for(var r=0;r<e.blocksizes.length;++r)t.uint32(32).uint64(e.blocksizes[r]);return null!=e.hashType&&Object.hasOwnProperty.call(e,"hashType")&&t.uint32(40).uint64(e.hashType),null!=e.fanout&&Object.hasOwnProperty.call(e,"fanout")&&t.uint32(48).uint64(e.fanout),null!=e.mode&&Object.hasOwnProperty.call(e,"mode")&&t.uint32(56).uint32(e.mode),null!=e.mtime&&Object.hasOwnProperty.call(e,"mtime")&&pl.UnixTime.encode(e.mtime,t.uint32(66).fork()).ldelim(),t},e.decode=function(e,t){e instanceof ps||(e=ps.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new pl.Data;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.Type=e.int32();break;case 2:n.Data=e.bytes();break;case 3:n.filesize=e.uint64();break;case 4:if(n.blocksizes&&n.blocksizes.length||(n.blocksizes=[]),(7&i)==2)for(var s=e.uint32()+e.pos;e.pos<s;)n.blocksizes.push(e.uint64());else n.blocksizes.push(e.uint64());break;case 5:n.hashType=e.uint64();break;case 6:n.fanout=e.uint64();break;case 7:n.mode=e.uint32();break;case 8:n.mtime=pl.UnixTime.decode(e,e.uint32());break;default:e.skipType(7&i)}}if(!n.hasOwnProperty("Type"))throw po.ProtocolError("missing required 'Type'",{instance:n});return n},e.fromObject=function(e){if(e instanceof pl.Data)return e;var t=new pl.Data;switch(e.Type){case"Raw":case 0:t.Type=0;break;case"Directory":case 1:t.Type=1;break;case"File":case 2:t.Type=2;break;case"Metadata":case 3:t.Type=3;break;case"Symlink":case 4:t.Type=4;break;case"HAMTShard":case 5:t.Type=5}if(null!=e.Data&&("string"==typeof e.Data?po.base64.decode(e.Data,t.Data=po.newBuffer(po.base64.length(e.Data)),0):e.Data.length&&(t.Data=e.Data)),null!=e.filesize&&(po.Long?(t.filesize=po.Long.fromValue(e.filesize)).unsigned=!0:"string"==typeof e.filesize?t.filesize=parseInt(e.filesize,10):"number"==typeof e.filesize?t.filesize=e.filesize:"object"==typeof e.filesize&&(t.filesize=new po.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0))),e.blocksizes){if(!Array.isArray(e.blocksizes))throw TypeError(".Data.blocksizes: array expected");t.blocksizes=[];for(var r=0;r<e.blocksizes.length;++r)po.Long?(t.blocksizes[r]=po.Long.fromValue(e.blocksizes[r])).unsigned=!0:"string"==typeof e.blocksizes[r]?t.blocksizes[r]=parseInt(e.blocksizes[r],10):"number"==typeof e.blocksizes[r]?t.blocksizes[r]=e.blocksizes[r]:"object"==typeof e.blocksizes[r]&&(t.blocksizes[r]=new po.LongBits(e.blocksizes[r].low>>>0,e.blocksizes[r].high>>>0).toNumber(!0))}if(null!=e.hashType&&(po.Long?(t.hashType=po.Long.fromValue(e.hashType)).unsigned=!0:"string"==typeof e.hashType?t.hashType=parseInt(e.hashType,10):"number"==typeof e.hashType?t.hashType=e.hashType:"object"==typeof e.hashType&&(t.hashType=new po.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0))),null!=e.fanout&&(po.Long?(t.fanout=po.Long.fromValue(e.fanout)).unsigned=!0:"string"==typeof e.fanout?t.fanout=parseInt(e.fanout,10):"number"==typeof e.fanout?t.fanout=e.fanout:"object"==typeof e.fanout&&(t.fanout=new po.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0))),null!=e.mode&&(t.mode=e.mode>>>0),null!=e.mtime){if("object"!=typeof e.mtime)throw TypeError(".Data.mtime: object expected");t.mtime=pl.UnixTime.fromObject(e.mtime)}return t},e.toObject=function(e,t){t||(t={});var r={};if((t.arrays||t.defaults)&&(r.blocksizes=[]),t.defaults){if(r.Type=t.enums===String?"Raw":0,t.bytes===String?r.Data="":(r.Data=[],t.bytes!==Array&&(r.Data=po.newBuffer(r.Data))),po.Long){var n=new po.Long(0,0,!0);r.filesize=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.filesize=t.longs===String?"0":0;if(po.Long){var n=new po.Long(0,0,!0);r.hashType=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.hashType=t.longs===String?"0":0;if(po.Long){var n=new po.Long(0,0,!0);r.fanout=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.fanout=t.longs===String?"0":0;r.mode=0,r.mtime=null}if(null!=e.Type&&e.hasOwnProperty("Type")&&(r.Type=t.enums===String?pl.Data.DataType[e.Type]:e.Type),null!=e.Data&&e.hasOwnProperty("Data")&&(r.Data=t.bytes===String?po.base64.encode(e.Data,0,e.Data.length):t.bytes===Array?Array.prototype.slice.call(e.Data):e.Data),null!=e.filesize&&e.hasOwnProperty("filesize")&&("number"==typeof e.filesize?r.filesize=t.longs===String?String(e.filesize):e.filesize:r.filesize=t.longs===String?po.Long.prototype.toString.call(e.filesize):t.longs===Number?new po.LongBits(e.filesize.low>>>0,e.filesize.high>>>0).toNumber(!0):e.filesize),e.blocksizes&&e.blocksizes.length){r.blocksizes=[];for(var i=0;i<e.blocksizes.length;++i)"number"==typeof e.blocksizes[i]?r.blocksizes[i]=t.longs===String?String(e.blocksizes[i]):e.blocksizes[i]:r.blocksizes[i]=t.longs===String?po.Long.prototype.toString.call(e.blocksizes[i]):t.longs===Number?new po.LongBits(e.blocksizes[i].low>>>0,e.blocksizes[i].high>>>0).toNumber(!0):e.blocksizes[i]}return null!=e.hashType&&e.hasOwnProperty("hashType")&&("number"==typeof e.hashType?r.hashType=t.longs===String?String(e.hashType):e.hashType:r.hashType=t.longs===String?po.Long.prototype.toString.call(e.hashType):t.longs===Number?new po.LongBits(e.hashType.low>>>0,e.hashType.high>>>0).toNumber(!0):e.hashType),null!=e.fanout&&e.hasOwnProperty("fanout")&&("number"==typeof e.fanout?r.fanout=t.longs===String?String(e.fanout):e.fanout:r.fanout=t.longs===String?po.Long.prototype.toString.call(e.fanout):t.longs===Number?new po.LongBits(e.fanout.low>>>0,e.fanout.high>>>0).toNumber(!0):e.fanout),null!=e.mode&&e.hasOwnProperty("mode")&&(r.mode=e.mode),null!=e.mtime&&e.hasOwnProperty("mtime")&&(r.mtime=pl.UnixTime.toObject(e.mtime,t)),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,pi.util.toJSONOptions)},e.DataType=function(){let e={},t=Object.create(e);return t[e[0]="Raw"]=0,t[e[1]="Directory"]=1,t[e[2]="File"]=2,t[e[3]="Metadata"]=3,t[e[4]="Symlink"]=4,t[e[5]="HAMTShard"]=5,t}(),e})(),pl.UnixTime=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.Seconds=po.Long?po.Long.fromBits(0,0,!1):0,e.prototype.FractionalNanoseconds=0,e.encode=function(e,t){return t||(t=pa.create()),t.uint32(8).int64(e.Seconds),null!=e.FractionalNanoseconds&&Object.hasOwnProperty.call(e,"FractionalNanoseconds")&&t.uint32(21).fixed32(e.FractionalNanoseconds),t},e.decode=function(e,t){e instanceof ps||(e=ps.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new pl.UnixTime;e.pos<r;){var i=e.uint32();switch(i>>>3){case 1:n.Seconds=e.int64();break;case 2:n.FractionalNanoseconds=e.fixed32();break;default:e.skipType(7&i)}}if(!n.hasOwnProperty("Seconds"))throw po.ProtocolError("missing required 'Seconds'",{instance:n});return n},e.fromObject=function(e){if(e instanceof pl.UnixTime)return e;var t=new pl.UnixTime;return null!=e.Seconds&&(po.Long?(t.Seconds=po.Long.fromValue(e.Seconds)).unsigned=!1:"string"==typeof e.Seconds?t.Seconds=parseInt(e.Seconds,10):"number"==typeof e.Seconds?t.Seconds=e.Seconds:"object"==typeof e.Seconds&&(t.Seconds=new po.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber())),null!=e.FractionalNanoseconds&&(t.FractionalNanoseconds=e.FractionalNanoseconds>>>0),t},e.toObject=function(e,t){t||(t={});var r={};if(t.defaults){if(po.Long){var n=new po.Long(0,0,!1);r.Seconds=t.longs===String?n.toString():t.longs===Number?n.toNumber():n}else r.Seconds=t.longs===String?"0":0;r.FractionalNanoseconds=0}return null!=e.Seconds&&e.hasOwnProperty("Seconds")&&("number"==typeof e.Seconds?r.Seconds=t.longs===String?String(e.Seconds):e.Seconds:r.Seconds=t.longs===String?po.Long.prototype.toString.call(e.Seconds):t.longs===Number?new po.LongBits(e.Seconds.low>>>0,e.Seconds.high>>>0).toNumber():e.Seconds),null!=e.FractionalNanoseconds&&e.hasOwnProperty("FractionalNanoseconds")&&(r.FractionalNanoseconds=e.FractionalNanoseconds),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,pi.util.toJSONOptions)},e})(),pl.Metadata=(()=>{function e(e){if(e)for(var t=Object.keys(e),r=0;r<t.length;++r)null!=e[t[r]]&&(this[t[r]]=e[t[r]])}return e.prototype.MimeType="",e.encode=function(e,t){return t||(t=pa.create()),null!=e.MimeType&&Object.hasOwnProperty.call(e,"MimeType")&&t.uint32(10).string(e.MimeType),t},e.decode=function(e,t){e instanceof ps||(e=ps.create(e));for(var r=void 0===t?e.len:e.pos+t,n=new pl.Metadata;e.pos<r;){var i=e.uint32();i>>>3==1?n.MimeType=e.string():e.skipType(7&i)}return n},e.fromObject=function(e){if(e instanceof pl.Metadata)return e;var t=new pl.Metadata;return null!=e.MimeType&&(t.MimeType=String(e.MimeType)),t},e.toObject=function(e,t){t||(t={});var r={};return t.defaults&&(r.MimeType=""),null!=e.MimeType&&e.hasOwnProperty("MimeType")&&(r.MimeType=e.MimeType),r},e.prototype.toJSON=function(){return this.constructor.toObject(this,pi.util.toJSONOptions)},e})(),parseInt("0644",8),parseInt("0755",8);var pf=r(32044);function pm(...e){return(0,pf.anySignal)(e.filter(Boolean))}let pg=uS(e=>{async function t(r,n={}){let i;let s=new AbortController,a=pm(s.signal,n.signal);try{let o=await e.post("block/put",{signal:a,searchParams:uC(n),...await ph([r],s,n.headers)});i=await o.json()}catch(l){if("dag-pb"===n.format)return t(r,{...n,format:"protobuf"});if("dag-cbor"===n.format)return t(r,{...n,format:"cbor"});throw l}return sE.parse(i.Key)}return t}),py=uS(e=>async function*(t,r={}){Array.isArray(t)||(t=[t]);let n=await e.post("block/rm",{signal:r.signal,searchParams:uC({arg:t.map(e=>e.toString()),"stream-channels":!0,...r}),headers:r.headers});for await(let i of n.ndjson())yield function(e){let t={cid:sE.parse(e.Hash)};return e.Error&&(t.error=Error(e.Error)),t}(i)}),pv=uS(e=>async function(t,r={}){let n=await e.post("block/stat",{signal:r.signal,searchParams:uC({arg:t.toString(),...r}),headers:r.headers}),i=await n.json();return{cid:sE.parse(i.Key),size:i.Size}}),pb=uS(e=>async function(t,r={}){let n=await e.post("bootstrap/add",{signal:r.signal,searchParams:uC({arg:t,...r}),headers:r.headers}),{Peers:i}=await n.json();return{Peers:i.map(e=>o6(e))}}),pw=uS(e=>async function(t={}){let r=await e.post("bootstrap/rm",{signal:t.signal,searchParams:uC({...t,all:!0}),headers:t.headers}),{Peers:n}=await r.json();return{Peers:n.map(e=>o6(e))}}),p_=uS(e=>async function(t={}){let r=await e.post("bootstrap/list",{signal:t.signal,searchParams:uC(t),headers:t.headers}),{Peers:n}=await r.json();return{Peers:n.map(e=>o6(e))}}),px=uS(e=>async function(t={}){let r=await e.post("bootstrap/add",{signal:t.signal,searchParams:uC({...t,default:!0}),headers:t.headers}),{Peers:n}=await r.json();return{Peers:n.map(e=>o6(e))}}),pS=uS(e=>async function(t,r={}){let n=await e.post("bootstrap/rm",{signal:r.signal,searchParams:uC({arg:t,...r}),headers:r.headers}),{Peers:i}=await n.json();return{Peers:i.map(e=>o6(e))}}),pT=uS(e=>async function(t,r={}){let n=await e.post("config/profile/apply",{signal:r.signal,searchParams:uC({arg:t,...r}),headers:r.headers}),i=await n.json();return{original:i.OldCfg,updated:i.NewCfg}});function pE(e){if(null==e)return e;let t=/^[A-Z]+$/;return Object.keys(e).reduce((r,n)=>(t.test(n)?r[n.toLowerCase()]=e[n]:t.test(n[0])?r[n[0].toLowerCase()+n.slice(1)]=e[n]:r[n]=e[n],r),{})}let pC=uS(e=>async function(t={}){let r=await e.post("config/profile/list",{signal:t.signal,searchParams:uC(t),headers:t.headers}),n=await r.json();return n.map(e=>pE(e))}),pk=uS(e=>{let t=async(t,r={})=>{if(!t)throw Error("key argument is required");let n=await e.post("config",{signal:r.signal,searchParams:uC({arg:t,...r}),headers:r.headers}),i=await n.json();return i.Value};return t}),pR=uS(e=>{let t=async(t={})=>{let r=await e.post("config/show",{signal:t.signal,searchParams:uC({...t}),headers:t.headers}),n=await r.json();return n};return t}),pP=uS(e=>{let t=async(t,r={})=>{let n=new AbortController,i=pm(n.signal,r.signal),s=await e.post("config/replace",{signal:i,searchParams:uC(r),...await ph([oO(JSON.stringify(t))],n,r.headers)});await s.text()};return t}),pD=uS(e=>{let t=async(t,r,n={})=>{if("string"!=typeof t)throw Error("Invalid key type");let i={...n,...pA(t,r)},s=await e.post("config",{signal:n.signal,searchParams:uC(i),headers:n.headers});await s.text()};return t}),pA=(e,t)=>{switch(typeof t){case"boolean":return{arg:[e,t.toString()],bool:!0};case"string":return{arg:[e,t]};default:return{arg:[e,JSON.stringify(t)],json:!0}}},pN=uS(e=>async function*(t,r={}){let n=await e.post("dag/export",{signal:r.signal,searchParams:uC({arg:t.toString()}),headers:r.headers});yield*n.iterator()});async function*pL(e,t,r,n,i){let s=async e=>{let t=await r.getCodec(e.code),s=await n(e,i);return t.decode(s)},a=t.split("/").filter(Boolean),o=await s(e),l=e;for(;a.length;){let c=a.shift();if(!c)throw oG(Error(`Could not resolve path "${t}"`),"ERR_INVALID_PATH");if(Object.prototype.hasOwnProperty.call(o,c))yield{value:o=o[c],remainderPath:a.join("/")};else throw oG(Error(`no link named "${c}" under ${l}`),"ERR_NO_LINK");let u=sE.asCID(o);u&&(l=u,o=await s(o))}yield{value:o,remainderPath:""}}async function pO(e){for await(let t of e)return t}async function pI(e){let t;for await(let r of e)t=r;return t}let pM=(e,t)=>{let r=uS((t,r)=>{let n=d5(r),i=async(t,r={})=>{if(r.path){let i=r.localResolve?await pO(pL(t,r.path,e,n,r)):await pI(pL(t,r.path,e,n,r));if(!i)throw oG(Error("Not found"),"ERR_NOT_FOUND");return i}let s=await e.getCodec(t.code),a=await n(t,r),o=s.decode(a);return{value:o,remainderPath:""}};return i});return r(t)},pj=uS(e=>async function*(t,r={}){let n=new AbortController,i=pm(n.signal,r.signal),{headers:s,body:a}=await ph(t,n,r.headers),o=await e.post("dag/import",{signal:i,headers:s,body:a,searchParams:uC({"pin-roots":r.pinRoots})});for await(let{Root:l}of o.ndjson())if(void 0!==l){let{Cid:{"/":c},PinErrorMsg:u}=l;yield{root:{cid:sE.parse(c),pinErrorMsg:u}}}}),pF=(e,t)=>{let r=uS(t=>{let r=async(r,n={})=>{let i;let s={storeCodec:"dag-cbor",hashAlg:"sha2-256",...n};if(s.inputCodec){if(!(r instanceof Uint8Array))throw Error("Can only inputCodec on raw bytes that can be decoded");i=r}else{let a=await e.getCodec(s.storeCodec);i=a.encode(r),s.inputCodec=s.storeCodec}let o=new AbortController,l=pm(o.signal,s.signal),c=await t.post("dag/put",{timeout:s.timeout,signal:l,searchParams:uC(s),...await ph([i],o,s.headers)}),u=await c.json();return sE.parse(u.Cid["/"])};return r});return r(t)},p$=uS(e=>{let t=async(t,r={})=>{let n=await e.post("dag/resolve",{signal:r.signal,searchParams:uC({arg:`${t}${r.path?`/${r.path}`.replace(/\/[/]+/g,"/"):""}`,...r}),headers:r.headers}),i=await n.json();return{cid:sE.parse(i.Cid["/"]),remainderPath:i.RemPath}};return t}),pB=e=>{if(0===e.Type)return{name:"SENDING_QUERY",type:e.Type};if(1===e.Type)return{from:d0(e.ID),name:"PEER_RESPONSE",type:e.Type,messageType:0,messageName:"PUT_VALUE",closer:(e.Responses||[]).map(({ID:e,Addrs:t})=>({id:d0(e),multiaddrs:t.map(e=>o6(e)),protocols:[]})),providers:(e.Responses||[]).map(({ID:e,Addrs:t})=>({id:d0(e),multiaddrs:t.map(e=>o6(e)),protocols:[]}))};if(2===e.Type){let t={id:e.ID??d0(e.ID),multiaddrs:[],protocols:[]};return e.Responses&&e.Responses.length&&(t={id:d0(e.Responses[0].ID),multiaddrs:e.Responses[0].Addrs.map(e=>o6(e)),protocols:[]}),{name:"FINAL_PEER",type:e.Type,peer:t}}if(3===e.Type)return{name:"QUERY_ERROR",type:e.Type,error:Error(e.Extra)};if(4===e.Type)return{name:"PROVIDER",type:e.Type,providers:e.Responses.map(({ID:e,Addrs:t})=>({id:d0(e),multiaddrs:t.map(e=>o6(e)),protocols:[]}))};if(5===e.Type)return{name:"VALUE",type:e.Type,value:oO(e.Extra,"base64pad")};if(6===e.Type){let r=e.Responses.map(({ID:e})=>d0(e));if(!r.length)throw Error("No peer found");return{name:"ADDING_PEER",type:e.Type,peer:r[0]}}if(7===e.Type)return{name:"DIALING_PEER",type:e.Type,peer:d0(e.ID)};throw Error("Unknown DHT event type")},pU=uS(e=>async function*(t,r={}){let n=await e.post("dht/findpeer",{signal:r.signal,searchParams:uC({arg:t,...r}),headers:r.headers});for await(let i of n.ndjson())yield pB(i)}),pq=uS(e=>async function*(t,r={}){let n=await e.post("dht/findprovs",{signal:r.signal,searchParams:uC({arg:t.toString(),...r}),headers:r.headers});for await(let i of n.ndjson())yield pB(i)}),pz=uS(e=>async function*(t,r={}){let n=await e.post("dht/get",{signal:r.signal,searchParams:uC({arg:t instanceof Uint8Array?au(t):t.toString(),...r}),headers:r.headers});for await(let i of n.ndjson())yield pB(i)}),pV=uS(e=>async function*(t,r={recursive:!1}){let n=Array.isArray(t)?t:[t],i=await e.post("dht/provide",{signal:r.signal,searchParams:uC({arg:n.map(e=>e.toString()),...r}),headers:r.headers});for await(let s of i.ndjson())yield pB(s)}),pH=uS(e=>async function*(t,r,n={}){let i=new AbortController,s=pm(i.signal,n.signal),a=await e.post("dht/put",{signal:s,searchParams:uC({arg:t instanceof Uint8Array?au(t):t.toString(),...n}),...await ph([r],i,n.headers)});for await(let o of a.ndjson())yield pB(o)}),pW=uS(e=>async function*(t,r={}){let n=await e.post("dht/query",{signal:r.signal,searchParams:uC({arg:t.toString(),...r}),headers:r.headers});for await(let i of n.ndjson())yield pB(i)}),pZ=uS(e=>async function(t={}){let r=await e.post("diag/cmds",{signal:t.signal,searchParams:uC(t),headers:t.headers});return r.json()}),pK=uS(e=>async function(t={}){let r=await e.post("diag/net",{signal:t.signal,searchParams:uC(t),headers:t.headers});return r.json()}),pG=uS(e=>async function(t={}){let r=await e.post("diag/sys",{signal:t.signal,searchParams:uC(t),headers:t.headers});return r.json()}),pY=uS(e=>async function(t,r,n={}){let i=await e.post("files/chmod",{signal:n.signal,searchParams:uC({arg:t,mode:r,...n}),headers:n.headers});await i.text()}),pJ=uS(e=>async function(t,r,n={}){let i=Array.isArray(t)?t:[t],s=await e.post("files/cp",{signal:n.signal,searchParams:uC({arg:i.concat(r).map(e=>sE.asCID(e)?`/ipfs/${e}`:e),...n}),headers:n.headers});await s.text()}),pQ=uS(e=>async function(t,r={}){if(!t||"string"!=typeof t)throw Error("ipfs.files.flush requires a path");let n=await e.post("files/flush",{signal:r.signal,searchParams:uC({arg:t,...r}),headers:r.headers}),i=await n.json();return sE.parse(i.Cid)});function pX(e){let t=pE(e);return Object.prototype.hasOwnProperty.call(t,"mode")&&(t.mode=parseInt(t.mode,8)),Object.prototype.hasOwnProperty.call(t,"mtime")&&(t.mtime={secs:t.mtime,nsecs:t.mtimeNsecs||0},delete t.mtimeNsecs),t}let p0=uS(e=>async function*(t,r={}){if(!t)throw Error("ipfs.files.ls requires a path");let n=await e.post("files/ls",{signal:r.signal,searchParams:uC({arg:sE.asCID(t)?`/ipfs/${t}`:t,long:!0,...r,stream:!0}),headers:r.headers});for await(let i of n.ndjson())if("Entries"in i)for(let s of i.Entries||[])yield p1(pX(s));else yield p1(pX(i))});function p1(e){return e.hash&&(e.cid=sE.parse(e.hash)),delete e.hash,e.type=1===e.type?"directory":"file",e}let p2=uS(e=>async function(t,r={}){let n=await e.post("files/mkdir",{signal:r.signal,searchParams:uC({arg:t,...r}),headers:r.headers});await n.text()}),p5=uS(e=>async function(t,r,n={}){Array.isArray(t)||(t=[t]);let i=await e.post("files/mv",{signal:n.signal,searchParams:uC({arg:t.concat(r),...n}),headers:n.headers});await i.text()});var p4=r(50590);let p6=uS(e=>async function*(t,r={}){let n=await e.post("files/read",{signal:r.signal,searchParams:uC({arg:t,count:r.length,...r}),headers:r.headers});yield*p4(n.body)}),p3=uS(e=>async function(t,r={}){let n=await e.post("files/rm",{signal:r.signal,searchParams:uC({arg:t,...r}),headers:r.headers}),i=await n.text();if(""!==i){let s=new lr.HTTPError(n);throw s.message=i,s}}),p8=uS(e=>async function(t,r={}){var n;let i=await e.post("files/stat",{signal:r.signal,searchParams:uC({arg:t,...r}),headers:r.headers}),s=await i.json();return s.WithLocality=s.WithLocality||!1,(n=pX(s)).cid=sE.parse(n.hash),delete n.hash,n}),p9=uS(e=>async function(t,r={}){let n=await e.post("files/touch",{signal:r.signal,searchParams:uC({arg:t,...r}),headers:r.headers});await n.text()}),p7=uS(e=>async function(t,r,n={}){let i=new AbortController,s=pm(i.signal,n.signal),a=await e.post("files/write",{signal:s,searchParams:uC({arg:t,streamChannels:!0,count:n.length,...n}),...await ph([{content:r,path:"arg",mode:uT(n.mode),mtime:uE(n.mtime)}],i,n.headers)});await a.text()}),he=uS(e=>{let t=async(e,t,r={})=>{throw oG(Error("Not implemented"),"ERR_NOT_IMPLEMENTED")};return t}),ht=uS(e=>async function(t,r={type:"Ed25519"}){let n=await e.post("key/gen",{signal:r.signal,searchParams:uC({arg:t,...r}),headers:r.headers}),i=await n.json();return pE(i)}),hr=uS(e=>async function(t,r,n,i={}){let s=await e.post("key/import",{signal:i.signal,searchParams:uC({arg:t,pem:r,password:n,...i}),headers:i.headers}),a=await s.json();return pE(a)}),hn=uS(e=>{let t=async(e,t={})=>{throw oG(Error("Not implemented"),"ERR_NOT_IMPLEMENTED")};return t}),hi=uS(e=>async function(t={}){let r=await e.post("key/list",{signal:t.signal,searchParams:uC(t),headers:t.headers}),n=await r.json();return(n.Keys||[]).map(e=>pE(e))}),hs=uS(e=>async function(t,r,n={}){let i=await e.post("key/rename",{signal:n.signal,searchParams:uC({arg:[t,r],...n}),headers:n.headers});return pE(await i.json())}),ha=uS(e=>async function(t,r={}){let n=await e.post("key/rm",{signal:r.signal,searchParams:uC({arg:t,...r}),headers:r.headers}),i=await n.json();return pE(i.Keys[0])}),ho=uS(e=>async function(t,r,n={}){let i=await e.post("log/level",{signal:n.signal,searchParams:uC({arg:[t,r],...n}),headers:n.headers});return pE(await i.json())}),hl=uS(e=>async function(t={}){let r=await e.post("log/ls",{signal:t.signal,searchParams:uC(t),headers:t.headers}),n=await r.json();return n.Strings}),hc=uS(e=>async function*(t={}){let r=await e.post("log/tail",{signal:t.signal,searchParams:uC(t),headers:t.headers});yield*r.ndjson()}),hu=uS(e=>async function(t,r={}){let n=await e.post("name/publish",{signal:r.signal,searchParams:uC({arg:`${t}`,...r}),headers:r.headers});return pE(await n.json())}),hd=uS(e=>async function*(t,r={}){let n=await e.post("name/resolve",{signal:r.signal,searchParams:uC({arg:t,stream:!0,...r}),headers:r.headers});for await(let i of n.ndjson())yield i.Path}),hp=uS(e=>async function(t,r={}){let n=await e.post("name/pubsub/cancel",{signal:r.signal,searchParams:uC({arg:t,...r}),headers:r.headers});return pE(await n.json())}),hh=uS(e=>async function(t={}){let r=await e.post("name/pubsub/state",{signal:t.signal,searchParams:uC(t),headers:t.headers});return pE(await r.json())}),hf=uS(e=>async function(t={}){let r=await e.post("name/pubsub/subs",{signal:t.signal,searchParams:uC(t),headers:t.headers}),n=await r.json();return n.Strings||[]}),hm=uS(e=>async function(t,r={}){let n=await e.post("object/data",{signal:r.signal,searchParams:uC({arg:`${t instanceof Uint8Array?sE.decode(t):t}`,...r}),headers:r.headers}),i=await n.arrayBuffer();return new Uint8Array(i,0,i.byteLength)}),hg=uS(e=>async function(t,r={}){let n=await e.post("object/get",{signal:r.signal,searchParams:uC({arg:`${t instanceof Uint8Array?sE.decode(t):t}`,dataEncoding:"base64",...r}),headers:r.headers}),i=await n.json();return{Data:oO(i.Data,"base64pad"),Links:(i.Links||[]).map(e=>({Name:e.Name,Hash:sE.parse(e.Hash),Tsize:e.Size}))}}),hy=uS(e=>async function(t,r={}){let n=await e.post("object/links",{signal:r.signal,searchParams:uC({arg:`${t instanceof Uint8Array?sE.decode(t):t}`,...r}),headers:r.headers}),i=await n.json();return(i.Links||[]).map(e=>({Name:e.Name,Tsize:e.Size,Hash:sE.parse(e.Hash)}))}),hv=uS(e=>async function(t={}){let r=await e.post("object/new",{signal:t.signal,searchParams:uC({arg:t.template,...t}),headers:t.headers}),{Hash:n}=await r.json();return sE.parse(n)}),hb=(e,t)=>{let r=uS(r=>{let n=pF(e,t);return async function(e,t={}){return n(e,{...t,storeCodec:"dag-pb",hashAlg:"sha2-256",version:1})}});return r(t)},hw=uS(e=>async function(t,r={}){let n=await e.post("object/stat",{signal:r.signal,searchParams:uC({arg:`${t}`,...r}),headers:r.headers}),i=await n.json();return{...i,Hash:sE.parse(i.Hash)}}),h_=uS(e=>async function(t,r,n={}){let i=await e.post("object/patch/add-link",{signal:n.signal,searchParams:uC({arg:[`${t}`,r.Name||r.name||"",(r.Hash||r.cid||"").toString()||null],...n}),headers:n.headers}),{Hash:s}=await i.json();return sE.parse(s)}),hx=uS(e=>async function(t,r,n={}){let i=new AbortController,s=pm(i.signal,n.signal),a=await e.post("object/patch/append-data",{signal:s,searchParams:uC({arg:`${t}`,...n}),...await ph([r],i,n.headers)}),{Hash:o}=await a.json();return sE.parse(o)}),hS=uS(e=>async function(t,r,n={}){let i=await e.post("object/patch/rm-link",{signal:n.signal,searchParams:uC({arg:[`${t}`,r.Name||r.name||null],...n}),headers:n.headers}),{Hash:s}=await i.json();return sE.parse(s)}),hT=uS(e=>async function(t,r,n={}){let i=new AbortController,s=pm(i.signal,n.signal),a=await e.post("object/patch/set-data",{signal:s,searchParams:uC({arg:[`${t}`],...n}),...await ph([r],i,n.headers)}),{Hash:o}=await a.json();return sE.parse(o)});function hE(e,t,r){t=t||[];for(var n=r=r||0;e>=2147483648;)t[r++]=255&e|128,e/=128;for(;-128&e;)t[r++]=255&e|128,e>>>=7;return t[r]=0|e,hE.bytes=r-n+1,t}function hC(e,t){var r,n=0,t=t||0,i=0,s=t,a=e.length;do{if(s>=a)throw hC.bytes=0,RangeError("Could not decode varint");r=e[s++],n+=i<28?(127&r)<<i:(127&r)*Math.pow(2,i),i+=7}while(r>=128);return hC.bytes=s-t,n}var hk={encode:hE,decode:hC,encodingLength:function(e){return e<128?1:e<16384?2:e<2097152?3:e<268435456?4:e<34359738368?5:e<4398046511104?6:e<562949953421312?7:e<72057594037927940?8:e<0x7fffffffffffffff?9:10}};let hR=(e,t=0)=>{let r=hk.decode(e,t);return[r,hk.decode.bytes]},hP=(e,t,r=0)=>(hk.encode(e,t,r),t),hD=e=>hk.encodingLength(e);new Uint8Array(0);let hA=(e,t)=>{if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;for(let r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0},hN=e=>{if(e instanceof Uint8Array&&"Uint8Array"===e.constructor.name)return e;if(e instanceof ArrayBuffer)return new Uint8Array(e);if(ArrayBuffer.isView(e))return new Uint8Array(e.buffer,e.byteOffset,e.byteLength);throw Error("Unknown type, must be binary type")},hL=(e,t)=>{let r=t.byteLength,n=hD(e),i=n+hD(r),s=new Uint8Array(i+r);return hP(e,s,0),hP(r,s,n),s.set(t,i),new hM(e,r,t,s)},hO=e=>{let t=hN(e),[r,n]=hR(t),[i,s]=hR(t.subarray(n)),a=t.subarray(n+s);if(a.byteLength!==i)throw Error("Incorrect length");return new hM(r,i,a,t)},hI=(e,t)=>e===t||e.code===t.code&&e.size===t.size&&t.bytes instanceof Uint8Array&&hA(e.bytes,t.bytes);class hM{constructor(e,t,r,n){this.code=e,this.size=t,this.digest=r,this.bytes=n}}var hj=function(e,t){if(e.length>=255)throw TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var i=0;i<e.length;i++){var s=e.charAt(i),a=s.charCodeAt(0);if(255!==r[a])throw TypeError(s+" is ambiguous");r[a]=i}var o=e.length,l=e.charAt(0),c=Math.log(o)/Math.log(256),u=Math.log(256)/Math.log(o);function d(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;var t=0;if(" "!==e[0]){for(var n=0,i=0;e[t]===l;)n++,t++;for(var s=(e.length-t)*c+1>>>0,a=new Uint8Array(s);e[t];){var u=r[e.charCodeAt(t)];if(255===u)return;for(var d=0,p=s-1;(0!==u||d<i)&&-1!==p;p--,d++)u+=o*a[p]>>>0,a[p]=u%256>>>0,u=u/256>>>0;if(0!==u)throw Error("Non-zero carry");i=d,t++}if(" "!==e[t]){for(var h=s-i;h!==s&&0===a[h];)h++;for(var f=new Uint8Array(n+(s-h)),m=n;h!==s;)f[m++]=a[h++];return f}}}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,s=t.length;i!==s&&0===t[i];)i++,r++;for(var a=(s-i)*u+1>>>0,c=new Uint8Array(a);i!==s;){for(var d=t[i],p=0,h=a-1;(0!==d||p<n)&&-1!==h;h--,p++)d+=256*c[h]>>>0,c[h]=d%o>>>0,d=d/o>>>0;if(0!==d)throw Error("Non-zero carry");n=p,i++}for(var f=a-n;f!==a&&0===c[f];)f++;for(var m=l.repeat(r);f<a;++f)m+=e.charAt(c[f]);return m},decodeUnsafe:d,decode:function(e){var r=d(e);if(r)return r;throw Error(`Non-${t} character`)}}};class hF{constructor(e,t,r){this.name=e,this.prefix=t,this.baseEncode=r}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class h${constructor(e,t,r){if(this.name=e,this.prefix=t,void 0===t.codePointAt(0))throw Error("Invalid prefix character");this.prefixCodePoint=t.codePointAt(0),this.baseDecode=r}decode(e){if("string"==typeof e){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}throw Error("Can only multibase decode strings")}or(e){return hU(this,e)}}class hB{constructor(e){this.decoders=e}or(e){return hU(this,e)}decode(e){let t=e[0],r=this.decoders[t];if(r)return r.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}let hU=(e,t)=>new hB({...e.decoders||{[e.prefix]:e},...t.decoders||{[t.prefix]:t}});class hq{constructor(e,t,r,n){this.name=e,this.prefix=t,this.baseEncode=r,this.baseDecode=n,this.encoder=new hF(e,t,r),this.decoder=new h$(e,t,n)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}let hz=({name:e,prefix:t,encode:r,decode:n})=>new hq(e,t,r,n),hV=({prefix:e,name:t,alphabet:r})=>{let{encode:n,decode:i}=hj(r,t);return hz({prefix:e,name:t,encode:n,decode:e=>hN(i(e))})},hH=(e,t,r,n)=>{let i={};for(let s=0;s<t.length;++s)i[t[s]]=s;let a=e.length;for(;"="===e[a-1];)--a;let o=new Uint8Array(a*r/8|0),l=0,c=0,u=0;for(let d=0;d<a;++d){let p=i[e[d]];if(void 0===p)throw SyntaxError(`Non-${n} character`);c=c<<r|p,(l+=r)>=8&&(l-=8,o[u++]=255&c>>l)}if(l>=r||255&c<<8-l)throw SyntaxError("Unexpected end of data");return o},hW=(e,t,r)=>{let n="="===t[t.length-1],i=(1<<r)-1,s="",a=0,o=0;for(let l=0;l<e.length;++l)for(o=o<<8|e[l],a+=8;a>r;)a-=r,s+=t[i&o>>a];if(a&&(s+=t[i&o<<r-a]),n)for(;s.length*r&7;)s+="=";return s},hZ=({name:e,prefix:t,bitsPerChar:r,alphabet:n})=>hz({prefix:t,name:e,encode:e=>hW(e,n,r),decode:t=>hH(t,n,r,e)}),hK=hV({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"});hV({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});let hG=hZ({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5});hZ({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),hZ({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),hZ({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),hZ({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),hZ({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),hZ({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),hZ({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),hZ({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});let hY=(e,t)=>{let{bytes:r,version:n}=e;return 0===n?h1(r,hQ(e),t||hK.encoder):h2(r,hQ(e),t||hG.encoder)},hJ=new WeakMap,hQ=e=>{let t=hJ.get(e);if(null==t){let r=new Map;return hJ.set(e,r),r}return t};class hX{constructor(e,t,r,n){this.code=t,this.version=e,this.multihash=r,this.bytes=n,this["/"]=n}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{let{code:e,multihash:t}=this;if(e!==h5)throw Error("Cannot convert a non dag-pb CID to CIDv0");if(t.code!==h4)throw Error("Cannot convert non sha2-256 multihash CID to CIDv0");return hX.createV0(t)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{let{code:e,digest:t}=this.multihash,r=hL(e,t);return hX.createV1(this.code,r)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return hX.equals(this,e)}static equals(e,t){return t&&e.code===t.code&&e.version===t.version&&hI(e.multihash,t.multihash)}toString(e){return hY(this,e)}toJSON(){return{code:this.code,version:this.version,hash:this.multihash.bytes}}link(){return this}get[Symbol.toStringTag](){return"CID"}[Symbol.for("nodejs.util.inspect.custom")](){return`CID(${this.toString()})`}static asCID(e){if(null==e)return null;if(e instanceof hX)return e;if(null!=e["/"]&&e["/"]===e.bytes||e.asCID===e){let{version:t,code:r,multihash:n,bytes:i}=e;return new hX(t,r,n,i||h6(t,r,n.bytes))}if(!0!==e[h3])return null;{let{version:s,multihash:a,code:o}=e,l=hO(a);return hX.create(s,o,l)}}static create(e,t,r){if("number"!=typeof t)throw Error("String codecs are no longer supported");if(!(r.bytes instanceof Uint8Array))throw Error("Invalid digest");switch(e){case 0:if(t===h5)return new hX(e,t,r,r.bytes);throw Error(`Version 0 CID must use dag-pb (code: ${h5}) block encoding`);case 1:{let n=h6(e,t,r.bytes);return new hX(e,t,r,n)}default:throw Error("Invalid version")}}static createV0(e){return hX.create(0,h5,e)}static createV1(e,t){return hX.create(1,e,t)}static decode(e){let[t,r]=hX.decodeFirst(e);if(r.length)throw Error("Incorrect length");return t}static decodeFirst(e){let t=hX.inspectBytes(e),r=t.size-t.multihashSize,n=hN(e.subarray(r,r+t.multihashSize));if(n.byteLength!==t.multihashSize)throw Error("Incorrect length");let i=n.subarray(t.multihashSize-t.digestSize),s=new hM(t.multihashCode,t.digestSize,i,n),a=0===t.version?hX.createV0(s):hX.createV1(t.codec,s);return[a,e.subarray(t.size)]}static inspectBytes(e){let t=0,r=()=>{let[r,n]=hR(e.subarray(t));return t+=n,r},n=r(),i=h5;if(18===n?(n=0,t=0):i=r(),0!==n&&1!==n)throw RangeError(`Invalid CID version ${n}`);let s=t,a=r(),o=r(),l=t+o;return{version:n,codec:i,multihashCode:a,digestSize:o,multihashSize:l-s,size:l}}static parse(e,t){let[r,n]=h0(e,t),i=hX.decode(n);return hQ(i).set(r,e),i}}let h0=(e,t)=>{switch(e[0]){case"Q":return[hK.prefix,(t||hK).decode(`${hK.prefix}${e}`)];case hK.prefix:return[hK.prefix,(t||hK).decode(e)];case hG.prefix:return[hG.prefix,(t||hG).decode(e)];default:if(null==t)throw Error("To parse non base32 or base58btc encoded CID multibase decoder must be provided");return[e[0],t.decode(e)]}},h1=(e,t,r)=>{let{prefix:n}=r;if(n!==hK.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);let i=t.get(n);if(null!=i)return i;{let s=r.encode(e).slice(1);return t.set(n,s),s}},h2=(e,t,r)=>{let{prefix:n}=r,i=t.get(n);if(null!=i)return i;{let s=r.encode(e);return t.set(n,s),s}},h5=112,h4=18,h6=(e,t,r)=>{let n=hD(e),i=n+hD(t),s=new Uint8Array(i+r.byteLength);return hP(e,s,0),hP(t,s,n),s.set(r,i),s},h3=Symbol.for("@ipld/js-cid/CID");async function*h8(e){if(null==e)throw oG(Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");let t=hX.asCID(e);if(t){yield h9({cid:t});return}if(e instanceof String||"string"==typeof e){yield h9({path:e});return}if(null!=e.cid||null!=e.path)return yield h9(e);if(Symbol.iterator in e){let r=e[Symbol.iterator](),n=r.next();if(n.done)return r;if(hX.asCID(n.value)||n.value instanceof String||"string"==typeof n.value){for(let i of(yield h9({cid:n.value}),r))yield h9({cid:i});return}if(null!=n.value.cid||null!=n.value.path){for(let s of(yield h9(n.value),r))yield h9(s);return}throw oG(Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}if(Symbol.asyncIterator in e){let a=e[Symbol.asyncIterator](),o=await a.next();if(o.done)return a;if(hX.asCID(o.value)||o.value instanceof String||"string"==typeof o.value){for await(let l of(yield h9({cid:o.value}),a))yield h9({cid:l});return}if(null!=o.value.cid||null!=o.value.path){for await(let c of(yield h9(o.value),a))yield h9(c);return}}throw oG(Error("Unexpected input: "+typeof e),"ERR_UNEXPECTED_INPUT")}function h9(e){let t=e.cid||`${e.path}`;if(!t)throw oG(Error("Unexpected input: Please path either a CID or an IPFS path"),"ERR_UNEXPECTED_INPUT");let r={path:t,recursive:!1!==e.recursive};return null!=e.metadata&&(r.metadata=e.metadata),r}let h7=uS(e=>async function*(t,r={}){for await(let{path:n,recursive:i,metadata:s}of h8(t)){let a=await e.post("pin/add",{signal:r.signal,searchParams:uC({...r,arg:n,recursive:i,metadata:s?JSON.stringify(s):void 0,stream:!0}),headers:r.headers});for await(let o of a.ndjson()){if(o.Pins){for(let l of o.Pins)yield sE.parse(l);continue}yield sE.parse(o)}}});function fe(e,t,r){let n={type:e,cid:sE.parse(t)};return r&&(n.metadata=r),n}let ft=uS(e=>async function*(t={}){let r=[];t.paths&&(r=Array.isArray(t.paths)?t.paths:[t.paths]);let n=await e.post("pin/ls",{signal:t.signal,searchParams:uC({...t,arg:r.map(e=>`${e}`),stream:!0}),headers:t.headers});for await(let i of n.ndjson()){if(i.Keys){for(let s of Object.keys(i.Keys))yield fe(i.Keys[s].Type,s,i.Keys[s].Metadata);return}yield fe(i.Type,i.Cid,i.Metadata)}}),fr=uS(e=>async function*(t,r={}){for await(let{path:n,recursive:i}of h8(t)){let s=new URLSearchParams(r.searchParams);s.append("arg",`${n}`),null!=i&&s.set("recursive",String(i));let a=await e.post("pin/rm",{signal:r.signal,headers:r.headers,searchParams:uC({...r,arg:`${n}`,recursive:i})});for await(let o of a.ndjson()){if(o.Pins){yield*o.Pins.map(e=>sE.parse(e));continue}yield sE.parse(o)}}}),fn=e=>{let t=fr(e);return uS(()=>async function(e,r={}){return pI(t([{path:e,...r}],r))})(e)},fi=({Name:e,Status:t,Cid:r})=>({cid:sE.parse(r),name:e,status:t}),fs=e=>{if("string"==typeof e&&""!==e)return e;throw TypeError("service name must be passed")},fa=e=>{if(sE.asCID(e))return e.toString();throw TypeError(`CID instance expected instead of ${typeof e}`)},fo=({service:e,cid:t,name:r,status:n,all:i})=>{let s=uC({service:fs(e),name:r,force:!!i||void 0});if(t)for(let a of t)s.append("cid",fa(a));if(n)for(let o of n)s.append("status",o);return s},fl=({cid:e,service:t,background:r,name:n,origins:i})=>{let s=uC({arg:fa(e),service:fs(t),name:n,background:!!r||void 0});if(i)for(let a of i)s.append("origin",a.toString());return s};function fc(e){return{service:e.Service,endpoint:new URL(e.ApiEndpoint),...e.Stat&&{stat:function(e){switch(e.Status){case"valid":{let{Pinning:t,Pinned:r,Queued:n,Failed:i}=e.PinCount;return{status:"valid",pinCount:{queued:n,pinning:t,pinned:r,failed:i}}}case"invalid":return{status:"invalid"};default:return{status:e.Status}}}(e.Stat)}}}let fu=e=>Array.isArray(e)?e.map(fd):e,fd=e=>au(fp(e)),fp=e=>st.decode(e),fh=e=>BigInt(`0x${au(st.decode(e),"base16")}`),ff=e=>st.encode(oO(e)),fm=uS(e=>async function(t={}){let{Strings:r}=await (await e.post("pubsub/ls",{signal:t.signal,searchParams:uC(t),headers:t.headers})).json();return fu(r)||[]}),fg=uS(e=>async function(t,r={}){let n=await e.post("pubsub/peers",{signal:r.signal,searchParams:uC({arg:ff(t),...r}),headers:r.headers}),{Strings:i}=await n.json();return i||[]}),fy=uS(e=>async function(t,r,n={}){let i=uC({arg:ff(t),...n}),s=new AbortController,a=pm(s.signal,n.signal),o=await e.post("pubsub/pub",{signal:a,searchParams:i,...await ph([r],s,n.headers)});await o.text()}),fv=lt("ipfs-http-client:pubsub:subscribe"),fb=(e,t)=>uS(e=>async function(r,n,i={}){let s,a;i.signal=t.subscribe(r,n,i.signal);let o=new Promise((e,t)=>{s=e,a=t}),l=setTimeout(()=>s(),1e3);return e.post("pubsub/sub",{signal:i.signal,searchParams:uC({arg:ff(r),...i}),headers:i.headers}).catch(e=>{t.unsubscribe(r,n),a(e)}).then(e=>{clearTimeout(l),e&&(fw(e,{onMessage:e=>{if(n){if("function"==typeof n){n(e);return}"function"==typeof n.handleEvent&&n.handleEvent(e)}},onEnd:()=>t.unsubscribe(r,n),onError:i.onError}),s())}),o})(e);async function fw(e,{onMessage:t,onEnd:r,onError:n}){n=n||fv;try{for await(let i of e.ndjson())try{if(!i.from)continue;t(null!=i.from&&null!=i.seqno?{type:"signed",from:d0(i.from),data:fp(i.data),sequenceNumber:fh(i.seqno),topic:fd(i.topicIDs[0]),key:fp(i.key??"u"),signature:fp(i.signature??"u")}:{type:"unsigned",data:fp(i.data),topic:fd(i.topicIDs[0])})}catch(s){s.message=`Failed to parse pubsub message: ${s.message}`,n(s,!1,i)}}catch(a){f_(a)||n(a,!0)}finally{r()}}let f_=e=>{switch(e.type){case"aborted":case"abort":return!0;default:return"AbortError"===e.name}},fx=(e,t)=>async function(e,r){t.unsubscribe(e,r)};class fS{constructor(){this._subs=new Map}subscribe(e,t,r){let n=this._subs.get(e)||[];if(n.find(e=>e.handler===t))throw Error(`Already subscribed to ${e} with this handler`);let i=new AbortController;return this._subs.set(e,[{handler:t,controller:i}].concat(n)),r&&r.addEventListener("abort",()=>this.unsubscribe(e,t)),i.signal}unsubscribe(e,t){let r;let n=this._subs.get(e)||[];t?(this._subs.set(e,n.filter(e=>e.handler!==t)),r=n.filter(e=>e.handler===t)):(this._subs.set(e,[]),r=n),(this._subs.get(e)||[]).length||this._subs.delete(e),r.forEach(e=>e.controller.abort())}}let fT=uS(e=>async function*(t={}){let r=await e.post("refs/local",{signal:t.signal,transform:pE,searchParams:uC(t),headers:t.headers});yield*r.ndjson()}),fE=uS((e,t)=>{let r=async function*(t,r={}){let n=Array.isArray(t)?t:[t],i=await e.post("refs",{signal:r.signal,searchParams:uC({arg:n.map(e=>`${e instanceof Uint8Array?sE.decode(e):e}`),...r}),headers:r.headers,transform:pE});yield*i.ndjson()};return Object.assign(r,{local:fT(t)})}),fC=uS(e=>async function*(t={}){let r=await e.post("repo/gc",{signal:t.signal,searchParams:uC(t),headers:t.headers,transform:e=>({err:e.Error?Error(e.Error):null,cid:(e.Key||{})["/"]?sE.parse(e.Key["/"]):null})});yield*r.ndjson()}),fk=uS(e=>async function(t={}){let r=await e.post("repo/stat",{signal:t.signal,searchParams:uC(t),headers:t.headers}),n=await r.json();return{numObjects:BigInt(n.NumObjects),repoSize:BigInt(n.RepoSize),repoPath:n.RepoPath,version:n.Version,storageMax:BigInt(n.StorageMax)}}),fR=uS(e=>async function(t={}){let r=await (await e.post("repo/version",{signal:t.signal,searchParams:uC(t),headers:t.headers})).json();return r.Version}),fP=uS(e=>async function*(t={}){let r=await e.post("stats/bw",{signal:t.signal,searchParams:uC(t),headers:t.headers,transform:e=>({totalIn:BigInt(e.TotalIn),totalOut:BigInt(e.TotalOut),rateIn:parseFloat(e.RateIn),rateOut:parseFloat(e.RateOut)})});yield*r.ndjson()}),fD=uS(e=>async function(t={}){let r=await e.post("swarm/addrs",{signal:t.signal,searchParams:uC(t),headers:t.headers}),{Addrs:n}=await r.json();return Object.keys(n).map(e=>({id:d0(e),addrs:(n[e]||[]).map(e=>o6(e))}))}),fA=uS(e=>async function(t,r={}){let n=await e.post("swarm/connect",{signal:r.signal,searchParams:uC({arg:t,...r}),headers:r.headers}),{Strings:i}=await n.json();return i||[]}),fN=uS(e=>async function(t,r={}){let n=await e.post("swarm/disconnect",{signal:r.signal,searchParams:uC({arg:t,...r}),headers:r.headers}),{Strings:i}=await n.json();return i||[]}),fL=uS(e=>async function(t={}){let r=await e.post("swarm/addrs/local",{signal:t.signal,searchParams:uC(t),headers:t.headers}),{Strings:n}=await r.json();return(n||[]).map(e=>o6(e))}),fO=uS(e=>async function(t={}){let r=await e.post("swarm/peers",{signal:t.signal,searchParams:uC(t),headers:t.headers}),{Peers:n}=await r.json();return(n||[]).map(e=>({addr:o6(e.Addr),peer:d0(e.Peer),muxer:e.Muxer,latency:e.Latency,streams:e.Streams,direction:null==e.Direction?void 0:0===e.Direction?"inbound":"outbound"}))}),fI=uS(e=>async function*(t,r={}){let n=new AbortController,i=pm(n.signal,r.signal),{headers:s,body:a,total:o,parts:l}=await ph(t,n,r.headers),[c,u]="function"==typeof r.progress?fM(o,l,r.progress):[void 0,void 0],d=await e.post("add",{searchParams:uC({"stream-channels":!0,...r,progress:Boolean(c)}),onUploadProgress:u,signal:i,headers:s,body:a});for await(let p of d.ndjson())void 0!==(p=pE(p)).hash?yield function({name:e,hash:t,size:r,mode:n,mtime:i,mtimeNsecs:s}){let a={path:e,cid:sE.parse(t),size:parseInt(r)};return null!=n&&(a.mode=parseInt(n,8)),null!=i&&(a.mtime={secs:i,nsecs:s||0}),a}(p):c&&c(p.bytes||0,p.name)}),fM=(e,t,r)=>t?[void 0,fj(e,t,r)]:[r,void 0],fj=(e,t,r)=>{let n=0,i=t.length;return({loaded:s,total:a})=>{let o=Math.floor(s/a*e);for(;n<i;){let{start:l,end:c,name:u}=t[n];if(o<c){r(o-l,u);break}r(c-l,u),n+=1}}};async function*fF(e){yield e}async function f$(e){if(d8(e))return fF(fB(e));if("string"==typeof e||e instanceof String)return fF(fB(e.toString()));if(d9(e)){var t;return"function"==typeof(t=e).stream?d6(t.stream()):d6(new Response(t).body)}if(pe(e)&&(e=d6(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let r=d4(e),{value:n,done:i}=await r.peek();if(i)return fF(new Uint8Array(0));if(r.push(n),Number.isInteger(n))return fF(Uint8Array.from(await d3(r)));if(d8(n)||"string"==typeof n||n instanceof String)return pn(r,fB)}throw oG(Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT")}function fB(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?new Uint8Array(e):Array.isArray(e)?Uint8Array.from(e):oO(e.toString())}async function*fU(e,t){if(null==e)throw oG(Error(`Unexpected input: ${e}`),"ERR_UNEXPECTED_INPUT");if("string"==typeof e||e instanceof String){yield fq(e.toString(),t);return}if(d8(e)||d9(e)){yield fq(e,t);return}if(pe(e)&&(e=d6(e)),Symbol.iterator in e||Symbol.asyncIterator in e){let r=d4(e),{value:n,done:i}=await r.peek();if(i){yield{content:[]};return}if(r.push(n),Number.isInteger(n)||d8(n)||"string"==typeof n||n instanceof String){yield fq(r,t);return}throw oG(Error("Unexpected input: multiple items passed - if you are using ipfs.add, please use ipfs.addAll instead"),"ERR_UNEXPECTED_INPUT")}if(d7(e)){yield fq(e,t);return}throw oG(Error('Unexpected input: cannot convert "'+typeof e+'" into ImportCandidate'),"ERR_UNEXPECTED_INPUT")}async function fq(e,t){let{path:r,mode:n,mtime:i,content:s}=e,a={path:r||"",mode:pc(n),mtime:pu(i)};return s?a.content=await t(s):r||(a.content=await t(e)),a}let fz=uS(e=>async function*(t,r={}){let n=await e.post("cat",{signal:r.signal,searchParams:uC({arg:t.toString(),...r}),headers:r.headers});yield*n.iterator()}),fV=uS(e=>{let t=async(t={})=>{let r=await e.post("commands",{signal:t.signal,searchParams:uC(t),headers:t.headers});return r.json()};return t}),fH=uS(e=>{let t=async(t,r={})=>{let n=await e.post("dns",{signal:r.signal,searchParams:uC({arg:t,...r}),headers:r.headers}),i=await n.json();return i.Path};return t}),fW=uS(e=>()=>{let t=new URL(e.opts.base||"");return{host:t.hostname,port:t.port,protocol:t.protocol,pathname:t.pathname,"api-path":t.pathname}}),fZ=uS(e=>async function*(t,r={}){let n={arg:`${t instanceof Uint8Array?sE.decode(t):t}`,...r};n.compressionLevel&&(n["compression-level"]=n.compressionLevel,delete n.compressionLevel);let i=await e.post("get",{signal:r.signal,searchParams:uC(n),headers:r.headers});yield*i.iterator()}),fK=uS(e=>async function(t={}){let r=await e.post("id",{signal:t.signal,searchParams:uC({arg:t.peerId?t.peerId.toString():void 0,...t}),headers:t.headers}),n=await r.json(),i={...pE(n)};return i.id=d0(i.id),i.addresses&&(i.addresses=i.addresses.map(e=>o6(e))),i}),fG=e=>{let t=fK(e);return async function(e={}){let r=await t(e);return Boolean(r&&r.addresses&&r.addresses.length)}},fY=uS((e,t)=>async function*(r,n={}){let i=`${r instanceof Uint8Array?sE.decode(r):r}`;async function s(e){let r=e.Hash;if(r.includes("/")){let n=r.startsWith("/ipfs/")?r:`/ipfs/${r}`,s=await p8(t)(n);r=s.cid}else r=sE.parse(r);let a={name:e.Name,path:i+(e.Name?`/${e.Name}`:""),size:e.Size,cid:r,type:function(e){switch(e.Type){case 1:case 5:return"dir";default:return"file"}}(e)};return e.Mode&&(a.mode=parseInt(e.Mode,8)),void 0!==e.Mtime&&null!==e.Mtime&&(a.mtime={secs:e.Mtime},void 0!==e.MtimeNsecs&&null!==e.MtimeNsecs&&(a.mtime.nsecs=e.MtimeNsecs)),a}let a=await e.post("ls",{signal:n.signal,searchParams:uC({arg:i,...n}),headers:n.headers});for await(let o of a.ndjson()){if(!(o=o.Objects))throw Error("expected .Objects in results");if(!(o=o[0]))throw Error("expected one array in results.Objects");let l=o.Links;if(!Array.isArray(l))throw Error("expected one array in results.Objects[0].Links");if(!l.length){yield s(o);return}yield*l.map(s)}}),fJ=uS(e=>async function(t={}){let r=await e.post("dns",{signal:t.signal,searchParams:uC(t),headers:t.headers});return pE(await r.json())}),fQ=uS(e=>async function*(t,r={}){let n=await e.post("ping",{signal:r.signal,searchParams:uC({arg:`${t}`,...r}),headers:r.headers,transform:pE});yield*n.ndjson()}),fX=uS(e=>async function(t,r={}){let n=await e.post("resolve",{signal:r.signal,searchParams:uC({arg:t,...r}),headers:r.headers}),{Path:i}=await n.json();return i}),f0=uS(e=>{let t=async(e={})=>{throw oG(Error("Not implemented"),"ERR_NOT_IMPLEMENTED")};return t}),f1=uS(e=>async function(t={}){let r=await e.post("shutdown",{signal:t.signal,searchParams:uC(t),headers:t.headers});await r.text()}),f2=uS(e=>async function(t={}){let r=await e.post("version",{signal:t.signal,searchParams:uC(t),headers:t.headers});return{...pE(await r.json()),"ipfs-http-client":"1.0.0"}});function f5(e={}){let t={name:iN.name,code:iN.code,encode:e=>e,decode:e=>e},r=Object.values(sL);(e.ipld&&e.ipld.bases?e.ipld.bases:[]).forEach(e=>r.push(e));let n=new eI({bases:r,loadBase:e.ipld&&e.ipld.loadBase}),i=Object.values(sI);[g,y,b,w,t].concat(e.ipld&&e.ipld.codecs||[]).forEach(e=>i.push(e));let s=new ej({codecs:i,loadCodec:e.ipld&&e.ipld.loadCodec}),a=Object.values(sO);(e.ipld&&e.ipld.hashers?e.ipld.hashers:[]).forEach(e=>a.push(e));let o=new e$({hashers:a,loadHasher:e.ipld&&e.ipld.loadHasher}),l={add:function(e){let t=fI(e);return uS(()=>async function(e,r={}){return await pI(t(fU(e,f$),r))})(e)}(e),addAll:fI(e),bitswap:{wantlist:uk(e),wantlistForPeer:uR(e),unwant:d2(e),stat:d1(e)},block:{get:d5(e),put:pg(e),rm:py(e),stat:pv(e)},bootstrap:{add:pb(e),clear:pw(e),list:p_(e),reset:px(e),rm:pS(e)},cat:fz(e),commands:fV(e),config:{getAll:pR(e),get:pk(e),set:pD(e),replace:pP(e),profiles:{apply:pT(e),list:pC(e)}},dag:{export:pN(e),get:pM(s,e),import:pj(e),put:pF(s,e),resolve:p$(e)},dht:{findPeer:pU(e),findProvs:pq(e),get:pz(e),provide:pV(e),put:pH(e),query:pW(e)},diag:{cmds:pZ(e),net:pK(e),sys:pG(e)},dns:fH(e),files:{chmod:pY(e),cp:pJ(e),flush:pQ(e),ls:p0(e),mkdir:p2(e),mv:p5(e),read:p6(e),rm:p3(e),stat:p8(e),touch:p9(e),write:p7(e)},get:fZ(e),getEndpointConfig:fW(e),id:fK(e),isOnline:fG(e),key:{export:he(e),gen:ht(e),import:hr(e),info:hn(e),list:hi(e),rename:hs(e),rm:ha(e)},log:{level:ho(e),ls:hl(e),tail:hc(e)},ls:fY(e),mount:fJ(e),name:{publish:hu(e),resolve:hd(e),pubsub:{cancel:hp(e),state:hh(e),subs:hf(e)}},object:{data:hm(e),get:hg(e),links:hy(e),new:hv(e),put:hb(s,e),stat:hw(e),patch:{addLink:h_(e),appendData:hx(e),rmLink:hS(e),setData:hT(e)}},pin:{addAll:h7(e),add:function(e){let t=h7(e);return uS(()=>async function(e,r={}){return pI(t([{path:e,...r}],r))})(e)}(e),ls:ft(e),rmAll:fr(e),rm:fn(e),remote:function(e){let t=new ux(e);return{add:async function(e,{timeout:r,signal:n,headers:i,...s}){let a=await t.post("pin/remote/add",{timeout:r,signal:n,headers:i,searchParams:fl({cid:e,...s})});return fi(await a.json())},ls:async function*({timeout:e,signal:r,headers:n,...i}){let s=await t.post("pin/remote/ls",{timeout:e,signal:r,headers:n,searchParams:fo(i)});for await(let a of s.ndjson())yield fi(a)},rm:async function({timeout:e,signal:r,headers:n,...i}){await t.post("pin/remote/rm",{timeout:e,signal:r,headers:n,searchParams:fo({...i,all:!1})})},rmAll:async function({timeout:e,signal:r,headers:n,...i}){await t.post("pin/remote/rm",{timeout:e,signal:r,headers:n,searchParams:fo({...i,all:!0})})},service:function(e){let t=new ux(e);return{add:async function(e,r){let{endpoint:n,key:i,headers:s,timeout:a,signal:o}=r;await t.post("pin/remote/service/add",{timeout:a,signal:o,searchParams:uC({arg:[e,function(e){let t=String(e);if("undefined"===t)throw Error("endpoint is required");return"/"===t[t.length-1]?t.slice(0,-1):t}(n),i]}),headers:s})},ls:async function(e={}){let{stat:r,headers:n,timeout:i,signal:s}=e,a=await t.post("pin/remote/service/ls",{timeout:i,signal:s,headers:n,searchParams:!0===r?uC({stat:r}):void 0}),{RemoteServices:o}=await a.json();return o.map(fc)},rm:async function(e,r={}){await t.post("pin/remote/service/rm",{signal:r.signal,headers:r.headers,searchParams:uC({arg:e})})}}}(e)}}(e)},ping:fQ(e),pubsub:function(e){let t=new fS;return{ls:fm(e),peers:fg(e),publish:fy(e),subscribe:fb(e,t),unsubscribe:fx(e,t)}}(e),refs:fE(e),repo:{gc:fC(e),stat:fk(e),version:fR(e)},resolve:fX(e),start:f0(e),stats:{bitswap:d1(e),repo:fk(e),bw:fP(e)},stop:f1(e),swarm:{addrs:fD(e),connect:fA(e),disconnect:fN(e),localAddrs:fL(e),peers:fO(e)},version:f2(e),bases:n,codecs:s,hashers:o};return l}r(63897),r(46953)},48583:function(e,t,r){"use strict";r.d(t,{KO:function(){return c}});var n=r(67294),i=r(15103);let s=(0,n.createContext)(void 0),a=e=>{let t=(0,n.useContext)(s);return(null==e?void 0:e.store)||t||(0,i.K7)()},o=e=>"function"==typeof(null==e?void 0:e.then),l=n.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;if("rejected"===e.status)throw e.reason;throw e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e});function c(e,t){return[function(e,t){let r=a(t),[[i,s,c],u]=(0,n.useReducer)(t=>{let n=r.get(e);return Object.is(t[0],n)&&t[1]===r&&t[2]===e?t:[n,r,e]},void 0,()=>[r.get(e),r,e]),d=i;(s!==r||c!==e)&&(u(),d=r.get(e));let p=null==t?void 0:t.delay;return(0,n.useEffect)(()=>{let t=r.sub(e,()=>{if("number"==typeof p){setTimeout(u,p);return}u()});return u(),t},[r,e,p]),(0,n.useDebugValue)(d),o(d)?l(d):d}(e,t),function(e,t){let r=a(t),i=(0,n.useCallback)((...t)=>{if(!("write"in e))throw Error("not writable atom");return r.set(e,...t)},[r,e]);return i}(e,t)]}},15103:function(e,t,r){"use strict";let n;r.d(t,{K7:function(){return w},cn:function(){return s}});let i=0;function s(e,t){let r=`atom${++i}`,n={toString:()=>r};return"function"==typeof e?n.read=e:(n.init=e,n.read=e=>e(n),n.write=(e,t,r)=>t(n,"function"==typeof r?r(e(n)):r)),t&&(n.write=t),n}let a=e=>"init"in e,o=e=>!!e.write,l=new WeakMap,c=(e,t)=>{l.set(e,t),e.catch(()=>{}).finally(()=>l.delete(e))},u=(e,t)=>{let r=l.get(e);r&&(l.delete(e),r(t))},d=(e,t)=>{e.status="fulfilled",e.value=t},p=(e,t)=>{e.status="rejected",e.reason=t},h=e=>"function"==typeof(null==e?void 0:e.then),f=(e,t)=>"v"in e&&"v"in t&&Object.is(e.v,t.v),m=(e,t)=>"e"in e&&"e"in t&&Object.is(e.e,t.e),g=e=>"v"in e&&e.v instanceof Promise,y=(e,t)=>"v"in e&&"v"in t&&e.v.orig&&e.v.orig===t.v.orig,v=e=>{if("e"in e)throw e.e;return e.v},b=()=>{let e,t,r;let n=new WeakMap,i=new WeakMap,s=new Map;e=new Set,t=new Set,r=new Set;let l=e=>n.get(e),b=(e,t)=>{Object.freeze(t);let r=n.get(e);if(n.set(e,t),s.has(e)||s.set(e,r),r&&g(r)){let i="v"in t?t.v instanceof Promise?t.v:Promise.resolve(t.v):Promise.reject(t.e);u(r.v,i)}},w=(e,t,r)=>{let n=new Map,i=!1;r.forEach((r,s)=>{r||s!==e||(r=t),r?(n.set(s,r),t.d.get(s)!==r&&(i=!0)):console.warn("[Bug] atom state not found")}),(i||t.d.size!==n.size)&&(t.d=n)},_=(e,t,r)=>{let n=l(e),i={d:(null==n?void 0:n.d)||new Map,v:t};if(r&&w(e,i,r),n&&f(n,i)&&n.d===i.d)return n;if(n&&g(n)&&g(i)&&y(n,i)){if(n.d===i.d)return n;i.v=n.v}return b(e,i),i},x=(e,t,r,n)=>{if(h(t)){let i;let s=new Promise((n,a)=>{let o=!1;t.then(t=>{if(!o){o=!0;let i=l(e),a=_(e,s,r);d(s,t),n(t),(null==i?void 0:i.d)!==a.d&&O(e,a,null==i?void 0:i.d)}},t=>{if(!o){o=!0;let n=l(e),i=_(e,s,r);p(s,t),a(t),(null==n?void 0:n.d)!==i.d&&O(e,i,null==n?void 0:n.d)}}),i=e=>{o||(o=!0,e.then(e=>d(s,e),e=>p(s,e)),n(e))}});return s.orig=t,s.status="pending",c(s,e=>{e&&i(e),null==n||n()}),_(e,s,r)}return _(e,t,r)},S=(e,t,r)=>{let n=l(e),i={d:(null==n?void 0:n.d)||new Map,e:t};return(r&&w(e,i,r),n&&m(n,i)&&n.d===i.d)?n:(b(e,i),i)},T=e=>{let t,r;let n=l(e);if(n&&(n.d.forEach((t,r)=>{r===e||i.has(r)||T(r)}),Array.from(n.d).every(([t,r])=>{let n=l(t);return t===e||n===r||n&&!g(n)&&f(n,r)})))return n;let s=new Map,c=!0,u=t=>{if(t===e){let r=l(t);if(r)return s.set(t,r),v(r);if(a(t))return s.set(t,void 0),t.init;throw Error("no atom init")}let n=T(t);return s.set(t,n),v(n)},d={get signal(){return t||(t=new AbortController),t.signal},get setSelf(){return o(e)||console.warn("setSelf function cannot be used with read-only atom"),!r&&o(e)&&(r=(...t)=>{if(c&&console.warn("setSelf function cannot be called in sync"),!c)return A(e,...t)}),r}};try{let p=e.read(u,d);return x(e,p,s,()=>null==t?void 0:t.abort())}catch(h){return S(e,h,s)}finally{c=!1}},E=e=>v(T(e)),C=e=>{let t=i.get(e);return t||(t=N(e)),t},k=(e,t)=>!t.l.size&&(!t.t.size||1===t.t.size&&t.t.has(e)),R=e=>{let t=i.get(e);t&&k(e,t)&&L(e)},P=e=>{let t=new Map,r=new WeakMap,n=e=>{let s=i.get(e);null==s||s.t.forEach(i=>{i!==e&&(t.set(i,(t.get(i)||new Set).add(e)),r.set(i,(r.get(i)||0)+1),n(i))})};n(e);let s=e=>{let n=i.get(e);null==n||n.t.forEach(n=>{var i;if(n!==e){let a=r.get(n);if(a&&r.set(n,--a),!a){let o=!!(null==(i=t.get(n))?void 0:i.size);if(o){let c=l(n),u=T(n);o=!c||!f(c,u)}o||t.forEach(e=>e.delete(n))}s(n)}})};s(e)},D=(e,...r)=>{let n=!0,i=e=>v(T(e)),s=(r,...i)=>{let s;if(r===e){if(!a(r))throw Error("atom not writable");let o=l(r),c=x(r,i[0]);o&&f(o,c)||P(r)}else s=D(r,...i);if(!n){let u=I();t.forEach(e=>e({type:"async-write",flushed:u}))}return s},o=e.write(i,s,...r);return n=!1,o},A=(e,...r)=>{let n=D(e,...r),i=I();return t.forEach(e=>e({type:"write",flushed:i})),n},N=(e,t)=>{let n={t:new Set(t&&[t]),l:new Set};if(i.set(e,n),r.add(e),T(e).d.forEach((t,r)=>{let n=i.get(r);n?n.t.add(e):r!==e&&N(r,e)}),T(e),o(e)&&e.onMount){let s=e.onMount((...t)=>A(e,...t));s&&(n.u=s)}return n},L=e=>{var t;let n=null==(t=i.get(e))?void 0:t.u;n&&n(),i.delete(e),r.delete(e);let s=l(e);s?(g(s)&&u(s.v),s.d.forEach((t,r)=>{if(r!==e){let n=i.get(r);n&&(n.t.delete(e),k(r,n)&&L(r))}})):console.warn("[Bug] could not find atom state to unmount",e)},O=(e,t,r)=>{let n=new Set(t.d.keys());null==r||r.forEach((t,r)=>{if(n.has(r)){n.delete(r);return}let s=i.get(r);s&&(s.t.delete(e),k(r,s)&&L(r))}),n.forEach(t=>{let r=i.get(t);r?r.t.add(e):i.has(e)&&N(t,e)})},I=()=>{let t;for(t=new Set;s.size;){let r=Array.from(s);s.clear(),r.forEach(([e,r])=>{let n=l(e);if(n){n.d!==(null==r?void 0:r.d)&&O(e,n,null==r?void 0:r.d);let s=i.get(e);s&&!(r&&!g(r)&&(f(r,n)||m(r,n)))&&(s.l.forEach(e=>e()),t.add(e))}else console.warn("[Bug] no atom state to flush")})}return e.forEach(e=>e("state")),t},M=(r,n)=>{let i=C(r),s=I(),a=i.l;return a.add(n),e.forEach(e=>e("sub")),t.forEach(e=>e({type:"sub",flushed:s})),()=>{a.delete(n),R(r),e.forEach(e=>e("unsub")),t.forEach(e=>e({type:"unsub"}))}};return{get:E,set:A,sub:M,dev_subscribe_store:(r,n)=>2!==n?(console.warn("The current StoreListener revision is 2. The older ones are deprecated."),e.add(r),()=>{e.delete(r)}):(t.add(r),()=>{t.delete(r)}),dev_get_mounted_atoms:()=>r.values(),dev_get_atom_state:e=>n.get(e),dev_get_mounted:e=>i.get(e),dev_restore_atoms:e=>{for(let[r,n]of e)a(r)&&(x(r,n),P(r));let i=I();t.forEach(e=>e({type:"restore",flushed:i}))}}},w=()=>(n||(n=b()),n)}},function(e){e.O(0,[1228,3874,6556,8179,4355,5937,9412,4617,1664,1618,1098,5675,2697,8451,1889,3775,2438,7536,5678,1318,8476,4156,2400,23,6214,6781,7635,7331,8439,4638,1488,3261,8151,9774,2888,179],function(){return e(e.s=28033)}),_N_E=e.O()}]);